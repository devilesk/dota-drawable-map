{"version":3,"sources":["node_modules/browser-pack/_prelude.js","app/all.js","node_modules/d3-array/build/d3-array.js","node_modules/d3-collection/build/d3-collection.js","node_modules/d3-color/build/d3-color.js","node_modules/d3-format/build/d3-format.js","node_modules/d3-geo/build/d3-geo.js","node_modules/d3-interpolate/build/d3-interpolate.js","node_modules/d3-scale/build/d3-scale.js","node_modules/d3-selection/build/d3-selection.js","node_modules/d3-time-format/build/d3-time-format.js","node_modules/d3-time/build/d3-time.js"],"names":[],"mappings":"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AI,UAAU,cAAc,SAAd,CAAwB,EAAC,QAAQ,KAAT,EAAgB,YAAY,CAA5B,EAAxB,CAAd;AACA,QAAI,aAAa,QAAQ,MAAR,CAAe,EAAf,EAAmB,QAAQ,MAA3B,CAAjB;AACA,QAAI,OAAO,cAAc,OAAd,CAAX;AACA,QAAI,SAAS,IAAI,eAAJ,CAAoB,IAApB,CAAb;;AAEA,SAAK,QAAL,GAAgB,WAAhB;;AAEA,SAAK,IAAL,GAAY,MAAZ;;AAEA,SAAK,KAAL;AACH;;AAED,WAAS,QAAT,GAAoB;AAChB,QAAI,SAAS,IAAI,WAAW,MAAX,CAAkB,OAAtB,EAAb;AACA,QAAI,OAAO,KAAK,KAAL,CAAW,OAAO,KAAP,CAAa,QAAQ,QAArB,CAAX,CAAX;AACA,YAAQ,GAAR,CAAY,IAAZ,EAAkB,QAAQ,QAA1B;AACA,cAAU,IAAV,EAAgB,YAAhB;AACH;;AAED,IAAE,SAAF,EAAa,KAAb,CAAmB,QAAnB;AACH,CA/NY,EAAb;;;AC1txDJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/cA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjrFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7hBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACr4BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC58BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"bundle.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/*\n\n  OpenLayers.js -- OpenLayers Map Viewer Library\n\n  Copyright (c) 2006-2015 by OpenLayers Contributors\n  Published under the 2-clause BSD license.\n  See https://raw.githubusercontent.com/openlayers/ol2/master/license.txt for the full text of the license, and https://raw.githubusercontent.com/openlayers/ol2/master/authors.txt for full list of contributors.\n\n  Includes compressed code under the following licenses:\n\n  (For uncompressed versions of the code used, please see the\n  OpenLayers Github repository: <https://github.com/openlayers/ol2>)\n\n*/\n\n/**\n * Contains XMLHttpRequest.js <http://code.google.com/p/xmlhttprequest/>\n * Copyright 2007 Sergey Ilinsky (http://www.ilinsky.com)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\n/**\n * OpenLayers.Util.pagePosition is based on Yahoo's getXY method, which is\n * Copyright (c) 2006, Yahoo! Inc.\n * All rights reserved.\n *\n * Redistribution and use of this software in source and binary forms, with or\n * without modification, are permitted provided that the following conditions\n * are met:\n *\n * * Redistributions of source code must retain the above copyright notice,\n *   this list of conditions and the following disclaimer.\n *\n * * Redistributions in binary form must reproduce the above copyright notice,\n *   this list of conditions and the following disclaimer in the documentation\n *   and/or other materials provided with the distribution.\n *\n * * Neither the name of Yahoo! Inc. nor the names of its contributors may be\n *   used to endorse or promote products derived from this software without\n *   specific prior written permission of Yahoo! Inc.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n * POSSIBILITY OF SUCH DAMAGE.\n */\n/* ======================================================================\n    OpenLayers/SingleFile.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\nvar OpenLayers = {\n    /**\n     * Constant: VERSION_NUMBER\n     */\n    VERSION_NUMBER: \"Release 2.14 dev\",\n\n    /**\n     * Constant: singleFile\n     * TODO: remove this in 3.0 when we stop supporting build profiles that\n     * include OpenLayers.js\n     */\n    singleFile: true,\n\n    /**\n     * Method: _getScriptLocation\n     * Return the path to this script. This is also implemented in\n     * OpenLayers.js\n     *\n     * Returns:\n     * {String} Path to this script\n     */\n    _getScriptLocation: (function() {\n        var r = new RegExp(\"(^|(.*?\\\\/))(OpenLayers[^\\\\/]*?\\\\.js)(\\\\?|$)\"),\n            s = document.getElementsByTagName('script'),\n            src, m, l = \"\";\n        for(var i=0, len=s.length; i<len; i++) {\n            src = s[i].getAttribute('src');\n            if(src) {\n                m = src.match(r);\n                if(m) {\n                    l = m[1];\n                    break;\n                }\n            }\n        }\n        return (function() { return l; });\n    })(),\n    \n    /**\n     * Property: ImgPath\n     * {String} Set this to the path where control images are stored, a path  \n     * given here must end with a slash. If set to '' (which is the default) \n     * OpenLayers will use its script location + \"img/\".\n     * \n     * You will need to set this property when you have a singlefile build of \n     * OpenLayers that either is not named \"OpenLayers.js\" or if you move\n     * the file in a way such that the image directory cannot be derived from \n     * the script location.\n     * \n     * If your custom OpenLayers build is named \"my-custom-ol.js\" and the images\n     * of OpenLayers are in a folder \"/resources/external/images/ol\" a correct\n     * way of including OpenLayers in your HTML would be:\n     * \n     * (code)\n     *   <script src=\"/path/to/my-custom-ol.js\" type=\"text/javascript\"></script>\n     *   <script type=\"text/javascript\">\n     *      // tell OpenLayers where the control images are\n     *      // remember the trailing slash\n     *      OpenLayers.ImgPath = \"/resources/external/images/ol/\";\n     *   </script>\n     * (end code)\n     * \n     * Please remember that when your OpenLayers script is not named \n     * \"OpenLayers.js\" you will have to make sure that the default theme is \n     * loaded into the page by including an appropriate <link>-tag, \n     * e.g.:\n     * \n     * (code)\n     *   <link rel=\"stylesheet\" href=\"/path/to/default/style.css\"  type=\"text/css\">\n     * (end code)\n     */\n    ImgPath : ''\n};\n/* ======================================================================\n    OpenLayers/BaseTypes/Class.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/SingleFile.js\n */\n\n/**\n * Constructor: OpenLayers.Class\n * Base class used to construct all other classes. Includes support for \n *     multiple inheritance. \n *     \n * This constructor is new in OpenLayers 2.5.  At OpenLayers 3.0, the old \n *     syntax for creating classes and dealing with inheritance \n *     will be removed.\n * \n * To create a new OpenLayers-style class, use the following syntax:\n * (code)\n *     var MyClass = OpenLayers.Class(prototype);\n * (end)\n *\n * To create a new OpenLayers-style class with multiple inheritance, use the\n *     following syntax:\n * (code)\n *     var MyClass = OpenLayers.Class(Class1, Class2, prototype);\n * (end)\n * \n * Note that instanceof reflection will only reveal Class1 as superclass.\n *\n */\nOpenLayers.Class = function() {\n    var len = arguments.length;\n    var P = arguments[0];\n    var F = arguments[len-1];\n\n    var C = typeof F.initialize == \"function\" ?\n        F.initialize :\n        function(){ P.prototype.initialize.apply(this, arguments); };\n\n    if (len > 1) {\n        var newArgs = [C, P].concat(\n                Array.prototype.slice.call(arguments).slice(1, len-1), F);\n        OpenLayers.inherit.apply(null, newArgs);\n    } else {\n        C.prototype = F;\n    }\n    return C;\n};\n\n/**\n * Function: OpenLayers.inherit\n *\n * Parameters:\n * C - {Object} the class that inherits\n * P - {Object} the superclass to inherit from\n *\n * In addition to the mandatory C and P parameters, an arbitrary number of\n * objects can be passed, which will extend C.\n */\nOpenLayers.inherit = function(C, P) {\n   var F = function() {};\n   F.prototype = P.prototype;\n   C.prototype = new F;\n   var i, l, o;\n   for(i=2, l=arguments.length; i<l; i++) {\n       o = arguments[i];\n       if(typeof o === \"function\") {\n           o = o.prototype;\n       }\n       OpenLayers.Util.extend(C.prototype, o);\n   }\n};\n\n/**\n * APIFunction: extend\n * Copy all properties of a source object to a destination object.  Modifies\n *     the passed in destination object.  Any properties on the source object\n *     that are set to undefined will not be (re)set on the destination object.\n *\n * Parameters:\n * destination - {Object} The object that will be modified\n * source - {Object} The object with properties to be set on the destination\n *\n * Returns:\n * {Object} The destination object.\n */\nOpenLayers.Util = OpenLayers.Util || {};\nOpenLayers.Util.extend = function(destination, source) {\n    destination = destination || {};\n    if (source) {\n        for (var property in source) {\n            var value = source[property];\n            if (value !== undefined) {\n                destination[property] = value;\n            }\n        }\n\n        /**\n         * IE doesn't include the toString property when iterating over an object's\n         * properties with the for(property in object) syntax.  Explicitly check if\n         * the source has its own toString property.\n         */\n\n        /*\n         * FF/Windows < 2.0.0.13 reports \"Illegal operation on WrappedNative\n         * prototype object\" when calling hawOwnProperty if the source object\n         * is an instance of window.Event.\n         */\n\n        var sourceIsEvt = typeof window.Event == \"function\"\n                          && source instanceof window.Event;\n\n        if (!sourceIsEvt\n           && source.hasOwnProperty && source.hasOwnProperty(\"toString\")) {\n            destination.toString = source.toString;\n        }\n    }\n    return destination;\n};\n/* ======================================================================\n    OpenLayers/BaseTypes.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/SingleFile.js\n */\n\n/** \n * Header: OpenLayers Base Types\n * OpenLayers custom string, number and function functions are described here.\n */\n\n/**\n * Namespace: OpenLayers.String\n * Contains convenience functions for string manipulation.\n */\nOpenLayers.String = {\n\n    /**\n     * APIFunction: startsWith\n     * Test whether a string starts with another string. \n     * \n     * Parameters:\n     * str - {String} The string to test.\n     * sub - {String} The substring to look for.\n     *  \n     * Returns:\n     * {Boolean} The first string starts with the second.\n     */\n    startsWith: function(str, sub) {\n        return (str.indexOf(sub) == 0);\n    },\n\n    /**\n     * APIFunction: contains\n     * Test whether a string contains another string.\n     * \n     * Parameters:\n     * str - {String} The string to test.\n     * sub - {String} The substring to look for.\n     * \n     * Returns:\n     * {Boolean} The first string contains the second.\n     */\n    contains: function(str, sub) {\n        return (str.indexOf(sub) != -1);\n    },\n    \n    /**\n     * APIFunction: trim\n     * Removes leading and trailing whitespace characters from a string.\n     * \n     * Parameters:\n     * str - {String} The (potentially) space padded string.  This string is not\n     *     modified.\n     * \n     * Returns:\n     * {String} A trimmed version of the string with all leading and \n     *     trailing spaces removed.\n     */\n    trim: function(str) {\n        return str.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n    },\n    \n    /**\n     * APIFunction: camelize\n     * Camel-case a hyphenated string. \n     *     Ex. \"chicken-head\" becomes \"chickenHead\", and\n     *     \"-chicken-head\" becomes \"ChickenHead\".\n     *\n     * Parameters:\n     * str - {String} The string to be camelized.  The original is not modified.\n     * \n     * Returns:\n     * {String} The string, camelized\n     */\n    camelize: function(str) {\n        var oStringList = str.split('-');\n        var camelizedString = oStringList[0];\n        for (var i=1, len=oStringList.length; i<len; i++) {\n            var s = oStringList[i];\n            camelizedString += s.charAt(0).toUpperCase() + s.substring(1);\n        }\n        return camelizedString;\n    },\n    \n    /**\n     * APIFunction: format\n     * Given a string with tokens in the form ${token}, return a string\n     *     with tokens replaced with properties from the given context\n     *     object.  Represent a literal \"${\" by doubling it, e.g. \"${${\".\n     *\n     * Parameters:\n     * template - {String} A string with tokens to be replaced.  A template\n     *     has the form \"literal ${token}\" where the token will be replaced\n     *     by the value of context[\"token\"].\n     * context - {Object} An optional object with properties corresponding\n     *     to the tokens in the format string.  If no context is sent, the\n     *     window object will be used.\n     * args - {Array} Optional arguments to pass to any functions found in\n     *     the context.  If a context property is a function, the token\n     *     will be replaced by the return from the function called with\n     *     these arguments.\n     *\n     * Returns:\n     * {String} A string with tokens replaced from the context object.\n     */\n    format: function(template, context, args) {\n        if(!context) {\n            context = window;\n        }\n\n        // Example matching: \n        // str   = ${foo.bar}\n        // match = foo.bar\n        var replacer = function(str, match) {\n            var replacement;\n\n            // Loop through all subs. Example: ${a.b.c}\n            // 0 -> replacement = context[a];\n            // 1 -> replacement = context[a][b];\n            // 2 -> replacement = context[a][b][c];\n            var subs = match.split(/\\.+/);\n            for (var i=0; i< subs.length; i++) {\n                if (i == 0) {\n                    replacement = context;\n                }\n                if (replacement === undefined) {\n                    break;\n                }\n                replacement = replacement[subs[i]];\n            }\n\n            if(typeof replacement == \"function\") {\n                replacement = args ?\n                    replacement.apply(null, args) :\n                    replacement();\n            }\n\n            // If replacement is undefined, return the string 'undefined'.\n            // This is a workaround for a bugs in browsers not properly \n            // dealing with non-participating groups in regular expressions:\n            // http://blog.stevenlevithan.com/archives/npcg-javascript\n            if (typeof replacement == 'undefined') {\n                return 'undefined';\n            } else {\n                return replacement; \n            }\n        };\n\n        return template.replace(OpenLayers.String.tokenRegEx, replacer);\n    },\n\n    /**\n     * Property: tokenRegEx\n     * Used to find tokens in a string.\n     * Examples: ${a}, ${a.b.c}, ${a-b}, ${5}\n     */\n    tokenRegEx:  /\\$\\{([\\w.]+?)\\}/g,\n    \n    /**\n     * Property: numberRegEx\n     * Used to test strings as numbers.\n     */\n    numberRegEx: /^([+-]?)(?=\\d|\\.\\d)\\d*(\\.\\d*)?([Ee]([+-]?\\d+))?$/,\n    \n    /**\n     * APIFunction: isNumeric\n     * Determine whether a string contains only a numeric value.\n     *\n     * Examples:\n     * (code)\n     * OpenLayers.String.isNumeric(\"6.02e23\") // true\n     * OpenLayers.String.isNumeric(\"12 dozen\") // false\n     * OpenLayers.String.isNumeric(\"4\") // true\n     * OpenLayers.String.isNumeric(\" 4 \") // false\n     * (end)\n     *\n     * Returns:\n     * {Boolean} String contains only a number.\n     */\n    isNumeric: function(value) {\n        return OpenLayers.String.numberRegEx.test(value);\n    },\n    \n    /**\n     * APIFunction: numericIf\n     * Converts a string that appears to be a numeric value into a number.\n     * \n     * Parameters:\n     * value - {String}\n     * trimWhitespace - {Boolean}\n     *\n     * Returns:\n     * {Number|String} a Number if the passed value is a number, a String\n     *     otherwise. \n     */\n    numericIf: function(value, trimWhitespace) {\n        var originalValue = value;\n        if (trimWhitespace === true && value != null && value.replace) {\n            value = value.replace(/^\\s*|\\s*$/g, \"\");\n        }\n        return OpenLayers.String.isNumeric(value) ? parseFloat(value) : originalValue;\n    }\n\n};\n\n/**\n * Namespace: OpenLayers.Number\n * Contains convenience functions for manipulating numbers.\n */\nOpenLayers.Number = {\n\n    /**\n     * Property: decimalSeparator\n     * Decimal separator to use when formatting numbers.\n     */\n    decimalSeparator: \".\",\n    \n    /**\n     * Property: thousandsSeparator\n     * Thousands separator to use when formatting numbers.\n     */\n    thousandsSeparator: \",\",\n    \n    /**\n     * APIFunction: limitSigDigs\n     * Limit the number of significant digits on a float.\n     * \n     * Parameters:\n     * num - {Float}\n     * sig - {Integer}\n     * \n     * Returns:\n     * {Float} The number, rounded to the specified number of significant\n     *     digits.\n     */\n    limitSigDigs: function(num, sig) {\n        var fig = 0;\n        if (sig > 0) {\n            fig = parseFloat(num.toPrecision(sig));\n        }\n        return fig;\n    },\n    \n    /**\n     * APIFunction: format\n     * Formats a number for output.\n     * \n     * Parameters:\n     * num  - {Float}\n     * dec  - {Integer} Number of decimal places to round to.\n     *        Defaults to 0. Set to null to leave decimal places unchanged.\n     * tsep - {String} Thousands separator.\n     *        Default is \",\".\n     * dsep - {String} Decimal separator.\n     *        Default is \".\".\n     *\n     * Returns:\n     * {String} A string representing the formatted number.\n     */\n    format: function(num, dec, tsep, dsep) {\n        dec = (typeof dec != \"undefined\") ? dec : 0; \n        tsep = (typeof tsep != \"undefined\") ? tsep :\n            OpenLayers.Number.thousandsSeparator; \n        dsep = (typeof dsep != \"undefined\") ? dsep :\n            OpenLayers.Number.decimalSeparator;\n\n        if (dec != null) {\n            num = parseFloat(num.toFixed(dec));\n        }\n\n        var parts = num.toString().split(\".\");\n        if (parts.length == 1 && dec == null) {\n            // integer where we do not want to touch the decimals\n            dec = 0;\n        }\n        \n        var integer = parts[0];\n        if (tsep) {\n            var thousands = /(-?[0-9]+)([0-9]{3})/; \n            while(thousands.test(integer)) { \n                integer = integer.replace(thousands, \"$1\" + tsep + \"$2\"); \n            }\n        }\n        \n        var str;\n        if (dec == 0) {\n            str = integer;\n        } else {\n            var rem = parts.length > 1 ? parts[1] : \"0\";\n            if (dec != null) {\n                rem = rem + new Array(dec - rem.length + 1).join(\"0\");\n            }\n            str = integer + dsep + rem;\n        }\n        return str;\n    },\n\n    /**\n     * Method: zeroPad\n     * Create a zero padded string optionally with a radix for casting numbers.\n     *\n     * Parameters:\n     * num - {Number} The number to be zero padded.\n     * len - {Number} The length of the string to be returned.\n     * radix - {Number} An integer between 2 and 36 specifying the base to use\n     *     for representing numeric values.\n     */\n    zeroPad: function(num, len, radix) {\n        var str = num.toString(radix || 10);\n        while (str.length < len) {\n            str = \"0\" + str;\n        }\n        return str;\n    }    \n};\n\n/**\n * Namespace: OpenLayers.Function\n * Contains convenience functions for function manipulation.\n */\nOpenLayers.Function = {\n    /**\n     * APIFunction: bind\n     * Bind a function to an object.  Method to easily create closures with\n     *     'this' altered.\n     * \n     * Parameters:\n     * func - {Function} Input function.\n     * object - {Object} The object to bind to the input function (as this).\n     * \n     * Returns:\n     * {Function} A closure with 'this' set to the passed in object.\n     */\n    bind: function(func, object) {\n        // create a reference to all arguments past the second one\n        var args = Array.prototype.slice.call(arguments, 2);\n        return function() {\n            // Push on any additional arguments from the actual function call.\n            // These will come after those sent to the bind call.\n            var newArgs = args.concat(\n                Array.prototype.slice.call(arguments, 0)\n            );\n            return func.apply(object, newArgs);\n        };\n    },\n    \n    /**\n     * APIFunction: bindAsEventListener\n     * Bind a function to an object, and configure it to receive the event\n     *     object as first parameter when called. \n     * \n     * Parameters:\n     * func - {Function} Input function to serve as an event listener.\n     * object - {Object} A reference to this.\n     * \n     * Returns:\n     * {Function}\n     */\n    bindAsEventListener: function(func, object) {\n        return function(event) {\n            return func.call(object, event || window.event);\n        };\n    },\n    \n    /**\n     * APIFunction: False\n     * A simple function to that just does \"return false\". We use this to \n     * avoid attaching anonymous functions to DOM event handlers, which \n     * causes \"issues\" on IE<8.\n     * \n     * Usage:\n     * document.onclick = OpenLayers.Function.False;\n     * \n     * Returns:\n     * {Boolean}\n     */\n    False : function() {\n        return false;\n    },\n\n    /**\n     * APIFunction: True\n     * A simple function to that just does \"return true\". We use this to \n     * avoid attaching anonymous functions to DOM event handlers, which \n     * causes \"issues\" on IE<8.\n     * \n     * Usage:\n     * document.onclick = OpenLayers.Function.True;\n     * \n     * Returns:\n     * {Boolean}\n     */\n    True : function() {\n        return true;\n    },\n    \n    /**\n     * APIFunction: Void\n     * A reusable function that returns ``undefined``.\n     *\n     * Returns:\n     * {undefined}\n     */\n    Void: function() {}\n\n};\n\n/**\n * Namespace: OpenLayers.Array\n * Contains convenience functions for array manipulation.\n */\nOpenLayers.Array = {\n\n    /**\n     * APIMethod: filter\n     * Filter an array.  Provides the functionality of the\n     *     Array.prototype.filter extension to the ECMA-262 standard.  Where\n     *     available, Array.prototype.filter will be used.\n     *\n     * Based on well known example from http://developer.mozilla.org/en/Core_JavaScript_1.5_Reference/Global_Objects/Array/filter\n     *\n     * Parameters:\n     * array - {Array} The array to be filtered.  This array is not mutated.\n     *     Elements added to this array by the callback will not be visited.\n     * callback - {Function} A function that is called for each element in\n     *     the array.  If this function returns true, the element will be\n     *     included in the return.  The function will be called with three\n     *     arguments: the element in the array, the index of that element, and\n     *     the array itself.  If the optional caller parameter is specified\n     *     the callback will be called with this set to caller.\n     * caller - {Object} Optional object to be set as this when the callback\n     *     is called.\n     *\n     * Returns:\n     * {Array} An array of elements from the passed in array for which the\n     *     callback returns true.\n     */\n    filter: function(array, callback, caller) {\n        var selected = [];\n        if (Array.prototype.filter) {\n            selected = array.filter(callback, caller);\n        } else {\n            var len = array.length;\n            if (typeof callback != \"function\") {\n                throw new TypeError();\n            }\n            for(var i=0; i<len; i++) {\n                if (i in array) {\n                    var val = array[i];\n                    if (callback.call(caller, val, i, array)) {\n                        selected.push(val);\n                    }\n                }\n            }        \n        }\n        return selected;\n    }\n    \n};\n/* ======================================================================\n    OpenLayers/BaseTypes/Bounds.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/BaseTypes/Class.js\n */\n\n/**\n * Class: OpenLayers.Bounds\n * Instances of this class represent bounding boxes.  Data stored as left,\n * bottom, right, top floats. All values are initialized to null, however,\n * you should make sure you set them before using the bounds for anything.\n * \n * Possible use case:\n * (code)\n *     bounds = new OpenLayers.Bounds();\n *     bounds.extend(new OpenLayers.LonLat(4,5));\n *     bounds.extend(new OpenLayers.LonLat(5,6));\n *     bounds.toBBOX(); // returns 4,5,5,6\n * (end)\n */\nOpenLayers.Bounds = OpenLayers.Class({\n\n    /**\n     * Property: left\n     * {Number} Minimum horizontal coordinate.\n     */\n    left: null,\n\n    /**\n     * Property: bottom\n     * {Number} Minimum vertical coordinate.\n     */\n    bottom: null,\n\n    /**\n     * Property: right\n     * {Number} Maximum horizontal coordinate.\n     */\n    right: null,\n\n    /**\n     * Property: top\n     * {Number} Maximum vertical coordinate.\n     */\n    top: null,\n    \n    /**\n     * Property: centerLonLat\n     * {<OpenLayers.LonLat>} A cached center location.  This should not be\n     *     accessed directly.  Use <getCenterLonLat> instead.\n     */\n    centerLonLat: null,\n\n    /**\n     * Constructor: OpenLayers.Bounds\n     * Construct a new bounds object. Coordinates can either be passed as four\n     * arguments, or as a single argument.\n     *\n     * Parameters (four arguments):\n     * left - {Number} The left bounds of the box.  Note that for width\n     *        calculations, this is assumed to be less than the right value.\n     * bottom - {Number} The bottom bounds of the box.  Note that for height\n     *          calculations, this is assumed to be less than the top value.\n     * right - {Number} The right bounds.\n     * top - {Number} The top bounds.\n     *\n     * Parameters (single argument):\n     * bounds - {Array(Number)} [left, bottom, right, top]\n     */\n    initialize: function(left, bottom, right, top) {\n        if (OpenLayers.Util.isArray(left)) {\n            top = left[3];\n            right = left[2];\n            bottom = left[1];\n            left = left[0];\n        }\n        if (left != null) {\n            this.left = OpenLayers.Util.toFloat(left);\n        }\n        if (bottom != null) {\n            this.bottom = OpenLayers.Util.toFloat(bottom);\n        }\n        if (right != null) {\n            this.right = OpenLayers.Util.toFloat(right);\n        }\n        if (top != null) {\n            this.top = OpenLayers.Util.toFloat(top);\n        }\n    },\n\n    /**\n     * Method: clone\n     * Create a cloned instance of this bounds.\n     *\n     * Returns:\n     * {<OpenLayers.Bounds>} A fresh copy of the bounds\n     */\n    clone:function() {\n        return new OpenLayers.Bounds(this.left, this.bottom, \n                                     this.right, this.top);\n    },\n\n    /**\n     * Method: equals\n     * Test a two bounds for equivalence.\n     *\n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>}\n     *\n     * Returns:\n     * {Boolean} The passed-in bounds object has the same left,\n     *           right, top, bottom components as this.  Note that if bounds \n     *           passed in is null, returns false.\n     */\n    equals:function(bounds) {\n        var equals = false;\n        if (bounds != null) {\n            equals = ((this.left == bounds.left) && \n                      (this.right == bounds.right) &&\n                      (this.top == bounds.top) && \n                      (this.bottom == bounds.bottom));\n        }\n        return equals;\n    },\n\n    /** \n     * APIMethod: toString\n     * Returns a string representation of the bounds object.\n     * \n     * Returns:\n     * {String} String representation of bounds object. \n     */\n    toString:function() {\n        return [this.left, this.bottom, this.right, this.top].join(\",\");\n    },\n\n    /**\n     * APIMethod: toArray\n     * Returns an array representation of the bounds object.\n     *\n     * Returns an array of left, bottom, right, top properties, or -- when the\n     *     optional parameter is true -- an array of the  bottom, left, top,\n     *     right properties.\n     *\n     * Parameters:\n     * reverseAxisOrder - {Boolean} Should we reverse the axis order?\n     *\n     * Returns:\n     * {Array} array of left, bottom, right, top\n     */\n    toArray: function(reverseAxisOrder) {\n        if (reverseAxisOrder === true) {\n            return [this.bottom, this.left, this.top, this.right];\n        } else {\n            return [this.left, this.bottom, this.right, this.top];\n        }\n    },    \n\n    /** \n     * APIMethod: toBBOX\n     * Returns a boundingbox-string representation of the bounds object.\n     * \n     * Parameters:\n     * decimal - {Integer} How many decimal places in the bbox coords?\n     *                     Default is 6\n     * reverseAxisOrder - {Boolean} Should we reverse the axis order?\n     * \n     * Returns:\n     * {String} Simple String representation of bounds object.\n     *          (e.g. \"5,42,10,45\")\n     */\n    toBBOX:function(decimal, reverseAxisOrder) {\n        if (decimal== null) {\n            decimal = 6; \n        }\n        var mult = Math.pow(10, decimal);\n        var xmin = Math.round(this.left * mult) / mult;\n        var ymin = Math.round(this.bottom * mult) / mult;\n        var xmax = Math.round(this.right * mult) / mult;\n        var ymax = Math.round(this.top * mult) / mult;\n        if (reverseAxisOrder === true) {\n            return ymin + \",\" + xmin + \",\" + ymax + \",\" + xmax;\n        } else {\n            return xmin + \",\" + ymin + \",\" + xmax + \",\" + ymax;\n        }\n    },\n \n    /**\n     * APIMethod: toGeometry\n     * Create a new polygon geometry based on this bounds.\n     *\n     * Returns:\n     * {<OpenLayers.Geometry.Polygon>} A new polygon with the coordinates\n     *     of this bounds.\n     */\n    toGeometry: function() {\n        return new OpenLayers.Geometry.Polygon([\n            new OpenLayers.Geometry.LinearRing([\n                new OpenLayers.Geometry.Point(this.left, this.bottom),\n                new OpenLayers.Geometry.Point(this.right, this.bottom),\n                new OpenLayers.Geometry.Point(this.right, this.top),\n                new OpenLayers.Geometry.Point(this.left, this.top)\n            ])\n        ]);\n    },\n    \n    /**\n     * APIMethod: getWidth\n     * Returns the width of the bounds.\n     * \n     * Returns:\n     * {Float} The width of the bounds (right minus left).\n     */\n    getWidth:function() {\n        return (this.right - this.left);\n    },\n\n    /**\n     * APIMethod: getHeight\n     * Returns the height of the bounds.\n     * \n     * Returns:\n     * {Float} The height of the bounds (top minus bottom).\n     */\n    getHeight:function() {\n        return (this.top - this.bottom);\n    },\n\n    /**\n     * APIMethod: getSize\n     * Returns an <OpenLayers.Size> object of the bounds.\n     * \n     * Returns:\n     * {<OpenLayers.Size>} The size of the bounds.\n     */\n    getSize:function() {\n        return new OpenLayers.Size(this.getWidth(), this.getHeight());\n    },\n\n    /**\n     * APIMethod: getCenterPixel\n     * Returns the <OpenLayers.Pixel> object which represents the center of the\n     *     bounds.\n     * \n     * Returns:\n     * {<OpenLayers.Pixel>} The center of the bounds in pixel space.\n     */\n    getCenterPixel:function() {\n        return new OpenLayers.Pixel( (this.left + this.right) / 2,\n                                     (this.bottom + this.top) / 2);\n    },\n\n    /**\n     * APIMethod: getCenterLonLat\n     * Returns the <OpenLayers.LonLat> object which represents the center of the\n     *     bounds.\n     *\n     * Returns:\n     * {<OpenLayers.LonLat>} The center of the bounds in map space.\n     */\n    getCenterLonLat:function() {\n        if(!this.centerLonLat) {\n            this.centerLonLat = new OpenLayers.LonLat(\n                (this.left + this.right) / 2, (this.bottom + this.top) / 2\n            );\n        }\n        return this.centerLonLat;\n    },\n\n    /**\n     * APIMethod: scale\n     * Scales the bounds around a pixel or lonlat. Note that the new \n     *     bounds may return non-integer properties, even if a pixel\n     *     is passed. \n     * \n     * Parameters:\n     * ratio - {Float} \n     * origin - {<OpenLayers.Pixel> or <OpenLayers.LonLat>}\n     *          Default is center.\n     *\n     * Returns:\n     * {<OpenLayers.Bounds>} A new bounds that is scaled by ratio\n     *                      from origin.\n     */\n    scale: function(ratio, origin){\n        if(origin == null){\n            origin = this.getCenterLonLat();\n        }\n        \n        var origx,origy;\n\n        // get origin coordinates\n        if(origin.CLASS_NAME == \"OpenLayers.LonLat\"){\n            origx = origin.lon;\n            origy = origin.lat;\n        } else {\n            origx = origin.x;\n            origy = origin.y;\n        }\n\n        var left = (this.left - origx) * ratio + origx;\n        var bottom = (this.bottom - origy) * ratio + origy;\n        var right = (this.right - origx) * ratio + origx;\n        var top = (this.top - origy) * ratio + origy;\n        \n        return new OpenLayers.Bounds(left, bottom, right, top);\n    },\n\n    /**\n     * APIMethod: add\n     * Shifts the coordinates of the bound by the given horizontal and vertical\n     *     deltas.\n     *\n     * (start code)\n     * var bounds = new OpenLayers.Bounds(0, 0, 10, 10);\n     * bounds.toString();\n     * // => \"0,0,10,10\"\n     *\n     * bounds.add(-1.5, 4).toString();\n     * // => \"-1.5,4,8.5,14\"\n     * (end)\n     *\n     * This method will throw a TypeError if it is passed null as an argument.\n     *\n     * Parameters:\n     * x - {Float} horizontal delta\n     * y - {Float} vertical delta\n     *\n     * Returns:\n     * {<OpenLayers.Bounds>} A new bounds whose coordinates are the same as\n     *     this, but shifted by the passed-in x and y values.\n     */\n    add:function(x, y) {\n        if ( (x == null) || (y == null) ) {\n            throw new TypeError('Bounds.add cannot receive null values');\n        }\n        return new OpenLayers.Bounds(this.left + x, this.bottom + y,\n                                     this.right + x, this.top + y);\n    },\n    \n    /**\n     * APIMethod: extend\n     * Extend the bounds to include the <OpenLayers.LonLat>,\n     *     <OpenLayers.Geometry.Point> or <OpenLayers.Bounds> specified.\n     *\n     * Please note that this function assumes that left < right and\n     *     bottom < top.\n     *\n     * Parameters:\n     * object - {<OpenLayers.LonLat>, <OpenLayers.Geometry.Point> or\n     *     <OpenLayers.Bounds>} The object to be included in the new bounds\n     *     object.\n     */\n    extend:function(object) {\n        if (object) {\n            switch(object.CLASS_NAME) {\n                case \"OpenLayers.LonLat\":\n                    this.extendXY(object.lon, object.lat);\n                    break;\n                case \"OpenLayers.Geometry.Point\":\n                    this.extendXY(object.x, object.y);\n                    break;\n\n                case \"OpenLayers.Bounds\":\n                    // clear cached center location\n                    this.centerLonLat = null;\n\n                    if ( (this.left == null) || (object.left < this.left)) {\n                        this.left = object.left;\n                    }\n                    if ( (this.bottom == null) || (object.bottom < this.bottom) ) {\n                        this.bottom = object.bottom;\n                    }\n                    if ( (this.right == null) || (object.right > this.right) ) {\n                        this.right = object.right;\n                    }\n                    if ( (this.top == null) || (object.top > this.top) ) {\n                        this.top = object.top;\n                    }\n                    break;\n            }\n        }\n    },\n\n    /**\n     * APIMethod: extendXY\n     * Extend the bounds to include the XY coordinate specified.\n     *\n     * Parameters:\n     * x - {number} The X part of the the coordinate.\n     * y - {number} The Y part of the the coordinate.\n     */\n    extendXY:function(x, y) {\n        // clear cached center location\n        this.centerLonLat = null;\n\n        if ((this.left == null) || (x < this.left)) {\n            this.left = x;\n        }\n        if ((this.bottom == null) || (y < this.bottom)) {\n            this.bottom = y;\n        }\n        if ((this.right == null) || (x > this.right)) {\n            this.right = x;\n        }\n        if ((this.top == null) || (y > this.top)) {\n            this.top = y;\n        }\n    },\n\n    /**\n     * APIMethod: containsLonLat\n     * Returns whether the bounds object contains the given <OpenLayers.LonLat>.\n     * \n     * Parameters:\n     * ll - {<OpenLayers.LonLat>|Object} OpenLayers.LonLat or an\n     *     object with a 'lon' and 'lat' properties.\n     * options - {Object} Optional parameters\n     *\n     * Acceptable options:\n     * inclusive - {Boolean} Whether or not to include the border.\n     *     Default is true.\n     * worldBounds - {<OpenLayers.Bounds>} If a worldBounds is provided, the\n     *     ll will be considered as contained if it exceeds the world bounds,\n     *     but can be wrapped around the dateline so it is contained by this\n     *     bounds.\n     *\n     * Returns:\n     * {Boolean} The passed-in lonlat is within this bounds.\n     */\n    containsLonLat: function(ll, options) {\n        if (typeof options === \"boolean\") {\n            options =  {inclusive: options};\n        }\n        options = options || {};\n        var contains = this.contains(ll.lon, ll.lat, options.inclusive),\n            worldBounds = options.worldBounds;\n        if (worldBounds && !contains) {\n            var worldWidth = worldBounds.getWidth();\n            var worldCenterX = (worldBounds.left + worldBounds.right) / 2;\n            var worldsAway = Math.round((ll.lon - worldCenterX) / worldWidth);\n            contains = this.containsLonLat({\n                lon: ll.lon - worldsAway * worldWidth,\n                lat: ll.lat\n            }, {inclusive: options.inclusive});\n        }\n        return contains;\n    },\n\n    /**\n     * APIMethod: containsPixel\n     * Returns whether the bounds object contains the given <OpenLayers.Pixel>.\n     * \n     * Parameters:\n     * px - {<OpenLayers.Pixel>}\n     * inclusive - {Boolean} Whether or not to include the border. Default is\n     *     true.\n     *\n     * Returns:\n     * {Boolean} The passed-in pixel is within this bounds.\n     */\n    containsPixel:function(px, inclusive) {\n        return this.contains(px.x, px.y, inclusive);\n    },\n    \n    /**\n     * APIMethod: contains\n     * Returns whether the bounds object contains the given x and y.\n     * \n     * Parameters:\n     * x - {Float}\n     * y - {Float}\n     * inclusive - {Boolean} Whether or not to include the border. Default is\n     *     true.\n     *\n     * Returns:\n     * {Boolean} Whether or not the passed-in coordinates are within this\n     *     bounds.\n     */\n    contains:function(x, y, inclusive) {\n        //set default\n        if (inclusive == null) {\n            inclusive = true;\n        }\n\n        if (x == null || y == null) {\n            return false;\n        }\n\n        x = OpenLayers.Util.toFloat(x);\n        y = OpenLayers.Util.toFloat(y);\n\n        var contains = false;\n        if (inclusive) {\n            contains = ((x >= this.left) && (x <= this.right) && \n                        (y >= this.bottom) && (y <= this.top));\n        } else {\n            contains = ((x > this.left) && (x < this.right) && \n                        (y > this.bottom) && (y < this.top));\n        }              \n        return contains;\n    },\n\n    /**\n     * APIMethod: intersectsBounds\n     * Determine whether the target bounds intersects this bounds.  Bounds are\n     *     considered intersecting if any of their edges intersect or if one\n     *     bounds contains the other.\n     * \n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>} The target bounds.\n     * options - {Object} Optional parameters.\n     * \n     * Acceptable options:\n     * inclusive - {Boolean} Treat coincident borders as intersecting.  Default\n     *     is true.  If false, bounds that do not overlap but only touch at the\n     *     border will not be considered as intersecting.\n     * worldBounds - {<OpenLayers.Bounds>} If a worldBounds is provided, two\n     *     bounds will be considered as intersecting if they intersect when \n     *     shifted to within the world bounds.  This applies only to bounds that\n     *     cross or are completely outside the world bounds.\n     *\n     * Returns:\n     * {Boolean} The passed-in bounds object intersects this bounds.\n     */\n    intersectsBounds:function(bounds, options) {\n        if (typeof options === \"boolean\") {\n            options =  {inclusive: options};\n        }\n        options = options || {};\n        if (options.worldBounds) {\n            var self = this.wrapDateLine(options.worldBounds);\n            bounds = bounds.wrapDateLine(options.worldBounds);\n        } else {\n            self = this;\n        }\n        if (options.inclusive == null) {\n            options.inclusive = true;\n        }\n        var intersects = false;\n        var mightTouch = (\n            self.left == bounds.right ||\n            self.right == bounds.left ||\n            self.top == bounds.bottom ||\n            self.bottom == bounds.top\n        );\n        \n        // if the two bounds only touch at an edge, and inclusive is false,\n        // then the bounds don't *really* intersect.\n        if (options.inclusive || !mightTouch) {\n            // otherwise, if one of the boundaries even partially contains another,\n            // inclusive of the edges, then they do intersect.\n            var inBottom = (\n                ((bounds.bottom >= self.bottom) && (bounds.bottom <= self.top)) ||\n                ((self.bottom >= bounds.bottom) && (self.bottom <= bounds.top))\n            );\n            var inTop = (\n                ((bounds.top >= self.bottom) && (bounds.top <= self.top)) ||\n                ((self.top > bounds.bottom) && (self.top < bounds.top))\n            );\n            var inLeft = (\n                ((bounds.left >= self.left) && (bounds.left <= self.right)) ||\n                ((self.left >= bounds.left) && (self.left <= bounds.right))\n            );\n            var inRight = (\n                ((bounds.right >= self.left) && (bounds.right <= self.right)) ||\n                ((self.right >= bounds.left) && (self.right <= bounds.right))\n            );\n            intersects = ((inBottom || inTop) && (inLeft || inRight));\n        }\n        // document me\n        if (options.worldBounds && !intersects) {\n            var world = options.worldBounds;\n            var width = world.getWidth();\n            var selfCrosses = !world.containsBounds(self);\n            var boundsCrosses = !world.containsBounds(bounds);\n            if (selfCrosses && !boundsCrosses) {\n                bounds = bounds.add(-width, 0);\n                intersects = self.intersectsBounds(bounds, {inclusive: options.inclusive});\n            } else if (boundsCrosses && !selfCrosses) {\n                self = self.add(-width, 0);\n                intersects = bounds.intersectsBounds(self, {inclusive: options.inclusive});                \n            }\n        }\n        return intersects;\n    },\n    \n    /**\n     * APIMethod: containsBounds\n     * Returns whether the bounds object contains the given <OpenLayers.Bounds>.\n     * \n     * bounds - {<OpenLayers.Bounds>} The target bounds.\n     * partial - {Boolean} If any of the target corners is within this bounds\n     *     consider the bounds contained.  Default is false.  If false, the\n     *     entire target bounds must be contained within this bounds.\n     * inclusive - {Boolean} Treat shared edges as contained.  Default is\n     *     true.\n     *\n     * Returns:\n     * {Boolean} The passed-in bounds object is contained within this bounds. \n     */\n    containsBounds:function(bounds, partial, inclusive) {\n        if (partial == null) {\n            partial = false;\n        }\n        if (inclusive == null) {\n            inclusive = true;\n        }\n        var bottomLeft  = this.contains(bounds.left, bounds.bottom, inclusive);\n        var bottomRight = this.contains(bounds.right, bounds.bottom, inclusive);\n        var topLeft  = this.contains(bounds.left, bounds.top, inclusive);\n        var topRight = this.contains(bounds.right, bounds.top, inclusive);\n        \n        return (partial) ? (bottomLeft || bottomRight || topLeft || topRight)\n                         : (bottomLeft && bottomRight && topLeft && topRight);\n    },\n\n    /** \n     * APIMethod: determineQuadrant\n     * Returns the the quadrant (\"br\", \"tr\", \"tl\", \"bl\") in which the given\n     *     <OpenLayers.LonLat> lies.\n     *\n     * Parameters:\n     * lonlat - {<OpenLayers.LonLat>}\n     *\n     * Returns:\n     * {String} The quadrant (\"br\" \"tr\" \"tl\" \"bl\") of the bounds in which the\n     *     coordinate lies.\n     */\n    determineQuadrant: function(lonlat) {\n    \n        var quadrant = \"\";\n        var center = this.getCenterLonLat();\n        \n        quadrant += (lonlat.lat < center.lat) ? \"b\" : \"t\";\n        quadrant += (lonlat.lon < center.lon) ? \"l\" : \"r\";\n    \n        return quadrant; \n    },\n    \n    /**\n     * APIMethod: transform\n     * Transform the Bounds object from source to dest. \n     *\n     * Parameters: \n     * source - {<OpenLayers.Projection>} Source projection. \n     * dest   - {<OpenLayers.Projection>} Destination projection. \n     *\n     * Returns:\n     * {<OpenLayers.Bounds>} Itself, for use in chaining operations.\n     */\n    transform: function(source, dest) {\n        // clear cached center location\n        this.centerLonLat = null;\n        var ll = OpenLayers.Projection.transform(\n            {'x': this.left, 'y': this.bottom}, source, dest);\n        var lr = OpenLayers.Projection.transform(\n            {'x': this.right, 'y': this.bottom}, source, dest);\n        var ul = OpenLayers.Projection.transform(\n            {'x': this.left, 'y': this.top}, source, dest);\n        var ur = OpenLayers.Projection.transform(\n            {'x': this.right, 'y': this.top}, source, dest);\n        this.left   = Math.min(ll.x, ul.x);\n        this.bottom = Math.min(ll.y, lr.y);\n        this.right  = Math.max(lr.x, ur.x);\n        this.top    = Math.max(ul.y, ur.y);\n        return this;\n    },\n\n    /**\n     * APIMethod: wrapDateLine\n     * Wraps the bounds object around the dateline.\n     *  \n     * Parameters:\n     * maxExtent - {<OpenLayers.Bounds>}\n     * options - {Object} Some possible options are:\n     *\n     * Allowed Options:\n     *                    leftTolerance - {float} Allow for a margin of error \n     *                                            with the 'left' value of this \n     *                                            bound.\n     *                                            Default is 0.\n     *                    rightTolerance - {float} Allow for a margin of error \n     *                                             with the 'right' value of \n     *                                             this bound.\n     *                                             Default is 0.\n     * \n     * Returns:\n     * {<OpenLayers.Bounds>} A copy of this bounds, but wrapped around the \n     *                       \"dateline\" (as specified by the borders of \n     *                       maxExtent). Note that this function only returns \n     *                       a different bounds value if this bounds is \n     *                       *entirely* outside of the maxExtent. If this \n     *                       bounds straddles the dateline (is part in/part \n     *                       out of maxExtent), the returned bounds will always \n     *                       cross the left edge of the given maxExtent.\n     *.\n     */\n    wrapDateLine: function(maxExtent, options) {    \n        options = options || {};\n        \n        var leftTolerance = options.leftTolerance || 0;\n        var rightTolerance = options.rightTolerance || 0;\n\n        var newBounds = this.clone();\n    \n        if (maxExtent) {\n            var width = maxExtent.getWidth();\n\n            //shift right?\n            while (newBounds.left < maxExtent.left && \n                   newBounds.right - rightTolerance <= maxExtent.left ) { \n                newBounds = newBounds.add(width, 0);\n            }\n\n            //shift left?\n            while (newBounds.left + leftTolerance >= maxExtent.right && \n                   newBounds.right > maxExtent.right ) { \n                newBounds = newBounds.add(-width, 0);\n            }\n           \n            // crosses right only? force left\n            var newLeft = newBounds.left + leftTolerance;\n            if (newLeft < maxExtent.right && newLeft > maxExtent.left && \n                   newBounds.right - rightTolerance > maxExtent.right) {\n                newBounds = newBounds.add(-width, 0);\n            }\n        }\n                \n        return newBounds;\n    },\n\n    CLASS_NAME: \"OpenLayers.Bounds\"\n});\n\n/** \n * APIFunction: fromString\n * Alternative constructor that builds a new OpenLayers.Bounds from a \n *     parameter string.\n *\n * (begin code)\n * OpenLayers.Bounds.fromString(\"5,42,10,45\");\n * // => equivalent to ...\n * new OpenLayers.Bounds(5, 42, 10, 45);\n * (end)\n *\n * Parameters: \n * str - {String} Comma-separated bounds string. (e.g. \"5,42,10,45\")\n * reverseAxisOrder - {Boolean} Does the string use reverse axis order?\n *\n * Returns:\n * {<OpenLayers.Bounds>} New bounds object built from the \n *                       passed-in String.\n */\nOpenLayers.Bounds.fromString = function(str, reverseAxisOrder) {\n    var bounds = str.split(\",\");\n    return OpenLayers.Bounds.fromArray(bounds, reverseAxisOrder);\n};\n\n/** \n * APIFunction: fromArray\n * Alternative constructor that builds a new OpenLayers.Bounds from an array.\n *\n * (begin code)\n * OpenLayers.Bounds.fromArray( [5, 42, 10, 45] );\n * // => equivalent to ...\n * new OpenLayers.Bounds(5, 42, 10, 45);\n * (end)\n *\n * Parameters:\n * bbox - {Array(Float)} Array of bounds values (e.g. [5,42,10,45])\n * reverseAxisOrder - {Boolean} Does the array use reverse axis order?\n *\n * Returns:\n * {<OpenLayers.Bounds>} New bounds object built from the passed-in Array.\n */\nOpenLayers.Bounds.fromArray = function(bbox, reverseAxisOrder) {\n    return reverseAxisOrder === true ?\n           new OpenLayers.Bounds(bbox[1], bbox[0], bbox[3], bbox[2]) :\n           new OpenLayers.Bounds(bbox[0], bbox[1], bbox[2], bbox[3]);\n};\n\n/** \n * APIFunction: fromSize\n * Alternative constructor that builds a new OpenLayers.Bounds from a size.\n *\n * (begin code)\n * OpenLayers.Bounds.fromSize( new OpenLayers.Size(10, 20) );\n * // => equivalent to ...\n * new OpenLayers.Bounds(0, 20, 10, 0);\n * (end)\n *\n * Parameters:\n * size - {<OpenLayers.Size> or Object} <OpenLayers.Size> or an object with\n *     both 'w' and 'h' properties.\n *\n * Returns:\n * {<OpenLayers.Bounds>} New bounds object built from the passed-in size.\n */\nOpenLayers.Bounds.fromSize = function(size) {\n    return new OpenLayers.Bounds(0,\n                                 size.h,\n                                 size.w,\n                                 0);\n};\n\n/**\n * Function: oppositeQuadrant\n * Get the opposite quadrant for a given quadrant string.\n *\n * (begin code)\n * OpenLayers.Bounds.oppositeQuadrant( \"tl\" );\n * // => \"br\"\n *\n * OpenLayers.Bounds.oppositeQuadrant( \"tr\" );\n * // => \"bl\"\n * (end)\n *\n * Parameters:\n * quadrant - {String} two character quadrant shortstring\n *\n * Returns:\n * {String} The opposing quadrant (\"br\" \"tr\" \"tl\" \"bl\"). For Example, if \n *          you pass in \"bl\" it returns \"tr\", if you pass in \"br\" it \n *          returns \"tl\", etc.\n */\nOpenLayers.Bounds.oppositeQuadrant = function(quadrant) {\n    var opp = \"\";\n    \n    opp += (quadrant.charAt(0) == 't') ? 'b' : 't';\n    opp += (quadrant.charAt(1) == 'l') ? 'r' : 'l';\n    \n    return opp;\n};\n/* ======================================================================\n    OpenLayers/BaseTypes/Element.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Util.js\n * @requires OpenLayers/BaseTypes.js\n */\n\n/**\n * Namespace: OpenLayers.Element\n */\nOpenLayers.Element = {\n\n    /**\n     * APIFunction: visible\n     * \n     * Parameters: \n     * element - {DOMElement}\n     * \n     * Returns:\n     * {Boolean} Is the element visible?\n     */\n    visible: function(element) {\n        return OpenLayers.Util.getElement(element).style.display != 'none';\n    },\n\n    /**\n     * APIFunction: toggle\n     * Toggle the visibility of element(s) passed in\n     * \n     * Parameters:\n     * element - {DOMElement} Actually user can pass any number of elements\n     */\n    toggle: function() {\n        for (var i=0, len=arguments.length; i<len; i++) {\n            var element = OpenLayers.Util.getElement(arguments[i]);\n            var display = OpenLayers.Element.visible(element) ? 'none' \n                                                              : '';\n            element.style.display = display;\n        }\n    },\n\n    /**\n     * APIFunction: remove\n     * Remove the specified element from the DOM.\n     * \n     * Parameters:\n     * element - {DOMElement}\n     */\n    remove: function(element) {\n        element = OpenLayers.Util.getElement(element);\n        element.parentNode.removeChild(element);\n    },\n\n    /**\n     * APIFunction: getHeight\n     *  \n     * Parameters:\n     * element - {DOMElement}\n     * \n     * Returns:\n     * {Integer} The offset height of the element passed in\n     */\n    getHeight: function(element) {\n        element = OpenLayers.Util.getElement(element);\n        return element.offsetHeight;\n    },\n\n    /**\n     * Function: hasClass\n     * Tests if an element has the given CSS class name.\n     *\n     * Parameters:\n     * element - {DOMElement} A DOM element node.\n     * name - {String} The CSS class name to search for.\n     *\n     * Returns:\n     * {Boolean} The element has the given class name.\n     */\n    hasClass: function(element, name) {\n        var names = element.className;\n        return (!!names && new RegExp(\"(^|\\\\s)\" + name + \"(\\\\s|$)\").test(names));\n    },\n    \n    /**\n     * Function: addClass\n     * Add a CSS class name to an element.  Safe where element already has\n     *     the class name.\n     *\n     * Parameters:\n     * element - {DOMElement} A DOM element node.\n     * name - {String} The CSS class name to add.\n     *\n     * Returns:\n     * {DOMElement} The element.\n     */\n    addClass: function(element, name) {\n        if(!OpenLayers.Element.hasClass(element, name)) {\n            element.className += (element.className ? \" \" : \"\") + name;\n        }\n        return element;\n    },\n\n    /**\n     * Function: removeClass\n     * Remove a CSS class name from an element.  Safe where element does not\n     *     have the class name.\n     *\n     * Parameters:\n     * element - {DOMElement} A DOM element node.\n     * name - {String} The CSS class name to remove.\n     *\n     * Returns:\n     * {DOMElement} The element.\n     */\n    removeClass: function(element, name) {\n        var names = element.className;\n        if(names) {\n            element.className = OpenLayers.String.trim(\n                names.replace(\n                    new RegExp(\"(^|\\\\s+)\" + name + \"(\\\\s+|$)\"), \" \"\n                )\n            );\n        }\n        return element;\n    },\n\n    /**\n     * Function: toggleClass\n     * Remove a CSS class name from an element if it exists.  Add the class name\n     *     if it doesn't exist.\n     *\n     * Parameters:\n     * element - {DOMElement} A DOM element node.\n     * name - {String} The CSS class name to toggle.\n     *\n     * Returns:\n     * {DOMElement} The element.\n     */\n    toggleClass: function(element, name) {\n        if(OpenLayers.Element.hasClass(element, name)) {\n            OpenLayers.Element.removeClass(element, name);\n        } else {\n            OpenLayers.Element.addClass(element, name);\n        }\n        return element;\n    },\n\n    /**\n     * APIFunction: getStyle\n     * \n     * Parameters:\n     * element - {DOMElement}\n     * style - {?}\n     * \n     * Returns:\n     * {?}\n     */\n    getStyle: function(element, style) {\n        element = OpenLayers.Util.getElement(element);\n\n        var value = null;\n        if (element && element.style) {\n            value = element.style[OpenLayers.String.camelize(style)];\n            if (!value) {\n                if (document.defaultView && \n                    document.defaultView.getComputedStyle) {\n                    \n                    var css = document.defaultView.getComputedStyle(element, null);\n                    value = css ? css.getPropertyValue(style) : null;\n                } else if (element.currentStyle) {\n                    value = element.currentStyle[OpenLayers.String.camelize(style)];\n                }\n            }\n        \n            var positions = ['left', 'top', 'right', 'bottom'];\n            if (window.opera &&\n                (OpenLayers.Util.indexOf(positions,style) != -1) &&\n                (OpenLayers.Element.getStyle(element, 'position') == 'static')) { \n                value = 'auto';\n            }\n        }\n    \n        return value == 'auto' ? null : value;\n    }\n\n};\n/* ======================================================================\n    OpenLayers/BaseTypes/LonLat.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/BaseTypes/Class.js\n */\n\n/**\n * Class: OpenLayers.LonLat\n * This class represents a longitude and latitude pair\n */\nOpenLayers.LonLat = OpenLayers.Class({\n\n    /** \n     * APIProperty: lon\n     * {Float} The x-axis coodinate in map units\n     */\n    lon: 0.0,\n    \n    /** \n     * APIProperty: lat\n     * {Float} The y-axis coordinate in map units\n     */\n    lat: 0.0,\n\n    /**\n     * Constructor: OpenLayers.LonLat\n     * Create a new map location. Coordinates can be passed either as two\n     * arguments, or as a single argument.\n     *\n     * Parameters (two arguments):\n     * lon - {Number} The x-axis coordinate in map units.  If your map is in\n     *     a geographic projection, this will be the Longitude.  Otherwise,\n     *     it will be the x coordinate of the map location in your map units.\n     * lat - {Number} The y-axis coordinate in map units.  If your map is in\n     *     a geographic projection, this will be the Latitude.  Otherwise,\n     *     it will be the y coordinate of the map location in your map units.\n     *\n     * Parameters (single argument):\n     * location - {Array(Float)} [lon, lat]\n     */\n    initialize: function(lon, lat) {\n        if (OpenLayers.Util.isArray(lon)) {\n            lat = lon[1];\n            lon = lon[0];\n        }\n        this.lon = OpenLayers.Util.toFloat(lon);\n        this.lat = OpenLayers.Util.toFloat(lat);\n    },\n    \n    /**\n     * Method: toString\n     * Return a readable string version of the lonlat\n     *\n     * Returns:\n     * {String} String representation of OpenLayers.LonLat object. \n     *           (e.g. <i>\"lon=5,lat=42\"</i>)\n     */\n    toString:function() {\n        return (\"lon=\" + this.lon + \",lat=\" + this.lat);\n    },\n\n    /** \n     * APIMethod: toShortString\n     * \n     * Returns:\n     * {String} Shortened String representation of OpenLayers.LonLat object. \n     *         (e.g. <i>\"5, 42\"</i>)\n     */\n    toShortString:function() {\n        return (this.lon + \", \" + this.lat);\n    },\n\n    /** \n     * APIMethod: clone\n     * \n     * Returns:\n     * {<OpenLayers.LonLat>} New OpenLayers.LonLat object with the same lon \n     *                       and lat values\n     */\n    clone:function() {\n        return new OpenLayers.LonLat(this.lon, this.lat);\n    },\n\n    /** \n     * APIMethod: add\n     * \n     * Parameters:\n     * lon - {Float}\n     * lat - {Float}\n     * \n     * Returns:\n     * {<OpenLayers.LonLat>} A new OpenLayers.LonLat object with the lon and \n     *                       lat passed-in added to this's. \n     */\n    add:function(lon, lat) {\n        if ( (lon == null) || (lat == null) ) {\n            throw new TypeError('LonLat.add cannot receive null values');\n        }\n        return new OpenLayers.LonLat(this.lon + OpenLayers.Util.toFloat(lon), \n                                     this.lat + OpenLayers.Util.toFloat(lat));\n    },\n\n    /** \n     * APIMethod: equals\n     * \n     * Parameters:\n     * ll - {<OpenLayers.LonLat>}\n     * \n     * Returns:\n     * {Boolean} Boolean value indicating whether the passed-in \n     *           <OpenLayers.LonLat> object has the same lon and lat \n     *           components as this.\n     *           Note: if ll passed in is null, returns false\n     */\n    equals:function(ll) {\n        var equals = false;\n        if (ll != null) {\n            equals = ((this.lon == ll.lon && this.lat == ll.lat) ||\n                      (isNaN(this.lon) && isNaN(this.lat) && isNaN(ll.lon) && isNaN(ll.lat)));\n        }\n        return equals;\n    },\n\n    /**\n     * APIMethod: transform\n     * Transform the LonLat object from source to dest. This transformation is\n     *    *in place*: if you want a *new* lonlat, use .clone() first.\n     *\n     * Parameters: \n     * source - {<OpenLayers.Projection>} Source projection. \n     * dest   - {<OpenLayers.Projection>} Destination projection. \n     *\n     * Returns:\n     * {<OpenLayers.LonLat>} Itself, for use in chaining operations.\n     */\n    transform: function(source, dest) {\n        var point = OpenLayers.Projection.transform(\n            {'x': this.lon, 'y': this.lat}, source, dest);\n        this.lon = point.x;\n        this.lat = point.y;\n        return this;\n    },\n    \n    /**\n     * APIMethod: wrapDateLine\n     * \n     * Parameters:\n     * maxExtent - {<OpenLayers.Bounds>}\n     * \n     * Returns:\n     * {<OpenLayers.LonLat>} A copy of this lonlat, but wrapped around the \n     *                       \"dateline\" (as specified by the borders of \n     *                       maxExtent)\n     */\n    wrapDateLine: function(maxExtent) {    \n\n        var newLonLat = this.clone();\n    \n        if (maxExtent) {\n            //shift right?\n            while (newLonLat.lon < maxExtent.left) {\n                newLonLat.lon +=  maxExtent.getWidth();\n            }    \n           \n            //shift left?\n            while (newLonLat.lon > maxExtent.right) {\n                newLonLat.lon -= maxExtent.getWidth();\n            }    \n        }\n                \n        return newLonLat;\n    },\n\n    CLASS_NAME: \"OpenLayers.LonLat\"\n});\n\n/** \n * Function: fromString\n * Alternative constructor that builds a new <OpenLayers.LonLat> from a \n *     parameter string\n * \n * Parameters:\n * str - {String} Comma-separated Lon,Lat coordinate string. \n *                 (e.g. <i>\"5,40\"</i>)\n * \n * Returns:\n * {<OpenLayers.LonLat>} New <OpenLayers.LonLat> object built from the \n *                       passed-in String.\n */\nOpenLayers.LonLat.fromString = function(str) {\n    var pair = str.split(\",\");\n    return new OpenLayers.LonLat(pair[0], pair[1]);\n};\n\n/** \n * Function: fromArray\n * Alternative constructor that builds a new <OpenLayers.LonLat> from an \n *     array of two numbers that represent lon- and lat-values.\n * \n * Parameters:\n * arr - {Array(Float)} Array of lon/lat values (e.g. [5,-42])\n * \n * Returns:\n * {<OpenLayers.LonLat>} New <OpenLayers.LonLat> object built from the \n *                       passed-in array.\n */\nOpenLayers.LonLat.fromArray = function(arr) {\n    var gotArr = OpenLayers.Util.isArray(arr),\n        lon = gotArr && arr[0],\n        lat = gotArr && arr[1];\n    return new OpenLayers.LonLat(lon, lat);\n};\n/* ======================================================================\n    OpenLayers/BaseTypes/Pixel.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/BaseTypes/Class.js\n */\n\n/**\n * Class: OpenLayers.Pixel\n * This class represents a screen coordinate, in x and y coordinates\n */\nOpenLayers.Pixel = OpenLayers.Class({\n    \n    /**\n     * APIProperty: x\n     * {Number} The x coordinate\n     */\n    x: 0.0,\n\n    /**\n     * APIProperty: y\n     * {Number} The y coordinate\n     */\n    y: 0.0,\n    \n    /**\n     * Constructor: OpenLayers.Pixel\n     * Create a new OpenLayers.Pixel instance\n     *\n     * Parameters:\n     * x - {Number} The x coordinate\n     * y - {Number} The y coordinate\n     *\n     * Returns:\n     * An instance of OpenLayers.Pixel\n     */\n    initialize: function(x, y) {\n        this.x = parseFloat(x);\n        this.y = parseFloat(y);\n    },\n    \n    /**\n     * Method: toString\n     * Cast this object into a string\n     *\n     * Returns:\n     * {String} The string representation of Pixel. ex: \"x=200.4,y=242.2\"\n     */\n    toString:function() {\n        return (\"x=\" + this.x + \",y=\" + this.y);\n    },\n\n    /**\n     * APIMethod: clone\n     * Return a clone of this pixel object\n     *\n     * Returns:\n     * {<OpenLayers.Pixel>} A clone pixel\n     */\n    clone:function() {\n        return new OpenLayers.Pixel(this.x, this.y); \n    },\n    \n    /**\n     * APIMethod: equals\n     * Determine whether one pixel is equivalent to another\n     *\n     * Parameters:\n     * px - {<OpenLayers.Pixel>|Object} An OpenLayers.Pixel or an object with\n     *                                  a 'x' and 'y' properties.\n     *\n     * Returns:\n     * {Boolean} The point passed in as parameter is equal to this. Note that\n     * if px passed in is null, returns false.\n     */\n    equals:function(px) {\n        var equals = false;\n        if (px != null) {\n            equals = ((this.x == px.x && this.y == px.y) ||\n                      (isNaN(this.x) && isNaN(this.y) && isNaN(px.x) && isNaN(px.y)));\n        }\n        return equals;\n    },\n\n    /**\n     * APIMethod: distanceTo\n     * Returns the distance to the pixel point passed in as a parameter.\n     *\n     * Parameters:\n     * px - {<OpenLayers.Pixel>}\n     *\n     * Returns:\n     * {Float} The pixel point passed in as parameter to calculate the\n     *     distance to.\n     */\n    distanceTo:function(px) {\n        return Math.sqrt(\n            Math.pow(this.x - px.x, 2) +\n            Math.pow(this.y - px.y, 2)\n        );\n    },\n\n    /**\n     * APIMethod: add\n     *\n     * Parameters:\n     * x - {Integer}\n     * y - {Integer}\n     *\n     * Returns:\n     * {<OpenLayers.Pixel>} A new Pixel with this pixel's x&y augmented by the \n     * values passed in.\n     */\n    add:function(x, y) {\n        if ( (x == null) || (y == null) ) {\n            throw new TypeError('Pixel.add cannot receive null values');\n        }\n        return new OpenLayers.Pixel(this.x + x, this.y + y);\n    },\n\n    /**\n    * APIMethod: offset\n    * \n    * Parameters\n    * px - {<OpenLayers.Pixel>|Object} An OpenLayers.Pixel or an object with\n    *                                  a 'x' and 'y' properties.\n    * \n    * Returns:\n    * {<OpenLayers.Pixel>} A new Pixel with this pixel's x&y augmented by the \n    *                      x&y values of the pixel passed in.\n    */\n    offset:function(px) {\n        var newPx = this.clone();\n        if (px) {\n            newPx = this.add(px.x, px.y);\n        }\n        return newPx;\n    },\n\n    CLASS_NAME: \"OpenLayers.Pixel\"\n});\n/* ======================================================================\n    OpenLayers/BaseTypes/Size.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/BaseTypes/Class.js\n */\n\n/**\n * Class: OpenLayers.Size\n * Instances of this class represent a width/height pair\n */\nOpenLayers.Size = OpenLayers.Class({\n\n    /**\n     * APIProperty: w\n     * {Number} width\n     */\n    w: 0.0,\n    \n    /**\n     * APIProperty: h\n     * {Number} height\n     */\n    h: 0.0,\n\n\n    /**\n     * Constructor: OpenLayers.Size\n     * Create an instance of OpenLayers.Size\n     *\n     * Parameters:\n     * w - {Number} width\n     * h - {Number} height\n     */\n    initialize: function(w, h) {\n        this.w = parseFloat(w);\n        this.h = parseFloat(h);\n    },\n\n    /**\n     * Method: toString\n     * Return the string representation of a size object\n     *\n     * Returns:\n     * {String} The string representation of OpenLayers.Size object. \n     * (e.g. <i>\"w=55,h=66\"</i>)\n     */\n    toString:function() {\n        return (\"w=\" + this.w + \",h=\" + this.h);\n    },\n\n    /**\n     * APIMethod: clone\n     * Create a clone of this size object\n     *\n     * Returns:\n     * {<OpenLayers.Size>} A new OpenLayers.Size object with the same w and h\n     * values\n     */\n    clone:function() {\n        return new OpenLayers.Size(this.w, this.h);\n    },\n\n    /**\n     *\n     * APIMethod: equals\n     * Determine where this size is equal to another\n     *\n     * Parameters:\n     * sz - {<OpenLayers.Size>|Object} An OpenLayers.Size or an object with\n     *                                  a 'w' and 'h' properties.\n     *\n     * Returns: \n     * {Boolean} The passed in size has the same h and w properties as this one.\n     * Note that if sz passed in is null, returns false.\n     */\n    equals:function(sz) {\n        var equals = false;\n        if (sz != null) {\n            equals = ((this.w == sz.w && this.h == sz.h) ||\n                      (isNaN(this.w) && isNaN(this.h) && isNaN(sz.w) && isNaN(sz.h)));\n        }\n        return equals;\n    },\n\n    CLASS_NAME: \"OpenLayers.Size\"\n});\n/* ======================================================================\n    OpenLayers/Console.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/BaseTypes/Class.js\n */\n\n/**\n * Namespace: OpenLayers.Console\n * The OpenLayers.Console namespace is used for debugging and error logging.\n * If the Firebug Lite (../Firebug/firebug.js) is included before this script,\n * calls to OpenLayers.Console methods will get redirected to window.console.\n * This makes use of the Firebug extension where available and allows for\n * cross-browser debugging Firebug style.\n *\n * Note:\n * Note that behavior will differ with the Firebug extension and Firebug Lite.\n * Most notably, the Firebug Lite console does not currently allow for\n * hyperlinks to code or for clicking on object to explore their properties.\n * \n */\nOpenLayers.Console = {\n    /**\n     * Create empty functions for all console methods.  The real value of these\n     * properties will be set if Firebug Lite (../Firebug/firebug.js script) is\n     * included.  We explicitly require the Firebug Lite script to trigger\n     * functionality of the OpenLayers.Console methods.\n     */\n    \n    /**\n     * APIFunction: log\n     * Log an object in the console.  The Firebug Lite console logs string\n     * representation of objects.  Given multiple arguments, they will\n     * be cast to strings and logged with a space delimiter.  If the first\n     * argument is a string with printf-like formatting, subsequent arguments\n     * will be used in string substitution.  Any additional arguments (beyond\n     * the number substituted in a format string) will be appended in a space-\n     * delimited line.\n     * \n     * Parameters:\n     * object - {Object}\n     */\n    log: function() {},\n\n    /**\n     * APIFunction: debug\n     * Writes a message to the console, including a hyperlink to the line\n     * where it was called.\n     *\n     * May be called with multiple arguments as with OpenLayers.Console.log().\n     * \n     * Parameters:\n     * object - {Object}\n     */\n    debug: function() {},\n\n    /**\n     * APIFunction: info\n     * Writes a message to the console with the visual \"info\" icon and color\n     * coding and a hyperlink to the line where it was called.\n     *\n     * May be called with multiple arguments as with OpenLayers.Console.log().\n     * \n     * Parameters:\n     * object - {Object}\n     */\n    info: function() {},\n\n    /**\n     * APIFunction: warn\n     * Writes a message to the console with the visual \"warning\" icon and\n     * color coding and a hyperlink to the line where it was called.\n     *\n     * May be called with multiple arguments as with OpenLayers.Console.log().\n     * \n     * Parameters:\n     * object - {Object}\n     */\n    warn: function() {},\n\n    /**\n     * APIFunction: error\n     * Writes a message to the console with the visual \"error\" icon and color\n     * coding and a hyperlink to the line where it was called.\n     *\n     * May be called with multiple arguments as with OpenLayers.Console.log().\n     * \n     * Parameters:\n     * object - {Object}\n     */\n    error: function() {},\n    \n    /**\n     * APIFunction: userError\n     * A single interface for showing error messages to the user. The default\n     * behavior is a Javascript alert, though this can be overridden by\n     * reassigning OpenLayers.Console.userError to a different function.\n     *\n     * Expects a single error message\n     * \n     * Parameters:\n     * error - {Object}\n     */\n    userError: function(error) {\n        alert(error);\n    },\n\n    /**\n     * APIFunction: assert\n     * Tests that an expression is true. If not, it will write a message to\n     * the console and throw an exception.\n     *\n     * May be called with multiple arguments as with OpenLayers.Console.log().\n     * \n     * Parameters:\n     * object - {Object}\n     */\n    assert: function() {},\n\n    /**\n     * APIFunction: dir\n     * Prints an interactive listing of all properties of the object. This\n     * looks identical to the view that you would see in the DOM tab.\n     * \n     * Parameters:\n     * object - {Object}\n     */\n    dir: function() {},\n\n    /**\n     * APIFunction: dirxml\n     * Prints the XML source tree of an HTML or XML element. This looks\n     * identical to the view that you would see in the HTML tab. You can click\n     * on any node to inspect it in the HTML tab.\n     * \n     * Parameters:\n     * object - {Object}\n     */\n    dirxml: function() {},\n\n    /**\n     * APIFunction: trace\n     * Prints an interactive stack trace of JavaScript execution at the point\n     * where it is called.  The stack trace details the functions on the stack,\n     * as well as the values that were passed as arguments to each function.\n     * You can click each function to take you to its source in the Script tab,\n     * and click each argument value to inspect it in the DOM or HTML tabs.\n     * \n     */\n    trace: function() {},\n\n    /**\n     * APIFunction: group\n     * Writes a message to the console and opens a nested block to indent all\n     * future messages sent to the console. Call OpenLayers.Console.groupEnd()\n     * to close the block.\n     *\n     * May be called with multiple arguments as with OpenLayers.Console.log().\n     * \n     * Parameters:\n     * object - {Object}\n     */\n    group: function() {},\n\n    /**\n     * APIFunction: groupEnd\n     * Closes the most recently opened block created by a call to\n     * OpenLayers.Console.group\n     */\n    groupEnd: function() {},\n    \n    /**\n     * APIFunction: time\n     * Creates a new timer under the given name. Call\n     * OpenLayers.Console.timeEnd(name)\n     * with the same name to stop the timer and print the time elapsed.\n     *\n     * Parameters:\n     * name - {String}\n     */\n    time: function() {},\n\n    /**\n     * APIFunction: timeEnd\n     * Stops a timer created by a call to OpenLayers.Console.time(name) and\n     * writes the time elapsed.\n     *\n     * Parameters:\n     * name - {String}\n     */\n    timeEnd: function() {},\n\n    /**\n     * APIFunction: profile\n     * Turns on the JavaScript profiler. The optional argument title would\n     * contain the text to be printed in the header of the profile report.\n     *\n     * This function is not currently implemented in Firebug Lite.\n     * \n     * Parameters:\n     * title - {String} Optional title for the profiler\n     */\n    profile: function() {},\n\n    /**\n     * APIFunction: profileEnd\n     * Turns off the JavaScript profiler and prints its report.\n     * \n     * This function is not currently implemented in Firebug Lite.\n     */\n    profileEnd: function() {},\n\n    /**\n     * APIFunction: count\n     * Writes the number of times that the line of code where count was called\n     * was executed. The optional argument title will print a message in\n     * addition to the number of the count.\n     *\n     * This function is not currently implemented in Firebug Lite.\n     *\n     * Parameters:\n     * title - {String} Optional title to be printed with count\n     */\n    count: function() {},\n\n    CLASS_NAME: \"OpenLayers.Console\"\n};\n\n/**\n * Execute an anonymous function to extend the OpenLayers.Console namespace\n * if the firebug.js script is included.  This closure is used so that the\n * \"scripts\" and \"i\" variables don't pollute the global namespace.\n */\n(function() {\n    /**\n     * If Firebug Lite is included (before this script), re-route all\n     * OpenLayers.Console calls to the console object.\n     */\n    var scripts = document.getElementsByTagName(\"script\");\n    for(var i=0, len=scripts.length; i<len; ++i) {\n        if(scripts[i].src.indexOf(\"firebug.js\") != -1) {\n            if(console) {\n                OpenLayers.Util.extend(OpenLayers.Console, console);\n                break;\n            }\n        }\n    }\n})();\n/* ======================================================================\n    OpenLayers/Lang.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/BaseTypes.js\n * @requires OpenLayers/Console.js\n */\n\n/**\n * Namespace: OpenLayers.Lang\n * Internationalization namespace.  Contains dictionaries in various languages\n *     and methods to set and get the current language.\n */\nOpenLayers.Lang = {\n    \n    /** \n     * Property: code\n     * {String}  Current language code to use in OpenLayers.  Use the\n     *     <setCode> method to set this value and the <getCode> method to\n     *     retrieve it.\n     */\n    code: null,\n\n    /** \n     * APIProperty: defaultCode\n     * {String} Default language to use when a specific language can't be\n     *     found.  Default is \"en\".\n     */\n    defaultCode: \"en\",\n        \n    /**\n     * APIFunction: getCode\n     * Get the current language code.\n     *\n     * Returns:\n     * {String} The current language code.\n     */\n    getCode: function() {\n        if(!OpenLayers.Lang.code) {\n            OpenLayers.Lang.setCode();\n        }\n        return OpenLayers.Lang.code;\n    },\n    \n    /**\n     * APIFunction: setCode\n     * Set the language code for string translation.  This code is used by\n     *     the <OpenLayers.Lang.translate> method.\n     *\n     * Parameters:\n     * code - {String} These codes follow the IETF recommendations at\n     *     http://www.ietf.org/rfc/rfc3066.txt.  If no value is set, the\n     *     browser's language setting will be tested.  If no <OpenLayers.Lang>\n     *     dictionary exists for the code, the <OpenLayers.String.defaultLang>\n     *     will be used.\n     */\n    setCode: function(code) {\n        var lang;\n        if(!code) {\n            code = (OpenLayers.BROWSER_NAME == \"msie\") ?\n                navigator.userLanguage : navigator.language;\n        }\n        var parts = code.split('-');\n        parts[0] = parts[0].toLowerCase();\n        if(typeof OpenLayers.Lang[parts[0]] == \"object\") {\n            lang = parts[0];\n        }\n\n        // check for regional extensions\n        if(parts[1]) {\n            var testLang = parts[0] + '-' + parts[1].toUpperCase();\n            if(typeof OpenLayers.Lang[testLang] == \"object\") {\n                lang = testLang;\n            }\n        }\n        if(!lang) {\n            OpenLayers.Console.warn(\n                'Failed to find OpenLayers.Lang.' + parts.join(\"-\") +\n                ' dictionary, falling back to default language'\n            );\n            lang = OpenLayers.Lang.defaultCode;\n        }\n        \n        OpenLayers.Lang.code = lang;\n    },\n\n    /**\n     * APIMethod: translate\n     * Looks up a key from a dictionary based on the current language string.\n     *     The value of <getCode> will be used to determine the appropriate\n     *     dictionary.  Dictionaries are stored in <OpenLayers.Lang>.\n     *\n     * Parameters:\n     * key - {String} The key for an i18n string value in the dictionary.\n     * context - {Object} Optional context to be used with\n     *     <OpenLayers.String.format>.\n     * \n     * Returns:\n     * {String} A internationalized string.\n     */\n    translate: function(key, context) {\n        var dictionary = OpenLayers.Lang[OpenLayers.Lang.getCode()];\n        var message = dictionary && dictionary[key];\n        if(!message) {\n            // Message not found, fall back to message key\n            message = key;\n        }\n        if(context) {\n            message = OpenLayers.String.format(message, context);\n        }\n        return message;\n    }\n    \n};\n\n\n/**\n * APIMethod: OpenLayers.i18n\n * Alias for <OpenLayers.Lang.translate>.  Looks up a key from a dictionary\n *     based on the current language string. The value of\n *     <OpenLayers.Lang.getCode> will be used to determine the appropriate\n *     dictionary.  Dictionaries are stored in <OpenLayers.Lang>.\n *\n * Parameters:\n * key - {String} The key for an i18n string value in the dictionary.\n * context - {Object} Optional context to be used with\n *     <OpenLayers.String.format>.\n * \n * Returns:\n * {String} A internationalized string.\n */\nOpenLayers.i18n = OpenLayers.Lang.translate;\n/* ======================================================================\n    OpenLayers/Util.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/BaseTypes.js\n * @requires OpenLayers/BaseTypes/Bounds.js\n * @requires OpenLayers/BaseTypes/Element.js\n * @requires OpenLayers/BaseTypes/LonLat.js\n * @requires OpenLayers/BaseTypes/Pixel.js\n * @requires OpenLayers/BaseTypes/Size.js\n * @requires OpenLayers/Lang.js\n */\n\n/**\n * Namespace: Util\n */\nOpenLayers.Util = OpenLayers.Util || {};\n\n/** \n * Function: getElement\n * This is the old $() from prototype\n *\n * Parameters:\n * e - {String or DOMElement or Window}\n *\n * Returns:\n * {Array(DOMElement) or DOMElement}\n */\nOpenLayers.Util.getElement = function() {\n    var elements = [];\n\n    for (var i=0, len=arguments.length; i<len; i++) {\n        var element = arguments[i];\n        if (typeof element == 'string') {\n            element = document.getElementById(element);\n        }\n        if (arguments.length == 1) {\n            return element;\n        }\n        elements.push(element);\n    }\n    return elements;\n};\n\n/**\n * Function: isElement\n * A cross-browser implementation of \"e instanceof Element\".\n *\n * Parameters:\n * o - {Object} The object to test.\n *\n * Returns:\n * {Boolean}\n */\nOpenLayers.Util.isElement = function(o) {\n    return !!(o && o.nodeType === 1);\n};\n\n/**\n * Function: isArray\n * Tests that the provided object is an array.\n * This test handles the cross-IFRAME case not caught\n * by \"a instanceof Array\" and should be used instead.\n * \n * Parameters:\n * a - {Object} the object test.\n * \n * Returns:\n * {Boolean} true if the object is an array.\n */\nOpenLayers.Util.isArray = function(a) {\n    return (Object.prototype.toString.call(a) === '[object Array]');\n};\n\n/** \n * Function: removeItem\n * Remove an object from an array. Iterates through the array\n *     to find the item, then removes it.\n *\n * Parameters:\n * array - {Array}\n * item - {Object}\n * \n * Returns:\n * {Array} A reference to the array\n */\nOpenLayers.Util.removeItem = function(array, item) {\n    for(var i = array.length - 1; i >= 0; i--) {\n        if(array[i] == item) {\n            array.splice(i,1);\n            //break;more than once??\n        }\n    }\n    return array;\n};\n\n/** \n * Function: indexOf\n * Seems to exist already in FF, but not in MOZ.\n * \n * Parameters:\n * array - {Array}\n * obj - {*}\n * \n * Returns:\n * {Integer} The index at which the first object was found in the array.\n *           If not found, returns -1.\n */\nOpenLayers.Util.indexOf = function(array, obj) {\n    // use the build-in function if available.\n    if (typeof array.indexOf == \"function\") {\n        return array.indexOf(obj);\n    } else {\n        for (var i = 0, len = array.length; i < len; i++) {\n            if (array[i] == obj) {\n                return i;\n            }\n        }\n        return -1;   \n    }\n};\n\n\n/**\n * Property: dotless\n * {RegExp}\n * Compiled regular expression to match dots (\".\").  This is used for replacing\n *     dots in identifiers.  Because object identifiers are frequently used for\n *     DOM element identifiers by the library, we avoid using dots to make for\n *     more sensible CSS selectors.\n *\n * TODO: Use a module pattern to avoid bloating the API with stuff like this.\n */\nOpenLayers.Util.dotless = /\\./g;\n\n/**\n * Function: modifyDOMElement\n * \n * Modifies many properties of a DOM element all at once.  Passing in \n * null to an individual parameter will avoid setting the attribute.\n *\n * Parameters:\n * element - {DOMElement} DOM element to modify.\n * id - {String} The element id attribute to set.  Note that dots (\".\") will be\n *     replaced with underscore (\"_\") in setting the element id.\n * px - {<OpenLayers.Pixel>|Object} The element left and top position,\n *                                  OpenLayers.Pixel or an object with\n *                                  a 'x' and 'y' properties.\n * sz - {<OpenLayers.Size>|Object} The element width and height,\n *                                 OpenLayers.Size or an object with a\n *                                 'w' and 'h' properties.\n * position - {String}       The position attribute.  eg: absolute, \n *                           relative, etc.\n * border - {String}         The style.border attribute.  eg:\n *                           solid black 2px\n * overflow - {String}       The style.overview attribute.  \n * opacity - {Float}         Fractional value (0.0 - 1.0)\n */\nOpenLayers.Util.modifyDOMElement = function(element, id, px, sz, position, \n                                            border, overflow, opacity) {\n\n    if (id) {\n        element.id = id.replace(OpenLayers.Util.dotless, \"_\");\n    }\n    if (px) {\n        element.style.left = px.x + \"px\";\n        element.style.top = px.y + \"px\";\n    }\n    if (sz) {\n        element.style.width = sz.w + \"px\";\n        element.style.height = sz.h + \"px\";\n    }\n    if (position) {\n        element.style.position = position;\n    }\n    if (border) {\n        element.style.border = border;\n    }\n    if (overflow) {\n        element.style.overflow = overflow;\n    }\n    if (parseFloat(opacity) >= 0.0 && parseFloat(opacity) < 1.0) {\n        element.style.filter = 'alpha(opacity=' + (opacity * 100) + ')';\n        element.style.opacity = opacity;\n    } else if (parseFloat(opacity) == 1.0) {\n        element.style.filter = '';\n        element.style.opacity = '';\n    }\n};\n\n/** \n * Function: createDiv\n * Creates a new div and optionally set some standard attributes.\n * Null may be passed to each parameter if you do not wish to\n * set a particular attribute.\n * Note - zIndex is NOT set on the resulting div.\n * \n * Parameters:\n * id - {String} An identifier for this element.  If no id is\n *               passed an identifier will be created \n *               automatically.  Note that dots (\".\") will be replaced with\n *               underscore (\"_\") when generating ids.\n * px - {<OpenLayers.Pixel>|Object} The element left and top position,\n *                                  OpenLayers.Pixel or an object with\n *                                  a 'x' and 'y' properties.\n * sz - {<OpenLayers.Size>|Object} The element width and height,\n *                                 OpenLayers.Size or an object with a\n *                                 'w' and 'h' properties.\n * imgURL - {String} A url pointing to an image to use as a \n *                   background image.\n * position - {String} The style.position value. eg: absolute,\n *                     relative etc.\n * border - {String} The the style.border value. \n *                   eg: 2px solid black\n * overflow - {String} The style.overflow value. Eg. hidden\n * opacity - {Float} Fractional value (0.0 - 1.0)\n * \n * Returns: \n * {DOMElement} A DOM Div created with the specified attributes.\n */\nOpenLayers.Util.createDiv = function(id, px, sz, imgURL, position, \n                                     border, overflow, opacity) {\n\n    var dom = document.createElement('div');\n\n    if (imgURL) {\n        dom.style.backgroundImage = 'url(' + imgURL + ')';\n    }\n\n    //set generic properties\n    if (!id) {\n        id = OpenLayers.Util.createUniqueID(\"OpenLayersDiv\");\n    }\n    if (!position) {\n        position = \"absolute\";\n    }\n    OpenLayers.Util.modifyDOMElement(dom, id, px, sz, position, \n                                     border, overflow, opacity);\n\n    return dom;\n};\n\n/**\n * Function: createImage\n * Creates an img element with specific attribute values.\n *  \n * Parameters:\n * id - {String} The id field for the img.  If none assigned one will be\n *               automatically generated.\n * px - {<OpenLayers.Pixel>|Object} The element left and top position,\n *                                  OpenLayers.Pixel or an object with\n *                                  a 'x' and 'y' properties.\n * sz - {<OpenLayers.Size>|Object} The element width and height,\n *                                 OpenLayers.Size or an object with a\n *                                 'w' and 'h' properties.\n * imgURL - {String} The url to use as the image source.\n * position - {String} The style.position value.\n * border - {String} The border to place around the image.\n * opacity - {Float} Fractional value (0.0 - 1.0)\n * delayDisplay - {Boolean} If true waits until the image has been\n *                          loaded.\n * \n * Returns:\n * {DOMElement} A DOM Image created with the specified attributes.\n */\nOpenLayers.Util.createImage = function(id, px, sz, imgURL, position, border,\n                                       opacity, delayDisplay) {\n\n    var image = document.createElement(\"img\");\n\n    //set generic properties\n    if (!id) {\n        id = OpenLayers.Util.createUniqueID(\"OpenLayersDiv\");\n    }\n    if (!position) {\n        position = \"relative\";\n    }\n    OpenLayers.Util.modifyDOMElement(image, id, px, sz, position, \n                                     border, null, opacity);\n\n    if (delayDisplay) {\n        image.style.display = \"none\";\n        function display() {\n            image.style.display = \"\";\n            OpenLayers.Event.stopObservingElement(image);\n        }\n        OpenLayers.Event.observe(image, \"load\", display);\n        OpenLayers.Event.observe(image, \"error\", display);\n    }\n    \n    //set special properties\n    image.style.alt = id;\n    image.galleryImg = \"no\";\n    if (imgURL) {\n        image.src = imgURL;\n    }\n        \n    return image;\n};\n\n/**\n * Property: IMAGE_RELOAD_ATTEMPTS\n * {Integer} How many times should we try to reload an image before giving up?\n *           Default is 0\n */\nOpenLayers.IMAGE_RELOAD_ATTEMPTS = 0;\n\n/**\n * Property: alphaHackNeeded\n * {Boolean} true if the png alpha hack is necessary and possible, false otherwise.\n */\nOpenLayers.Util.alphaHackNeeded = null;\n\n/**\n * Function: alphaHack\n * Checks whether it's necessary (and possible) to use the png alpha\n * hack which allows alpha transparency for png images under Internet\n * Explorer.\n * \n * Returns:\n * {Boolean} true if the png alpha hack is necessary and possible, false otherwise.\n */\nOpenLayers.Util.alphaHack = function() {\n    if (OpenLayers.Util.alphaHackNeeded == null) {\n        var arVersion = navigator.appVersion.split(\"MSIE\");\n        var version = parseFloat(arVersion[1]);\n        var filter = false;\n    \n        // IEs4Lin dies when trying to access document.body.filters, because \n        // the property is there, but requires a DLL that can't be provided. This\n        // means that we need to wrap this in a try/catch so that this can\n        // continue.\n    \n        try { \n            filter = !!(document.body.filters);\n        } catch (e) {}    \n    \n        OpenLayers.Util.alphaHackNeeded = (filter && \n                                           (version >= 5.5) && (version < 7));\n    }\n    return OpenLayers.Util.alphaHackNeeded;\n};\n\n/** \n * Function: modifyAlphaImageDiv\n * \n * Parameters:\n * div - {DOMElement} Div containing Alpha-adjusted Image\n * id - {String}\n * px - {<OpenLayers.Pixel>|Object} OpenLayers.Pixel or an object with\n *                                  a 'x' and 'y' properties.\n * sz - {<OpenLayers.Size>|Object} OpenLayers.Size or an object with\n *                                 a 'w' and 'h' properties.\n * imgURL - {String}\n * position - {String}\n * border - {String}\n * sizing - {String} 'crop', 'scale', or 'image'. Default is \"scale\"\n * opacity - {Float} Fractional value (0.0 - 1.0)\n */ \nOpenLayers.Util.modifyAlphaImageDiv = function(div, id, px, sz, imgURL, \n                                               position, border, sizing, \n                                               opacity) {\n\n    OpenLayers.Util.modifyDOMElement(div, id, px, sz, position,\n                                     null, null, opacity);\n\n    var img = div.childNodes[0];\n\n    if (imgURL) {\n        img.src = imgURL;\n    }\n    OpenLayers.Util.modifyDOMElement(img, div.id + \"_innerImage\", null, sz, \n                                     \"relative\", border);\n    \n    if (OpenLayers.Util.alphaHack()) {\n        if(div.style.display != \"none\") {\n            div.style.display = \"inline-block\";\n        }\n        if (sizing == null) {\n            sizing = \"scale\";\n        }\n        \n        div.style.filter = \"progid:DXImageTransform.Microsoft\" +\n                           \".AlphaImageLoader(src='\" + img.src + \"', \" +\n                           \"sizingMethod='\" + sizing + \"')\";\n        if (parseFloat(div.style.opacity) >= 0.0 && \n            parseFloat(div.style.opacity) < 1.0) {\n            div.style.filter += \" alpha(opacity=\" + div.style.opacity * 100 + \")\";\n        }\n\n        img.style.filter = \"alpha(opacity=0)\";\n    }\n};\n\n/** \n * Function: createAlphaImageDiv\n * \n * Parameters:\n * id - {String}\n * px - {<OpenLayers.Pixel>|Object} OpenLayers.Pixel or an object with\n *                                  a 'x' and 'y' properties.\n * sz - {<OpenLayers.Size>|Object} OpenLayers.Size or an object with\n *                                 a 'w' and 'h' properties.\n * imgURL - {String}\n * position - {String}\n * border - {String}\n * sizing - {String} 'crop', 'scale', or 'image'. Default is \"scale\"\n * opacity - {Float} Fractional value (0.0 - 1.0)\n * delayDisplay - {Boolean} If true waits until the image has been\n *                          loaded.\n * \n * Returns:\n * {DOMElement} A DOM Div created with a DOM Image inside it. If the hack is \n *              needed for transparency in IE, it is added.\n */ \nOpenLayers.Util.createAlphaImageDiv = function(id, px, sz, imgURL, \n                                               position, border, sizing, \n                                               opacity, delayDisplay) {\n    \n    var div = OpenLayers.Util.createDiv();\n    var img = OpenLayers.Util.createImage(null, null, null, null, null, null, \n                                          null, delayDisplay);\n    img.className = \"olAlphaImg\";\n    div.appendChild(img);\n\n    OpenLayers.Util.modifyAlphaImageDiv(div, id, px, sz, imgURL, position, \n                                        border, sizing, opacity);\n    \n    return div;\n};\n\n\n/** \n * Function: upperCaseObject\n * Creates a new hashtable and copies over all the keys from the \n *     passed-in object, but storing them under an uppercased\n *     version of the key at which they were stored.\n * \n * Parameters: \n * object - {Object}\n * \n * Returns: \n * {Object} A new Object with all the same keys but uppercased\n */\nOpenLayers.Util.upperCaseObject = function (object) {\n    var uObject = {};\n    for (var key in object) {\n        uObject[key.toUpperCase()] = object[key];\n    }\n    return uObject;\n};\n\n/** \n * Function: applyDefaults\n * Takes an object and copies any properties that don't exist from\n *     another properties, by analogy with OpenLayers.Util.extend() from\n *     Prototype.js.\n * \n * Parameters:\n * to - {Object} The destination object.\n * from - {Object} The source object.  Any properties of this object that\n *     are undefined in the to object will be set on the to object.\n *\n * Returns:\n * {Object} A reference to the to object.  Note that the to argument is modified\n *     in place and returned by this function.\n */\nOpenLayers.Util.applyDefaults = function (to, from) {\n    to = to || {};\n    /*\n     * FF/Windows < 2.0.0.13 reports \"Illegal operation on WrappedNative\n     * prototype object\" when calling hawOwnProperty if the source object is an\n     * instance of window.Event.\n     */\n    var fromIsEvt = typeof window.Event == \"function\"\n                    && from instanceof window.Event;\n\n    for (var key in from) {\n        if (to[key] === undefined ||\n            (!fromIsEvt && from.hasOwnProperty\n             && from.hasOwnProperty(key) && !to.hasOwnProperty(key))) {\n            to[key] = from[key];\n        }\n    }\n    /**\n     * IE doesn't include the toString property when iterating over an object's\n     * properties with the for(property in object) syntax.  Explicitly check if\n     * the source has its own toString property.\n     */\n    if(!fromIsEvt && from && from.hasOwnProperty\n       && from.hasOwnProperty('toString') && !to.hasOwnProperty('toString')) {\n        to.toString = from.toString;\n    }\n    \n    return to;\n};\n\n/**\n * Function: getParameterString\n * \n * Parameters:\n * params - {Object}\n * \n * Returns:\n * {String} A concatenation of the properties of an object in \n *          http parameter notation. \n *          (ex. <i>\"key1=value1&key2=value2&key3=value3\"</i>)\n *          If a parameter is actually a list, that parameter will then\n *          be set to a comma-seperated list of values (foo,bar) instead\n *          of being URL escaped (foo%3Abar). \n */\nOpenLayers.Util.getParameterString = function(params) {\n    var paramsArray = [];\n    \n    for (var key in params) {\n      var value = params[key];\n      if ((value != null) && (typeof value != 'function')) {\n        var encodedValue;\n        if (typeof value == 'object' && value.constructor == Array) {\n          /* value is an array; encode items and separate with \",\" */\n          var encodedItemArray = [];\n          var item;\n          for (var itemIndex=0, len=value.length; itemIndex<len; itemIndex++) {\n            item = value[itemIndex];\n            encodedItemArray.push(encodeURIComponent(\n                (item === null || item === undefined) ? \"\" : item)\n            );\n          }\n          encodedValue = encodedItemArray.join(\",\");\n        }\n        else {\n          /* value is a string; simply encode */\n          encodedValue = encodeURIComponent(value);\n        }\n        paramsArray.push(encodeURIComponent(key) + \"=\" + encodedValue);\n      }\n    }\n    \n    return paramsArray.join(\"&\");\n};\n\n/**\n * Function: urlAppend\n * Appends a parameter string to a url. This function includes the logic for\n * using the appropriate character (none, & or ?) to append to the url before\n * appending the param string.\n * \n * Parameters:\n * url - {String} The url to append to\n * paramStr - {String} The param string to append\n * \n * Returns:\n * {String} The new url\n */\nOpenLayers.Util.urlAppend = function(url, paramStr) {\n    var newUrl = url;\n    if(paramStr) {\n        var parts = (url + \" \").split(/[?&]/);\n        newUrl += (parts.pop() === \" \" ?\n            paramStr :\n            parts.length ? \"&\" + paramStr : \"?\" + paramStr);\n    }\n    return newUrl;\n};\n\n/** \n * Function: getImagesLocation\n * \n * Returns:\n * {String} The fully formatted image location string\n */\nOpenLayers.Util.getImagesLocation = function() {\n    return OpenLayers.ImgPath || (OpenLayers._getScriptLocation() + \"img/\");\n};\n\n/** \n * Function: getImageLocation\n * \n * Returns:\n * {String} The fully formatted location string for a specified image\n */\nOpenLayers.Util.getImageLocation = function(image) {\n    return OpenLayers.Util.getImagesLocation() + image;\n};\n\n\n/** \n * Function: Try\n * Execute functions until one of them doesn't throw an error. \n *     Capitalized because \"try\" is a reserved word in JavaScript.\n *     Taken directly from OpenLayers.Util.Try()\n * \n * Parameters:\n * [*] - {Function} Any number of parameters may be passed to Try()\n *    It will attempt to execute each of them until one of them \n *    successfully executes. \n *    If none executes successfully, returns null.\n * \n * Returns:\n * {*} The value returned by the first successfully executed function.\n */\nOpenLayers.Util.Try = function() {\n    var returnValue = null;\n\n    for (var i=0, len=arguments.length; i<len; i++) {\n      var lambda = arguments[i];\n      try {\n        returnValue = lambda();\n        break;\n      } catch (e) {}\n    }\n\n    return returnValue;\n};\n\n/**\n * Function: getXmlNodeValue\n * \n * Parameters:\n * node - {XMLNode}\n * \n * Returns:\n * {String} The text value of the given node, without breaking in firefox or IE\n */\nOpenLayers.Util.getXmlNodeValue = function(node) {\n    var val = null;\n    OpenLayers.Util.Try( \n        function() {\n            val = node.text;\n            if (!val) {\n                val = node.textContent;\n            }\n            if (!val) {\n                val = node.firstChild.nodeValue;\n            }\n        }, \n        function() {\n            val = node.textContent;\n        }); \n    return val;\n};\n\n/** \n * Function: mouseLeft\n * \n * Parameters:\n * evt - {Event}\n * div - {HTMLDivElement}\n * \n * Returns:\n * {Boolean}\n */\nOpenLayers.Util.mouseLeft = function (evt, div) {\n    // start with the element to which the mouse has moved\n    var target = (evt.relatedTarget) ? evt.relatedTarget : evt.toElement;\n    // walk up the DOM tree.\n    while (target != div && target != null) {\n        target = target.parentNode;\n    }\n    // if the target we stop at isn't the div, then we've left the div.\n    return (target != div);\n};\n\n/**\n * Property: precision\n * {Number} The number of significant digits to retain to avoid\n * floating point precision errors.\n *\n * We use 14 as a \"safe\" default because, although IEEE 754 double floats\n * (standard on most modern operating systems) support up to about 16\n * significant digits, 14 significant digits are sufficient to represent\n * sub-millimeter accuracy in any coordinate system that anyone is likely to\n * use with OpenLayers.\n *\n * If DEFAULT_PRECISION is set to 0, the original non-truncating behavior\n * of OpenLayers <2.8 is preserved. Be aware that this will cause problems\n * with certain projections, e.g. spherical Mercator.\n *\n */\nOpenLayers.Util.DEFAULT_PRECISION = 14;\n\n/**\n * Function: toFloat\n * Convenience method to cast an object to a Number, rounded to the\n * desired floating point precision.\n *\n * Parameters:\n * number    - {Number} The number to cast and round.\n * precision - {Number} An integer suitable for use with\n *      Number.toPrecision(). Defaults to OpenLayers.Util.DEFAULT_PRECISION.\n *      If set to 0, no rounding is performed.\n *\n * Returns:\n * {Number} The cast, rounded number.\n */\nOpenLayers.Util.toFloat = function (number, precision) {\n    if (precision == null) {\n        precision = OpenLayers.Util.DEFAULT_PRECISION;\n    }\n    if (typeof number !== \"number\") {\n        number = parseFloat(number);\n    }\n    return precision === 0 ? number :\n                             parseFloat(number.toPrecision(precision));\n};\n\n/**\n * Function: rad\n * \n * Parameters:\n * x - {Float}\n * \n * Returns:\n * {Float}\n */\nOpenLayers.Util.rad = function(x) {return x*Math.PI/180;};\n\n/**\n * Function: deg\n *\n * Parameters:\n * x - {Float}\n *\n * Returns:\n * {Float}\n */\nOpenLayers.Util.deg = function(x) {return x*180/Math.PI;};\n\n/**\n * Property: VincentyConstants\n * {Object} Constants for Vincenty functions.\n */\nOpenLayers.Util.VincentyConstants = {\n    a: 6378137,\n    b: 6356752.3142,\n    f: 1/298.257223563\n};\n\n/**\n * APIFunction: distVincenty\n * Given two objects representing points with geographic coordinates, this\n *     calculates the distance between those points on the surface of an\n *     ellipsoid.\n *\n * Parameters:\n * p1 - {<OpenLayers.LonLat>} (or any object with both .lat, .lon properties)\n * p2 - {<OpenLayers.LonLat>} (or any object with both .lat, .lon properties)\n *\n * Returns:\n * {Float} The distance (in km) between the two input points as measured on an\n *     ellipsoid.  Note that the input point objects must be in geographic\n *     coordinates (decimal degrees) and the return distance is in kilometers.\n */\nOpenLayers.Util.distVincenty = function(p1, p2) {\n    var ct = OpenLayers.Util.VincentyConstants;\n    var a = ct.a, b = ct.b, f = ct.f;\n\n    var L = OpenLayers.Util.rad(p2.lon - p1.lon);\n    var U1 = Math.atan((1-f) * Math.tan(OpenLayers.Util.rad(p1.lat)));\n    var U2 = Math.atan((1-f) * Math.tan(OpenLayers.Util.rad(p2.lat)));\n    var sinU1 = Math.sin(U1), cosU1 = Math.cos(U1);\n    var sinU2 = Math.sin(U2), cosU2 = Math.cos(U2);\n    var lambda = L, lambdaP = 2*Math.PI;\n    var iterLimit = 20;\n    while (Math.abs(lambda-lambdaP) > 1e-12 && --iterLimit>0) {\n        var sinLambda = Math.sin(lambda), cosLambda = Math.cos(lambda);\n        var sinSigma = Math.sqrt((cosU2*sinLambda) * (cosU2*sinLambda) +\n        (cosU1*sinU2-sinU1*cosU2*cosLambda) * (cosU1*sinU2-sinU1*cosU2*cosLambda));\n        if (sinSigma==0) {\n            return 0;  // co-incident points\n        }\n        var cosSigma = sinU1*sinU2 + cosU1*cosU2*cosLambda;\n        var sigma = Math.atan2(sinSigma, cosSigma);\n        var alpha = Math.asin(cosU1 * cosU2 * sinLambda / sinSigma);\n        var cosSqAlpha = Math.cos(alpha) * Math.cos(alpha);\n        var cos2SigmaM = cosSigma - 2*sinU1*sinU2/cosSqAlpha;\n        var C = f/16*cosSqAlpha*(4+f*(4-3*cosSqAlpha));\n        lambdaP = lambda;\n        lambda = L + (1-C) * f * Math.sin(alpha) *\n        (sigma + C*sinSigma*(cos2SigmaM+C*cosSigma*(-1+2*cos2SigmaM*cos2SigmaM)));\n    }\n    if (iterLimit==0) {\n        return NaN;  // formula failed to converge\n    }\n    var uSq = cosSqAlpha * (a*a - b*b) / (b*b);\n    var A = 1 + uSq/16384*(4096+uSq*(-768+uSq*(320-175*uSq)));\n    var B = uSq/1024 * (256+uSq*(-128+uSq*(74-47*uSq)));\n    var deltaSigma = B*sinSigma*(cos2SigmaM+B/4*(cosSigma*(-1+2*cos2SigmaM*cos2SigmaM)-\n        B/6*cos2SigmaM*(-3+4*sinSigma*sinSigma)*(-3+4*cos2SigmaM*cos2SigmaM)));\n    var s = b*A*(sigma-deltaSigma);\n    var d = s.toFixed(3)/1000; // round to 1mm precision\n    return d;\n};\n\n/**\n * APIFunction: destinationVincenty\n * Calculate destination point given start point lat/long (numeric degrees),\n * bearing (numeric degrees) & distance (in m).\n * Adapted from Chris Veness work, see\n * http://www.movable-type.co.uk/scripts/latlong-vincenty-direct.html\n *\n * Parameters:\n * lonlat  - {<OpenLayers.LonLat>} (or any object with both .lat, .lon\n *     properties) The start point.\n * brng     - {Float} The bearing (degrees).\n * dist     - {Float} The ground distance (meters).\n *\n * Returns:\n * {<OpenLayers.LonLat>} The destination point.\n */\nOpenLayers.Util.destinationVincenty = function(lonlat, brng, dist) {\n    var u = OpenLayers.Util;\n    var ct = u.VincentyConstants;\n    var a = ct.a, b = ct.b, f = ct.f;\n\n    var lon1 = lonlat.lon;\n    var lat1 = lonlat.lat;\n\n    var s = dist;\n    var alpha1 = u.rad(brng);\n    var sinAlpha1 = Math.sin(alpha1);\n    var cosAlpha1 = Math.cos(alpha1);\n\n    var tanU1 = (1-f) * Math.tan(u.rad(lat1));\n    var cosU1 = 1 / Math.sqrt((1 + tanU1*tanU1)), sinU1 = tanU1*cosU1;\n    var sigma1 = Math.atan2(tanU1, cosAlpha1);\n    var sinAlpha = cosU1 * sinAlpha1;\n    var cosSqAlpha = 1 - sinAlpha*sinAlpha;\n    var uSq = cosSqAlpha * (a*a - b*b) / (b*b);\n    var A = 1 + uSq/16384*(4096+uSq*(-768+uSq*(320-175*uSq)));\n    var B = uSq/1024 * (256+uSq*(-128+uSq*(74-47*uSq)));\n\n    var sigma = s / (b*A), sigmaP = 2*Math.PI;\n    while (Math.abs(sigma-sigmaP) > 1e-12) {\n        var cos2SigmaM = Math.cos(2*sigma1 + sigma);\n        var sinSigma = Math.sin(sigma);\n        var cosSigma = Math.cos(sigma);\n        var deltaSigma = B*sinSigma*(cos2SigmaM+B/4*(cosSigma*(-1+2*cos2SigmaM*cos2SigmaM)-\n            B/6*cos2SigmaM*(-3+4*sinSigma*sinSigma)*(-3+4*cos2SigmaM*cos2SigmaM)));\n        sigmaP = sigma;\n        sigma = s / (b*A) + deltaSigma;\n    }\n\n    var tmp = sinU1*sinSigma - cosU1*cosSigma*cosAlpha1;\n    var lat2 = Math.atan2(sinU1*cosSigma + cosU1*sinSigma*cosAlpha1,\n        (1-f)*Math.sqrt(sinAlpha*sinAlpha + tmp*tmp));\n    var lambda = Math.atan2(sinSigma*sinAlpha1, cosU1*cosSigma - sinU1*sinSigma*cosAlpha1);\n    var C = f/16*cosSqAlpha*(4+f*(4-3*cosSqAlpha));\n    var L = lambda - (1-C) * f * sinAlpha *\n        (sigma + C*sinSigma*(cos2SigmaM+C*cosSigma*(-1+2*cos2SigmaM*cos2SigmaM)));\n\n    var revAz = Math.atan2(sinAlpha, -tmp);  // final bearing\n\n    return new OpenLayers.LonLat(lon1+u.deg(L), u.deg(lat2));\n};\n\n/**\n * Function: getParameters\n * Parse the parameters from a URL or from the current page itself into a \n *     JavaScript Object. Note that parameter values with commas are separated\n *     out into an Array.\n * \n * Parameters:\n * url - {String} Optional url used to extract the query string.\n *                If url is null or is not supplied, query string is taken \n *                from the page location.\n * options - {Object} Additional options. Optional.\n *\n * Valid options:\n *   splitArgs - {Boolean} Split comma delimited params into arrays? Default is\n *       true.\n * \n * Returns:\n * {Object} An object of key/value pairs from the query string.\n */\nOpenLayers.Util.getParameters = function(url, options) {\n    options = options || {};\n    // if no url specified, take it from the location bar\n    url = (url === null || url === undefined) ? window.location.href : url;\n\n    //parse out parameters portion of url string\n    var paramsString = \"\";\n    if (OpenLayers.String.contains(url, '?')) {\n        var start = url.indexOf('?') + 1;\n        var end = OpenLayers.String.contains(url, \"#\") ?\n                    url.indexOf('#') : url.length;\n        paramsString = url.substring(start, end);\n    }\n\n    var parameters = {};\n    var pairs = paramsString.split(/[&;]/);\n    for(var i=0, len=pairs.length; i<len; ++i) {\n        var keyValue = pairs[i].split('=');\n        if (keyValue[0]) {\n\n            var key = keyValue[0];\n            try {\n                key = decodeURIComponent(key);\n            } catch (err) {\n                key = unescape(key);\n            }\n            \n            // being liberal by replacing \"+\" with \" \"\n            var value = (keyValue[1] || '').replace(/\\+/g, \" \");\n\n            try {\n                value = decodeURIComponent(value);\n            } catch (err) {\n                value = unescape(value);\n            }\n            \n            // follow OGC convention of comma delimited values\n            if (options.splitArgs !== false) {\n                value = value.split(\",\");\n            }\n\n            //if there's only one value, do not return as array                    \n            if (value.length == 1) {\n                value = value[0];\n            }                \n            \n            parameters[key] = value;\n         }\n     }\n    return parameters;\n};\n\n/**\n * Property: lastSeqID\n * {Integer} The ever-incrementing count variable.\n *           Used for generating unique ids.\n */\nOpenLayers.Util.lastSeqID = 0;\n\n/**\n * Function: createUniqueID\n * Create a unique identifier for this session.  Each time this function\n *     is called, a counter is incremented.  The return will be the optional\n *     prefix (defaults to \"id_\") appended with the counter value.\n * \n * Parameters:\n * prefix - {String} Optional string to prefix unique id. Default is \"id_\".\n *     Note that dots (\".\") in the prefix will be replaced with underscore (\"_\").\n * \n * Returns:\n * {String} A unique id string, built on the passed in prefix.\n */\nOpenLayers.Util.createUniqueID = function(prefix) {\n    if (prefix == null) {\n        prefix = \"id_\";\n    } else {\n        prefix = prefix.replace(OpenLayers.Util.dotless, \"_\");\n    }\n    OpenLayers.Util.lastSeqID += 1; \n    return prefix + OpenLayers.Util.lastSeqID;        \n};\n\n/**\n * Constant: INCHES_PER_UNIT\n * {Object} Constant inches per unit -- borrowed from MapServer mapscale.c\n * derivation of nautical miles from http://en.wikipedia.org/wiki/Nautical_mile\n * Includes the full set of units supported by CS-MAP (http://trac.osgeo.org/csmap/)\n * and PROJ.4 (http://trac.osgeo.org/proj/)\n * The hardcoded table is maintain in a CS-MAP source code module named CSdataU.c\n * The hardcoded table of PROJ.4 units are in pj_units.c.\n */\nOpenLayers.INCHES_PER_UNIT = { \n    'inches': 1.0,\n    'ft': 12.0,\n    'mi': 63360.0,\n    'm': 39.37,\n    'km': 39370,\n    'dd': 4374754,\n    'yd': 36\n};\nOpenLayers.INCHES_PER_UNIT[\"in\"]= OpenLayers.INCHES_PER_UNIT.inches;\nOpenLayers.INCHES_PER_UNIT[\"degrees\"] = OpenLayers.INCHES_PER_UNIT.dd;\nOpenLayers.INCHES_PER_UNIT[\"nmi\"] = 1852 * OpenLayers.INCHES_PER_UNIT.m;\n\n// Units from CS-Map\nOpenLayers.METERS_PER_INCH = 0.02540005080010160020;\nOpenLayers.Util.extend(OpenLayers.INCHES_PER_UNIT, {\n    \"Inch\": OpenLayers.INCHES_PER_UNIT.inches,\n    \"Meter\": 1.0 / OpenLayers.METERS_PER_INCH,   //EPSG:9001\n    \"Foot\": 0.30480060960121920243 / OpenLayers.METERS_PER_INCH,   //EPSG:9003\n    \"IFoot\": 0.30480000000000000000 / OpenLayers.METERS_PER_INCH,   //EPSG:9002\n    \"ClarkeFoot\": 0.3047972651151 / OpenLayers.METERS_PER_INCH,   //EPSG:9005\n    \"SearsFoot\": 0.30479947153867624624 / OpenLayers.METERS_PER_INCH,   //EPSG:9041\n    \"GoldCoastFoot\": 0.30479971018150881758 / OpenLayers.METERS_PER_INCH,   //EPSG:9094\n    \"IInch\": 0.02540000000000000000 / OpenLayers.METERS_PER_INCH,\n    \"MicroInch\": 0.00002540000000000000 / OpenLayers.METERS_PER_INCH,\n    \"Mil\": 0.00000002540000000000 / OpenLayers.METERS_PER_INCH,\n    \"Centimeter\": 0.01000000000000000000 / OpenLayers.METERS_PER_INCH,\n    \"Kilometer\": 1000.00000000000000000000 / OpenLayers.METERS_PER_INCH,   //EPSG:9036\n    \"Yard\": 0.91440182880365760731 / OpenLayers.METERS_PER_INCH,\n    \"SearsYard\": 0.914398414616029 / OpenLayers.METERS_PER_INCH,   //EPSG:9040\n    \"IndianYard\": 0.91439853074444079983 / OpenLayers.METERS_PER_INCH,   //EPSG:9084\n    \"IndianYd37\": 0.91439523 / OpenLayers.METERS_PER_INCH,   //EPSG:9085\n    \"IndianYd62\": 0.9143988 / OpenLayers.METERS_PER_INCH,   //EPSG:9086\n    \"IndianYd75\": 0.9143985 / OpenLayers.METERS_PER_INCH,   //EPSG:9087\n    \"IndianFoot\": 0.30479951 / OpenLayers.METERS_PER_INCH,   //EPSG:9080\n    \"IndianFt37\": 0.30479841 / OpenLayers.METERS_PER_INCH,   //EPSG:9081\n    \"IndianFt62\": 0.3047996 / OpenLayers.METERS_PER_INCH,   //EPSG:9082\n    \"IndianFt75\": 0.3047995 / OpenLayers.METERS_PER_INCH,   //EPSG:9083\n    \"Mile\": 1609.34721869443738887477 / OpenLayers.METERS_PER_INCH,\n    \"IYard\": 0.91440000000000000000 / OpenLayers.METERS_PER_INCH,   //EPSG:9096\n    \"IMile\": 1609.34400000000000000000 / OpenLayers.METERS_PER_INCH,   //EPSG:9093\n    \"NautM\": 1852.00000000000000000000 / OpenLayers.METERS_PER_INCH,   //EPSG:9030\n    \"Lat-66\": 110943.316488932731 / OpenLayers.METERS_PER_INCH,\n    \"Lat-83\": 110946.25736872234125 / OpenLayers.METERS_PER_INCH,\n    \"Decimeter\": 0.10000000000000000000 / OpenLayers.METERS_PER_INCH,\n    \"Millimeter\": 0.00100000000000000000 / OpenLayers.METERS_PER_INCH,\n    \"Dekameter\": 10.00000000000000000000 / OpenLayers.METERS_PER_INCH,\n    \"Decameter\": 10.00000000000000000000 / OpenLayers.METERS_PER_INCH,\n    \"Hectometer\": 100.00000000000000000000 / OpenLayers.METERS_PER_INCH,\n    \"GermanMeter\": 1.0000135965 / OpenLayers.METERS_PER_INCH,   //EPSG:9031\n    \"CaGrid\": 0.999738 / OpenLayers.METERS_PER_INCH,\n    \"ClarkeChain\": 20.1166194976 / OpenLayers.METERS_PER_INCH,   //EPSG:9038\n    \"GunterChain\": 20.11684023368047 / OpenLayers.METERS_PER_INCH,   //EPSG:9033\n    \"BenoitChain\": 20.116782494375872 / OpenLayers.METERS_PER_INCH,   //EPSG:9062\n    \"SearsChain\": 20.11676512155 / OpenLayers.METERS_PER_INCH,   //EPSG:9042\n    \"ClarkeLink\": 0.201166194976 / OpenLayers.METERS_PER_INCH,   //EPSG:9039\n    \"GunterLink\": 0.2011684023368047 / OpenLayers.METERS_PER_INCH,   //EPSG:9034\n    \"BenoitLink\": 0.20116782494375872 / OpenLayers.METERS_PER_INCH,   //EPSG:9063\n    \"SearsLink\": 0.2011676512155 / OpenLayers.METERS_PER_INCH,   //EPSG:9043\n    \"Rod\": 5.02921005842012 / OpenLayers.METERS_PER_INCH,\n    \"IntnlChain\": 20.1168 / OpenLayers.METERS_PER_INCH,   //EPSG:9097\n    \"IntnlLink\": 0.201168 / OpenLayers.METERS_PER_INCH,   //EPSG:9098\n    \"Perch\": 5.02921005842012 / OpenLayers.METERS_PER_INCH,\n    \"Pole\": 5.02921005842012 / OpenLayers.METERS_PER_INCH,\n    \"Furlong\": 201.1684023368046 / OpenLayers.METERS_PER_INCH,\n    \"Rood\": 3.778266898 / OpenLayers.METERS_PER_INCH,\n    \"CapeFoot\": 0.3047972615 / OpenLayers.METERS_PER_INCH,\n    \"Brealey\": 375.00000000000000000000 / OpenLayers.METERS_PER_INCH,\n    \"ModAmFt\": 0.304812252984505969011938 / OpenLayers.METERS_PER_INCH,\n    \"Fathom\": 1.8288 / OpenLayers.METERS_PER_INCH,\n    \"NautM-UK\": 1853.184 / OpenLayers.METERS_PER_INCH,\n    \"50kilometers\": 50000.0 / OpenLayers.METERS_PER_INCH,\n    \"150kilometers\": 150000.0 / OpenLayers.METERS_PER_INCH\n});\n\n//unit abbreviations supported by PROJ.4\nOpenLayers.Util.extend(OpenLayers.INCHES_PER_UNIT, {\n    \"mm\": OpenLayers.INCHES_PER_UNIT[\"Meter\"] / 1000.0,\n    \"cm\": OpenLayers.INCHES_PER_UNIT[\"Meter\"] / 100.0,\n    \"dm\": OpenLayers.INCHES_PER_UNIT[\"Meter\"] * 100.0,\n    \"km\": OpenLayers.INCHES_PER_UNIT[\"Meter\"] * 1000.0,\n    \"kmi\": OpenLayers.INCHES_PER_UNIT[\"nmi\"],    //International Nautical Mile\n    \"fath\": OpenLayers.INCHES_PER_UNIT[\"Fathom\"], //International Fathom\n    \"ch\": OpenLayers.INCHES_PER_UNIT[\"IntnlChain\"],  //International Chain\n    \"link\": OpenLayers.INCHES_PER_UNIT[\"IntnlLink\"], //International Link\n    \"us-in\": OpenLayers.INCHES_PER_UNIT[\"inches\"], //U.S. Surveyor's Inch\n    \"us-ft\": OpenLayers.INCHES_PER_UNIT[\"Foot\"], //U.S. Surveyor's Foot\n    \"us-yd\": OpenLayers.INCHES_PER_UNIT[\"Yard\"], //U.S. Surveyor's Yard\n    \"us-ch\": OpenLayers.INCHES_PER_UNIT[\"GunterChain\"], //U.S. Surveyor's Chain\n    \"us-mi\": OpenLayers.INCHES_PER_UNIT[\"Mile\"],   //U.S. Surveyor's Statute Mile\n    \"ind-yd\": OpenLayers.INCHES_PER_UNIT[\"IndianYd37\"],  //Indian Yard\n    \"ind-ft\": OpenLayers.INCHES_PER_UNIT[\"IndianFt37\"],  //Indian Foot\n    \"ind-ch\": 20.11669506 / OpenLayers.METERS_PER_INCH  //Indian Chain\n});\n\n/** \n * Constant: DOTS_PER_INCH\n * {Integer} 72 (A sensible default)\n */\nOpenLayers.DOTS_PER_INCH = 72;\n\n/**\n * Function: normalizeScale\n * \n * Parameters:\n * scale - {float}\n * \n * Returns:\n * {Float} A normalized scale value, in 1 / X format. \n *         This means that if a value less than one ( already 1/x) is passed\n *         in, it just returns scale directly. Otherwise, it returns \n *         1 / scale\n */\nOpenLayers.Util.normalizeScale = function (scale) {\n    var normScale = (scale > 1.0) ? (1.0 / scale) \n                                  : scale;\n    return normScale;\n};\n\n/**\n * Function: getResolutionFromScale\n * \n * Parameters:\n * scale - {Float}\n * units - {String} Index into OpenLayers.INCHES_PER_UNIT hashtable.\n *                  Default is degrees\n * \n * Returns:\n * {Float} The corresponding resolution given passed-in scale and unit \n *     parameters.  If the given scale is falsey, the returned resolution will\n *     be undefined.\n */\nOpenLayers.Util.getResolutionFromScale = function (scale, units) {\n    var resolution;\n    if (scale) {\n        if (units == null) {\n            units = \"degrees\";\n        }\n        var normScale = OpenLayers.Util.normalizeScale(scale);\n        resolution = 1 / (normScale * OpenLayers.INCHES_PER_UNIT[units]\n                                        * OpenLayers.DOTS_PER_INCH);        \n    }\n    return resolution;\n};\n\n/**\n * Function: getScaleFromResolution\n * \n * Parameters:\n * resolution - {Float}\n * units - {String} Index into OpenLayers.INCHES_PER_UNIT hashtable.\n *                  Default is degrees\n * \n * Returns:\n * {Float} The corresponding scale given passed-in resolution and unit \n *         parameters.\n */\nOpenLayers.Util.getScaleFromResolution = function (resolution, units) {\n\n    if (units == null) {\n        units = \"degrees\";\n    }\n\n    var scale = resolution * OpenLayers.INCHES_PER_UNIT[units] *\n                    OpenLayers.DOTS_PER_INCH;\n    return scale;\n};\n\n/**\n * Function: pagePosition\n * Calculates the position of an element on the page (see\n * http://code.google.com/p/doctype/wiki/ArticlePageOffset)\n *\n * OpenLayers.Util.pagePosition is based on Yahoo's getXY method, which is\n * Copyright (c) 2006, Yahoo! Inc.\n * All rights reserved.\n * \n * Redistribution and use of this software in source and binary forms, with or\n * without modification, are permitted provided that the following conditions\n * are met:\n * \n * * Redistributions of source code must retain the above copyright notice,\n *   this list of conditions and the following disclaimer.\n * \n * * Redistributions in binary form must reproduce the above copyright notice,\n *   this list of conditions and the following disclaimer in the documentation\n *   and/or other materials provided with the distribution.\n * \n * * Neither the name of Yahoo! Inc. nor the names of its contributors may be\n *   used to endorse or promote products derived from this software without\n *   specific prior written permission of Yahoo! Inc.\n * \n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE\n * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE \n * POSSIBILITY OF SUCH DAMAGE.\n *\n * Parameters:\n * forElement - {DOMElement}\n * \n * Returns:\n * {Array} two item array, Left value then Top value.\n */\nOpenLayers.Util.pagePosition =  function(forElement) {\n    // NOTE: If element is hidden (display none or disconnected or any the\n    // ancestors are hidden) we get (0,0) by default but we still do the\n    // accumulation of scroll position.\n\n    var pos = [0, 0];\n    var viewportElement = OpenLayers.Util.getViewportElement();\n    if (!forElement || forElement == window || forElement == viewportElement) {\n        // viewport is always at 0,0 as that defined the coordinate system for\n        // this function - this avoids special case checks in the code below\n        return pos;\n    }\n\n    // Gecko browsers normally use getBoxObjectFor to calculate the position.\n    // When invoked for an element with an implicit absolute position though it\n    // can be off by one. Therefore the recursive implementation is used in\n    // those (relatively rare) cases.\n    var BUGGY_GECKO_BOX_OBJECT =\n        OpenLayers.IS_GECKO && document.getBoxObjectFor &&\n        OpenLayers.Element.getStyle(forElement, 'position') == 'absolute' &&\n        (forElement.style.top == '' || forElement.style.left == '');\n\n    var parent = null;\n    var box;\n\n    if (forElement.getBoundingClientRect) { // IE\n        box = forElement.getBoundingClientRect();\n        var scrollTop = window.pageYOffset || viewportElement.scrollTop;\n        var scrollLeft = window.pageXOffset || viewportElement.scrollLeft;\n        \n        pos[0] = box.left + scrollLeft;\n        pos[1] = box.top + scrollTop;\n\n    } else if (document.getBoxObjectFor && !BUGGY_GECKO_BOX_OBJECT) { // gecko\n        // Gecko ignores the scroll values for ancestors, up to 1.9.  See:\n        // https://bugzilla.mozilla.org/show_bug.cgi?id=328881 and\n        // https://bugzilla.mozilla.org/show_bug.cgi?id=330619\n\n        box = document.getBoxObjectFor(forElement);\n        var vpBox = document.getBoxObjectFor(viewportElement);\n        pos[0] = box.screenX - vpBox.screenX;\n        pos[1] = box.screenY - vpBox.screenY;\n\n    } else { // safari/opera\n        pos[0] = forElement.offsetLeft;\n        pos[1] = forElement.offsetTop;\n        parent = forElement.offsetParent;\n        if (parent != forElement) {\n            while (parent) {\n                pos[0] += parent.offsetLeft;\n                pos[1] += parent.offsetTop;\n                parent = parent.offsetParent;\n            }\n        }\n\n        var browser = OpenLayers.BROWSER_NAME;\n\n        // opera & (safari absolute) incorrectly account for body offsetTop\n        if (browser == \"opera\" || (browser == \"safari\" &&\n              OpenLayers.Element.getStyle(forElement, 'position') == 'absolute')) {\n            pos[1] -= document.body.offsetTop;\n        }\n\n        // accumulate the scroll positions for everything but the body element\n        parent = forElement.offsetParent;\n        while (parent && parent != document.body) {\n            pos[0] -= parent.scrollLeft;\n            // see https://bugs.opera.com/show_bug.cgi?id=249965\n            if (browser != \"opera\" || parent.tagName != 'TR') {\n                pos[1] -= parent.scrollTop;\n            }\n            parent = parent.offsetParent;\n        }\n    }\n    \n    return pos;\n};\n\n/**\n * Function: getViewportElement\n * Returns die viewport element of the document. The viewport element is\n * usually document.documentElement, except in IE,where it is either\n * document.body or document.documentElement, depending on the document's\n * compatibility mode (see\n * http://code.google.com/p/doctype/wiki/ArticleClientViewportElement)\n *\n * Returns:\n * {DOMElement}\n */\nOpenLayers.Util.getViewportElement = function() {\n    var viewportElement = arguments.callee.viewportElement;\n    if (viewportElement == undefined) {\n        viewportElement = (OpenLayers.BROWSER_NAME == \"msie\" &&\n            document.compatMode != 'CSS1Compat') ? document.body :\n            document.documentElement;\n        arguments.callee.viewportElement = viewportElement;\n    }\n    return viewportElement;\n};\n\n/** \n * Function: isEquivalentUrl\n * Test two URLs for equivalence. \n * \n * Setting 'ignoreCase' allows for case-independent comparison.\n * \n * Comparison is based on: \n *  - Protocol\n *  - Host (evaluated without the port)\n *  - Port (set 'ignorePort80' to ignore \"80\" values)\n *  - Hash ( set 'ignoreHash' to disable)\n *  - Pathname (for relative <-> absolute comparison) \n *  - Arguments (so they can be out of order)\n *  \n * Parameters:\n * url1 - {String}\n * url2 - {String}\n * options - {Object} Allows for customization of comparison:\n *                    'ignoreCase' - Default is True\n *                    'ignorePort80' - Default is True\n *                    'ignoreHash' - Default is True\n *\n * Returns:\n * {Boolean} Whether or not the two URLs are equivalent\n */\nOpenLayers.Util.isEquivalentUrl = function(url1, url2, options) {\n    options = options || {};\n\n    OpenLayers.Util.applyDefaults(options, {\n        ignoreCase: true,\n        ignorePort80: true,\n        ignoreHash: true,\n        splitArgs: false\n    });\n\n    var urlObj1 = OpenLayers.Util.createUrlObject(url1, options);\n    var urlObj2 = OpenLayers.Util.createUrlObject(url2, options);\n\n    //compare all keys except for \"args\" (treated below)\n    for(var key in urlObj1) {\n        if(key !== \"args\") {\n            if(urlObj1[key] != urlObj2[key]) {\n                return false;\n            }\n        }\n    }\n\n    // compare search args - irrespective of order\n    for(var key in urlObj1.args) {\n        if(urlObj1.args[key] != urlObj2.args[key]) {\n            return false;\n        }\n        delete urlObj2.args[key];\n    }\n    // urlObj2 shouldn't have any args left\n    for(var key in urlObj2.args) {\n        return false;\n    }\n    \n    return true;\n};\n\n/**\n * Function: createUrlObject\n * \n * Parameters:\n * url - {String}\n * options - {Object} A hash of options.\n *\n * Valid options:\n *   ignoreCase - {Boolean} lowercase url,\n *   ignorePort80 - {Boolean} don't include explicit port if port is 80,\n *   ignoreHash - {Boolean} Don't include part of url after the hash (#).\n *   splitArgs - {Boolean} Split comma delimited params into arrays? Default is\n *       true.\n * \n * Returns:\n * {Object} An object with separate url, a, port, host, and args parsed out \n *          and ready for comparison\n */\nOpenLayers.Util.createUrlObject = function(url, options) {\n    options = options || {};\n\n    // deal with relative urls first\n    if(!(/^\\w+:\\/\\//).test(url)) {\n        var loc = window.location;\n        var port = loc.port ? \":\" + loc.port : \"\";\n        var fullUrl = loc.protocol + \"//\" + loc.host.split(\":\").shift() + port;\n        if(url.indexOf(\"/\") === 0) {\n            // full pathname\n            url = fullUrl + url;\n        } else {\n            // relative to current path\n            var parts = loc.pathname.split(\"/\");\n            parts.pop();\n            url = fullUrl + parts.join(\"/\") + \"/\" + url;\n        }\n    }\n  \n    if (options.ignoreCase) {\n        url = url.toLowerCase(); \n    }\n\n    var a = document.createElement('a');\n    a.href = url;\n    \n    var urlObject = {};\n    \n    //host (without port)\n    urlObject.host = a.host.split(\":\").shift();\n\n    //protocol\n    urlObject.protocol = a.protocol;  \n\n    //port (get uniform browser behavior with port 80 here)\n    if(options.ignorePort80) {\n        urlObject.port = (a.port == \"80\" || a.port == \"0\") ? \"\" : a.port;\n    } else {\n        urlObject.port = (a.port == \"\" || a.port == \"0\") ? \"80\" : a.port;\n    }\n\n    //hash\n    urlObject.hash = (options.ignoreHash || a.hash === \"#\") ? \"\" : a.hash;  \n    \n    //args\n    var queryString = a.search;\n    if (!queryString) {\n        var qMark = url.indexOf(\"?\");\n        queryString = (qMark != -1) ? url.substr(qMark) : \"\";\n    }\n    urlObject.args = OpenLayers.Util.getParameters(queryString,\n            {splitArgs: options.splitArgs});\n\n    // pathname\n    //\n    // This is a workaround for Internet Explorer where\n    // window.location.pathname has a leading \"/\", but\n    // a.pathname has no leading \"/\".\n    urlObject.pathname = (a.pathname.charAt(0) == \"/\") ? a.pathname : \"/\" + a.pathname;\n    \n    return urlObject; \n};\n \n/**\n * Function: removeTail\n * Takes a url and removes everything after the ? and #\n * \n * Parameters:\n * url - {String} The url to process\n * \n * Returns:\n * {String} The string with all queryString and Hash removed\n */\nOpenLayers.Util.removeTail = function(url) {\n    var head = null;\n    \n    var qMark = url.indexOf(\"?\");\n    var hashMark = url.indexOf(\"#\");\n\n    if (qMark == -1) {\n        head = (hashMark != -1) ? url.substr(0,hashMark) : url;\n    } else {\n        head = (hashMark != -1) ? url.substr(0,Math.min(qMark, hashMark)) \n                                  : url.substr(0, qMark);\n    }\n    return head;\n};\n\n/**\n * Constant: IS_GECKO\n * {Boolean} True if the userAgent reports the browser to use the Gecko engine\n */\nOpenLayers.IS_GECKO = (function() {\n    var ua = navigator.userAgent.toLowerCase();\n    return ua.indexOf(\"webkit\") == -1 && ua.indexOf(\"gecko\") != -1;\n})();\n\n/**\n * Constant: CANVAS_SUPPORTED\n * {Boolean} True if canvas 2d is supported.\n */\nOpenLayers.CANVAS_SUPPORTED = (function() {\n    var elem = document.createElement('canvas');\n    return !!(elem.getContext && elem.getContext('2d'));\n})();\n\n/**\n * Constant: BROWSER_NAME\n * {String}\n * A substring of the navigator.userAgent property.  Depending on the userAgent\n *     property, this will be the empty string or one of the following:\n *     * \"opera\" -- Opera\n *     * \"msie\"  -- Internet Explorer\n *     * \"safari\" -- Safari\n *     * \"firefox\" -- Firefox\n *     * \"mozilla\" -- Mozilla\n */\nOpenLayers.BROWSER_NAME = (function() {\n    var name = \"\";\n    var ua = navigator.userAgent.toLowerCase();\n    if (ua.indexOf(\"opera\") != -1) {\n        name = \"opera\";\n    } else if (ua.indexOf(\"msie\") != -1) {\n        name = \"msie\";\n    } else if (ua.indexOf(\"safari\") != -1) {\n        name = \"safari\";\n    } else if (ua.indexOf(\"mozilla\") != -1) {\n        if (ua.indexOf(\"firefox\") != -1) {\n            name = \"firefox\";\n        } else {\n            name = \"mozilla\";\n        }\n    }\n    return name;\n})();\n\n/**\n * Function: getBrowserName\n * \n * Returns:\n * {String} A string which specifies which is the current \n *          browser in which we are running. \n * \n *          Currently-supported browser detection and codes:\n *           * 'opera' -- Opera\n *           * 'msie'  -- Internet Explorer\n *           * 'safari' -- Safari\n *           * 'firefox' -- Firefox\n *           * 'mozilla' -- Mozilla\n * \n *          If we are unable to property identify the browser, we \n *           return an empty string.\n */\nOpenLayers.Util.getBrowserName = function() {\n    return OpenLayers.BROWSER_NAME;\n};\n\n/**\n * Method: getRenderedDimensions\n * Renders the contentHTML offscreen to determine actual dimensions for\n *     popup sizing. As we need layout to determine dimensions the content\n *     is rendered -9999px to the left and absolute to ensure the \n *     scrollbars do not flicker\n *     \n * Parameters:\n * contentHTML\n * size - {<OpenLayers.Size>} If either the 'w' or 'h' properties is \n *     specified, we fix that dimension of the div to be measured. This is \n *     useful in the case where we have a limit in one dimension and must \n *     therefore meaure the flow in the other dimension.\n * options - {Object}\n *\n * Allowed Options:\n *     displayClass - {String} Optional parameter.  A CSS class name(s) string\n *         to provide the CSS context of the rendered content.\n *     containerElement - {DOMElement} Optional parameter. Insert the HTML to \n *         this node instead of the body root when calculating dimensions. \n * \n * Returns:\n * {<OpenLayers.Size>}\n */\nOpenLayers.Util.getRenderedDimensions = function(contentHTML, size, options) {\n    \n    var w, h;\n    \n    // create temp container div with restricted size\n    var container = document.createElement(\"div\");\n    container.style.visibility = \"hidden\";\n        \n    var containerElement = (options && options.containerElement) \n        ? options.containerElement : document.body;\n    \n    // Opera and IE7 can't handle a node with position:aboslute if it inherits\n    // position:absolute from a parent.\n    var parentHasPositionAbsolute = false;\n    var superContainer = null;\n    var parent = containerElement;\n    while (parent && parent.tagName.toLowerCase()!=\"body\") {\n        var parentPosition = OpenLayers.Element.getStyle(parent, \"position\");\n        if(parentPosition == \"absolute\") {\n            parentHasPositionAbsolute = true;\n            break;\n        } else if (parentPosition && parentPosition != \"static\") {\n            break;\n        }\n        parent = parent.parentNode;\n    }\n    if(parentHasPositionAbsolute && (containerElement.clientHeight === 0 || \n                                     containerElement.clientWidth === 0) ){\n        superContainer = document.createElement(\"div\");\n        superContainer.style.visibility = \"hidden\";\n        superContainer.style.position = \"absolute\";\n        superContainer.style.overflow = \"visible\";\n        superContainer.style.width = document.body.clientWidth + \"px\";\n        superContainer.style.height = document.body.clientHeight + \"px\";\n        superContainer.appendChild(container);\n    }\n    container.style.position = \"absolute\";\n\n    //fix a dimension, if specified.\n    if (size) {\n        if (size.w) {\n            w = size.w;\n            container.style.width = w + \"px\";\n        } else if (size.h) {\n            h = size.h;\n            container.style.height = h + \"px\";\n        }\n    }\n\n    //add css classes, if specified\n    if (options && options.displayClass) {\n        container.className = options.displayClass;\n    }\n    \n    // create temp content div and assign content\n    var content = document.createElement(\"div\");\n    content.innerHTML = contentHTML;\n    \n    // we need overflow visible when calculating the size\n    content.style.overflow = \"visible\";\n    if (content.childNodes) {\n        for (var i=0, l=content.childNodes.length; i<l; i++) {\n            if (!content.childNodes[i].style) continue;\n            content.childNodes[i].style.overflow = \"visible\";\n        }\n    }\n    \n    // add content to restricted container \n    container.appendChild(content);\n    \n    // append container to body for rendering\n    if (superContainer) {\n        containerElement.appendChild(superContainer);\n    } else {\n        containerElement.appendChild(container);\n    }\n    \n    // calculate scroll width of content and add corners and shadow width\n    if (!w) {\n        w = parseInt(content.scrollWidth);\n    \n        // update container width to allow height to adjust\n        container.style.width = w + \"px\";\n    }        \n    // capture height and add shadow and corner image widths\n    if (!h) {\n        h = parseInt(content.scrollHeight);\n    }\n\n    // remove elements\n    container.removeChild(content);\n    if (superContainer) {\n        superContainer.removeChild(container);\n        containerElement.removeChild(superContainer);\n    } else {\n        containerElement.removeChild(container);\n    }\n    \n    return new OpenLayers.Size(w, h);\n};\n\n/**\n * APIFunction: getScrollbarWidth\n * This function has been modified by the OpenLayers from the original version,\n *     written by Matthew Eernisse and released under the Apache 2 \n *     license here:\n * \n *     http://www.fleegix.org/articles/2006/05/30/getting-the-scrollbar-width-in-pixels\n * \n *     It has been modified simply to cache its value, since it is physically \n *     impossible that this code could ever run in more than one browser at \n *     once. \n * \n * Returns:\n * {Integer}\n */\nOpenLayers.Util.getScrollbarWidth = function() {\n    \n    var scrollbarWidth = OpenLayers.Util._scrollbarWidth;\n    \n    if (scrollbarWidth == null) {\n        var scr = null;\n        var inn = null;\n        var wNoScroll = 0;\n        var wScroll = 0;\n    \n        // Outer scrolling div\n        scr = document.createElement('div');\n        scr.style.position = 'absolute';\n        scr.style.top = '-1000px';\n        scr.style.left = '-1000px';\n        scr.style.width = '100px';\n        scr.style.height = '50px';\n        // Start with no scrollbar\n        scr.style.overflow = 'hidden';\n    \n        // Inner content div\n        inn = document.createElement('div');\n        inn.style.width = '100%';\n        inn.style.height = '200px';\n    \n        // Put the inner div in the scrolling div\n        scr.appendChild(inn);\n        // Append the scrolling div to the doc\n        document.body.appendChild(scr);\n    \n        // Width of the inner div sans scrollbar\n        wNoScroll = inn.offsetWidth;\n    \n        // Add the scrollbar\n        scr.style.overflow = 'scroll';\n        // Width of the inner div width scrollbar\n        wScroll = inn.offsetWidth;\n    \n        // Remove the scrolling div from the doc\n        document.body.removeChild(document.body.lastChild);\n    \n        // Pixel width of the scroller\n        OpenLayers.Util._scrollbarWidth = (wNoScroll - wScroll);\n        scrollbarWidth = OpenLayers.Util._scrollbarWidth;\n    }\n\n    return scrollbarWidth;\n};\n\n/**\n * APIFunction: getFormattedLonLat\n * This function will return latitude or longitude value formatted as \n *\n * Parameters:\n * coordinate - {Float} the coordinate value to be formatted\n * axis - {String} value of either 'lat' or 'lon' to indicate which axis is to\n *          to be formatted (default = lat)\n * dmsOption - {String} specify the precision of the output can be one of:\n *           'dms' show degrees minutes and seconds\n *           'dm' show only degrees and minutes\n *           'd' show only degrees\n * \n * Returns:\n * {String} the coordinate value formatted as a string\n */\nOpenLayers.Util.getFormattedLonLat = function(coordinate, axis, dmsOption) {\n    if (!dmsOption) {\n        dmsOption = 'dms';    //default to show degree, minutes, seconds\n    }\n\n    coordinate = (coordinate+540)%360 - 180; // normalize for sphere being round\n\n    var abscoordinate = Math.abs(coordinate);\n    var coordinatedegrees = Math.floor(abscoordinate);\n\n    var coordinateminutes = (abscoordinate - coordinatedegrees)/(1/60);\n    var tempcoordinateminutes = coordinateminutes;\n    coordinateminutes = Math.floor(coordinateminutes);\n    var coordinateseconds = (tempcoordinateminutes - coordinateminutes)/(1/60);\n    coordinateseconds =  Math.round(coordinateseconds*10);\n    coordinateseconds /= 10;\n\n    if( coordinateseconds >= 60) { \n        coordinateseconds -= 60; \n        coordinateminutes += 1; \n        if( coordinateminutes >= 60) { \n            coordinateminutes -= 60; \n            coordinatedegrees += 1; \n        } \n    }\n    \n    if( coordinatedegrees < 10 ) {\n        coordinatedegrees = \"0\" + coordinatedegrees;\n    }\n    var str = coordinatedegrees + \"\\u00B0\";\n\n    if (dmsOption.indexOf('dm') >= 0) {\n        if( coordinateminutes < 10 ) {\n            coordinateminutes = \"0\" + coordinateminutes;\n        }\n        str += coordinateminutes + \"'\";\n  \n        if (dmsOption.indexOf('dms') >= 0) {\n            if( coordinateseconds < 10 ) {\n                coordinateseconds = \"0\" + coordinateseconds;\n            }\n            str += coordinateseconds + '\"';\n        }\n    }\n    \n    if (axis == \"lon\") {\n        str += coordinate < 0 ? OpenLayers.i18n(\"W\") : OpenLayers.i18n(\"E\");\n    } else {\n        str += coordinate < 0 ? OpenLayers.i18n(\"S\") : OpenLayers.i18n(\"N\");\n    }\n    return str;\n};\n\n/**\n * Function: getConstructor\n * Take an OpenLayers style CLASS_NAME and return a constructor.\n *\n * Parameters:\n * className - {String} The dot delimited class name (e.g. 'OpenLayers.Foo').\n * \n * Returns:\n * {Function} The constructor.\n */\nOpenLayers.Util.getConstructor = function(className) {\n    var Constructor;\n    var parts = className.split('.');\n    if (parts[0] === \"OpenLayers\") {\n        Constructor = OpenLayers;\n    } else {\n        // someone extended our base class and used their own namespace\n        // this will not work when the library is evaluated in a closure\n        // but it is the best we can do (until we ourselves provide a global)\n        Constructor = window[parts[0]];\n    }\n    for (var i = 1, ii = parts.length; i < ii; ++i) {\n        Constructor = Constructor[parts[i]];\n    }\n    return Constructor;\n};\n/* ======================================================================\n    OpenLayers/Events.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Util.js\n */\n\n/**\n * Namespace: OpenLayers.Event\n * Utility functions for event handling.\n */\nOpenLayers.Event = {\n\n    /** \n     * Property: observers \n     * {Object} A hashtable cache of the event observers. Keyed by\n     * element._eventCacheID \n     */\n    observers: false,\n\n    /**\n     * Constant: KEY_SPACE\n     * {int}\n     */\n    KEY_SPACE: 32,\n    \n    /** \n     * Constant: KEY_BACKSPACE \n     * {int} \n     */\n    KEY_BACKSPACE: 8,\n\n    /** \n     * Constant: KEY_TAB \n     * {int} \n     */\n    KEY_TAB: 9,\n\n    /** \n     * Constant: KEY_RETURN \n     * {int} \n     */\n    KEY_RETURN: 13,\n\n    /** \n     * Constant: KEY_ESC \n     * {int} \n     */\n    KEY_ESC: 27,\n\n    /** \n     * Constant: KEY_LEFT \n     * {int} \n     */\n    KEY_LEFT: 37,\n\n    /** \n     * Constant: KEY_UP \n     * {int} \n     */\n    KEY_UP: 38,\n\n    /** \n     * Constant: KEY_RIGHT \n     * {int} \n     */\n    KEY_RIGHT: 39,\n\n    /** \n     * Constant: KEY_DOWN \n     * {int} \n     */\n    KEY_DOWN: 40,\n\n    /** \n     * Constant: KEY_DELETE \n     * {int} \n     */\n    KEY_DELETE: 46,\n\n\n    /**\n     * Method: element\n     * Cross browser event element detection.\n     * \n     * Parameters:\n     * event - {Event} \n     * \n     * Returns:\n     * {DOMElement} The element that caused the event \n     */\n    element: function(event) {\n        return event.target || event.srcElement;\n    },\n\n    /**\n     * Method: isSingleTouch\n     * Determine whether event was caused by a single touch\n     *\n     * Parameters:\n     * event - {Event}\n     *\n     * Returns:\n     * {Boolean}\n     */\n    isSingleTouch: function(event) {\n        return event.touches && event.touches.length == 1;\n    },\n\n    /**\n     * Method: isMultiTouch\n     * Determine whether event was caused by a multi touch\n     *\n     * Parameters:\n     * event - {Event}\n     *\n     * Returns:\n     * {Boolean}\n     */\n    isMultiTouch: function(event) {\n        return event.touches && event.touches.length > 1;\n    },\n\n    /**\n     * Method: isTouchEvent\n     * Determine whether the event was triggered by a touch\n     * \n     * Parameters:\n     * evt - {Event}\n     * \n     * Returns:\n     * {Boolean}\n     */\n    isTouchEvent: function(evt) {\n        return (\"\" + evt.type).indexOf(\"touch\") === 0 || (\n                \"pointerType\" in evt && (\n                     evt.pointerType === evt.MSPOINTER_TYPE_TOUCH /*IE10 pointer*/ ||\n                     evt.pointerType === \"touch\" /*W3C pointer*/));\n    },\n\n    /**\n     * Method: isLeftClick\n     * Determine whether event was caused by a left click. \n     *\n     * Parameters:\n     * event - {Event} \n     * \n     * Returns:\n     * {Boolean}\n     */\n    isLeftClick: function(event) {\n        return (((event.which) && (event.which == 1)) ||\n                ((event.button) && (event.button == 1)));\n    },\n\n    /**\n     * Method: isRightClick\n     * Determine whether event was caused by a right mouse click. \n     *\n     * Parameters:\n     * event - {Event} \n     * \n     * Returns:\n     * {Boolean}\n     */\n     isRightClick: function(event) {\n        return (((event.which) && (event.which == 3)) ||\n                ((event.button) && (event.button == 2)));\n    },\n     \n    /**\n     * Method: stop\n     * Stops an event from propagating. \n     *\n     * Parameters: \n     * event - {Event} \n     * allowDefault - {Boolean} If true, we stop the event chain but \n     *     still allow the default browser behaviour (text selection,\n     *     radio-button clicking, etc).  Default is false.\n     */\n    stop: function(event, allowDefault) {\n        \n        if (!allowDefault) { \n            OpenLayers.Event.preventDefault(event);\n        }\n                \n        if (event.stopPropagation) {\n            event.stopPropagation();\n        } else {\n            event.cancelBubble = true;\n        }\n    },\n\n    /**\n     * Method: preventDefault\n     * Cancels the event if it is cancelable, without stopping further\n     * propagation of the event.\n     *\n     * Parameters:\n     * event - {Event}\n     */\n    preventDefault: function(event) {\n        if (event.preventDefault) {\n            event.preventDefault();\n        } else {\n            event.returnValue = false;\n        }\n    },\n\n    /** \n     * Method: findElement\n     * \n     * Parameters:\n     * event - {Event} \n     * tagName - {String} \n     * \n     * Returns:\n     * {DOMElement} The first node with the given tagName, starting from the\n     * node the event was triggered on and traversing the DOM upwards\n     */\n    findElement: function(event, tagName) {\n        var element = OpenLayers.Event.element(event);\n        while (element.parentNode && (!element.tagName ||\n              (element.tagName.toUpperCase() != tagName.toUpperCase()))){\n            element = element.parentNode;\n        }\n        return element;\n    },\n\n    /** \n     * Method: observe\n     * \n     * Parameters:\n     * elementParam - {DOMElement || String} \n     * name - {String} \n     * observer - {function} \n     * useCapture - {Boolean} \n     */\n    observe: function(elementParam, name, observer, useCapture) {\n        var element = OpenLayers.Util.getElement(elementParam);\n        useCapture = useCapture || false;\n\n        if (name == 'keypress' &&\n           (navigator.appVersion.match(/Konqueror|Safari|KHTML/)\n           || element.attachEvent)) {\n            name = 'keydown';\n        }\n\n        //if observers cache has not yet been created, create it\n        if (!this.observers) {\n            this.observers = {};\n        }\n\n        //if not already assigned, make a new unique cache ID\n        if (!element._eventCacheID) {\n            var idPrefix = \"eventCacheID_\";\n            if (element.id) {\n                idPrefix = element.id + \"_\" + idPrefix;\n            }\n            element._eventCacheID = OpenLayers.Util.createUniqueID(idPrefix);\n        }\n\n        var cacheID = element._eventCacheID;\n\n        //if there is not yet a hash entry for this element, add one\n        if (!this.observers[cacheID]) {\n            this.observers[cacheID] = [];\n        }\n\n        //add a new observer to this element's list\n        this.observers[cacheID].push({\n            'element': element,\n            'name': name,\n            'observer': observer,\n            'useCapture': useCapture\n        });\n\n        //add the actual browser event listener\n        if (element.addEventListener) {\n            element.addEventListener(name, observer, useCapture);\n        } else if (element.attachEvent) {\n            element.attachEvent('on' + name, observer);\n        }\n    },\n\n    /** \n     * Method: stopObservingElement\n     * Given the id of an element to stop observing, cycle through the \n     *   element's cached observers, calling stopObserving on each one, \n     *   skipping those entries which can no longer be removed.\n     * \n     * parameters:\n     * elementParam - {DOMElement || String} \n     */\n    stopObservingElement: function(elementParam) {\n        var element = OpenLayers.Util.getElement(elementParam);\n        var cacheID = element._eventCacheID;\n\n        this._removeElementObservers(OpenLayers.Event.observers[cacheID]);\n    },\n\n    /**\n     * Method: _removeElementObservers\n     *\n     * Parameters:\n     * elementObservers - {Array(Object)} Array of (element, name, \n     *                                         observer, usecapture) objects, \n     *                                         taken directly from hashtable\n     */\n    _removeElementObservers: function(elementObservers) {\n        if (elementObservers) {\n            for(var i = elementObservers.length-1; i >= 0; i--) {\n                var entry = elementObservers[i];\n                OpenLayers.Event.stopObserving.apply(this, [\n                    entry.element, entry.name, entry.observer, entry.useCapture\n                ]);\n            }\n        }\n    },\n\n    /**\n     * Method: stopObserving\n     * \n     * Parameters:\n     * elementParam - {DOMElement || String} \n     * name - {String} \n     * observer - {function} \n     * useCapture - {Boolean} \n     *  \n     * Returns:\n     * {Boolean} Whether or not the event observer was removed\n     */\n    stopObserving: function(elementParam, name, observer, useCapture) {\n        useCapture = useCapture || false;\n    \n        var element = OpenLayers.Util.getElement(elementParam);\n        var cacheID = element._eventCacheID;\n\n        if (name == 'keypress') {\n            if ( navigator.appVersion.match(/Konqueror|Safari|KHTML/) || \n                 element.detachEvent) {\n              name = 'keydown';\n            }\n        }\n\n        // find element's entry in this.observers cache and remove it\n        var foundEntry = false;\n        var elementObservers = OpenLayers.Event.observers[cacheID];\n        if (elementObservers) {\n    \n            // find the specific event type in the element's list\n            var i=0;\n            while(!foundEntry && i < elementObservers.length) {\n                var cacheEntry = elementObservers[i];\n    \n                if ((cacheEntry.name == name) &&\n                    (cacheEntry.observer == observer) &&\n                    (cacheEntry.useCapture == useCapture)) {\n    \n                    elementObservers.splice(i, 1);\n                    if (elementObservers.length == 0) {\n                        delete OpenLayers.Event.observers[cacheID];\n                    }\n                    foundEntry = true;\n                    break; \n                }\n                i++;           \n            }\n        }\n    \n        //actually remove the event listener from browser\n        if (foundEntry) {\n            if (element.removeEventListener) {\n                element.removeEventListener(name, observer, useCapture);\n            } else if (element && element.detachEvent) {\n                element.detachEvent('on' + name, observer);\n            }\n        }\n        return foundEntry;\n    },\n    \n    /** \n     * Method: unloadCache\n     * Cycle through all the element entries in the events cache and call\n     *   stopObservingElement on each. \n     */\n    unloadCache: function() {\n        // check for OpenLayers.Event before checking for observers, because\n        // OpenLayers.Event may be undefined in IE if no map instance was\n        // created\n        if (OpenLayers.Event && OpenLayers.Event.observers) {\n            for (var cacheID in OpenLayers.Event.observers) {\n                var elementObservers = OpenLayers.Event.observers[cacheID];\n                OpenLayers.Event._removeElementObservers.apply(this, \n                                                           [elementObservers]);\n            }\n            OpenLayers.Event.observers = false;\n        }\n    },\n\n    CLASS_NAME: \"OpenLayers.Event\"\n};\n\n/* prevent memory leaks in IE */\nOpenLayers.Event.observe(window, 'unload', OpenLayers.Event.unloadCache, false);\n\n/**\n * Class: OpenLayers.Events\n */\nOpenLayers.Events = OpenLayers.Class({\n\n    /** \n     * Constant: BROWSER_EVENTS\n     * {Array(String)} supported events \n     */\n    BROWSER_EVENTS: [\n        \"mouseover\", \"mouseout\",\n        \"mousedown\", \"mouseup\", \"mousemove\", \n        \"click\", \"dblclick\", \"rightclick\", \"dblrightclick\",\n        \"resize\", \"focus\", \"blur\",\n        \"touchstart\", \"touchmove\", \"touchend\",\n        \"keydown\"\n    ],\n    \n    /**\n     * Constant: standard pointer model\n     * {string}\n     */\n    TOUCH_MODEL_POINTER: \"pointer\",\n\n    /**\n     * Constant: prefixed pointer model (IE10)\n     * {string}\n     */\n    TOUCH_MODEL_MSPOINTER: \"MSPointer\",\n\n    /**\n     * Constant: legacy touch model\n     * {string}\n     */\n    TOUCH_MODEL_TOUCH: \"touch\",\n\n    /** \n     * Property: listeners \n     * {Object} Hashtable of Array(Function): events listener functions  \n     */\n    listeners: null,\n\n    /** \n     * Property: object \n     * {Object}  the code object issuing application events \n     */\n    object: null,\n\n    /** \n     * Property: element \n     * {DOMElement}  the DOM element receiving browser events \n     */\n    element: null,\n\n    /** \n     * Property: eventHandler \n     * {Function}  bound event handler attached to elements \n     */\n    eventHandler: null,\n\n    /** \n     * APIProperty: fallThrough \n     * {Boolean} \n     */\n    fallThrough: null,\n\n    /** \n     * APIProperty: includeXY\n     * {Boolean} Should the .xy property automatically be created for browser\n     *    mouse events? In general, this should be false. If it is true, then\n     *    mouse events will automatically generate a '.xy' property on the \n     *    event object that is passed. (Prior to OpenLayers 2.7, this was true\n     *    by default.) Otherwise, you can call the getMousePosition on the\n     *    relevant events handler on the object available via the 'evt.object'\n     *    property of the evt object. So, for most events, you can call:\n     *    function named(evt) { \n     *        this.xy = this.object.events.getMousePosition(evt) \n     *    } \n     *\n     *    This option typically defaults to false for performance reasons:\n     *    when creating an events object whose primary purpose is to manage\n     *    relatively positioned mouse events within a div, it may make\n     *    sense to set it to true.\n     *\n     *    This option is also used to control whether the events object caches\n     *    offsets. If this is false, it will not: the reason for this is that\n     *    it is only expected to be called many times if the includeXY property\n     *    is set to true. If you set this to true, you are expected to clear \n     *    the offset cache manually (using this.clearMouseCache()) if:\n     *        the border of the element changes\n     *        the location of the element in the page changes\n    */\n    includeXY: false,      \n    \n    /**\n     * APIProperty: extensions\n     * {Object} Event extensions registered with this instance. Keys are\n     *     event types, values are {OpenLayers.Events.*} extension instances or\n     *     {Boolean} for events that an instantiated extension provides in\n     *     addition to the one it was created for.\n     *\n     * Extensions create an event in addition to browser events, which usually\n     * fires when a sequence of browser events is completed. Extensions are\n     * automatically instantiated when a listener is registered for an event\n     * provided by an extension.\n     *\n     * Extensions are created in the <OpenLayers.Events> namespace using\n     * <OpenLayers.Class>, and named after the event they provide.\n     * The constructor receives the target <OpenLayers.Events> instance as\n     * argument. Extensions that need to capture browser events before they\n     * propagate can register their listeners events using <register>, with\n     * {extension: true} as 4th argument.\n     *\n     * If an extension creates more than one event, an alias for each event\n     * type should be created and reference the same class. The constructor\n     * should set a reference in the target's extensions registry to itself.\n     *\n     * Below is a minimal extension that provides the \"foostart\" and \"fooend\"\n     * event types, which replace the native \"click\" event type if clicked on\n     * an element with the css class \"foo\":\n     *\n     * (code)\n     *   OpenLayers.Events.foostart = OpenLayers.Class({\n     *       initialize: function(target) {\n     *           this.target = target;\n     *           this.target.register(\"click\", this, this.doStuff, {extension: true});\n     *           // only required if extension provides more than one event type\n     *           this.target.extensions[\"foostart\"] = true;\n     *           this.target.extensions[\"fooend\"] = true;\n     *       },\n     *       destroy: function() {\n     *           var target = this.target;\n     *           target.unregister(\"click\", this, this.doStuff);\n     *           delete this.target;\n     *           // only required if extension provides more than one event type\n     *           delete target.extensions[\"foostart\"];\n     *           delete target.extensions[\"fooend\"];\n     *       },\n     *       doStuff: function(evt) {\n     *           var propagate = true;\n     *           if (OpenLayers.Event.element(evt).className === \"foo\") {\n     *               propagate = false;\n     *               var target = this.target;\n     *               target.triggerEvent(\"foostart\");\n     *               window.setTimeout(function() {\n     *                   target.triggerEvent(\"fooend\");\n     *               }, 1000);\n     *           }\n     *           return propagate;\n     *       }\n     *   });\n     *   // only required if extension provides more than one event type\n     *   OpenLayers.Events.fooend = OpenLayers.Events.foostart;\n     * (end)\n     * \n     */\n    extensions: null,\n    \n    /**\n     * Property: extensionCount\n     * {Object} Keys are event types (like in <listeners>), values are the\n     *     number of extension listeners for each event type.\n     */\n    extensionCount: null,\n\n    /**\n     * Method: clearMouseListener\n     * A version of <clearMouseCache> that is bound to this instance so that\n     *     it can be used with <OpenLayers.Event.observe> and\n     *     <OpenLayers.Event.stopObserving>.\n     */\n    clearMouseListener: null,\n\n    /**\n     * Constructor: OpenLayers.Events\n     * Construct an OpenLayers.Events object.\n     *\n     * Parameters:\n     * object - {Object} The js object to which this Events object  is being added\n     * element - {DOMElement} A dom element to respond to browser events\n     * eventTypes - {Array(String)} Deprecated.  Array of custom application\n     *     events.  A listener may be registered for any named event, regardless\n     *     of the values provided here.\n     * fallThrough - {Boolean} Allow events to fall through after these have\n     *                         been handled?\n     * options - {Object} Options for the events object.\n     */\n    initialize: function (object, element, eventTypes, fallThrough, options) {\n        OpenLayers.Util.extend(this, options);\n        this.object     = object;\n        this.fallThrough = fallThrough;\n        this.listeners  = {};\n        this.extensions = {};\n        this.extensionCount = {};\n        this._pointerTouches = [];\n        \n        // if a dom element is specified, add a listeners list \n        // for browser events on the element and register them\n        if (element != null) {\n            this.attachToElement(element);\n        }\n    },\n\n    /**\n     * APIMethod: destroy\n     */\n    destroy: function () {\n        for (var e in this.extensions) {\n            if (typeof this.extensions[e] !== \"boolean\") {\n                this.extensions[e].destroy();\n            }\n        }\n        this.extensions = null;\n        if (this.element) {\n            OpenLayers.Event.stopObservingElement(this.element);\n            if(this.element.hasScrollEvent) {\n                OpenLayers.Event.stopObserving(\n                    window, \"scroll\", this.clearMouseListener\n                );\n            }\n        }\n        this.element = null;\n\n        this.listeners = null;\n        this.object = null;\n        this.fallThrough = null;\n        this.eventHandler = null;\n    },\n\n    /**\n     * APIMethod: addEventType\n     * Deprecated.  Any event can be triggered without adding it first.\n     * \n     * Parameters:\n     * eventName - {String}\n     */\n    addEventType: function(eventName) {\n    },\n\n    /**\n     * Method: attachToElement\n     *\n     * Parameters:\n     * element - {HTMLDOMElement} a DOM element to attach browser events to\n     */\n    attachToElement: function (element) {\n        if (this.element) {\n            OpenLayers.Event.stopObservingElement(this.element);\n        } else {\n            // keep a bound copy of handleBrowserEvent() so that we can\n            // pass the same function to both Event.observe() and .stopObserving()\n            this.eventHandler = OpenLayers.Function.bindAsEventListener(\n                this.handleBrowserEvent, this\n            );\n            \n            // to be used with observe and stopObserving\n            this.clearMouseListener = OpenLayers.Function.bind(\n                this.clearMouseCache, this\n            );\n        }\n        this.element = element;\n        var touchModel = this.getTouchModel();\n        var type;\n        for (var i = 0, len = this.BROWSER_EVENTS.length; i < len; i++) {\n            type = this.BROWSER_EVENTS[i];\n            // register the event cross-browser\n            OpenLayers.Event.observe(element, type, this.eventHandler\n            );\n            if ((touchModel === this.TOUCH_MODEL_POINTER ||\n                    touchModel === this.TOUCH_MODEL_MSPOINTER) &&\n                    type.indexOf('touch') === 0) {\n                this.addPointerTouchListener(element, type, this.eventHandler);\n            }\n        }\n        // disable dragstart in IE so that mousedown/move/up works normally\n        OpenLayers.Event.observe(element, \"dragstart\", OpenLayers.Event.stop);\n    },\n    \n    /**\n     * APIMethod: on\n     * Convenience method for registering listeners with a common scope.\n     *     Internally, this method calls <register> as shown in the examples\n     *     below.\n     *\n     * Example use:\n     * (code)\n     * // register a single listener for the \"loadstart\" event\n     * events.on({\"loadstart\": loadStartListener});\n     *\n     * // this is equivalent to the following\n     * events.register(\"loadstart\", undefined, loadStartListener);\n     *\n     * // register multiple listeners to be called with the same `this` object\n     * events.on({\n     *     \"loadstart\": loadStartListener,\n     *     \"loadend\": loadEndListener,\n     *     scope: object\n     * });\n     *\n     * // this is equivalent to the following\n     * events.register(\"loadstart\", object, loadStartListener);\n     * events.register(\"loadend\", object, loadEndListener);\n     * (end)\n     *\n     * Parameters:\n     *  object - {Object}     \n     */\n    on: function(object) {\n        for(var type in object) {\n            if(type != \"scope\" && object.hasOwnProperty(type)) {\n                this.register(type, object.scope, object[type]);\n            }\n        }\n    },\n\n    /**\n     * APIMethod: register\n     * Register an event on the events object.\n     *\n     * When the event is triggered, the 'func' function will be called, in the\n     * context of 'obj'. Imagine we were to register an event, specifying an \n     * OpenLayers.Bounds Object as 'obj'. When the event is triggered, the \n     * context in the callback function will be our Bounds object. This means\n     * that within our callback function, we can access the properties and \n     * methods of the Bounds object through the \"this\" variable. So our \n     * callback could execute something like: \n     * :    leftStr = \"Left: \" + this.left;\n     *   \n     *                   or\n     *  \n     * :    centerStr = \"Center: \" + this.getCenterLonLat();\n     *\n     * Parameters:\n     * type - {String} Name of the event to register\n     * obj - {Object} The object to bind the context to for the callback#.\n     *     If no object is specified, default is the Events's 'object' property.\n     * func - {Function} The callback function. If no callback is \n     *     specified, this function does nothing.\n     * priority - {Boolean|Object} If true, adds the new listener to the\n     *     *front* of the events queue instead of to the end.\n     *\n     * Valid options for priority:\n     * extension - {Boolean} If true, then the event will be registered as\n     *     extension event. Extension events are handled before all other\n     *     events.\n     */\n    register: function (type, obj, func, priority) {\n        if (type in OpenLayers.Events && !this.extensions[type]) {\n            this.extensions[type] = new OpenLayers.Events[type](this);\n        }\n        if (func != null) {\n            if (obj == null)  {\n                obj = this.object;\n            }\n            var listeners = this.listeners[type];\n            if (!listeners) {\n                listeners = [];\n                this.listeners[type] = listeners;\n                this.extensionCount[type] = 0;\n            }\n            var listener = {obj: obj, func: func};\n            if (priority) {\n                listeners.splice(this.extensionCount[type], 0, listener);\n                if (typeof priority === \"object\" && priority.extension) {\n                    this.extensionCount[type]++;\n                }\n            } else {\n                listeners.push(listener);\n            }\n        }\n    },\n\n    /**\n     * APIMethod: registerPriority\n     * Same as register() but adds the new listener to the *front* of the\n     *     events queue instead of to the end.\n     *    \n     *     TODO: get rid of this in 3.0 - Decide whether listeners should be \n     *     called in the order they were registered or in reverse order.\n     *\n     *\n     * Parameters:\n     * type - {String} Name of the event to register\n     * obj - {Object} The object to bind the context to for the callback#.\n     *                If no object is specified, default is the Events's \n     *                'object' property.\n     * func - {Function} The callback function. If no callback is \n     *                   specified, this function does nothing.\n     */\n    registerPriority: function (type, obj, func) {\n        this.register(type, obj, func, true);\n    },\n    \n    /**\n     * APIMethod: un\n     * Convenience method for unregistering listeners with a common scope.\n     *     Internally, this method calls <unregister> as shown in the examples\n     *     below.\n     *\n     * Example use:\n     * (code)\n     * // unregister a single listener for the \"loadstart\" event\n     * events.un({\"loadstart\": loadStartListener});\n     *\n     * // this is equivalent to the following\n     * events.unregister(\"loadstart\", undefined, loadStartListener);\n     *\n     * // unregister multiple listeners with the same `this` object\n     * events.un({\n     *     \"loadstart\": loadStartListener,\n     *     \"loadend\": loadEndListener,\n     *     scope: object\n     * });\n     *\n     * // this is equivalent to the following\n     * events.unregister(\"loadstart\", object, loadStartListener);\n     * events.unregister(\"loadend\", object, loadEndListener);\n     * (end)\n     */\n    un: function(object) {\n        for(var type in object) {\n            if(type != \"scope\" && object.hasOwnProperty(type)) {\n                this.unregister(type, object.scope, object[type]);\n            }\n        }\n    },\n\n    /**\n     * APIMethod: unregister\n     *\n     * Parameters:\n     * type - {String} \n     * obj - {Object} If none specified, defaults to this.object\n     * func - {Function} \n     */\n    unregister: function (type, obj, func) {\n        if (obj == null)  {\n            obj = this.object;\n        }\n        var listeners = this.listeners[type];\n        if (listeners != null) {\n            for (var i=0, len=listeners.length; i<len; i++) {\n                if (listeners[i].obj == obj && listeners[i].func == func) {\n                    listeners.splice(i, 1);\n                    break;\n                }\n            }\n        }\n    },\n\n    /** \n     * Method: remove\n     * Remove all listeners for a given event type. If type is not registered,\n     *     does nothing.\n     *\n     * Parameters:\n     * type - {String} \n     */\n    remove: function(type) {\n        if (this.listeners[type] != null) {\n            this.listeners[type] = [];\n        }\n    },\n\n    /**\n     * APIMethod: triggerEvent\n     * Trigger a specified registered event.  \n     * \n     * Parameters:\n     * type - {String} \n     * evt - {Event || Object} will be passed to the listeners.\n     *\n     * Returns:\n     * {Boolean} The last listener return.  If a listener returns false, the\n     *     chain of listeners will stop getting called.\n     */\n    triggerEvent: function (type, evt) {\n        var listeners = this.listeners[type];\n\n        // fast path\n        if(!listeners || listeners.length == 0) {\n            return undefined;\n        }\n\n        // prep evt object with object & div references\n        if (evt == null) {\n            evt = {};\n        }\n        evt.object = this.object;\n        evt.element = this.element;\n        if(!evt.type) {\n            evt.type = type;\n        }\n    \n        // execute all callbacks registered for specified type\n        // get a clone of the listeners array to\n        // allow for splicing during callbacks\n        listeners = listeners.slice();\n        var continueChain;\n        for (var i=0, len=listeners.length; i<len; i++) {\n            var callback = listeners[i];\n            // bind the context to callback.obj\n            continueChain = callback.func.apply(callback.obj, [evt]);\n\n            if ((continueChain != undefined) && (continueChain == false)) {\n                // if callback returns false, execute no more callbacks.\n                break;\n            }\n        }\n        // don't fall through to other DOM elements\n        if (!this.fallThrough) {           \n            OpenLayers.Event.stop(evt, true);\n        }\n        return continueChain;\n    },\n\n    /**\n     * Method: handleBrowserEvent\n     * Basically just a wrapper to the triggerEvent() function, but takes \n     *     care to set a property 'xy' on the event with the current mouse \n     *     position.\n     *\n     * Parameters:\n     * evt - {Event} \n     */\n    handleBrowserEvent: function (evt) {\n        var type = evt.type, listeners = this.listeners[type];\n        if(!listeners || listeners.length == 0) {\n            // noone's listening, bail out\n            return;\n        }\n        // add clientX & clientY to all events - corresponds to average x, y\n        var touches = evt.touches;\n        if (touches && touches[0]) {\n            var x = 0;\n            var y = 0;\n            var num = touches.length;\n            var touch;\n            for (var i=0; i<num; ++i) {\n                touch = this.getTouchClientXY(touches[i]);\n                x += touch.clientX;\n                y += touch.clientY;\n            }\n            evt.clientX = x / num;\n            evt.clientY = y / num;\n        }\n        if (this.includeXY) {\n            evt.xy = this.getMousePosition(evt);\n        } \n        this.triggerEvent(type, evt);\n    },\n    \n    /**\n     * Method: getTouchClientXY\n     * WebKit has a few bugs for clientX/clientY. This method detects them\n     * and calculate the correct values.\n     *\n     * Parameters:\n     * evt - {Touch} a Touch object from a TouchEvent\n     * \n     * Returns:\n     * {Object} An object with only clientX and clientY properties with the\n     * calculated values.\n     */\n    getTouchClientXY: function (evt) {\n        // olMochWin is to override window, used for testing\n        var win = window.olMockWin || window,\n            winPageX = win.pageXOffset,\n            winPageY = win.pageYOffset,\n            x = evt.clientX,\n            y = evt.clientY;\n        \n        if (evt.pageY === 0 && Math.floor(y) > Math.floor(evt.pageY) ||\n            evt.pageX === 0 && Math.floor(x) > Math.floor(evt.pageX)) {\n            // iOS4 include scroll offset in clientX/Y\n            x = x - winPageX;\n            y = y - winPageY;\n        } else if (y < (evt.pageY - winPageY) || x < (evt.pageX - winPageX) ) {\n            // Some Android browsers have totally bogus values for clientX/Y\n            // when scrolling/zooming a page\n            x = evt.pageX - winPageX;\n            y = evt.pageY - winPageY;\n        }\n        \n        evt.olClientX = x;\n        evt.olClientY = y;\n        \n        return {\n            clientX: x,\n            clientY: y\n        };\n    },\n    \n    /**\n     * APIMethod: clearMouseCache\n     * Clear cached data about the mouse position. This should be called any \n     *     time the element that events are registered on changes position \n     *     within the page.\n     */\n    clearMouseCache: function() { \n        this.element.scrolls = null;\n        this.element.lefttop = null;\n        this.element.offsets = null;\n    },      \n\n    /**\n     * Method: getMousePosition\n     * \n     * Parameters:\n     * evt - {Event} \n     * \n     * Returns:\n     * {<OpenLayers.Pixel>} The current xy coordinate of the mouse, adjusted\n     *                      for offsets\n     */\n    getMousePosition: function (evt) {\n        if (!this.includeXY) {\n            this.clearMouseCache();\n        } else if (!this.element.hasScrollEvent) {\n            OpenLayers.Event.observe(window, \"scroll\", this.clearMouseListener);\n            this.element.hasScrollEvent = true;\n        }\n        \n        if (!this.element.scrolls) {\n            var viewportElement = OpenLayers.Util.getViewportElement();\n            this.element.scrolls = [\n                window.pageXOffset || viewportElement.scrollLeft,\n                window.pageYOffset || viewportElement.scrollTop\n            ];\n        }\n\n        if (!this.element.lefttop) {\n            this.element.lefttop = [\n                (document.documentElement.clientLeft || 0),\n                (document.documentElement.clientTop  || 0)\n            ];\n        }\n        \n        if (!this.element.offsets) {\n            this.element.offsets = OpenLayers.Util.pagePosition(this.element);\n        }\n\n        return new OpenLayers.Pixel(\n            (evt.clientX + this.element.scrolls[0]) - this.element.offsets[0]\n                         - this.element.lefttop[0], \n            (evt.clientY + this.element.scrolls[1]) - this.element.offsets[1]\n                         - this.element.lefttop[1]\n        ); \n    },\n\n    /**\n     * Method: getTouchModel\n     * Get the touch model currently in use.\n     * \n     * This is cached on OpenLayers.Events as _TOUCH_MODEL \n     * \n     * Returns:\n     * {string} The current touch model (TOUCH_MODEL_xxx), null if none\n     */\n    getTouchModel: function() {\n        if (!(\"_TOUCH_MODEL\" in OpenLayers.Events)) {\n            OpenLayers.Events._TOUCH_MODEL =\n                    (window.PointerEvent && \"pointer\") ||\n                    (window.MSPointerEvent && \"MSPointer\") ||\n                    ((\"ontouchdown\" in document) && \"touch\") ||\n                    null;\n        }\n        return OpenLayers.Events._TOUCH_MODEL;\n    },\n\n    /**\n     * Method: addPointerTouchListener\n     *\n     * Parameters:\n     * element - {DOMElement} The DOM element to register the listener on\n     * type - {String} The event type\n     * handler - {Function} the handler\n     */\n    addPointerTouchListener: function (element, type, handler) {\n        var eventHandler = this.eventHandler;\n        var touches = this._pointerTouches;\n\n        function pointerHandler(evt) {\n            handler(OpenLayers.Util.applyDefaults({\n                stopPropagation: function() {\n                    for (var i=touches.length-1; i>=0; --i) {\n                        touches[i].stopPropagation();\n                    }\n                },\n                preventDefault: function() {\n                    for (var i=touches.length-1; i>=0; --i) {\n                        touches[i].preventDefault();\n                    }\n                },\n                type: type\n            }, evt));\n        }\n\n        switch (type) {\n            case 'touchstart':\n                return this.addPointerTouchListenerStart(element, type, pointerHandler);\n            case 'touchend':\n                return this.addPointerTouchListenerEnd(element, type, pointerHandler);\n            case 'touchmove':\n                return this.addPointerTouchListenerMove(element, type, pointerHandler);\n            default:\n                throw 'Unknown touch event type';\n        }\n    },\n\n    /**\n     * Method: addPointerTouchListenerStart\n     *\n     * Parameters:\n     * element - {DOMElement} The DOM element to register the listener on\n     * type - {String} The event type\n     * handler - {Function} the handler\n     */\n    addPointerTouchListenerStart: function(element, type, handler) {\n        var touches = this._pointerTouches;\n\n        var cb = function(e) {\n\n            // pointer could be mouse or pen\n            if (!OpenLayers.Event.isTouchEvent(e)) {\n                return;\n            }\n\n            var alreadyInArray = false;\n            for (var i=0, ii=touches.length; i<ii; ++i) {\n                if (touches[i].pointerId == e.pointerId) {\n                    alreadyInArray = true;\n                    break;\n                }\n            }\n            if (!alreadyInArray) {\n                touches.push(e);\n            }\n\n            e.touches = touches.slice();\n            handler(e);\n        };\n\n        OpenLayers.Event.observe(element,\n                this.getTouchModel() === this.TOUCH_MODEL_MSPOINTER ?\n                        'MSPointerDown' : 'pointerdown',\n                cb);\n        \n        // the pointerId only needs to be removed from the _pointerTouches array\n        // when the pointer has left its element\n        var internalCb = function (e) {\n\n            // pointer could be mouse or pen\n            if (!OpenLayers.Event.isTouchEvent(e)) {\n            \treturn;\n            }\n\n            var up = false;\n            for (var i = 0, ii = touches.length; i < ii; ++i) {\n                if (touches[i].pointerId == e.pointerId) {\n                    if (this.clientWidth != 0 && this.clientHeight != 0) {\n                        if ((Math.ceil(e.clientX) >= this.clientWidth || Math.ceil(e.clientY) >= this.clientHeight)) {\n                            touches.splice(i, 1);\n                        }\n                    }\n                    break;\n                }\n            }\n        };\n        OpenLayers.Event.observe(element,\n                this.getTouchModel() === this.TOUCH_MODEL_MSPOINTER ?\n                        'MSPointerOut' : 'pointerout',\n                internalCb);\n    },\n\n    /**\n     * Method: addPointerTouchListenerMove\n     *\n     * Parameters:\n     * element - {DOMElement} The DOM element to register the listener on\n     * type - {String} The event type\n     * handler - {Function} the handler\n     */\n    addPointerTouchListenerMove: function (element, type, handler) {\n        var touches = this._pointerTouches;\n        var cb = function(e) {\n\n            // pointer could be mouse or pen\n            if (!OpenLayers.Event.isTouchEvent(e)) {\n                return;\n            }\n\n            if (touches.length == 1 && touches[0].pageX == e.pageX &&\n                    touches[0].pageY == e.pageY) {\n                // don't trigger event when pointer has not moved\n                return;\n            }\n            for (var i=0, ii=touches.length; i<ii; ++i) {\n                if (touches[i].pointerId == e.pointerId) {\n                    touches[i] = e;\n                    break;\n                }\n            }\n\n            e.touches = touches.slice();\n            handler(e);\n        };\n\n        OpenLayers.Event.observe(element,\n                this.getTouchModel() === this.TOUCH_MODEL_MSPOINTER ?\n                        'MSPointerMove' : 'pointermove',\n                cb);\n    },\n\n    /**\n     * Method: addPointerTouchListenerEnd\n     *\n     * Parameters:\n     * element - {DOMElement} The DOM element to register the listener on\n     * type - {String} The event type\n     * handler - {Function} the handler\n     */\n    addPointerTouchListenerEnd: function (element, type, handler) {\n        var touches = this._pointerTouches;\n\n        var cb = function(e) {\n\n            // pointer could be mouse or pen\n            if (!OpenLayers.Event.isTouchEvent(e)) {\n            \treturn;\n            }\n\n            for (var i=0, ii=touches.length; i<ii; ++i) {\n                if (touches[i].pointerId == e.pointerId) {\n                    touches.splice(i, 1);\n                    break;\n                }\n            }\n            \n            e.touches = touches.slice();\n            handler(e);\n        };\n\n        OpenLayers.Event.observe(element,\n                this.getTouchModel() === this.TOUCH_MODEL_MSPOINTER ?\n                        'MSPointerUp' : 'pointerup',\n                cb);\n    },\n\n    CLASS_NAME: \"OpenLayers.Events\"\n});\n/* ======================================================================\n    OpenLayers/Handler.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/BaseTypes/Class.js\n * @requires OpenLayers/Events.js\n */\n\n/**\n * Class: OpenLayers.Handler\n * Base class to construct a higher-level handler for event sequences.  All\n *     handlers have activate and deactivate methods.  In addition, they have\n *     methods named like browser events.  When a handler is activated, any\n *     additional methods named like a browser event is registered as a\n *     listener for the corresponding event.  When a handler is deactivated,\n *     those same methods are unregistered as event listeners.\n *\n * Handlers also typically have a callbacks object with keys named like\n *     the abstracted events or event sequences that they are in charge of\n *     handling.  The controls that wrap handlers define the methods that\n *     correspond to these abstract events - so instead of listening for\n *     individual browser events, they only listen for the abstract events\n *     defined by the handler.\n *     \n * Handlers are created by controls, which ultimately have the responsibility\n *     of making changes to the the state of the application.  Handlers\n *     themselves may make temporary changes, but in general are expected to\n *     return the application in the same state that they found it.\n */\nOpenLayers.Handler = OpenLayers.Class({\n\n    /**\n     * Property: id\n     * {String}\n     */\n    id: null,\n        \n    /**\n     * APIProperty: control\n     * {<OpenLayers.Control>}. The control that initialized this handler.  The\n     *     control is assumed to have a valid map property - that map is used\n     *     in the handler's own setMap method.\n     */\n    control: null,\n\n    /**\n     * Property: map\n     * {<OpenLayers.Map>}\n     */\n    map: null,\n\n    /**\n     * APIProperty: keyMask\n     * {Integer} Use bitwise operators and one or more of the OpenLayers.Handler\n     *     constants to construct a keyMask.  The keyMask is used by\n     *     <checkModifiers>.  If the keyMask matches the combination of keys\n     *     down on an event, checkModifiers returns true.\n     *\n     * Example:\n     * (code)\n     *     // handler only responds if the Shift key is down\n     *     handler.keyMask = OpenLayers.Handler.MOD_SHIFT;\n     *\n     *     // handler only responds if Ctrl-Shift is down\n     *     handler.keyMask = OpenLayers.Handler.MOD_SHIFT |\n     *                       OpenLayers.Handler.MOD_CTRL;\n     * (end)\n     */\n    keyMask: null,\n\n    /**\n     * Property: active\n     * {Boolean}\n     */\n    active: false,\n    \n    /**\n     * Property: evt\n     * {Event} This property references the last event handled by the handler.\n     *     Note that this property is not part of the stable API.  Use of the\n     *     evt property should be restricted to controls in the library\n     *     or other applications that are willing to update with changes to\n     *     the OpenLayers code.\n     */\n    evt: null,\n    \n    /**\n     * Property: touch\n     * {Boolean} Indicates the support of touch events. When touch events are \n     *     started touch will be true and all mouse related listeners will do \n     *     nothing.\n     */\n    touch: false,\n\n    /**\n     * Constructor: OpenLayers.Handler\n     * Construct a handler.\n     *\n     * Parameters:\n     * control - {<OpenLayers.Control>} The control that initialized this\n     *     handler.  The control is assumed to have a valid map property; that\n     *     map is used in the handler's own setMap method.  If a map property\n     *     is present in the options argument it will be used instead.\n     * callbacks - {Object} An object whose properties correspond to abstracted\n     *     events or sequences of browser events.  The values for these\n     *     properties are functions defined by the control that get called by\n     *     the handler.\n     * options - {Object} An optional object whose properties will be set on\n     *     the handler.\n     */\n    initialize: function(control, callbacks, options) {\n        OpenLayers.Util.extend(this, options);\n        this.control = control;\n        this.callbacks = callbacks;\n\n        var map = this.map || control.map;\n        if (map) {\n            this.setMap(map); \n        }\n        \n        this.id = OpenLayers.Util.createUniqueID(this.CLASS_NAME + \"_\");\n    },\n    \n    /**\n     * Method: setMap\n     */\n    setMap: function (map) {\n        this.map = map;\n    },\n\n    /**\n     * Method: checkModifiers\n     * Check the keyMask on the handler.  If no <keyMask> is set, this always\n     *     returns true.  If a <keyMask> is set and it matches the combination\n     *     of keys down on an event, this returns true.\n     *\n     * Returns:\n     * {Boolean} The keyMask matches the keys down on an event.\n     */\n    checkModifiers: function (evt) {\n        if(this.keyMask == null) {\n            return true;\n        }\n        /* calculate the keyboard modifier mask for this event */\n        var keyModifiers =\n            (evt.shiftKey ? OpenLayers.Handler.MOD_SHIFT : 0) |\n            (evt.ctrlKey  ? OpenLayers.Handler.MOD_CTRL  : 0) |\n            (evt.altKey   ? OpenLayers.Handler.MOD_ALT   : 0) |\n            (evt.metaKey  ? OpenLayers.Handler.MOD_META  : 0);\n    \n        /* if it differs from the handler object's key mask,\n           bail out of the event handler */\n        return (keyModifiers == this.keyMask);\n    },\n\n    /**\n     * APIMethod: activate\n     * Turn on the handler.  Returns false if the handler was already active.\n     * \n     * Returns: \n     * {Boolean} The handler was activated.\n     */\n    activate: function() {\n        if(this.active) {\n            return false;\n        }\n        // register for event handlers defined on this class.\n        var events = OpenLayers.Events.prototype.BROWSER_EVENTS;\n        for (var i=0, len=events.length; i<len; i++) {\n            if (this[events[i]]) {\n                this.register(events[i], this[events[i]]); \n            }\n        } \n        this.active = true;\n        return true;\n    },\n    \n    /**\n     * APIMethod: deactivate\n     * Turn off the handler.  Returns false if the handler was already inactive.\n     * \n     * Returns:\n     * {Boolean} The handler was deactivated.\n     */\n    deactivate: function() {\n        if(!this.active) {\n            return false;\n        }\n        // unregister event handlers defined on this class.\n        var events = OpenLayers.Events.prototype.BROWSER_EVENTS;\n        for (var i=0, len=events.length; i<len; i++) {\n            if (this[events[i]]) {\n                this.unregister(events[i], this[events[i]]); \n            }\n        } \n        this.touch = false;\n        this.active = false;\n        return true;\n    },\n\n    /**\n     * Method: startTouch\n     * Start touch events, this method must be called by subclasses in \n     *     \"touchstart\" method. When touch events are started <touch> will be\n     *     true and all mouse related listeners will do nothing.\n     */\n    startTouch: function() {\n        if (!this.touch) {\n            this.touch = true;\n            var events = [\n                \"mousedown\", \"mouseup\", \"mousemove\", \"click\", \"dblclick\",\n                \"mouseout\"\n            ];\n            for (var i=0, len=events.length; i<len; i++) {\n                if (this[events[i]]) {\n                    this.unregister(events[i], this[events[i]]); \n                }\n            } \n        }\n    },\n\n    /**\n    * Method: callback\n    * Trigger the control's named callback with the given arguments\n    *\n    * Parameters:\n    * name - {String} The key for the callback that is one of the properties\n    *     of the handler's callbacks object.\n    * args - {Array(*)} An array of arguments (any type) with which to call \n    *     the callback (defined by the control).\n    */\n    callback: function (name, args) {\n        if (name && this.callbacks[name]) {\n            this.callbacks[name].apply(this.control, args);\n        }\n    },\n\n    /**\n    * Method: register\n    * register an event on the map\n    */\n    register: function (name, method) {\n        // TODO: deal with registerPriority in 3.0\n        this.map.events.registerPriority(name, this, method);\n        this.map.events.registerPriority(name, this, this.setEvent);\n    },\n\n    /**\n    * Method: unregister\n    * unregister an event from the map\n    */\n    unregister: function (name, method) {\n        this.map.events.unregister(name, this, method);   \n        this.map.events.unregister(name, this, this.setEvent);\n    },\n    \n    /**\n     * Method: setEvent\n     * With each registered browser event, the handler sets its own evt\n     *     property.  This property can be accessed by controls if needed\n     *     to get more information about the event that the handler is\n     *     processing.\n     *\n     * This allows modifier keys on the event to be checked (alt, shift, ctrl,\n     *     and meta cannot be checked with the keyboard handler).  For a\n     *     control to determine which modifier keys are associated with the\n     *     event that a handler is currently processing, it should access\n     *     (code)handler.evt.altKey || handler.evt.shiftKey ||\n     *     handler.evt.ctrlKey || handler.evt.metaKey(end).\n     *\n     * Parameters:\n     * evt - {Event} The browser event.\n     */\n    setEvent: function(evt) {\n        this.evt = evt;\n        return true;\n    },\n\n    /**\n     * Method: destroy\n     * Deconstruct the handler.\n     */\n    destroy: function () {\n        // unregister event listeners\n        this.deactivate();\n        // eliminate circular references\n        this.control = this.map = null;        \n    },\n\n    CLASS_NAME: \"OpenLayers.Handler\"\n});\n\n/**\n * Constant: OpenLayers.Handler.MOD_NONE\n * If set as the <keyMask>, <checkModifiers> returns false if any key is down.\n */\nOpenLayers.Handler.MOD_NONE  = 0;\n\n/**\n * Constant: OpenLayers.Handler.MOD_SHIFT\n * If set as the <keyMask>, <checkModifiers> returns false if Shift is down.\n */\nOpenLayers.Handler.MOD_SHIFT = 1;\n\n/**\n * Constant: OpenLayers.Handler.MOD_CTRL\n * If set as the <keyMask>, <checkModifiers> returns false if Ctrl is down.\n */\nOpenLayers.Handler.MOD_CTRL  = 2;\n\n/**\n * Constant: OpenLayers.Handler.MOD_ALT\n * If set as the <keyMask>, <checkModifiers> returns false if Alt is down.\n */\nOpenLayers.Handler.MOD_ALT   = 4;\n\n/**\n * Constant: OpenLayers.Handler.MOD_META\n * If set as the <keyMask>, <checkModifiers> returns false if Cmd is down.\n */\nOpenLayers.Handler.MOD_META  = 8;\n\n\n/* ======================================================================\n    OpenLayers/Icon.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/BaseTypes/Class.js\n */\n\n/**\n * Class: OpenLayers.Icon\n * \n * The icon represents a graphical icon on the screen.  Typically used in\n * conjunction with a <OpenLayers.Marker> to represent markers on a screen.\n *\n * An icon has a url, size and position.  It also contains an offset which \n * allows the center point to be represented correctly.  This can be\n * provided either as a fixed offset or a function provided to calculate\n * the desired offset. \n * \n */\nOpenLayers.Icon = OpenLayers.Class({\n    \n    /** \n     * Property: url \n     * {String}  image url\n     */\n    url: null,\n    \n    /** \n     * Property: size \n     * {<OpenLayers.Size>|Object} An OpenLayers.Size or\n     * an object with a 'w' and 'h' properties.\n     */\n    size: null,\n\n    /** \n     * Property: offset \n     * {<OpenLayers.Pixel>|Object} distance in pixels to offset the\n     * image when being rendered. An OpenLayers.Pixel or an object\n     * with a 'x' and 'y' properties.\n     */\n    offset: null,    \n    \n    /** \n     * Property: calculateOffset \n     * {Function} Function to calculate the offset (based on the size)\n     */\n    calculateOffset: null,    \n    \n    /** \n     * Property: imageDiv \n     * {DOMElement} \n     */\n    imageDiv: null,\n\n    /** \n     * Property: px \n     * {<OpenLayers.Pixel>|Object} An OpenLayers.Pixel or an object\n     * with a 'x' and 'y' properties.\n     */\n    px: null,\n    \n    /** \n     * Constructor: OpenLayers.Icon\n     * Creates an icon, which is an image tag in a div.  \n     *\n     * url - {String} \n     * size - {<OpenLayers.Size>|Object} An OpenLayers.Size or an\n     *                                   object with a 'w' and 'h'\n     *                                   properties.\n     * offset - {<OpenLayers.Pixel>|Object} An OpenLayers.Pixel or an\n     *                                      object with a 'x' and 'y'\n     *                                      properties.\n     * calculateOffset - {Function} \n     */\n    initialize: function(url, size, offset, calculateOffset) {\n        this.url = url;\n        this.size = size || {w: 20, h: 20};\n        this.offset = offset || {x: -(this.size.w/2), y: -(this.size.h/2)};\n        this.calculateOffset = calculateOffset;\n\n        var id = OpenLayers.Util.createUniqueID(\"OL_Icon_\");\n        this.imageDiv = OpenLayers.Util.createAlphaImageDiv(id);\n    },\n    \n    /** \n     * Method: destroy\n     * Nullify references and remove event listeners to prevent circular \n     * references and memory leaks\n     */\n    destroy: function() {\n        // erase any drawn elements\n        this.erase();\n\n        OpenLayers.Event.stopObservingElement(this.imageDiv.firstChild); \n        this.imageDiv.innerHTML = \"\";\n        this.imageDiv = null;\n    },\n\n    /** \n     * Method: clone\n     * \n     * Returns:\n     * {<OpenLayers.Icon>} A fresh copy of the icon.\n     */\n    clone: function() {\n        return new OpenLayers.Icon(this.url, \n                                   this.size, \n                                   this.offset, \n                                   this.calculateOffset);\n    },\n    \n    /**\n     * Method: setSize\n     * \n     * Parameters:\n     * size - {<OpenLayers.Size>|Object} An OpenLayers.Size or\n     * an object with a 'w' and 'h' properties.\n     */\n    setSize: function(size) {\n        if (size != null) {\n            this.size = size;\n        }\n        this.draw();\n    },\n    \n    /**\n     * Method: setUrl\n     * \n     * Parameters:\n     * url - {String} \n     */\n    setUrl: function(url) {\n        if (url != null) {\n            this.url = url;\n        }\n        this.draw();\n    },\n\n    /** \n     * Method: draw\n     * Move the div to the given pixel.\n     * \n     * Parameters:\n     * px - {<OpenLayers.Pixel>|Object} An OpenLayers.Pixel or an\n     *                                  object with a 'x' and 'y' properties.\n     * \n     * Returns:\n     * {DOMElement} A new DOM Image of this icon set at the location passed-in\n     */\n    draw: function(px) {\n        OpenLayers.Util.modifyAlphaImageDiv(this.imageDiv, \n                                            null, \n                                            null, \n                                            this.size, \n                                            this.url, \n                                            \"absolute\");\n        this.moveTo(px);\n        return this.imageDiv;\n    }, \n\n    /** \n     * Method: erase\n     * Erase the underlying image element.\n     */\n    erase: function() {\n        if (this.imageDiv != null && this.imageDiv.parentNode != null) {\n            OpenLayers.Element.remove(this.imageDiv);\n        }\n    }, \n    \n    /** \n     * Method: setOpacity\n     * Change the icon's opacity\n     *\n     * Parameters:\n     * opacity - {float} \n     */\n    setOpacity: function(opacity) {\n        OpenLayers.Util.modifyAlphaImageDiv(this.imageDiv, null, null, null, \n                                            null, null, null, null, opacity);\n\n    },\n    \n    /**\n     * Method: moveTo\n     * move icon to passed in px.\n     *\n     * Parameters:\n     * px - {<OpenLayers.Pixel>|Object} the pixel position to move to.\n     * An OpenLayers.Pixel or an object with a 'x' and 'y' properties.\n     */\n    moveTo: function (px) {\n        //if no px passed in, use stored location\n        if (px != null) {\n            this.px = px;\n        }\n\n        if (this.imageDiv != null) {\n            if (this.px == null) {\n                this.display(false);\n            } else {\n                if (this.calculateOffset) {\n                    this.offset = this.calculateOffset(this.size);  \n                }\n                OpenLayers.Util.modifyAlphaImageDiv(this.imageDiv, null, {\n                    x: this.px.x + this.offset.x,\n                    y: this.px.y + this.offset.y\n                });\n            }\n        }\n    },\n    \n    /** \n     * Method: display\n     * Hide or show the icon\n     *\n     * Parameters:\n     * display - {Boolean} \n     */\n    display: function(display) {\n        this.imageDiv.style.display = (display) ? \"\" : \"none\"; \n    },\n    \n\n    /**\n     * APIMethod: isDrawn\n     * \n     * Returns:\n     * {Boolean} Whether or not the icon is drawn.\n     */\n    isDrawn: function() {\n        // nodeType 11 for ie, whose nodes *always* have a parentNode\n        // (of type document fragment)\n        var isDrawn = (this.imageDiv && this.imageDiv.parentNode && \n                       (this.imageDiv.parentNode.nodeType != 11));    \n\n        return isDrawn;   \n    },\n\n    CLASS_NAME: \"OpenLayers.Icon\"\n});\n/* ======================================================================\n    OpenLayers/Marker.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/BaseTypes/Class.js\n * @requires OpenLayers/Events.js\n * @requires OpenLayers/Icon.js\n */\n\n/**\n * Class: OpenLayers.Marker\n * Instances of OpenLayers.Marker are a combination of a \n * <OpenLayers.LonLat> and an <OpenLayers.Icon>.  \n *\n * Markers are generally added to a special layer called\n * <OpenLayers.Layer.Markers>.\n *\n * Example:\n * (code)\n * var markers = new OpenLayers.Layer.Markers( \"Markers\" );\n * map.addLayer(markers);\n *\n * var size = new OpenLayers.Size(21,25);\n * var offset = new OpenLayers.Pixel(-(size.w/2), -size.h);\n * var icon = new OpenLayers.Icon('http://www.openlayers.org/dev/img/marker.png', size, offset);\n * markers.addMarker(new OpenLayers.Marker(new OpenLayers.LonLat(0,0),icon));\n * markers.addMarker(new OpenLayers.Marker(new OpenLayers.LonLat(0,0),icon.clone()));\n *\n * (end)\n *\n * Note that if you pass an icon into the Marker constructor, it will take\n * that icon and use it. This means that you should not share icons between\n * markers -- you use them once, but you should clone() for any additional\n * markers using that same icon.\n */\nOpenLayers.Marker = OpenLayers.Class({\n    \n    /** \n     * Property: icon \n     * {<OpenLayers.Icon>} The icon used by this marker.\n     */\n    icon: null,\n\n    /** \n     * Property: lonlat \n     * {<OpenLayers.LonLat>} location of object\n     */\n    lonlat: null,\n    \n    /** \n     * Property: events \n     * {<OpenLayers.Events>} the event handler.\n     */\n    events: null,\n    \n    /** \n     * Property: map \n     * {<OpenLayers.Map>} the map this marker is attached to\n     */\n    map: null,\n    \n    /** \n     * Constructor: OpenLayers.Marker\n     *\n     * Parameters:\n     * lonlat - {<OpenLayers.LonLat>} the position of this marker\n     * icon - {<OpenLayers.Icon>}  the icon for this marker\n     */\n    initialize: function(lonlat, icon) {\n        this.lonlat = lonlat;\n        \n        var newIcon = (icon) ? icon : OpenLayers.Marker.defaultIcon();\n        if (this.icon == null) {\n            this.icon = newIcon;\n        } else {\n            this.icon.url = newIcon.url;\n            this.icon.size = newIcon.size;\n            this.icon.offset = newIcon.offset;\n            this.icon.calculateOffset = newIcon.calculateOffset;\n        }\n        this.events = new OpenLayers.Events(this, this.icon.imageDiv);\n    },\n    \n    /**\n     * APIMethod: destroy\n     * Destroy the marker. You must first remove the marker from any \n     * layer which it has been added to, or you will get buggy behavior.\n     * (This can not be done within the marker since the marker does not\n     * know which layer it is attached to.)\n     */\n    destroy: function() {\n        // erase any drawn features\n        this.erase();\n\n        this.map = null;\n\n        this.events.destroy();\n        this.events = null;\n\n        if (this.icon != null) {\n            this.icon.destroy();\n            this.icon = null;\n        }\n    },\n    \n    /** \n    * Method: draw\n    * Calls draw on the icon, and returns that output.\n    * \n    * Parameters:\n    * px - {<OpenLayers.Pixel>}\n    * \n    * Returns:\n    * {DOMElement} A new DOM Image with this marker's icon set at the \n    * location passed-in\n    */\n    draw: function(px) {\n        return this.icon.draw(px);\n    }, \n\n    /** \n    * Method: erase\n    * Erases any drawn elements for this marker.\n    */\n    erase: function() {\n        if (this.icon != null) {\n            this.icon.erase();\n        }\n    }, \n\n    /**\n    * Method: moveTo\n    * Move the marker to the new location.\n    *\n    * Parameters:\n    * px - {<OpenLayers.Pixel>|Object} the pixel position to move to.\n    * An OpenLayers.Pixel or an object with a 'x' and 'y' properties.\n    */\n    moveTo: function (px) {\n        if ((px != null) && (this.icon != null)) {\n            this.icon.moveTo(px);\n        }           \n        this.lonlat = this.map.getLonLatFromLayerPx(px);\n    },\n\n    /**\n     * APIMethod: isDrawn\n     * \n     * Returns:\n     * {Boolean} Whether or not the marker is drawn.\n     */\n    isDrawn: function() {\n        var isDrawn = (this.icon && this.icon.isDrawn());\n        return isDrawn;   \n    },\n\n    /**\n     * Method: onScreen\n     *\n     * Returns:\n     * {Boolean} Whether or not the marker is currently visible on screen.\n     */\n    onScreen:function() {\n        \n        var onScreen = false;\n        if (this.map) {\n            var screenBounds = this.map.getExtent();\n            onScreen = screenBounds.containsLonLat(this.lonlat);\n        }    \n        return onScreen;\n    },\n    \n    /**\n     * Method: inflate\n     * Englarges the markers icon by the specified ratio.\n     *\n     * Parameters:\n     * inflate - {float} the ratio to enlarge the marker by (passing 2\n     *                   will double the size).\n     */\n    inflate: function(inflate) {\n        if (this.icon) {\n            this.icon.setSize({\n                w: this.icon.size.w * inflate,\n                h: this.icon.size.h * inflate\n            });\n        }        \n    },\n    \n    /** \n     * Method: setOpacity\n     * Change the opacity of the marker by changin the opacity of \n     *   its icon\n     * \n     * Parameters:\n     * opacity - {float}  Specified as fraction (0.4, etc)\n     */\n    setOpacity: function(opacity) {\n        this.icon.setOpacity(opacity);\n    },\n\n    /**\n     * Method: setUrl\n     * Change URL of the Icon Image.\n     * \n     * url - {String} \n     */\n    setUrl: function(url) {\n        this.icon.setUrl(url);\n    },    \n\n    /** \n     * Method: display\n     * Hide or show the icon\n     * \n     * display - {Boolean} \n     */\n    display: function(display) {\n        this.icon.display(display);\n    },\n\n    CLASS_NAME: \"OpenLayers.Marker\"\n});\n\n\n/**\n * Function: defaultIcon\n * Creates a default <OpenLayers.Icon>.\n * \n * Returns:\n * {<OpenLayers.Icon>} A default OpenLayers.Icon to use for a marker\n */\nOpenLayers.Marker.defaultIcon = function() {\n    return new OpenLayers.Icon(OpenLayers.Util.getImageLocation(\"marker.png\"),\n                               {w: 21, h: 25}, {x: -10.5, y: -25});\n};\n    \n\n/* ======================================================================\n    OpenLayers/Util/vendorPrefix.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/SingleFile.js\n */\n\nOpenLayers.Util = OpenLayers.Util || {};\n/**\n * Namespace: OpenLayers.Util.vendorPrefix\n * A collection of utility functions to detect vendor prefixed features\n */\nOpenLayers.Util.vendorPrefix = (function() {\n    \"use strict\";\n    \n    var VENDOR_PREFIXES = [\"\", \"O\", \"ms\", \"Moz\", \"Webkit\"],\n        divStyle = document.createElement(\"div\").style,\n        cssCache = {},\n        jsCache = {};\n\n    \n    /**\n     * Function: domToCss\n     * Converts a upper camel case DOM style property name to a CSS property\n     *      i.e. transformOrigin -> transform-origin\n     *      or   WebkitTransformOrigin -> -webkit-transform-origin\n     *\n     * Parameters:\n     * prefixedDom - {String} The property to convert\n     *\n     * Returns:\n     * {String} The CSS property\n     */\n    function domToCss(prefixedDom) {\n        if (!prefixedDom) { return null; }\n        return prefixedDom.\n            replace(/([A-Z])/g, function(c) { return \"-\" + c.toLowerCase(); }).\n            replace(/^ms-/, \"-ms-\");\n    }\n\n    /**\n     * APIMethod: css\n     * Detect which property is used for a CSS property\n     *\n     * Parameters:\n     * property - {String} The standard (unprefixed) CSS property name\n     *\n     * Returns:\n     * {String} The standard CSS property, prefixed property or null if not\n     *          supported\n     */\n    function css(property) {\n        if (cssCache[property] === undefined) {\n            var domProperty = property.\n                replace(/(-[\\s\\S])/g, function(c) { return c.charAt(1).toUpperCase(); });\n            var prefixedDom = style(domProperty);\n            cssCache[property] = domToCss(prefixedDom);\n        }\n        return cssCache[property];\n    }\n\n    /**\n     * APIMethod: js\n     * Detect which property is used for a JS property/method\n     *\n     * Parameters:\n     * obj - {Object} The object to test on\n     * property - {String} The standard (unprefixed) JS property name\n     *\n     * Returns:\n     * {String} The standard JS property, prefixed property or null if not\n     *          supported\n     */\n    function js(obj, property) {\n        if (jsCache[property] === undefined) {\n            var tmpProp,\n                i = 0,\n                l = VENDOR_PREFIXES.length,\n                prefix,\n                isStyleObj = (typeof obj.cssText !== \"undefined\");\n\n            jsCache[property] = null;\n            for(; i<l; i++) {\n                prefix = VENDOR_PREFIXES[i];\n                if(prefix) {\n                    if (!isStyleObj) {\n                        // js prefix should be lower-case, while style\n                        // properties have upper case on first character\n                        prefix = prefix.toLowerCase();\n                    }\n                    tmpProp = prefix + property.charAt(0).toUpperCase() + property.slice(1);\n                } else {\n                    tmpProp = property;\n                }\n\n                if(obj[tmpProp] !== undefined) {\n                    jsCache[property] = tmpProp;\n                    break;\n                }\n            }\n        }\n        return jsCache[property];\n    }\n    \n    /**\n     * APIMethod: style\n     * Detect which property is used for a DOM style property\n     *\n     * Parameters:\n     * property - {String} The standard (unprefixed) style property name\n     *\n     * Returns:\n     * {String} The standard style property, prefixed property or null if not\n     *          supported\n     */\n    function style(property) {\n        return js(divStyle, property);\n    }\n    \n    return {\n        css:      css,\n        js:       js,\n        style:    style,\n        \n        // used for testing\n        cssCache:       cssCache,\n        jsCache:        jsCache\n    };\n}());\n/* ======================================================================\n    OpenLayers/Animation.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/SingleFile.js\n * @requires OpenLayers/Util/vendorPrefix.js\n */\n\n/**\n * Namespace: OpenLayers.Animation\n * A collection of utility functions for executing methods that repaint a \n *     portion of the browser window.  These methods take advantage of the\n *     browser's scheduled repaints where requestAnimationFrame is available.\n */\nOpenLayers.Animation = (function(window) {\n    \n    /**\n     * Property: isNative\n     * {Boolean} true if a native requestAnimationFrame function is available\n     */\n    var requestAnimationFrame = OpenLayers.Util.vendorPrefix.js(window, \"requestAnimationFrame\");\n    var isNative = !!(requestAnimationFrame);\n    \n    /**\n     * Function: requestFrame\n     * Schedule a function to be called at the next available animation frame.\n     *     Uses the native method where available.  Where requestAnimationFrame is\n     *     not available, setTimeout will be called with a 16ms delay.\n     *\n     * Parameters:\n     * callback - {Function} The function to be called at the next animation frame.\n     * element - {DOMElement} Optional element that visually bounds the animation.\n     */\n    var requestFrame = (function() {\n        var request = window[requestAnimationFrame] ||\n            function(callback, element) {\n                window.setTimeout(callback, 16);\n            };\n        // bind to window to avoid illegal invocation of native function\n        return function(callback, element) {\n            request.apply(window, [callback, element]);\n        };\n    })();\n    \n    // private variables for animation loops\n    var counter = 0;\n    var loops = {};\n    \n    /**\n     * Function: start\n     * Executes a method with <requestFrame> in series for some \n     *     duration.\n     *\n     * Parameters:\n     * callback - {Function} The function to be called at the next animation frame.\n     * duration - {Number} Optional duration for the loop.  If not provided, the\n     *     animation loop will execute indefinitely.\n     * element - {DOMElement} Optional element that visually bounds the animation.\n     *\n     * Returns:\n     * {Number} Identifier for the animation loop.  Used to stop animations with\n     *     <stop>.\n     */\n    function start(callback, duration, element) {\n        duration = duration > 0 ? duration : Number.POSITIVE_INFINITY;\n        var id = ++counter;\n        var start = +new Date;\n        loops[id] = function() {\n            if (loops[id] && +new Date - start <= duration) {\n                callback();\n                if (loops[id]) {\n                    requestFrame(loops[id], element);\n                }\n            } else {\n                delete loops[id];\n            }\n        };\n        requestFrame(loops[id], element);\n        return id;\n    }\n    \n    /**\n     * Function: stop\n     * Terminates an animation loop started with <start>.\n     *\n     * Parameters:\n     * id - {Number} Identifier returned from <start>.\n     */\n    function stop(id) {\n        delete loops[id];\n    }\n    \n    return {\n        isNative: isNative,\n        requestFrame: requestFrame,\n        start: start,\n        stop: stop\n    };\n    \n})(window);\n/* ======================================================================\n    OpenLayers/Kinetic.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/BaseTypes/Class.js\n * @requires OpenLayers/Animation.js\n */\n\nOpenLayers.Kinetic = OpenLayers.Class({\n\n    /**\n     * Property: threshold\n     * In most cases changing the threshold isn't needed.\n     * In px/ms, default to 0.\n     */\n    threshold: 0,\n\n    /**\n     * Property: deceleration\n     * {Float} the deseleration in px/ms², default to 0.0035.\n     */\n    deceleration: 0.0035,\n\n    /**\n     * Property: nbPoints\n     * {Integer} the number of points we use to calculate the kinetic\n     * initial values.\n     */\n    nbPoints: 100,\n\n    /**\n     * Property: delay\n     * {Float} time to consider to calculate the kinetic initial values.\n     * In ms, default to 200.\n     */\n    delay: 200,\n\n    /**\n     * Property: points\n     * List of points use to calculate the kinetic initial values.\n     */\n    points: undefined,\n\n    /**\n     * Property: timerId\n     * ID of the timer.\n     */\n    timerId: undefined,\n\n    /**\n     * Constructor: OpenLayers.Kinetic\n     *\n     * Parameters:\n     * options - {Object}\n     */\n    initialize: function(options) {\n        OpenLayers.Util.extend(this, options);\n    },\n\n    /**\n     * Method: begin\n     * Begins the dragging.\n     */\n    begin: function() {\n        OpenLayers.Animation.stop(this.timerId);\n        this.timerId = undefined;\n        this.points = [];\n    },\n\n    /**\n     * Method: update\n     * Updates during the dragging.\n     *\n     * Parameters:\n     * xy - {<OpenLayers.Pixel>} The new position.\n     */\n    update: function(xy) {\n        this.points.unshift({xy: xy, tick: new Date().getTime()});\n        if (this.points.length > this.nbPoints) {\n            this.points.pop();\n        }\n    },\n\n    /**\n     * Method: end\n     * Ends the dragging, start the kinetic.\n     *\n     * Parameters:\n     * xy - {<OpenLayers.Pixel>} The last position.\n     *\n     * Returns:\n     * {Object} An object with two properties: \"speed\", and \"theta\". The\n     *     \"speed\" and \"theta\" values are to be passed to the move \n     *     function when starting the animation.\n     */\n    end: function(xy) {\n        var last, now = new Date().getTime();\n        for (var i = 0, l = this.points.length, point; i < l; i++) {\n            point = this.points[i];\n            if (now - point.tick > this.delay) {\n                break;\n            }\n            last = point;\n        }\n        if (!last) {\n            return;\n        }\n        var time = new Date().getTime() - last.tick;\n        var dist = Math.sqrt(Math.pow(xy.x - last.xy.x, 2) +\n                             Math.pow(xy.y - last.xy.y, 2));\n        var speed = dist / time;\n        if (speed == 0 || speed < this.threshold) {\n            return;\n        }\n        var theta = Math.asin((xy.y - last.xy.y) / dist);\n        if (last.xy.x <= xy.x) {\n            theta = Math.PI - theta;\n        }\n        return {speed: speed, theta: theta};\n    },\n\n    /**\n     * Method: move\n     * Launch the kinetic move pan.\n     *\n     * Parameters:\n     * info - {Object} An object with two properties, \"speed\", and \"theta\".\n     *     These values are those returned from the \"end\" call.\n     * callback - {Function} Function called on every step of the animation,\n     *     receives x, y (values to pan), end (is the last point).\n     */\n    move: function(info, callback) {\n        var v0 = info.speed;\n        var fx = Math.cos(info.theta);\n        var fy = -Math.sin(info.theta);\n\n        var initialTime = new Date().getTime();\n\n        var lastX = 0;\n        var lastY = 0;\n\n        var timerCallback = function() {\n            if (this.timerId == null) {\n                return;\n            }\n\n            var t = new Date().getTime() - initialTime;\n\n            var p = (-this.deceleration * Math.pow(t, 2)) / 2.0 + v0 * t;\n            var x = p * fx;\n            var y = p * fy;\n\n            var args = {};\n            args.end = false;\n            var v = -this.deceleration * t + v0;\n\n            if (v <= 0) {\n                OpenLayers.Animation.stop(this.timerId);\n                this.timerId = null;\n                args.end = true;\n            }\n\n            args.x = x - lastX;\n            args.y = y - lastY;\n            lastX = x;\n            lastY = y;\n            callback(args.x, args.y, args.end);\n        };\n\n        this.timerId = OpenLayers.Animation.start(\n            OpenLayers.Function.bind(timerCallback, this)\n        );\n    },\n\n    CLASS_NAME: \"OpenLayers.Kinetic\"\n});\n/* ======================================================================\n    OpenLayers/Tween.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/BaseTypes/Class.js\n * @requires OpenLayers/Animation.js\n */\n\n/**\n * Namespace: OpenLayers.Tween\n */\nOpenLayers.Tween = OpenLayers.Class({\n    \n    /**\n     * APIProperty: easing\n     * {<OpenLayers.Easing>(Function)} Easing equation used for the animation\n     *     Defaultly set to OpenLayers.Easing.Expo.easeOut\n     */\n    easing: null,\n    \n    /**\n     * APIProperty: begin\n     * {Object} Values to start the animation with\n     */\n    begin: null,\n    \n    /**\n     * APIProperty: finish\n     * {Object} Values to finish the animation with\n     */\n    finish: null,\n    \n    /**\n     * APIProperty: duration\n     * {int} duration of the tween (number of steps)\n     */\n    duration: null,\n    \n    /**\n     * APIProperty: callbacks\n     * {Object} An object with start, eachStep and done properties whose values\n     *     are functions to be call during the animation. They are passed the\n     *     current computed value as argument.\n     */\n    callbacks: null,\n    \n    /**\n     * Property: time\n     * {int} Step counter\n     */\n    time: null,\n    \n    /**\n     * APIProperty: minFrameRate\n     * {Number} The minimum framerate for animations in frames per second. After\n     * each step, the time spent in the animation is compared to the calculated\n     * time at this frame rate. If the animation runs longer than the calculated\n     * time, the next step is skipped. Default is 30.\n     */\n    minFrameRate: null,\n\n    /**\n     * Property: startTime\n     * {Number} The timestamp of the first execution step. Used for skipping\n     * frames\n     */\n    startTime: null,\n    \n    /**\n     * Property: animationId\n     * {int} Loop id returned by OpenLayers.Animation.start\n     */\n    animationId: null,\n    \n    /**\n     * Property: playing\n     * {Boolean} Tells if the easing is currently playing\n     */\n    playing: false,\n    \n    /** \n     * Constructor: OpenLayers.Tween\n     * Creates a Tween.\n     *\n     * Parameters:\n     * easing - {<OpenLayers.Easing>(Function)} easing function method to use\n     */ \n    initialize: function(easing) {\n        this.easing = (easing) ? easing : OpenLayers.Easing.Expo.easeOut;\n    },\n    \n    /**\n     * APIMethod: start\n     * Plays the Tween, and calls the callback method on each step\n     * \n     * Parameters:\n     * begin - {Object} values to start the animation with\n     * finish - {Object} values to finish the animation with\n     * duration - {int} duration of the tween (number of steps)\n     * options - {Object} hash of options (callbacks (start, eachStep, done),\n     *     minFrameRate)\n     */\n    start: function(begin, finish, duration, options) {\n        this.playing = true;\n        this.begin = begin;\n        this.finish = finish;\n        this.duration = duration;\n        this.callbacks = options.callbacks;\n        this.minFrameRate = options.minFrameRate || 30;\n        this.time = 0;\n        this.startTime = new Date().getTime();\n        OpenLayers.Animation.stop(this.animationId);\n        this.animationId = null;\n        if (this.callbacks && this.callbacks.start) {\n            this.callbacks.start.call(this, this.begin);\n        }\n        this.animationId = OpenLayers.Animation.start(\n            OpenLayers.Function.bind(this.play, this)\n        );\n    },\n    \n    /**\n     * APIMethod: stop\n     * Stops the Tween, and calls the done callback\n     *     Doesn't do anything if animation is already finished\n     */\n    stop: function() {\n        if (!this.playing) {\n            return;\n        }\n        \n        if (this.callbacks && this.callbacks.done) {\n            this.callbacks.done.call(this, this.finish);\n        }\n        OpenLayers.Animation.stop(this.animationId);\n        this.animationId = null;\n        this.playing = false;\n    },\n    \n    /**\n     * Method: play\n     * Calls the appropriate easing method\n     */\n    play: function() {\n        var value = {};\n        for (var i in this.begin) {\n            var b = this.begin[i];\n            var f = this.finish[i];\n            if (b == null || f == null || isNaN(b) || isNaN(f)) {\n                throw new TypeError('invalid value for Tween');\n            }\n\n            var c = f - b;\n            value[i] = this.easing.apply(this, [this.time, b, c, this.duration]);\n        }\n        this.time++;\n        \n        if (this.callbacks && this.callbacks.eachStep) {\n            // skip frames if frame rate drops below threshold\n            if ((new Date().getTime() - this.startTime) / this.time <= 1000 / this.minFrameRate) {\n                this.callbacks.eachStep.call(this, value);\n            }\n        }\n        \n        if (this.time > this.duration) {\n            this.stop();\n        }\n    },\n    \n    /**\n     * Create empty functions for all easing methods.\n     */\n    CLASS_NAME: \"OpenLayers.Tween\"\n});\n\n/**\n * Namespace: OpenLayers.Easing\n * \n * Credits:\n *      Easing Equations by Robert Penner, <http://www.robertpenner.com/easing/>\n */\nOpenLayers.Easing = {\n    /**\n     * Create empty functions for all easing methods.\n     */\n    CLASS_NAME: \"OpenLayers.Easing\"\n};\n\n/**\n * Namespace: OpenLayers.Easing.Linear\n */\nOpenLayers.Easing.Linear = {\n    \n    /**\n     * Function: easeIn\n     * \n     * Parameters:\n     * t - {Float} time\n     * b - {Float} beginning position\n     * c - {Float} total change\n     * d - {Float} duration of the transition\n     *\n     * Returns:\n     * {Float}\n     */\n    easeIn: function(t, b, c, d) {\n        return c*t/d + b;\n    },\n    \n    /**\n     * Function: easeOut\n     * \n     * Parameters:\n     * t - {Float} time\n     * b - {Float} beginning position\n     * c - {Float} total change\n     * d - {Float} duration of the transition\n     *\n     * Returns:\n     * {Float}\n     */\n    easeOut: function(t, b, c, d) {\n        return c*t/d + b;\n    },\n    \n    /**\n     * Function: easeInOut\n     * \n     * Parameters:\n     * t - {Float} time\n     * b - {Float} beginning position\n     * c - {Float} total change\n     * d - {Float} duration of the transition\n     *\n     * Returns:\n     * {Float}\n     */\n    easeInOut: function(t, b, c, d) {\n        return c*t/d + b;\n    },\n\n    CLASS_NAME: \"OpenLayers.Easing.Linear\"\n};\n\n/**\n * Namespace: OpenLayers.Easing.Expo\n */\nOpenLayers.Easing.Expo = {\n    \n    /**\n     * Function: easeIn\n     * \n     * Parameters:\n     * t - {Float} time\n     * b - {Float} beginning position\n     * c - {Float} total change\n     * d - {Float} duration of the transition\n     *\n     * Returns:\n     * {Float}\n     */\n    easeIn: function(t, b, c, d) {\n        return (t==0) ? b : c * Math.pow(2, 10 * (t/d - 1)) + b;\n    },\n    \n    /**\n     * Function: easeOut\n     * \n     * Parameters:\n     * t - {Float} time\n     * b - {Float} beginning position\n     * c - {Float} total change\n     * d - {Float} duration of the transition\n     *\n     * Returns:\n     * {Float}\n     */\n    easeOut: function(t, b, c, d) {\n        return (t==d) ? b+c : c * (-Math.pow(2, -10 * t/d) + 1) + b;\n    },\n    \n    /**\n     * Function: easeInOut\n     * \n     * Parameters:\n     * t - {Float} time\n     * b - {Float} beginning position\n     * c - {Float} total change\n     * d - {Float} duration of the transition\n     *\n     * Returns:\n     * {Float}\n     */\n    easeInOut: function(t, b, c, d) {\n        if (t==0) return b;\n        if (t==d) return b+c;\n        if ((t/=d/2) < 1) return c/2 * Math.pow(2, 10 * (t - 1)) + b;\n        return c/2 * (-Math.pow(2, -10 * --t) + 2) + b;\n    },\n\n    CLASS_NAME: \"OpenLayers.Easing.Expo\"\n};\n\n/**\n * Namespace: OpenLayers.Easing.Quad\n */\nOpenLayers.Easing.Quad = {\n    \n    /**\n     * Function: easeIn\n     * \n     * Parameters:\n     * t - {Float} time\n     * b - {Float} beginning position\n     * c - {Float} total change\n     * d - {Float} duration of the transition\n     *\n     * Returns:\n     * {Float}\n     */\n    easeIn: function(t, b, c, d) {\n        return c*(t/=d)*t + b;\n    },\n    \n    /**\n     * Function: easeOut\n     * \n     * Parameters:\n     * t - {Float} time\n     * b - {Float} beginning position\n     * c - {Float} total change\n     * d - {Float} duration of the transition\n     *\n     * Returns:\n     * {Float}\n     */\n    easeOut: function(t, b, c, d) {\n        return -c *(t/=d)*(t-2) + b;\n    },\n    \n    /**\n     * Function: easeInOut\n     * \n     * Parameters:\n     * t - {Float} time\n     * b - {Float} beginning position\n     * c - {Float} total change\n     * d - {Float} duration of the transition\n     *\n     * Returns:\n     * {Float}\n     */\n    easeInOut: function(t, b, c, d) {\n        if ((t/=d/2) < 1) return c/2*t*t + b;\n        return -c/2 * ((--t)*(t-2) - 1) + b;\n    },\n\n    CLASS_NAME: \"OpenLayers.Easing.Quad\"\n};\n/* ======================================================================\n    OpenLayers/Projection.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/BaseTypes/Class.js\n * @requires OpenLayers/Util.js\n */\n\n/**\n * Namespace: OpenLayers.Projection\n * Methods for coordinate transforms between coordinate systems.  By default,\n *     OpenLayers ships with the ability to transform coordinates between\n *     geographic (EPSG:4326) and web or spherical mercator (EPSG:900913 et al.)\n *     coordinate reference systems.  See the <transform> method for details\n *     on usage.\n *\n * Additional transforms may be added by using the <proj4js at http://proj4js.org/>\n *     library.  If the proj4js library is included, the <transform> method \n *     will work between any two coordinate reference systems with proj4js \n *     definitions.\n *\n * If the proj4js library is not included, or if you wish to allow transforms\n *     between arbitrary coordinate reference systems, use the <addTransform>\n *     method to register a custom transform method.\n */\nOpenLayers.Projection = OpenLayers.Class({\n\n    /**\n     * Property: proj\n     * {Object} Proj4js.Proj instance.\n     */\n    proj: null,\n    \n    /**\n     * Property: projCode\n     * {String}\n     */\n    projCode: null,\n    \n    /**\n     * Property: titleRegEx\n     * {RegExp} regular expression to strip the title from a proj4js definition\n     */\n    titleRegEx: /\\+title=[^\\+]*/,\n\n    /**\n     * Constructor: OpenLayers.Projection\n     * This class offers several methods for interacting with a wrapped \n     *     pro4js projection object. \n     *\n     * Parameters:\n     * projCode - {String} A string identifying the Well Known Identifier for\n     *    the projection.\n     * options - {Object} An optional object to set additional properties\n     *     on the projection.\n     *\n     * Returns:\n     * {<OpenLayers.Projection>} A projection object.\n     */\n    initialize: function(projCode, options) {\n        OpenLayers.Util.extend(this, options);\n        this.projCode = projCode;\n        if (typeof Proj4js == \"object\") {\n            this.proj = new Proj4js.Proj(projCode);\n        }\n    },\n    \n    /**\n     * APIMethod: getCode\n     * Get the string SRS code.\n     *\n     * Returns:\n     * {String} The SRS code.\n     */\n    getCode: function() {\n        return this.proj ? this.proj.srsCode : this.projCode;\n    },\n   \n    /**\n     * APIMethod: getUnits\n     * Get the units string for the projection -- returns null if \n     *     proj4js is not available.\n     *\n     * Returns:\n     * {String} The units abbreviation.\n     */\n    getUnits: function() {\n        return this.proj ? this.proj.units : null;\n    },\n\n    /**\n     * Method: toString\n     * Convert projection to string (getCode wrapper).\n     *\n     * Returns:\n     * {String} The projection code.\n     */\n    toString: function() {\n        return this.getCode();\n    },\n\n    /**\n     * Method: equals\n     * Test equality of two projection instances.  Determines equality based\n     *     solely on the projection code.\n     *\n     * Returns:\n     * {Boolean} The two projections are equivalent.\n     */\n    equals: function(projection) {\n        var p = projection, equals = false;\n        if (p) {\n            if (!(p instanceof OpenLayers.Projection)) {\n                p = new OpenLayers.Projection(p);\n            }\n            if ((typeof Proj4js == \"object\") && this.proj.defData && p.proj.defData) {\n                equals = this.proj.defData.replace(this.titleRegEx, \"\") ==\n                    p.proj.defData.replace(this.titleRegEx, \"\");\n            } else if (p.getCode) {\n                var source = this.getCode(), target = p.getCode();\n                equals = source == target ||\n                    !!OpenLayers.Projection.transforms[source] &&\n                    OpenLayers.Projection.transforms[source][target] ===\n                        OpenLayers.Projection.nullTransform;\n            }\n        }\n        return equals;   \n    },\n\n    /* Method: destroy\n     * Destroy projection object.\n     */\n    destroy: function() {\n        delete this.proj;\n        delete this.projCode;\n    },\n    \n    CLASS_NAME: \"OpenLayers.Projection\" \n});     \n\n/**\n * Property: transforms\n * {Object} Transforms is an object, with from properties, each of which may\n * have a to property. This allows you to define projections without \n * requiring support for proj4js to be included.\n *\n * This object has keys which correspond to a 'source' projection object.  The\n * keys should be strings, corresponding to the projection.getCode() value.\n * Each source projection object should have a set of destination projection\n * keys included in the object. \n * \n * Each value in the destination object should be a transformation function,\n * where the function is expected to be passed an object with a .x and a .y\n * property.  The function should return the object, with the .x and .y\n * transformed according to the transformation function.\n *\n * Note - Properties on this object should not be set directly.  To add a\n *     transform method to this object, use the <addTransform> method.  For an\n *     example of usage, see the OpenLayers.Layer.SphericalMercator file.\n */\nOpenLayers.Projection.transforms = {};\n\n/**\n * APIProperty: defaults\n * {Object} Defaults for the SRS codes known to OpenLayers (currently\n * EPSG:4326, CRS:84, urn:ogc:def:crs:EPSG:6.6:4326, EPSG:900913, EPSG:3857,\n * EPSG:102113, EPSG:102100 and OSGEO:41001). Keys are the SRS code, values are\n * units, maxExtent (the validity extent for the SRS in projected coordinates),\n * worldExtent (the world's extent in EPSG:4326) and yx (true if this SRS\n * is known to have a reverse axis order).\n */\nOpenLayers.Projection.defaults = {\n    \"EPSG:4326\": {\n        units: \"degrees\",\n        maxExtent: [-180, -90, 180, 90],\n        worldExtent: [-180, -90, 180, 90],\n        yx: true\n    },\n    \"CRS:84\": {\n        units: \"degrees\",\n        maxExtent: [-180, -90, 180, 90],\n        worldExtent: [-180, -90, 180, 90]\n    },\n    \"EPSG:900913\": {\n        units: \"m\",\n        maxExtent: [-20037508.34, -20037508.34, 20037508.34, 20037508.34],\n        worldExtent: [-180, -89, 180, 89]\n    }\n};\n\n/**\n * APIMethod: addTransform\n * Set a custom transform method between two projections.  Use this method in\n *     cases where the proj4js lib is not available or where custom projections\n *     need to be handled.\n *\n * Parameters:\n * from - {String} The code for the source projection\n * to - {String} the code for the destination projection\n * method - {Function} A function that takes a point as an argument and\n *     transforms that point from the source to the destination projection\n *     in place.  The original point should be modified.\n */\nOpenLayers.Projection.addTransform = function(from, to, method) {\n    if (method === OpenLayers.Projection.nullTransform) {\n        var defaults = OpenLayers.Projection.defaults[from];\n        if (defaults && !OpenLayers.Projection.defaults[to]) {\n            OpenLayers.Projection.defaults[to] = defaults;\n        }\n    }\n    if(!OpenLayers.Projection.transforms[from]) {\n        OpenLayers.Projection.transforms[from] = {};\n    }\n    OpenLayers.Projection.transforms[from][to] = method;\n};\n\n/**\n * APIMethod: transform\n * Transform a point coordinate from one projection to another.  Note that\n *     the input point is transformed in place.\n * \n * Parameters:\n * point - {<OpenLayers.Geometry.Point> | Object} An object with x and y\n *     properties representing coordinates in those dimensions.\n * source - {OpenLayers.Projection} Source map coordinate system\n * dest - {OpenLayers.Projection} Destination map coordinate system\n *\n * Returns:\n * point - {object} A transformed coordinate.  The original point is modified.\n */\nOpenLayers.Projection.transform = function(point, source, dest) {\n    if (source && dest) {\n        if (!(source instanceof OpenLayers.Projection)) {\n            source = new OpenLayers.Projection(source);\n        }\n        if (!(dest instanceof OpenLayers.Projection)) {\n            dest = new OpenLayers.Projection(dest);\n        }\n        if (source.proj && dest.proj) {\n            point = Proj4js.transform(source.proj, dest.proj, point);\n        } else {\n            var sourceCode = source.getCode();\n            var destCode = dest.getCode();\n            var transforms = OpenLayers.Projection.transforms;\n            if (transforms[sourceCode] && transforms[sourceCode][destCode]) {\n                transforms[sourceCode][destCode](point);\n            }\n        }\n    }\n    return point;\n};\n\n/**\n * APIFunction: nullTransform\n * A null transformation - useful for defining projection aliases when\n * proj4js is not available:\n *\n * (code)\n * OpenLayers.Projection.addTransform(\"EPSG:3857\", \"EPSG:900913\",\n *     OpenLayers.Projection.nullTransform);\n * OpenLayers.Projection.addTransform(\"EPSG:900913\", \"EPSG:3857\",\n *     OpenLayers.Projection.nullTransform);\n * (end)\n */\nOpenLayers.Projection.nullTransform = function(point) {\n    return point;\n};\n\n/**\n * Note: Transforms for web mercator <-> geographic\n * OpenLayers recognizes EPSG:3857, EPSG:900913, EPSG:102113, EPSG:102100 and \n * OSGEO:41001. OpenLayers originally started referring to EPSG:900913 as web\n * mercator. The EPSG has declared EPSG:3857 to be web mercator.\n * ArcGIS 10 recognizes the EPSG:3857, EPSG:102113, and EPSG:102100 as\n * equivalent.  See http://blogs.esri.com/Dev/blogs/arcgisserver/archive/2009/11/20/ArcGIS-Online-moving-to-Google-_2F00_-Bing-tiling-scheme_3A00_-What-does-this-mean-for-you_3F00_.aspx#12084.\n * For geographic, OpenLayers recognizes EPSG:4326, CRS:84 and\n * urn:ogc:def:crs:EPSG:6.6:4326. OpenLayers also knows about the reverse axis\n * order for EPSG:4326. \n */\n(function() {\n\n    var pole = 20037508.34;\n\n    function inverseMercator(xy) {\n        xy.x = 180 * xy.x / pole;\n        xy.y = 180 / Math.PI * (2 * Math.atan(Math.exp((xy.y / pole) * Math.PI)) - Math.PI / 2);\n        return xy;\n    }\n\n    function forwardMercator(xy) {\n        xy.x = xy.x * pole / 180;\n        var y = Math.log(Math.tan((90 + xy.y) * Math.PI / 360)) / Math.PI * pole;\n        xy.y = Math.max(-20037508.34, Math.min(y, 20037508.34));\n        return xy;\n    }\n\n    function map(base, codes) {\n        var add = OpenLayers.Projection.addTransform;\n        var same = OpenLayers.Projection.nullTransform;\n        var i, len, code, other, j;\n        for (i=0, len=codes.length; i<len; ++i) {\n            code = codes[i];\n            add(base, code, forwardMercator);\n            add(code, base, inverseMercator);\n            for (j=i+1; j<len; ++j) {\n                other = codes[j];\n                add(code, other, same);\n                add(other, code, same);\n            }\n        }\n    }\n    \n    // list of equivalent codes for web mercator\n    var mercator = [\"EPSG:900913\", \"EPSG:3857\", \"EPSG:102113\", \"EPSG:102100\", \"OSGEO:41001\"],\n        geographic = [\"CRS:84\", \"urn:ogc:def:crs:EPSG:6.6:4326\", \"EPSG:4326\"],\n        i;\n    for (i=mercator.length-1; i>=0; --i) {\n        map(mercator[i], geographic);\n    }\n    for (i=geographic.length-1; i>=0; --i) {\n        map(geographic[i], mercator);\n    }\n\n})();\n/* ======================================================================\n    OpenLayers/Map.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/BaseTypes/Class.js\n * @requires OpenLayers/Util.js\n * @requires OpenLayers/Util/vendorPrefix.js\n * @requires OpenLayers/Events.js\n * @requires OpenLayers/Tween.js\n * @requires OpenLayers/Projection.js\n */\n\n/**\n * Class: OpenLayers.Map\n * Instances of OpenLayers.Map are interactive maps embedded in a web page.\n * Create a new map with the <OpenLayers.Map> constructor.\n * \n * On their own maps do not provide much functionality.  To extend a map\n * it's necessary to add controls (<OpenLayers.Control>) and \n * layers (<OpenLayers.Layer>) to the map. \n */\nOpenLayers.Map = OpenLayers.Class({\n    \n    /**\n     * Constant: Z_INDEX_BASE\n     * {Object} Base z-indexes for different classes of thing \n     */\n    Z_INDEX_BASE: {\n        BaseLayer: 100,\n        Overlay: 325,\n        Feature: 725,\n        Popup: 750,\n        Control: 1000\n    },\n\n    /**\n     * APIProperty: events\n     * {<OpenLayers.Events>}\n     *\n     * Register a listener for a particular event with the following syntax:\n     * (code)\n     * map.events.register(type, obj, listener);\n     * (end)\n     *\n     * Listeners will be called with a reference to an event object.  The\n     *     properties of this event depends on exactly what happened.\n     *\n     * All event objects have at least the following properties:\n     * object - {Object} A reference to map.events.object.\n     * element - {DOMElement} A reference to map.events.element.\n     *\n     * Browser events have the following additional properties:\n     * xy - {<OpenLayers.Pixel>} The pixel location of the event (relative\n     *     to the the map viewport).\n     *\n     * Supported map event types:\n     * preaddlayer - triggered before a layer has been added.  The event\n     *     object will include a *layer* property that references the layer  \n     *     to be added. When a listener returns \"false\" the adding will be \n     *     aborted.\n     * addlayer - triggered after a layer has been added.  The event object\n     *     will include a *layer* property that references the added layer.\n     * preremovelayer - triggered before a layer has been removed. The event\n     *     object will include a *layer* property that references the layer  \n     *     to be removed. When a listener returns \"false\" the removal will be \n     *     aborted.\n     * removelayer - triggered after a layer has been removed.  The event\n     *     object will include a *layer* property that references the removed\n     *     layer.\n     * changelayer - triggered after a layer name change, order change,\n     *     opacity change, params change, visibility change (actual visibility,\n     *     not the layer's visibility property) or attribution change (due to\n     *     extent change). Listeners will receive an event object with *layer*\n     *     and *property* properties. The *layer* property will be a reference\n     *     to the changed layer. The *property* property will be a key to the\n     *     changed property (name, order, opacity, params, visibility or\n     *     attribution).\n     * movestart - triggered after the start of a drag, pan, or zoom. The event\n     *     object may include a *zoomChanged* property that tells whether the\n     *     zoom has changed.\n     * move - triggered after each drag, pan, or zoom\n     * moveend - triggered after a drag, pan, or zoom completes\n     * zoomstart - triggered when a zoom starts. Listeners receive an object\n     *     with *center* and *zoom* properties, for the target center and zoom\n     *     level.\n     * zoomend - triggered after a zoom completes\n     * mouseover - triggered after mouseover the map\n     * mouseout - triggered after mouseout the map\n     * mousemove - triggered after mousemove the map\n     * changebaselayer - triggered after the base layer changes\n     * updatesize - triggered after the <updateSize> method was executed\n     */\n\n    /**\n     * Property: id\n     * {String} Unique identifier for the map\n     */\n    id: null,\n    \n    /**\n     * Property: fractionalZoom\n     * {Boolean} For a base layer that supports it, allow the map resolution\n     *     to be set to a value between one of the values in the resolutions\n     *     array.  Default is false.\n     *\n     * When fractionalZoom is set to true, it is possible to zoom to\n     *     an arbitrary extent.  This requires a base layer from a source\n     *     that supports requests for arbitrary extents (i.e. not cached\n     *     tiles on a regular lattice).  This means that fractionalZoom\n     *     will not work with commercial layers (Google, Yahoo, VE), layers\n     *     using TileCache, or any other pre-cached data sources.\n     *\n     * If you are using fractionalZoom, then you should also use\n     *     <getResolutionForZoom> instead of layer.resolutions[zoom] as the\n     *     former works for non-integer zoom levels.\n     */\n    fractionalZoom: false,\n    \n    /**\n     * APIProperty: events\n     * {<OpenLayers.Events>} An events object that handles all \n     *                       events on the map\n     */\n    events: null,\n    \n    /**\n     * APIProperty: allOverlays\n     * {Boolean} Allow the map to function with \"overlays\" only.  Defaults to\n     *     false.  If true, the lowest layer in the draw order will act as\n     *     the base layer.  In addition, if set to true, all layers will\n     *     have isBaseLayer set to false when they are added to the map.\n     *\n     * Note:\n     * If you set map.allOverlays to true, then you *cannot* use\n     *     map.setBaseLayer or layer.setIsBaseLayer.  With allOverlays true,\n     *     the lowest layer in the draw layer is the base layer.  So, to change\n     *     the base layer, use <setLayerIndex> or <raiseLayer> to set the layer\n     *     index to 0.\n     */\n    allOverlays: false,\n\n    /**\n     * APIProperty: div\n     * {DOMElement|String} The element that contains the map (or an id for\n     *     that element).  If the <OpenLayers.Map> constructor is called\n     *     with two arguments, this should be provided as the first argument.\n     *     Alternatively, the map constructor can be called with the options\n     *     object as the only argument.  In this case (one argument), a\n     *     div property may or may not be provided.  If the div property\n     *     is not provided, the map can be rendered to a container later\n     *     using the <render> method.\n     *     \n     * Note:\n     * If you are calling <render> after map construction, do not use\n     *     <maxResolution>  auto.  Instead, divide your <maxExtent> by your\n     *     maximum expected dimension.\n     */\n    div: null,\n    \n    /**\n     * Property: dragging\n     * {Boolean} The map is currently being dragged.\n     */\n    dragging: false,\n\n    /**\n     * Property: size\n     * {<OpenLayers.Size>} Size of the main div (this.div)\n     */\n    size: null,\n    \n    /**\n     * Property: viewPortDiv\n     * {HTMLDivElement} The element that represents the map viewport\n     */\n    viewPortDiv: null,\n\n    /**\n     * Property: layerContainerOrigin\n     * {<OpenLayers.LonLat>} The lonlat at which the later container was\n     *                       re-initialized (on-zoom)\n     */\n    layerContainerOrigin: null,\n\n    /**\n     * Property: layerContainerDiv\n     * {HTMLDivElement} The element that contains the layers.\n     */\n    layerContainerDiv: null,\n\n    /**\n     * APIProperty: layers\n     * {Array(<OpenLayers.Layer>)} Ordered list of layers in the map\n     */\n    layers: null,\n\n    /**\n     * APIProperty: controls\n     * {Array(<OpenLayers.Control>)} List of controls associated with the map.\n     *\n     * If not provided in the map options at construction, the map will\n     *     by default be given the following controls if present in the build:\n     *  - <OpenLayers.Control.Navigation> or <OpenLayers.Control.TouchNavigation>\n     *  - <OpenLayers.Control.Zoom> or <OpenLayers.Control.PanZoom>\n     *  - <OpenLayers.Control.ArgParser>\n     *  - <OpenLayers.Control.Attribution>\n     */\n    controls: null,\n\n    /**\n     * Property: popups\n     * {Array(<OpenLayers.Popup>)} List of popups associated with the map\n     */\n    popups: null,\n\n    /**\n     * APIProperty: baseLayer\n     * {<OpenLayers.Layer>} The currently selected base layer.  This determines\n     * min/max zoom level, projection, etc.\n     */\n    baseLayer: null,\n    \n    /**\n     * Property: center\n     * {<OpenLayers.LonLat>} The current center of the map\n     */\n    center: null,\n\n    /**\n     * Property: resolution\n     * {Float} The resolution of the map.\n     */\n    resolution: null,\n\n    /**\n     * Property: zoom\n     * {Integer} The current zoom level of the map\n     */\n    zoom: 0,    \n\n    /**\n     * Property: panRatio\n     * {Float} The ratio of the current extent within\n     *         which panning will tween.\n     */\n    panRatio: 1.5,    \n\n    /**\n     * APIProperty: options\n     * {Object} The options object passed to the class constructor. Read-only.\n     */\n    options: null,\n\n  // Options\n\n    /**\n     * APIProperty: tileSize\n     * {<OpenLayers.Size>} Set in the map options to override the default tile\n     *                     size for this map.\n     */\n    tileSize: null,\n\n    /**\n     * APIProperty: projection\n     * {String} Set in the map options to specify the default projection \n     *          for layers added to this map. When using a projection other than EPSG:4326\n     *          (CRS:84, Geographic) or EPSG:3857 (EPSG:900913, Web Mercator),\n     *          also set maxExtent, maxResolution or resolutions.  Default is \"EPSG:4326\".\n     *          Note that the projection of the map is usually determined\n     *          by that of the current baseLayer (see <baseLayer> and <getProjectionObject>).\n     */\n    projection: \"EPSG:4326\",    \n        \n    /**\n     * APIProperty: units\n     * {String} The map units.  Possible values are 'degrees' (or 'dd'), 'm', \n     *     'ft', 'km', 'mi', 'inches'.  Normally taken from the projection.\n     *     Only required if both map and layers do not define a projection,\n     *     or if they define a projection which does not define units\n     */\n    units: null,\n\n    /**\n     * APIProperty: resolutions\n     * {Array(Float)} A list of map resolutions (map units per pixel) in \n     *     descending order.  If this is not set in the layer constructor, it \n     *     will be set based on other resolution related properties \n     *     (maxExtent, maxResolution, maxScale, etc.).\n     */\n    resolutions: null,\n\n    /**\n     * APIProperty: maxResolution\n     * {Float} Required if you are not displaying the whole world on a tile\n     * with the size specified in <tileSize>.\n     */\n    maxResolution: null,\n\n    /**\n     * APIProperty: minResolution\n     * {Float}\n     */\n    minResolution: null,\n\n    /**\n     * APIProperty: maxScale\n     * {Float}\n     */\n    maxScale: null,\n\n    /**\n     * APIProperty: minScale\n     * {Float}\n     */\n    minScale: null,\n\n    /**\n     * APIProperty: maxExtent\n     * {<OpenLayers.Bounds>|Array} If provided as an array, the array\n     *     should consist of four values (left, bottom, right, top).\n     *     The maximum extent for the map.\n     *     Default depends on projection; if this is one of those defined in OpenLayers.Projection.defaults\n     *     (EPSG:4326 or web mercator), maxExtent will be set to the value defined there;\n     *     else, defaults to null.\n     *     To restrict user panning and zooming of the map, use <restrictedExtent> instead.\n     *     The value for <maxExtent> will change calculations for tile URLs.\n     */\n    maxExtent: null,\n    \n    /**\n     * APIProperty: minExtent\n     * {<OpenLayers.Bounds>|Array} If provided as an array, the array\n     *     should consist of four values (left, bottom, right, top).\n     *     The minimum extent for the map.  Defaults to null.\n     */\n    minExtent: null,\n    \n    /**\n     * APIProperty: restrictedExtent\n     * {<OpenLayers.Bounds>|Array} If provided as an array, the array\n     *     should consist of four values (left, bottom, right, top).\n     *     Limit map navigation to this extent where possible.\n     *     If a non-null restrictedExtent is set, panning will be restricted\n     *     to the given bounds.  In addition, zooming to a resolution that\n     *     displays more than the restricted extent will center the map\n     *     on the restricted extent.  If you wish to limit the zoom level\n     *     or resolution, use maxResolution.\n     */\n    restrictedExtent: null,\n\n    /**\n     * APIProperty: numZoomLevels\n     * {Integer} Number of zoom levels for the map.  Defaults to 16.  Set a\n     *           different value in the map options if needed.\n     */\n    numZoomLevels: 16,\n\n    /**\n     * APIProperty: theme\n     * {String} Relative path to a CSS file from which to load theme styles.\n     *          Specify null in the map options (e.g. {theme: null}) if you \n     *          want to get cascading style declarations - by putting links to \n     *          stylesheets or style declarations directly in your page.\n     */\n    theme: null,\n    \n    /** \n     * APIProperty: displayProjection\n     * {<OpenLayers.Projection>} Requires proj4js support for projections other\n     *     than EPSG:4326 or EPSG:900913/EPSG:3857. Projection used by\n     *     several controls to display data to user. If this property is set,\n     *     it will be set on any control which has a null displayProjection\n     *     property at the time the control is added to the map. \n     */\n    displayProjection: null,\n\n    /**\n     * APIProperty: tileManager\n     * {<OpenLayers.TileManager>|Object} By default, and if the build contains\n     * TileManager.js, the map will use the TileManager to queue image requests\n     * and to cache tile image elements. To create a map without a TileManager\n     * configure the map with tileManager: null. To create a TileManager with\n     * non-default options, supply the options instead or alternatively supply\n     * an instance of {<OpenLayers.TileManager>}.\n     */\n\n    /**\n     * APIProperty: fallThrough\n     * {Boolean} Should OpenLayers allow events on the map to fall through to\n     *           other elements on the page, or should it swallow them? (#457)\n     *           Default is to swallow.\n     */\n    fallThrough: false,\n\n    /**\n     * APIProperty: autoUpdateSize\n     * {Boolean} Should OpenLayers automatically update the size of the map\n     * when the resize event is fired. Default is true.\n     */\n    autoUpdateSize: true,\n    \n    /**\n     * APIProperty: eventListeners\n     * {Object} If set as an option at construction, the eventListeners\n     *     object will be registered with <OpenLayers.Events.on>.  Object\n     *     structure must be a listeners object as shown in the example for\n     *     the events.on method.\n     */\n    eventListeners: null,\n\n    /**\n     * Property: panTween\n     * {<OpenLayers.Tween>} Animated panning tween object, see panTo()\n     */\n    panTween: null,\n\n    /**\n     * APIProperty: panMethod\n     * {Function} The Easing function to be used for tweening.  Default is\n     * OpenLayers.Easing.Expo.easeOut. Setting this to 'null' turns off\n     * animated panning.\n     */\n    panMethod: OpenLayers.Easing.Expo.easeOut,\n    \n    /**\n     * Property: panDuration\n     * {Integer} The number of steps to be passed to the\n     * OpenLayers.Tween.start() method when the map is\n     * panned.\n     * Default is 50.\n     */\n    panDuration: 50,\n    \n    /**\n     * Property: zoomTween\n     * {<OpenLayers.Tween>} Animated zooming tween object, see zoomTo()\n     */\n    zoomTween: null,\n\n    /**\n     * APIProperty: zoomMethod\n     * {Function} The Easing function to be used for tweening.  Default is\n     * OpenLayers.Easing.Quad.easeOut. Setting this to 'null' turns off\n     * animated zooming.\n     */\n    zoomMethod: OpenLayers.Easing.Quad.easeOut,\n    \n    /**\n     * Property: zoomDuration\n     * {Integer} The number of steps to be passed to the\n     * OpenLayers.Tween.start() method when the map is zoomed.\n     * Default is 20.\n     */\n    zoomDuration: 20,\n    \n    /**\n     * Property: paddingForPopups\n     * {<OpenLayers.Bounds>} Outside margin of the popup. Used to prevent \n     *     the popup from getting too close to the map border.\n     */\n    paddingForPopups : null,\n    \n    /**\n     * Property: layerContainerOriginPx\n     * {Object} Cached object representing the layer container origin (in pixels).\n     */\n    layerContainerOriginPx: null,\n    \n    /**\n     * Property: minPx\n     * {Object} An object with a 'x' and 'y' values that is the lower\n     *     left of maxExtent in viewport pixel space.\n     *     Used to verify in moveByPx that the new location we're moving to\n     *     is valid. It is also used in the getLonLatFromViewPortPx function\n     *     of Layer.\n     */\n    minPx: null,\n    \n    /**\n     * Property: maxPx\n     * {Object} An object with a 'x' and 'y' values that is the top\n     *     right of maxExtent in viewport pixel space.\n     *     Used to verify in moveByPx that the new location we're moving to\n     *     is valid.\n     */\n    maxPx: null,\n    \n    /**\n     * Constructor: OpenLayers.Map\n     * Constructor for a new OpenLayers.Map instance.  There are two possible\n     *     ways to call the map constructor.  See the examples below.\n     *\n     * Parameters:\n     * div - {DOMElement|String}  The element or id of an element in your page\n     *     that will contain the map.  May be omitted if the <div> option is\n     *     provided or if you intend to call the <render> method later.\n     * options - {Object} Optional object with properties to tag onto the map.\n     *\n     * Valid options (in addition to the listed API properties):\n     * center - {<OpenLayers.LonLat>|Array} The default initial center of the map.\n     *     If provided as array, the first value is the x coordinate,\n     *     and the 2nd value is the y coordinate.\n     *     Only specify if <layers> is provided.\n     *     Note that if an ArgParser/Permalink control is present,\n     *     and the querystring contains coordinates, center will be set\n     *     by that, and this option will be ignored.\n     * zoom - {Number} The initial zoom level for the map. Only specify if\n     *     <layers> is provided.\n     *     Note that if an ArgParser/Permalink control is present,\n     *     and the querystring contains a zoom level, zoom will be set\n     *     by that, and this option will be ignored.\n     * \n     * Examples:\n     * (code)\n     * // create a map with default options in an element with the id \"map1\"\n     * var map = new OpenLayers.Map(\"map1\");\n     *\n     * // create a map with non-default options in an element with id \"map2\"\n     * var options = {\n     *     projection: \"EPSG:3857\",\n     *     maxExtent: new OpenLayers.Bounds(-200000, -200000, 200000, 200000),\n     *     center: new OpenLayers.LonLat(-12356463.476333, 5621521.4854095)\n     * };\n     * var map = new OpenLayers.Map(\"map2\", options);\n     *\n     * // map with non-default options - same as above but with a single argument,\n     * // a restricted extent, and using arrays for bounds and center\n     * var map = new OpenLayers.Map({\n     *     div: \"map_id\",\n     *     projection: \"EPSG:3857\",\n     *     maxExtent: [-18924313.432222, -15538711.094146, 18924313.432222, 15538711.094146],\n     *     restrictedExtent: [-13358338.893333, -9608371.5085962, 13358338.893333, 9608371.5085962],\n     *     center: [-12356463.476333, 5621521.4854095]\n     * });\n     *\n     * // create a map without a reference to a container - call render later\n     * var map = new OpenLayers.Map({\n     *     projection: \"EPSG:3857\",\n     *     maxExtent: new OpenLayers.Bounds(-200000, -200000, 200000, 200000)\n     * });\n     * (end)\n     */    \n    initialize: function (div, options) {\n        \n        // If only one argument is provided, check if it is an object.\n        var isDOMElement = OpenLayers.Util.isElement(div);\n        if(arguments.length === 1 && typeof div === \"object\" && !isDOMElement) {\n            options = div;\n            div = options && options.div;\n        }\n\n        // Simple-type defaults are set in class definition. \n        //  Now set complex-type defaults \n        this.tileSize = new OpenLayers.Size(OpenLayers.Map.TILE_WIDTH,\n                                            OpenLayers.Map.TILE_HEIGHT);\n        \n        this.paddingForPopups = new OpenLayers.Bounds(15, 15, 15, 15);\n\n        this.theme = OpenLayers._getScriptLocation() + \n                             'theme/default/style.css'; \n\n        // backup original options\n        this.options = OpenLayers.Util.extend({}, options);\n\n        // now override default options \n        OpenLayers.Util.extend(this, options);\n        \n        var projCode = this.projection instanceof OpenLayers.Projection ?\n            this.projection.projCode : this.projection;\n        OpenLayers.Util.applyDefaults(this, OpenLayers.Projection.defaults[projCode]);\n        \n        // allow extents and center to be arrays\n        if (this.maxExtent && !(this.maxExtent instanceof OpenLayers.Bounds)) {\n            this.maxExtent = new OpenLayers.Bounds(this.maxExtent);\n        }\n        if (this.minExtent && !(this.minExtent instanceof OpenLayers.Bounds)) {\n            this.minExtent = new OpenLayers.Bounds(this.minExtent);\n        }\n        if (this.restrictedExtent && !(this.restrictedExtent instanceof OpenLayers.Bounds)) {\n            this.restrictedExtent = new OpenLayers.Bounds(this.restrictedExtent);\n        }\n        if (this.center && !(this.center instanceof OpenLayers.LonLat)) {\n            this.center = new OpenLayers.LonLat(this.center);\n        }\n\n        // initialize layers array\n        this.layers = [];\n\n        this.id = OpenLayers.Util.createUniqueID(\"OpenLayers.Map_\");\n\n        this.div = OpenLayers.Util.getElement(div);\n        if(!this.div) {\n            this.div = document.createElement(\"div\");\n            this.div.style.height = \"1px\";\n            this.div.style.width = \"1px\";\n        }\n        \n        OpenLayers.Element.addClass(this.div, 'olMap');\n\n        // the viewPortDiv is the outermost div we modify\n        var id = this.id + \"_OpenLayers_ViewPort\";\n        this.viewPortDiv = OpenLayers.Util.createDiv(id, null, null, null,\n                                                     \"relative\", null,\n                                                     \"hidden\");\n        this.viewPortDiv.style.width = \"100%\";\n        this.viewPortDiv.style.height = \"100%\";\n        this.viewPortDiv.className = \"olMapViewport\";\n        this.div.appendChild(this.viewPortDiv);\n\n        this.events = new OpenLayers.Events(\n            this, this.viewPortDiv, null, this.fallThrough, \n            {includeXY: true}\n        );\n        \n        if (OpenLayers.TileManager && this.tileManager !== null) {\n            if (!(this.tileManager instanceof OpenLayers.TileManager)) {\n                this.tileManager = new OpenLayers.TileManager(this.tileManager);\n            }\n            this.tileManager.addMap(this);\n        }\n\n        // the layerContainerDiv is the one that holds all the layers\n        id = this.id + \"_OpenLayers_Container\";\n        this.layerContainerDiv = OpenLayers.Util.createDiv(id);\n        this.layerContainerDiv.style.zIndex=this.Z_INDEX_BASE['Popup']-1;\n        this.layerContainerOriginPx = {x: 0, y: 0};\n        this.applyTransform();\n        \n        this.viewPortDiv.appendChild(this.layerContainerDiv);\n\n        this.updateSize();\n        if(this.eventListeners instanceof Object) {\n            this.events.on(this.eventListeners);\n        }\n\n        if (this.autoUpdateSize === true) {\n            // updateSize on catching the window's resize\n            // Note that this is ok, as updateSize() does nothing if the \n            // map's size has not actually changed.\n            this.updateSizeDestroy = OpenLayers.Function.bind(this.updateSize, \n                this);\n            OpenLayers.Event.observe(window, 'resize',\n                            this.updateSizeDestroy);\n        }\n        \n        // only append link stylesheet if the theme property is set\n        if(this.theme) {\n            // check existing links for equivalent url\n            var addNode = true;\n            var nodes = document.getElementsByTagName('link');\n            for(var i=0, len=nodes.length; i<len; ++i) {\n                if(OpenLayers.Util.isEquivalentUrl(nodes.item(i).href,\n                                                   this.theme)) {\n                    addNode = false;\n                    break;\n                }\n            }\n            // only add a new node if one with an equivalent url hasn't already\n            // been added\n            if(addNode) {\n                var cssNode = document.createElement('link');\n                cssNode.setAttribute('rel', 'stylesheet');\n                cssNode.setAttribute('type', 'text/css');\n                cssNode.setAttribute('href', this.theme);\n                document.getElementsByTagName('head')[0].appendChild(cssNode);\n            }\n        }\n        \n        if (this.controls == null) { // default controls\n            this.controls = [];\n            if (OpenLayers.Control != null) { // running full or lite?\n                // Navigation or TouchNavigation depending on what is in build\n                if (OpenLayers.Control.Navigation) {\n                    this.controls.push(new OpenLayers.Control.Navigation());\n                } else if (OpenLayers.Control.TouchNavigation) {\n                    this.controls.push(new OpenLayers.Control.TouchNavigation());\n                }\n                if (OpenLayers.Control.Zoom) {\n                    this.controls.push(new OpenLayers.Control.Zoom());\n                } else if (OpenLayers.Control.PanZoom) {\n                    this.controls.push(new OpenLayers.Control.PanZoom());\n                }\n\n                if (OpenLayers.Control.ArgParser) {\n                    this.controls.push(new OpenLayers.Control.ArgParser());\n                }\n                if (OpenLayers.Control.Attribution) {\n                    this.controls.push(new OpenLayers.Control.Attribution());\n                }\n            }\n        }\n\n        for(var i=0, len=this.controls.length; i<len; i++) {\n            this.addControlToMap(this.controls[i]);\n        }\n\n        this.popups = [];\n\n        this.unloadDestroy = OpenLayers.Function.bind(this.destroy, this);\n        \n\n        // always call map.destroy()\n        OpenLayers.Event.observe(window, 'unload', this.unloadDestroy);\n        \n        // add any initial layers\n        if (options && options.layers) {\n            /** \n             * If you have set options.center, the map center property will be\n             * set at this point.  However, since setCenter has not been called,\n             * addLayers gets confused.  So we delete the map center in this \n             * case.  Because the check below uses options.center, it will\n             * be properly set below.\n             */\n            delete this.center;\n            delete this.zoom;\n            this.addLayers(options.layers);\n            // set center (and optionally zoom)\n            if (options.center && !this.getCenter()) {\n                // zoom can be undefined here\n                this.setCenter(options.center, options.zoom);\n            }\n        }\n\n        if (this.panMethod) {\n            this.panTween = new OpenLayers.Tween(this.panMethod);\n        }\n        if (this.zoomMethod && this.applyTransform.transform) {\n            this.zoomTween = new OpenLayers.Tween(this.zoomMethod);\n        }\n    },\n\n    /** \n     * APIMethod: getViewport\n     * Get the DOMElement representing the view port.\n     *\n     * Returns:\n     * {DOMElement}\n     */\n    getViewport: function() {\n        return this.viewPortDiv;\n    },\n    \n    /**\n     * APIMethod: render\n     * Render the map to a specified container.\n     * \n     * Parameters:\n     * div - {String|DOMElement} The container that the map should be rendered\n     *     to. If different than the current container, the map viewport\n     *     will be moved from the current to the new container.\n     */\n    render: function(div) {\n        this.div = OpenLayers.Util.getElement(div);\n        OpenLayers.Element.addClass(this.div, 'olMap');\n        this.viewPortDiv.parentNode.removeChild(this.viewPortDiv);\n        this.div.appendChild(this.viewPortDiv);\n        this.updateSize();\n    },\n\n    /**\n     * Method: unloadDestroy\n     * Function that is called to destroy the map on page unload. stored here\n     *     so that if map is manually destroyed, we can unregister this.\n     */\n    unloadDestroy: null,\n    \n    /**\n     * Method: updateSizeDestroy\n     * When the map is destroyed, we need to stop listening to updateSize\n     *    events: this method stores the function we need to unregister in \n     *    non-IE browsers.\n     */\n    updateSizeDestroy: null,\n\n    /**\n     * APIMethod: destroy\n     * Destroy this map.\n     *    Note that if you are using an application which removes a container\n     *    of the map from the DOM, you need to ensure that you destroy the\n     *    map *before* this happens; otherwise, the page unload handler\n     *    will fail because the DOM elements that map.destroy() wants\n     *    to clean up will be gone. (See \n     *    http://trac.osgeo.org/openlayers/ticket/2277 for more information).\n     *    This will apply to GeoExt and also to other applications which\n     *    modify the DOM of the container of the OpenLayers Map.\n     */\n    destroy:function() {\n        // if unloadDestroy is null, we've already been destroyed\n        if (!this.unloadDestroy) {\n            return false;\n        }\n        \n        // make sure panning doesn't continue after destruction\n        if(this.panTween) {\n            this.panTween.stop();\n            this.panTween = null;\n        }\n        // make sure zooming doesn't continue after destruction\n        if(this.zoomTween) {\n            this.zoomTween.stop();\n            this.zoomTween = null;\n        }\n\n        // map has been destroyed. dont do it again!\n        OpenLayers.Event.stopObserving(window, 'unload', this.unloadDestroy);\n        this.unloadDestroy = null;\n\n        if (this.updateSizeDestroy) {\n            OpenLayers.Event.stopObserving(window, 'resize', \n                                           this.updateSizeDestroy);\n        }\n        \n        this.paddingForPopups = null;    \n\n        if (this.controls != null) {\n            for (var i = this.controls.length - 1; i>=0; --i) {\n                this.controls[i].destroy();\n            } \n            this.controls = null;\n        }\n        if (this.layers != null) {\n            for (var i = this.layers.length - 1; i>=0; --i) {\n                //pass 'false' to destroy so that map wont try to set a new \n                // baselayer after each baselayer is removed\n                this.layers[i].destroy(false);\n            } \n            this.layers = null;\n        }\n        if (this.viewPortDiv && this.viewPortDiv.parentNode) {\n            this.viewPortDiv.parentNode.removeChild(this.viewPortDiv);\n        }\n        this.viewPortDiv = null;\n        \n        if (this.tileManager) {\n            this.tileManager.removeMap(this);\n            this.tileManager = null;\n        }\n\n        if(this.eventListeners) {\n            this.events.un(this.eventListeners);\n            this.eventListeners = null;\n        }\n        this.events.destroy();\n        this.events = null;\n\n        this.options = null;\n    },\n\n    /**\n     * APIMethod: setOptions\n     * Change the map options\n     *\n     * Parameters:\n     * options - {Object} Hashtable of options to tag to the map\n     */\n    setOptions: function(options) {\n        var updatePxExtent = this.minPx &&\n            options.restrictedExtent != this.restrictedExtent;\n        OpenLayers.Util.extend(this, options);\n        // force recalculation of minPx and maxPx\n        updatePxExtent && this.moveTo(this.getCachedCenter(), this.zoom, {\n            forceZoomChange: true\n        });\n    },\n\n    /**\n     * APIMethod: getTileSize\n     * Get the tile size for the map\n     *\n     * Returns:\n     * {<OpenLayers.Size>}\n     */\n     getTileSize: function() {\n         return this.tileSize;\n     },\n\n\n    /**\n     * APIMethod: getBy\n     * Get a list of objects given a property and a match item.\n     *\n     * Parameters:\n     * array - {String} A property on the map whose value is an array.\n     * property - {String} A property on each item of the given array.\n     * match - {String | Object} A string to match.  Can also be a regular\n     *     expression literal or object.  In addition, it can be any object\n     *     with a method named test.  For reqular expressions or other, if\n     *     match.test(map[array][i][property]) evaluates to true, the item will\n     *     be included in the array returned.  If no items are found, an empty\n     *     array is returned.\n     *\n     * Returns:\n     * {Array} An array of items where the given property matches the given\n     *     criteria.\n     */\n    getBy: function(array, property, match) {\n        var test = (typeof match.test == \"function\");\n        var found = OpenLayers.Array.filter(this[array], function(item) {\n            return item[property] == match || (test && match.test(item[property]));\n        });\n        return found;\n    },\n\n    /**\n     * APIMethod: getLayersBy\n     * Get a list of layers with properties matching the given criteria.\n     *\n     * Parameters:\n     * property - {String} A layer property to be matched.\n     * match - {String | Object} A string to match.  Can also be a regular\n     *     expression literal or object.  In addition, it can be any object\n     *     with a method named test.  For reqular expressions or other, if\n     *     match.test(layer[property]) evaluates to true, the layer will be\n     *     included in the array returned.  If no layers are found, an empty\n     *     array is returned.\n     *\n     * Returns:\n     * {Array(<OpenLayers.Layer>)} A list of layers matching the given criteria.\n     *     An empty array is returned if no matches are found.\n     */\n    getLayersBy: function(property, match) {\n        return this.getBy(\"layers\", property, match);\n    },\n\n    /**\n     * APIMethod: getLayersByName\n     * Get a list of layers with names matching the given name.\n     *\n     * Parameters:\n     * match - {String | Object} A layer name.  The name can also be a regular\n     *     expression literal or object.  In addition, it can be any object\n     *     with a method named test.  For reqular expressions or other, if\n     *     name.test(layer.name) evaluates to true, the layer will be included\n     *     in the list of layers returned.  If no layers are found, an empty\n     *     array is returned.\n     *\n     * Returns:\n     * {Array(<OpenLayers.Layer>)} A list of layers matching the given name.\n     *     An empty array is returned if no matches are found.\n     */\n    getLayersByName: function(match) {\n        return this.getLayersBy(\"name\", match);\n    },\n\n    /**\n     * APIMethod: getLayersByClass\n     * Get a list of layers of a given class (CLASS_NAME).\n     *\n     * Parameters:\n     * match - {String | Object} A layer class name.  The match can also be a\n     *     regular expression literal or object.  In addition, it can be any\n     *     object with a method named test.  For reqular expressions or other,\n     *     if type.test(layer.CLASS_NAME) evaluates to true, the layer will\n     *     be included in the list of layers returned.  If no layers are\n     *     found, an empty array is returned.\n     *\n     * Returns:\n     * {Array(<OpenLayers.Layer>)} A list of layers matching the given class.\n     *     An empty array is returned if no matches are found.\n     */\n    getLayersByClass: function(match) {\n        return this.getLayersBy(\"CLASS_NAME\", match);\n    },\n\n    /**\n     * APIMethod: getControlsBy\n     * Get a list of controls with properties matching the given criteria.\n     *\n     * Parameters:\n     * property - {String} A control property to be matched.\n     * match - {String | Object} A string to match.  Can also be a regular\n     *     expression literal or object.  In addition, it can be any object\n     *     with a method named test.  For reqular expressions or other, if\n     *     match.test(layer[property]) evaluates to true, the layer will be\n     *     included in the array returned.  If no layers are found, an empty\n     *     array is returned.\n     *\n     * Returns:\n     * {Array(<OpenLayers.Control>)} A list of controls matching the given\n     *     criteria.  An empty array is returned if no matches are found.\n     */\n    getControlsBy: function(property, match) {\n        return this.getBy(\"controls\", property, match);\n    },\n\n    /**\n     * APIMethod: getControlsByClass\n     * Get a list of controls of a given class (CLASS_NAME).\n     *\n     * Parameters:\n     * match - {String | Object} A control class name.  The match can also be a\n     *     regular expression literal or object.  In addition, it can be any\n     *     object with a method named test.  For reqular expressions or other,\n     *     if type.test(control.CLASS_NAME) evaluates to true, the control will\n     *     be included in the list of controls returned.  If no controls are\n     *     found, an empty array is returned.\n     *\n     * Returns:\n     * {Array(<OpenLayers.Control>)} A list of controls matching the given class.\n     *     An empty array is returned if no matches are found.\n     */\n    getControlsByClass: function(match) {\n        return this.getControlsBy(\"CLASS_NAME\", match);\n    },\n\n  /********************************************************/\n  /*                                                      */\n  /*                  Layer Functions                     */\n  /*                                                      */\n  /*     The following functions deal with adding and     */\n  /*        removing Layers to and from the Map           */\n  /*                                                      */\n  /********************************************************/         \n\n    /**\n     * APIMethod: getLayer\n     * Get a layer based on its id\n     *\n     * Parameters:\n     * id - {String} A layer id\n     *\n     * Returns:\n     * {<OpenLayers.Layer>} The Layer with the corresponding id from the map's \n     *                      layer collection, or null if not found.\n     */\n    getLayer: function(id) {\n        var foundLayer = null;\n        for (var i=0, len=this.layers.length; i<len; i++) {\n            var layer = this.layers[i];\n            if (layer.id == id) {\n                foundLayer = layer;\n                break;\n            }\n        }\n        return foundLayer;\n    },\n\n    /**\n    * Method: setLayerZIndex\n    * \n    * Parameters:\n    * layer - {<OpenLayers.Layer>} \n    * zIdx - {int} \n    */    \n    setLayerZIndex: function (layer, zIdx) {\n        layer.setZIndex(\n            this.Z_INDEX_BASE[layer.isBaseLayer ? 'BaseLayer' : 'Overlay']\n            + zIdx * 5 );\n    },\n\n    /**\n     * Method: resetLayersZIndex\n     * Reset each layer's z-index based on layer's array index\n     */\n    resetLayersZIndex: function() {\n        for (var i=0, len=this.layers.length; i<len; i++) {\n            var layer = this.layers[i];\n            this.setLayerZIndex(layer, i);\n        }\n    },\n\n    /**\n    * APIMethod: addLayer\n    *\n    * Parameters:\n    * layer - {<OpenLayers.Layer>} \n    *\n    * Returns:\n    * {Boolean} True if the layer has been added to the map.\n    */    \n    addLayer: function (layer) {\n        for(var i = 0, len = this.layers.length; i < len; i++) {\n            if (this.layers[i] == layer) {\n                return false;\n            }\n        }\n        if (this.events.triggerEvent(\"preaddlayer\", {layer: layer}) === false) {\n            return false;\n        }\n        if(this.allOverlays) {\n            layer.isBaseLayer = false;\n        }\n        \n        layer.div.className = \"olLayerDiv\";\n        layer.div.style.overflow = \"\";\n        this.setLayerZIndex(layer, this.layers.length);\n\n        if (layer.isFixed) {\n            this.viewPortDiv.appendChild(layer.div);\n        } else {\n            this.layerContainerDiv.appendChild(layer.div);\n        }\n        this.layers.push(layer);\n        layer.setMap(this);\n\n        if (layer.isBaseLayer || (this.allOverlays && !this.baseLayer))  {\n            if (this.baseLayer == null) {\n                // set the first baselaye we add as the baselayer\n                this.setBaseLayer(layer);\n            } else {\n                layer.setVisibility(false);\n            }\n        } else {\n            layer.redraw();\n        }\n\n        this.events.triggerEvent(\"addlayer\", {layer: layer});\n        layer.events.triggerEvent(\"added\", {map: this, layer: layer});\n        layer.afterAdd();\n\n        return true;\n    },\n\n    /**\n    * APIMethod: addLayers \n    *\n    * Parameters:\n    * layers - {Array(<OpenLayers.Layer>)} \n    */    \n    addLayers: function (layers) {\n        for (var i=0, len=layers.length; i<len; i++) {\n            this.addLayer(layers[i]);\n        }\n    },\n\n    /** \n     * APIMethod: removeLayer\n     * Removes a layer from the map by removing its visual element (the \n     *   layer.div property), then removing it from the map's internal list \n     *   of layers, setting the layer's map property to null. \n     * \n     *   a \"removelayer\" event is triggered.\n     * \n     *   very worthy of mention is that simply removing a layer from a map\n     *   will not cause the removal of any popups which may have been created\n     *   by the layer. this is due to the fact that it was decided at some\n     *   point that popups would not belong to layers. thus there is no way \n     *   for us to know here to which layer the popup belongs.\n     *    \n     *     A simple solution to this is simply to call destroy() on the layer.\n     *     the default OpenLayers.Layer class's destroy() function\n     *     automatically takes care to remove itself from whatever map it has\n     *     been attached to. \n     * \n     *     The correct solution is for the layer itself to register an \n     *     event-handler on \"removelayer\" and when it is called, if it \n     *     recognizes itself as the layer being removed, then it cycles through\n     *     its own personal list of popups, removing them from the map.\n     * \n     * Parameters:\n     * layer - {<OpenLayers.Layer>} \n     * setNewBaseLayer - {Boolean} Default is true\n     */\n    removeLayer: function(layer, setNewBaseLayer) {\n        if (this.events.triggerEvent(\"preremovelayer\", {layer: layer}) === false) {\n            return;\n        }\n        if (setNewBaseLayer == null) {\n            setNewBaseLayer = true;\n        }\n\n        if (layer.isFixed) {\n            this.viewPortDiv.removeChild(layer.div);\n        } else {\n            this.layerContainerDiv.removeChild(layer.div);\n        }\n        OpenLayers.Util.removeItem(this.layers, layer);\n        layer.removeMap(this);\n        layer.map = null;\n\n        // if we removed the base layer, need to set a new one\n        if(this.baseLayer == layer) {\n            this.baseLayer = null;\n            if(setNewBaseLayer) {\n                for(var i=0, len=this.layers.length; i<len; i++) {\n                    var iLayer = this.layers[i];\n                    if (iLayer.isBaseLayer || this.allOverlays) {\n                        this.setBaseLayer(iLayer);\n                        break;\n                    }\n                }\n            }\n        }\n\n        this.resetLayersZIndex();\n\n        this.events.triggerEvent(\"removelayer\", {layer: layer});\n        layer.events.triggerEvent(\"removed\", {map: this, layer: layer});\n    },\n\n    /**\n     * APIMethod: getNumLayers\n     * \n     * Returns:\n     * {Int} The number of layers attached to the map.\n     */\n    getNumLayers: function () {\n        return this.layers.length;\n    },\n\n    /** \n     * APIMethod: getLayerIndex\n     *\n     * Parameters:\n     * layer - {<OpenLayers.Layer>}\n     *\n     * Returns:\n     * {Integer} The current (zero-based) index of the given layer in the map's\n     *           layer stack. Returns -1 if the layer isn't on the map.\n     */\n    getLayerIndex: function (layer) {\n        return OpenLayers.Util.indexOf(this.layers, layer);\n    },\n    \n    /** \n     * APIMethod: setLayerIndex\n     * Move the given layer to the specified (zero-based) index in the layer\n     *     list, changing its z-index in the map display. Use\n     *     map.getLayerIndex() to find out the current index of a layer. Note\n     *     that this cannot (or at least should not) be effectively used to\n     *     raise base layers above overlays.\n     *\n     * Parameters:\n     * layer - {<OpenLayers.Layer>} \n     * idx - {int} \n     */\n    setLayerIndex: function (layer, idx) {\n        var base = this.getLayerIndex(layer);\n        if (idx < 0) {\n            idx = 0;\n        } else if (idx > this.layers.length) {\n            idx = this.layers.length;\n        }\n        if (base != idx) {\n            this.layers.splice(base, 1);\n            this.layers.splice(idx, 0, layer);\n            for (var i=0, len=this.layers.length; i<len; i++) {\n                this.setLayerZIndex(this.layers[i], i);\n            }\n            this.events.triggerEvent(\"changelayer\", {\n                layer: layer, property: \"order\"\n            });\n            if(this.allOverlays) {\n                if(idx === 0) {\n                    this.setBaseLayer(layer);\n                } else if(this.baseLayer !== this.layers[0]) {\n                    this.setBaseLayer(this.layers[0]);\n                }\n            }\n        }\n    },\n\n    /** \n     * APIMethod: raiseLayer\n     * Change the index of the given layer by delta. If delta is positive, \n     *     the layer is moved up the map's layer stack; if delta is negative,\n     *     the layer is moved down.  Again, note that this cannot (or at least\n     *     should not) be effectively used to raise base layers above overlays.\n     *\n     * Parameters:\n     * layer - {<OpenLayers.Layer>} \n     * delta - {int} \n     */\n    raiseLayer: function (layer, delta) {\n        var idx = this.getLayerIndex(layer) + delta;\n        this.setLayerIndex(layer, idx);\n    },\n    \n    /** \n     * APIMethod: setBaseLayer\n     * Allows user to specify one of the currently-loaded layers as the Map's\n     *     new base layer.\n     * \n     * Parameters:\n     * newBaseLayer - {<OpenLayers.Layer>}\n     */\n    setBaseLayer: function(newBaseLayer) {\n        \n        if (newBaseLayer != this.baseLayer) {\n          \n            // ensure newBaseLayer is already loaded\n            if (OpenLayers.Util.indexOf(this.layers, newBaseLayer) != -1) {\n\n                // preserve center and scale when changing base layers\n                var center = this.getCachedCenter();\n                var oldResolution = this.getResolution();\n                var newResolution = OpenLayers.Util.getResolutionFromScale(\n                    this.getScale(), newBaseLayer.units\n                );\n\n                // make the old base layer invisible \n                if (this.baseLayer != null && !this.allOverlays) {\n                    this.baseLayer.setVisibility(false);\n                }\n\n                // set new baselayer\n                this.baseLayer = newBaseLayer;\n                \n                if(!this.allOverlays || this.baseLayer.visibility) {\n                    this.baseLayer.setVisibility(true);\n                    // Layer may previously have been visible but not in range.\n                    // In this case we need to redraw it to make it visible.\n                    if (this.baseLayer.inRange === false) {\n                        this.baseLayer.redraw();\n                    }\n                }\n\n                // recenter the map\n                if (center != null) {\n                    // new zoom level derived from old scale\n                    var newZoom = this.getZoomForResolution(\n                        newResolution || this.resolution, true\n                    );\n                    // zoom and force zoom change\n                    this.setCenter(center, newZoom, false, oldResolution != newResolution);\n                }\n\n                this.events.triggerEvent(\"changebaselayer\", {\n                    layer: this.baseLayer\n                });\n            }        \n        }\n    },\n\n\n  /********************************************************/\n  /*                                                      */\n  /*                 Control Functions                    */\n  /*                                                      */\n  /*     The following functions deal with adding and     */\n  /*        removing Controls to and from the Map         */\n  /*                                                      */\n  /********************************************************/         \n\n    /**\n     * APIMethod: addControl\n     * Add the passed over control to the map. Optionally \n     *     position the control at the given pixel.\n     * \n     * Parameters:\n     * control - {<OpenLayers.Control>}\n     * px - {<OpenLayers.Pixel>}\n     */    \n    addControl: function (control, px) {\n        this.controls.push(control);\n        this.addControlToMap(control, px);\n    },\n    \n    /**\n     * APIMethod: addControls\n     * Add all of the passed over controls to the map. \n     *     You can pass over an optional second array\n     *     with pixel-objects to position the controls.\n     *     The indices of the two arrays should match and\n     *     you can add null as pixel for those controls \n     *     you want to be autopositioned.   \n     *     \n     * Parameters:\n     * controls - {Array(<OpenLayers.Control>)}\n     * pixels - {Array(<OpenLayers.Pixel>)}\n     */    \n    addControls: function (controls, pixels) {\n        var pxs = (arguments.length === 1) ? [] : pixels;\n        for (var i=0, len=controls.length; i<len; i++) {\n            var ctrl = controls[i];\n            var px = (pxs[i]) ? pxs[i] : null;\n            this.addControl( ctrl, px );\n        }\n    },\n\n    /**\n     * Method: addControlToMap\n     * \n     * Parameters:\n     * \n     * control - {<OpenLayers.Control>}\n     * px - {<OpenLayers.Pixel>}\n     */    \n    addControlToMap: function (control, px) {\n        // If a control doesn't have a div at this point, it belongs in the\n        // viewport.\n        control.outsideViewport = (control.div != null);\n        \n        // If the map has a displayProjection, and the control doesn't, set \n        // the display projection.\n        if (this.displayProjection && !control.displayProjection) {\n            control.displayProjection = this.displayProjection;\n        }    \n        \n        control.setMap(this);\n        var div = control.draw(px);\n        if (div) {\n            if(!control.outsideViewport) {\n                div.style.zIndex = this.Z_INDEX_BASE['Control'] +\n                                    this.controls.length;\n                this.viewPortDiv.appendChild( div );\n            }\n        }\n        if(control.autoActivate) {\n            control.activate();\n        }\n    },\n    \n    /**\n     * APIMethod: getControl\n     * \n     * Parameters:\n     * id - {String} ID of the control to return.\n     * \n     * Returns:\n     * {<OpenLayers.Control>} The control from the map's list of controls \n     *                        which has a matching 'id'. If none found, \n     *                        returns null.\n     */    \n    getControl: function (id) {\n        var returnControl = null;\n        for(var i=0, len=this.controls.length; i<len; i++) {\n            var control = this.controls[i];\n            if (control.id == id) {\n                returnControl = control;\n                break;\n            }\n        }\n        return returnControl;\n    },\n    \n    /** \n     * APIMethod: removeControl\n     * Remove a control from the map. Removes the control both from the map \n     *     object's internal array of controls, as well as from the map's \n     *     viewPort (assuming the control was not added outsideViewport)\n     * \n     * Parameters:\n     * control - {<OpenLayers.Control>} The control to remove.\n     */    \n    removeControl: function (control) {\n        //make sure control is non-null and actually part of our map\n        if ( (control) && (control == this.getControl(control.id)) ) {\n            if (control.div && (control.div.parentNode == this.viewPortDiv)) {\n                this.viewPortDiv.removeChild(control.div);\n            }\n            OpenLayers.Util.removeItem(this.controls, control);\n        }\n    },\n\n  /********************************************************/\n  /*                                                      */\n  /*                  Popup Functions                     */\n  /*                                                      */\n  /*     The following functions deal with adding and     */\n  /*        removing Popups to and from the Map           */\n  /*                                                      */\n  /********************************************************/         \n\n    /** \n     * APIMethod: addPopup\n     * \n     * Parameters:\n     * popup - {<OpenLayers.Popup>}\n     * exclusive - {Boolean} If true, closes all other popups first\n     */\n    addPopup: function(popup, exclusive) {\n\n        if (exclusive) {\n            //remove all other popups from screen\n            for (var i = this.popups.length - 1; i >= 0; --i) {\n                this.removePopup(this.popups[i]);\n            }\n        }\n\n        popup.map = this;\n        this.popups.push(popup);\n        var popupDiv = popup.draw();\n        if (popupDiv) {\n            popupDiv.style.zIndex = this.Z_INDEX_BASE['Popup'] +\n                                    this.popups.length;\n            this.layerContainerDiv.appendChild(popupDiv);\n        }\n    },\n    \n    /** \n    * APIMethod: removePopup\n    * \n    * Parameters:\n    * popup - {<OpenLayers.Popup>}\n    */\n    removePopup: function(popup) {\n        OpenLayers.Util.removeItem(this.popups, popup);\n        if (popup.div) {\n            try { this.layerContainerDiv.removeChild(popup.div); }\n            catch (e) { } // Popups sometimes apparently get disconnected\n                      // from the layerContainerDiv, and cause complaints.\n        }\n        popup.map = null;\n    },\n\n  /********************************************************/\n  /*                                                      */\n  /*              Container Div Functions                 */\n  /*                                                      */\n  /*   The following functions deal with the access to    */\n  /*    and maintenance of the size of the container div  */\n  /*                                                      */\n  /********************************************************/     \n\n    /**\n     * APIMethod: getSize\n     * \n     * Returns:\n     * {<OpenLayers.Size>} An <OpenLayers.Size> object that represents the \n     *                     size, in pixels, of the div into which OpenLayers \n     *                     has been loaded. \n     *                     Note - A clone() of this locally cached variable is\n     *                     returned, so as not to allow users to modify it.\n     */\n    getSize: function () {\n        var size = null;\n        if (this.size != null) {\n            size = this.size.clone();\n        }\n        return size;\n    },\n\n    /**\n     * APIMethod: updateSize\n     * This function should be called by any external code which dynamically\n     *     changes the size of the map div (because mozilla wont let us catch \n     *     the \"onresize\" for an element)\n     */\n    updateSize: function() {\n        // the div might have moved on the page, also\n        var newSize = this.getCurrentSize();\n        if (newSize && !isNaN(newSize.h) && !isNaN(newSize.w)) {\n            this.events.clearMouseCache();\n            var oldSize = this.getSize();\n            if (oldSize == null) {\n                this.size = oldSize = newSize;\n            }\n            if (!newSize.equals(oldSize)) {\n                \n                // store the new size\n                this.size = newSize;\n    \n                //notify layers of mapresize\n                for(var i=0, len=this.layers.length; i<len; i++) {\n                    this.layers[i].onMapResize();                \n                }\n    \n                var center = this.getCachedCenter();\n    \n                if (this.baseLayer != null && center != null) {\n                    var zoom = this.getZoom();\n                    this.zoom = null;\n                    this.setCenter(center, zoom);\n                }\n    \n            }\n        }\n        this.events.triggerEvent(\"updatesize\");\n    },\n    \n    /**\n     * Method: getCurrentSize\n     * \n     * Returns:\n     * {<OpenLayers.Size>} A new <OpenLayers.Size> object with the dimensions \n     *                     of the map div\n     */\n    getCurrentSize: function() {\n\n        var size = new OpenLayers.Size(this.div.clientWidth, \n                                       this.div.clientHeight);\n\n        if (size.w == 0 && size.h == 0 || isNaN(size.w) && isNaN(size.h)) {\n            size.w = this.div.offsetWidth;\n            size.h = this.div.offsetHeight;\n        }\n        if (size.w == 0 && size.h == 0 || isNaN(size.w) && isNaN(size.h)) {\n            size.w = parseInt(this.div.style.width);\n            size.h = parseInt(this.div.style.height);\n        }\n        return size;\n    },\n\n    /** \n     * Method: calculateBounds\n     * \n     * Parameters:\n     * center - {<OpenLayers.LonLat>} Default is this.getCenter()\n     * resolution - {float} Default is this.getResolution() \n     * \n     * Returns:\n     * {<OpenLayers.Bounds>} A bounds based on resolution, center, and \n     *                       current mapsize.\n     */\n    calculateBounds: function(center, resolution) {\n\n        var extent = null;\n        \n        if (center == null) {\n            center = this.getCachedCenter();\n        }                \n        if (resolution == null) {\n            resolution = this.getResolution();\n        }\n    \n        if ((center != null) && (resolution != null)) {\n            var halfWDeg = (this.size.w * resolution) / 2;\n            var halfHDeg = (this.size.h * resolution) / 2;\n        \n            extent = new OpenLayers.Bounds(center.lon - halfWDeg,\n                                           center.lat - halfHDeg,\n                                           center.lon + halfWDeg,\n                                           center.lat + halfHDeg);\n        }\n\n        return extent;\n    },\n\n\n  /********************************************************/\n  /*                                                      */\n  /*            Zoom, Center, Pan Functions               */\n  /*                                                      */\n  /*    The following functions handle the validation,    */\n  /*   getting and setting of the Zoom Level and Center   */\n  /*       as well as the panning of the Map              */\n  /*                                                      */\n  /********************************************************/\n    /**\n     * APIMethod: getCenter\n     * \n     * Returns:\n     * {<OpenLayers.LonLat>}\n     */\n    getCenter: function () {\n        var center = null;\n        var cachedCenter = this.getCachedCenter();\n        if (cachedCenter) {\n            center = cachedCenter.clone();\n        }\n        return center;\n    },\n\n    /**\n     * Method: getCachedCenter\n     *\n     * Returns:\n     * {<OpenLayers.LonLat>}\n     */\n    getCachedCenter: function() {\n        if (!this.center && this.size) {\n            this.center = this.getLonLatFromViewPortPx({\n                x: this.size.w / 2,\n                y: this.size.h / 2\n            });\n        }\n        return this.center;\n    },\n\n    /**\n     * APIMethod: getZoom\n     * \n     * Returns:\n     * {Integer}\n     */\n    getZoom: function () {\n        return this.zoom;\n    },\n    \n    /** \n     * APIMethod: pan\n     * Allows user to pan by a value of screen pixels\n     * \n     * Parameters:\n     * dx - {Integer}\n     * dy - {Integer}\n     * options - {Object} Options to configure panning:\n     *  - *animate* {Boolean} Use panTo instead of setCenter. Default is true.\n     *  - *dragging* {Boolean} Call setCenter with dragging true.  Default is\n     *    false.\n     */\n    pan: function(dx, dy, options) {\n        options = OpenLayers.Util.applyDefaults(options, {\n            animate: true,\n            dragging: false\n        });\n        if (options.dragging) {\n            if (dx != 0 || dy != 0) {\n                this.moveByPx(dx, dy);\n            }\n        } else {\n            // getCenter\n            var centerPx = this.getViewPortPxFromLonLat(this.getCachedCenter());\n\n            // adjust\n            var newCenterPx = centerPx.add(dx, dy);\n\n            if (this.dragging || !newCenterPx.equals(centerPx)) {\n                var newCenterLonLat = this.getLonLatFromViewPortPx(newCenterPx);\n                if (options.animate) {\n                    this.panTo(newCenterLonLat);\n                } else {\n                    this.moveTo(newCenterLonLat);\n                    if(this.dragging) {\n                        this.dragging = false;\n                        this.events.triggerEvent(\"moveend\");\n                    }\n                }    \n            }\n        }        \n\n   },\n   \n   /** \n     * APIMethod: panTo\n     * Allows user to pan to a new lonlat.\n     * If the new lonlat is in the current extent the map will slide smoothly\n     * \n     * Parameters:\n     * lonlat - {<OpenLayers.LonLat>}\n     */\n    panTo: function(lonlat) {\n        if (this.panTween && this.getExtent().scale(this.panRatio).containsLonLat(lonlat)) {\n            var center = this.getCachedCenter();\n\n            // center will not change, don't do nothing\n            if (lonlat.equals(center)) {\n                return;\n            }\n\n            var from = this.getPixelFromLonLat(center);\n            var to = this.getPixelFromLonLat(lonlat);\n            var vector = { x: to.x - from.x, y: to.y - from.y };\n            var last = { x: 0, y: 0 };\n\n            this.panTween.start( { x: 0, y: 0 }, vector, this.panDuration, {\n                callbacks: {\n                    eachStep: OpenLayers.Function.bind(function(px) {\n                        var x = px.x - last.x,\n                            y = px.y - last.y;\n                        this.moveByPx(x, y);\n                        last.x = Math.round(px.x);\n                        last.y = Math.round(px.y);\n                    }, this),\n                    done: OpenLayers.Function.bind(function(px) {\n                        this.moveTo(lonlat);\n                        this.dragging = false;\n                        this.events.triggerEvent(\"moveend\");\n                    }, this)\n                }\n            });\n        } else {\n            this.setCenter(lonlat);\n        }\n    },\n\n    /**\n     * APIMethod: setCenter\n     * Set the map center (and optionally, the zoom level).\n     * \n     * Parameters:\n     * lonlat - {<OpenLayers.LonLat>|Array} The new center location.\n     *     If provided as array, the first value is the x coordinate,\n     *     and the 2nd value is the y coordinate.\n     * zoom - {Integer} Optional zoom level.\n     * dragging - {Boolean} Specifies whether or not to trigger \n     *                      movestart/end events\n     * forceZoomChange - {Boolean} Specifies whether or not to trigger zoom \n     *                             change events (needed on baseLayer change)\n     *\n     * TBD: reconsider forceZoomChange in 3.0\n     */\n    setCenter: function(lonlat, zoom, dragging, forceZoomChange) {\n        if (this.panTween) {\n            this.panTween.stop();\n        }\n        if (this.zoomTween) {\n            this.zoomTween.stop();\n        }            \n        this.moveTo(lonlat, zoom, {\n            'dragging': dragging,\n            'forceZoomChange': forceZoomChange\n        });\n    },\n    \n    /** \n     * Method: moveByPx\n     * Drag the map by pixels.\n     *\n     * Parameters:\n     * dx - {Number}\n     * dy - {Number}\n     */\n    moveByPx: function(dx, dy) {\n        var hw = this.size.w / 2;\n        var hh = this.size.h / 2;\n        var x = hw + dx;\n        var y = hh + dy;\n        var wrapDateLine = this.baseLayer.wrapDateLine;\n        var xRestriction = 0;\n        var yRestriction = 0;\n        if (this.restrictedExtent) {\n            xRestriction = hw;\n            yRestriction = hh;\n            // wrapping the date line makes no sense for restricted extents\n            wrapDateLine = false;\n        }\n        dx = wrapDateLine ||\n                    x <= this.maxPx.x - xRestriction &&\n                    x >= this.minPx.x + xRestriction ? Math.round(dx) : 0;\n        dy = y <= this.maxPx.y - yRestriction &&\n                    y >= this.minPx.y + yRestriction ? Math.round(dy) : 0;\n        if (dx || dy) {\n            if (!this.dragging) {\n                this.dragging = true;\n                this.events.triggerEvent(\"movestart\");\n            }\n            this.center = null;\n            if (dx) {\n                this.layerContainerOriginPx.x -= dx;\n                this.minPx.x -= dx;\n                this.maxPx.x -= dx;\n            }\n            if (dy) {\n                this.layerContainerOriginPx.y -= dy;\n                this.minPx.y -= dy;\n                this.maxPx.y -= dy;\n            }\n            this.applyTransform();\n            var layer, i, len;\n            for (i=0, len=this.layers.length; i<len; ++i) {\n                layer = this.layers[i];\n                if (layer.visibility &&\n                    (layer === this.baseLayer || layer.inRange)) {\n                    layer.moveByPx(dx, dy);\n                    layer.events.triggerEvent(\"move\");\n                }\n            }\n            this.events.triggerEvent(\"move\");\n        }\n    },\n    \n    /**\n     * Method: adjustZoom\n     *\n     * Parameters:\n     * zoom - {Number} The zoom level to adjust\n     *\n     * Returns:\n     * {Integer} Adjusted zoom level that shows a map not wider than its\n     * <baseLayer>'s maxExtent.\n     */\n    adjustZoom: function(zoom) {\n        if (this.baseLayer && this.baseLayer.wrapDateLine) {\n            var resolution, resolutions = this.baseLayer.resolutions,\n                maxResolution = this.getMaxExtent().getWidth() / this.size.w;\n            if (this.getResolutionForZoom(zoom) > maxResolution) {\n                if (this.fractionalZoom) {\n                    zoom = this.getZoomForResolution(maxResolution);\n                } else {\n                    for (var i=zoom|0, ii=resolutions.length; i<ii; ++i) {\n                        if (resolutions[i] <= maxResolution) {\n                            zoom = i;\n                            break;\n                        }\n                    }\n                } \n            }\n        }\n        return zoom;\n    },\n    \n    /**\n     * APIMethod: getMinZoom\n     * Returns the minimum zoom level for the current map view. If the base\n     * layer is configured with <wrapDateLine> set to true, this will be the\n     * first zoom level that shows no more than one world width in the current\n     * map viewport. Components that rely on this value (e.g. zoom sliders)\n     * should also listen to the map's \"updatesize\" event and call this method\n     * in the \"updatesize\" listener.\n     *\n     * Returns:\n     * {Number} Minimum zoom level that shows a map not wider than its\n     * <baseLayer>'s maxExtent. This is an Integer value, unless the map is\n     * configured with <fractionalZoom> set to true.\n     */\n    getMinZoom: function() {\n        return this.adjustZoom(0);\n    },\n\n    /**\n     * Method: moveTo\n     *\n     * Parameters:\n     * lonlat - {<OpenLayers.LonLat>}\n     * zoom - {Integer}\n     * options - {Object}\n     */\n    moveTo: function(lonlat, zoom, options) {\n        if (lonlat != null && !(lonlat instanceof OpenLayers.LonLat)) {\n            lonlat = new OpenLayers.LonLat(lonlat);\n        }\n        if (!options) { \n            options = {};\n        }\n        if (zoom != null) {\n            zoom = parseFloat(zoom);\n            if (!this.fractionalZoom) {\n                zoom = Math.round(zoom);\n            }\n        }\n        var requestedZoom = zoom;\n        zoom = this.adjustZoom(zoom);\n        if (zoom !== requestedZoom) {\n            // zoom was adjusted, so keep old lonlat to avoid panning\n            lonlat = this.getCenter();\n        }\n        // dragging is false by default\n        var dragging = options.dragging || this.dragging;\n        // forceZoomChange is false by default\n        var forceZoomChange = options.forceZoomChange;\n\n        if (!this.getCachedCenter() && !this.isValidLonLat(lonlat)) {\n            lonlat = this.maxExtent.getCenterLonLat();\n            this.center = lonlat.clone();\n        }\n\n        if(this.restrictedExtent != null) {\n            // In 3.0, decide if we want to change interpretation of maxExtent.\n            if(lonlat == null) { \n                lonlat = this.center; \n            }\n            if(zoom == null) { \n                zoom = this.getZoom(); \n            }\n            var resolution = this.getResolutionForZoom(zoom);\n            var extent = this.calculateBounds(lonlat, resolution); \n            if(!this.restrictedExtent.containsBounds(extent)) {\n                var maxCenter = this.restrictedExtent.getCenterLonLat(); \n                if(extent.getWidth() > this.restrictedExtent.getWidth()) { \n                    lonlat = new OpenLayers.LonLat(maxCenter.lon, lonlat.lat); \n                } else if(extent.left < this.restrictedExtent.left) {\n                    lonlat = lonlat.add(this.restrictedExtent.left -\n                                        extent.left, 0); \n                } else if(extent.right > this.restrictedExtent.right) { \n                    lonlat = lonlat.add(this.restrictedExtent.right -\n                                        extent.right, 0); \n                } \n                if(extent.getHeight() > this.restrictedExtent.getHeight()) { \n                    lonlat = new OpenLayers.LonLat(lonlat.lon, maxCenter.lat); \n                } else if(extent.bottom < this.restrictedExtent.bottom) { \n                    lonlat = lonlat.add(0, this.restrictedExtent.bottom -\n                                        extent.bottom); \n                } \n                else if(extent.top > this.restrictedExtent.top) { \n                    lonlat = lonlat.add(0, this.restrictedExtent.top -\n                                        extent.top); \n                } \n            }\n        }\n        \n        var zoomChanged = forceZoomChange || (\n                            (this.isValidZoomLevel(zoom)) && \n                            (zoom != this.getZoom()) );\n\n        var centerChanged = (this.isValidLonLat(lonlat)) && \n                            (!lonlat.equals(this.center));\n\n        // if neither center nor zoom will change, no need to do anything\n        if (zoomChanged || centerChanged || dragging) {\n            dragging || this.events.triggerEvent(\"movestart\", {\n                zoomChanged: zoomChanged\n            });\n\n            if (centerChanged) {\n                if (!zoomChanged && this.center) { \n                    // if zoom hasn't changed, just slide layerContainer\n                    //  (must be done before setting this.center to new value)\n                    this.centerLayerContainer(lonlat);\n                }\n                this.center = lonlat.clone();\n            }\n\n            var res = zoomChanged ?\n                this.getResolutionForZoom(zoom) : this.getResolution();\n            // (re)set the layerContainerDiv's location\n            if (zoomChanged || this.layerContainerOrigin == null) {\n                this.layerContainerOrigin = this.getCachedCenter();\n                this.layerContainerOriginPx.x = 0;\n                this.layerContainerOriginPx.y = 0;\n                this.applyTransform();\n                var maxExtent = this.getMaxExtent({restricted: true});\n                var maxExtentCenter = maxExtent.getCenterLonLat();\n                var lonDelta = this.center.lon - maxExtentCenter.lon;\n                var latDelta = maxExtentCenter.lat - this.center.lat;\n                var extentWidth = Math.round(maxExtent.getWidth() / res);\n                var extentHeight = Math.round(maxExtent.getHeight() / res);\n                this.minPx = {\n                    x: (this.size.w - extentWidth) / 2 - lonDelta / res,\n                    y: (this.size.h - extentHeight) / 2 - latDelta / res\n                };\n                this.maxPx = {\n                    x: this.minPx.x + Math.round(maxExtent.getWidth() / res),\n                    y: this.minPx.y + Math.round(maxExtent.getHeight() / res)\n                };\n            }\n\n            if (zoomChanged) {\n                this.zoom = zoom;\n                this.resolution = res;\n            }    \n            \n            var bounds = this.getExtent();\n            \n            //send the move call to the baselayer and all the overlays    \n\n            if(this.baseLayer.visibility) {\n                this.baseLayer.moveTo(bounds, zoomChanged, options.dragging);\n                options.dragging || this.baseLayer.events.triggerEvent(\n                    \"moveend\", {zoomChanged: zoomChanged}\n                );\n            }\n            \n            bounds = this.baseLayer.getExtent();\n            \n            for (var i=this.layers.length-1; i>=0; --i) {\n                var layer = this.layers[i];\n                if (layer !== this.baseLayer && !layer.isBaseLayer) {\n                    var inRange = layer.calculateInRange();\n                    if (layer.inRange != inRange) {\n                        // the inRange property has changed. If the layer is\n                        // no longer in range, we turn it off right away. If\n                        // the layer is no longer out of range, the moveTo\n                        // call below will turn on the layer.\n                        layer.inRange = inRange;\n                        if (!inRange) {\n                            layer.display(false);\n                        }\n                        this.events.triggerEvent(\"changelayer\", {\n                            layer: layer, property: \"visibility\"\n                        });\n                    }\n                    if (inRange && layer.visibility) {\n                        layer.moveTo(bounds, zoomChanged, options.dragging);\n                        options.dragging || layer.events.triggerEvent(\n                            \"moveend\", {zoomChanged: zoomChanged}\n                        );\n                    }\n                }                \n            }\n            \n            this.events.triggerEvent(\"move\");\n            dragging || this.events.triggerEvent(\"moveend\");\n\n            if (zoomChanged) {\n                //redraw popups\n                for (var i=0, len=this.popups.length; i<len; i++) {\n                    this.popups[i].updatePosition();\n                }\n                this.events.triggerEvent(\"zoomend\");\n            }\n        }\n    },\n\n    /** \n     * Method: centerLayerContainer\n     * This function takes care to recenter the layerContainerDiv.\n     * \n     * Parameters:\n     * lonlat - {<OpenLayers.LonLat>}\n     */\n    centerLayerContainer: function (lonlat) {\n        var originPx = this.getViewPortPxFromLonLat(this.layerContainerOrigin);\n        var newPx = this.getViewPortPxFromLonLat(lonlat);\n\n        if ((originPx != null) && (newPx != null)) {\n            var oldLeft = this.layerContainerOriginPx.x;\n            var oldTop = this.layerContainerOriginPx.y;\n            var newLeft = Math.round(originPx.x - newPx.x);\n            var newTop = Math.round(originPx.y - newPx.y);\n            this.applyTransform(\n                (this.layerContainerOriginPx.x = newLeft),\n                (this.layerContainerOriginPx.y = newTop));\n            var dx = oldLeft - newLeft;\n            var dy = oldTop - newTop;\n            this.minPx.x -= dx;\n            this.maxPx.x -= dx;\n            this.minPx.y -= dy;\n            this.maxPx.y -= dy;\n        }        \n    },\n\n    /**\n     * Method: isValidZoomLevel\n     * \n     * Parameters:\n     * zoomLevel - {Integer}\n     * \n     * Returns:\n     * {Boolean} Whether or not the zoom level passed in is non-null and \n     *           within the min/max range of zoom levels.\n     */\n    isValidZoomLevel: function(zoomLevel) {\n        return ( (zoomLevel != null) &&\n                 (zoomLevel >= 0) && \n                 (zoomLevel < this.getNumZoomLevels()) );\n    },\n    \n    /**\n     * Method: isValidLonLat\n     * \n     * Parameters:\n     * lonlat - {<OpenLayers.LonLat>}\n     * \n     * Returns:\n     * {Boolean} Whether or not the lonlat passed in is non-null and within\n     *           the maxExtent bounds\n     */\n    isValidLonLat: function(lonlat) {\n        var valid = false;\n        if (lonlat != null) {\n            var maxExtent = this.getMaxExtent();\n            var worldBounds = this.baseLayer.wrapDateLine && maxExtent;\n            valid = maxExtent.containsLonLat(lonlat, {worldBounds: worldBounds});\n        }\n        return valid;\n    },\n\n  /********************************************************/\n  /*                                                      */\n  /*                 Layer Options                        */\n  /*                                                      */\n  /*    Accessor functions to Layer Options parameters    */\n  /*                                                      */\n  /********************************************************/\n    \n    /**\n     * APIMethod: getProjection\n     * This method returns a string representing the projection. In \n     *     the case of projection support, this will be the srsCode which\n     *     is loaded -- otherwise it will simply be the string value that\n     *     was passed to the projection at startup.\n     *\n     * FIXME: In 3.0, we will remove getProjectionObject, and instead\n     *     return a Projection object from this function. \n     * \n     * Returns:\n     * {String} The Projection string from the base layer or null. \n     */\n    getProjection: function() {\n        var projection = this.getProjectionObject();\n        return projection ? projection.getCode() : null;\n    },\n    \n    /**\n     * APIMethod: getProjectionObject\n     * Returns the projection obect from the baselayer.\n     *\n     * Returns:\n     * {<OpenLayers.Projection>} The Projection of the base layer.\n     */\n    getProjectionObject: function() {\n        var projection = null;\n        if (this.baseLayer != null) {\n            projection = this.baseLayer.projection;\n        }\n        return projection;\n    },\n    \n    /**\n     * APIMethod: getMaxResolution\n     * \n     * Returns:\n     * {String} The Map's Maximum Resolution\n     */\n    getMaxResolution: function() {\n        var maxResolution = null;\n        if (this.baseLayer != null) {\n            maxResolution = this.baseLayer.maxResolution;\n        }\n        return maxResolution;\n    },\n        \n    /**\n     * APIMethod: getMaxExtent\n     *\n     * Parameters:\n     * options - {Object} \n     * \n     * Allowed Options:\n     * restricted - {Boolean} If true, returns restricted extent (if it is \n     *     available.)\n     *\n     * Returns:\n     * {<OpenLayers.Bounds>} The maxExtent property as set on the current \n     *     baselayer, unless the 'restricted' option is set, in which case\n     *     the 'restrictedExtent' option from the map is returned (if it\n     *     is set).\n     */\n    getMaxExtent: function (options) {\n        var maxExtent = null;\n        if(options && options.restricted && this.restrictedExtent){\n            maxExtent = this.restrictedExtent;\n        } else if (this.baseLayer != null) {\n            maxExtent = this.baseLayer.maxExtent;\n        }        \n        return maxExtent;\n    },\n    \n    /**\n     * APIMethod: getNumZoomLevels\n     * \n     * Returns:\n     * {Integer} The total number of zoom levels that can be displayed by the \n     *           current baseLayer.\n     */\n    getNumZoomLevels: function() {\n        var numZoomLevels = null;\n        if (this.baseLayer != null) {\n            numZoomLevels = this.baseLayer.numZoomLevels;\n        }\n        return numZoomLevels;\n    },\n\n  /********************************************************/\n  /*                                                      */\n  /*                 Baselayer Functions                  */\n  /*                                                      */\n  /*    The following functions, all publicly exposed     */\n  /*       in the API?, are all merely wrappers to the    */\n  /*       the same calls on whatever layer is set as     */\n  /*                the current base layer                */\n  /*                                                      */\n  /********************************************************/\n\n    /**\n     * APIMethod: getExtent\n     * \n     * Returns:\n     * {<OpenLayers.Bounds>} A Bounds object which represents the lon/lat \n     *                       bounds of the current viewPort. \n     *                       If no baselayer is set, returns null.\n     */\n    getExtent: function () {\n        var extent = null;\n        if (this.baseLayer != null) {\n            extent = this.baseLayer.getExtent();\n        }\n        return extent;\n    },\n\n    /**\n     * APIMethod: getResolution\n     * \n     * Returns:\n     * {Float} The current resolution of the map. \n     *         If no baselayer is set, returns null.\n     */\n    getResolution: function () {\n        var resolution = null;\n        if (this.baseLayer != null) {\n            resolution = this.baseLayer.getResolution();\n        } else if(this.allOverlays === true && this.layers.length > 0) {\n            // while adding the 1st layer to the map in allOverlays mode,\n            // this.baseLayer is not set yet when we need the resolution\n            // for calculateInRange.\n            resolution = this.layers[0].getResolution();\n        }\n        return resolution;\n    },\n\n    /**\n     * APIMethod: getUnits\n     * \n     * Returns:\n     * {Float} The current units of the map. \n     *         If no baselayer is set, returns null.\n     */\n    getUnits: function () {\n        var units = null;\n        if (this.baseLayer != null) {\n            units = this.baseLayer.units;\n        }\n        return units;\n    },\n\n     /**\n      * APIMethod: getScale\n      * \n      * Returns:\n      * {Float} The current scale denominator of the map. \n      *         If no baselayer is set, returns null.\n      */\n    getScale: function () {\n        var scale = null;\n        if (this.baseLayer != null) {\n            var res = this.getResolution();\n            var units = this.baseLayer.units;\n            scale = OpenLayers.Util.getScaleFromResolution(res, units);\n        }\n        return scale;\n    },\n\n\n    /**\n     * APIMethod: getZoomForExtent\n     * \n     * Parameters: \n     * bounds - {<OpenLayers.Bounds>}\n     * closest - {Boolean} Find the zoom level that most closely fits the \n     *     specified bounds. Note that this may result in a zoom that does \n     *     not exactly contain the entire extent.\n     *     Default is false.\n     * \n     * Returns:\n     * {Integer} A suitable zoom level for the specified bounds.\n     *           If no baselayer is set, returns null.\n     */\n    getZoomForExtent: function (bounds, closest) {\n        var zoom = null;\n        if (this.baseLayer != null) {\n            zoom = this.baseLayer.getZoomForExtent(bounds, closest);\n        }\n        return zoom;\n    },\n\n    /**\n     * APIMethod: getResolutionForZoom\n     * \n     * Parameters:\n     * zoom - {Float}\n     * \n     * Returns:\n     * {Float} A suitable resolution for the specified zoom.  If no baselayer\n     *     is set, returns null.\n     */\n    getResolutionForZoom: function(zoom) {\n        var resolution = null;\n        if(this.baseLayer) {\n            resolution = this.baseLayer.getResolutionForZoom(zoom);\n        }\n        return resolution;\n    },\n\n    /**\n     * APIMethod: getZoomForResolution\n     * \n     * Parameters:\n     * resolution - {Float}\n     * closest - {Boolean} Find the zoom level that corresponds to the absolute \n     *     closest resolution, which may result in a zoom whose corresponding\n     *     resolution is actually smaller than we would have desired (if this\n     *     is being called from a getZoomForExtent() call, then this means that\n     *     the returned zoom index might not actually contain the entire \n     *     extent specified... but it'll be close).\n     *     Default is false.\n     * \n     * Returns:\n     * {Integer} A suitable zoom level for the specified resolution.\n     *           If no baselayer is set, returns null.\n     */\n    getZoomForResolution: function(resolution, closest) {\n        var zoom = null;\n        if (this.baseLayer != null) {\n            zoom = this.baseLayer.getZoomForResolution(resolution, closest);\n        }\n        return zoom;\n    },\n\n  /********************************************************/\n  /*                                                      */\n  /*                  Zooming Functions                   */\n  /*                                                      */\n  /*    The following functions, all publicly exposed     */\n  /*       in the API, are all merely wrappers to the     */\n  /*               the setCenter() function               */\n  /*                                                      */\n  /********************************************************/\n  \n    /** \n     * APIMethod: zoomTo\n     * Zoom to a specific zoom level. Zooming will be animated unless the map\n     * is configured with {zoomMethod: null}. To zoom without animation, use\n     * <setCenter> without a lonlat argument.\n     * \n     * Parameters:\n     * zoom - {Integer}\n     */\n    zoomTo: function(zoom, xy) {\n        // non-API arguments:\n        // xy - {<OpenLayers.Pixel>} optional zoom origin\n        \n        var map = this;\n        if (map.isValidZoomLevel(zoom)) {\n            if (map.baseLayer.wrapDateLine) {\n                zoom = map.adjustZoom(zoom);\n            }\n            var center = xy ?\n                map.getZoomTargetCenter(xy, map.getResolutionForZoom(zoom)) :\n                map.getCenter();\n            if (center) {\n                map.events.triggerEvent('zoomstart', {\n                    center: center,\n                    zoom: zoom\n                });\n            }\n            if (map.zoomTween) {\n                map.zoomTween.stop();\n                var currentRes = map.getResolution(),\n                    targetRes = map.getResolutionForZoom(zoom),\n                    start = {scale: 1},\n                    end = {scale: currentRes / targetRes};\n                if (!xy) {\n                    var size = map.getSize();\n                    xy = {x: size.w / 2, y: size.h / 2};\n                }\n                map.zoomTween.start(start, end, map.zoomDuration, {\n                    minFrameRate: 50, // don't spend much time zooming\n                    callbacks: {\n                        eachStep: function(data) {\n                            var containerOrigin = map.layerContainerOriginPx,\n                                scale = data.scale,\n                                dx = ((scale - 1) * (containerOrigin.x - xy.x)) | 0,\n                                dy = ((scale - 1) * (containerOrigin.y - xy.y)) | 0;\n                            map.applyTransform(containerOrigin.x + dx, containerOrigin.y + dy, scale);\n                        },\n                        done: function(data) {\n                            map.applyTransform();\n                            var resolution = map.getResolution() / data.scale,\n                                newZoom = map.getZoomForResolution(resolution, true),\n                                newCenter = data.scale === 1 ? center :\n                                        map.getZoomTargetCenter(xy, resolution);\n                            map.moveTo(newCenter, newZoom);\n                        }\n                    }\n                });\n            } else {\n                map.setCenter(center, zoom);\n            }\n        }\n    },\n        \n    /**\n     * APIMethod: zoomIn\n     * \n     */\n    zoomIn: function() {\n        if (this.zoomTween) {\n            this.zoomTween.stop();\n        }\n        this.zoomTo(this.getZoom() + 1);\n    },\n    \n    /**\n     * APIMethod: zoomOut\n     * \n     */\n    zoomOut: function() {\n        if (this.zoomTween) {\n            this.zoomTween.stop();\n        }\n        this.zoomTo(this.getZoom() - 1);\n    },\n\n    /**\n     * APIMethod: zoomToExtent\n     * Zoom to the passed in bounds, recenter\n     * \n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>|Array} If provided as an array, the array\n     *     should consist of four values (left, bottom, right, top).\n     * closest - {Boolean} Find the zoom level that most closely fits the \n     *     specified bounds. Note that this may result in a zoom that does \n     *     not exactly contain the entire extent.\n     *     Default is false.\n     * \n     */\n    zoomToExtent: function(bounds, closest) {\n        if (!(bounds instanceof OpenLayers.Bounds)) {\n            bounds = new OpenLayers.Bounds(bounds);\n        }\n        var center = bounds.getCenterLonLat();\n        if (this.baseLayer.wrapDateLine) {\n            var maxExtent = this.getMaxExtent();\n\n            //fix straddling bounds (in the case of a bbox that straddles the \n            // dateline, it's left and right boundaries will appear backwards. \n            // we fix this by allowing a right value that is greater than the\n            // max value at the dateline -- this allows us to pass a valid \n            // bounds to calculate zoom)\n            //\n            bounds = bounds.clone();\n            while (bounds.right < bounds.left) {\n                bounds.right += maxExtent.getWidth();\n            }\n            //if the bounds was straddling (see above), then the center point \n            // we got from it was wrong. So we take our new bounds and ask it\n            // for the center.\n            //\n            center = bounds.getCenterLonLat().wrapDateLine(maxExtent);\n        }\n        this.setCenter(center, this.getZoomForExtent(bounds, closest));\n    },\n\n    /** \n     * APIMethod: zoomToMaxExtent\n     * Zoom to the full extent and recenter.\n     *\n     * Parameters:\n     * options - {Object}\n     * \n     * Allowed Options:\n     * restricted - {Boolean} True to zoom to restricted extent if it is \n     *     set. Defaults to true.\n     */\n    zoomToMaxExtent: function(options) {\n        //restricted is true by default\n        var restricted = (options) ? options.restricted : true;\n\n        var maxExtent = this.getMaxExtent({\n            'restricted': restricted \n        });\n        this.zoomToExtent(maxExtent);\n    },\n\n    /** \n     * APIMethod: zoomToScale\n     * Zoom to a specified scale \n     * \n     * Parameters:\n     * scale - {float}\n     * closest - {Boolean} Find the zoom level that most closely fits the \n     *     specified scale. Note that this may result in a zoom that does \n     *     not exactly contain the entire extent.\n     *     Default is false.\n     * \n     */\n    zoomToScale: function(scale, closest) {\n        var res = OpenLayers.Util.getResolutionFromScale(scale, \n                                                         this.baseLayer.units);\n\n        var halfWDeg = (this.size.w * res) / 2;\n        var halfHDeg = (this.size.h * res) / 2;\n        var center = this.getCachedCenter();\n\n        var extent = new OpenLayers.Bounds(center.lon - halfWDeg,\n                                           center.lat - halfHDeg,\n                                           center.lon + halfWDeg,\n                                           center.lat + halfHDeg);\n        this.zoomToExtent(extent, closest);\n    },\n    \n  /********************************************************/\n  /*                                                      */\n  /*             Translation Functions                    */\n  /*                                                      */\n  /*      The following functions translate between       */\n  /*           LonLat, LayerPx, and ViewPortPx            */\n  /*                                                      */\n  /********************************************************/\n      \n  //\n  // TRANSLATION: LonLat <-> ViewPortPx\n  //\n\n    /**\n     * Method: getLonLatFromViewPortPx\n     * \n     * Parameters:\n     * viewPortPx - {<OpenLayers.Pixel>|Object} An OpenLayers.Pixel or\n     *                                          an object with a 'x'\n     *                                          and 'y' properties.\n     * \n     * Returns:\n     * {<OpenLayers.LonLat>} An OpenLayers.LonLat which is the passed-in view \n     *                       port <OpenLayers.Pixel>, translated into lon/lat\n     *                       by the current base layer.\n     */\n    getLonLatFromViewPortPx: function (viewPortPx) {\n        var lonlat = null; \n        if (this.baseLayer != null) {\n            lonlat = this.baseLayer.getLonLatFromViewPortPx(viewPortPx);\n        }\n        return lonlat;\n    },\n\n    /**\n     * APIMethod: getViewPortPxFromLonLat\n     * \n     * Parameters:\n     * lonlat - {<OpenLayers.LonLat>}\n     * \n     * Returns:\n     * {<OpenLayers.Pixel>} An OpenLayers.Pixel which is the passed-in \n     *                      <OpenLayers.LonLat>, translated into view port \n     *                      pixels by the current base layer.\n     */\n    getViewPortPxFromLonLat: function (lonlat) {\n        var px = null; \n        if (this.baseLayer != null) {\n            px = this.baseLayer.getViewPortPxFromLonLat(lonlat);\n        }\n        return px;\n    },\n\n    /**\n     * Method: getZoomTargetCenter\n     *\n     * Parameters:\n     * xy - {<OpenLayers.Pixel>} The zoom origin pixel location on the screen\n     * resolution - {Float} The resolution we want to get the center for\n     *\n     * Returns:\n     * {<OpenLayers.LonLat>} The location of the map center after the\n     *     transformation described by the origin xy and the target resolution.\n     */\n    getZoomTargetCenter: function (xy, resolution) {\n        var lonlat = null,\n            size = this.getSize(),\n            deltaX  = size.w/2 - xy.x,\n            deltaY  = xy.y - size.h/2,\n            zoomPoint = this.getLonLatFromPixel(xy);\n        if (zoomPoint) {\n            lonlat = new OpenLayers.LonLat(\n                zoomPoint.lon + deltaX * resolution,\n                zoomPoint.lat + deltaY * resolution\n            );\n        }\n        return lonlat;\n    },\n        \n  //\n  // CONVENIENCE TRANSLATION FUNCTIONS FOR API\n  //\n\n    /**\n     * APIMethod: getLonLatFromPixel\n     * \n     * Parameters:\n     * px - {<OpenLayers.Pixel>|Object} An OpenLayers.Pixel or an object with\n     *                                  a 'x' and 'y' properties.\n     *\n     * Returns:\n     * {<OpenLayers.LonLat>} An OpenLayers.LonLat corresponding to the given\n     *                       OpenLayers.Pixel, translated into lon/lat by the \n     *                       current base layer\n     */\n    getLonLatFromPixel: function (px) {\n        return this.getLonLatFromViewPortPx(px);\n    },\n\n    /**\n     * APIMethod: getPixelFromLonLat\n     * Returns a pixel location given a map location.  The map location is\n     *     translated to an integer pixel location (in viewport pixel\n     *     coordinates) by the current base layer.\n     * \n     * Parameters:\n     * lonlat - {<OpenLayers.LonLat>} A map location.\n     * \n     * Returns: \n     * {<OpenLayers.Pixel>} An OpenLayers.Pixel corresponding to the \n     *     <OpenLayers.LonLat> translated into view port pixels by the current\n     *     base layer.\n     */\n    getPixelFromLonLat: function (lonlat) {\n        var px = this.getViewPortPxFromLonLat(lonlat);\n        px.x = Math.round(px.x);\n        px.y = Math.round(px.y);\n        return px;\n    },\n    \n    /**\n     * Method: getGeodesicPixelSize\n     * \n     * Parameters:\n     * px - {<OpenLayers.Pixel>} The pixel to get the geodesic length for. If\n     *     not provided, the center pixel of the map viewport will be used.\n     * \n     * Returns:\n     * {<OpenLayers.Size>} The geodesic size of the pixel in kilometers.\n     */\n    getGeodesicPixelSize: function(px) {\n        var lonlat = px ? this.getLonLatFromPixel(px) : (\n            this.getCachedCenter() || new OpenLayers.LonLat(0, 0));\n        var res = this.getResolution();\n        var left = lonlat.add(-res / 2, 0);\n        var right = lonlat.add(res / 2, 0);\n        var bottom = lonlat.add(0, -res / 2);\n        var top = lonlat.add(0, res / 2);\n        var dest = new OpenLayers.Projection(\"EPSG:4326\");\n        var source = this.getProjectionObject() || dest;\n        if(!source.equals(dest)) {\n            left.transform(source, dest);\n            right.transform(source, dest);\n            bottom.transform(source, dest);\n            top.transform(source, dest);\n        }\n        \n        return new OpenLayers.Size(\n            OpenLayers.Util.distVincenty(left, right),\n            OpenLayers.Util.distVincenty(bottom, top)\n        );\n    },\n\n\n\n  //\n  // TRANSLATION: ViewPortPx <-> LayerPx\n  //\n\n    /**\n     * APIMethod: getViewPortPxFromLayerPx\n     * \n     * Parameters:\n     * layerPx - {<OpenLayers.Pixel>}\n     * \n     * Returns:\n     * {<OpenLayers.Pixel>} Layer Pixel translated into ViewPort Pixel \n     *                      coordinates\n     */\n    getViewPortPxFromLayerPx:function(layerPx) {\n        var viewPortPx = null;\n        if (layerPx != null) {\n            var dX = this.layerContainerOriginPx.x;\n            var dY = this.layerContainerOriginPx.y;\n            viewPortPx = layerPx.add(dX, dY);            \n        }\n        return viewPortPx;\n    },\n    \n    /**\n     * APIMethod: getLayerPxFromViewPortPx\n     * \n     * Parameters:\n     * viewPortPx - {<OpenLayers.Pixel>}\n     * \n     * Returns:\n     * {<OpenLayers.Pixel>} ViewPort Pixel translated into Layer Pixel \n     *                      coordinates\n     */\n    getLayerPxFromViewPortPx:function(viewPortPx) {\n        var layerPx = null;\n        if (viewPortPx != null) {\n            var dX = -this.layerContainerOriginPx.x;\n            var dY = -this.layerContainerOriginPx.y;\n            layerPx = viewPortPx.add(dX, dY);\n            if (isNaN(layerPx.x) || isNaN(layerPx.y)) {\n                layerPx = null;\n            }\n        }\n        return layerPx;\n    },\n    \n  //\n  // TRANSLATION: LonLat <-> LayerPx\n  //\n\n    /**\n     * Method: getLonLatFromLayerPx\n     * \n     * Parameters:\n     * px - {<OpenLayers.Pixel>}\n     *\n     * Returns:\n     * {<OpenLayers.LonLat>}\n     */\n    getLonLatFromLayerPx: function (px) {\n       //adjust for displacement of layerContainerDiv\n       px = this.getViewPortPxFromLayerPx(px);\n       return this.getLonLatFromViewPortPx(px);         \n    },\n    \n    /**\n     * APIMethod: getLayerPxFromLonLat\n     * \n     * Parameters:\n     * lonlat - {<OpenLayers.LonLat>} lonlat\n     *\n     * Returns:\n     * {<OpenLayers.Pixel>} An OpenLayers.Pixel which is the passed-in \n     *                      <OpenLayers.LonLat>, translated into layer pixels \n     *                      by the current base layer\n     */\n    getLayerPxFromLonLat: function (lonlat) {\n       //adjust for displacement of layerContainerDiv\n       var px = this.getPixelFromLonLat(lonlat);\n       return this.getLayerPxFromViewPortPx(px);         \n    },\n\n    /**\n     * Method: applyTransform\n     * Applies the given transform to the <layerContainerDiv>. This method has\n     * a 2-stage fallback from translate3d/scale3d via translate/scale to plain\n     * style.left/style.top, in which case no scaling is supported.\n     *\n     * Parameters:\n     * x - {Number} x parameter for the translation. Defaults to the x value of\n     *     the map's <layerContainerOriginPx>\n     * y - {Number} y parameter for the translation. Defaults to the y value of\n     *     the map's <layerContainerOriginPx>\n     * scale - {Number} scale. Defaults to 1 if not provided.\n     */\n     applyTransform: function(x, y, scale) {\n         scale = scale || 1;\n         var origin = this.layerContainerOriginPx,\n             needTransform = scale !== 1;\n         x = x || origin.x;\n         y = y || origin.y;\n            \n         var style = this.layerContainerDiv.style,\n             transform = this.applyTransform.transform,\n             template = this.applyTransform.template;\n        \n         if (transform === undefined) {\n             transform = OpenLayers.Util.vendorPrefix.style('transform');\n             this.applyTransform.transform = transform;\n             if (transform) {\n                 // Try translate3d, but only if the viewPortDiv has a transform\n                 // defined in a stylesheet\n                 var computedStyle = OpenLayers.Element.getStyle(this.viewPortDiv,\n                     OpenLayers.Util.vendorPrefix.css('transform'));\n                 if (!computedStyle || computedStyle !== 'none') {\n                     template = ['translate3d(', ',0) ', 'scale3d(', ',1)'];\n                     style[transform] = [template[0], '0,0', template[1]].join('');\n                 }\n                 // If no transform is defined in the stylesheet or translate3d\n                 // does not stick, use translate and scale\n                 if (!template || !~style[transform].indexOf(template[0])) {\n                     template = ['translate(', ') ', 'scale(', ')'];\n                 }\n                 this.applyTransform.template = template;\n             }\n         }\n         \n         // If we do 3d transforms, we always want to use them. If we do 2d\n         // transforms, we only use them when we need to.\n         if (transform !== null && (template[0] === 'translate3d(' || needTransform === true)) {\n             // Our 2d transforms are combined with style.left and style.top, so\n             // adjust x and y values and set the origin as left and top\n             if (needTransform === true && template[0] === 'translate(') {\n                 x -= origin.x;\n                 y -= origin.y;\n                 style.left = origin.x + 'px';\n                 style.top = origin.y + 'px';\n             }\n             style[transform] = [\n                 template[0], x, 'px,', y, 'px', template[1],\n                 template[2], scale, ',', scale, template[3]\n             ].join('');\n         } else {\n             style.left = x + 'px';\n             style.top = y + 'px';\n             // We previously might have had needTransform, so remove transform\n             if (transform !== null) {\n                 style[transform] = '';\n             }\n         }\n     },\n    \n    CLASS_NAME: \"OpenLayers.Map\"\n});\n\n/**\n * Constant: TILE_WIDTH\n * {Integer} 256 Default tile width (unless otherwise specified)\n */\nOpenLayers.Map.TILE_WIDTH = 256;\n/**\n * Constant: TILE_HEIGHT\n * {Integer} 256 Default tile height (unless otherwise specified)\n */\nOpenLayers.Map.TILE_HEIGHT = 256;\n/* ======================================================================\n    OpenLayers/Layer.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/BaseTypes/Class.js\n * @requires OpenLayers/Map.js\n * @requires OpenLayers/Projection.js\n */\n\n/**\n * Class: OpenLayers.Layer\n */\nOpenLayers.Layer = OpenLayers.Class({\n\n    /**\n     * APIProperty: id\n     * {String}\n     */\n    id: null,\n\n    /** \n     * APIProperty: name\n     * {String}\n     */\n    name: null,\n\n    /** \n     * APIProperty: div\n     * {DOMElement}\n     */\n    div: null,\n\n    /**\n     * APIProperty: opacity\n     * {Float} The layer's opacity. Float number between 0.0 and 1.0. Default\n     * is 1.\n     */\n    opacity: 1,\n\n    /**\n     * APIProperty: alwaysInRange\n     * {Boolean} If a layer's display should not be scale-based, this should \n     *     be set to true. This will cause the layer, as an overlay, to always \n     *     be 'active', by always returning true from the calculateInRange() \n     *     function. \n     * \n     *     If not explicitly specified for a layer, its value will be \n     *     determined on startup in initResolutions() based on whether or not \n     *     any scale-specific properties have been set as options on the \n     *     layer. If no scale-specific options have been set on the layer, we \n     *     assume that it should always be in range.\n     * \n     *     See #987 for more info.\n     */\n    alwaysInRange: null,   \n\n    /**\n     * Constant: RESOLUTION_PROPERTIES\n     * {Array} The properties that are used for calculating resolutions\n     *     information.\n     */\n    RESOLUTION_PROPERTIES: [\n        'scales', 'resolutions',\n        'maxScale', 'minScale',\n        'maxResolution', 'minResolution',\n        'numZoomLevels', 'maxZoomLevel'\n    ],\n\n    /**\n     * APIProperty: events\n     * {<OpenLayers.Events>}\n     *\n     * Register a listener for a particular event with the following syntax:\n     * (code)\n     * layer.events.register(type, obj, listener);\n     * (end)\n     *\n     * Listeners will be called with a reference to an event object.  The\n     *     properties of this event depends on exactly what happened.\n     *\n     * All event objects have at least the following properties:\n     * object - {Object} A reference to layer.events.object.\n     * element - {DOMElement} A reference to layer.events.element.\n     *\n     * Supported map event types:\n     * loadstart - Triggered when layer loading starts.  When using a Vector \n     *     layer with a Fixed or BBOX strategy, the event object includes \n     *     a *filter* property holding the OpenLayers.Filter used when \n     *     calling read on the protocol.\n     * loadend - Triggered when layer loading ends.  When using a Vector layer\n     *     with a Fixed or BBOX strategy, the event object includes a \n     *     *response* property holding an OpenLayers.Protocol.Response object.\n     * visibilitychanged - Triggered when the layer's visibility property is\n     *     changed, e.g. by turning the layer on or off in the layer switcher.\n     *     Note that the actual visibility of the layer can also change if it\n     *     gets out of range (see <calculateInRange>). If you also want to catch\n     *     these cases, register for the map's 'changelayer' event instead.\n     * move - Triggered when layer moves (triggered with every mousemove\n     *     during a drag).\n     * moveend - Triggered when layer is done moving, object passed as\n     *     argument has a zoomChanged boolean property which tells that the\n     *     zoom has changed.\n     * added - Triggered after the layer is added to a map.  Listeners will\n     *     receive an object with a *map* property referencing the map and a\n     *     *layer* property referencing the layer.\n     * removed - Triggered after the layer is removed from the map.  Listeners\n     *     will receive an object with a *map* property referencing the map and\n     *     a *layer* property referencing the layer.\n     */\n    events: null,\n\n    /**\n     * APIProperty: map\n     * {<OpenLayers.Map>} This variable is set when the layer is added to \n     *     the map, via the accessor function setMap().\n     */\n    map: null,\n    \n    /**\n     * APIProperty: isBaseLayer\n     * {Boolean} Whether or not the layer is a base layer. This should be set \n     *     individually by all subclasses. Default is false\n     */\n    isBaseLayer: false,\n \n    /**\n     * Property: alpha\n     * {Boolean} The layer's images have an alpha channel.  Default is false.\n     */\n    alpha: false,\n\n    /** \n     * APIProperty: displayInLayerSwitcher\n     * {Boolean} Display the layer's name in the layer switcher.  Default is\n     *     true.\n     */\n    displayInLayerSwitcher: true,\n\n    /**\n     * APIProperty: visibility\n     * {Boolean} The layer should be displayed in the map.  Default is true.\n     */\n    visibility: true,\n\n    /**\n     * APIProperty: attribution\n     * {<Object>} or {<String>} Attribution information, displayed when an\n     *     <OpenLayers.Control.Attribution> has been added to the map.\n     *\n     *     An object is required to store the full attribution information\n     *     from a WMS capabilities response. Example attribution object:\n     *     {title:\"\",href:\"\",logo:{format:\"\",width:10,height:10,href:\"\"}}\n     */\n    attribution: null,\n\n    /** \n     * Property: inRange\n     * {Boolean} The current map resolution is within the layer's min/max \n     *     range. This is set in <OpenLayers.Map.setCenter> whenever the zoom \n     *     changes.\n     */\n    inRange: false,\n    \n    /**\n     * Propery: imageSize\n     * {<OpenLayers.Size>} For layers with a gutter, the image is larger than \n     *     the tile by twice the gutter in each dimension.\n     */\n    imageSize: null,\n    \n  // OPTIONS\n\n    /** \n     * Property: options\n     * {Object} An optional object whose properties will be set on the layer.\n     *     Any of the layer properties can be set as a property of the options\n     *     object and sent to the constructor when the layer is created.\n     */\n    options: null,\n\n    /**\n     * APIProperty: eventListeners\n     * {Object} If set as an option at construction, the eventListeners\n     *     object will be registered with <OpenLayers.Events.on>.  Object\n     *     structure must be a listeners object as shown in the example for\n     *     the events.on method.\n     */\n    eventListeners: null,\n\n    /**\n     * APIProperty: gutter\n     * {Integer} Determines the width (in pixels) of the gutter around image\n     *     tiles to ignore.  By setting this property to a non-zero value,\n     *     images will be requested that are wider and taller than the tile\n     *     size by a value of 2 x gutter.  This allows artifacts of rendering\n     *     at tile edges to be ignored.  Set a gutter value that is equal to\n     *     half the size of the widest symbol that needs to be displayed.\n     *     Defaults to zero.  Non-tiled layers always have zero gutter.\n     */ \n    gutter: 0, \n\n    /**\n     * APIProperty: projection\n     * {<OpenLayers.Projection>} or {<String>} Specifies the projection of the layer.\n     *     Can be set in the layer options. If not specified in the layer options,\n     *     it is set to the default projection specified in the map,\n     *     when the layer is added to the map.\n     *     Projection along with default maxExtent and resolutions\n     *     are set automatically with commercial baselayers in EPSG:3857,\n     *     such as Google, Bing and OpenStreetMap, and do not need to be specified.\n     *     Otherwise, if specifying projection, also set maxExtent,\n     *     maxResolution or resolutions as appropriate.\n     *     When using vector layers with strategies, layer projection should be set\n     *     to the projection of the source data if that is different from the map default.\n     * \n     *     Can be either a string or an <OpenLayers.Projection> object;\n     *     if a string is passed, will be converted to an object when\n     *     the layer is added to the map.\n     * \n     */\n    projection: null,    \n    \n    /**\n     * APIProperty: units\n     * {String} The layer map units.  Defaults to null.  Possible values\n     *     are 'degrees' (or 'dd'), 'm', 'ft', 'km', 'mi', 'inches'.\n     *     Normally taken from the projection.\n     *     Only required if both map and layers do not define a projection,\n     *     or if they define a projection which does not define units.\n     */\n    units: null,\n\n    /**\n     * APIProperty: scales\n     * {Array}  An array of map scales in descending order.  The values in the\n     *     array correspond to the map scale denominator.  Note that these\n     *     values only make sense if the display (monitor) resolution of the\n     *     client is correctly guessed by whomever is configuring the\n     *     application.  In addition, the units property must also be set.\n     *     Use <resolutions> instead wherever possible.\n     */\n    scales: null,\n\n    /**\n     * APIProperty: resolutions\n     * {Array} A list of map resolutions (map units per pixel) in descending\n     *     order.  If this is not set in the layer constructor, it will be set\n     *     based on other resolution related properties (maxExtent,\n     *     maxResolution, maxScale, etc.).\n     */\n    resolutions: null,\n    \n    /**\n     * APIProperty: maxExtent\n     * {<OpenLayers.Bounds>|Array} If provided as an array, the array\n     *     should consist of four values (left, bottom, right, top).\n     *     The maximum extent for the layer.  Defaults to null.\n     * \n     *     The center of these bounds will not stray outside\n     *     of the viewport extent during panning.  In addition, if\n     *     <displayOutsideMaxExtent> is set to false, data will not be\n     *     requested that falls completely outside of these bounds.\n     */\n    maxExtent: null,\n    \n    /**\n     * APIProperty: minExtent\n     * {<OpenLayers.Bounds>|Array} If provided as an array, the array\n     *     should consist of four values (left, bottom, right, top).\n     *     The minimum extent for the layer.  Defaults to null.\n     */\n    minExtent: null,\n    \n    /**\n     * APIProperty: maxResolution\n     * {Float} Default max is 360 deg / 256 px, which corresponds to\n     *     zoom level 0 on gmaps.  Specify a different value in the layer \n     *     options if you are not using the default <OpenLayers.Map.tileSize>\n     *     and displaying the whole world.\n     */\n    maxResolution: null,\n\n    /**\n     * APIProperty: minResolution\n     * {Float}\n     */\n    minResolution: null,\n\n    /**\n     * APIProperty: numZoomLevels\n     * {Integer}\n     */\n    numZoomLevels: null,\n    \n    /**\n     * APIProperty: minScale\n     * {Float}\n     */\n    minScale: null,\n    \n    /**\n     * APIProperty: maxScale\n     * {Float}\n     */\n    maxScale: null,\n\n    /**\n     * APIProperty: displayOutsideMaxExtent\n     * {Boolean} Request map tiles that are completely outside of the max \n     *     extent for this layer. Defaults to false.\n     */\n    displayOutsideMaxExtent: false,\n\n    /**\n     * APIProperty: wrapDateLine\n     * {Boolean} Wraps the world at the international dateline, so the map can\n     * be panned infinitely in longitudinal direction. Only use this on the\n     * base layer, and only if the layer's maxExtent equals the world bounds.\n     * #487 for more info.   \n     */\n    wrapDateLine: false,\n    \n    /**\n     * Property: metadata\n     * {Object} This object can be used to store additional information on a\n     *     layer object.\n     */\n    metadata: null,\n    \n    /**\n     * Constructor: OpenLayers.Layer\n     *\n     * Parameters:\n     * name - {String} The layer name\n     * options - {Object} Hashtable of extra options to tag onto the layer\n     */\n    initialize: function(name, options) {\n\n        this.metadata = {};\n        \n        options = OpenLayers.Util.extend({}, options);\n        // make sure we respect alwaysInRange if set on the prototype\n        if (this.alwaysInRange != null) {\n            options.alwaysInRange = this.alwaysInRange;\n        }\n        this.addOptions(options);\n\n        this.name = name;\n        \n        if (this.id == null) {\n\n            this.id = OpenLayers.Util.createUniqueID(this.CLASS_NAME + \"_\");\n\n            this.div = OpenLayers.Util.createDiv(this.id);\n            this.div.style.width = \"100%\";\n            this.div.style.height = \"100%\";\n            this.div.dir = \"ltr\";\n\n            this.events = new OpenLayers.Events(this, this.div);\n            if(this.eventListeners instanceof Object) {\n                this.events.on(this.eventListeners);\n            }\n\n        }\n    },\n    \n    /**\n     * Method: destroy\n     * Destroy is a destructor: this is to alleviate cyclic references which\n     *     the Javascript garbage cleaner can not take care of on its own.\n     *\n     * Parameters:\n     * setNewBaseLayer - {Boolean} Set a new base layer when this layer has\n     *     been destroyed.  Default is true.\n     */\n    destroy: function(setNewBaseLayer) {\n        if (setNewBaseLayer == null) {\n            setNewBaseLayer = true;\n        }\n        if (this.map != null) {\n            this.map.removeLayer(this, setNewBaseLayer);\n        }\n        this.projection = null;\n        this.map = null;\n        this.name = null;\n        this.div = null;\n        this.options = null;\n\n        if (this.events) {\n            if(this.eventListeners) {\n                this.events.un(this.eventListeners);\n            }\n            this.events.destroy();\n        }\n        this.eventListeners = null;\n        this.events = null;\n    },\n    \n   /**\n    * Method: clone\n    *\n    * Parameters:\n    * obj - {<OpenLayers.Layer>} The layer to be cloned\n    *\n    * Returns:\n    * {<OpenLayers.Layer>} An exact clone of this <OpenLayers.Layer>\n    */\n    clone: function (obj) {\n        \n        if (obj == null) {\n            obj = new OpenLayers.Layer(this.name, this.getOptions());\n        }\n        \n        // catch any randomly tagged-on properties\n        OpenLayers.Util.applyDefaults(obj, this);\n        \n        // a cloned layer should never have its map property set\n        //  because it has not been added to a map yet. \n        obj.map = null;\n        \n        return obj;\n    },\n    \n    /**\n     * Method: getOptions\n     * Extracts an object from the layer with the properties that were set as\n     *     options, but updates them with the values currently set on the\n     *     instance.\n     * \n     * Returns:\n     * {Object} the <options> of the layer, representing the current state.\n     */\n    getOptions: function() {\n        var options = {};\n        for(var o in this.options) {\n            options[o] = this[o];\n        }\n        return options;\n    },\n    \n    /** \n     * APIMethod: setName\n     * Sets the new layer name for this layer.  Can trigger a changelayer event\n     *     on the map.\n     *\n     * Parameters:\n     * newName - {String} The new name.\n     */\n    setName: function(newName) {\n        if (newName != this.name) {\n            this.name = newName;\n            if (this.map != null) {\n                this.map.events.triggerEvent(\"changelayer\", {\n                    layer: this,\n                    property: \"name\"\n                });\n            }\n        }\n    },    \n    \n   /**\n    * APIMethod: addOptions\n    * \n    * Parameters:\n    * newOptions - {Object}\n    * reinitialize - {Boolean} If set to true, and if resolution options of the\n    *     current baseLayer were changed, the map will be recentered to make\n    *     sure that it is displayed with a valid resolution, and a\n    *     changebaselayer event will be triggered.\n    */\n    addOptions: function (newOptions, reinitialize) {\n\n        if (this.options == null) {\n            this.options = {};\n        }\n        \n        if (newOptions) {\n            // make sure this.projection references a projection object\n            if(typeof newOptions.projection == \"string\") {\n                newOptions.projection = new OpenLayers.Projection(newOptions.projection);\n            }\n            if (newOptions.projection) {\n                // get maxResolution, units and maxExtent from projection defaults if\n                // they are not defined already\n                OpenLayers.Util.applyDefaults(newOptions,\n                    OpenLayers.Projection.defaults[newOptions.projection.getCode()]);\n            }\n            // allow array for extents\n            if (newOptions.maxExtent && !(newOptions.maxExtent instanceof OpenLayers.Bounds)) {\n                newOptions.maxExtent = new OpenLayers.Bounds(newOptions.maxExtent);\n            }\n            if (newOptions.minExtent && !(newOptions.minExtent instanceof OpenLayers.Bounds)) {\n                newOptions.minExtent = new OpenLayers.Bounds(newOptions.minExtent);\n            }\n        }\n\n        // update our copy for clone\n        OpenLayers.Util.extend(this.options, newOptions);\n\n        // add new options to this\n        OpenLayers.Util.extend(this, newOptions);\n        \n        // get the units from the projection, if we have a projection\n        // and it it has units\n        if(this.projection && this.projection.getUnits()) {\n            this.units = this.projection.getUnits();\n        }\n\n        // re-initialize resolutions if necessary, i.e. if any of the\n        // properties of the \"properties\" array defined below is set\n        // in the new options\n        if(this.map) {\n            // store current resolution so we can try to restore it later\n            var resolution = this.map.getResolution();\n            var properties = this.RESOLUTION_PROPERTIES.concat(\n                [\"projection\", \"units\", \"minExtent\", \"maxExtent\"]\n            );\n            for(var o in newOptions) {\n                if(newOptions.hasOwnProperty(o) &&\n                   OpenLayers.Util.indexOf(properties, o) >= 0) {\n\n                    this.initResolutions();\n                    if (reinitialize && this.map.baseLayer === this) {\n                        // update map position, and restore previous resolution\n                        this.map.setCenter(this.map.getCenter(),\n                            this.map.getZoomForResolution(resolution),\n                            false, true\n                        );\n                        // trigger a changebaselayer event to make sure that\n                        // all controls (especially\n                        // OpenLayers.Control.PanZoomBar) get notified of the\n                        // new options\n                        this.map.events.triggerEvent(\"changebaselayer\", {\n                            layer: this\n                        });\n                    }\n                    break;\n                }\n            }\n        }\n    },\n\n    /**\n     * APIMethod: onMapResize\n     * This function can be implemented by subclasses\n     */\n    onMapResize: function() {\n        //this function can be implemented by subclasses  \n    },\n\n    /**\n     * APIMethod: redraw\n     * Redraws the layer.  Returns true if the layer was redrawn, false if not.\n     *\n     * Returns:\n     * {Boolean} The layer was redrawn.\n     */\n    redraw: function() {\n        var redrawn = false;\n        if (this.map) {\n\n            // min/max Range may have changed\n            this.inRange = this.calculateInRange();\n\n            // map's center might not yet be set\n            var extent = this.getExtent();\n\n            if (extent && this.inRange && this.visibility) {\n                var zoomChanged = true;\n                this.moveTo(extent, zoomChanged, false);\n                this.events.triggerEvent(\"moveend\",\n                    {\"zoomChanged\": zoomChanged});\n                redrawn = true;\n            }\n        }\n        return redrawn;\n    },\n\n    /**\n     * Method: moveTo\n     * \n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>}\n     * zoomChanged - {Boolean} Tells when zoom has changed, as layers have to\n     *     do some init work in that case.\n     * dragging - {Boolean}\n     */\n    moveTo:function(bounds, zoomChanged, dragging) {\n        var display = this.visibility;\n        if (!this.isBaseLayer) {\n            display = display && this.inRange;\n        }\n        this.display(display);\n    },\n\n    /**\n     * Method: moveByPx\n     * Move the layer based on pixel vector. To be implemented by subclasses.\n     *\n     * Parameters:\n     * dx - {Number} The x coord of the displacement vector.\n     * dy - {Number} The y coord of the displacement vector.\n     */\n    moveByPx: function(dx, dy) {\n    },\n\n    /**\n     * Method: setMap\n     * Set the map property for the layer. This is done through an accessor\n     *     so that subclasses can override this and take special action once \n     *     they have their map variable set. \n     * \n     *     Here we take care to bring over any of the necessary default \n     *     properties from the map. \n     * \n     * Parameters:\n     * map - {<OpenLayers.Map>}\n     */\n    setMap: function(map) {\n        if (this.map == null) {\n        \n            this.map = map;\n            \n            // grab some essential layer data from the map if it hasn't already\n            //  been set\n            this.maxExtent = this.maxExtent || this.map.maxExtent;\n            this.minExtent = this.minExtent || this.map.minExtent;\n\n            this.projection = this.projection || this.map.projection;\n            if (typeof this.projection == \"string\") {\n                this.projection = new OpenLayers.Projection(this.projection);\n            }\n\n            // Check the projection to see if we can get units -- if not, refer\n            // to properties.\n            if (this.projection && this.projection.getUnits()) {\n                this.units = this.projection.getUnits();\n            }\n            else {\n                this.units = this.units || this.map.units;\n            }\n            \n            this.initResolutions();\n            \n            if (!this.isBaseLayer) {\n                this.inRange = this.calculateInRange();\n                var show = ((this.visibility) && (this.inRange));\n                this.div.style.display = show ? \"\" : \"none\";\n            }\n            \n            // deal with gutters\n            this.setTileSize();\n        }\n    },\n    \n    /**\n     * Method: afterAdd\n     * Called at the end of the map.addLayer sequence.  At this point, the map\n     *     will have a base layer.  To be overridden by subclasses.\n     */\n    afterAdd: function() {\n    },\n    \n    /**\n     * APIMethod: removeMap\n     * Just as setMap() allows each layer the possibility to take a \n     *     personalized action on being added to the map, removeMap() allows\n     *     each layer to take a personalized action on being removed from it. \n     *     For now, this will be mostly unused, except for the EventPane layer,\n     *     which needs this hook so that it can remove the special invisible\n     *     pane. \n     * \n     * Parameters:\n     * map - {<OpenLayers.Map>}\n     */\n    removeMap: function(map) {\n        //to be overridden by subclasses\n    },\n    \n    /**\n     * APIMethod: getImageSize\n     *\n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>} optional tile bounds, can be used\n     *     by subclasses that have to deal with different tile sizes at the\n     *     layer extent edges (e.g. Zoomify)\n     * \n     * Returns:\n     * {<OpenLayers.Size>} The size that the image should be, taking into \n     *     account gutters.\n     */ \n    getImageSize: function(bounds) { \n        return (this.imageSize || this.tileSize); \n    },    \n  \n    /**\n     * APIMethod: setTileSize\n     * Set the tile size based on the map size.  This also sets layer.imageSize\n     *     or use by Tile.Image.\n     * \n     * Parameters:\n     * size - {<OpenLayers.Size>}\n     */\n    setTileSize: function(size) {\n        var tileSize = (size) ? size :\n                                ((this.tileSize) ? this.tileSize :\n                                                   this.map.getTileSize());\n        this.tileSize = tileSize;\n        if(this.gutter) {\n          // layers with gutters need non-null tile sizes\n          //if(tileSize == null) {\n          //    OpenLayers.console.error(\"Error in layer.setMap() for \" +\n          //                              this.name + \": layers with \" +\n          //                              \"gutters need non-null tile sizes\");\n          //}\n            this.imageSize = new OpenLayers.Size(tileSize.w + (2*this.gutter), \n                                                 tileSize.h + (2*this.gutter)); \n        }\n    },\n\n    /**\n     * APIMethod: getVisibility\n     * \n     * Returns:\n     * {Boolean} The layer should be displayed (if in range).\n     */\n    getVisibility: function() {\n        return this.visibility;\n    },\n\n    /** \n     * APIMethod: setVisibility\n     * Set the visibility flag for the layer and hide/show & redraw \n     *     accordingly. Fire event unless otherwise specified\n     * \n     * Note that visibility is no longer simply whether or not the layer's\n     *     style.display is set to \"block\". Now we store a 'visibility' state \n     *     property on the layer class, this allows us to remember whether or \n     *     not we *desire* for a layer to be visible. In the case where the \n     *     map's resolution is out of the layer's range, this desire may be \n     *     subverted.\n     * \n     * Parameters:\n     * visibility - {Boolean} Whether or not to display the layer (if in range)\n     */\n    setVisibility: function(visibility) {\n        if (visibility != this.visibility) {\n            this.visibility = visibility;\n            this.display(visibility);\n            this.redraw();\n            if (this.map != null) {\n                this.map.events.triggerEvent(\"changelayer\", {\n                    layer: this,\n                    property: \"visibility\"\n                });\n            }\n            this.events.triggerEvent(\"visibilitychanged\");\n        }\n    },\n\n    /** \n     * APIMethod: display\n     * Hide or show the Layer. This is designed to be used internally, and \n     *     is not generally the way to enable or disable the layer. For that,\n     *     use the setVisibility function instead..\n     * \n     * Parameters:\n     * display - {Boolean}\n     */\n    display: function(display) {\n        if (display != (this.div.style.display != \"none\")) {\n            this.div.style.display = (display && this.calculateInRange()) ? \"block\" : \"none\";\n        }\n    },\n\n    /**\n     * APIMethod: calculateInRange\n     * \n     * Returns:\n     * {Boolean} The layer is displayable at the current map's current\n     *     resolution. Note that if 'alwaysInRange' is true for the layer, \n     *     this function will always return true.\n     */\n    calculateInRange: function() {\n        var inRange = false;\n\n        if (this.alwaysInRange) {\n            inRange = true;\n        } else {\n            if (this.map) {\n                var resolution = this.map.getResolution();\n                inRange = ( (resolution >= this.minResolution) &&\n                            (resolution <= this.maxResolution) );\n            }\n        }\n        return inRange;\n    },\n\n    /** \n     * APIMethod: setIsBaseLayer\n     * \n     * Parameters:\n     * isBaseLayer - {Boolean}\n     */\n    setIsBaseLayer: function(isBaseLayer) {\n        if (isBaseLayer != this.isBaseLayer) {\n            this.isBaseLayer = isBaseLayer;\n            if (this.map != null) {\n                this.map.events.triggerEvent(\"changebaselayer\", {\n                    layer: this\n                });\n            }\n        }\n    },\n\n  /********************************************************/\n  /*                                                      */\n  /*                 Baselayer Functions                  */\n  /*                                                      */\n  /********************************************************/\n  \n    /** \n     * Method: initResolutions\n     * This method's responsibility is to set up the 'resolutions' array \n     *     for the layer -- this array is what the layer will use to interface\n     *     between the zoom levels of the map and the resolution display \n     *     of the layer.\n     * \n     * The user has several options that determine how the array is set up.\n     *  \n     * For a detailed explanation, see the following wiki from the \n     *     openlayers.org homepage:\n     *     http://trac.openlayers.org/wiki/SettingZoomLevels\n     */\n    initResolutions: function() {\n\n        // ok we want resolutions, here's our strategy:\n        //\n        // 1. if resolutions are defined in the layer config, use them\n        // 2. else, if scales are defined in the layer config then derive\n        //    resolutions from these scales\n        // 3. else, attempt to calculate resolutions from maxResolution,\n        //    minResolution, numZoomLevels, maxZoomLevel set in the\n        //    layer config\n        // 4. if we still don't have resolutions, and if resolutions\n        //    are defined in the same, use them\n        // 5. else, if scales are defined in the map then derive\n        //    resolutions from these scales\n        // 6. else, attempt to calculate resolutions from maxResolution,\n        //    minResolution, numZoomLevels, maxZoomLevel set in the\n        //    map\n        // 7. hope for the best!\n\n        var i, len, p;\n        var props = {}, alwaysInRange = true;\n\n        // get resolution data from layer config\n        // (we also set alwaysInRange in the layer as appropriate)\n        for(i=0, len=this.RESOLUTION_PROPERTIES.length; i<len; i++) {\n            p = this.RESOLUTION_PROPERTIES[i];\n            props[p] = this.options[p];\n            if(alwaysInRange && this.options[p]) {\n                alwaysInRange = false;\n            }\n        }\n        if(this.options.alwaysInRange == null) {\n            this.alwaysInRange = alwaysInRange;\n        }\n\n        // if we don't have resolutions then attempt to derive them from scales\n        if(props.resolutions == null) {\n            props.resolutions = this.resolutionsFromScales(props.scales);\n        }\n\n        // if we still don't have resolutions then attempt to calculate them\n        if(props.resolutions == null) {\n            props.resolutions = this.calculateResolutions(props);\n        }\n\n        // if we couldn't calculate resolutions then we look at we have\n        // in the map\n        if(props.resolutions == null) {\n            for(i=0, len=this.RESOLUTION_PROPERTIES.length; i<len; i++) {\n                p = this.RESOLUTION_PROPERTIES[i];\n                props[p] = this.options[p] != null ?\n                    this.options[p] : this.map[p];\n            }\n            if(props.resolutions == null) {\n                props.resolutions = this.resolutionsFromScales(props.scales);\n            }\n            if(props.resolutions == null) {\n                props.resolutions = this.calculateResolutions(props);\n            }\n        }\n\n        // ok, we new need to set properties in the instance\n\n        // get maxResolution from the config if it's defined there\n        var maxResolution;\n        if(this.options.maxResolution &&\n           this.options.maxResolution !== \"auto\") {\n            maxResolution = this.options.maxResolution;\n        }\n        if(this.options.minScale) {\n            maxResolution = OpenLayers.Util.getResolutionFromScale(\n                this.options.minScale, this.units);\n        }\n\n        // get minResolution from the config if it's defined there\n        var minResolution;\n        if(this.options.minResolution &&\n           this.options.minResolution !== \"auto\") {\n            minResolution = this.options.minResolution;\n        }\n        if(this.options.maxScale) {\n            minResolution = OpenLayers.Util.getResolutionFromScale(\n                this.options.maxScale, this.units);\n        }\n\n        if(props.resolutions) {\n\n            //sort resolutions array descendingly\n            props.resolutions.sort(function(a, b) {\n                return (b - a);\n            });\n\n            // if we still don't have a maxResolution get it from the\n            // resolutions array\n            if(!maxResolution) {\n                maxResolution = props.resolutions[0];\n            }\n\n            // if we still don't have a minResolution get it from the\n            // resolutions array\n            if(!minResolution) {\n                var lastIdx = props.resolutions.length - 1;\n                minResolution = props.resolutions[lastIdx];\n            }\n        }\n\n        this.resolutions = props.resolutions;\n        if(this.resolutions) {\n            len = this.resolutions.length;\n            this.scales = new Array(len);\n            for(i=0; i<len; i++) {\n                this.scales[i] = OpenLayers.Util.getScaleFromResolution(\n                    this.resolutions[i], this.units);\n            }\n            this.numZoomLevels = len;\n        }\n        this.minResolution = minResolution;\n        if(minResolution) {\n            this.maxScale = OpenLayers.Util.getScaleFromResolution(\n                minResolution, this.units);\n        }\n        this.maxResolution = maxResolution;\n        if(maxResolution) {\n            this.minScale = OpenLayers.Util.getScaleFromResolution(\n                maxResolution, this.units);\n        }\n    },\n\n    /**\n     * Method: resolutionsFromScales\n     * Derive resolutions from scales.\n     *\n     * Parameters:\n     * scales - {Array(Number)} Scales\n     *\n     * Returns\n     * {Array(Number)} Resolutions\n     */\n    resolutionsFromScales: function(scales) {\n        if(scales == null) {\n            return;\n        }\n        var resolutions, i, len;\n        len = scales.length;\n        resolutions = new Array(len);\n        for(i=0; i<len; i++) {\n            resolutions[i] = OpenLayers.Util.getResolutionFromScale(\n                scales[i], this.units);\n        }\n        return resolutions;\n    },\n\n    /**\n     * Method: calculateResolutions\n     * Calculate resolutions based on the provided properties.\n     *\n     * Parameters:\n     * props - {Object} Properties\n     *\n     * Returns:\n     * {Array({Number})} Array of resolutions.\n     */\n    calculateResolutions: function(props) {\n\n        var viewSize, wRes, hRes;\n\n        // determine maxResolution\n        var maxResolution = props.maxResolution;\n        if(props.minScale != null) {\n            maxResolution =\n                OpenLayers.Util.getResolutionFromScale(props.minScale,\n                                                       this.units);\n        } else if(maxResolution == \"auto\" && this.maxExtent != null) {\n            viewSize = this.map.getSize();\n            wRes = this.maxExtent.getWidth() / viewSize.w;\n            hRes = this.maxExtent.getHeight() / viewSize.h;\n            maxResolution = Math.max(wRes, hRes);\n        }\n\n        // determine minResolution\n        var minResolution = props.minResolution;\n        if(props.maxScale != null) {\n            minResolution =\n                OpenLayers.Util.getResolutionFromScale(props.maxScale,\n                                                       this.units);\n        } else if(props.minResolution == \"auto\" && this.minExtent != null) {\n            viewSize = this.map.getSize();\n            wRes = this.minExtent.getWidth() / viewSize.w;\n            hRes = this.minExtent.getHeight()/ viewSize.h;\n            minResolution = Math.max(wRes, hRes);\n        }\n\n        if(typeof maxResolution !== \"number\" &&\n           typeof minResolution !== \"number\" &&\n           this.maxExtent != null) {\n            // maxResolution for default grid sets assumes that at zoom\n            // level zero, the whole world fits on one tile.\n            var tileSize = this.map.getTileSize();\n            maxResolution = Math.max(\n                this.maxExtent.getWidth() / tileSize.w,\n                this.maxExtent.getHeight() / tileSize.h\n            );\n        }\n\n        // determine numZoomLevels\n        var maxZoomLevel = props.maxZoomLevel;\n        var numZoomLevels = props.numZoomLevels;\n        if(typeof minResolution === \"number\" &&\n           typeof maxResolution === \"number\" && numZoomLevels === undefined) {\n            var ratio = maxResolution / minResolution;\n            numZoomLevels = Math.floor(Math.log(ratio) / Math.log(2)) + 1;\n        } else if(numZoomLevels === undefined && maxZoomLevel != null) {\n            numZoomLevels = maxZoomLevel + 1;\n        }\n\n        // are we able to calculate resolutions?\n        if(typeof numZoomLevels !== \"number\" || numZoomLevels <= 0 ||\n           (typeof maxResolution !== \"number\" &&\n                typeof minResolution !== \"number\")) {\n            return;\n        }\n\n        // now we have numZoomLevels and at least one of maxResolution\n        // or minResolution, we can populate the resolutions array\n\n        var resolutions = new Array(numZoomLevels);\n        var base = 2;\n        if(typeof minResolution == \"number\" &&\n           typeof maxResolution == \"number\") {\n            // if maxResolution and minResolution are set, we calculate\n            // the base for exponential scaling that starts at\n            // maxResolution and ends at minResolution in numZoomLevels\n            // steps.\n            base = Math.pow(\n                    (maxResolution / minResolution),\n                (1 / (numZoomLevels - 1))\n            );\n        }\n\n        var i;\n        if(typeof maxResolution === \"number\") {\n            for(i=0; i<numZoomLevels; i++) {\n                resolutions[i] = maxResolution / Math.pow(base, i);\n            }\n        } else {\n            for(i=0; i<numZoomLevels; i++) {\n                resolutions[numZoomLevels - 1 - i] =\n                    minResolution * Math.pow(base, i);\n            }\n        }\n\n        return resolutions;\n    },\n\n    /**\n     * APIMethod: getResolution\n     * \n     * Returns:\n     * {Float} The currently selected resolution of the map, taken from the\n     *     resolutions array, indexed by current zoom level.\n     */\n    getResolution: function() {\n        var zoom = this.map.getZoom();\n        return this.getResolutionForZoom(zoom);\n    },\n\n    /** \n     * APIMethod: getExtent\n     * \n     * Returns:\n     * {<OpenLayers.Bounds>} A Bounds object which represents the lon/lat \n     *     bounds of the current viewPort.\n     */\n    getExtent: function() {\n        // just use stock map calculateBounds function -- passing no arguments\n        //  means it will user map's current center & resolution\n        //\n        return this.map.calculateBounds();\n    },\n\n    /**\n     * APIMethod: getZoomForExtent\n     * \n     * Parameters:\n     * extent - {<OpenLayers.Bounds>}\n     * closest - {Boolean} Find the zoom level that most closely fits the \n     *     specified bounds. Note that this may result in a zoom that does \n     *     not exactly contain the entire extent.\n     *     Default is false.\n     *\n     * Returns:\n     * {Integer} The index of the zoomLevel (entry in the resolutions array) \n     *     for the passed-in extent. We do this by calculating the ideal \n     *     resolution for the given extent (based on the map size) and then \n     *     calling getZoomForResolution(), passing along the 'closest'\n     *     parameter.\n     */\n    getZoomForExtent: function(extent, closest) {\n        var viewSize = this.map.getSize();\n        var idealResolution = Math.max( extent.getWidth()  / viewSize.w,\n                                        extent.getHeight() / viewSize.h );\n\n        return this.getZoomForResolution(idealResolution, closest);\n    },\n    \n    /** \n     * Method: getDataExtent\n     * Calculates the max extent which includes all of the data for the layer.\n     *     This function is to be implemented by subclasses.\n     * \n     * Returns:\n     * {<OpenLayers.Bounds>}\n     */\n    getDataExtent: function () {\n        //to be implemented by subclasses\n    },\n\n    /**\n     * APIMethod: getResolutionForZoom\n     * \n     * Parameters:\n     * zoom - {Float}\n     * \n     * Returns:\n     * {Float} A suitable resolution for the specified zoom.\n     */\n    getResolutionForZoom: function(zoom) {\n        zoom = Math.max(0, Math.min(zoom, this.resolutions.length - 1));\n        var resolution;\n        if(this.map.fractionalZoom) {\n            var low = Math.floor(zoom);\n            var high = Math.ceil(zoom);\n            resolution = this.resolutions[low] -\n                ((zoom-low) * (this.resolutions[low]-this.resolutions[high]));\n        } else {\n            resolution = this.resolutions[Math.round(zoom)];\n        }\n        return resolution;\n    },\n\n    /**\n     * APIMethod: getZoomForResolution\n     * \n     * Parameters:\n     * resolution - {Float}\n     * closest - {Boolean} Find the zoom level that corresponds to the absolute \n     *     closest resolution, which may result in a zoom whose corresponding\n     *     resolution is actually smaller than we would have desired (if this\n     *     is being called from a getZoomForExtent() call, then this means that\n     *     the returned zoom index might not actually contain the entire \n     *     extent specified... but it'll be close).\n     *     Default is false.\n     * \n     * Returns:\n     * {Integer} The index of the zoomLevel (entry in the resolutions array) \n     *     that corresponds to the best fit resolution given the passed in \n     *     value and the 'closest' specification.\n     */\n    getZoomForResolution: function(resolution, closest) {\n        var zoom, i, len;\n        if(this.map.fractionalZoom) {\n            var lowZoom = 0;\n            var highZoom = this.resolutions.length - 1;\n            var highRes = this.resolutions[lowZoom];\n            var lowRes = this.resolutions[highZoom];\n            var res;\n            for(i=0, len=this.resolutions.length; i<len; ++i) {\n                res = this.resolutions[i];\n                if(res >= resolution) {\n                    highRes = res;\n                    lowZoom = i;\n                }\n                if(res <= resolution) {\n                    lowRes = res;\n                    highZoom = i;\n                    break;\n                }\n            }\n            var dRes = highRes - lowRes;\n            if(dRes > 0) {\n                zoom = lowZoom + ((highRes - resolution) / dRes);\n            } else {\n                zoom = lowZoom;\n            }\n        } else {\n            var diff;\n            var minDiff = Number.POSITIVE_INFINITY;\n            for(i=0, len=this.resolutions.length; i<len; i++) {            \n                if (closest) {\n                    diff = Math.abs(this.resolutions[i] - resolution);\n                    if (diff > minDiff) {\n                        break;\n                    }\n                    minDiff = diff;\n                } else {\n                    if (this.resolutions[i] < resolution) {\n                        break;\n                    }\n                }\n            }\n            zoom = Math.max(0, i-1);\n        }\n        return zoom;\n    },\n    \n    /**\n     * APIMethod: getLonLatFromViewPortPx\n     * \n     * Parameters:\n     * viewPortPx - {<OpenLayers.Pixel>|Object} An OpenLayers.Pixel or\n     *                                          an object with a 'x'\n     *                                          and 'y' properties.\n     *\n     * Returns:\n     * {<OpenLayers.LonLat>} An OpenLayers.LonLat which is the passed-in \n     *     view port <OpenLayers.Pixel>, translated into lon/lat by the layer.\n     */\n    getLonLatFromViewPortPx: function (viewPortPx) {\n        var lonlat = null;\n        var map = this.map;\n        if (viewPortPx != null && map.minPx) {\n            var res = map.getResolution();\n            var maxExtent = map.getMaxExtent({restricted: true});\n            var lon = (viewPortPx.x - map.minPx.x) * res + maxExtent.left;\n            var lat = (map.minPx.y - viewPortPx.y) * res + maxExtent.top;\n            lonlat = new OpenLayers.LonLat(lon, lat);\n\n            if (this.wrapDateLine) {\n                lonlat = lonlat.wrapDateLine(this.maxExtent);\n            }\n        }\n        return lonlat;\n    },\n\n    /**\n     * APIMethod: getViewPortPxFromLonLat\n     * Returns a pixel location given a map location.  This method will return\n     *     fractional pixel values.\n     * \n     * Parameters:\n     * lonlat - {<OpenLayers.LonLat>|Object} An OpenLayers.LonLat or\n     *                                       an object with a 'lon'\n     *                                       and 'lat' properties.\n     *\n     * Returns: \n     * {<OpenLayers.Pixel>} An <OpenLayers.Pixel> which is the passed-in \n     *     lonlat translated into view port pixels.\n     */\n    getViewPortPxFromLonLat: function (lonlat, resolution) {\n        var px = null; \n        if (lonlat != null) {\n            resolution = resolution || this.map.getResolution();\n            var extent = this.map.calculateBounds(null, resolution);\n            px = new OpenLayers.Pixel(\n                (1/resolution * (lonlat.lon - extent.left)),\n                (1/resolution * (extent.top - lonlat.lat))\n            );    \n        }\n        return px;\n    },\n    \n    /**\n     * APIMethod: setOpacity\n     * Sets the opacity for the entire layer (all images)\n     * \n     * Parameters:\n     * opacity - {Float}\n     */\n    setOpacity: function(opacity) {\n        if (opacity != this.opacity) {\n            this.opacity = opacity;\n            var childNodes = this.div.childNodes;\n            for(var i = 0, len = childNodes.length; i < len; ++i) {\n                var element = childNodes[i].firstChild || childNodes[i];\n                var lastChild = childNodes[i].lastChild;\n                //TODO de-uglify this\n                if (lastChild && lastChild.nodeName.toLowerCase() === \"iframe\") {\n                    element = lastChild.parentNode;\n                }\n                OpenLayers.Util.modifyDOMElement(element, null, null, null, \n                                                 null, null, null, opacity);\n            }\n            if (this.map != null) {\n                this.map.events.triggerEvent(\"changelayer\", {\n                    layer: this,\n                    property: \"opacity\"\n                });\n            }\n        }\n    },\n\n    /**\n     * Method: getZIndex\n     * \n     * Returns: \n     * {Integer} the z-index of this layer\n     */    \n    getZIndex: function () {\n        return this.div.style.zIndex;\n    },\n\n    /**\n     * Method: setZIndex\n     * \n     * Parameters: \n     * zIndex - {Integer}\n     */    \n    setZIndex: function (zIndex) {\n        this.div.style.zIndex = zIndex;\n    },\n\n    /**\n     * Method: adjustBounds\n     * This function will take a bounds, and if wrapDateLine option is set\n     *     on the layer, it will return a bounds which is wrapped around the \n     *     world. We do not wrap for bounds which *cross* the \n     *     maxExtent.left/right, only bounds which are entirely to the left \n     *     or entirely to the right.\n     * \n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>}\n     */\n    adjustBounds: function (bounds) {\n\n        if (this.gutter) {\n            // Adjust the extent of a bounds in map units by the \n            // layer's gutter in pixels.\n            var mapGutter = this.gutter * this.map.getResolution();\n            bounds = new OpenLayers.Bounds(bounds.left - mapGutter,\n                                           bounds.bottom - mapGutter,\n                                           bounds.right + mapGutter,\n                                           bounds.top + mapGutter);\n        }\n\n        if (this.wrapDateLine) {\n            // wrap around the date line, within the limits of rounding error\n            var wrappingOptions = { \n                'rightTolerance':this.getResolution(),\n                'leftTolerance':this.getResolution()\n            };    \n            bounds = bounds.wrapDateLine(this.maxExtent, wrappingOptions);\n                              \n        }\n        return bounds;\n    },\n\n    CLASS_NAME: \"OpenLayers.Layer\"\n});\n/* ======================================================================\n    OpenLayers/Layer/HTTPRequest.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Layer.js\n */\n\n/**\n * Class: OpenLayers.Layer.HTTPRequest\n * \n * Inherits from: \n *  - <OpenLayers.Layer>\n */\nOpenLayers.Layer.HTTPRequest = OpenLayers.Class(OpenLayers.Layer, {\n\n    /**\n     * APIProperty: events\n     * {<OpenLayers.Events>}\n     *\n     * Supported event types (in addition to those from <OpenLayers.Layer.events>):\n     * refresh - Triggered when a redraw is forced, to re-fetch data from the\n     *     server.\n     */\n\n    /** \n     * Constant: URL_HASH_FACTOR\n     * {Float} Used to hash URL param strings for multi-WMS server selection.\n     *         Set to the Golden Ratio per Knuth's recommendation.\n     */\n    URL_HASH_FACTOR: (Math.sqrt(5) - 1) / 2,\n\n    /** \n     * Property: url\n     * {Array(String) or String} This is either an array of url strings or \n     *                           a single url string. \n     */\n    url: null,\n\n    /** \n     * Property: params\n     * {Object} Hashtable of key/value parameters\n     */\n    params: null,\n    \n    /** \n     * APIProperty: reproject\n     * *Deprecated*. See http://docs.openlayers.org/library/spherical_mercator.html\n     * for information on the replacement for this functionality. \n     * {Boolean} Whether layer should reproject itself based on base layer \n     *           locations. This allows reprojection onto commercial layers. \n     *           Default is false: Most layers can't reproject, but layers \n     *           which can create non-square geographic pixels can, like WMS.\n     *           \n     */\n    reproject: false,\n\n    /**\n     * Constructor: OpenLayers.Layer.HTTPRequest\n     * \n     * Parameters:\n     * name - {String}\n     * url - {Array(String) or String}\n     * params - {Object}\n     * options - {Object} Hashtable of extra options to tag onto the layer\n     */\n    initialize: function(name, url, params, options) {\n        OpenLayers.Layer.prototype.initialize.apply(this, [name, options]);\n        this.url = url;\n        if (!this.params) {\n            this.params = OpenLayers.Util.extend({}, params);\n        }\n    },\n\n    /**\n     * APIMethod: destroy\n     */\n    destroy: function() {\n        this.url = null;\n        this.params = null;\n        OpenLayers.Layer.prototype.destroy.apply(this, arguments); \n    },\n    \n    /**\n     * APIMethod: clone\n     * \n     * Parameters:\n     * obj - {Object}\n     * \n     * Returns:\n     * {<OpenLayers.Layer.HTTPRequest>} An exact clone of this \n     *                                  <OpenLayers.Layer.HTTPRequest>\n     */\n    clone: function (obj) {\n        \n        if (obj == null) {\n            obj = new OpenLayers.Layer.HTTPRequest(this.name,\n                                                   this.url,\n                                                   this.params,\n                                                   this.getOptions());\n        }\n        \n        //get all additions from superclasses\n        obj = OpenLayers.Layer.prototype.clone.apply(this, [obj]);\n\n        // copy/set any non-init, non-simple values here\n        \n        return obj;\n    },\n\n    /** \n     * APIMethod: setUrl\n     * \n     * Parameters:\n     * newUrl - {String}\n     */\n    setUrl: function(newUrl) {\n        this.url = newUrl;\n    },\n\n    /**\n     * APIMethod: mergeNewParams\n     * \n     * Parameters:\n     * newParams - {Object}\n     *\n     * Returns:\n     * redrawn: {Boolean} whether the layer was actually redrawn.\n     */\n    mergeNewParams:function(newParams) {\n        this.params = OpenLayers.Util.extend(this.params, newParams);\n        var ret = this.redraw();\n        if(this.map != null) {\n            this.map.events.triggerEvent(\"changelayer\", {\n                layer: this,\n                property: \"params\"\n            });\n        }\n        return ret;\n    },\n\n    /**\n     * APIMethod: redraw\n     * Redraws the layer.  Returns true if the layer was redrawn, false if not.\n     *\n     * Parameters:\n     * force - {Boolean} Force redraw by adding random parameter.\n     *\n     * Returns:\n     * {Boolean} The layer was redrawn.\n     */\n    redraw: function(force) { \n        if (force) {\n            this.events.triggerEvent('refresh');\n            return this.mergeNewParams({\"_olSalt\": Math.random()});\n        } else {\n            return OpenLayers.Layer.prototype.redraw.apply(this, []);\n        }\n    },\n    \n    /**\n     * Method: selectUrl\n     * selectUrl() implements the standard floating-point multiplicative\n     *     hash function described by Knuth, and hashes the contents of the \n     *     given param string into a float between 0 and 1. This float is then\n     *     scaled to the size of the provided urls array, and used to select\n     *     a URL.\n     *\n     * Parameters:\n     * paramString - {String}\n     * urls - {Array(String)}\n     * \n     * Returns:\n     * {String} An entry from the urls array, deterministically selected based\n     *          on the paramString.\n     */\n    selectUrl: function(paramString, urls) {\n        var product = 1;\n        for (var i=0, len=paramString.length; i<len; i++) { \n            product *= paramString.charCodeAt(i) * this.URL_HASH_FACTOR; \n            product -= Math.floor(product); \n        }\n        return urls[Math.floor(product * urls.length)];\n    },\n\n    /** \n     * Method: getFullRequestString\n     * Combine url with layer's params and these newParams. \n     *   \n     *    does checking on the serverPath variable, allowing for cases when it \n     *     is supplied with trailing ? or &, as well as cases where not. \n     *\n     *    return in formatted string like this:\n     *        \"server?key1=value1&key2=value2&key3=value3\"\n     * \n     * WARNING: The altUrl parameter is deprecated and will be removed in 3.0.\n     *\n     * Parameters:\n     * newParams - {Object}\n     * altUrl - {String} Use this as the url instead of the layer's url\n     *   \n     * Returns: \n     * {String}\n     */\n    getFullRequestString:function(newParams, altUrl) {\n\n        // if not altUrl passed in, use layer's url\n        var url = altUrl || this.url;\n        \n        // create a new params hashtable with all the layer params and the \n        // new params together. then convert to string\n        var allParams = OpenLayers.Util.extend({}, this.params);\n        allParams = OpenLayers.Util.extend(allParams, newParams);\n        var paramsString = OpenLayers.Util.getParameterString(allParams);\n        \n        // if url is not a string, it should be an array of strings, \n        // in which case we will deterministically select one of them in \n        // order to evenly distribute requests to different urls.\n        //\n        if (OpenLayers.Util.isArray(url)) {\n            url = this.selectUrl(paramsString, url);\n        }   \n \n        // ignore parameters that are already in the url search string\n        var urlParams = \n            OpenLayers.Util.upperCaseObject(OpenLayers.Util.getParameters(url));\n        for(var key in allParams) {\n            if(key.toUpperCase() in urlParams) {\n                delete allParams[key];\n            }\n        }\n        paramsString = OpenLayers.Util.getParameterString(allParams);\n        \n        return OpenLayers.Util.urlAppend(url, paramsString);\n    },\n\n    CLASS_NAME: \"OpenLayers.Layer.HTTPRequest\"\n});\n/* ======================================================================\n    OpenLayers/Tile.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/BaseTypes/Class.js\n * @requires OpenLayers/Util.js\n */\n\n/**\n * Class: OpenLayers.Tile \n * This is a class designed to designate a single tile, however\n *     it is explicitly designed to do relatively little. Tiles store \n *     information about themselves -- such as the URL that they are related\n *     to, and their size - but do not add themselves to the layer div \n *     automatically, for example. Create a new tile with the \n *     <OpenLayers.Tile> constructor, or a subclass. \n * \n * TBD 3.0 - remove reference to url in above paragraph\n * \n */\nOpenLayers.Tile = OpenLayers.Class({\n    \n    /**\n     * APIProperty: events\n     * {<OpenLayers.Events>} An events object that handles all \n     *     events on the tile.\n     *\n     * Register a listener for a particular event with the following syntax:\n     * (code)\n     * tile.events.register(type, obj, listener);\n     * (end)\n     *\n     * Supported event types:\n     * beforedraw - Triggered before the tile is drawn. Used to defer\n     *     drawing to an animation queue. To defer drawing, listeners need\n     *     to return false, which will abort drawing. The queue handler needs\n     *     to call <draw>(true) to actually draw the tile.\n     * loadstart - Triggered when tile loading starts.\n     * loadend - Triggered when tile loading ends.\n     * loaderror - Triggered before the loadend event (i.e. when the tile is\n     *     still hidden) if the tile could not be loaded.\n     * reload - Triggered when an already loading tile is reloaded.\n     * unload - Triggered before a tile is unloaded.\n     */\n    events: null,\n\n    /**\n     * APIProperty: eventListeners\n     * {Object} If set as an option at construction, the eventListeners\n     *     object will be registered with <OpenLayers.Events.on>.  Object\n     *     structure must be a listeners object as shown in the example for\n     *     the events.on method.\n     *\n     * This options can be set in the ``tileOptions`` option from\n     * <OpenLayers.Layer.Grid>. For example, to be notified of the\n     * ``loadend`` event of each tiles:\n     * (code)\n     * new OpenLayers.Layer.OSM('osm', 'http://tile.openstreetmap.org/${z}/${x}/${y}.png', {\n     *     tileOptions: {\n     *         eventListeners: {\n     *             'loadend': function(evt) {\n     *                 // do something on loadend\n     *             }\n     *         }\n     *     }\n     * });\n     * (end)\n     */\n    eventListeners: null,\n\n    /**\n     * Property: id \n     * {String} null\n     */\n    id: null,\n    \n    /** \n     * Property: layer \n     * {<OpenLayers.Layer>} layer the tile is attached to \n     */\n    layer: null,\n    \n    /**\n     * Property: url\n     * {String} url of the request.\n     *\n     * TBD 3.0 \n     * Deprecated. The base tile class does not need an url. This should be \n     * handled in subclasses. Does not belong here.\n     */\n    url: null,\n\n    /** \n     * APIProperty: bounds \n     * {<OpenLayers.Bounds>} null\n     */\n    bounds: null,\n    \n    /** \n     * Property: size \n     * {<OpenLayers.Size>} null\n     */\n    size: null,\n    \n    /** \n     * Property: position \n     * {<OpenLayers.Pixel>} Top Left pixel of the tile\n     */    \n    position: null,\n    \n    /**\n     * Property: isLoading\n     * {Boolean} Is the tile loading?\n     */\n    isLoading: false,\n    \n    /** TBD 3.0 -- remove 'url' from the list of parameters to the constructor.\n     *             there is no need for the base tile class to have a url.\n     */\n\n    /** \n     * Constructor: OpenLayers.Tile\n     * Constructor for a new <OpenLayers.Tile> instance.\n     * \n     * Parameters:\n     * layer - {<OpenLayers.Layer>} layer that the tile will go in.\n     * position - {<OpenLayers.Pixel>}\n     * bounds - {<OpenLayers.Bounds>}\n     * url - {<String>}\n     * size - {<OpenLayers.Size>}\n     * options - {Object}\n     */   \n    initialize: function(layer, position, bounds, url, size, options) {\n        this.layer = layer;\n        this.position = position.clone();\n        this.setBounds(bounds);\n        this.url = url;\n        if (size) {\n            this.size = size.clone();\n        }\n\n        //give the tile a unique id based on its BBOX.\n        this.id = OpenLayers.Util.createUniqueID(\"Tile_\");\n\n        OpenLayers.Util.extend(this, options);\n\n        this.events = new OpenLayers.Events(this);\n        if (this.eventListeners instanceof Object) {\n            this.events.on(this.eventListeners);\n        }\n    },\n\n    /**\n     * Method: unload\n     * Call immediately before destroying if you are listening to tile\n     * events, so that counters are properly handled if tile is still\n     * loading at destroy-time. Will only fire an event if the tile is\n     * still loading.\n     */\n    unload: function() {\n       if (this.isLoading) { \n           this.isLoading = false; \n           this.events.triggerEvent(\"unload\"); \n       }\n    },\n    \n    /** \n     * APIMethod: destroy\n     * Nullify references to prevent circular references and memory leaks.\n     */\n    destroy:function() {\n        this.layer  = null;\n        this.bounds = null;\n        this.size = null;\n        this.position = null;\n        \n        if (this.eventListeners) {\n            this.events.un(this.eventListeners);\n        }\n        this.events.destroy();\n        this.eventListeners = null;\n        this.events = null;\n    },\n    \n    /**\n     * Method: draw\n     * Clear whatever is currently in the tile, then return whether or not \n     *     it should actually be re-drawn. This is an example implementation\n     *     that can be overridden by subclasses. The minimum thing to do here\n     *     is to call <clear> and return the result from <shouldDraw>.\n     *\n     * Parameters:\n     * force - {Boolean} If true, the tile will not be cleared and no beforedraw\n     *     event will be fired. This is used for drawing tiles asynchronously\n     *     after drawing has been cancelled by returning false from a beforedraw\n     *     listener.\n     * \n     * Returns:\n     * {Boolean} Whether or not the tile should actually be drawn. Returns null\n     *     if a beforedraw listener returned false.\n     */\n    draw: function(force) {\n        if (!force) {\n            //clear tile's contents and mark as not drawn\n            this.clear();\n        }\n        var draw = this.shouldDraw();\n        if (draw && !force && this.events.triggerEvent(\"beforedraw\") === false) {\n            draw = null;\n        }\n        return draw;\n    },\n    \n    /**\n     * Method: shouldDraw\n     * Return whether or not the tile should actually be (re-)drawn. The only\n     * case where we *wouldn't* want to draw the tile is if the tile is outside\n     * its layer's maxExtent\n     * \n     * Returns:\n     * {Boolean} Whether or not the tile should actually be drawn.\n     */\n    shouldDraw: function() {        \n        var withinMaxExtent = false,\n            maxExtent = this.layer.maxExtent;\n        if (maxExtent) {\n            var map = this.layer.map;\n            var worldBounds = map.baseLayer.wrapDateLine && map.getMaxExtent();\n            if (this.bounds.intersectsBounds(maxExtent, {inclusive: false, worldBounds: worldBounds})) {\n                withinMaxExtent = true;\n            }\n        }\n        \n        return withinMaxExtent || this.layer.displayOutsideMaxExtent;\n    },\n    \n    /**\n     * Method: setBounds\n     * Sets the bounds on this instance\n     *\n     * Parameters:\n     * bounds {<OpenLayers.Bounds>}\n     */\n    setBounds: function(bounds) {\n        bounds = bounds.clone();\n        if (this.layer.map.baseLayer.wrapDateLine) {\n            var worldExtent = this.layer.map.getMaxExtent(),\n                tolerance = this.layer.map.getResolution();\n            bounds = bounds.wrapDateLine(worldExtent, {\n                leftTolerance: tolerance,\n                rightTolerance: tolerance\n            });\n        }\n        this.bounds = bounds;\n    },\n    \n    /** \n     * Method: moveTo\n     * Reposition the tile.\n     *\n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>}\n     * position - {<OpenLayers.Pixel>}\n     * redraw - {Boolean} Call draw method on tile after moving.\n     *     Default is true\n     */\n    moveTo: function (bounds, position, redraw) {\n        if (redraw == null) {\n            redraw = true;\n        }\n\n        this.setBounds(bounds);\n        this.position = position.clone();\n        if (redraw) {\n            this.draw();\n        }\n    },\n\n    /** \n     * Method: clear\n     * Clear the tile of any bounds/position-related data so that it can \n     *     be reused in a new location.\n     */\n    clear: function(draw) {\n        // to be extended by subclasses\n    },\n    \n    CLASS_NAME: \"OpenLayers.Tile\"\n});\n/* ======================================================================\n    OpenLayers/Tile/Image.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Tile.js\n * @requires OpenLayers/Animation.js\n * @requires OpenLayers/Util.js\n */\n\n/**\n * Class: OpenLayers.Tile.Image\n * Instances of OpenLayers.Tile.Image are used to manage the image tiles\n * used by various layers.  Create a new image tile with the\n * <OpenLayers.Tile.Image> constructor.\n *\n * Inherits from:\n *  - <OpenLayers.Tile>\n */\nOpenLayers.Tile.Image = OpenLayers.Class(OpenLayers.Tile, {\n\n    /**\n     * APIProperty: events\n     * {<OpenLayers.Events>} An events object that handles all \n     *     events on the tile.\n     *\n     * Register a listener for a particular event with the following syntax:\n     * (code)\n     * tile.events.register(type, obj, listener);\n     * (end)\n     *\n     * Supported event types (in addition to the <OpenLayers.Tile> events):\n     * beforeload - Triggered before an image is prepared for loading, when the\n     *     url for the image is known already. Listeners may call <setImage> on\n     *     the tile instance. If they do so, that image will be used and no new\n     *     one will be created.\n     */\n\n    /** \n     * APIProperty: url\n     * {String} The URL of the image being requested. No default. Filled in by\n     * layer.getURL() function. May be modified by loadstart listeners.\n     */\n    url: null,\n    \n    /** \n     * Property: imgDiv\n     * {HTMLImageElement} The image for this tile.\n     */\n    imgDiv: null,\n    \n    /**\n     * Property: frame\n     * {DOMElement} The image element is appended to the frame.  Any gutter on\n     * the image will be hidden behind the frame. If no gutter is set,\n     * this will be null.\n     */ \n    frame: null, \n\n    /** \n     * Property: imageReloadAttempts\n     * {Integer} Attempts to load the image.\n     */\n    imageReloadAttempts: null,\n    \n    /**\n     * Property: layerAlphaHack\n     * {Boolean} True if the png alpha hack needs to be applied on the layer's div.\n     */\n    layerAlphaHack: null,\n    \n    /**\n     * Property: asyncRequestId\n     * {Integer} ID of an request to see if request is still valid. This is a\n     * number which increments by 1 for each asynchronous request.\n     */\n    asyncRequestId: null,\n    \n    /**\n     * APIProperty: maxGetUrlLength\n     * {Number} If set, requests that would result in GET urls with more\n     * characters than the number provided will be made using form-encoded\n     * HTTP POST. It is good practice to avoid urls that are longer than 2048\n     * characters.\n     *\n     * Caution:\n     * Older versions of Gecko based browsers (e.g. Firefox < 3.5) and most\n     * Opera versions do not fully support this option. On all browsers,\n     * transition effects are not supported if POST requests are used.\n     */\n    maxGetUrlLength: null,\n\n    /**\n     * Property: canvasContext\n     * {CanvasRenderingContext2D} A canvas context associated with\n     * the tile image.\n     */\n    canvasContext: null,\n    \n    /**\n     * APIProperty: crossOriginKeyword\n     * The value of the crossorigin keyword to use when loading images. This is\n     * only relevant when using <getCanvasContext> for tiles from remote\n     * origins and should be set to either 'anonymous' or 'use-credentials'\n     * for servers that send Access-Control-Allow-Origin headers with their\n     * tiles.\n     */\n    crossOriginKeyword: null,\n\n    /** TBD 3.0 - reorder the parameters to the init function to remove \n     *             URL. the getUrl() function on the layer gets called on \n     *             each draw(), so no need to specify it here.\n     */\n\n    /** \n     * Constructor: OpenLayers.Tile.Image\n     * Constructor for a new <OpenLayers.Tile.Image> instance.\n     * \n     * Parameters:\n     * layer - {<OpenLayers.Layer>} layer that the tile will go in.\n     * position - {<OpenLayers.Pixel>}\n     * bounds - {<OpenLayers.Bounds>}\n     * url - {<String>} Deprecated. Remove me in 3.0.\n     * size - {<OpenLayers.Size>}\n     * options - {Object}\n     */   \n    initialize: function(layer, position, bounds, url, size, options) {\n        OpenLayers.Tile.prototype.initialize.apply(this, arguments);\n\n        this.url = url; //deprecated remove me\n        \n        this.layerAlphaHack = this.layer.alpha && OpenLayers.Util.alphaHack();\n\n        if (this.maxGetUrlLength != null || this.layer.gutter || this.layerAlphaHack) {\n            // only create frame if it's needed\n            this.frame = document.createElement(\"div\");\n            this.frame.style.position = \"absolute\";\n            this.frame.style.overflow = \"hidden\";\n        }\n        if (this.maxGetUrlLength != null) {\n            OpenLayers.Util.extend(this, OpenLayers.Tile.Image.IFrame);\n        }\n    },\n    \n    /** \n     * APIMethod: destroy\n     * nullify references to prevent circular references and memory leaks\n     */\n    destroy: function() {\n        if (this.imgDiv)  {\n            this.clear();\n            this.imgDiv = null;\n            this.frame = null;\n        }\n        // don't handle async requests any more\n        this.asyncRequestId = null;\n        OpenLayers.Tile.prototype.destroy.apply(this, arguments);\n    },\n    \n    /**\n     * Method: draw\n     * Check that a tile should be drawn, and draw it.\n     * \n     * Returns:\n     * {Boolean} Was a tile drawn? Or null if a beforedraw listener returned\n     *     false.\n     */\n    draw: function() {\n        var shouldDraw = OpenLayers.Tile.prototype.draw.apply(this, arguments);\n        if (shouldDraw) {\n            // The layer's reproject option is deprecated.\n            if (this.layer != this.layer.map.baseLayer && this.layer.reproject) {\n                // getBoundsFromBaseLayer is defined in deprecated.js.\n                this.bounds = this.getBoundsFromBaseLayer(this.position);\n            }\n            if (this.isLoading) {\n                //if we're already loading, send 'reload' instead of 'loadstart'.\n                this._loadEvent = \"reload\";\n            } else {\n                this.isLoading = true;\n                this._loadEvent = \"loadstart\";\n            }\n            this.renderTile();\n            this.positionTile();\n        } else if (shouldDraw === false) {\n            this.unload();\n        }\n        return shouldDraw;\n    },\n    \n    /**\n     * Method: renderTile\n     * Internal function to actually initialize the image tile,\n     *     position it correctly, and set its url.\n     */\n    renderTile: function() {\n        if (this.layer.async) {\n            // Asynchronous image requests call the asynchronous getURL method\n            // on the layer to fetch an image that covers 'this.bounds'.\n            var id = this.asyncRequestId = (this.asyncRequestId || 0) + 1;\n            this.layer.getURLasync(this.bounds, function(url) {\n                if (id == this.asyncRequestId) {\n                    this.url = url;\n                    this.initImage();\n                }\n            }, this);\n        } else {\n            // synchronous image requests get the url immediately.\n            this.url = this.layer.getURL(this.bounds);\n            this.initImage();\n        }\n    },\n\n    /**\n     * Method: positionTile\n     * Using the properties currenty set on the layer, position the tile correctly.\n     * This method is used both by the async and non-async versions of the Tile.Image\n     * code.\n     */\n    positionTile: function() {\n        var style = this.getTile().style,\n            size = this.frame ? this.size :\n                this.layer.getImageSize(this.bounds),\n            ratio = 1;\n        if (this.layer instanceof OpenLayers.Layer.Grid) {\n            ratio = this.layer.getServerResolution() / this.layer.map.getResolution();\n        }\n        style.left = this.position.x + \"px\";\n        style.top = this.position.y + \"px\";\n        style.width = Math.round(ratio * size.w) + \"px\";\n        style.height = Math.round(ratio * size.h) + \"px\";\n    },\n\n    /** \n     * Method: clear\n     * Remove the tile from the DOM, clear it of any image related data so that\n     * it can be reused in a new location.\n     */\n    clear: function() {\n        OpenLayers.Tile.prototype.clear.apply(this, arguments);\n        var img = this.imgDiv;\n        if (img) {\n            var tile = this.getTile();\n            if (tile.parentNode === this.layer.div) {\n                this.layer.div.removeChild(tile);\n            }\n            this.setImgSrc();\n            if (this.layerAlphaHack === true) {\n                img.style.filter = \"\";\n            }\n            OpenLayers.Element.removeClass(img, \"olImageLoadError\");\n        }\n        this.canvasContext = null;\n    },\n    \n    /**\n     * Method: getImage\n     * Returns or creates and returns the tile image.\n     */\n    getImage: function() {\n        if (!this.imgDiv) {\n            this.imgDiv = OpenLayers.Tile.Image.IMAGE.cloneNode(false);\n\n            var style = this.imgDiv.style;\n            if (this.frame) {\n                var left = 0, top = 0;\n                if (this.layer.gutter) {\n                    left = this.layer.gutter / this.layer.tileSize.w * 100;\n                    top = this.layer.gutter / this.layer.tileSize.h * 100;\n                }\n                style.left = -left + \"%\";\n                style.top = -top + \"%\";\n                style.width = (2 * left + 100) + \"%\";\n                style.height = (2 * top + 100) + \"%\";\n            }\n            style.visibility = \"hidden\";\n            style.opacity = 0;\n            if (this.layer.opacity < 1) {\n                style.filter = 'alpha(opacity=' +\n                               (this.layer.opacity * 100) +\n                               ')';\n            }\n            style.position = \"absolute\";\n            if (this.layerAlphaHack) {\n                // move the image out of sight\n                style.paddingTop = style.height;\n                style.height = \"0\";\n                style.width = \"100%\";\n            }\n            if (this.frame) {\n                this.frame.appendChild(this.imgDiv);\n            }\n        }\n\n        return this.imgDiv;\n    },\n    \n    /**\n     * APIMethod: setImage\n     * Sets the image element for this tile. This method should only be called\n     * from beforeload listeners.\n     *\n     * Parameters\n     * img - {HTMLImageElement} The image to use for this tile.\n     */\n    setImage: function(img) {\n        this.imgDiv = img;\n    },\n\n    /**\n     * Method: initImage\n     * Creates the content for the frame on the tile.\n     */\n    initImage: function() {\n        if (!this.url && !this.imgDiv) {\n            // fast path out - if there is no tile url and no previous image\n            this.isLoading = false;\n            return;\n        }\n        this.events.triggerEvent('beforeload');\n        this.layer.div.appendChild(this.getTile());\n        this.events.triggerEvent(this._loadEvent);\n        var img = this.getImage();\n        var src = img.getAttribute('src') || '';\n        if (this.url && OpenLayers.Util.isEquivalentUrl(src, this.url)) {\n            this._loadTimeout = window.setTimeout(\n                OpenLayers.Function.bind(this.onImageLoad, this), 0\n            );\n        } else {\n            this.stopLoading();\n            if (this.crossOriginKeyword) {\n                img.removeAttribute(\"crossorigin\");\n            }\n            OpenLayers.Event.observe(img, \"load\",\n                OpenLayers.Function.bind(this.onImageLoad, this)\n            );\n            OpenLayers.Event.observe(img, \"error\",\n                OpenLayers.Function.bind(this.onImageError, this)\n            );\n            this.imageReloadAttempts = 0;\n            this.setImgSrc(this.url);\n        }\n    },\n    \n    /**\n     * Method: setImgSrc\n     * Sets the source for the tile image\n     *\n     * Parameters:\n     * url - {String} or undefined to hide the image\n     */\n    setImgSrc: function(url) {\n        var img = this.imgDiv;\n        if (url) {\n            img.style.visibility = 'hidden';\n            img.style.opacity = 0;\n            // don't set crossOrigin if the url is a data URL\n            if (this.crossOriginKeyword) {\n                if (url.substr(0, 5) !== 'data:') {\n                    img.setAttribute(\"crossorigin\", this.crossOriginKeyword);\n                } else {\n                    img.removeAttribute(\"crossorigin\");\n                }\n            }\n            img.src = url;\n        } else {\n            // Remove reference to the image, and leave it to the browser's\n            // caching and garbage collection.\n            this.stopLoading();\n            this.imgDiv = null;\n            if (img.parentNode) {\n                img.parentNode.removeChild(img);\n            }\n        }\n    },\n    \n    /**\n     * Method: getTile\n     * Get the tile's markup.\n     *\n     * Returns:\n     * {DOMElement} The tile's markup\n     */\n    getTile: function() {\n        return this.frame ? this.frame : this.getImage();\n    },\n\n    /**\n     * Method: createBackBuffer\n     * Create a backbuffer for this tile. A backbuffer isn't exactly a clone\n     * of the tile's markup, because we want to avoid the reloading of the\n     * image. So we clone the frame, and steal the image from the tile.\n     *\n     * Returns:\n     * {DOMElement} The markup, or undefined if the tile has no image\n     * or if it's currently loading.\n     */\n    createBackBuffer: function() {\n        if (!this.imgDiv || this.isLoading) {\n            return;\n        }\n        var backBuffer;\n        if (this.frame) {\n            backBuffer = this.frame.cloneNode(false);\n            backBuffer.appendChild(this.imgDiv);\n        } else {\n            backBuffer = this.imgDiv;\n        }\n        this.imgDiv = null;\n        return backBuffer;\n    },\n\n    /**\n     * Method: onImageLoad\n     * Handler for the image onload event\n     */\n    onImageLoad: function() {\n        var img = this.imgDiv;\n        this.stopLoading();\n        img.style.visibility = 'inherit';\n        img.style.opacity = this.layer.opacity;\n        this.isLoading = false;\n        this.canvasContext = null;\n        this.events.triggerEvent(\"loadend\");\n\n        if (this.layerAlphaHack === true) {\n            img.style.filter =\n                \"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='\" +\n                img.src + \"', sizingMethod='scale')\";\n        }\n    },\n    \n    /**\n     * Method: onImageError\n     * Handler for the image onerror event\n     */\n    onImageError: function() {\n        var img = this.imgDiv;\n        if (img.src != null) {\n            this.imageReloadAttempts++;\n            if (this.imageReloadAttempts <= OpenLayers.IMAGE_RELOAD_ATTEMPTS) {\n                this.setImgSrc(this.layer.getURL(this.bounds));\n            } else {\n                OpenLayers.Element.addClass(img, \"olImageLoadError\");\n                this.events.triggerEvent(\"loaderror\");\n                this.onImageLoad();\n            }\n        }\n    },\n    \n    /**\n     * Method: stopLoading\n     * Stops a loading sequence so <onImageLoad> won't be executed.\n     */\n    stopLoading: function() {\n        OpenLayers.Event.stopObservingElement(this.imgDiv);\n        window.clearTimeout(this._loadTimeout);\n        delete this._loadTimeout;\n    },\n\n    /**\n     * APIMethod: getCanvasContext\n     * Returns a canvas context associated with the tile image (with\n     * the image drawn on it).\n     * Returns undefined if the browser does not support canvas, if\n     * the tile has no image or if it's currently loading.\n     *\n     * The function returns a canvas context instance but the\n     * underlying canvas is still available in the 'canvas' property:\n     * (code)\n     * var context = tile.getCanvasContext();\n     * if (context) {\n     *     var data = context.canvas.toDataURL('image/jpeg');\n     * }\n     * (end)\n     *\n     * Returns:\n     * {Boolean}\n     */\n    getCanvasContext: function() {\n        if (OpenLayers.CANVAS_SUPPORTED && this.imgDiv && !this.isLoading) {\n            if (!this.canvasContext) {\n                var canvas = document.createElement(\"canvas\");\n                canvas.width = this.size.w;\n                canvas.height = this.size.h;\n                this.canvasContext = canvas.getContext(\"2d\");\n                this.canvasContext.drawImage(this.imgDiv, 0, 0);\n            }\n            return this.canvasContext;\n        }\n    },\n\n    CLASS_NAME: \"OpenLayers.Tile.Image\"\n\n});\n\n/** \n * Constant: OpenLayers.Tile.Image.IMAGE\n * {HTMLImageElement} The image for a tile.\n */\nOpenLayers.Tile.Image.IMAGE = (function() {\n    var img = new Image();\n    img.className = \"olTileImage\";\n    // avoid image gallery menu in IE6\n    img.galleryImg = \"no\";\n    return img;\n}());\n\n/* ======================================================================\n    OpenLayers/Layer/Grid.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Layer/HTTPRequest.js\n * @requires OpenLayers/Tile/Image.js\n */\n\n/**\n * Class: OpenLayers.Layer.Grid\n * Base class for layers that use a lattice of tiles.  Create a new grid\n * layer with the <OpenLayers.Layer.Grid> constructor.\n *\n * Inherits from:\n *  - <OpenLayers.Layer.HTTPRequest>\n */\nOpenLayers.Layer.Grid = OpenLayers.Class(OpenLayers.Layer.HTTPRequest, {\n    \n    /**\n     * APIProperty: tileSize\n     * {<OpenLayers.Size>}\n     */\n    tileSize: null,\n\n    /**\n     * Property: tileOriginCorner\n     * {String} If the <tileOrigin> property is not provided, the tile origin \n     *     will be derived from the layer's <maxExtent>.  The corner of the \n     *     <maxExtent> used is determined by this property.  Acceptable values\n     *     are \"tl\" (top left), \"tr\" (top right), \"bl\" (bottom left), and \"br\"\n     *     (bottom right).  Default is \"bl\".\n     */\n    tileOriginCorner: \"bl\",\n    \n    /**\n     * APIProperty: tileOrigin\n     * {<OpenLayers.LonLat>} Optional origin for aligning the grid of tiles.\n     *     If provided, requests for tiles at all resolutions will be aligned\n     *     with this location (no tiles shall overlap this location).  If\n     *     not provided, the grid of tiles will be aligned with the layer's\n     *     <maxExtent>.  Default is ``null``.\n     */\n    tileOrigin: null,\n    \n    /** APIProperty: tileOptions\n     *  {Object} optional configuration options for <OpenLayers.Tile> instances\n     *  created by this Layer, if supported by the tile class.\n     */\n    tileOptions: null,\n\n    /**\n     * APIProperty: tileClass\n     * {<OpenLayers.Tile>} The tile class to use for this layer.\n     *     Defaults is OpenLayers.Tile.Image.\n     */\n    tileClass: OpenLayers.Tile.Image,\n    \n    /**\n     * Property: grid\n     * {Array(Array(<OpenLayers.Tile>))} This is an array of rows, each row is \n     *     an array of tiles.\n     */\n    grid: null,\n\n    /**\n     * APIProperty: singleTile\n     * {Boolean} Moves the layer into single-tile mode, meaning that one tile \n     *     will be loaded. The tile's size will be determined by the 'ratio'\n     *     property. When the tile is dragged such that it does not cover the \n     *     entire viewport, it is reloaded.\n     */\n    singleTile: false,\n\n    /** APIProperty: ratio\n     *  {Float} Used only when in single-tile mode, this specifies the \n     *          ratio of the size of the single tile to the size of the map.\n     *          Default value is 1.5.\n     */\n    ratio: 1.5,\n\n    /**\n     * APIProperty: buffer\n     * {Integer} Used only when in gridded mode, this specifies the number of \n     *           extra rows and columns of tiles on each side which will\n     *           surround the minimum grid tiles to cover the map.\n     *           For very slow loading layers, a larger value may increase\n     *           performance somewhat when dragging, but will increase bandwidth\n     *           use significantly. \n     */\n    buffer: 0,\n\n    /**\n     * APIProperty: transitionEffect\n     * {String} The transition effect to use when the map is zoomed.\n     * Two possible values:\n     *\n     * \"resize\" - Existing tiles are resized on zoom to provide a visual\n     *     effect of the zoom having taken place immediately.  As the\n     *     new tiles become available, they are drawn on top of the\n     *     resized tiles (this is the default setting).\n     * \"map-resize\" - Existing tiles are resized on zoom and placed below the\n     *     base layer.  New tiles for the base layer will cover existing tiles.\n     *     This setting is recommended when having an overlay duplicated during\n     *     the transition is undesirable (e.g. street labels or big transparent\n     *     fills). \n     * null - No transition effect.\n     *\n     * Using \"resize\" on non-opaque layers can cause undesired visual\n     * effects.  Set transitionEffect to null in this case.\n     */\n    transitionEffect: \"resize\",\n\n    /**\n     * APIProperty: numLoadingTiles\n     * {Integer} How many tiles are still loading?\n     */\n    numLoadingTiles: 0,\n\n    /**\n     * Property: serverResolutions\n     * {Array(Number}} This property is documented in subclasses as\n     *     an API property.\n     */\n    serverResolutions: null,\n\n    /**\n     * Property: loading\n     * {Boolean} Indicates if tiles are being loaded.\n     */\n    loading: false,\n    \n    /**\n     * Property: backBuffer\n     * {DOMElement} The back buffer.\n     */\n    backBuffer: null,\n\n    /**\n     * Property: gridResolution\n     * {Number} The resolution of the current grid. Used for backbuffer and\n     *     client zoom. This property is updated every time the grid is\n     *     initialized.\n     */\n    gridResolution: null,\n\n    /**\n     * Property: backBufferResolution\n     * {Number} The resolution of the current back buffer. This property is\n     *     updated each time a back buffer is created.\n     */\n    backBufferResolution: null,\n\n    /**\n     * Property: backBufferLonLat\n     * {Object} The top-left corner of the current back buffer. Includes lon\n     *     and lat properties. This object is updated each time a back buffer\n     *     is created.\n     */\n    backBufferLonLat: null,\n\n    /**\n     * Property: backBufferTimerId\n     * {Number} The id of the back buffer timer. This timer is used to\n     *     delay the removal of the back buffer, thereby preventing\n     *     flash effects caused by tile animation.\n     */\n    backBufferTimerId: null,\n\n    /**\n     * APIProperty: removeBackBufferDelay\n     * {Number} Delay for removing the backbuffer when all tiles have finished\n     *     loading. Can be set to 0 when no css opacity transitions for the\n     *     olTileImage class are used. Default is 0 for <singleTile> layers,\n     *     2500 for tiled layers. See <className> for more information on\n     *     tile animation.\n     */\n    removeBackBufferDelay: null,\n\n    /**\n     * APIProperty: className\n     * {String} Name of the class added to the layer div. If not set in the\n     *     options passed to the constructor then className defaults to\n     *     \"olLayerGridSingleTile\" for single tile layers (see <singleTile>),\n     *     and \"olLayerGrid\" for non single tile layers.\n     *\n     * Note:\n     *\n     * The displaying of tiles is not animated by default for single tile\n     *     layers - OpenLayers' default theme (style.css) includes this:\n     * (code)\n     * .olLayerGrid .olTileImage {\n     *     -webkit-transition: opacity 0.2s linear;\n     *     -moz-transition: opacity 0.2s linear;\n     *     -o-transition: opacity 0.2s linear;\n     *     transition: opacity 0.2s linear;\n     *  }\n     * (end)\n     * To animate tile displaying for any grid layer the following\n     *     CSS rule can be used:\n     * (code)\n     * .olTileImage {\n     *     -webkit-transition: opacity 0.2s linear;\n     *     -moz-transition: opacity 0.2s linear;\n     *     -o-transition: opacity 0.2s linear;\n     *     transition: opacity 0.2s linear;\n     * }\n     * (end)\n     * In that case, to avoid flash effects, <removeBackBufferDelay>\n     *     should not be zero.\n     */\n    className: null,\n    \n    /**\n     * Register a listener for a particular event with the following syntax:\n     * (code)\n     * layer.events.register(type, obj, listener);\n     * (end)\n     *\n     * Listeners will be called with a reference to an event object.  The\n     *     properties of this event depends on exactly what happened.\n     *\n     * All event objects have at least the following properties:\n     * object - {Object} A reference to layer.events.object.\n     * element - {DOMElement} A reference to layer.events.element.\n     *\n     * Supported event types:\n     * addtile - Triggered when a tile is added to this layer. Listeners receive\n     *     an object as first argument, which has a tile property that\n     *     references the tile that has been added.\n     * tileloadstart - Triggered when a tile starts loading. Listeners receive\n     *     an object as first argument, which has a tile property that\n     *     references the tile that starts loading.\n     * tileloaded - Triggered when each new tile is\n     *     loaded, as a means of progress update to listeners.\n     *     listeners can access 'numLoadingTiles' if they wish to keep\n     *     track of the loading progress. Listeners are called with an object\n     *     with a 'tile' property as first argument, making the loaded tile\n     *     available to the listener, and an 'aborted' property, which will be\n     *     true when loading was aborted and no tile data is available.\n     * tileerror - Triggered before the tileloaded event (i.e. when the tile is\n     *     still hidden) if a tile failed to load. Listeners receive an object\n     *     as first argument, which has a tile property that references the\n     *     tile that could not be loaded.\n     * retile - Triggered when the layer recreates its tile grid.\n     */\n\n    /**\n     * Property: gridLayout\n     * {Object} Object containing properties tilelon, tilelat, startcol,\n     * startrow\n     */\n    gridLayout: null,\n    \n    /**\n     * Property: rowSign\n     * {Number} 1 for grids starting at the top, -1 for grids starting at the\n     * bottom. This is used for several grid index and offset calculations.\n     */\n    rowSign: null,\n\n    /**\n     * Property: transitionendEvents\n     * {Array} Event names for transitionend\n     */\n    transitionendEvents: [\n        'transitionend', 'webkitTransitionEnd', 'otransitionend',\n        'oTransitionEnd'\n    ],\n\n    /**\n     * Constructor: OpenLayers.Layer.Grid\n     * Create a new grid layer\n     *\n     * Parameters:\n     * name - {String}\n     * url - {String}\n     * params - {Object}\n     * options - {Object} Hashtable of extra options to tag onto the layer\n     */\n    initialize: function(name, url, params, options) {\n        OpenLayers.Layer.HTTPRequest.prototype.initialize.apply(this, \n                                                                arguments);\n        this.grid = [];\n        this._removeBackBuffer = OpenLayers.Function.bind(this.removeBackBuffer, this);\n\n        this.initProperties();\n\n        this.rowSign = this.tileOriginCorner.substr(0, 1) === \"t\" ? 1 : -1;\n    },\n\n    /**\n     * Method: initProperties\n     * Set any properties that depend on the value of singleTile.\n     * Currently sets removeBackBufferDelay and className\n     */\n    initProperties: function() {\n        if (this.options.removeBackBufferDelay === undefined) {\n            this.removeBackBufferDelay = this.singleTile ? 0 : 2500;\n        }\n\n        if (this.options.className === undefined) {\n            this.className = this.singleTile ? 'olLayerGridSingleTile' :\n                                               'olLayerGrid';\n        }\n    },\n\n    /**\n     * Method: setMap\n     *\n     * Parameters:\n     * map - {<OpenLayers.Map>} The map.\n     */\n    setMap: function(map) {\n        OpenLayers.Layer.HTTPRequest.prototype.setMap.call(this, map);\n        OpenLayers.Element.addClass(this.div, this.className);\n    },\n\n    /**\n     * Method: removeMap\n     * Called when the layer is removed from the map.\n     *\n     * Parameters:\n     * map - {<OpenLayers.Map>} The map.\n     */\n    removeMap: function(map) {\n        this.removeBackBuffer();\n    },\n\n    /**\n     * APIMethod: destroy\n     * Deconstruct the layer and clear the grid.\n     */\n    destroy: function() {\n        this.removeBackBuffer();\n        this.clearGrid();\n\n        this.grid = null;\n        this.tileSize = null;\n        OpenLayers.Layer.HTTPRequest.prototype.destroy.apply(this, arguments); \n    },\n\n    /**\n     * APIMethod: mergeNewParams\n     * Refetches tiles with new params merged, keeping a backbuffer. Each\n     * loading new tile will have a css class of '.olTileReplacing'. If a\n     * stylesheet applies a 'display: none' style to that class, any fade-in\n     * transition will not apply, and backbuffers for each tile will be removed\n     * as soon as the tile is loaded.\n     * \n     * Parameters:\n     * newParams - {Object}\n     *\n     * Returns:\n     * redrawn: {Boolean} whether the layer was actually redrawn.\n     */\n\n    /**\n     * Method: clearGrid\n     * Go through and remove all tiles from the grid, calling\n     *    destroy() on each of them to kill circular references\n     */\n    clearGrid:function() {\n        if (this.grid) {\n            for(var iRow=0, len=this.grid.length; iRow<len; iRow++) {\n                var row = this.grid[iRow];\n                for(var iCol=0, clen=row.length; iCol<clen; iCol++) {\n                    var tile = row[iCol];\n                    this.destroyTile(tile);\n                }\n            }\n            this.grid = [];\n            this.gridResolution = null;\n            this.gridLayout = null;\n        }\n    },\n\n   /**\n    * APIMethod: addOptions\n    * \n    * Parameters:\n    * newOptions - {Object}\n    * reinitialize - {Boolean} If set to true, and if resolution options of the\n    *     current baseLayer were changed, the map will be recentered to make\n    *     sure that it is displayed with a valid resolution, and a\n    *     changebaselayer event will be triggered.\n    */\n    addOptions: function (newOptions, reinitialize) {\n        var singleTileChanged = newOptions.singleTile !== undefined && \n            newOptions.singleTile !== this.singleTile;\n        OpenLayers.Layer.HTTPRequest.prototype.addOptions.apply(this, arguments);\n        if (this.map && singleTileChanged) {\n            this.initProperties();\n            this.clearGrid();\n            this.tileSize = this.options.tileSize;\n            this.setTileSize();\n            if (this.visibility) {\n                this.moveTo(null, true);\n            }\n        }\n    },\n    \n    /**\n     * APIMethod: clone\n     * Create a clone of this layer\n     *\n     * Parameters:\n     * obj - {Object} Is this ever used?\n     * \n     * Returns:\n     * {<OpenLayers.Layer.Grid>} An exact clone of this OpenLayers.Layer.Grid\n     */\n    clone: function (obj) {\n        \n        if (obj == null) {\n            obj = new OpenLayers.Layer.Grid(this.name,\n                                            this.url,\n                                            this.params,\n                                            this.getOptions());\n        }\n\n        //get all additions from superclasses\n        obj = OpenLayers.Layer.HTTPRequest.prototype.clone.apply(this, [obj]);\n\n        // copy/set any non-init, non-simple values here\n        if (this.tileSize != null) {\n            obj.tileSize = this.tileSize.clone();\n        }\n        \n        // we do not want to copy reference to grid, so we make a new array\n        obj.grid = [];\n        obj.gridResolution = null;\n        // same for backbuffer\n        obj.backBuffer = null;\n        obj.backBufferTimerId = null;\n        obj.loading = false;\n        obj.numLoadingTiles = 0;\n\n        return obj;\n    },    \n\n    /**\n     * Method: moveTo\n     * This function is called whenever the map is moved. All the moving\n     * of actual 'tiles' is done by the map, but moveTo's role is to accept\n     * a bounds and make sure the data that that bounds requires is pre-loaded.\n     *\n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>}\n     * zoomChanged - {Boolean}\n     * dragging - {Boolean}\n     */\n    moveTo:function(bounds, zoomChanged, dragging) {\n\n        OpenLayers.Layer.HTTPRequest.prototype.moveTo.apply(this, arguments);\n\n        bounds = bounds || this.map.getExtent();\n\n        if (bounds != null) {\n             \n            // if grid is empty or zoom has changed, we *must* re-tile\n            var forceReTile = !this.grid.length || zoomChanged;\n            \n            // total bounds of the tiles\n            var tilesBounds = this.getTilesBounds();            \n\n            // the new map resolution\n            var resolution = this.map.getResolution();\n\n            // the server-supported resolution for the new map resolution\n            var serverResolution = this.getServerResolution(resolution);\n\n            if (this.singleTile) {\n                \n                // We want to redraw whenever even the slightest part of the \n                //  current bounds is not contained by our tile.\n                //  (thus, we do not specify partial -- its default is false)\n\n                if ( forceReTile ||\n                     (!dragging && !tilesBounds.containsBounds(bounds))) {\n\n                    // In single tile mode with no transition effect, we insert\n                    // a non-scaled backbuffer when the layer is moved. But if\n                    // a zoom occurs right after a move, i.e. before the new\n                    // image is received, we need to remove the backbuffer, or\n                    // an ill-positioned image will be visible during the zoom\n                    // transition.\n\n                    if(zoomChanged && this.transitionEffect !== 'resize') {\n                        this.removeBackBuffer();\n                    }\n\n                    if(!zoomChanged || this.transitionEffect === 'resize') {\n                        this.applyBackBuffer(resolution);\n                    }\n\n                    this.initSingleTile(bounds);\n                }\n            } else {\n\n                // if the bounds have changed such that they are not even \n                // *partially* contained by our tiles (e.g. when user has \n                // programmatically panned to the other side of the earth on\n                // zoom level 18), then moveGriddedTiles could potentially have\n                // to run through thousands of cycles, so we want to reTile\n                // instead (thus, partial true).  \n                forceReTile = forceReTile ||\n                    !tilesBounds.intersectsBounds(bounds, {\n                        worldBounds: this.map.baseLayer.wrapDateLine &&\n                            this.map.getMaxExtent()\n                    });\n\n                if(forceReTile) {\n                    if(zoomChanged && (this.transitionEffect === 'resize' ||\n                                          this.gridResolution === resolution)) {\n                        this.applyBackBuffer(resolution);\n                    }\n                    this.initGriddedTiles(bounds);\n                } else {\n                    this.moveGriddedTiles();\n                }\n            }\n        }\n    },\n\n    /**\n     * Method: getTileData\n     * Given a map location, retrieve a tile and the pixel offset within that\n     *     tile corresponding to the location.  If there is not an existing \n     *     tile in the grid that covers the given location, null will be \n     *     returned.\n     *\n     * Parameters:\n     * loc - {<OpenLayers.LonLat>} map location\n     *\n     * Returns:\n     * {Object} Object with the following properties: tile ({<OpenLayers.Tile>}),\n     *     i ({Number} x-pixel offset from top left), and j ({Integer} y-pixel\n     *     offset from top left).\n     */\n    getTileData: function(loc) {\n        var data = null,\n            x = loc.lon,\n            y = loc.lat,\n            numRows = this.grid.length;\n\n        if (this.map && numRows) {\n            var res = this.map.getResolution(),\n                tileWidth = this.tileSize.w,\n                tileHeight = this.tileSize.h,\n                bounds = this.grid[0][0].bounds,\n                left = bounds.left,\n                top = bounds.top;\n\n            if (x < left) {\n                // deal with multiple worlds\n                if (this.map.baseLayer.wrapDateLine) {\n                    var worldWidth = this.map.getMaxExtent().getWidth();\n                    var worldsAway = Math.ceil((left - x) / worldWidth);\n                    x += worldWidth * worldsAway;\n                }\n            }\n            // tile distance to location (fractional number of tiles);\n            var dtx = (x - left) / (res * tileWidth);\n            var dty = (top - y) / (res * tileHeight);\n            // index of tile in grid\n            var col = Math.floor(dtx);\n            var row = Math.floor(dty);\n            if (row >= 0 && row < numRows) {\n                var tile = this.grid[row][col];\n                if (tile) {\n                    data = {\n                        tile: tile,\n                        // pixel index within tile\n                        i: Math.floor((dtx - col) * tileWidth),\n                        j: Math.floor((dty - row) * tileHeight)\n                    };                    \n                }\n            }\n        }\n        return data;\n    },\n    \n    /**\n     * Method: destroyTile\n     *\n     * Parameters:\n     * tile - {<OpenLayers.Tile>}\n     */\n    destroyTile: function(tile) {\n        this.removeTileMonitoringHooks(tile);\n        tile.destroy();\n    },\n\n    /**\n     * Method: getServerResolution\n     * Return the closest server-supported resolution.\n     *\n     * Parameters:\n     * resolution - {Number} The base resolution. If undefined the\n     *     map resolution is used.\n     *\n     * Returns:\n     * {Number} The closest server resolution value.\n     */\n    getServerResolution: function(resolution) {\n        var distance = Number.POSITIVE_INFINITY;\n        resolution = resolution || this.map.getResolution();\n        if(this.serverResolutions &&\n           OpenLayers.Util.indexOf(this.serverResolutions, resolution) === -1) {\n            var i, newDistance, newResolution, serverResolution;\n            for(i=this.serverResolutions.length-1; i>= 0; i--) {\n                newResolution = this.serverResolutions[i];\n                newDistance = Math.abs(newResolution - resolution);\n                if (newDistance > distance) {\n                    break;\n                }\n                distance = newDistance;\n                serverResolution = newResolution;\n            }\n            resolution = serverResolution;\n        }\n        return resolution;\n    },\n\n    /**\n     * Method: getServerZoom\n     * Return the zoom value corresponding to the best matching server\n     * resolution, taking into account <serverResolutions> and <zoomOffset>.\n     *\n     * Returns:\n     * {Number} The closest server supported zoom. This is not the map zoom\n     *     level, but an index of the server's resolutions array.\n     */\n    getServerZoom: function() {\n        var resolution = this.getServerResolution();\n        return this.serverResolutions ?\n            OpenLayers.Util.indexOf(this.serverResolutions, resolution) :\n            this.map.getZoomForResolution(resolution) + (this.zoomOffset || 0);\n    },\n\n    /**\n     * Method: applyBackBuffer\n     * Create, insert, scale and position a back buffer for the layer.\n     *\n     * Parameters:\n     * resolution - {Number} The resolution to transition to.\n     */\n    applyBackBuffer: function(resolution) {\n        if(this.backBufferTimerId !== null) {\n            this.removeBackBuffer();\n        }\n        var backBuffer = this.backBuffer;\n        if(!backBuffer) {\n            backBuffer = this.createBackBuffer();\n            if(!backBuffer) {\n                return;\n            }\n            if (resolution === this.gridResolution) {\n                this.div.insertBefore(backBuffer, this.div.firstChild);\n            } else {\n                this.map.baseLayer.div.parentNode.insertBefore(backBuffer, this.map.baseLayer.div);\n            }\n            this.backBuffer = backBuffer;\n\n            // set some information in the instance for subsequent\n            // calls to applyBackBuffer where the same back buffer\n            // is reused\n            var topLeftTileBounds = this.grid[0][0].bounds;\n            this.backBufferLonLat = {\n                lon: topLeftTileBounds.left,\n                lat: topLeftTileBounds.top\n            };\n            this.backBufferResolution = this.gridResolution;\n        }\n        \n        var ratio = this.backBufferResolution / resolution;\n\n        // scale the tiles inside the back buffer\n        var tiles = backBuffer.childNodes, tile;\n        for (var i=tiles.length-1; i>=0; --i) {\n            tile = tiles[i];\n            tile.style.top = ((ratio * tile._i * backBuffer._th) | 0) + 'px';\n            tile.style.left = ((ratio * tile._j * backBuffer._tw) | 0) + 'px';\n            tile.style.width = Math.round(ratio * tile._w) + 'px';\n            tile.style.height = Math.round(ratio * tile._h) + 'px';\n        }\n\n        // and position it (based on the grid's top-left corner)\n        var position = this.getViewPortPxFromLonLat(\n                this.backBufferLonLat, resolution);\n        var leftOffset = this.map.layerContainerOriginPx.x;\n        var topOffset = this.map.layerContainerOriginPx.y;\n        backBuffer.style.left = Math.round(position.x - leftOffset) + 'px';\n        backBuffer.style.top = Math.round(position.y - topOffset) + 'px';\n    },\n\n    /**\n     * Method: createBackBuffer\n     * Create a back buffer.\n     *\n     * Returns:\n     * {DOMElement} The DOM element for the back buffer, undefined if the\n     * grid isn't initialized yet.\n     */\n    createBackBuffer: function() {\n        var backBuffer;\n        if(this.grid.length > 0) {\n            backBuffer = document.createElement('div');\n            backBuffer.id = this.div.id + '_bb';\n            backBuffer.className = 'olBackBuffer';\n            backBuffer.style.position = 'absolute';\n            var map = this.map;\n            backBuffer.style.zIndex = this.transitionEffect === 'resize' ?\n                    this.getZIndex() - 1 :\n                    // 'map-resize':\n                    map.Z_INDEX_BASE.BaseLayer -\n                            (map.getNumLayers() - map.getLayerIndex(this));\n            for(var i=0, lenI=this.grid.length; i<lenI; i++) {\n                for(var j=0, lenJ=this.grid[i].length; j<lenJ; j++) {\n                    var tile = this.grid[i][j],\n                        markup = this.grid[i][j].createBackBuffer();\n                    if (markup) {\n                        markup._i = i;\n                        markup._j = j;\n                        markup._w = this.singleTile ?\n                                this.getImageSize(tile.bounds).w : tile.size.w;\n                        markup._h = tile.size.h;\n                        markup.id = tile.id + '_bb';\n                        backBuffer.appendChild(markup);\n                    }\n                }\n            }\n            backBuffer._tw = this.tileSize.w;\n            backBuffer._th = this.tileSize.h;\n        }\n        return backBuffer;\n    },\n\n    /**\n     * Method: removeBackBuffer\n     * Remove back buffer from DOM.\n     */\n    removeBackBuffer: function() {\n        if (this._transitionElement) {\n            for (var i=this.transitionendEvents.length-1; i>=0; --i) {\n                OpenLayers.Event.stopObserving(this._transitionElement,\n                    this.transitionendEvents[i], this._removeBackBuffer);\n            }\n            delete this._transitionElement;\n        }\n        if(this.backBuffer) {\n            if (this.backBuffer.parentNode) {\n                this.backBuffer.parentNode.removeChild(this.backBuffer);\n            }\n            this.backBuffer = null;\n            this.backBufferResolution = null;\n            if(this.backBufferTimerId !== null) {\n                window.clearTimeout(this.backBufferTimerId);\n                this.backBufferTimerId = null;\n            }\n        }\n    },\n\n    /**\n     * Method: moveByPx\n     * Move the layer based on pixel vector.\n     *\n     * Parameters:\n     * dx - {Number}\n     * dy - {Number}\n     */\n    moveByPx: function(dx, dy) {\n        if (!this.singleTile) {\n            this.moveGriddedTiles();\n        }\n    },\n\n    /**\n     * APIMethod: setTileSize\n     * Check if we are in singleTile mode and if so, set the size as a ratio\n     *     of the map size (as specified by the layer's 'ratio' property).\n     * \n     * Parameters:\n     * size - {<OpenLayers.Size>}\n     */\n    setTileSize: function(size) { \n        if (this.singleTile) {\n            size = this.map.getSize();\n            size.h = parseInt(size.h * this.ratio, 10);\n            size.w = parseInt(size.w * this.ratio, 10);\n        } \n        OpenLayers.Layer.HTTPRequest.prototype.setTileSize.apply(this, [size]);\n    },\n\n    /**\n     * APIMethod: getTilesBounds\n     * Return the bounds of the tile grid.\n     *\n     * Returns:\n     * {<OpenLayers.Bounds>} A Bounds object representing the bounds of all the\n     *     currently loaded tiles (including those partially or not at all seen \n     *     onscreen).\n     */\n    getTilesBounds: function() {    \n        var bounds = null; \n        \n        var length = this.grid.length;\n        if (length) {\n            var bottomLeftTileBounds = this.grid[length - 1][0].bounds,\n                width = this.grid[0].length * bottomLeftTileBounds.getWidth(),\n                height = this.grid.length * bottomLeftTileBounds.getHeight();\n            \n            bounds = new OpenLayers.Bounds(bottomLeftTileBounds.left, \n                                           bottomLeftTileBounds.bottom,\n                                           bottomLeftTileBounds.left + width, \n                                           bottomLeftTileBounds.bottom + height);\n        }   \n        return bounds;\n    },\n\n    /**\n     * Method: initSingleTile\n     * \n     * Parameters: \n     * bounds - {<OpenLayers.Bounds>}\n     */\n    initSingleTile: function(bounds) {\n        this.events.triggerEvent(\"retile\");\n\n        //determine new tile bounds\n        var center = bounds.getCenterLonLat();\n        var tileWidth = bounds.getWidth() * this.ratio;\n        var tileHeight = bounds.getHeight() * this.ratio;\n                                       \n        var tileBounds = \n            new OpenLayers.Bounds(center.lon - (tileWidth/2),\n                                  center.lat - (tileHeight/2),\n                                  center.lon + (tileWidth/2),\n                                  center.lat + (tileHeight/2));\n\n        // store the resolution of the grid\n        this.gridResolution = this.getServerResolution();\n  \n        // same logic as OpenLayers.Tile#shouldDraw\n        var maxExtent = this.maxExtent;\n        if (maxExtent && (!this.displayOutsideMaxExtent ||\n                (this.map.baseLayer.wrapDateLine &&\n                this.maxExtent.equals(this.map.getMaxExtent())))) {\n            tileBounds.left = Math.max(tileBounds.left, maxExtent.left);\n            tileBounds.right = Math.min(tileBounds.right, maxExtent.right);\n        }\n\n        var px = this.map.getLayerPxFromLonLat({\n            lon: tileBounds.left,\n            lat: tileBounds.top\n        });\n\n        if (!this.grid.length) {\n            this.grid[0] = [];\n        }\n\n        var tile = this.grid[0][0];\n        if (!tile) {\n            tile = this.addTile(tileBounds, px);\n\n            this.addTileMonitoringHooks(tile);\n            tile.draw();\n            this.grid[0][0] = tile;\n        } else {\n            tile.moveTo(tileBounds, px);\n        }           \n        \n        //remove all but our single tile\n        this.removeExcessTiles(1,1);\n    },\n\n    /** \n     * Method: calculateGridLayout\n     * Generate parameters for the grid layout.\n     *\n     * Parameters:\n     * bounds - {<OpenLayers.Bound>|Object} OpenLayers.Bounds or an\n     *     object with a 'left' and 'top' properties.\n     * origin - {<OpenLayers.LonLat>|Object} OpenLayers.LonLat or an\n     *     object with a 'lon' and 'lat' properties.\n     * resolution - {Number}\n     *\n     * Returns:\n     * {Object} Object containing properties tilelon, tilelat, startcol,\n     * startrow\n     */\n    calculateGridLayout: function(bounds, origin, resolution) {\n        var tilelon = resolution * this.tileSize.w;\n        var tilelat = resolution * this.tileSize.h;\n        \n        var offsetlon = bounds.left - origin.lon;\n        var tilecol = Math.floor(offsetlon/tilelon) - this.buffer;\n        \n        var rowSign = this.rowSign;\n\n        var offsetlat = rowSign * (origin.lat - bounds.top + tilelat);  \n        var tilerow = Math[~rowSign ? 'floor' : 'ceil'](offsetlat/tilelat) - this.buffer * rowSign;\n        \n        return { \n          tilelon: tilelon, tilelat: tilelat,\n          startcol: tilecol, startrow: tilerow\n        };\n\n    },\n\n    getImageSize: function(bounds) {\n        var tileSize = OpenLayers.Layer.HTTPRequest.prototype.getImageSize.apply(this, arguments);\n        if (this.singleTile) {\n            tileSize = new OpenLayers.Size(\n                Math.round(bounds.getWidth() / this.gridResolution),\n                tileSize.h\n            );\n        }\n        return tileSize;\n    },\n\n    /**\n     * Method: getTileOrigin\n     * Determine the origin for aligning the grid of tiles.  If a <tileOrigin>\n     *     property is supplied, that will be returned.  Otherwise, the origin\n     *     will be derived from the layer's <maxExtent> property.  In this case,\n     *     the tile origin will be the corner of the <maxExtent> given by the \n     *     <tileOriginCorner> property.\n     *\n     * Returns:\n     * {<OpenLayers.LonLat>} The tile origin.\n     */\n    getTileOrigin: function() {\n        var origin = this.tileOrigin;\n        if (!origin) {\n            var extent = this.getMaxExtent();\n            var edges = ({\n                \"tl\": [\"left\", \"top\"],\n                \"tr\": [\"right\", \"top\"],\n                \"bl\": [\"left\", \"bottom\"],\n                \"br\": [\"right\", \"bottom\"]\n            })[this.tileOriginCorner];\n            origin = new OpenLayers.LonLat(extent[edges[0]], extent[edges[1]]);\n        }\n        return origin;\n    },\n\n    /**\n     * Method: getTileBoundsForGridIndex\n     *\n     * Parameters:\n     * row - {Number} The row of the grid\n     * col - {Number} The column of the grid\n     *\n     * Returns:\n     * {<OpenLayers.Bounds>} The bounds for the tile at (row, col)\n     */\n    getTileBoundsForGridIndex: function(row, col) {\n        var origin = this.getTileOrigin();\n        var tileLayout = this.gridLayout;\n        var tilelon = tileLayout.tilelon;\n        var tilelat = tileLayout.tilelat;\n        var startcol = tileLayout.startcol;\n        var startrow = tileLayout.startrow;\n        var rowSign = this.rowSign;\n        return new OpenLayers.Bounds(\n            origin.lon + (startcol + col) * tilelon,\n            origin.lat - (startrow + row * rowSign) * tilelat * rowSign,\n            origin.lon + (startcol + col + 1) * tilelon,\n            origin.lat - (startrow + (row - 1) * rowSign) * tilelat * rowSign\n        );\n    },\n\n    /**\n     * Method: initGriddedTiles\n     * \n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>}\n     */\n    initGriddedTiles:function(bounds) {\n        this.events.triggerEvent(\"retile\");\n\n        // work out mininum number of rows and columns; this is the number of\n        // tiles required to cover the viewport plus at least one for panning\n\n        var viewSize = this.map.getSize();\n        \n        var origin = this.getTileOrigin();\n        var resolution = this.map.getResolution(),\n            serverResolution = this.getServerResolution(),\n            ratio = resolution / serverResolution,\n            tileSize = {\n                w: this.tileSize.w / ratio,\n                h: this.tileSize.h / ratio\n            };\n\n        var minRows = Math.ceil(viewSize.h/tileSize.h) + \n                      2 * this.buffer + 1;\n        var minCols = Math.ceil(viewSize.w/tileSize.w) +\n                      2 * this.buffer + 1;\n\n        var tileLayout = this.calculateGridLayout(bounds, origin, serverResolution);\n        this.gridLayout = tileLayout;\n        \n        var tilelon = tileLayout.tilelon;\n        var tilelat = tileLayout.tilelat;\n        \n        var layerContainerDivLeft = this.map.layerContainerOriginPx.x;\n        var layerContainerDivTop = this.map.layerContainerOriginPx.y;\n\n        var tileBounds = this.getTileBoundsForGridIndex(0, 0);\n        var startPx = this.map.getViewPortPxFromLonLat(\n            new OpenLayers.LonLat(tileBounds.left, tileBounds.top)\n        );\n        startPx.x = Math.round(startPx.x) - layerContainerDivLeft;\n        startPx.y = Math.round(startPx.y) - layerContainerDivTop;\n\n        var tileData = [], center = this.map.getCenter();\n\n        var rowidx = 0;\n        do {\n            var row = this.grid[rowidx];\n            if (!row) {\n                row = [];\n                this.grid.push(row);\n            }\n            \n            var colidx = 0;\n            do {\n                tileBounds = this.getTileBoundsForGridIndex(rowidx, colidx);\n                var px = startPx.clone();\n                px.x = px.x + colidx * Math.round(tileSize.w);\n                px.y = px.y + rowidx * Math.round(tileSize.h);\n                var tile = row[colidx];\n                if (!tile) {\n                    tile = this.addTile(tileBounds, px);\n                    this.addTileMonitoringHooks(tile);\n                    row.push(tile);\n                } else {\n                    tile.moveTo(tileBounds, px, false);\n                }\n                var tileCenter = tileBounds.getCenterLonLat();\n                tileData.push({\n                    tile: tile,\n                    distance: Math.pow(tileCenter.lon - center.lon, 2) +\n                        Math.pow(tileCenter.lat - center.lat, 2)\n                });\n     \n                colidx += 1;\n            } while ((tileBounds.right <= bounds.right + tilelon * this.buffer)\n                     || colidx < minCols);\n             \n            rowidx += 1;\n        } while((tileBounds.bottom >= bounds.bottom - tilelat * this.buffer)\n                || rowidx < minRows);\n        \n        //shave off excess rows and columns\n        this.removeExcessTiles(rowidx, colidx);\n\n        var resolution = this.getServerResolution();\n        // store the resolution of the grid\n        this.gridResolution = resolution;\n\n        //now actually draw the tiles\n        tileData.sort(function(a, b) {\n            return a.distance - b.distance; \n        });\n        for (var i=0, ii=tileData.length; i<ii; ++i) {\n            tileData[i].tile.draw();\n        }\n    },\n\n    /**\n     * Method: getMaxExtent\n     * Get this layer's maximum extent. (Implemented as a getter for\n     *     potential specific implementations in sub-classes.)\n     *\n     * Returns:\n     * {<OpenLayers.Bounds>}\n     */\n    getMaxExtent: function() {\n        return this.maxExtent;\n    },\n\n    /**\n     * APIMethod: addTile\n     * Create a tile, initialize it, and add it to the layer div. \n     *\n     * Parameters\n     * bounds - {<OpenLayers.Bounds>}\n     * position - {<OpenLayers.Pixel>}\n     *\n     * Returns:\n     * {<OpenLayers.Tile>} The added OpenLayers.Tile\n     */\n    addTile: function(bounds, position) {\n        var tile = new this.tileClass(\n            this, position, bounds, null, this.tileSize, this.tileOptions\n        );\n        this.events.triggerEvent(\"addtile\", {tile: tile});\n        return tile;\n    },\n    \n    /** \n     * Method: addTileMonitoringHooks\n     * This function takes a tile as input and adds the appropriate hooks to \n     *     the tile so that the layer can keep track of the loading tiles.\n     * \n     * Parameters: \n     * tile - {<OpenLayers.Tile>}\n     */\n    addTileMonitoringHooks: function(tile) {\n        \n        var replacingCls = 'olTileReplacing';\n\n        tile.onLoadStart = function() {\n            //if that was first tile then trigger a 'loadstart' on the layer\n            if (this.loading === false) {\n                this.loading = true;\n                this.events.triggerEvent(\"loadstart\");\n            }\n            this.events.triggerEvent(\"tileloadstart\", {tile: tile});\n            this.numLoadingTiles++;\n            if (!this.singleTile && this.backBuffer && this.gridResolution === this.backBufferResolution) {\n                OpenLayers.Element.addClass(tile.getTile(), replacingCls);\n            }\n        };\n      \n        tile.onLoadEnd = function(evt) {\n            this.numLoadingTiles--;\n            var aborted = evt.type === 'unload';\n            this.events.triggerEvent(\"tileloaded\", {\n                tile: tile,\n                aborted: aborted\n            });\n            if (!this.singleTile && !aborted && this.backBuffer && this.gridResolution === this.backBufferResolution) {\n                var tileDiv = tile.getTile();\n                if (OpenLayers.Element.getStyle(tileDiv, 'display') === 'none') {\n                    var bufferTile = document.getElementById(tile.id + '_bb');\n                    if (bufferTile) {\n                        bufferTile.parentNode.removeChild(bufferTile);\n                    }\n                }\n                OpenLayers.Element.removeClass(tileDiv, replacingCls);\n            }\n            //if that was the last tile, then trigger a 'loadend' on the layer\n            if (this.numLoadingTiles === 0) {\n                if (this.backBuffer) {\n                    if (this.backBuffer.childNodes.length === 0) {\n                        // no tiles transitioning, remove immediately\n                        this.removeBackBuffer();\n                    } else {\n                        // wait until transition has ended or delay has passed\n                        this._transitionElement = aborted ?\n                            this.div.lastChild : tile.imgDiv;\n                        var transitionendEvents = this.transitionendEvents;\n                        for (var i=transitionendEvents.length-1; i>=0; --i) {\n                            OpenLayers.Event.observe(this._transitionElement,\n                                transitionendEvents[i],\n                                this._removeBackBuffer);\n                        }\n                        // the removal of the back buffer is delayed to prevent\n                        // flash effects due to the animation of tile displaying\n                        this.backBufferTimerId = window.setTimeout(\n                            this._removeBackBuffer, this.removeBackBufferDelay\n                        );\n                    }\n                }\n                this.loading = false;\n                this.events.triggerEvent(\"loadend\");\n            }\n        };\n        \n        tile.onLoadError = function() {\n            this.events.triggerEvent(\"tileerror\", {tile: tile});\n        };\n        \n        tile.events.on({\n            \"loadstart\": tile.onLoadStart,\n            \"loadend\": tile.onLoadEnd,\n            \"unload\": tile.onLoadEnd,\n            \"loaderror\": tile.onLoadError,\n            scope: this\n        });\n    },\n\n    /** \n     * Method: removeTileMonitoringHooks\n     * This function takes a tile as input and removes the tile hooks \n     *     that were added in addTileMonitoringHooks()\n     * \n     * Parameters: \n     * tile - {<OpenLayers.Tile>}\n     */\n    removeTileMonitoringHooks: function(tile) {\n        tile.unload();\n        tile.events.un({\n            \"loadstart\": tile.onLoadStart,\n            \"loadend\": tile.onLoadEnd,\n            \"unload\": tile.onLoadEnd,\n            \"loaderror\": tile.onLoadError,\n            scope: this\n        });\n    },\n    \n    /**\n     * Method: moveGriddedTiles\n     */\n    moveGriddedTiles: function() {\n        var buffer = this.buffer + 1;\n        while(true) {\n            var tlTile = this.grid[0][0];\n            var tlViewPort = {\n                x: tlTile.position.x +\n                    this.map.layerContainerOriginPx.x,\n                y: tlTile.position.y +\n                    this.map.layerContainerOriginPx.y\n            };\n            var ratio = this.getServerResolution() / this.map.getResolution();\n            var tileSize = {\n                w: Math.round(this.tileSize.w * ratio),\n                h: Math.round(this.tileSize.h * ratio)\n            };\n            if (tlViewPort.x > -tileSize.w * (buffer - 1)) {\n                this.shiftColumn(true, tileSize);\n            } else if (tlViewPort.x < -tileSize.w * buffer) {\n                this.shiftColumn(false, tileSize);\n            } else if (tlViewPort.y > -tileSize.h * (buffer - 1)) {\n                this.shiftRow(true, tileSize);\n            } else if (tlViewPort.y < -tileSize.h * buffer) {\n                this.shiftRow(false, tileSize);\n            } else {\n                break;\n            }\n        }\n    },\n\n    /**\n     * Method: shiftRow\n     * Shifty grid work\n     *\n     * Parameters:\n     * prepend - {Boolean} if true, prepend to beginning.\n     *                          if false, then append to end\n     * tileSize - {Object} rendered tile size; object with w and h properties\n     */\n    shiftRow: function(prepend, tileSize) {\n        var grid = this.grid;\n        var rowIndex = prepend ? 0 : (grid.length - 1);\n        var sign = prepend ? -1 : 1;\n        var rowSign = this.rowSign;\n        var tileLayout = this.gridLayout;\n        tileLayout.startrow += sign * rowSign;\n\n        var modelRow = grid[rowIndex];\n        var row = grid[prepend ? 'pop' : 'shift']();\n        for (var i=0, len=row.length; i<len; i++) {\n            var tile = row[i];\n            var position = modelRow[i].position.clone();\n            position.y += tileSize.h * sign;\n            tile.moveTo(this.getTileBoundsForGridIndex(rowIndex, i), position);\n        }\n        grid[prepend ? 'unshift' : 'push'](row);\n    },\n\n    /**\n     * Method: shiftColumn\n     * Shift grid work in the other dimension\n     *\n     * Parameters:\n     * prepend - {Boolean} if true, prepend to beginning.\n     *                          if false, then append to end\n     * tileSize - {Object} rendered tile size; object with w and h properties\n     */\n    shiftColumn: function(prepend, tileSize) {\n        var grid = this.grid;\n        var colIndex = prepend ? 0 : (grid[0].length - 1);\n        var sign = prepend ? -1 : 1;\n        var tileLayout = this.gridLayout;\n        tileLayout.startcol += sign;\n\n        for (var i=0, len=grid.length; i<len; i++) {\n            var row = grid[i];\n            var position = row[colIndex].position.clone();\n            var tile = row[prepend ? 'pop' : 'shift']();            \n            position.x += tileSize.w * sign;\n            tile.moveTo(this.getTileBoundsForGridIndex(i, colIndex), position);\n            row[prepend ? 'unshift' : 'push'](tile);\n        }\n    },\n\n    /**\n     * Method: removeExcessTiles\n     * When the size of the map or the buffer changes, we may need to\n     *     remove some excess rows and columns.\n     * \n     * Parameters:\n     * rows - {Integer} Maximum number of rows we want our grid to have.\n     * columns - {Integer} Maximum number of columns we want our grid to have.\n     */\n    removeExcessTiles: function(rows, columns) {\n        var i, l;\n        \n        // remove extra rows\n        while (this.grid.length > rows) {\n            var row = this.grid.pop();\n            for (i=0, l=row.length; i<l; i++) {\n                var tile = row[i];\n                this.destroyTile(tile);\n            }\n        }\n        \n        // remove extra columns\n        for (i=0, l=this.grid.length; i<l; i++) {\n            while (this.grid[i].length > columns) {\n                var row = this.grid[i];\n                var tile = row.pop();\n                this.destroyTile(tile);\n            }\n        }\n    },\n\n    /**\n     * Method: onMapResize\n     * For singleTile layers, this will set a new tile size according to the\n     * dimensions of the map pane.\n     */\n    onMapResize: function() {\n        if (this.singleTile) {\n            this.clearGrid();\n            this.setTileSize();\n        }\n    },\n    \n    /**\n     * APIMethod: getTileBounds\n     * Returns The tile bounds for a layer given a pixel location.\n     *\n     * Parameters:\n     * viewPortPx - {<OpenLayers.Pixel>} The location in the viewport.\n     *\n     * Returns:\n     * {<OpenLayers.Bounds>} Bounds of the tile at the given pixel location.\n     */\n    getTileBounds: function(viewPortPx) {\n        var maxExtent = this.maxExtent;\n        var resolution = this.getResolution();\n        var tileMapWidth = resolution * this.tileSize.w;\n        var tileMapHeight = resolution * this.tileSize.h;\n        var mapPoint = this.getLonLatFromViewPortPx(viewPortPx);\n        var tileLeft = maxExtent.left + (tileMapWidth *\n                                         Math.floor((mapPoint.lon -\n                                                     maxExtent.left) /\n                                                    tileMapWidth));\n        var tileBottom = maxExtent.bottom + (tileMapHeight *\n                                             Math.floor((mapPoint.lat -\n                                                         maxExtent.bottom) /\n                                                        tileMapHeight));\n        return new OpenLayers.Bounds(tileLeft, tileBottom,\n                                     tileLeft + tileMapWidth,\n                                     tileBottom + tileMapHeight);\n    },\n\n    CLASS_NAME: \"OpenLayers.Layer.Grid\"\n});\n/* ======================================================================\n    OpenLayers/TileManager.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Util.js\n * @requires OpenLayers/BaseTypes.js\n * @requires OpenLayers/BaseTypes/Element.js\n * @requires OpenLayers/Layer/Grid.js\n * @requires OpenLayers/Tile/Image.js\n */\n\n/**\n * Class: OpenLayers.TileManager\n * Provides queueing of image requests and caching of image elements.\n *\n * Queueing avoids unnecessary image requests while changing zoom levels\n * quickly, and helps improve dragging performance on mobile devices that show\n * a lag in dragging when loading of new images starts. <zoomDelay> and\n * <moveDelay> are the configuration options to control this behavior.\n *\n * Caching avoids setting the src on image elements for images that have already\n * been used. Several maps can share a TileManager instance, in which case each\n * map gets its own tile queue, but all maps share the same tile cache.\n */\nOpenLayers.TileManager = OpenLayers.Class({\n    \n    /**\n     * APIProperty: cacheSize\n     * {Number} Number of image elements to keep referenced in this instance's\n     * cache for fast reuse. Default is 256.\n     */\n    cacheSize: 256,\n\n    /**\n     * APIProperty: tilesPerFrame\n     * {Number} Number of queued tiles to load per frame (see <frameDelay>).\n     *     Default is 2.\n     */\n    tilesPerFrame: 2,\n\n    /**\n     * APIProperty: frameDelay\n     * {Number} Delay between tile loading frames (see <tilesPerFrame>) in\n     *     milliseconds. Default is 16.\n     */\n    frameDelay: 16,\n\n    /**\n     * APIProperty: moveDelay\n     * {Number} Delay in milliseconds after a map's move event before loading\n     * tiles. Default is 100.\n     */\n    moveDelay: 100,\n    \n    /**\n     * APIProperty: zoomDelay\n     * {Number} Delay in milliseconds after a map's zoomend event before loading\n     * tiles. Default is 200.\n     */\n    zoomDelay: 200,\n    \n    /**\n     * Property: maps\n     * {Array(<OpenLayers.Map>)} The maps to manage tiles on.\n     */\n    maps: null,\n    \n    /**\n     * Property: tileQueueId\n     * {Object} The ids of the <drawTilesFromQueue> loop, keyed by map id.\n     */\n    tileQueueId: null,\n\n    /**\n     * Property: tileQueue\n     * {Object(Array(<OpenLayers.Tile>))} Tiles queued for drawing, keyed by\n     * map id.\n     */\n    tileQueue: null,\n    \n    /**\n     * Property: tileCache\n     * {Object} Cached image elements, keyed by URL.\n     */\n    tileCache: null,\n    \n    /**\n     * Property: tileCacheIndex\n     * {Array(String)} URLs of cached tiles. First entry is the least recently\n     *    used.\n     */\n    tileCacheIndex: null,    \n    \n    /** \n     * Constructor: OpenLayers.TileManager\n     * Constructor for a new <OpenLayers.TileManager> instance.\n     * \n     * Parameters:\n     * options - {Object} Configuration for this instance.\n     */   \n    initialize: function(options) {\n        OpenLayers.Util.extend(this, options);\n        this.maps = [];\n        this.tileQueueId = {};\n        this.tileQueue = {};\n        this.tileCache = {};\n        this.tileCacheIndex = [];\n    },\n    \n    /**\n     * Method: addMap\n     * Binds this instance to a map\n     *\n     * Parameters:\n     * map - {<OpenLayers.Map>}\n     */\n    addMap: function(map) {\n        if (this._destroyed || !OpenLayers.Layer.Grid) {\n            return;\n        }\n        this.maps.push(map);\n        this.tileQueue[map.id] = [];\n        for (var i=0, ii=map.layers.length; i<ii; ++i) {\n            this.addLayer({layer: map.layers[i]});\n        }\n        map.events.on({\n            move: this.move,\n            zoomend: this.zoomEnd,\n            changelayer: this.changeLayer,\n            addlayer: this.addLayer,\n            preremovelayer: this.removeLayer,\n            scope: this\n        });\n    },\n    \n    /**\n     * Method: removeMap\n     * Unbinds this instance from a map\n     *\n     * Parameters:\n     * map - {<OpenLayers.Map>}\n     */\n    removeMap: function(map) {\n        if (this._destroyed || !OpenLayers.Layer.Grid) {\n            return;\n        }\n        window.clearTimeout(this.tileQueueId[map.id]);\n        if (map.layers) {\n            for (var i=0, ii=map.layers.length; i<ii; ++i) {\n                this.removeLayer({layer: map.layers[i]});\n            }\n        }\n        if (map.events) {\n            map.events.un({\n                move: this.move,\n                zoomend: this.zoomEnd,\n                changelayer: this.changeLayer,\n                addlayer: this.addLayer,\n                preremovelayer: this.removeLayer,\n                scope: this\n            });\n        }\n        delete this.tileQueue[map.id];\n        delete this.tileQueueId[map.id];\n        OpenLayers.Util.removeItem(this.maps, map);\n    },\n    \n    /**\n     * Method: move\n     * Handles the map's move event\n     *\n     * Parameters:\n     * evt - {Object} Listener argument\n     */\n    move: function(evt) {\n        this.updateTimeout(evt.object, this.moveDelay, true);\n    },\n    \n    /**\n     * Method: zoomEnd\n     * Handles the map's zoomEnd event\n     *\n     * Parameters:\n     * evt - {Object} Listener argument\n     */\n    zoomEnd: function(evt) {\n        this.updateTimeout(evt.object, this.zoomDelay);\n    },\n    \n    /**\n     * Method: changeLayer\n     * Handles the map's changeLayer event\n     *\n     * Parameters:\n     * evt - {Object} Listener argument\n     */\n    changeLayer: function(evt) {\n        if (evt.property === 'visibility' || evt.property === 'params') {\n            this.updateTimeout(evt.object, 0);\n        }\n    },\n    \n    /**\n     * Method: addLayer\n     * Handles the map's addlayer event\n     *\n     * Parameters:\n     * evt - {Object} The listener argument\n     */\n    addLayer: function(evt) {\n        var layer = evt.layer;\n        if (layer instanceof OpenLayers.Layer.Grid) {\n            layer.events.on({\n                addtile: this.addTile,\n                refresh: this.handleLayerRefresh,\n                retile: this.clearTileQueue,\n                scope: this\n            });\n            var i, j, tile;\n            for (i=layer.grid.length-1; i>=0; --i) {\n                for (j=layer.grid[i].length-1; j>=0; --j) {\n                    tile = layer.grid[i][j];\n                    this.addTile({tile: tile});\n                    if (tile.url && !tile.imgDiv) {\n                        this.manageTileCache({object: tile});\n                    }\n                }\n            }\n        }\n    },\n    \n    /**\n     * Method: removeLayer\n     * Handles the map's preremovelayer event\n     *\n     * Parameters:\n     * evt - {Object} The listener argument\n     */\n    removeLayer: function(evt) {\n        var layer = evt.layer;\n        if (layer instanceof OpenLayers.Layer.Grid) {\n            this.clearTileQueue({object: layer});\n            if (layer.events) {\n                layer.events.un({\n                    addtile: this.addTile,\n                    refresh: this.handleLayerRefresh,\n                    retile: this.clearTileQueue,\n                    scope: this\n                });\n            }\n            if (layer.grid) {\n                var i, j, tile;\n                for (i=layer.grid.length-1; i>=0; --i) {\n                    for (j=layer.grid[i].length-1; j>=0; --j) {\n                        tile = layer.grid[i][j];\n                        this.unloadTile({object: tile});\n                    }\n                }\n            }\n        }\n    },\n\n    /**\n     * Method: handleLayerRefresh\n     * Clears the cache when a redraw is forced on a layer\n     *\n     * Parameters:\n     * evt - {Object} The listener argument\n     */\n    handleLayerRefresh: function(evt) {\n        var layer = evt.object;\n        if (layer.grid) {\n            var i, j, tile;\n            for (i=layer.grid.length-1; i>=0; --i) {\n                for (j=layer.grid[i].length-1; j>=0; --j) {\n                    tile = layer.grid[i][j];\n                    OpenLayers.Util.removeItem(this.tileCacheIndex, tile.url);\n                    delete this.tileCache[tile.url];\n                }\n            }\n        }\n    },\n    \n    /**\n     * Method: updateTimeout\n     * Applies the <moveDelay> or <zoomDelay> to the <drawTilesFromQueue> loop,\n     * and schedules more queue processing after <frameDelay> if there are still\n     * tiles in the queue.\n     *\n     * Parameters:\n     * map - {<OpenLayers.Map>} The map to update the timeout for\n     * delay - {Number} The delay to apply\n     * nice - {Boolean} If true, the timeout function will only be created if\n     *     the tilequeue is not empty. This is used by the move handler to\n     *     avoid impacts on dragging performance. For other events, the tile\n     *     queue may not be populated yet, so we need to set the timer\n     *     regardless of the queue size.\n     */\n    updateTimeout: function(map, delay, nice) {\n        window.clearTimeout(this.tileQueueId[map.id]);\n        var tileQueue = this.tileQueue[map.id];\n        if (!nice || tileQueue.length) {\n            this.tileQueueId[map.id] = window.setTimeout(\n                OpenLayers.Function.bind(function() {\n                    this.drawTilesFromQueue(map);\n                    if (tileQueue.length) {\n                        this.updateTimeout(map, this.frameDelay);\n                    }\n                }, this), delay\n            );\n        }\n    },\n    \n    /**\n     * Method: addTile\n     * Listener for the layer's addtile event\n     *\n     * Parameters:\n     * evt - {Object} The listener argument\n     */\n    addTile: function(evt) {\n        if (evt.tile instanceof OpenLayers.Tile.Image) {\n          if (!evt.tile.layer.singleTile) {\n            evt.tile.events.on({\n                beforedraw: this.queueTileDraw,\n                beforeload: this.manageTileCache,\n                loadend: this.addToCache,\n                unload: this.unloadTile,\n                scope: this\n            });        \n          }\n        } else {\n            // Layer has the wrong tile type, so don't handle it any longer\n            this.removeLayer({layer: evt.tile.layer});\n        }\n    },\n    \n    /**\n     * Method: unloadTile\n     * Listener for the tile's unload event\n     *\n     * Parameters:\n     * evt - {Object} The listener argument\n     */\n    unloadTile: function(evt) {\n        var tile = evt.object;\n        tile.events.un({\n            beforedraw: this.queueTileDraw,\n            beforeload: this.manageTileCache,\n            loadend: this.addToCache,\n            unload: this.unloadTile,\n            scope: this\n        });\n        OpenLayers.Util.removeItem(this.tileQueue[tile.layer.map.id], tile);\n    },\n    \n    /**\n     * Method: queueTileDraw\n     * Adds a tile to the queue that will draw it.\n     *\n     * Parameters:\n     * evt - {Object} Listener argument of the tile's beforedraw event\n     */\n    queueTileDraw: function(evt) {\n        var tile = evt.object;\n        var queued = false;\n        var layer = tile.layer;\n        var url = layer.getURL(tile.bounds);\n        var img = this.tileCache[url];\n        if (img && img.className !== 'olTileImage') {\n            // cached image no longer valid, e.g. because we're olTileReplacing\n            delete this.tileCache[url];\n            OpenLayers.Util.removeItem(this.tileCacheIndex, url);\n            img = null;\n        }\n        // queue only if image with same url not cached already\n        if (layer.url && (layer.async || !img)) {\n            // add to queue only if not in queue already\n            var tileQueue = this.tileQueue[layer.map.id];\n            if (!~OpenLayers.Util.indexOf(tileQueue, tile)) {\n                tileQueue.push(tile);\n            }\n            queued = true;\n        }\n        return !queued;\n    },\n    \n    /**\n     * Method: drawTilesFromQueue\n     * Draws tiles from the tileQueue, and unqueues the tiles\n     */\n    drawTilesFromQueue: function(map) {\n        var tileQueue = this.tileQueue[map.id];\n        var limit = this.tilesPerFrame;\n        var animating = map.zoomTween && map.zoomTween.playing;\n        while (!animating && tileQueue.length && limit) {\n            tileQueue.shift().draw(true);\n            --limit;\n        }\n    },\n    \n    /**\n     * Method: manageTileCache\n     * Adds, updates, removes and fetches cache entries.\n     *\n     * Parameters:\n     * evt - {Object} Listener argument of the tile's beforeload event\n     */\n    manageTileCache: function(evt) {\n        var tile = evt.object;\n        var img = this.tileCache[tile.url];\n        if (img) {\n          // if image is on its layer's backbuffer, remove it from backbuffer\n          if (img.parentNode &&\n                  OpenLayers.Element.hasClass(img.parentNode, 'olBackBuffer')) {\n              img.parentNode.removeChild(img);\n              img.id = null;\n          }\n          // only use image from cache if it is not on a layer already\n          if (!img.parentNode) {\n              img.style.visibility = 'hidden';\n              img.style.opacity = 0;\n              tile.setImage(img);\n              // LRU - move tile to the end of the array to mark it as the most\n              // recently used\n              OpenLayers.Util.removeItem(this.tileCacheIndex, tile.url);\n              this.tileCacheIndex.push(tile.url);\n          }\n        }\n    },\n    \n    /**\n     * Method: addToCache\n     *\n     * Parameters:\n     * evt - {Object} Listener argument for the tile's loadend event\n     */\n    addToCache: function(evt) {\n        var tile = evt.object;\n        if (!this.tileCache[tile.url]) {\n            if (!OpenLayers.Element.hasClass(tile.imgDiv, 'olImageLoadError')) {\n                if (this.tileCacheIndex.length >= this.cacheSize) {\n                    delete this.tileCache[this.tileCacheIndex[0]];\n                    this.tileCacheIndex.shift();\n                }\n                this.tileCache[tile.url] = tile.imgDiv;\n                this.tileCacheIndex.push(tile.url);\n            }\n        }\n    },\n\n    /**\n     * Method: clearTileQueue\n     * Clears the tile queue from tiles of a specific layer\n     *\n     * Parameters:\n     * evt - {Object} Listener argument of the layer's retile event\n     */\n    clearTileQueue: function(evt) {\n        var layer = evt.object;\n        var tileQueue = this.tileQueue[layer.map.id];\n        for (var i=tileQueue.length-1; i>=0; --i) {\n            if (tileQueue[i].layer === layer) {\n                tileQueue.splice(i, 1);\n            }\n        }\n    },\n    \n    /**\n     * Method: destroy\n     */\n    destroy: function() {\n        for (var i=this.maps.length-1; i>=0; --i) {\n            this.removeMap(this.maps[i]);\n        }\n        this.maps = null;\n        this.tileQueue = null;\n        this.tileQueueId = null;\n        this.tileCache = null;\n        this.tileCacheIndex = null;\n        this._destroyed = true;\n    }\n\n});\n/* ======================================================================\n    OpenLayers/Renderer.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/BaseTypes/Class.js\n */\n\n/**\n * Class: OpenLayers.Renderer \n * This is the base class for all renderers.\n *\n * This is based on a merger code written by Paul Spencer and Bertil Chapuis.\n * It is largely composed of virtual functions that are to be implemented\n * in technology-specific subclasses, but there is some generic code too.\n * \n * The functions that *are* implemented here merely deal with the maintenance\n *  of the size and extent variables, as well as the cached 'resolution' \n *  value. \n * \n * A note to the user that all subclasses should use getResolution() instead\n *  of directly accessing this.resolution in order to correctly use the \n *  cacheing system.\n *\n */\nOpenLayers.Renderer = OpenLayers.Class({\n\n    /** \n     * Property: container\n     * {DOMElement} \n     */\n    container: null,\n    \n    /**\n     * Property: root\n     * {DOMElement}\n     */\n    root: null,\n\n    /** \n     * Property: extent\n     * {<OpenLayers.Bounds>}\n     */\n    extent: null,\n\n    /**\n     * Property: locked\n     * {Boolean} If the renderer is currently in a state where many things\n     *     are changing, the 'locked' property is set to true. This means \n     *     that renderers can expect at least one more drawFeature event to be\n     *     called with the 'locked' property set to 'true': In some renderers,\n     *     this might make sense to use as a 'only update local information'\n     *     flag. \n     */  \n    locked: false,\n    \n    /** \n     * Property: size\n     * {<OpenLayers.Size>} \n     */\n    size: null,\n    \n    /**\n     * Property: resolution\n     * {Float} cache of current map resolution\n     */\n    resolution: null,\n    \n    /**\n     * Property: map  \n     * {<OpenLayers.Map>} Reference to the map -- this is set in Vector's setMap()\n     */\n    map: null,\n    \n    /**\n     * Property: featureDx\n     * {Number} Feature offset in x direction. Will be calculated for and\n     * applied to the current feature while rendering (see\n     * <calculateFeatureDx>).\n     */\n    featureDx: 0,\n    \n    /**\n     * Constructor: OpenLayers.Renderer \n     *\n     * Parameters:\n     * containerID - {<String>} \n     * options - {Object} options for this renderer. See sublcasses for\n     *     supported options.\n     */\n    initialize: function(containerID, options) {\n        this.container = OpenLayers.Util.getElement(containerID);\n        OpenLayers.Util.extend(this, options);\n    },\n    \n    /**\n     * APIMethod: destroy\n     */\n    destroy: function() {\n        this.container = null;\n        this.extent = null;\n        this.size =  null;\n        this.resolution = null;\n        this.map = null;\n    },\n\n    /**\n     * APIMethod: supported\n     * This should be overridden by specific subclasses\n     * \n     * Returns:\n     * {Boolean} Whether or not the browser supports the renderer class\n     */\n    supported: function() {\n        return false;\n    },    \n    \n    /**\n     * Method: setExtent\n     * Set the visible part of the layer.\n     *\n     * Resolution has probably changed, so we nullify the resolution \n     * cache (this.resolution) -- this way it will be re-computed when \n     * next it is needed.\n     * We nullify the resolution cache (this.resolution) if resolutionChanged\n     * is set to true - this way it will be re-computed on the next\n     * getResolution() request.\n     *\n     * Parameters:\n     * extent - {<OpenLayers.Bounds>}\n     * resolutionChanged - {Boolean}\n     *\n     * Returns:\n     * {Boolean} true to notify the layer that the new extent does not exceed\n     *     the coordinate range, and the features will not need to be redrawn.\n     *     False otherwise.\n     */\n    setExtent: function(extent, resolutionChanged) {\n        this.extent = extent.clone();\n        if (this.map.baseLayer && this.map.baseLayer.wrapDateLine) {\n            var ratio = extent.getWidth() / this.map.getExtent().getWidth(),\n                extent = extent.scale(1 / ratio);\n            this.extent = extent.wrapDateLine(this.map.getMaxExtent()).scale(ratio);\n        }\n        if (resolutionChanged) {\n            this.resolution = null;\n        }\n        return true;\n    },\n    \n    /**\n     * Method: setSize\n     * Sets the size of the drawing surface.\n     * \n     * Resolution has probably changed, so we nullify the resolution \n     * cache (this.resolution) -- this way it will be re-computed when \n     * next it is needed.\n     *\n     * Parameters:\n     * size - {<OpenLayers.Size>} \n     */\n    setSize: function(size) {\n        this.size = size.clone();\n        this.resolution = null;\n    },\n    \n    /** \n     * Method: getResolution\n     * Uses cached copy of resolution if available to minimize computing\n     * \n     * Returns:\n     * {Float} The current map's resolution\n     */\n    getResolution: function() {\n        this.resolution = this.resolution || this.map.getResolution();\n        return this.resolution;\n    },\n    \n    /**\n     * Method: drawFeature\n     * Draw the feature.  The optional style argument can be used\n     * to override the feature's own style.  This method should only\n     * be called from layer.drawFeature().\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>} \n     * style - {<Object>}\n     * \n     * Returns:\n     * {Boolean} true if the feature has been drawn completely, false if not,\n     *     undefined if the feature had no geometry\n     */\n    drawFeature: function(feature, style) {\n        if(style == null) {\n            style = feature.style;\n        }\n        if (feature.geometry) {\n            var bounds = feature.geometry.getBounds();\n            if(bounds) {\n                var worldBounds;\n                if (this.map.baseLayer && this.map.baseLayer.wrapDateLine) {\n                    worldBounds = this.map.getMaxExtent();\n                }\n                if (!bounds.intersectsBounds(this.extent, {worldBounds: worldBounds})) {\n                    style = {display: \"none\"};\n                } else {\n                    this.calculateFeatureDx(bounds, worldBounds);\n                }\n                var rendered = this.drawGeometry(feature.geometry, style, feature.id);\n                if(style.display != \"none\" && style.label && rendered !== false) {\n\n                    var location = feature.geometry.getCentroid(); \n                    if(style.labelXOffset || style.labelYOffset) {\n                        var xOffset = isNaN(style.labelXOffset) ? 0 : style.labelXOffset;\n                        var yOffset = isNaN(style.labelYOffset) ? 0 : style.labelYOffset;\n                        var res = this.getResolution();\n                        location.move(xOffset*res, yOffset*res);\n                    }\n                    this.drawText(feature.id, style, location);\n                } else {\n                    this.removeText(feature.id);\n                }\n                return rendered;\n            }\n        }\n    },\n\n    /**\n     * Method: calculateFeatureDx\n     * {Number} Calculates the feature offset in x direction. Looking at the\n     * center of the feature bounds and the renderer extent, we calculate how\n     * many world widths the two are away from each other. This distance is\n     * used to shift the feature as close as possible to the center of the\n     * current enderer extent, which ensures that the feature is visible in the\n     * current viewport.\n     *\n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>} Bounds of the feature\n     * worldBounds - {<OpenLayers.Bounds>} Bounds of the world\n     */\n    calculateFeatureDx: function(bounds, worldBounds) {\n        this.featureDx = 0;\n        if (worldBounds) {\n            var worldWidth = worldBounds.getWidth(),\n                rendererCenterX = (this.extent.left + this.extent.right) / 2,\n                featureCenterX = (bounds.left + bounds.right) / 2,\n                worldsAway = Math.round((featureCenterX - rendererCenterX) / worldWidth);\n            this.featureDx = worldsAway * worldWidth;\n        }\n    },\n\n    /** \n     * Method: drawGeometry\n     * \n     * Draw a geometry.  This should only be called from the renderer itself.\n     * Use layer.drawFeature() from outside the renderer.\n     * virtual function\n     *\n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>} \n     * style - {Object} \n     * featureId - {<String>} \n     */\n    drawGeometry: function(geometry, style, featureId) {},\n        \n    /**\n     * Method: drawText\n     * Function for drawing text labels.\n     * This method is only called by the renderer itself.\n     * \n     * Parameters: \n     * featureId - {String}\n     * style -\n     * location - {<OpenLayers.Geometry.Point>}\n     */\n    drawText: function(featureId, style, location) {},\n\n    /**\n     * Method: removeText\n     * Function for removing text labels.\n     * This method is only called by the renderer itself.\n     * \n     * Parameters: \n     * featureId - {String}\n     */\n    removeText: function(featureId) {},\n    \n    /**\n     * Method: clear\n     * Clear all vectors from the renderer.\n     * virtual function.\n     */    \n    clear: function() {},\n\n    /**\n     * Method: getFeatureIdFromEvent\n     * Returns a feature id from an event on the renderer.  \n     * How this happens is specific to the renderer.  This should be\n     * called from layer.getFeatureFromEvent().\n     * Virtual function.\n     * \n     * Parameters:\n     * evt - {<OpenLayers.Event>} \n     *\n     * Returns:\n     * {String} A feature id or undefined.\n     */\n    getFeatureIdFromEvent: function(evt) {},\n    \n    /**\n     * Method: eraseFeatures \n     * This is called by the layer to erase features\n     * \n     * Parameters:\n     * features - {Array(<OpenLayers.Feature.Vector>)} \n     */\n    eraseFeatures: function(features) {\n        if(!(OpenLayers.Util.isArray(features))) {\n            features = [features];\n        }\n        for(var i=0, len=features.length; i<len; ++i) {\n            var feature = features[i];\n            this.eraseGeometry(feature.geometry, feature.id);\n            this.removeText(feature.id);\n        }\n    },\n    \n    /**\n     * Method: eraseGeometry\n     * Remove a geometry from the renderer (by id).\n     * virtual function.\n     * \n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>} \n     * featureId - {String}\n     */\n    eraseGeometry: function(geometry, featureId) {},\n    \n    /**\n     * Method: moveRoot\n     * moves this renderer's root to a (different) renderer.\n     * To be implemented by subclasses that require a common renderer root for\n     * feature selection.\n     * \n     * Parameters:\n     * renderer - {<OpenLayers.Renderer>} target renderer for the moved root\n     */\n    moveRoot: function(renderer) {},\n\n    /**\n     * Method: getRenderLayerId\n     * Gets the layer that this renderer's output appears on. If moveRoot was\n     * used, this will be different from the id of the layer containing the\n     * features rendered by this renderer.\n     * \n     * Returns:\n     * {String} the id of the output layer.\n     */\n    getRenderLayerId: function() {\n        return this.container.id;\n    },\n    \n    /**\n     * Method: applyDefaultSymbolizer\n     * \n     * Parameters:\n     * symbolizer - {Object}\n     * \n     * Returns:\n     * {Object}\n     */\n    applyDefaultSymbolizer: function(symbolizer) {\n        var result = OpenLayers.Util.extend({},\n            OpenLayers.Renderer.defaultSymbolizer);\n        if(symbolizer.stroke === false) {\n            delete result.strokeWidth;\n            delete result.strokeColor;\n        }\n        if(symbolizer.fill === false) {\n            delete result.fillColor;\n        }\n        OpenLayers.Util.extend(result, symbolizer);\n        return result;\n    },\n\n    CLASS_NAME: \"OpenLayers.Renderer\"\n});\n\n/**\n * Constant: OpenLayers.Renderer.defaultSymbolizer\n * {Object} Properties from this symbolizer will be applied to symbolizers\n *     with missing properties. This can also be used to set a global\n *     symbolizer default in OpenLayers. To be SLD 1.x compliant, add the\n *     following code before rendering any vector features:\n * (code)\n * OpenLayers.Renderer.defaultSymbolizer = {\n *     fillColor: \"#808080\",\n *     fillOpacity: 1,\n *     strokeColor: \"#000000\",\n *     strokeOpacity: 1,\n *     strokeWidth: 1,\n *     pointRadius: 3,\n *     graphicName: \"square\"\n * };\n * (end)\n */\nOpenLayers.Renderer.defaultSymbolizer = {\n    fillColor: \"#000000\",\n    strokeColor: \"#000000\",\n    strokeWidth: 2,\n    fillOpacity: 1,\n    strokeOpacity: 1,\n    pointRadius: 0,\n    labelAlign: 'cm'\n};\n    \n\n\n/**\n * Constant: OpenLayers.Renderer.symbol\n * Coordinate arrays for well known (named) symbols.\n */\nOpenLayers.Renderer.symbol = {\n    \"star\": [350,75, 379,161, 469,161, 397,215, 423,301, 350,250, 277,301,\n            303,215, 231,161, 321,161, 350,75],\n    \"cross\": [4,0, 6,0, 6,4, 10,4, 10,6, 6,6, 6,10, 4,10, 4,6, 0,6, 0,4, 4,4,\n            4,0],\n    \"x\": [0,0, 25,0, 50,35, 75,0, 100,0, 65,50, 100,100, 75,100, 50,65, 25,100, 0,100, 35,50, 0,0],\n    \"square\": [0,0, 0,1, 1,1, 1,0, 0,0],\n    \"triangle\": [0,10, 10,10, 5,0, 0,10]\n};\n/* ======================================================================\n    OpenLayers/Renderer/Canvas.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Renderer.js\n */\n\n/**\n * Class: OpenLayers.Renderer.Canvas \n * A renderer based on the 2D 'canvas' drawing element.\n * \n * Inherits:\n *  - <OpenLayers.Renderer>\n */\nOpenLayers.Renderer.Canvas = OpenLayers.Class(OpenLayers.Renderer, {\n    \n    /**\n     * APIProperty: hitDetection\n     * {Boolean} Allow for hit detection of features.  Default is true.\n     */\n    hitDetection: true,\n    \n    /**\n     * Property: hitOverflow\n     * {Number} The method for converting feature identifiers to color values\n     *     supports 16777215 sequential values.  Two features cannot be \n     *     predictably detected if their identifiers differ by more than this\n     *     value.  The hitOverflow allows for bigger numbers (but the \n     *     difference in values is still limited).\n     */\n    hitOverflow: 0,\n\n    /**\n     * Property: canvas\n     * {Canvas} The canvas context object.\n     */\n    canvas: null, \n    \n    /**\n     * Property: features\n     * {Object} Internal object of feature/style pairs for use in redrawing the layer.\n     */\n    features: null,\n    \n    /**\n     * Property: pendingRedraw\n     * {Boolean} The renderer needs a redraw call to render features added while\n     *     the renderer was locked.\n     */\n    pendingRedraw: false,\n    \n    /**\n     * Property: cachedSymbolBounds\n     * {Object} Internal cache of calculated symbol extents.\n     */\n    cachedSymbolBounds: {},\n    \n    /**\n     * Constructor: OpenLayers.Renderer.Canvas\n     *\n     * Parameters:\n     * containerID - {<String>}\n     * options - {Object} Optional properties to be set on the renderer.\n     */\n    initialize: function(containerID, options) {\n        OpenLayers.Renderer.prototype.initialize.apply(this, arguments);\n        this.root = document.createElement(\"canvas\");\n        this.container.appendChild(this.root);\n        this.canvas = this.root.getContext(\"2d\");\n        this._clearRectId = OpenLayers.Util.createUniqueID();\n        this.features = {};\n        if (this.hitDetection) {\n            this.hitCanvas = document.createElement(\"canvas\");\n            this.hitContext = this.hitCanvas.getContext(\"2d\");\n        }\n    },\n    \n    /**\n     * Method: setExtent\n     * Set the visible part of the layer.\n     *\n     * Parameters:\n     * extent - {<OpenLayers.Bounds>}\n     * resolutionChanged - {Boolean}\n     *\n     * Returns:\n     * {Boolean} true to notify the layer that the new extent does not exceed\n     *     the coordinate range, and the features will not need to be redrawn.\n     *     False otherwise.\n     */\n    setExtent: function() {\n        OpenLayers.Renderer.prototype.setExtent.apply(this, arguments);\n        // always redraw features\n        return false;\n    },\n    \n    /** \n     * Method: eraseGeometry\n     * Erase a geometry from the renderer. Because the Canvas renderer has\n     *     'memory' of the features that it has drawn, we have to remove the\n     *     feature so it doesn't redraw.   \n     * \n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>}\n     * featureId - {String}\n     */\n    eraseGeometry: function(geometry, featureId) {\n        this.eraseFeatures(this.features[featureId][0]);\n    },\n\n    /**\n     * APIMethod: supported\n     * \n     * Returns:\n     * {Boolean} Whether or not the browser supports the renderer class\n     */\n    supported: function() {\n        return OpenLayers.CANVAS_SUPPORTED;\n    },    \n    \n    /**\n     * Method: setSize\n     * Sets the size of the drawing surface.\n     *\n     * Once the size is updated, redraw the canvas.\n     *\n     * Parameters:\n     * size - {<OpenLayers.Size>} \n     */\n    setSize: function(size) {\n        this.size = size.clone();\n        var root = this.root;\n        root.style.width = size.w + \"px\";\n        root.style.height = size.h + \"px\";\n        root.width = size.w;\n        root.height = size.h;\n        this.resolution = null;\n        if (this.hitDetection) {\n            var hitCanvas = this.hitCanvas;\n            hitCanvas.style.width = size.w + \"px\";\n            hitCanvas.style.height = size.h + \"px\";\n            hitCanvas.width = size.w;\n            hitCanvas.height = size.h;\n        }\n    },\n    \n    /**\n     * Method: drawFeature\n     * Draw the feature. Stores the feature in the features list,\n     * then redraws the layer. \n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>} \n     * style - {<Object>} \n     *\n     * Returns:\n     * {Boolean} The feature has been drawn completely.  If the feature has no\n     *     geometry, undefined will be returned.  If the feature is not rendered\n     *     for other reasons, false will be returned.\n     */\n    drawFeature: function(feature, style) {\n        var rendered;\n        if (feature.geometry) {\n            style = this.applyDefaultSymbolizer(style || feature.style);\n            // don't render if display none or feature outside extent\n            var bounds = feature.geometry.getBounds();\n\n            var worldBounds;\n            if (this.map.baseLayer && this.map.baseLayer.wrapDateLine) {\n                worldBounds = this.map.getMaxExtent();\n            }\n\n            var intersects = bounds && bounds.intersectsBounds(this.extent, {worldBounds: worldBounds});\n\n            rendered = (style.display !== \"none\") && !!bounds && intersects;\n            if (rendered) {\n                // keep track of what we have rendered for redraw\n                this.features[feature.id] = [feature, style];\n            }\n            else {\n                // remove from features tracked for redraw\n                delete(this.features[feature.id]);\n            }\n            this.pendingRedraw = true;\n        }\n        if (this.pendingRedraw && !this.locked) {\n            this.redraw();\n            this.pendingRedraw = false;\n        }\n        return rendered;\n    },\n\n    /** \n     * Method: drawGeometry\n     * Used when looping (in redraw) over the features; draws\n     * the canvas. \n     *\n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>} \n     * style - {Object} \n     */\n    drawGeometry: function(geometry, style, featureId) {\n        var className = geometry.CLASS_NAME;\n        if ((className == \"OpenLayers.Geometry.Collection\") ||\n            (className == \"OpenLayers.Geometry.MultiPoint\") ||\n            (className == \"OpenLayers.Geometry.MultiLineString\") ||\n            (className == \"OpenLayers.Geometry.MultiPolygon\")) {\n            var worldBounds = (this.map.baseLayer && this.map.baseLayer.wrapDateLine) && this.map.getMaxExtent();\n            for (var i = 0; i < geometry.components.length; i++) {\n                this.calculateFeatureDx(geometry.components[i].getBounds(), worldBounds);\n                this.drawGeometry(geometry.components[i], style, featureId);\n            }\n            return;\n        }\n        switch (geometry.CLASS_NAME) {\n            case \"OpenLayers.Geometry.Point\":\n                this.drawPoint(geometry, style, featureId);\n                break;\n            case \"OpenLayers.Geometry.LineString\":\n                this.drawLineString(geometry, style, featureId);\n                break;\n            case \"OpenLayers.Geometry.LinearRing\":\n                this.drawLinearRing(geometry, style, featureId);\n                break;\n            case \"OpenLayers.Geometry.Polygon\":\n                this.drawPolygon(geometry, style, featureId);\n                break;\n            default:\n                break;\n        }\n    },\n\n    /**\n     * Method: drawExternalGraphic\n     * Called to draw External graphics. \n     * \n     * Parameters: \n     * geometry - {<OpenLayers.Geometry>}\n     * style    - {Object}\n     * featureId - {String}\n     */ \n    drawExternalGraphic: function(geometry, style, featureId) {\n        var img = new Image();\n\n        var title = style.title || style.graphicTitle;        \n        if (title) {\n            img.title = title;           \n        }\n\n        var width = style.graphicWidth || style.graphicHeight;\n        var height = style.graphicHeight || style.graphicWidth;\n        width = width ? width : style.pointRadius * 2;\n        height = height ? height : style.pointRadius * 2;\n        var xOffset = (style.graphicXOffset != undefined) ?\n           style.graphicXOffset : -(0.5 * width);\n        var yOffset = (style.graphicYOffset != undefined) ?\n           style.graphicYOffset : -(0.5 * height);\n        var _clearRectId = this._clearRectId;\n\n        var opacity = style.graphicOpacity || style.fillOpacity;\n        \n        var onLoad = function() {\n            if(!this.features[featureId] ||\n                                     _clearRectId !== this._clearRectId) {\n                return;\n            }\n            var pt = this.getLocalXY(geometry);\n            var p0 = pt[0];\n            var p1 = pt[1];\n            if(!isNaN(p0) && !isNaN(p1)) {\n                var x = (p0 + xOffset) | 0;\n                var y = (p1 + yOffset) | 0;\n                var canvas = this.canvas;\n                canvas.globalAlpha = opacity;\n                var factor = OpenLayers.Renderer.Canvas.drawImageScaleFactor ||\n                    (OpenLayers.Renderer.Canvas.drawImageScaleFactor =\n                        /android 2.1/.test(navigator.userAgent.toLowerCase()) ?\n                            // 320 is the screen width of the G1 phone, for\n                            // which drawImage works out of the box.\n                            320 / window.screen.width : 1\n                    );\n                canvas.drawImage(\n                    img, x*factor, y*factor, width*factor, height*factor\n                );\n                if (this.hitDetection) {\n                    this.setHitContextStyle(\"fill\", featureId);\n                    this.hitContext.fillRect(x, y, width, height);\n                }\n            }\n        };\n        img.onload = OpenLayers.Function.bind(onLoad, this);\n        img.src = style.externalGraphic;\n        if (img.complete) {\n            img.onload();\n            img.onload = null;\n        }\n    },\n\n    /**\n     * Method: drawNamedSymbol\n     * Called to draw Well Known Graphic Symbol Name. \n     * This method is only called by the renderer itself.\n     * \n     * Parameters: \n     * geometry - {<OpenLayers.Geometry>}\n     * style    - {Object}\n     * featureId - {String}\n     */ \n    drawNamedSymbol: function(geometry, style, featureId) {\n        var x, y, cx, cy, i, symbolBounds, scaling, angle;\n        var unscaledStrokeWidth;\n        var deg2rad = Math.PI / 180.0;\n        \n        var symbol = OpenLayers.Renderer.symbol[style.graphicName];\n         \n        if (!symbol) {\n            throw new Error(style.graphicName + ' is not a valid symbol name');\n        }\n        \n        if (!symbol.length || symbol.length < 2) return;\n        \n        var pt = this.getLocalXY(geometry);\n        var p0 = pt[0];\n        var p1 = pt[1];\n       \n        if (isNaN(p0) || isNaN(p1)) return;\n        \n        // Use rounded line caps\n        this.canvas.lineCap = \"round\";\n        this.canvas.lineJoin = \"round\";\n        \n        if (this.hitDetection) {\n            this.hitContext.lineCap = \"round\";\n            this.hitContext.lineJoin = \"round\";\n        }\n        \n        // Scale and rotate symbols, using precalculated bounds whenever possible.\n        if (style.graphicName in this.cachedSymbolBounds) {\n            symbolBounds = this.cachedSymbolBounds[style.graphicName];\n        } else {\n            symbolBounds = new OpenLayers.Bounds();\n            for(i = 0; i < symbol.length; i+=2) {\n                symbolBounds.extend(new OpenLayers.LonLat(symbol[i], symbol[i+1]));\n            }\n            this.cachedSymbolBounds[style.graphicName] = symbolBounds;\n        }\n        \n        // Push symbol scaling, translation and rotation onto the transformation stack in reverse order.\n        // Don't forget to apply all canvas transformations to the hitContext canvas as well(!)\n        this.canvas.save();\n        if (this.hitDetection) { this.hitContext.save(); }\n        \n        // Step 3: place symbol at the desired location\n        this.canvas.translate(p0,p1);\n        if (this.hitDetection) { this.hitContext.translate(p0,p1); }\n        \n        // Step 2a. rotate the symbol if necessary\n        angle = deg2rad * style.rotation; // will be NaN when style.rotation is undefined.\n        if (!isNaN(angle)) {\n            this.canvas.rotate(angle);\n            if (this.hitDetection) { this.hitContext.rotate(angle); }\n        }\n                \n        // // Step 2: scale symbol such that pointRadius equals half the maximum symbol dimension.\n        scaling = 2.0 * style.pointRadius / Math.max(symbolBounds.getWidth(), symbolBounds.getHeight());\n        this.canvas.scale(scaling,scaling);\n        if (this.hitDetection) { this.hitContext.scale(scaling,scaling); }\n        \n        // Step 1: center the symbol at the origin        \n        cx = symbolBounds.getCenterLonLat().lon;\n        cy = symbolBounds.getCenterLonLat().lat;\n        this.canvas.translate(-cx,-cy);\n        if (this.hitDetection) { this.hitContext.translate(-cx,-cy); }        \n\n        // Don't forget to scale stroke widths, because they are affected by canvas scale transformations as well(!)\n        // Alternative: scale symbol coordinates manually, so stroke width scaling is not needed anymore.\n        unscaledStrokeWidth = style.strokeWidth;\n        style.strokeWidth = unscaledStrokeWidth / scaling;\n            \n        if (style.fill !== false) {\n            this.setCanvasStyle(\"fill\", style);\n            this.canvas.beginPath();\n            for (i=0; i<symbol.length; i=i+2) {\n                x = symbol[i];\n                y = symbol[i+1];\n                if (i == 0) this.canvas.moveTo(x,y);\n                this.canvas.lineTo(x,y);\n            }\n            this.canvas.closePath();\n            this.canvas.fill();\n\n            if (this.hitDetection) {\n                this.setHitContextStyle(\"fill\", featureId, style);\n                this.hitContext.beginPath();\n                for (i=0; i<symbol.length; i=i+2) {\n                    x = symbol[i];\n                    y = symbol[i+1];\n                    if (i == 0) this.canvas.moveTo(x,y);\n                    this.hitContext.lineTo(x,y);\n                }\n                this.hitContext.closePath();\n                this.hitContext.fill();\n            }\n        }  \n        \n        if (style.stroke !== false) {\n            this.setCanvasStyle(\"stroke\", style);\n            this.canvas.beginPath();\n            for (i=0; i<symbol.length; i=i+2) {\n                x = symbol[i];\n                y = symbol[i+1];\n                if (i == 0) this.canvas.moveTo(x,y);\n                this.canvas.lineTo(x,y);\n            }\n            this.canvas.closePath();\n            this.canvas.stroke();\n            \n            \n            if (this.hitDetection) {\n                this.setHitContextStyle(\"stroke\", featureId, style, scaling);\n                this.hitContext.beginPath();\n                for (i=0; i<symbol.length; i=i+2) {\n                    x = symbol[i];\n                    y = symbol[i+1];\n                    if (i == 0) this.hitContext.moveTo(x,y);\n                    this.hitContext.lineTo(x,y);\n                }\n                this.hitContext.closePath();\n                this.hitContext.stroke();\n            }\n            \n        }\n        \n        style.strokeWidth = unscaledStrokeWidth;\n        this.canvas.restore();\n        if (this.hitDetection) { this.hitContext.restore(); }\n        this.setCanvasStyle(\"reset\");  \n    },\n\n    /**\n     * Method: setCanvasStyle\n     * Prepare the canvas for drawing by setting various global settings.\n     *\n     * Parameters:\n     * type - {String} one of 'stroke', 'fill', or 'reset'\n     * style - {Object} Symbolizer hash\n     */\n    setCanvasStyle: function(type, style) {\n        if (type === \"fill\") {     \n            this.canvas.globalAlpha = style['fillOpacity'];\n            this.canvas.fillStyle = style['fillColor'];\n        } else if (type === \"stroke\") {  \n            this.canvas.globalAlpha = style['strokeOpacity'];\n            this.canvas.strokeStyle = style['strokeColor'];\n            this.canvas.lineWidth = style['strokeWidth'];\n        } else {\n            this.canvas.globalAlpha = 0;\n            this.canvas.lineWidth = 1;\n        }\n    },\n    \n    /**\n     * Method: featureIdToHex\n     * Convert a feature ID string into an RGB hex string.\n     *\n     * Parameters:\n     * featureId - {String} Feature id\n     *\n     * Returns:\n     * {String} RGB hex string.\n     */\n    featureIdToHex: function(featureId) {\n        var id = Number(featureId.split(\"_\").pop()) + 1; // zero for no feature\n        if (id >= 16777216) {\n            this.hitOverflow = id - 16777215;\n            id = id % 16777216 + 1;\n        }\n        var hex = \"000000\" + id.toString(16);\n        var len = hex.length;\n        hex = \"#\" + hex.substring(len-6, len);\n        return hex;\n    },\n    \n    /**\n     * Method: setHitContextStyle\n     * Prepare the hit canvas for drawing by setting various global settings.\n     *\n     * Parameters:\n     * type - {String} one of 'stroke', 'fill', or 'reset'\n     * featureId - {String} The feature id.\n     * symbolizer - {<OpenLayers.Symbolizer>} The symbolizer.\n     */\n    setHitContextStyle: function(type, featureId, symbolizer, strokeScaling) {\n        var hex = this.featureIdToHex(featureId);\n        if (type == \"fill\") {\n            this.hitContext.globalAlpha = 1.0;\n            this.hitContext.fillStyle = hex;\n        } else if (type == \"stroke\") {  \n            this.hitContext.globalAlpha = 1.0;\n            this.hitContext.strokeStyle = hex;\n            // bump up stroke width to deal with antialiasing. If strokeScaling is defined, we're rendering a symbol \n            // on a transformed canvas, so the antialias width bump has to scale as well.\n            if (typeof strokeScaling === \"undefined\") {\n                this.hitContext.lineWidth = symbolizer.strokeWidth + 2;\n            } else {\n                if (!isNaN(strokeScaling)) { this.hitContext.lineWidth = symbolizer.strokeWidth + 2.0 / strokeScaling; }\n            }\n        } else {\n            this.hitContext.globalAlpha = 0;\n            this.hitContext.lineWidth = 1;\n        }\n    },\n\n    /**\n     * Method: drawPoint\n     * This method is only called by the renderer itself.\n     * \n     * Parameters: \n     * geometry - {<OpenLayers.Geometry>}\n     * style    - {Object}\n     * featureId - {String}\n     */ \n    drawPoint: function(geometry, style, featureId) {\n        if(style.graphic !== false) {\n            if(style.externalGraphic) {\n                this.drawExternalGraphic(geometry, style, featureId);\n            } else if (style.graphicName && (style.graphicName != \"circle\")) {\n                this.drawNamedSymbol(geometry, style, featureId);\n            } else {\n                var pt = this.getLocalXY(geometry);\n                var p0 = pt[0];\n                var p1 = pt[1];\n                if(!isNaN(p0) && !isNaN(p1)) {\n                    var twoPi = Math.PI*2;\n                    var radius = style.pointRadius;\n                    if(style.fill !== false) {\n                        this.setCanvasStyle(\"fill\", style);\n                        this.canvas.beginPath();\n                        this.canvas.arc(p0, p1, radius, 0, twoPi, true);\n                        this.canvas.fill();\n                        if (this.hitDetection) {\n                            this.setHitContextStyle(\"fill\", featureId, style);\n                            this.hitContext.beginPath();\n                            this.hitContext.arc(p0, p1, radius, 0, twoPi, true);\n                            this.hitContext.fill();\n                        }\n                    }\n\n                    if(style.stroke !== false) {\n                        this.setCanvasStyle(\"stroke\", style);\n                        this.canvas.beginPath();\n                        this.canvas.arc(p0, p1, radius, 0, twoPi, true);\n                        this.canvas.stroke();\n                        if (this.hitDetection) {\n                            this.setHitContextStyle(\"stroke\", featureId, style);\n                            this.hitContext.beginPath();\n                            this.hitContext.arc(p0, p1, radius, 0, twoPi, true);\n                            this.hitContext.stroke();\n                        }\n                        this.setCanvasStyle(\"reset\");\n                    }\n                }\n            }\n        }\n    },\n    \n    /**\n     * Method: drawLineString\n     * This method is only called by the renderer itself.\n     * \n     * Parameters: \n     * geometry - {<OpenLayers.Geometry>}\n     * style    - {Object}\n     * featureId - {String}\n     */ \n    drawLineString: function(geometry, style, featureId) {\n        style = OpenLayers.Util.applyDefaults({fill: false}, style);\n        this.drawLinearRing(geometry, style, featureId);\n    },    \n    \n    /**\n     * Method: drawLinearRing\n     * This method is only called by the renderer itself.\n     * \n     * Parameters: \n     * geometry - {<OpenLayers.Geometry>}\n     * style    - {Object}\n     * featureId - {String}\n     */ \n    drawLinearRing: function(geometry, style, featureId) {\n        if (style.fill !== false) {\n            this.setCanvasStyle(\"fill\", style);\n            this.renderPath(this.canvas, geometry, style, featureId, \"fill\");\n            if (this.hitDetection) {\n                this.setHitContextStyle(\"fill\", featureId, style);\n                this.renderPath(this.hitContext, geometry, style, featureId, \"fill\");\n            }\n        }\n        if (style.stroke !== false) {\n            this.setCanvasStyle(\"stroke\", style);\n            this.renderPath(this.canvas, geometry, style, featureId, \"stroke\");\n            if (this.hitDetection) {\n                this.setHitContextStyle(\"stroke\", featureId, style);\n                this.renderPath(this.hitContext, geometry, style, featureId, \"stroke\");\n            }\n        }\n        this.setCanvasStyle(\"reset\");\n    },\n    \n    /**\n     * Method: renderPath\n     * Render a path with stroke and optional fill.\n     */\n    renderPath: function(context, geometry, style, featureId, type) {\n        var components = geometry.components;\n        var len = components.length;\n        context.beginPath();\n        var start = this.getLocalXY(components[0]);\n        var x = start[0];\n        var y = start[1];\n        if (!isNaN(x) && !isNaN(y)) {\n            context.moveTo(start[0], start[1]);\n            for (var i=1; i<len; ++i) {\n                var pt = this.getLocalXY(components[i]);\n                context.lineTo(pt[0], pt[1]);\n            }\n            if (type === \"fill\") {\n                context.fill();\n            } else {\n                context.stroke();\n            }\n        }\n    },\n    \n    /**\n     * Method: drawPolygon\n     * This method is only called by the renderer itself.\n     * \n     * Parameters: \n     * geometry - {<OpenLayers.Geometry>}\n     * style    - {Object}\n     * featureId - {String}\n     */ \n    drawPolygon: function(geometry, style, featureId) {\n        var components = geometry.components;\n        var len = components.length;\n        this.drawLinearRing(components[0], style, featureId);\n        // erase inner rings\n        for (var i=1; i<len; ++i) {\n            /** \n             * Note that this is overly aggressive.  Here we punch holes through \n             * all previously rendered features on the same canvas.  A better \n             * solution for polygons with interior rings would be to draw the \n             * polygon on a sketch canvas first.  We could erase all holes \n             * there and then copy the drawing to the layer canvas. \n             * TODO: http://trac.osgeo.org/openlayers/ticket/3130 \n             */\n            this.canvas.globalCompositeOperation = \"destination-out\";\n            if (this.hitDetection) {\n                this.hitContext.globalCompositeOperation = \"destination-out\";\n            }\n            this.drawLinearRing(\n                components[i], \n                OpenLayers.Util.applyDefaults({stroke: false, fillOpacity: 1.0}, style),\n                featureId\n            );\n            this.canvas.globalCompositeOperation = \"source-over\";\n            if (this.hitDetection) {\n                this.hitContext.globalCompositeOperation = \"source-over\";\n            }\n            this.drawLinearRing(\n                components[i], \n                OpenLayers.Util.applyDefaults({fill: false}, style),\n                featureId\n            );\n        }\n    },\n    \n    /**\n     * Method: drawText\n     * This method is only called by the renderer itself.\n     *\n     * Parameters:\n     * location - {<OpenLayers.Point>}\n     * style    - {Object}\n     */\n    drawText: function(location, style) {\n        var pt = this.getLocalXY(location);\n\n        this.setCanvasStyle(\"reset\");\n        this.canvas.fillStyle = style.fontColor;\n        this.canvas.globalAlpha = style.fontOpacity || 1.0;\n        var fontStyle = [style.fontStyle ? style.fontStyle : \"normal\",\n                         \"normal\", // \"font-variant\" not supported\n                         style.fontWeight ? style.fontWeight : \"normal\",\n                         style.fontSize ? style.fontSize : \"1em\",\n                         style.fontFamily ? style.fontFamily : \"sans-serif\"].join(\" \");\n        var labelRows = style.label.split('\\n');\n        var numRows = labelRows.length;\n        if (this.canvas.fillText) {\n            // HTML5\n            this.canvas.font = fontStyle;\n            this.canvas.textAlign =\n                OpenLayers.Renderer.Canvas.LABEL_ALIGN[style.labelAlign[0]] ||\n                \"center\";\n            this.canvas.textBaseline =\n                OpenLayers.Renderer.Canvas.LABEL_ALIGN[style.labelAlign[1]] ||\n                \"middle\";\n            var vfactor =\n                OpenLayers.Renderer.Canvas.LABEL_FACTOR[style.labelAlign[1]];\n            if (vfactor == null) {\n                vfactor = -.5;\n            }\n            var lineHeight =\n                this.canvas.measureText('Mg').height ||\n                this.canvas.measureText('xx').width;\n            pt[1] += lineHeight*vfactor*(numRows-1);\n            for (var i = 0; i < numRows; i++) {\n                if (style.labelOutlineWidth) {\n                    this.canvas.save();\n                    this.canvas.globalAlpha = style.labelOutlineOpacity || style.fontOpacity || 1.0;\n                    this.canvas.strokeStyle = style.labelOutlineColor;\n                    this.canvas.lineWidth = style.labelOutlineWidth;\n                    this.canvas.strokeText(labelRows[i], pt[0], pt[1] + (lineHeight*i) + 1);\n                    this.canvas.restore();\n                }\n                this.canvas.fillText(labelRows[i], pt[0], pt[1] + (lineHeight*i));\n            }\n        } else if (this.canvas.mozDrawText) {\n            // Mozilla pre-Gecko1.9.1 (<FF3.1)\n            this.canvas.mozTextStyle = fontStyle;\n            // No built-in text alignment, so we measure and adjust the position\n            var hfactor =\n                OpenLayers.Renderer.Canvas.LABEL_FACTOR[style.labelAlign[0]];\n            if (hfactor == null) {\n                hfactor = -.5;\n            }\n            var vfactor =\n                OpenLayers.Renderer.Canvas.LABEL_FACTOR[style.labelAlign[1]];\n            if (vfactor == null) {\n                vfactor = -.5;\n            }\n            var lineHeight = this.canvas.mozMeasureText('xx');\n            pt[1] += lineHeight*(1 + (vfactor*numRows));\n            for (var i = 0; i < numRows; i++) {\n                var x = pt[0] + (hfactor*this.canvas.mozMeasureText(labelRows[i]));\n                var y = pt[1] + (i*lineHeight);\n                this.canvas.translate(x, y);\n                this.canvas.mozDrawText(labelRows[i]);\n                this.canvas.translate(-x, -y);\n            }\n        }\n        this.setCanvasStyle(\"reset\");\n    },\n    \n    /**\n     * Method: getLocalXY\n     * transform geographic xy into pixel xy\n     *\n     * Parameters: \n     * point - {<OpenLayers.Geometry.Point>}\n     */\n    getLocalXY: function(point) {\n        var resolution = this.getResolution();\n        var extent = this.extent;\n        var x = ((point.x - this.featureDx) / resolution + (-extent.left / resolution));\n        var y = ((extent.top / resolution) - point.y / resolution);\n        return [x, y];\n    },\n\n    /**\n     * Method: clear\n     * Clear all vectors from the renderer.\n     */    \n    clear: function() {\n        this.clearCanvas();\n        this.features = {};\n    },\n\n    /**\n     * Method: clearCanvas\n     * Clear the canvas element of the renderer.\n     */    \n    clearCanvas: function() {\n        var height = this.root.height;\n        var width = this.root.width;\n        this.canvas.clearRect(0, 0, width, height);\n        this._clearRectId = OpenLayers.Util.createUniqueID();\n        if (this.hitDetection) {\n            this.hitContext.clearRect(0, 0, width, height);\n        }\n    },\n\n    /**\n     * Method: getFeatureIdFromEvent\n     * Returns a feature id from an event on the renderer.  \n     * \n     * Parameters:\n     * evt - {<OpenLayers.Event>} \n     *\n     * Returns:\n     * {<OpenLayers.Feature.Vector} A feature or undefined.  This method returns a \n     *     feature instead of a feature id to avoid an unnecessary lookup on the\n     *     layer.\n     */\n    getFeatureIdFromEvent: function(evt) {\n        var featureId, feature;\n        \n        if (this.hitDetection && this.root.style.display !== \"none\") {\n            // this dragging check should go in the feature handler\n            if (!this.map.dragging) {\n                var xy = evt.xy;\n                var x = xy.x | 0;\n                var y = xy.y | 0;\n                var data = this.hitContext.getImageData(x, y, 1, 1).data;\n                if (data[3] === 255) { // antialiased\n                    var id = data[2] + (256 * (data[1] + (256 * data[0])));\n                    if (id) {\n                        featureId = \"OpenLayers_Feature_Vector_\" + (id - 1 + this.hitOverflow);\n                        try {\n                            feature = this.features[featureId][0];\n                        } catch(err) {\n                            // Because of antialiasing on the canvas, when the hit location is at a point where the edge of\n                            // one symbol intersects the interior of another symbol, a wrong hit color (and therefore id) results.\n                            // todo: set Antialiasing = 'off' on the hitContext as soon as browsers allow it.\n                        }\n                    }\n                }\n            }\n        }\n        return feature;\n    },\n    \n    /**\n     * Method: eraseFeatures \n     * This is called by the layer to erase features; removes the feature from\n     *     the list, then redraws the layer.\n     * \n     * Parameters:\n     * features - {Array(<OpenLayers.Feature.Vector>)} \n     */\n    eraseFeatures: function(features) {\n        if(!(OpenLayers.Util.isArray(features))) {\n            features = [features];\n        }\n        for(var i=0; i<features.length; ++i) {\n            delete this.features[features[i].id];\n        }\n        this.redraw();\n    },\n\n    /**\n     * Method: redraw\n     * The real 'meat' of the function: any time things have changed,\n     *     redraw() can be called to loop over all the data and (you guessed\n     *     it) redraw it.  Unlike Elements-based Renderers, we can't interact\n     *     with things once they're drawn, to remove them, for example, so\n     *     instead we have to just clear everything and draw from scratch.\n     */\n    redraw: function() {\n        if (!this.locked) {\n            this.clearCanvas();\n            var labelMap = [];\n            var feature, geometry, style;\n            var worldBounds = (this.map.baseLayer && this.map.baseLayer.wrapDateLine) && this.map.getMaxExtent();\n            for (var id in this.features) {\n                if (!this.features.hasOwnProperty(id)) { continue; }\n                feature = this.features[id][0];\n                geometry = feature.geometry;\n                this.calculateFeatureDx(geometry.getBounds(), worldBounds);\n                style = this.features[id][1];\n                this.drawGeometry(geometry, style, feature.id);\n                if(style.label) {\n                    labelMap.push([feature, style]);\n                }\n            }\n            var item;\n            for (var i=0, len=labelMap.length; i<len; ++i) {\n                item = labelMap[i];\n                this.drawText(item[0].geometry.getCentroid(), item[1]);\n            }\n        }    \n    },\n\n    CLASS_NAME: \"OpenLayers.Renderer.Canvas\"\n});\n\n/**\n * Constant: OpenLayers.Renderer.Canvas.LABEL_ALIGN\n * {Object}\n */\nOpenLayers.Renderer.Canvas.LABEL_ALIGN = {\n    \"l\": \"left\",\n    \"r\": \"right\",\n    \"t\": \"top\",\n    \"b\": \"bottom\"\n};\n\n/**\n * Constant: OpenLayers.Renderer.Canvas.LABEL_FACTOR\n * {Object}\n */\nOpenLayers.Renderer.Canvas.LABEL_FACTOR = {\n    \"l\": 0,\n    \"r\": -1,\n    \"t\": 0,\n    \"b\": -1\n};\n\n/**\n * Constant: OpenLayers.Renderer.Canvas.drawImageScaleFactor\n * {Number} Scale factor to apply to the canvas drawImage arguments. This\n *     is always 1 except for Android 2.1 devices, to work around\n *     http://code.google.com/p/android/issues/detail?id=5141.\n */\nOpenLayers.Renderer.Canvas.drawImageScaleFactor = null;\n/* ======================================================================\n    OpenLayers/Renderer/Elements.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Renderer.js\n */\n\n/**\n * Class: OpenLayers.ElementsIndexer\n * This class takes care of figuring out which order elements should be\n *     placed in the DOM based on given indexing methods. \n */\nOpenLayers.ElementsIndexer = OpenLayers.Class({\n   \n    /**\n     * Property: maxZIndex\n     * {Integer} This is the largest-most z-index value for a node\n     *     contained within the indexer.\n     */\n    maxZIndex: null,\n    \n    /**\n     * Property: order\n     * {Array<String>} This is an array of node id's stored in the\n     *     order that they should show up on screen. Id's higher up in the\n     *     array (higher array index) represent nodes with higher z-indeces.\n     */\n    order: null, \n    \n    /**\n     * Property: indices\n     * {Object} This is a hash that maps node ids to their z-index value\n     *     stored in the indexer. This is done to make finding a nodes z-index \n     *     value O(1).\n     */\n    indices: null,\n    \n    /**\n     * Property: compare\n     * {Function} This is the function used to determine placement of\n     *     of a new node within the indexer. If null, this defaults to to\n     *     the Z_ORDER_DRAWING_ORDER comparison method.\n     */\n    compare: null,\n    \n    /**\n     * APIMethod: initialize\n     * Create a new indexer with \n     * \n     * Parameters:\n     * yOrdering - {Boolean} Whether to use y-ordering.\n     */\n    initialize: function(yOrdering) {\n\n        this.compare = yOrdering ? \n            OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER_Y_ORDER :\n            OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER_DRAWING_ORDER;\n\n        this.clear();\n    },\n    \n    /**\n     * APIMethod: insert\n     * Insert a new node into the indexer. In order to find the correct \n     *     positioning for the node to be inserted, this method uses a binary \n     *     search. This makes inserting O(log(n)). \n     * \n     * Parameters:\n     * newNode - {DOMElement} The new node to be inserted.\n     * \n     * Returns\n     * {DOMElement} the node before which we should insert our newNode, or\n     *     null if newNode can just be appended.\n     */\n    insert: function(newNode) {\n        // If the node is known to the indexer, remove it so we can\n        // recalculate where it should go.\n        if (this.exists(newNode)) {\n            this.remove(newNode);\n        }\n        \n        var nodeId = newNode.id;\n        \n        this.determineZIndex(newNode);       \n\n        var leftIndex = -1;\n        var rightIndex = this.order.length;\n        var middle;\n\n        while (rightIndex - leftIndex > 1) {\n            middle = parseInt((leftIndex + rightIndex) / 2);\n            \n            var placement = this.compare(this, newNode,\n                OpenLayers.Util.getElement(this.order[middle]));\n            \n            if (placement > 0) {\n                leftIndex = middle;\n            } else {\n                rightIndex = middle;\n            } \n        }\n        \n        this.order.splice(rightIndex, 0, nodeId);\n        this.indices[nodeId] = this.getZIndex(newNode);\n        \n        // If the new node should be before another in the index\n        // order, return the node before which we have to insert the new one;\n        // else, return null to indicate that the new node can be appended.\n        return this.getNextElement(rightIndex);\n    },\n    \n    /**\n     * APIMethod: remove\n     * \n     * Parameters:\n     * node - {DOMElement} The node to be removed.\n     */\n    remove: function(node) {\n        var nodeId = node.id;\n        var arrayIndex = OpenLayers.Util.indexOf(this.order, nodeId);\n        if (arrayIndex >= 0) {\n            // Remove it from the order array, as well as deleting the node\n            // from the indeces hash.\n            this.order.splice(arrayIndex, 1);\n            delete this.indices[nodeId];\n            \n            // Reset the maxium z-index based on the last item in the \n            // order array.\n            if (this.order.length > 0) {\n                var lastId = this.order[this.order.length - 1];\n                this.maxZIndex = this.indices[lastId];\n            } else {\n                this.maxZIndex = 0;\n            }\n        }\n    },\n    \n    /**\n     * APIMethod: clear\n     */\n    clear: function() {\n        this.order = [];\n        this.indices = {};\n        this.maxZIndex = 0;\n    },\n    \n    /**\n     * APIMethod: exists\n     *\n     * Parameters:\n     * node - {DOMElement} The node to test for existence.\n     *\n     * Returns:\n     * {Boolean} Whether or not the node exists in the indexer?\n     */\n    exists: function(node) {\n        return (this.indices[node.id] != null);\n    },\n\n    /**\n     * APIMethod: getZIndex\n     * Get the z-index value for the current node from the node data itself.\n     * \n     * Parameters:\n     * node - {DOMElement} The node whose z-index to get.\n     * \n     * Returns:\n     * {Integer} The z-index value for the specified node (from the node \n     *     data itself).\n     */\n    getZIndex: function(node) {\n        return node._style.graphicZIndex;  \n    },\n    \n    /**\n     * Method: determineZIndex\n     * Determine the z-index for the current node if there isn't one, \n     *     and set the maximum value if we've found a new maximum.\n     * \n     * Parameters:\n     * node - {DOMElement} \n     */\n    determineZIndex: function(node) {\n        var zIndex = node._style.graphicZIndex;\n        \n        // Everything must have a zIndex. If none is specified,\n        // this means the user *must* (hint: assumption) want this\n        // node to succomb to drawing order. To enforce drawing order\n        // over all indexing methods, we'll create a new z-index that's\n        // greater than any currently in the indexer.\n        if (zIndex == null) {\n            zIndex = this.maxZIndex;\n            node._style.graphicZIndex = zIndex; \n        } else if (zIndex > this.maxZIndex) {\n            this.maxZIndex = zIndex;\n        }\n    },\n\n    /**\n     * APIMethod: getNextElement\n     * Get the next element in the order stack.\n     * \n     * Parameters:\n     * index - {Integer} The index of the current node in this.order.\n     * \n     * Returns:\n     * {DOMElement} the node following the index passed in, or\n     *     null.\n     */\n    getNextElement: function(index) {\n        for (var nextIndex = index + 1, nextElement = undefined;\n            (nextIndex < this.order.length) && (nextElement == undefined);\n            nextIndex++) {\n            nextElement = OpenLayers.Util.getElement(this.order[nextIndex]);\n        }\n        \n        return nextElement || null;\n    },\n    \n    CLASS_NAME: \"OpenLayers.ElementsIndexer\"\n});\n\n/**\n * Namespace: OpenLayers.ElementsIndexer.IndexingMethods\n * These are the compare methods for figuring out where a new node should be \n *     placed within the indexer. These methods are very similar to general \n *     sorting methods in that they return -1, 0, and 1 to specify the \n *     direction in which new nodes fall in the ordering.\n */\nOpenLayers.ElementsIndexer.IndexingMethods = {\n    \n    /**\n     * Method: Z_ORDER\n     * This compare method is used by other comparison methods.\n     *     It can be used individually for ordering, but is not recommended,\n     *     because it doesn't subscribe to drawing order.\n     * \n     * Parameters:\n     * indexer - {<OpenLayers.ElementsIndexer>}\n     * newNode - {DOMElement}\n     * nextNode - {DOMElement}\n     * \n     * Returns:\n     * {Integer}\n     */\n    Z_ORDER: function(indexer, newNode, nextNode) {\n        var newZIndex = indexer.getZIndex(newNode);\n\n        var returnVal = 0;\n        if (nextNode) {\n            var nextZIndex = indexer.getZIndex(nextNode);\n            returnVal = newZIndex - nextZIndex; \n        }\n        \n        return returnVal;\n    },\n\n    /**\n     * APIMethod: Z_ORDER_DRAWING_ORDER\n     * This method orders nodes by their z-index, but does so in a way\n     *     that, if there are other nodes with the same z-index, the newest \n     *     drawn will be the front most within that z-index. This is the \n     *     default indexing method.\n     * \n     * Parameters:\n     * indexer - {<OpenLayers.ElementsIndexer>}\n     * newNode - {DOMElement}\n     * nextNode - {DOMElement}\n     * \n     * Returns:\n     * {Integer}\n     */\n    Z_ORDER_DRAWING_ORDER: function(indexer, newNode, nextNode) {\n        var returnVal = OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER(\n            indexer, \n            newNode, \n            nextNode\n        );\n        \n        // Make Z_ORDER subscribe to drawing order by pushing it above\n        // all of the other nodes with the same z-index.\n        if (nextNode && returnVal == 0) {\n            returnVal = 1;\n        }\n        \n        return returnVal;\n    },\n\n    /**\n     * APIMethod: Z_ORDER_Y_ORDER\n     * This one should really be called Z_ORDER_Y_ORDER_DRAWING_ORDER, as it\n     *     best describes which ordering methods have precedence (though, the \n     *     name would be too long). This method orders nodes by their z-index, \n     *     but does so in a way that, if there are other nodes with the same \n     *     z-index, the nodes with the lower y position will be \"closer\" than \n     *     those with a higher y position. If two nodes have the exact same y \n     *     position, however, then this method will revert to using drawing  \n     *     order to decide placement.\n     * \n     * Parameters:\n     * indexer - {<OpenLayers.ElementsIndexer>}\n     * newNode - {DOMElement}\n     * nextNode - {DOMElement}\n     * \n     * Returns:\n     * {Integer}\n     */\n    Z_ORDER_Y_ORDER: function(indexer, newNode, nextNode) {\n        var returnVal = OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER(\n            indexer, \n            newNode, \n            nextNode\n        );\n        \n        if (nextNode && returnVal === 0) {            \n            var result = nextNode._boundsBottom - newNode._boundsBottom;\n            returnVal = (result === 0) ? 1 : result;\n        }\n        \n        return returnVal;       \n    }\n};\n\n/**\n * Class: OpenLayers.Renderer.Elements\n * This is another virtual class in that it should never be instantiated by \n *  itself as a Renderer. It exists because there is *tons* of shared \n *  functionality between different vector libraries which use nodes/elements\n *  as a base for rendering vectors. \n * \n * The highlevel bits of code that are implemented here are the adding and \n *  removing of geometries, which is essentially the same for any \n *  element-based renderer. The details of creating each node and drawing the\n *  paths are of course different, but the machinery is the same. \n * \n * Inherits:\n *  - <OpenLayers.Renderer>\n */\nOpenLayers.Renderer.Elements = OpenLayers.Class(OpenLayers.Renderer, {\n\n    /**\n     * Property: rendererRoot\n     * {DOMElement}\n     */\n    rendererRoot: null,\n    \n    /**\n     * Property: root\n     * {DOMElement}\n     */\n    root: null,\n    \n    /**\n     * Property: vectorRoot\n     * {DOMElement}\n     */\n    vectorRoot: null,\n\n    /**\n     * Property: textRoot\n     * {DOMElement}\n     */\n    textRoot: null,\n\n    /**\n     * Property: xmlns\n     * {String}\n     */    \n    xmlns: null,\n    \n    /**\n     * Property: xOffset\n     * {Number} Offset to apply to the renderer viewport translation in x\n     * direction. If the renderer extent's center is on the right of the\n     * dateline (i.e. exceeds the world bounds), we shift the viewport to the\n     * left by one world width. This avoids that features disappear from the\n     * map viewport. Because our dateline handling logic in other places\n     * ensures that extents crossing the dateline always have a center\n     * exceeding the world bounds on the left, we need this offset to make sure\n     * that the same is true for the renderer extent in pixel space as well.\n     */\n    xOffset: 0,\n    \n    /**\n     * Property: rightOfDateLine\n     * {Boolean} Keeps track of the location of the map extent relative to the\n     * date line. The <setExtent> method compares this value (which is the one\n     * from the previous <setExtent> call) with the current position of the map\n     * extent relative to the date line and updates the xOffset when the extent\n     * has moved from one side of the date line to the other.\n     */\n    \n    /**\n     * Property: Indexer\n     * {<OpenLayers.ElementIndexer>} An instance of OpenLayers.ElementsIndexer \n     *     created upon initialization if the zIndexing or yOrdering options\n     *     passed to this renderer's constructor are set to true.\n     */\n    indexer: null, \n    \n    /**\n     * Constant: BACKGROUND_ID_SUFFIX\n     * {String}\n     */\n    BACKGROUND_ID_SUFFIX: \"_background\",\n    \n    /**\n     * Constant: LABEL_ID_SUFFIX\n     * {String}\n     */\n    LABEL_ID_SUFFIX: \"_label\",\n    \n    /**\n     * Constant: LABEL_OUTLINE_SUFFIX\n     * {String}\n     */\n    LABEL_OUTLINE_SUFFIX: \"_outline\",\n\n    /**\n     * Constructor: OpenLayers.Renderer.Elements\n     * \n     * Parameters:\n     * containerID - {String}\n     * options - {Object} options for this renderer. \n     *\n     * Supported options are:\n     *     yOrdering - {Boolean} Whether to use y-ordering\n     *     zIndexing - {Boolean} Whether to use z-indexing. Will be ignored\n     *         if yOrdering is set to true.\n     */\n    initialize: function(containerID, options) {\n        OpenLayers.Renderer.prototype.initialize.apply(this, arguments);\n\n        this.rendererRoot = this.createRenderRoot();\n        this.root = this.createRoot(\"_root\");\n        this.vectorRoot = this.createRoot(\"_vroot\");\n        this.textRoot = this.createRoot(\"_troot\");\n        \n        this.root.appendChild(this.vectorRoot);\n        this.root.appendChild(this.textRoot);\n        \n        this.rendererRoot.appendChild(this.root);\n        this.container.appendChild(this.rendererRoot);\n        \n        if(options && (options.zIndexing || options.yOrdering)) {\n            this.indexer = new OpenLayers.ElementsIndexer(options.yOrdering);\n        }\n    },\n    \n    /**\n     * Method: destroy\n     */\n    destroy: function() {\n\n        this.clear(); \n\n        this.rendererRoot = null;\n        this.root = null;\n        this.xmlns = null;\n\n        OpenLayers.Renderer.prototype.destroy.apply(this, arguments);\n    },\n    \n    /**\n     * Method: clear\n     * Remove all the elements from the root\n     */    \n    clear: function() {\n        var child;\n        var root = this.vectorRoot;\n        if (root) {\n            while (child = root.firstChild) {\n                root.removeChild(child);\n            }\n        }\n        root = this.textRoot;\n        if (root) {\n            while (child = root.firstChild) {\n                root.removeChild(child);\n            }\n        }\n        if (this.indexer) {\n            this.indexer.clear();\n        }\n    },\n    \n    /**\n     * Method: setExtent\n     * Set the visible part of the layer.\n     *\n     * Parameters:\n     * extent - {<OpenLayers.Bounds>}\n     * resolutionChanged - {Boolean}\n     *\n     * Returns:\n     * {Boolean} true to notify the layer that the new extent does not exceed\n     *     the coordinate range, and the features will not need to be redrawn.\n     *     False otherwise.\n     */\n    setExtent: function(extent, resolutionChanged) {\n        var coordSysUnchanged = OpenLayers.Renderer.prototype.setExtent.apply(this, arguments);\n        var resolution = this.getResolution();\n        if (this.map.baseLayer && this.map.baseLayer.wrapDateLine) {\n            var rightOfDateLine,\n                ratio = extent.getWidth() / this.map.getExtent().getWidth(),\n                extent = extent.scale(1 / ratio),\n                world = this.map.getMaxExtent();\n            if (world.right > extent.left && world.right < extent.right) {\n                rightOfDateLine = true;\n            } else if (world.left > extent.left && world.left < extent.right) {\n                rightOfDateLine = false;\n            }\n            if (rightOfDateLine !== this.rightOfDateLine || resolutionChanged) {\n                coordSysUnchanged = false;\n                this.xOffset = rightOfDateLine === true ?\n                    world.getWidth() / resolution : 0;\n            }\n            this.rightOfDateLine = rightOfDateLine;\n        }\n        return coordSysUnchanged;\n    },\n\n    /** \n     * Method: getNodeType\n     * This function is in charge of asking the specific renderer which type\n     *     of node to create for the given geometry and style. All geometries\n     *     in an Elements-based renderer consist of one node and some\n     *     attributes. We have the nodeFactory() function which creates a node\n     *     for us, but it takes a 'type' as input, and that is precisely what\n     *     this function tells us.  \n     *  \n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>}\n     * style - {Object}\n     * \n     * Returns:\n     * {String} The corresponding node type for the specified geometry\n     */\n    getNodeType: function(geometry, style) { },\n\n    /** \n     * Method: drawGeometry \n     * Draw the geometry, creating new nodes, setting paths, setting style,\n     *     setting featureId on the node.  This method should only be called\n     *     by the renderer itself.\n     *\n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>}\n     * style - {Object}\n     * featureId - {String}\n     * \n     * Returns:\n     * {Boolean} true if the geometry has been drawn completely; null if\n     *     incomplete; false otherwise\n     */\n    drawGeometry: function(geometry, style, featureId) {\n        var className = geometry.CLASS_NAME;\n        var rendered = true;\n        if ((className == \"OpenLayers.Geometry.Collection\") ||\n            (className == \"OpenLayers.Geometry.MultiPoint\") ||\n            (className == \"OpenLayers.Geometry.MultiLineString\") ||\n            (className == \"OpenLayers.Geometry.MultiPolygon\")) {\n            for (var i = 0, len=geometry.components.length; i<len; i++) {\n                rendered = this.drawGeometry(\n                    geometry.components[i], style, featureId) && rendered;\n            }\n            return rendered;\n        }\n\n        rendered = false;\n        var removeBackground = false;\n        if (style.display != \"none\") {\n            if (style.backgroundGraphic) {\n                this.redrawBackgroundNode(geometry.id, geometry, style,\n                    featureId);\n            } else {\n                removeBackground = true;\n            }\n            rendered = this.redrawNode(geometry.id, geometry, style,\n                featureId);\n        }\n        if (rendered == false) {\n            var node = document.getElementById(geometry.id);\n            if (node) {\n                if (node._style.backgroundGraphic) {\n                    removeBackground = true;\n                }\n                node.parentNode.removeChild(node);\n            }\n        }\n        if (removeBackground) {\n            var node = document.getElementById(\n                geometry.id + this.BACKGROUND_ID_SUFFIX);\n            if (node) {\n                node.parentNode.removeChild(node);\n            }\n        }\n        return rendered;\n    },\n    \n    /**\n     * Method: redrawNode\n     * \n     * Parameters:\n     * id - {String}\n     * geometry - {<OpenLayers.Geometry>}\n     * style - {Object}\n     * featureId - {String}\n     * \n     * Returns:\n     * {Boolean} true if the complete geometry could be drawn, null if parts of\n     *     the geometry could not be drawn, false otherwise\n     */\n    redrawNode: function(id, geometry, style, featureId) {\n        style = this.applyDefaultSymbolizer(style);\n        // Get the node if it's already on the map.\n        var node = this.nodeFactory(id, this.getNodeType(geometry, style));\n        \n        // Set the data for the node, then draw it.\n        node._featureId = featureId;\n        node._boundsBottom = geometry.getBounds().bottom;\n        node._geometryClass = geometry.CLASS_NAME;\n        node._style = style;\n\n        var drawResult = this.drawGeometryNode(node, geometry, style);\n        if(drawResult === false) {\n            return false;\n        }\n         \n        node = drawResult.node;\n        \n        // Insert the node into the indexer so it can show us where to\n        // place it. Note that this operation is O(log(n)). If there's a\n        // performance problem (when dragging, for instance) this is\n        // likely where it would be.\n        if (this.indexer) {\n            var insert = this.indexer.insert(node);\n            if (insert) {\n                this.vectorRoot.insertBefore(node, insert);\n            } else {\n                this.vectorRoot.appendChild(node);\n            }\n        } else {\n            // if there's no indexer, simply append the node to root,\n            // but only if the node is a new one\n            if (node.parentNode !== this.vectorRoot){ \n                this.vectorRoot.appendChild(node);\n            }\n        }\n        \n        this.postDraw(node);\n        \n        return drawResult.complete;\n    },\n    \n    /**\n     * Method: redrawBackgroundNode\n     * Redraws the node using special 'background' style properties. Basically\n     *     just calls redrawNode(), but instead of directly using the \n     *     'externalGraphic', 'graphicXOffset', 'graphicYOffset', and \n     *     'graphicZIndex' properties directly from the specified 'style' \n     *     parameter, we create a new style object and set those properties \n     *     from the corresponding 'background'-prefixed properties from \n     *     specified 'style' parameter.\n     * \n     * Parameters:\n     * id - {String}\n     * geometry - {<OpenLayers.Geometry>}\n     * style - {Object}\n     * featureId - {String}\n     * \n     * Returns:\n     * {Boolean} true if the complete geometry could be drawn, null if parts of\n     *     the geometry could not be drawn, false otherwise\n     */\n    redrawBackgroundNode: function(id, geometry, style, featureId) {\n        var backgroundStyle = OpenLayers.Util.extend({}, style);\n        \n        // Set regular style attributes to apply to the background styles.\n        backgroundStyle.externalGraphic = backgroundStyle.backgroundGraphic;\n        backgroundStyle.graphicXOffset = backgroundStyle.backgroundXOffset;\n        backgroundStyle.graphicYOffset = backgroundStyle.backgroundYOffset;\n        backgroundStyle.graphicZIndex = backgroundStyle.backgroundGraphicZIndex;\n        backgroundStyle.graphicWidth = backgroundStyle.backgroundWidth || backgroundStyle.graphicWidth;\n        backgroundStyle.graphicHeight = backgroundStyle.backgroundHeight || backgroundStyle.graphicHeight;\n        \n        // Erase background styles.\n        backgroundStyle.backgroundGraphic = null;\n        backgroundStyle.backgroundXOffset = null;\n        backgroundStyle.backgroundYOffset = null;\n        backgroundStyle.backgroundGraphicZIndex = null;\n        \n        return this.redrawNode(\n            id + this.BACKGROUND_ID_SUFFIX, \n            geometry, \n            backgroundStyle, \n            null\n        );\n    },\n\n    /**\n     * Method: drawGeometryNode\n     * Given a node, draw a geometry on the specified layer.\n     *     node and geometry are required arguments, style is optional.\n     *     This method is only called by the render itself.\n     *\n     * Parameters:\n     * node - {DOMElement}\n     * geometry - {<OpenLayers.Geometry>}\n     * style - {Object}\n     * \n     * Returns:\n     * {Object} a hash with properties \"node\" (the drawn node) and \"complete\"\n     *     (null if parts of the geometry could not be drawn, false if nothing\n     *     could be drawn)\n     */\n    drawGeometryNode: function(node, geometry, style) {\n        style = style || node._style;\n\n        var options = {\n            'isFilled': style.fill === undefined ?\n                true :\n                style.fill,\n            'isStroked': style.stroke === undefined ?\n                !!style.strokeWidth :\n                style.stroke\n        };\n        var drawn;\n        switch (geometry.CLASS_NAME) {\n            case \"OpenLayers.Geometry.Point\":\n                if(style.graphic === false) {\n                    options.isFilled = false;\n                    options.isStroked = false;\n                }\n                drawn = this.drawPoint(node, geometry);\n                break;\n            case \"OpenLayers.Geometry.LineString\":\n                options.isFilled = false;\n                drawn = this.drawLineString(node, geometry);\n                break;\n            case \"OpenLayers.Geometry.LinearRing\":\n                drawn = this.drawLinearRing(node, geometry);\n                break;\n            case \"OpenLayers.Geometry.Polygon\":\n                drawn = this.drawPolygon(node, geometry);\n                break;\n            case \"OpenLayers.Geometry.Rectangle\":\n                drawn = this.drawRectangle(node, geometry);\n                break;\n            default:\n                break;\n        }\n\n        node._options = options; \n\n        //set style\n        //TBD simplify this\n        if (drawn != false) {\n            return {\n                node: this.setStyle(node, style, options, geometry),\n                complete: drawn\n            };\n        } else {\n            return false;\n        }\n    },\n    \n    /**\n     * Method: postDraw\n     * Things that have do be done after the geometry node is appended\n     *     to its parent node. To be overridden by subclasses.\n     * \n     * Parameters:\n     * node - {DOMElement}\n     */\n    postDraw: function(node) {},\n    \n    /**\n     * Method: drawPoint\n     * Virtual function for drawing Point Geometry. \n     *     Should be implemented by subclasses.\n     *     This method is only called by the renderer itself.\n     * \n     * Parameters: \n     * node - {DOMElement}\n     * geometry - {<OpenLayers.Geometry>}\n     * \n     * Returns:\n     * {DOMElement} or false if the renderer could not draw the point\n     */ \n    drawPoint: function(node, geometry) {},\n\n    /**\n     * Method: drawLineString\n     * Virtual function for drawing LineString Geometry. \n     *     Should be implemented by subclasses.\n     *     This method is only called by the renderer itself.\n     * \n     * Parameters: \n     * node - {DOMElement}\n     * geometry - {<OpenLayers.Geometry>}\n     * \n     * Returns:\n     * {DOMElement} or null if the renderer could not draw all components of\n     *     the linestring, or false if nothing could be drawn\n     */ \n    drawLineString: function(node, geometry) {},\n\n    /**\n     * Method: drawLinearRing\n     * Virtual function for drawing LinearRing Geometry. \n     *     Should be implemented by subclasses.\n     *     This method is only called by the renderer itself.\n     * \n     * Parameters: \n     * node - {DOMElement}\n     * geometry - {<OpenLayers.Geometry>}\n     * \n     * Returns:\n     * {DOMElement} or null if the renderer could not draw all components\n     *     of the linear ring, or false if nothing could be drawn\n     */ \n    drawLinearRing: function(node, geometry) {},\n\n    /**\n     * Method: drawPolygon\n     * Virtual function for drawing Polygon Geometry. \n     *    Should be implemented by subclasses.\n     *    This method is only called by the renderer itself.\n     * \n     * Parameters: \n     * node - {DOMElement}\n     * geometry - {<OpenLayers.Geometry>}\n     * \n     * Returns:\n     * {DOMElement} or null if the renderer could not draw all components\n     *     of the polygon, or false if nothing could be drawn\n     */ \n    drawPolygon: function(node, geometry) {},\n\n    /**\n     * Method: drawRectangle\n     * Virtual function for drawing Rectangle Geometry. \n     *     Should be implemented by subclasses.\n     *     This method is only called by the renderer itself.\n     * \n     * Parameters: \n     * node - {DOMElement}\n     * geometry - {<OpenLayers.Geometry>}\n     * \n     * Returns:\n     * {DOMElement} or false if the renderer could not draw the rectangle\n     */ \n    drawRectangle: function(node, geometry) {},\n\n    /**\n     * Method: drawCircle\n     * Virtual function for drawing Circle Geometry. \n     *     Should be implemented by subclasses.\n     *     This method is only called by the renderer itself.\n     * \n     * Parameters: \n     * node - {DOMElement}\n     * geometry - {<OpenLayers.Geometry>}\n     * \n     * Returns:\n     * {DOMElement} or false if the renderer could not draw the circle\n     */ \n    drawCircle: function(node, geometry) {},\n\n    /**\n     * Method: removeText\n     * Removes a label\n     * \n     * Parameters:\n     * featureId - {String}\n     */\n    removeText: function(featureId) {\n        var label = document.getElementById(featureId + this.LABEL_ID_SUFFIX);\n        if (label) {\n            this.textRoot.removeChild(label);\n        }\n        var outline = document.getElementById(featureId + this.LABEL_OUTLINE_SUFFIX);\n        if (outline) {\n            this.textRoot.removeChild(outline);\n        }\n    },\n\n    /**\n     * Method: getFeatureIdFromEvent\n     * \n     * Parameters:\n     * evt - {Object} An <OpenLayers.Event> object\n     *\n     * Returns:\n     * {String} A feature id or undefined.\n     */\n    getFeatureIdFromEvent: function(evt) {\n        var target = evt.target;\n        var useElement = target && target.correspondingUseElement;\n        var node = useElement ? useElement : (target || evt.srcElement);\n        return node._featureId;\n    },\n\n    /** \n     * Method: eraseGeometry\n     * Erase a geometry from the renderer. In the case of a multi-geometry, \n     *     we cycle through and recurse on ourselves. Otherwise, we look for a \n     *     node with the geometry.id, destroy its geometry, and remove it from\n     *     the DOM.\n     * \n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>}\n     * featureId - {String}\n     */\n    eraseGeometry: function(geometry, featureId) {\n        if ((geometry.CLASS_NAME == \"OpenLayers.Geometry.MultiPoint\") ||\n            (geometry.CLASS_NAME == \"OpenLayers.Geometry.MultiLineString\") ||\n            (geometry.CLASS_NAME == \"OpenLayers.Geometry.MultiPolygon\") ||\n            (geometry.CLASS_NAME == \"OpenLayers.Geometry.Collection\")) {\n            for (var i=0, len=geometry.components.length; i<len; i++) {\n                this.eraseGeometry(geometry.components[i], featureId);\n            }\n        } else {    \n            var element = OpenLayers.Util.getElement(geometry.id);\n            if (element && element.parentNode) {\n                if (element.geometry) {\n                    element.geometry.destroy();\n                    element.geometry = null;\n                }\n                element.parentNode.removeChild(element);\n\n                if (this.indexer) {\n                    this.indexer.remove(element);\n                }\n                \n                if (element._style.backgroundGraphic) {\n                    var backgroundId = geometry.id + this.BACKGROUND_ID_SUFFIX;\n                    var bElem = OpenLayers.Util.getElement(backgroundId);\n                    if (bElem && bElem.parentNode) {\n                        // No need to destroy the geometry since the element and the background\n                        // node share the same geometry.\n                        bElem.parentNode.removeChild(bElem);\n                    }\n                }\n            }\n        }\n    },\n\n    /** \n     * Method: nodeFactory\n     * Create new node of the specified type, with the (optional) specified id.\n     * \n     * If node already exists with same ID and a different type, we remove it\n     *     and then call ourselves again to recreate it.\n     * \n     * Parameters:\n     * id - {String}\n     * type - {String} type Kind of node to draw.\n     * \n     * Returns:\n     * {DOMElement} A new node of the given type and id.\n     */\n    nodeFactory: function(id, type) {\n        var node = OpenLayers.Util.getElement(id);\n        if (node) {\n            if (!this.nodeTypeCompare(node, type)) {\n                node.parentNode.removeChild(node);\n                node = this.nodeFactory(id, type);\n            }\n        } else {\n            node = this.createNode(type, id);\n        }\n        return node;\n    },\n    \n    /** \n     * Method: nodeTypeCompare\n     * \n     * Parameters:\n     * node - {DOMElement}\n     * type - {String} Kind of node\n     * \n     * Returns:\n     * {Boolean} Whether or not the specified node is of the specified type\n     *     This function must be overridden by subclasses.\n     */\n    nodeTypeCompare: function(node, type) {},\n    \n    /** \n     * Method: createNode\n     * \n     * Parameters:\n     * type - {String} Kind of node to draw.\n     * id - {String} Id for node.\n     * \n     * Returns:\n     * {DOMElement} A new node of the given type and id.\n     *     This function must be overridden by subclasses.\n     */\n    createNode: function(type, id) {},\n\n    /**\n     * Method: moveRoot\n     * moves this renderer's root to a different renderer.\n     * \n     * Parameters:\n     * renderer - {<OpenLayers.Renderer>} target renderer for the moved root\n     */\n    moveRoot: function(renderer) {\n        var root = this.root;\n        if(renderer.root.parentNode == this.rendererRoot) {\n            root = renderer.root;\n        }\n        root.parentNode.removeChild(root);\n        renderer.rendererRoot.appendChild(root);\n    },\n    \n    /**\n     * Method: getRenderLayerId\n     * Gets the layer that this renderer's output appears on. If moveRoot was\n     * used, this will be different from the id of the layer containing the\n     * features rendered by this renderer.\n     * \n     * Returns:\n     * {String} the id of the output layer.\n     */\n    getRenderLayerId: function() {\n        return this.root.parentNode.parentNode.id;\n    },\n    \n    /**\n     * Method: isComplexSymbol\n     * Determines if a symbol cannot be rendered using drawCircle\n     * \n     * Parameters:\n     * graphicName - {String}\n     * \n     * Returns\n     * {Boolean} true if the symbol is complex, false if not\n     */\n    isComplexSymbol: function(graphicName) {\n        return (graphicName != \"circle\") && !!graphicName;\n    },\n\n    CLASS_NAME: \"OpenLayers.Renderer.Elements\"\n});\n\n/* ======================================================================\n    OpenLayers/Renderer/SVG.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Renderer/Elements.js\n */\n\n/**\n * Class: OpenLayers.Renderer.SVG\n * \n * Inherits:\n *  - <OpenLayers.Renderer.Elements>\n */\nOpenLayers.Renderer.SVG = OpenLayers.Class(OpenLayers.Renderer.Elements, {\n\n    /** \n     * Property: xmlns\n     * {String}\n     */\n    xmlns: \"http://www.w3.org/2000/svg\",\n    \n    /**\n     * Property: xlinkns\n     * {String}\n     */\n    xlinkns: \"http://www.w3.org/1999/xlink\",\n\n    /**\n     * Constant: MAX_PIXEL\n     * {Integer} Firefox has a limitation where values larger or smaller than  \n     *           about 15000 in an SVG document lock the browser up. This \n     *           works around it.\n     */\n    MAX_PIXEL: 15000,\n\n    /**\n     * Property: translationParameters\n     * {Object} Hash with \"x\" and \"y\" properties\n     */\n    translationParameters: null,\n    \n    /**\n     * Property: symbolMetrics\n     * {Object} Cache for symbol metrics according to their svg coordinate\n     *     space. This is an object keyed by the symbol's id, and values are\n     *     an array of [width, centerX, centerY].\n     */\n    symbolMetrics: null,\n    \n    /**\n     * Constructor: OpenLayers.Renderer.SVG\n     * \n     * Parameters:\n     * containerID - {String}\n     */\n    initialize: function(containerID) {\n        if (!this.supported()) { \n            return; \n        }\n        OpenLayers.Renderer.Elements.prototype.initialize.apply(this, \n                                                                arguments);\n        this.translationParameters = {x: 0, y: 0};\n        \n        this.symbolMetrics = {};\n    },\n\n    /**\n     * APIMethod: supported\n     * \n     * Returns:\n     * {Boolean} Whether or not the browser supports the SVG renderer\n     */\n    supported: function() {\n        var svgFeature = \"http://www.w3.org/TR/SVG11/feature#\";\n        return (document.implementation && \n           (document.implementation.hasFeature(\"org.w3c.svg\", \"1.0\") || \n            document.implementation.hasFeature(svgFeature + \"SVG\", \"1.1\") || \n            document.implementation.hasFeature(svgFeature + \"BasicStructure\", \"1.1\") ));\n    },    \n\n    /**\n     * Method: inValidRange\n     * See #669 for more information\n     *\n     * Parameters:\n     * x      - {Integer}\n     * y      - {Integer}\n     * xyOnly - {Boolean} whether or not to just check for x and y, which means\n     *     to not take the current translation parameters into account if true.\n     * \n     * Returns:\n     * {Boolean} Whether or not the 'x' and 'y' coordinates are in the  \n     *           valid range.\n     */ \n    inValidRange: function(x, y, xyOnly) {\n        var left = x + (xyOnly ? 0 : this.translationParameters.x);\n        var top = y + (xyOnly ? 0 : this.translationParameters.y);\n        return (left >= -this.MAX_PIXEL && left <= this.MAX_PIXEL &&\n                top >= -this.MAX_PIXEL && top <= this.MAX_PIXEL);\n    },\n\n    /**\n     * Method: setExtent\n     * \n     * Parameters:\n     * extent - {<OpenLayers.Bounds>}\n     * resolutionChanged - {Boolean}\n     * \n     * Returns:\n     * {Boolean} true to notify the layer that the new extent does not exceed\n     *     the coordinate range, and the features will not need to be redrawn.\n     *     False otherwise.\n     */\n    setExtent: function(extent, resolutionChanged) {\n        var coordSysUnchanged = OpenLayers.Renderer.Elements.prototype.setExtent.apply(this, arguments);\n        \n        var resolution = this.getResolution(),\n            left = -extent.left / resolution,\n            top = extent.top / resolution;\n\n        // If the resolution has changed, start over changing the corner, because\n        // the features will redraw.\n        if (resolutionChanged) {\n            this.left = left;\n            this.top = top;\n            // Set the viewbox\n            var extentString = \"0 0 \" + this.size.w + \" \" + this.size.h;\n\n            this.rendererRoot.setAttributeNS(null, \"viewBox\", extentString);\n            this.translate(this.xOffset, 0);\n            return true;\n        } else {\n            var inRange = this.translate(left - this.left + this.xOffset, top - this.top);\n            if (!inRange) {\n                // recenter the coordinate system\n                this.setExtent(extent, true);\n            }\n            return coordSysUnchanged && inRange;\n        }\n    },\n    \n    /**\n     * Method: translate\n     * Transforms the SVG coordinate system\n     * \n     * Parameters:\n     * x - {Float}\n     * y - {Float}\n     * \n     * Returns:\n     * {Boolean} true if the translation parameters are in the valid coordinates\n     *     range, false otherwise.\n     */\n    translate: function(x, y) {\n        if (!this.inValidRange(x, y, true)) {\n            return false;\n        } else {\n            var transformString = \"\";\n            if (x || y) {\n                transformString = \"translate(\" + x + \",\" + y + \")\";\n            }\n            this.root.setAttributeNS(null, \"transform\", transformString);\n            this.translationParameters = {x: x, y: y};\n            return true;\n        }\n    },\n\n    /**\n     * Method: setSize\n     * Sets the size of the drawing surface.\n     * \n     * Parameters:\n     * size - {<OpenLayers.Size>} The size of the drawing surface\n     */\n    setSize: function(size) {\n        OpenLayers.Renderer.prototype.setSize.apply(this, arguments);\n        \n        this.rendererRoot.setAttributeNS(null, \"width\", this.size.w);\n        this.rendererRoot.setAttributeNS(null, \"height\", this.size.h);\n    },\n\n    /** \n     * Method: getNodeType \n     * \n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>}\n     * style - {Object}\n     * \n     * Returns:\n     * {String} The corresponding node type for the specified geometry\n     */\n    getNodeType: function(geometry, style) {\n        var nodeType = null;\n        switch (geometry.CLASS_NAME) {\n            case \"OpenLayers.Geometry.Point\":\n                if (style.externalGraphic) {\n                    nodeType = \"image\";\n                } else if (this.isComplexSymbol(style.graphicName)) {\n                    nodeType = \"svg\";\n                } else {\n                    nodeType = \"circle\";\n                }\n                break;\n            case \"OpenLayers.Geometry.Rectangle\":\n                nodeType = \"rect\";\n                break;\n            case \"OpenLayers.Geometry.LineString\":\n                nodeType = \"polyline\";\n                break;\n            case \"OpenLayers.Geometry.LinearRing\":\n                nodeType = \"polygon\";\n                break;\n            case \"OpenLayers.Geometry.Polygon\":\n            case \"OpenLayers.Geometry.Curve\":\n                nodeType = \"path\";\n                break;\n            default:\n                break;\n        }\n        return nodeType;\n    },\n\n    /** \n     * Method: setStyle\n     * Use to set all the style attributes to a SVG node.\n     * \n     * Takes care to adjust stroke width and point radius to be\n     * resolution-relative\n     *\n     * Parameters:\n     * node - {SVGDomElement} An SVG element to decorate\n     * style - {Object}\n     * options - {Object} Currently supported options include \n     *                              'isFilled' {Boolean} and\n     *                              'isStroked' {Boolean}\n     */\n    setStyle: function(node, style, options) {\n        style = style  || node._style;\n        options = options || node._options;\n\n        var title = style.title || style.graphicTitle;\n        if (title) {\n            node.setAttributeNS(null, \"title\", title);\n            //Standards-conformant SVG\n            // Prevent duplicate nodes. See issue https://github.com/openlayers/ol2/issues/92 \n            var titleNode = node.getElementsByTagName(\"title\");\n            if (titleNode.length > 0) {\n                titleNode[0].firstChild.textContent = title;\n            } else {\n                var label = this.nodeFactory(null, \"title\");\n                label.textContent = title;\n                node.appendChild(label);\n            }\n        }\n\n        var r = parseFloat(node.getAttributeNS(null, \"r\"));\n        var widthFactor = 1;\n        var pos;\n        if (node._geometryClass == \"OpenLayers.Geometry.Point\" && r) {\n            node.style.visibility = \"\";\n            if (style.graphic === false) {\n                node.style.visibility = \"hidden\";\n            } else if (style.externalGraphic) {\n                pos = this.getPosition(node);\n                if (style.graphicWidth && style.graphicHeight) {\n                  node.setAttributeNS(null, \"preserveAspectRatio\", \"none\");\n                }\n                var width = style.graphicWidth || style.graphicHeight;\n                var height = style.graphicHeight || style.graphicWidth;\n                width = width ? width : style.pointRadius*2;\n                height = height ? height : style.pointRadius*2;\n                var xOffset = (style.graphicXOffset != undefined) ?\n                    style.graphicXOffset : -(0.5 * width);\n                var yOffset = (style.graphicYOffset != undefined) ?\n                    style.graphicYOffset : -(0.5 * height);\n\n                var opacity = style.graphicOpacity || style.fillOpacity;\n                \n                node.setAttributeNS(null, \"x\", (pos.x + xOffset).toFixed());\n                node.setAttributeNS(null, \"y\", (pos.y + yOffset).toFixed());\n                node.setAttributeNS(null, \"width\", width);\n                node.setAttributeNS(null, \"height\", height);\n                node.setAttributeNS(this.xlinkns, \"xlink:href\", style.externalGraphic);\n                node.setAttributeNS(null, \"style\", \"opacity: \"+opacity);\n                node.onclick = OpenLayers.Event.preventDefault;\n            } else if (this.isComplexSymbol(style.graphicName)) {\n                // the symbol viewBox is three times as large as the symbol\n                var offset = style.pointRadius * 3;\n                var size = offset * 2;\n                var src = this.importSymbol(style.graphicName);\n                pos = this.getPosition(node);\n                widthFactor = this.symbolMetrics[src.id][0] * 3 / size;\n                \n                // remove the node from the dom before we modify it. This\n                // prevents various rendering issues in Safari and FF\n                var parent = node.parentNode;\n                var nextSibling = node.nextSibling;\n                if(parent) {\n                    parent.removeChild(node);\n                }\n                \n                // The more appropriate way to implement this would be use/defs,\n                // but due to various issues in several browsers, it is safer to\n                // copy the symbols instead of referencing them. \n                // See e.g. ticket http://trac.osgeo.org/openlayers/ticket/2985 \n                // and this email thread\n                // http://osgeo-org.1803224.n2.nabble.com/Select-Control-Ctrl-click-on-Feature-with-a-graphicName-opens-new-browser-window-tc5846039.html\n                node.firstChild && node.removeChild(node.firstChild);\n                node.appendChild(src.firstChild.cloneNode(true));\n                node.setAttributeNS(null, \"viewBox\", src.getAttributeNS(null, \"viewBox\"));\n                \n                node.setAttributeNS(null, \"width\", size);\n                node.setAttributeNS(null, \"height\", size);\n                node.setAttributeNS(null, \"x\", pos.x - offset);\n                node.setAttributeNS(null, \"y\", pos.y - offset);\n                \n                // now that the node has all its new properties, insert it\n                // back into the dom where it was\n                if(nextSibling) {\n                    parent.insertBefore(node, nextSibling);\n                } else if(parent) {\n                    parent.appendChild(node);\n                }\n            } else {\n                node.setAttributeNS(null, \"r\", style.pointRadius);\n            }\n\n            var rotation = style.rotation;\n            \n            if ((rotation !== undefined || node._rotation !== undefined) && pos) {\n                node._rotation = rotation;\n                rotation |= 0;\n                if (node.nodeName !== \"svg\") { \n                    node.setAttributeNS(null, \"transform\", \n                        \"rotate(\" + rotation + \" \" + pos.x + \" \" + \n                        pos.y + \")\"); \n                } else {\n                    var metrics = this.symbolMetrics[src.id];\n                    node.firstChild.setAttributeNS(null, \"transform\", \"rotate(\" \n                        + rotation + \" \" \n                        + metrics[1] + \" \"\n                        + metrics[2] + \")\");\n                }\n            }\n        }\n        \n        if (options.isFilled) {\n            node.setAttributeNS(null, \"fill\", style.fillColor);\n            node.setAttributeNS(null, \"fill-opacity\", style.fillOpacity);\n        } else {\n            node.setAttributeNS(null, \"fill\", \"none\");\n        }\n\n        if (options.isStroked) {\n            node.setAttributeNS(null, \"stroke\", style.strokeColor);\n            node.setAttributeNS(null, \"stroke-opacity\", style.strokeOpacity);\n            node.setAttributeNS(null, \"stroke-width\", style.strokeWidth * widthFactor);\n            node.setAttributeNS(null, \"stroke-linecap\", style.strokeLinecap || \"round\");\n            // Hard-coded linejoin for now, to make it look the same as in VML.\n            // There is no strokeLinejoin property yet for symbolizers.\n            node.setAttributeNS(null, \"stroke-linejoin\", \"round\");\n            style.strokeDashstyle && node.setAttributeNS(null,\n                \"stroke-dasharray\", this.dashStyle(style, widthFactor));\n        } else {\n            node.setAttributeNS(null, \"stroke\", \"none\");\n        }\n        \n        if (style.pointerEvents) {\n            node.setAttributeNS(null, \"pointer-events\", style.pointerEvents);\n        }\n                \n        if (style.cursor != null) {\n            node.setAttributeNS(null, \"cursor\", style.cursor);\n        }\n        \n        return node;\n    },\n\n    /** \n     * Method: dashStyle\n     * \n     * Parameters:\n     * style - {Object}\n     * widthFactor - {Number}\n     * \n     * Returns:\n     * {String} A SVG compliant 'stroke-dasharray' value\n     */\n    dashStyle: function(style, widthFactor) {\n        var w = style.strokeWidth * widthFactor;\n        var str = style.strokeDashstyle;\n        switch (str) {\n            case 'solid':\n                return 'none';\n            case 'dot':\n                return [1, 4 * w].join();\n            case 'dash':\n                return [4 * w, 4 * w].join();\n            case 'dashdot':\n                return [4 * w, 4 * w, 1, 4 * w].join();\n            case 'longdash':\n                return [8 * w, 4 * w].join();\n            case 'longdashdot':\n                return [8 * w, 4 * w, 1, 4 * w].join();\n            default:\n                return OpenLayers.String.trim(str).replace(/\\s+/g, \",\");\n        }\n    },\n    \n    /** \n     * Method: createNode\n     * \n     * Parameters:\n     * type - {String} Kind of node to draw\n     * id - {String} Id for node\n     * \n     * Returns:\n     * {DOMElement} A new node of the given type and id\n     */\n    createNode: function(type, id) {\n        var node = document.createElementNS(this.xmlns, type);\n        if (id) {\n            node.setAttributeNS(null, \"id\", id);\n        }\n        return node;    \n    },\n    \n    /** \n     * Method: nodeTypeCompare\n     * \n     * Parameters:\n     * node - {SVGDomElement} An SVG element\n     * type - {String} Kind of node\n     * \n     * Returns:\n     * {Boolean} Whether or not the specified node is of the specified type\n     */\n    nodeTypeCompare: function(node, type) {\n        return (type == node.nodeName);\n    },\n   \n    /**\n     * Method: createRenderRoot\n     * \n     * Returns:\n     * {DOMElement} The specific render engine's root element\n     */\n    createRenderRoot: function() {\n        var svg = this.nodeFactory(this.container.id + \"_svgRoot\", \"svg\");\n        svg.style.display = \"block\";\n        return svg;\n    },\n\n    /**\n     * Method: createRoot\n     * \n     * Parameters:\n     * suffix - {String} suffix to append to the id\n     * \n     * Returns:\n     * {DOMElement}\n     */\n    createRoot: function(suffix) {\n        return this.nodeFactory(this.container.id + suffix, \"g\");\n    },\n\n    /**\n     * Method: createDefs\n     *\n     * Returns:\n     * {DOMElement} The element to which we'll add the symbol definitions\n     */\n    createDefs: function() {\n        var defs = this.nodeFactory(this.container.id + \"_defs\", \"defs\");\n        this.rendererRoot.appendChild(defs);\n        return defs;\n    },\n\n    /**************************************\n     *                                    *\n     *     GEOMETRY DRAWING FUNCTIONS     *\n     *                                    *\n     **************************************/\n\n    /**\n     * Method: drawPoint\n     * This method is only called by the renderer itself.\n     * \n     * Parameters: \n     * node - {DOMElement}\n     * geometry - {<OpenLayers.Geometry>}\n     * \n     * Returns:\n     * {DOMElement} or false if the renderer could not draw the point\n     */ \n    drawPoint: function(node, geometry) {\n        return this.drawCircle(node, geometry, 1);\n    },\n\n    /**\n     * Method: drawCircle\n     * This method is only called by the renderer itself.\n     * \n     * Parameters: \n     * node - {DOMElement}\n     * geometry - {<OpenLayers.Geometry>}\n     * radius - {Float}\n     * \n     * Returns:\n     * {DOMElement} or false if the renderer could not draw the circle\n     */\n    drawCircle: function(node, geometry, radius) {\n        var resolution = this.getResolution();\n        var x = ((geometry.x - this.featureDx) / resolution + this.left);\n        var y = (this.top - geometry.y / resolution);\n\n        if (this.inValidRange(x, y)) { \n            node.setAttributeNS(null, \"cx\", x);\n            node.setAttributeNS(null, \"cy\", y);\n            node.setAttributeNS(null, \"r\", radius);\n            return node;\n        } else {\n            return false;\n        }    \n            \n    },\n    \n    /**\n     * Method: drawLineString\n     * This method is only called by the renderer itself.\n     * \n     * Parameters: \n     * node - {DOMElement}\n     * geometry - {<OpenLayers.Geometry>}\n     * \n     * Returns:\n     * {DOMElement} or null if the renderer could not draw all components of\n     *     the linestring, or false if nothing could be drawn\n     */ \n    drawLineString: function(node, geometry) {\n        var componentsResult = this.getComponentsString(geometry.components);\n        if (componentsResult.path) {\n            node.setAttributeNS(null, \"points\", componentsResult.path);\n            return (componentsResult.complete ? node : null);  \n        } else {\n            return false;\n        }\n    },\n    \n    /**\n     * Method: drawLinearRing\n     * This method is only called by the renderer itself.\n     * \n     * Parameters: \n     * node - {DOMElement}\n     * geometry - {<OpenLayers.Geometry>}\n     * \n     * Returns:\n     * {DOMElement} or null if the renderer could not draw all components\n     *     of the linear ring, or false if nothing could be drawn\n     */ \n    drawLinearRing: function(node, geometry) {\n        var componentsResult = this.getComponentsString(geometry.components);\n        if (componentsResult.path) {\n            node.setAttributeNS(null, \"points\", componentsResult.path);\n            return (componentsResult.complete ? node : null);  \n        } else {\n            return false;\n        }\n    },\n    \n    /**\n     * Method: drawPolygon\n     * This method is only called by the renderer itself.\n     * \n     * Parameters: \n     * node - {DOMElement}\n     * geometry - {<OpenLayers.Geometry>}\n     * \n     * Returns:\n     * {DOMElement} or null if the renderer could not draw all components\n     *     of the polygon, or false if nothing could be drawn\n     */ \n    drawPolygon: function(node, geometry) {\n        var d = \"\";\n        var draw = true;\n        var complete = true;\n        var linearRingResult, path;\n        for (var j=0, len=geometry.components.length; j<len; j++) {\n            d += \" M\";\n            linearRingResult = this.getComponentsString(\n                geometry.components[j].components, \" \");\n            path = linearRingResult.path;\n            if (path) {\n                d += \" \" + path;\n                complete = linearRingResult.complete && complete;\n            } else {\n                draw = false;\n            }\n        }\n        d += \" z\";\n        if (draw) {\n            node.setAttributeNS(null, \"d\", d);\n            node.setAttributeNS(null, \"fill-rule\", \"evenodd\");\n            return complete ? node : null;\n        } else {\n            return false;\n        }    \n    },\n    \n    /**\n     * Method: drawRectangle\n     * This method is only called by the renderer itself.\n     * \n     * Parameters: \n     * node - {DOMElement}\n     * geometry - {<OpenLayers.Geometry>}\n     * \n     * Returns:\n     * {DOMElement} or false if the renderer could not draw the rectangle\n     */ \n    drawRectangle: function(node, geometry) {\n        var resolution = this.getResolution();\n        var x = ((geometry.x - this.featureDx) / resolution + this.left);\n        var y = (this.top - geometry.y / resolution);\n\n        if (this.inValidRange(x, y)) { \n            node.setAttributeNS(null, \"x\", x);\n            node.setAttributeNS(null, \"y\", y);\n            node.setAttributeNS(null, \"width\", geometry.width / resolution);\n            node.setAttributeNS(null, \"height\", geometry.height / resolution);\n            return node;\n        } else {\n            return false;\n        }\n    },\n    \n    /**\n     * Method: drawText\n     * This method is only called by the renderer itself.\n     *\n     * Parameters:\n     * featureId - {String}\n     * style -\n     * location - {<OpenLayers.Geometry.Point>}\n     */\n    drawText: function(featureId, style, location) {\n        var drawOutline = (!!style.labelOutlineWidth);\n        // First draw text in halo color and size and overlay the\n        // normal text afterwards\n        if (drawOutline) {\n            var outlineStyle = OpenLayers.Util.extend({}, style);\n            outlineStyle.fontColor = outlineStyle.labelOutlineColor;\n            outlineStyle.fontStrokeColor = outlineStyle.labelOutlineColor;\n            outlineStyle.fontStrokeWidth = style.labelOutlineWidth;\n            if (style.labelOutlineOpacity) {\n                outlineStyle.fontOpacity = style.labelOutlineOpacity;\n            }\n            delete outlineStyle.labelOutlineWidth;\n            this.drawText(featureId, outlineStyle, location);\n        }\n\n        var resolution = this.getResolution();\n\n        var x = ((location.x - this.featureDx) / resolution + this.left);\n        var y = (location.y / resolution - this.top);\n\n        var suffix = (drawOutline)?this.LABEL_OUTLINE_SUFFIX:this.LABEL_ID_SUFFIX;\n        var label = this.nodeFactory(featureId + suffix, \"text\");\n\n        label.setAttributeNS(null, \"x\", x);\n        label.setAttributeNS(null, \"y\", -y);\n\n        if (style.fontColor) {\n            label.setAttributeNS(null, \"fill\", style.fontColor);\n        }\n        if (style.fontStrokeColor) {\n            label.setAttributeNS(null, \"stroke\", style.fontStrokeColor);\n        }\n        if (style.fontStrokeWidth) {\n            label.setAttributeNS(null, \"stroke-width\", style.fontStrokeWidth);\n        }\n        if (style.fontOpacity) {\n            label.setAttributeNS(null, \"opacity\", style.fontOpacity);\n        }\n        if (style.fontFamily) {\n            label.setAttributeNS(null, \"font-family\", style.fontFamily);\n        }\n        if (style.fontSize) {\n            label.setAttributeNS(null, \"font-size\", style.fontSize);\n        }\n        if (style.fontWeight) {\n            label.setAttributeNS(null, \"font-weight\", style.fontWeight);\n        }\n        if (style.fontStyle) {\n            label.setAttributeNS(null, \"font-style\", style.fontStyle);\n        }\n        if (style.labelSelect === true) {\n            label.setAttributeNS(null, \"pointer-events\", \"visible\");\n            label._featureId = featureId;\n        } else {\n            label.setAttributeNS(null, \"pointer-events\", \"none\");\n        }\n        var align = style.labelAlign || OpenLayers.Renderer.defaultSymbolizer.labelAlign;\n        label.setAttributeNS(null, \"text-anchor\",\n            OpenLayers.Renderer.SVG.LABEL_ALIGN[align[0]] || \"middle\");\n\n        if (OpenLayers.IS_GECKO === true) {\n            label.setAttributeNS(null, \"dominant-baseline\",\n                OpenLayers.Renderer.SVG.LABEL_ALIGN[align[1]] || \"central\");\n        }\n\n        var labelRows = style.label.split('\\n');\n        var numRows = labelRows.length;\n        while (label.childNodes.length > numRows) {\n            label.removeChild(label.lastChild);\n        }\n        for (var i = 0; i < numRows; i++) {\n            var tspan = this.nodeFactory(featureId + suffix + \"_tspan_\" + i, \"tspan\");\n            if (style.labelSelect === true) {\n                tspan._featureId = featureId;\n                tspan._geometry = location;\n                tspan._geometryClass = location.CLASS_NAME;\n            }\n            if (OpenLayers.IS_GECKO === false) {\n                tspan.setAttributeNS(null, \"baseline-shift\",\n                    OpenLayers.Renderer.SVG.LABEL_VSHIFT[align[1]] || \"-35%\");\n            }\n            tspan.setAttribute(\"x\", x);\n            if (i == 0) {\n                var vfactor = OpenLayers.Renderer.SVG.LABEL_VFACTOR[align[1]];\n                if (vfactor == null) {\n                     vfactor = -.5;\n                }\n                tspan.setAttribute(\"dy\", (vfactor*(numRows-1)) + \"em\");\n            } else {\n                tspan.setAttribute(\"dy\", \"1em\");\n            }\n            tspan.textContent = (labelRows[i] === '') ? ' ' : labelRows[i];\n            if (!tspan.parentNode) {\n                label.appendChild(tspan);\n            }\n        }\n\n        if (!label.parentNode) {\n            this.textRoot.appendChild(label);\n        }\n    },\n    \n    /** \n     * Method: getComponentString\n     * \n     * Parameters:\n     * components - {Array(<OpenLayers.Geometry.Point>)} Array of points\n     * separator - {String} character between coordinate pairs. Defaults to \",\"\n     * \n     * Returns:\n     * {Object} hash with properties \"path\" (the string created from the\n     *     components and \"complete\" (false if the renderer was unable to\n     *     draw all components)\n     */\n    getComponentsString: function(components, separator) {\n        var renderCmp = [];\n        var complete = true;\n        var len = components.length;\n        var strings = [];\n        var str, component;\n        for(var i=0; i<len; i++) {\n            component = components[i];\n            renderCmp.push(component);\n            str = this.getShortString(component);\n            if (str) {\n                strings.push(str);\n            } else {\n                // The current component is outside the valid range. Let's\n                // see if the previous or next component is inside the range.\n                // If so, add the coordinate of the intersection with the\n                // valid range bounds.\n                if (i > 0) {\n                    if (this.getShortString(components[i - 1])) {\n                        strings.push(this.clipLine(components[i],\n                            components[i-1]));\n                    }\n                }\n                if (i < len - 1) {\n                    if (this.getShortString(components[i + 1])) {\n                        strings.push(this.clipLine(components[i],\n                            components[i+1]));\n                    }\n                }\n                complete = false;\n            }\n        }\n\n        return {\n            path: strings.join(separator || \",\"),\n            complete: complete\n        };\n    },\n    \n    /**\n     * Method: clipLine\n     * Given two points (one inside the valid range, and one outside),\n     * clips the line betweeen the two points so that the new points are both\n     * inside the valid range.\n     * \n     * Parameters:\n     * badComponent - {<OpenLayers.Geometry.Point>} original geometry of the\n     *     invalid point\n     * goodComponent - {<OpenLayers.Geometry.Point>} original geometry of the\n     *     valid point\n     * Returns\n     * {String} the SVG coordinate pair of the clipped point (like\n     *     getShortString), or an empty string if both passed componets are at\n     *     the same point.\n     */\n    clipLine: function(badComponent, goodComponent) {\n        if (goodComponent.equals(badComponent)) {\n            return \"\";\n        }\n        var resolution = this.getResolution();\n        var maxX = this.MAX_PIXEL - this.translationParameters.x;\n        var maxY = this.MAX_PIXEL - this.translationParameters.y;\n        var x1 = (goodComponent.x - this.featureDx) / resolution + this.left;\n        var y1 = this.top - goodComponent.y / resolution;\n        var x2 = (badComponent.x - this.featureDx) / resolution + this.left;\n        var y2 = this.top - badComponent.y / resolution;\n        var k;\n        if (x2 < -maxX || x2 > maxX) {\n            k = (y2 - y1) / (x2 - x1);\n            x2 = x2 < 0 ? -maxX : maxX;\n            y2 = y1 + (x2 - x1) * k;\n        }\n        if (y2 < -maxY || y2 > maxY) {\n            k = (x2 - x1) / (y2 - y1);\n            y2 = y2 < 0 ? -maxY : maxY;\n            x2 = x1 + (y2 - y1) * k;\n        }\n        return x2 + \",\" + y2;\n    },\n\n    /** \n     * Method: getShortString\n     * \n     * Parameters:\n     * point - {<OpenLayers.Geometry.Point>}\n     * \n     * Returns:\n     * {String} or false if point is outside the valid range\n     */\n    getShortString: function(point) {\n        var resolution = this.getResolution();\n        var x = ((point.x - this.featureDx) / resolution + this.left);\n        var y = (this.top - point.y / resolution);\n\n        if (this.inValidRange(x, y)) { \n            return x + \",\" + y;\n        } else {\n            return false;\n        }\n    },\n    \n    /**\n     * Method: getPosition\n     * Finds the position of an svg node.\n     * \n     * Parameters:\n     * node - {DOMElement}\n     * \n     * Returns:\n     * {Object} hash with x and y properties, representing the coordinates\n     *     within the svg coordinate system\n     */\n    getPosition: function(node) {\n        return({\n            x: parseFloat(node.getAttributeNS(null, \"cx\")),\n            y: parseFloat(node.getAttributeNS(null, \"cy\"))\n        });\n    },\n\n    /**\n     * Method: importSymbol\n     * add a new symbol definition from the rendererer's symbol hash\n     * \n     * Parameters:\n     * graphicName - {String} name of the symbol to import\n     * \n     * Returns:\n     * {DOMElement} - the imported symbol\n     */      \n    importSymbol: function (graphicName)  {\n        if (!this.defs) {\n            // create svg defs tag\n            this.defs = this.createDefs();\n        }\n        var id = this.container.id + \"-\" + graphicName;\n        \n        // check if symbol already exists in the defs\n        var existing = document.getElementById(id);\n        if (existing != null) {\n            return existing;\n        }\n        \n        var symbol = OpenLayers.Renderer.symbol[graphicName];\n        if (!symbol) {\n            throw new Error(graphicName + ' is not a valid symbol name');\n        }\n\n        var symbolNode = this.nodeFactory(id, \"symbol\");\n        var node = this.nodeFactory(null, \"polygon\");\n        symbolNode.appendChild(node);\n        var symbolExtent = new OpenLayers.Bounds(\n                                    Number.MAX_VALUE, Number.MAX_VALUE, 0, 0);\n\n        var points = [];\n        var x,y;\n        for (var i=0; i<symbol.length; i=i+2) {\n            x = symbol[i];\n            y = symbol[i+1];\n            symbolExtent.left = Math.min(symbolExtent.left, x);\n            symbolExtent.bottom = Math.min(symbolExtent.bottom, y);\n            symbolExtent.right = Math.max(symbolExtent.right, x);\n            symbolExtent.top = Math.max(symbolExtent.top, y);\n            points.push(x, \",\", y);\n        }\n        \n        node.setAttributeNS(null, \"points\", points.join(\" \"));\n        \n        var width = symbolExtent.getWidth();\n        var height = symbolExtent.getHeight();\n        // create a viewBox three times as large as the symbol itself,\n        // to allow for strokeWidth being displayed correctly at the corners.\n        var viewBox = [symbolExtent.left - width,\n                        symbolExtent.bottom - height, width * 3, height * 3];\n        symbolNode.setAttributeNS(null, \"viewBox\", viewBox.join(\" \"));\n        this.symbolMetrics[id] = [\n            Math.max(width, height),\n            symbolExtent.getCenterLonLat().lon,\n            symbolExtent.getCenterLonLat().lat\n        ];\n        \n        this.defs.appendChild(symbolNode);\n        return symbolNode;\n    },\n    \n    /**\n     * Method: getFeatureIdFromEvent\n     * \n     * Parameters:\n     * evt - {Object} An <OpenLayers.Event> object\n     *\n     * Returns:\n     * {String} A feature id or undefined.\n     */\n    getFeatureIdFromEvent: function(evt) {\n        var featureId = OpenLayers.Renderer.Elements.prototype.getFeatureIdFromEvent.apply(this, arguments);\n        if(!featureId) {\n            var target = evt.target;\n            featureId = target.parentNode && target != this.rendererRoot ?\n                target.parentNode._featureId : undefined;\n        }\n        return featureId;\n    },\n\n    CLASS_NAME: \"OpenLayers.Renderer.SVG\"\n});\n\n/**\n * Constant: OpenLayers.Renderer.SVG.LABEL_ALIGN\n * {Object}\n */\nOpenLayers.Renderer.SVG.LABEL_ALIGN = {\n    \"l\": \"start\",\n    \"r\": \"end\",\n    \"b\": \"bottom\",\n    \"t\": \"hanging\"\n};\n\n/**\n * Constant: OpenLayers.Renderer.SVG.LABEL_VSHIFT\n * {Object}\n */\nOpenLayers.Renderer.SVG.LABEL_VSHIFT = {\n    // according to\n    // http://www.w3.org/Graphics/SVG/Test/20061213/htmlObjectHarness/full-text-align-02-b.html\n    // a baseline-shift of -70% shifts the text exactly from the\n    // bottom to the top of the baseline, so -35% moves the text to\n    // the center of the baseline.\n    \"t\": \"-70%\",\n    \"b\": \"0\"    \n};\n\n/**\n * Constant: OpenLayers.Renderer.SVG.LABEL_VFACTOR\n * {Object}\n */\nOpenLayers.Renderer.SVG.LABEL_VFACTOR = {\n    \"t\": 0,\n    \"b\": -1\n};\n\n/**\n * Function: OpenLayers.Renderer.SVG.preventDefault\n * *Deprecated*.  Use <OpenLayers.Event.preventDefault> method instead.\n * Used to prevent default events (especially opening images in a new tab on\n * ctrl-click) from being executed for externalGraphic symbols\n */\nOpenLayers.Renderer.SVG.preventDefault = function(e) {\n    OpenLayers.Event.preventDefault(e);\n};\n/* ======================================================================\n    OpenLayers/Popup.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/BaseTypes/Class.js\n */\n\n\n/**\n * Class: OpenLayers.Popup\n * A popup is a small div that can opened and closed on the map.\n * Typically opened in response to clicking on a marker.  \n * See <OpenLayers.Marker>.  Popup's don't require their own\n * layer and are added the the map using the <OpenLayers.Map.addPopup>\n * method.\n *\n * Example:\n * (code)\n * popup = new OpenLayers.Popup(\"chicken\", \n *                    new OpenLayers.LonLat(5,40),\n *                    new OpenLayers.Size(200,200),\n *                    \"example popup\",\n *                    true);\n *       \n * map.addPopup(popup);\n * (end)\n */\nOpenLayers.Popup = OpenLayers.Class({\n\n    /** \n     * Property: events  \n     * {<OpenLayers.Events>} custom event manager \n     */\n    events: null,\n    \n    /** Property: id\n     * {String} the unique identifier assigned to this popup.\n     */\n    id: \"\",\n\n    /** \n     * Property: lonlat \n     * {<OpenLayers.LonLat>} the position of this popup on the map\n     */\n    lonlat: null,\n\n    /** \n     * Property: div \n     * {DOMElement} the div that contains this popup.\n     */\n    div: null,\n\n    /** \n     * Property: contentSize \n     * {<OpenLayers.Size>} the width and height of the content.\n     */\n    contentSize: null,    \n\n    /** \n     * Property: size \n     * {<OpenLayers.Size>} the width and height of the popup.\n     */\n    size: null,    \n\n    /** \n     * Property: contentHTML \n     * {String} An HTML string for this popup to display.\n     */\n    contentHTML: null,\n    \n    /** \n     * Property: backgroundColor \n     * {String} the background color used by the popup.\n     */\n    backgroundColor: \"\",\n    \n    /** \n     * Property: opacity \n     * {float} the opacity of this popup (between 0.0 and 1.0)\n     */\n    opacity: \"\",\n\n    /** \n     * Property: border \n     * {String} the border size of the popup.  (eg 2px)\n     */\n    border: \"\",\n    \n    /** \n     * Property: contentDiv \n     * {DOMElement} a reference to the element that holds the content of\n     *              the div.\n     */\n    contentDiv: null,\n    \n    /** \n     * Property: groupDiv \n     * {DOMElement} First and only child of 'div'. The group Div contains the\n     *     'contentDiv' and the 'closeDiv'.\n     */\n    groupDiv: null,\n\n    /** \n     * Property: closeDiv\n     * {DOMElement} the optional closer image\n     */\n    closeDiv: null,\n\n    /** \n     * APIProperty: autoSize\n     * {Boolean} Resize the popup to auto-fit the contents.\n     *     Default is false.\n     */\n    autoSize: false,\n\n    /**\n     * APIProperty: minSize\n     * {<OpenLayers.Size>} Minimum size allowed for the popup's contents.\n     */\n    minSize: null,\n\n    /**\n     * APIProperty: maxSize\n     * {<OpenLayers.Size>} Maximum size allowed for the popup's contents.\n     */\n    maxSize: null,\n\n    /** \n     * Property: displayClass\n     * {String} The CSS class of the popup.\n     */\n    displayClass: \"olPopup\",\n\n    /** \n     * Property: contentDisplayClass\n     * {String} The CSS class of the popup content div.\n     */\n    contentDisplayClass: \"olPopupContent\",\n\n    /** \n     * Property: padding \n     * {int or <OpenLayers.Bounds>} An extra opportunity to specify internal \n     *     padding of the content div inside the popup. This was originally\n     *     confused with the css padding as specified in style.css's \n     *     'olPopupContent' class. We would like to get rid of this altogether,\n     *     except that it does come in handy for the framed and anchoredbubble\n     *     popups, who need to maintain yet another barrier between their \n     *     content and the outer border of the popup itself. \n     * \n     *     Note that in order to not break API, we must continue to support \n     *     this property being set as an integer. Really, though, we'd like to \n     *     have this specified as a Bounds object so that user can specify\n     *     distinct left, top, right, bottom paddings. With the 3.0 release\n     *     we can make this only a bounds.\n     */\n    padding: 0,\n\n    /** \n     * Property: disableFirefoxOverflowHack\n     * {Boolean} The hack for overflow in Firefox causes all elements \n     *     to be re-drawn, which causes Flash elements to be \n     *     re-initialized, which is troublesome.\n     *     With this property the hack can be disabled.\n     */\n    disableFirefoxOverflowHack: false,\n\n    /**\n     * Method: fixPadding\n     * To be removed in 3.0, this function merely helps us to deal with the \n     *     case where the user may have set an integer value for padding, \n     *     instead of an <OpenLayers.Bounds> object.\n     */\n    fixPadding: function() {\n        if (typeof this.padding == \"number\") {\n            this.padding = new OpenLayers.Bounds(\n                this.padding, this.padding, this.padding, this.padding\n            );\n        }\n    },\n\n    /**\n     * APIProperty: panMapIfOutOfView\n     * {Boolean} When drawn, pan map such that the entire popup is visible in\n     *     the current viewport (if necessary).\n     *     Default is false.\n     */\n    panMapIfOutOfView: false,\n    \n    /**\n     * APIProperty: keepInMap \n     * {Boolean} If panMapIfOutOfView is false, and this property is true, \n     *     contrain the popup such that it always fits in the available map\n     *     space. By default, this is not set on the base class. If you are\n     *     creating popups that are near map edges and not allowing pannning,\n     *     and especially if you have a popup which has a\n     *     fixedRelativePosition, setting this to false may be a smart thing to\n     *     do. Subclasses may want to override this setting.\n     *   \n     *     Default is false.\n     */\n    keepInMap: false,\n\n    /**\n     * APIProperty: closeOnMove\n     * {Boolean} When map pans, close the popup.\n     *     Default is false.\n     */\n    closeOnMove: false,\n    \n    /** \n     * Property: map \n     * {<OpenLayers.Map>} this gets set in Map.js when the popup is added to the map\n     */\n    map: null,\n\n    /** \n    * Constructor: OpenLayers.Popup\n    * Create a popup.\n    * \n    * Parameters: \n    * id - {String} a unqiue identifier for this popup.  If null is passed\n    *               an identifier will be automatically generated. \n    * lonlat - {<OpenLayers.LonLat>}  The position on the map the popup will\n    *                                 be shown.\n    * contentSize - {<OpenLayers.Size>} The size of the content.\n    * contentHTML - {String}          An HTML string to display inside the   \n    *                                 popup.\n    * closeBox - {Boolean}            Whether to display a close box inside\n    *                                 the popup.\n    * closeBoxCallback - {Function}   Function to be called on closeBox click.\n    */\n    initialize:function(id, lonlat, contentSize, contentHTML, closeBox, closeBoxCallback) {\n        if (id == null) {\n            id = OpenLayers.Util.createUniqueID(this.CLASS_NAME + \"_\");\n        }\n\n        this.id = id;\n        this.lonlat = lonlat;\n\n        this.contentSize = (contentSize != null) ? contentSize \n                                  : new OpenLayers.Size(\n                                                   OpenLayers.Popup.WIDTH,\n                                                   OpenLayers.Popup.HEIGHT);\n        if (contentHTML != null) { \n             this.contentHTML = contentHTML;\n        }\n        this.backgroundColor = OpenLayers.Popup.COLOR;\n        this.opacity = OpenLayers.Popup.OPACITY;\n        this.border = OpenLayers.Popup.BORDER;\n\n        this.div = OpenLayers.Util.createDiv(this.id, null, null, \n                                             null, null, null, \"hidden\");\n        this.div.className = this.displayClass;\n        \n        var groupDivId = this.id + \"_GroupDiv\";\n        this.groupDiv = OpenLayers.Util.createDiv(groupDivId, null, null, \n                                                    null, \"relative\", null,\n                                                    \"hidden\");\n\n        var id = this.div.id + \"_contentDiv\";\n        this.contentDiv = OpenLayers.Util.createDiv(id, null, this.contentSize.clone(), \n                                                    null, \"relative\");\n        this.contentDiv.className = this.contentDisplayClass;\n        this.groupDiv.appendChild(this.contentDiv);\n        this.div.appendChild(this.groupDiv);\n\n        if (closeBox) {\n            this.addCloseBox(closeBoxCallback);\n        } \n\n        this.registerEvents();\n    },\n\n    /** \n     * Method: destroy\n     * nullify references to prevent circular references and memory leaks\n     */\n    destroy: function() {\n\n        this.id = null;\n        this.lonlat = null;\n        this.size = null;\n        this.contentHTML = null;\n        \n        this.backgroundColor = null;\n        this.opacity = null;\n        this.border = null;\n        \n        if (this.closeOnMove && this.map) {\n            this.map.events.unregister(\"movestart\", this, this.hide);\n        }\n\n        this.events.destroy();\n        this.events = null;\n        \n        if (this.closeDiv) {\n            OpenLayers.Event.stopObservingElement(this.closeDiv); \n            this.groupDiv.removeChild(this.closeDiv);\n        }\n        this.closeDiv = null;\n        \n        this.div.removeChild(this.groupDiv);\n        this.groupDiv = null;\n\n        if (this.map != null) {\n            this.map.removePopup(this);\n        }\n        this.map = null;\n        this.div = null;\n        \n        this.autoSize = null;\n        this.minSize = null;\n        this.maxSize = null;\n        this.padding = null;\n        this.panMapIfOutOfView = null;\n    },\n\n    /** \n    * Method: draw\n    * Constructs the elements that make up the popup.\n    *\n    * Parameters:\n    * px - {<OpenLayers.Pixel>} the position the popup in pixels.\n    * \n    * Returns:\n    * {DOMElement} Reference to a div that contains the drawn popup\n    */\n    draw: function(px) {\n        if (px == null) {\n            if ((this.lonlat != null) && (this.map != null)) {\n                px = this.map.getLayerPxFromLonLat(this.lonlat);\n            }\n        }\n\n        // this assumes that this.map already exists, which is okay because \n        // this.draw is only called once the popup has been added to the map.\n        if (this.closeOnMove) {\n            this.map.events.register(\"movestart\", this, this.hide);\n        }\n        \n        //listen to movestart, moveend to disable overflow (FF bug)\n        if (!this.disableFirefoxOverflowHack && OpenLayers.BROWSER_NAME == 'firefox') {\n            this.map.events.register(\"movestart\", this, function() {\n                var style = document.defaultView.getComputedStyle(\n                    this.contentDiv, null\n                );\n                var currentOverflow = style.getPropertyValue(\"overflow\");\n                if (currentOverflow != \"hidden\") {\n                    this.contentDiv._oldOverflow = currentOverflow;\n                    this.contentDiv.style.overflow = \"hidden\";\n                }\n            });\n            this.map.events.register(\"moveend\", this, function() {\n                var oldOverflow = this.contentDiv._oldOverflow;\n                if (oldOverflow) {\n                    this.contentDiv.style.overflow = oldOverflow;\n                    this.contentDiv._oldOverflow = null;\n                }\n            });\n        }\n\n        this.moveTo(px);\n        if (!this.autoSize && !this.size) {\n            this.setSize(this.contentSize);\n        }\n        this.setBackgroundColor();\n        this.setOpacity();\n        this.setBorder();\n        this.setContentHTML();\n        \n        if (this.panMapIfOutOfView) {\n            this.panIntoView();\n        }    \n\n        return this.div;\n    },\n\n    /** \n     * Method: updatePosition\n     * if the popup has a lonlat and its map members set, \n     * then have it move itself to its proper position\n     */\n    updatePosition: function() {\n        if ((this.lonlat) && (this.map)) {\n            var px = this.map.getLayerPxFromLonLat(this.lonlat);\n            if (px) {\n                this.moveTo(px);           \n            }    \n        }\n    },\n\n    /**\n     * Method: moveTo\n     * \n     * Parameters:\n     * px - {<OpenLayers.Pixel>} the top and left position of the popup div. \n     */\n    moveTo: function(px) {\n        if ((px != null) && (this.div != null)) {\n            this.div.style.left = px.x + \"px\";\n            this.div.style.top = px.y + \"px\";\n        }\n    },\n\n    /**\n     * Method: visible\n     *\n     * Returns:      \n     * {Boolean} Boolean indicating whether or not the popup is visible\n     */\n    visible: function() {\n        return OpenLayers.Element.visible(this.div);\n    },\n\n    /**\n     * Method: toggle\n     * Toggles visibility of the popup.\n     */\n    toggle: function() {\n        if (this.visible()) {\n            this.hide();\n        } else {\n            this.show();\n        }\n    },\n\n    /**\n     * Method: show\n     * Makes the popup visible.\n     */\n    show: function() {\n        this.div.style.display = '';\n\n        if (this.panMapIfOutOfView) {\n            this.panIntoView();\n        }    \n    },\n\n    /**\n     * Method: hide\n     * Makes the popup invisible.\n     */\n    hide: function() {\n        this.div.style.display = 'none';\n    },\n\n    /**\n     * Method: setSize\n     * Used to adjust the size of the popup. \n     *\n     * Parameters:\n     * contentSize - {<OpenLayers.Size>} the new size for the popup's \n     *     contents div (in pixels).\n     */\n    setSize:function(contentSize) { \n        this.size = contentSize.clone(); \n        \n        // if our contentDiv has a css 'padding' set on it by a stylesheet, we \n        //  must add that to the desired \"size\". \n        var contentDivPadding = this.getContentDivPadding();\n        var wPadding = contentDivPadding.left + contentDivPadding.right;\n        var hPadding = contentDivPadding.top + contentDivPadding.bottom;\n\n        // take into account the popup's 'padding' property\n        this.fixPadding();\n        wPadding += this.padding.left + this.padding.right;\n        hPadding += this.padding.top + this.padding.bottom;\n\n        // make extra space for the close div\n        if (this.closeDiv) {\n            var closeDivWidth = parseInt(this.closeDiv.style.width);\n            wPadding += closeDivWidth + contentDivPadding.right;\n        }\n\n        //increase size of the main popup div to take into account the \n        // users's desired padding and close div.        \n        this.size.w += wPadding;\n        this.size.h += hPadding;\n\n        //now if our browser is IE, we need to actually make the contents \n        // div itself bigger to take its own padding into effect. this makes \n        // me want to shoot someone, but so it goes.\n        if (OpenLayers.BROWSER_NAME == \"msie\") {\n            this.contentSize.w += \n                contentDivPadding.left + contentDivPadding.right;\n            this.contentSize.h += \n                contentDivPadding.bottom + contentDivPadding.top;\n        }\n\n        if (this.div != null) {\n            this.div.style.width = this.size.w + \"px\";\n            this.div.style.height = this.size.h + \"px\";\n        }\n        if (this.contentDiv != null){\n            this.contentDiv.style.width = contentSize.w + \"px\";\n            this.contentDiv.style.height = contentSize.h + \"px\";\n        }\n    },  \n\n    /**\n     * APIMethod: updateSize\n     * Auto size the popup so that it precisely fits its contents (as \n     *     determined by this.contentDiv.innerHTML). Popup size will, of\n     *     course, be limited by the available space on the current map\n     */\n    updateSize: function() {\n        \n        // determine actual render dimensions of the contents by putting its\n        // contents into a fake contentDiv (for the CSS) and then measuring it\n        var preparedHTML = \"<div class='\" + this.contentDisplayClass+ \"'>\" + \n            this.contentDiv.innerHTML + \n            \"</div>\";\n \n        var containerElement = (this.map) ? this.map.div : document.body;\n        var realSize = OpenLayers.Util.getRenderedDimensions(\n            preparedHTML, null, {\n                displayClass: this.displayClass,\n                containerElement: containerElement\n            }\n        );\n\n        // is the \"real\" size of the div is safe to display in our map?\n        var safeSize = this.getSafeContentSize(realSize);\n\n        var newSize = null;\n        if (safeSize.equals(realSize)) {\n            //real size of content is small enough to fit on the map, \n            // so we use real size.\n            newSize = realSize;\n\n        } else {\n\n            // make a new 'size' object with the clipped dimensions \n            // set or null if not clipped.\n            var fixedSize = {\n                w: (safeSize.w < realSize.w) ? safeSize.w : null,\n                h: (safeSize.h < realSize.h) ? safeSize.h : null\n            };\n        \n            if (fixedSize.w && fixedSize.h) {\n                //content is too big in both directions, so we will use \n                // max popup size (safeSize), knowing well that it will \n                // overflow both ways.                \n                newSize = safeSize;\n            } else {\n                //content is clipped in only one direction, so we need to \n                // run getRenderedDimensions() again with a fixed dimension\n                var clippedSize = OpenLayers.Util.getRenderedDimensions(\n                    preparedHTML, fixedSize, {\n                        displayClass: this.contentDisplayClass,\n                        containerElement: containerElement\n                    }\n                );\n                \n                //if the clipped size is still the same as the safeSize, \n                // that means that our content must be fixed in the \n                // offending direction. If overflow is 'auto', this means \n                // we are going to have a scrollbar for sure, so we must \n                // adjust for that.\n                //\n                var currentOverflow = OpenLayers.Element.getStyle(\n                    this.contentDiv, \"overflow\"\n                );\n                if ( (currentOverflow != \"hidden\") && \n                     (clippedSize.equals(safeSize)) ) {\n                    var scrollBar = OpenLayers.Util.getScrollbarWidth();\n                    if (fixedSize.w) {\n                        clippedSize.h += scrollBar;\n                    } else {\n                        clippedSize.w += scrollBar;\n                    }\n                }\n                \n                newSize = this.getSafeContentSize(clippedSize);\n            }\n        }                        \n        this.setSize(newSize);     \n    },    \n\n    /**\n     * Method: setBackgroundColor\n     * Sets the background color of the popup.\n     *\n     * Parameters:\n     * color - {String} the background color.  eg \"#FFBBBB\"\n     */\n    setBackgroundColor:function(color) { \n        if (color != undefined) {\n            this.backgroundColor = color; \n        }\n        \n        if (this.div != null) {\n            this.div.style.backgroundColor = this.backgroundColor;\n        }\n    },  \n    \n    /**\n     * Method: setOpacity\n     * Sets the opacity of the popup.\n     * \n     * Parameters:\n     * opacity - {float} A value between 0.0 (transparent) and 1.0 (solid).   \n     */\n    setOpacity:function(opacity) { \n        if (opacity != undefined) {\n            this.opacity = opacity; \n        }\n        \n        if (this.div != null) {\n            // for Mozilla and Safari\n            this.div.style.opacity = this.opacity;\n\n            // for IE\n            this.div.style.filter = 'alpha(opacity=' + this.opacity*100 + ')';\n        }\n    },  \n    \n    /**\n     * Method: setBorder\n     * Sets the border style of the popup.\n     *\n     * Parameters:\n     * border - {String} The border style value. eg 2px \n     */\n    setBorder:function(border) { \n        if (border != undefined) {\n            this.border = border;\n        }\n        \n        if (this.div != null) {\n            this.div.style.border = this.border;\n        }\n    },      \n    \n    /**\n     * Method: setContentHTML\n     * Allows the user to set the HTML content of the popup.\n     *\n     * Parameters:\n     * contentHTML - {String} HTML for the div.\n     */\n    setContentHTML:function(contentHTML) {\n\n        if (contentHTML != null) {\n            this.contentHTML = contentHTML;\n        }\n       \n        if ((this.contentDiv != null) && \n            (this.contentHTML != null) &&\n            (this.contentHTML != this.contentDiv.innerHTML)) {\n       \n            this.contentDiv.innerHTML = this.contentHTML;\n       \n            if (this.autoSize) {\n                \n                //if popup has images, listen for when they finish\n                // loading and resize accordingly\n                this.registerImageListeners();\n\n                //auto size the popup to its current contents\n                this.updateSize();\n            }\n        }    \n\n    },\n    \n    /**\n     * Method: registerImageListeners\n     * Called when an image contained by the popup loaded. this function\n     *     updates the popup size, then unregisters the image load listener.\n     */   \n    registerImageListeners: function() { \n\n        // As the images load, this function will call updateSize() to \n        // resize the popup to fit the content div (which presumably is now\n        // bigger than when the image was not loaded).\n        // \n        // If the 'panMapIfOutOfView' property is set, we will pan the newly\n        // resized popup back into view.\n        // \n        // Note that this function, when called, will have 'popup' and \n        // 'img' properties in the context.\n        //\n        var onImgLoad = function() {\n            if (this.popup.id === null) { // this.popup has been destroyed!\n                return;\n            }\n            this.popup.updateSize();\n     \n            if ( this.popup.visible() && this.popup.panMapIfOutOfView ) {\n                this.popup.panIntoView();\n            }\n\n            OpenLayers.Event.stopObserving(\n                this.img, \"load\", this.img._onImgLoad\n            );\n    \n        };\n\n        //cycle through the images and if their size is 0x0, that means that \n        // they haven't been loaded yet, so we attach the listener, which \n        // will fire when the images finish loading and will resize the \n        // popup accordingly to its new size.\n        var images = this.contentDiv.getElementsByTagName(\"img\");\n        for (var i = 0, len = images.length; i < len; i++) {\n            var img = images[i];\n            if (img.width == 0 || img.height == 0) {\n\n                var context = {\n                    'popup': this,\n                    'img': img\n                };\n\n                //expando this function to the image itself before registering\n                // it. This way we can easily and properly unregister it.\n                img._onImgLoad = OpenLayers.Function.bind(onImgLoad, context);\n\n                OpenLayers.Event.observe(img, 'load', img._onImgLoad);\n            }    \n        } \n    },\n\n    /**\n     * APIMethod: getSafeContentSize\n     * \n     * Parameters:\n     * size - {<OpenLayers.Size>} Desired size to make the popup.\n     * \n     * Returns:\n     * {<OpenLayers.Size>} A size to make the popup which is neither smaller\n     *     than the specified minimum size, nor bigger than the maximum \n     *     size (which is calculated relative to the size of the viewport).\n     */\n    getSafeContentSize: function(size) {\n\n        var safeContentSize = size.clone();\n\n        // if our contentDiv has a css 'padding' set on it by a stylesheet, we \n        //  must add that to the desired \"size\". \n        var contentDivPadding = this.getContentDivPadding();\n        var wPadding = contentDivPadding.left + contentDivPadding.right;\n        var hPadding = contentDivPadding.top + contentDivPadding.bottom;\n\n        // take into account the popup's 'padding' property\n        this.fixPadding();\n        wPadding += this.padding.left + this.padding.right;\n        hPadding += this.padding.top + this.padding.bottom;\n\n        if (this.closeDiv) {\n            var closeDivWidth = parseInt(this.closeDiv.style.width);\n            wPadding += closeDivWidth + contentDivPadding.right;\n        }\n\n        // prevent the popup from being smaller than a specified minimal size\n        if (this.minSize) {\n            safeContentSize.w = Math.max(safeContentSize.w, \n                (this.minSize.w - wPadding));\n            safeContentSize.h = Math.max(safeContentSize.h, \n                (this.minSize.h - hPadding));\n        }\n\n        // prevent the popup from being bigger than a specified maximum size\n        if (this.maxSize) {\n            safeContentSize.w = Math.min(safeContentSize.w, \n                (this.maxSize.w - wPadding));\n            safeContentSize.h = Math.min(safeContentSize.h, \n                (this.maxSize.h - hPadding));\n        }\n        \n        //make sure the desired size to set doesn't result in a popup that \n        // is bigger than the map's viewport.\n        //\n        if (this.map && this.map.size) {\n            \n            var extraX = 0, extraY = 0;\n            if (this.keepInMap && !this.panMapIfOutOfView) {\n                var px = this.map.getPixelFromLonLat(this.lonlat);\n                switch (this.relativePosition) {\n                    case \"tr\":\n                        extraX = px.x;\n                        extraY = this.map.size.h - px.y;\n                        break;\n                    case \"tl\":\n                        extraX = this.map.size.w - px.x;\n                        extraY = this.map.size.h - px.y;\n                        break;\n                    case \"bl\":\n                        extraX = this.map.size.w - px.x;\n                        extraY = px.y;\n                        break;\n                    case \"br\":\n                        extraX = px.x;\n                        extraY = px.y;\n                        break;\n                    default:    \n                        extraX = px.x;\n                        extraY = this.map.size.h - px.y;\n                        break;\n                }\n            }    \n          \n            var maxY = this.map.size.h - \n                this.map.paddingForPopups.top - \n                this.map.paddingForPopups.bottom - \n                hPadding - extraY;\n            \n            var maxX = this.map.size.w - \n                this.map.paddingForPopups.left - \n                this.map.paddingForPopups.right - \n                wPadding - extraX;\n            \n            safeContentSize.w = Math.min(safeContentSize.w, maxX);\n            safeContentSize.h = Math.min(safeContentSize.h, maxY);\n        }\n        \n        return safeContentSize;\n    },\n    \n    /**\n     * Method: getContentDivPadding\n     * Glorious, oh glorious hack in order to determine the css 'padding' of \n     *     the contentDiv. IE/Opera return null here unless we actually add the \n     *     popup's main 'div' element (which contains contentDiv) to the DOM. \n     *     So we make it invisible and then add it to the document temporarily. \n     *\n     *     Once we've taken the padding readings we need, we then remove it \n     *     from the DOM (it will actually get added to the DOM in \n     *     Map.js's addPopup)\n     *\n     * Returns:\n     * {<OpenLayers.Bounds>}\n     */\n    getContentDivPadding: function() {\n\n        //use cached value if we have it\n        var contentDivPadding = this._contentDivPadding;\n        if (!contentDivPadding) {\n\n            if (this.div.parentNode == null) {\n                //make the div invisible and add it to the page        \n                this.div.style.display = \"none\";\n                document.body.appendChild(this.div);\n            }\n                    \n            //read the padding settings from css, put them in an OL.Bounds        \n            contentDivPadding = new OpenLayers.Bounds(\n                OpenLayers.Element.getStyle(this.contentDiv, \"padding-left\"),\n                OpenLayers.Element.getStyle(this.contentDiv, \"padding-bottom\"),\n                OpenLayers.Element.getStyle(this.contentDiv, \"padding-right\"),\n                OpenLayers.Element.getStyle(this.contentDiv, \"padding-top\")\n            );\n    \n            //cache the value\n            this._contentDivPadding = contentDivPadding;\n\n            if (this.div.parentNode == document.body) {\n                //remove the div from the page and make it visible again\n                document.body.removeChild(this.div);\n                this.div.style.display = \"\";\n            }\n        }\n        return contentDivPadding;\n    },\n\n    /**\n     * Method: addCloseBox\n     * \n     * Parameters:\n     * callback - {Function} The callback to be called when the close button\n     *     is clicked.\n     */\n    addCloseBox: function(callback) {\n\n        this.closeDiv = OpenLayers.Util.createDiv(\n            this.id + \"_close\", null, {w: 17, h: 17}\n        );\n        this.closeDiv.className = \"olPopupCloseBox\"; \n        \n        // use the content div's css padding to determine if we should\n        //  padd the close div\n        var contentDivPadding = this.getContentDivPadding();\n         \n        this.closeDiv.style.right = contentDivPadding.right + \"px\";\n        this.closeDiv.style.top = contentDivPadding.top + \"px\";\n        this.groupDiv.appendChild(this.closeDiv);\n\n        var closePopup = callback || function(e) {\n            this.hide();\n            OpenLayers.Event.stop(e);\n        };\n        OpenLayers.Event.observe(this.closeDiv, \"touchend\", \n                OpenLayers.Function.bindAsEventListener(closePopup, this));\n        OpenLayers.Event.observe(this.closeDiv, \"click\", \n                OpenLayers.Function.bindAsEventListener(closePopup, this));\n    },\n\n    /**\n     * Method: panIntoView\n     * Pans the map such that the popup is totaly viewable (if necessary)\n     */\n    panIntoView: function() {\n        \n        var mapSize = this.map.getSize();\n    \n        //start with the top left corner of the popup, in px, \n        // relative to the viewport\n        var origTL = this.map.getViewPortPxFromLayerPx( new OpenLayers.Pixel(\n            parseInt(this.div.style.left),\n            parseInt(this.div.style.top)\n        ));\n        var newTL = origTL.clone();\n    \n        //new left (compare to margins, using this.size to calculate right)\n        if (origTL.x < this.map.paddingForPopups.left) {\n            newTL.x = this.map.paddingForPopups.left;\n        } else \n        if ( (origTL.x + this.size.w) > (mapSize.w - this.map.paddingForPopups.right)) {\n            newTL.x = mapSize.w - this.map.paddingForPopups.right - this.size.w;\n        }\n        \n        //new top (compare to margins, using this.size to calculate bottom)\n        if (origTL.y < this.map.paddingForPopups.top) {\n            newTL.y = this.map.paddingForPopups.top;\n        } else \n        if ( (origTL.y + this.size.h) > (mapSize.h - this.map.paddingForPopups.bottom)) {\n            newTL.y = mapSize.h - this.map.paddingForPopups.bottom - this.size.h;\n        }\n        \n        var dx = origTL.x - newTL.x;\n        var dy = origTL.y - newTL.y;\n        \n        this.map.pan(dx, dy);\n    },\n\n    /** \n     * Method: registerEvents\n     * Registers events on the popup.\n     *\n     * Do this in a separate function so that subclasses can \n     *   choose to override it if they wish to deal differently\n     *   with mouse events\n     * \n     *   Note in the following handler functions that some special\n     *    care is needed to deal correctly with mousing and popups. \n     *   \n     *   Because the user might select the zoom-rectangle option and\n     *    then drag it over a popup, we need a safe way to allow the\n     *    mousemove and mouseup events to pass through the popup when\n     *    they are initiated from outside. The same procedure is needed for\n     *    touchmove and touchend events.\n     * \n     *   Otherwise, we want to essentially kill the event propagation\n     *    for all other events, though we have to do so carefully, \n     *    without disabling basic html functionality, like clicking on \n     *    hyperlinks or drag-selecting text.\n     */\n     registerEvents:function() {\n        this.events = new OpenLayers.Events(this, this.div, null, true);\n\n        function onTouchstart(evt) {\n            OpenLayers.Event.stop(evt, true);\n        }\n        this.events.on({\n            \"mousedown\": this.onmousedown,\n            \"mousemove\": this.onmousemove,\n            \"mouseup\": this.onmouseup,\n            \"click\": this.onclick,\n            \"mouseout\": this.onmouseout,\n            \"dblclick\": this.ondblclick,\n            \"touchstart\": onTouchstart,\n            scope: this\n        });\n        \n     },\n\n    /** \n     * Method: onmousedown \n     * When mouse goes down within the popup, make a note of\n     *   it locally, and then do not propagate the mousedown \n     *   (but do so safely so that user can select text inside)\n     * \n     * Parameters:\n     * evt - {Event} \n     */\n    onmousedown: function (evt) {\n        this.mousedown = true;\n        OpenLayers.Event.stop(evt, true);\n    },\n\n    /** \n     * Method: onmousemove\n     * If the drag was started within the popup, then \n     *   do not propagate the mousemove (but do so safely\n     *   so that user can select text inside)\n     * \n     * Parameters:\n     * evt - {Event} \n     */\n    onmousemove: function (evt) {\n        if (this.mousedown) {\n            OpenLayers.Event.stop(evt, true);\n        }\n    },\n\n    /** \n     * Method: onmouseup\n     * When mouse comes up within the popup, after going down \n     *   in it, reset the flag, and then (once again) do not \n     *   propagate the event, but do so safely so that user can \n     *   select text inside\n     * \n     * Parameters:\n     * evt - {Event} \n     */\n    onmouseup: function (evt) {\n        if (this.mousedown) {\n            this.mousedown = false;\n            OpenLayers.Event.stop(evt, true);\n        }\n    },\n\n    /**\n     * Method: onclick\n     * Ignore clicks, but allowing default browser handling\n     * \n     * Parameters:\n     * evt - {Event} \n     */\n    onclick: function (evt) {\n        OpenLayers.Event.stop(evt, true);\n    },\n\n    /** \n     * Method: onmouseout\n     * When mouse goes out of the popup set the flag to false so that\n     *   if they let go and then drag back in, we won't be confused.\n     * \n     * Parameters:\n     * evt - {Event} \n     */\n    onmouseout: function (evt) {\n        this.mousedown = false;\n    },\n    \n    /** \n     * Method: ondblclick\n     * Ignore double-clicks, but allowing default browser handling\n     * \n     * Parameters:\n     * evt - {Event} \n     */\n    ondblclick: function (evt) {\n        OpenLayers.Event.stop(evt, true);\n    },\n\n    CLASS_NAME: \"OpenLayers.Popup\"\n});\n\nOpenLayers.Popup.WIDTH = 200;\nOpenLayers.Popup.HEIGHT = 200;\nOpenLayers.Popup.COLOR = \"white\";\nOpenLayers.Popup.OPACITY = 1;\nOpenLayers.Popup.BORDER = \"0px\";\n/* ======================================================================\n    OpenLayers/Popup/Anchored.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Popup.js\n */\n\n/**\n * Class: OpenLayers.Popup.Anchored\n * \n * Inherits from:\n *  - <OpenLayers.Popup>\n */\nOpenLayers.Popup.Anchored = \n  OpenLayers.Class(OpenLayers.Popup, {\n\n    /** \n     * Property: relativePosition\n     * {String} Relative position of the popup (\"br\", \"tr\", \"tl\" or \"bl\").\n     */\n    relativePosition: null,\n    \n    /**\n     * APIProperty: keepInMap \n     * {Boolean} If panMapIfOutOfView is false, and this property is true, \n     *     contrain the popup such that it always fits in the available map\n     *     space. By default, this is set. If you are creating popups that are\n     *     near map edges and not allowing pannning, and especially if you have\n     *     a popup which has a fixedRelativePosition, setting this to false may\n     *     be a smart thing to do.\n     *   \n     *     For anchored popups, default is true, since subclasses will\n     *     usually want this functionality.\n     */\n    keepInMap: true,\n\n    /**\n     * Property: anchor\n     * {Object} Object to which we'll anchor the popup. Must expose a \n     *     'size' (<OpenLayers.Size>) and 'offset' (<OpenLayers.Pixel>).\n     */\n    anchor: null,\n\n    /** \n    * Constructor: OpenLayers.Popup.Anchored\n    * \n    * Parameters:\n    * id - {String}\n    * lonlat - {<OpenLayers.LonLat>}\n    * contentSize - {<OpenLayers.Size>}\n    * contentHTML - {String}\n    * anchor - {Object} Object which must expose a 'size' <OpenLayers.Size> \n    *     and 'offset' <OpenLayers.Pixel> (generally an <OpenLayers.Icon>).\n    * closeBox - {Boolean}\n    * closeBoxCallback - {Function} Function to be called on closeBox click.\n    */\n    initialize:function(id, lonlat, contentSize, contentHTML, anchor, closeBox,\n                        closeBoxCallback) {\n        var newArguments = [\n            id, lonlat, contentSize, contentHTML, closeBox, closeBoxCallback\n        ];\n        OpenLayers.Popup.prototype.initialize.apply(this, newArguments);\n\n        this.anchor = (anchor != null) ? anchor \n                                       : { size: new OpenLayers.Size(0,0),\n                                           offset: new OpenLayers.Pixel(0,0)};\n    },\n\n    /**\n     * APIMethod: destroy\n     */\n    destroy: function() {\n        this.anchor = null;\n        this.relativePosition = null;\n        \n        OpenLayers.Popup.prototype.destroy.apply(this, arguments);        \n    },\n\n    /**\n     * APIMethod: show\n     * Overridden from Popup since user might hide popup and then show() it \n     *     in a new location (meaning we might want to update the relative\n     *     position on the show)\n     */\n    show: function() {\n        this.updatePosition();\n        OpenLayers.Popup.prototype.show.apply(this, arguments);\n    },\n\n    /**\n     * Method: moveTo\n     * Since the popup is moving to a new px, it might need also to be moved\n     *     relative to where the marker is. We first calculate the new \n     *     relativePosition, and then we calculate the new px where we will \n     *     put the popup, based on the new relative position. \n     * \n     *     If the relativePosition has changed, we must also call \n     *     updateRelativePosition() to make any visual changes to the popup \n     *     which are associated with putting it in a new relativePosition.\n     * \n     * Parameters:\n     * px - {<OpenLayers.Pixel>}\n     */\n    moveTo: function(px) {\n        var oldRelativePosition = this.relativePosition;\n        this.relativePosition = this.calculateRelativePosition(px);\n\n        OpenLayers.Popup.prototype.moveTo.call(this, this.calculateNewPx(px));\n        \n        //if this move has caused the popup to change its relative position, \n        // we need to make the appropriate cosmetic changes.\n        if (this.relativePosition != oldRelativePosition) {\n            this.updateRelativePosition();\n        }\n    },\n\n    /**\n     * APIMethod: setSize\n     * \n     * Parameters:\n     * contentSize - {<OpenLayers.Size>} the new size for the popup's \n     *     contents div (in pixels).\n     */\n    setSize:function(contentSize) { \n        OpenLayers.Popup.prototype.setSize.apply(this, arguments);\n\n        if ((this.lonlat) && (this.map)) {\n            var px = this.map.getLayerPxFromLonLat(this.lonlat);\n            this.moveTo(px);\n        }\n    },  \n    \n    /** \n     * Method: calculateRelativePosition\n     * \n     * Parameters:\n     * px - {<OpenLayers.Pixel>}\n     * \n     * Returns:\n     * {String} The relative position (\"br\" \"tr\" \"tl\" \"bl\") at which the popup\n     *     should be placed.\n     */\n    calculateRelativePosition:function(px) {\n        var lonlat = this.map.getLonLatFromLayerPx(px);        \n        \n        var extent = this.map.getExtent();\n        var quadrant = extent.determineQuadrant(lonlat);\n        \n        return OpenLayers.Bounds.oppositeQuadrant(quadrant);\n    }, \n\n    /**\n     * Method: updateRelativePosition\n     * The popup has been moved to a new relative location, so we may want to \n     *     make some cosmetic adjustments to it. \n     * \n     *     Note that in the classic Anchored popup, there is nothing to do \n     *     here, since the popup looks exactly the same in all four positions.\n     *     Subclasses such as Framed, however, will want to do something\n     *     special here.\n     */\n    updateRelativePosition: function() {\n        //to be overridden by subclasses\n    },\n\n    /** \n     * Method: calculateNewPx\n     * \n     * Parameters:\n     * px - {<OpenLayers.Pixel>}\n     * \n     * Returns:\n     * {<OpenLayers.Pixel>} The the new px position of the popup on the screen\n     *     relative to the passed-in px.\n     */\n    calculateNewPx:function(px) {\n        var newPx = px.offset(this.anchor.offset);\n        \n        //use contentSize if size is not already set\n        var size = this.size || this.contentSize;\n\n        var top = (this.relativePosition.charAt(0) == 't');\n        newPx.y += (top) ? -size.h : this.anchor.size.h;\n        \n        var left = (this.relativePosition.charAt(1) == 'l');\n        newPx.x += (left) ? -size.w : this.anchor.size.w;\n\n        return newPx;   \n    },\n\n    CLASS_NAME: \"OpenLayers.Popup.Anchored\"\n});\n/* ======================================================================\n    OpenLayers/Popup/Framed.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Popup/Anchored.js\n */\n\n/**\n * Class: OpenLayers.Popup.Framed\n * \n * Inherits from:\n *  - <OpenLayers.Popup.Anchored>\n */\nOpenLayers.Popup.Framed =\n  OpenLayers.Class(OpenLayers.Popup.Anchored, {\n\n    /**\n     * Property: imageSrc\n     * {String} location of the image to be used as the popup frame\n     */\n    imageSrc: null,\n\n    /**\n     * Property: imageSize\n     * {<OpenLayers.Size>} Size (measured in pixels) of the image located\n     *     by the 'imageSrc' property.\n     */\n    imageSize: null,\n\n    /**\n     * APIProperty: isAlphaImage\n     * {Boolean} The image has some alpha and thus needs to use the alpha \n     *     image hack. Note that setting this to true will have no noticeable\n     *     effect in FF or IE7 browsers, but will all but crush the ie6 \n     *     browser. \n     *     Default is false.\n     */\n    isAlphaImage: false,\n\n    /**\n     * Property: positionBlocks\n     * {Object} Hash of different position blocks (Object/Hashs). Each block \n     *     will be keyed by a two-character 'relativePosition' \n     *     code string (ie \"tl\", \"tr\", \"bl\", \"br\"). Block properties are \n     *     'offset', 'padding' (self-explanatory), and finally the 'blocks'\n     *     parameter, which is an array of the block objects. \n     * \n     *     Each block object must have 'size', 'anchor', and 'position' \n     *     properties.\n     * \n     *     Note that positionBlocks should never be modified at runtime.\n     */\n    positionBlocks: null,\n\n    /**\n     * Property: blocks\n     * {Array[Object]} Array of objects, each of which is one \"block\" of the \n     *     popup. Each block has a 'div' and an 'image' property, both of \n     *     which are DOMElements, and the latter of which is appended to the \n     *     former. These are reused as the popup goes changing positions for\n     *     great economy and elegance.\n     */\n    blocks: null,\n\n    /** \n     * APIProperty: fixedRelativePosition\n     * {Boolean} We want the framed popup to work dynamically placed relative\n     *     to its anchor but also in just one fixed position. A well designed\n     *     framed popup will have the pixels and logic to display itself in \n     *     any of the four relative positions, but (understandably), this will\n     *     not be the case for all of them. By setting this property to 'true', \n     *     framed popup will not recalculate for the best placement each time\n     *     it's open, but will always open the same way. \n     *     Note that if this is set to true, it is generally advisable to also\n     *     set the 'panIntoView' property to true so that the popup can be \n     *     scrolled into view (since it will often be offscreen on open)\n     *     Default is false.\n     */\n    fixedRelativePosition: false,\n\n    /** \n     * Constructor: OpenLayers.Popup.Framed\n     * \n     * Parameters:\n     * id - {String}\n     * lonlat - {<OpenLayers.LonLat>}\n     * contentSize - {<OpenLayers.Size>}\n     * contentHTML - {String}\n     * anchor - {Object} Object to which we'll anchor the popup. Must expose \n     *     a 'size' (<OpenLayers.Size>) and 'offset' (<OpenLayers.Pixel>) \n     *     (Note that this is generally an <OpenLayers.Icon>).\n     * closeBox - {Boolean}\n     * closeBoxCallback - {Function} Function to be called on closeBox click.\n     */\n    initialize:function(id, lonlat, contentSize, contentHTML, anchor, closeBox, \n                        closeBoxCallback) {\n\n        OpenLayers.Popup.Anchored.prototype.initialize.apply(this, arguments);\n\n        if (this.fixedRelativePosition) {\n            //based on our decided relativePostion, set the current padding\n            // this keeps us from getting into trouble \n            this.updateRelativePosition();\n            \n            //make calculateRelativePosition always return the specified\n            // fixed position.\n            this.calculateRelativePosition = function(px) {\n                return this.relativePosition;\n            };\n        }\n\n        this.contentDiv.style.position = \"absolute\";\n        this.contentDiv.style.zIndex = 1;\n\n        if (closeBox) {\n            this.closeDiv.style.zIndex = 1;\n        }\n\n        this.groupDiv.style.position = \"absolute\";\n        this.groupDiv.style.top = \"0px\";\n        this.groupDiv.style.left = \"0px\";\n        this.groupDiv.style.height = \"100%\";\n        this.groupDiv.style.width = \"100%\";\n    },\n\n    /** \n     * APIMethod: destroy\n     */\n    destroy: function() {\n        this.imageSrc = null;\n        this.imageSize = null;\n        this.isAlphaImage = null;\n\n        this.fixedRelativePosition = false;\n        this.positionBlocks = null;\n\n        //remove our blocks\n        for(var i = 0; i < this.blocks.length; i++) {\n            var block = this.blocks[i];\n\n            if (block.image) {\n                block.div.removeChild(block.image);\n            }\n            block.image = null;\n\n            if (block.div) {\n                this.groupDiv.removeChild(block.div);\n            }\n            block.div = null;\n        }\n        this.blocks = null;\n\n        OpenLayers.Popup.Anchored.prototype.destroy.apply(this, arguments);\n    },\n\n    /**\n     * APIMethod: setBackgroundColor\n     */\n    setBackgroundColor:function(color) {\n        //does nothing since the framed popup's entire scheme is based on a \n        // an image -- changing the background color makes no sense. \n    },\n\n    /**\n     * APIMethod: setBorder\n     */\n    setBorder:function() {\n        //does nothing since the framed popup's entire scheme is based on a \n        // an image -- changing the popup's border makes no sense. \n    },\n\n    /**\n     * Method: setOpacity\n     * Sets the opacity of the popup.\n     * \n     * Parameters:\n     * opacity - {float} A value between 0.0 (transparent) and 1.0 (solid).   \n     */\n    setOpacity:function(opacity) {\n        //does nothing since we suppose that we'll never apply an opacity\n        // to a framed popup\n    },\n\n    /**\n     * APIMethod: setSize\n     * Overridden here, because we need to update the blocks whenever the size\n     *     of the popup has changed.\n     * \n     * Parameters:\n     * contentSize - {<OpenLayers.Size>} the new size for the popup's \n     *     contents div (in pixels).\n     */\n    setSize:function(contentSize) { \n        OpenLayers.Popup.Anchored.prototype.setSize.apply(this, arguments);\n\n        this.updateBlocks();\n    },\n\n    /**\n     * Method: updateRelativePosition\n     * When the relative position changes, we need to set the new padding \n     *     BBOX on the popup, reposition the close div, and update the blocks.\n     */\n    updateRelativePosition: function() {\n\n        //update the padding\n        this.padding = this.positionBlocks[this.relativePosition].padding;\n\n        //update the position of our close box to new padding\n        if (this.closeDiv) {\n            // use the content div's css padding to determine if we should\n            //  padd the close div\n            var contentDivPadding = this.getContentDivPadding();\n\n            this.closeDiv.style.right = contentDivPadding.right + \n                                        this.padding.right + \"px\";\n            this.closeDiv.style.top = contentDivPadding.top + \n                                      this.padding.top + \"px\";\n        }\n\n        this.updateBlocks();\n    },\n\n    /** \n     * Method: calculateNewPx\n     * Besides the standard offset as determined by the Anchored class, our \n     *     Framed popups have a special 'offset' property for each of their \n     *     positions, which is used to offset the popup relative to its anchor.\n     * \n     * Parameters:\n     * px - {<OpenLayers.Pixel>}\n     * \n     * Returns:\n     * {<OpenLayers.Pixel>} The the new px position of the popup on the screen\n     *     relative to the passed-in px.\n     */\n    calculateNewPx:function(px) {\n        var newPx = OpenLayers.Popup.Anchored.prototype.calculateNewPx.apply(\n            this, arguments\n        );\n\n        newPx = newPx.offset(this.positionBlocks[this.relativePosition].offset);\n\n        return newPx;\n    },\n\n    /**\n     * Method: createBlocks\n     */\n    createBlocks: function() {\n        this.blocks = [];\n\n        //since all positions contain the same number of blocks, we can \n        // just pick the first position and use its blocks array to create\n        // our blocks array\n        var firstPosition = null;\n        for(var key in this.positionBlocks) {\n            firstPosition = key;\n            break;\n        }\n        \n        var position = this.positionBlocks[firstPosition];\n        for (var i = 0; i < position.blocks.length; i++) {\n\n            var block = {};\n            this.blocks.push(block);\n\n            var divId = this.id + '_FrameDecorationDiv_' + i;\n            block.div = OpenLayers.Util.createDiv(divId, \n                null, null, null, \"absolute\", null, \"hidden\", null\n            );\n\n            var imgId = this.id + '_FrameDecorationImg_' + i;\n            var imageCreator = \n                (this.isAlphaImage) ? OpenLayers.Util.createAlphaImageDiv\n                                    : OpenLayers.Util.createImage;\n\n            block.image = imageCreator(imgId, \n                null, this.imageSize, this.imageSrc, \n                \"absolute\", null, null, null\n            );\n\n            block.div.appendChild(block.image);\n            this.groupDiv.appendChild(block.div);\n        }\n    },\n\n    /**\n     * Method: updateBlocks\n     * Internal method, called on initialize and when the popup's relative\n     *     position has changed. This function takes care of re-positioning\n     *     the popup's blocks in their appropropriate places.\n     */\n    updateBlocks: function() {\n        if (!this.blocks) {\n            this.createBlocks();\n        }\n        \n        if (this.size && this.relativePosition) {\n            var position = this.positionBlocks[this.relativePosition];\n            for (var i = 0; i < position.blocks.length; i++) {\n    \n                var positionBlock = position.blocks[i];\n                var block = this.blocks[i];\n    \n                // adjust sizes\n                var l = positionBlock.anchor.left;\n                var b = positionBlock.anchor.bottom;\n                var r = positionBlock.anchor.right;\n                var t = positionBlock.anchor.top;\n    \n                //note that we use the isNaN() test here because if the \n                // size object is initialized with a \"auto\" parameter, the \n                // size constructor calls parseFloat() on the string, \n                // which will turn it into NaN\n                //\n                var w = (isNaN(positionBlock.size.w)) ? this.size.w - (r + l) \n                                                      : positionBlock.size.w;\n    \n                var h = (isNaN(positionBlock.size.h)) ? this.size.h - (b + t) \n                                                      : positionBlock.size.h;\n    \n                block.div.style.width = (w < 0 ? 0 : w) + 'px';\n                block.div.style.height = (h < 0 ? 0 : h) + 'px';\n    \n                block.div.style.left = (l != null) ? l + 'px' : '';\n                block.div.style.bottom = (b != null) ? b + 'px' : '';\n                block.div.style.right = (r != null) ? r + 'px' : '';            \n                block.div.style.top = (t != null) ? t + 'px' : '';\n    \n                block.image.style.left = positionBlock.position.x + 'px';\n                block.image.style.top = positionBlock.position.y + 'px';\n            }\n    \n            this.contentDiv.style.left = this.padding.left + \"px\";\n            this.contentDiv.style.top = this.padding.top + \"px\";\n        }\n    },\n\n    CLASS_NAME: \"OpenLayers.Popup.Framed\"\n});\n/* ======================================================================\n    OpenLayers/Popup/FramedCloud.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Popup/Framed.js\n * @requires OpenLayers/Util.js\n * @requires OpenLayers/BaseTypes/Bounds.js\n * @requires OpenLayers/BaseTypes/Pixel.js\n * @requires OpenLayers/BaseTypes/Size.js\n */\n\n/**\n * Class: OpenLayers.Popup.FramedCloud\n * \n * Inherits from: \n *  - <OpenLayers.Popup.Framed>\n */\nOpenLayers.Popup.FramedCloud = \n  OpenLayers.Class(OpenLayers.Popup.Framed, {\n\n    /** \n     * Property: contentDisplayClass\n     * {String} The CSS class of the popup content div.\n     */\n    contentDisplayClass: \"olFramedCloudPopupContent\",\n\n    /**\n     * APIProperty: autoSize\n     * {Boolean} Framed Cloud is autosizing by default.\n     */\n    autoSize: true,\n\n    /**\n     * APIProperty: panMapIfOutOfView\n     * {Boolean} Framed Cloud does pan into view by default.\n     */\n    panMapIfOutOfView: true,\n\n    /**\n     * APIProperty: imageSize\n     * {<OpenLayers.Size>}\n     */\n    imageSize: new OpenLayers.Size(1276, 736),\n\n    /**\n     * APIProperty: isAlphaImage\n     * {Boolean} The FramedCloud does not use an alpha image (in honor of the \n     *     good ie6 folk out there)\n     */\n    isAlphaImage: false,\n\n    /** \n     * APIProperty: fixedRelativePosition\n     * {Boolean} The Framed Cloud popup works in just one fixed position.\n     */\n    fixedRelativePosition: false,\n\n    /**\n     * Property: positionBlocks\n     * {Object} Hash of differen position blocks, keyed by relativePosition\n     *     two-character code string (ie \"tl\", \"tr\", \"bl\", \"br\")\n     */\n    positionBlocks: {\n        \"tl\": {\n            'offset': new OpenLayers.Pixel(44, 0),\n            'padding': new OpenLayers.Bounds(8, 40, 8, 9),\n            'blocks': [\n                { // top-left\n                    size: new OpenLayers.Size('auto', 'auto'),\n                    anchor: new OpenLayers.Bounds(0, 51, 22, 0),\n                    position: new OpenLayers.Pixel(0, 0)\n                },\n                { //top-right\n                    size: new OpenLayers.Size(22, 'auto'),\n                    anchor: new OpenLayers.Bounds(null, 50, 0, 0),\n                    position: new OpenLayers.Pixel(-1238, 0)\n                },\n                { //bottom-left\n                    size: new OpenLayers.Size('auto', 19),\n                    anchor: new OpenLayers.Bounds(0, 32, 22, null),\n                    position: new OpenLayers.Pixel(0, -631)\n                },\n                { //bottom-right\n                    size: new OpenLayers.Size(22, 18),\n                    anchor: new OpenLayers.Bounds(null, 32, 0, null),\n                    position: new OpenLayers.Pixel(-1238, -632)\n                },\n                { // stem\n                    size: new OpenLayers.Size(81, 35),\n                    anchor: new OpenLayers.Bounds(null, 0, 0, null),\n                    position: new OpenLayers.Pixel(0, -688)\n                }\n            ]\n        },\n        \"tr\": {\n            'offset': new OpenLayers.Pixel(-45, 0),\n            'padding': new OpenLayers.Bounds(8, 40, 8, 9),\n            'blocks': [\n                { // top-left\n                    size: new OpenLayers.Size('auto', 'auto'),\n                    anchor: new OpenLayers.Bounds(0, 51, 22, 0),\n                    position: new OpenLayers.Pixel(0, 0)\n                },\n                { //top-right\n                    size: new OpenLayers.Size(22, 'auto'),\n                    anchor: new OpenLayers.Bounds(null, 50, 0, 0),\n                    position: new OpenLayers.Pixel(-1238, 0)\n                },\n                { //bottom-left\n                    size: new OpenLayers.Size('auto', 19),\n                    anchor: new OpenLayers.Bounds(0, 32, 22, null),\n                    position: new OpenLayers.Pixel(0, -631)\n                },\n                { //bottom-right\n                    size: new OpenLayers.Size(22, 19),\n                    anchor: new OpenLayers.Bounds(null, 32, 0, null),\n                    position: new OpenLayers.Pixel(-1238, -631)\n                },\n                { // stem\n                    size: new OpenLayers.Size(81, 35),\n                    anchor: new OpenLayers.Bounds(0, 0, null, null),\n                    position: new OpenLayers.Pixel(-215, -687)\n                }\n            ]\n        },\n        \"bl\": {\n            'offset': new OpenLayers.Pixel(45, 0),\n            'padding': new OpenLayers.Bounds(8, 9, 8, 40),\n            'blocks': [\n                { // top-left\n                    size: new OpenLayers.Size('auto', 'auto'),\n                    anchor: new OpenLayers.Bounds(0, 21, 22, 32),\n                    position: new OpenLayers.Pixel(0, 0)\n                },\n                { //top-right\n                    size: new OpenLayers.Size(22, 'auto'),\n                    anchor: new OpenLayers.Bounds(null, 21, 0, 32),\n                    position: new OpenLayers.Pixel(-1238, 0)\n                },\n                { //bottom-left\n                    size: new OpenLayers.Size('auto', 21),\n                    anchor: new OpenLayers.Bounds(0, 0, 22, null),\n                    position: new OpenLayers.Pixel(0, -629)\n                },\n                { //bottom-right\n                    size: new OpenLayers.Size(22, 21),\n                    anchor: new OpenLayers.Bounds(null, 0, 0, null),\n                    position: new OpenLayers.Pixel(-1238, -629)\n                },\n                { // stem\n                    size: new OpenLayers.Size(81, 33),\n                    anchor: new OpenLayers.Bounds(null, null, 0, 0),\n                    position: new OpenLayers.Pixel(-101, -674)\n                }\n            ]\n        },\n        \"br\": {\n            'offset': new OpenLayers.Pixel(-44, 0),\n            'padding': new OpenLayers.Bounds(8, 9, 8, 40),\n            'blocks': [\n                { // top-left\n                    size: new OpenLayers.Size('auto', 'auto'),\n                    anchor: new OpenLayers.Bounds(0, 21, 22, 32),\n                    position: new OpenLayers.Pixel(0, 0)\n                },\n                { //top-right\n                    size: new OpenLayers.Size(22, 'auto'),\n                    anchor: new OpenLayers.Bounds(null, 21, 0, 32),\n                    position: new OpenLayers.Pixel(-1238, 0)\n                },\n                { //bottom-left\n                    size: new OpenLayers.Size('auto', 21),\n                    anchor: new OpenLayers.Bounds(0, 0, 22, null),\n                    position: new OpenLayers.Pixel(0, -629)\n                },\n                { //bottom-right\n                    size: new OpenLayers.Size(22, 21),\n                    anchor: new OpenLayers.Bounds(null, 0, 0, null),\n                    position: new OpenLayers.Pixel(-1238, -629)\n                },\n                { // stem\n                    size: new OpenLayers.Size(81, 33),\n                    anchor: new OpenLayers.Bounds(0, null, null, 0),\n                    position: new OpenLayers.Pixel(-311, -674)\n                }\n            ]\n        }\n    },\n\n    /**\n     * APIProperty: minSize\n     * {<OpenLayers.Size>}\n     */\n    minSize: new OpenLayers.Size(105, 10),\n\n    /**\n     * APIProperty: maxSize\n     * {<OpenLayers.Size>}\n     */\n    maxSize: new OpenLayers.Size(1200, 660),\n\n    /** \n     * Constructor: OpenLayers.Popup.FramedCloud\n     * \n     * Parameters:\n     * id - {String}\n     * lonlat - {<OpenLayers.LonLat>}\n     * contentSize - {<OpenLayers.Size>}\n     * contentHTML - {String}\n     * anchor - {Object} Object to which we'll anchor the popup. Must expose \n     *     a 'size' (<OpenLayers.Size>) and 'offset' (<OpenLayers.Pixel>) \n     *     (Note that this is generally an <OpenLayers.Icon>).\n     * closeBox - {Boolean}\n     * closeBoxCallback - {Function} Function to be called on closeBox click.\n     */\n    initialize:function(id, lonlat, contentSize, contentHTML, anchor, closeBox, \n                        closeBoxCallback) {\n\n        this.imageSrc = OpenLayers.Util.getImageLocation('cloud-popup-relative.png');\n        OpenLayers.Popup.Framed.prototype.initialize.apply(this, arguments);\n        this.contentDiv.className = this.contentDisplayClass;\n    },\n\n    CLASS_NAME: \"OpenLayers.Popup.FramedCloud\"\n});\n/* ======================================================================\n    OpenLayers/Protocol.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/BaseTypes/Class.js\n */\n\n/**\n * Class: OpenLayers.Protocol\n * Abstract vector layer protocol class.  Not to be instantiated directly.  Use\n *     one of the protocol subclasses instead.\n */\nOpenLayers.Protocol = OpenLayers.Class({\n    \n    /**\n     * Property: format\n     * {<OpenLayers.Format>} The format used by this protocol.\n     */\n    format: null,\n    \n    /**\n     * Property: options\n     * {Object} Any options sent to the constructor.\n     */\n    options: null,\n\n    /**\n     * Property: autoDestroy\n     * {Boolean} The creator of the protocol can set autoDestroy to false\n     *      to fully control when the protocol is destroyed. Defaults to\n     *      true.\n     */\n    autoDestroy: true,\n   \n    /**\n     * Property: defaultFilter\n     * {<OpenLayers.Filter>} Optional default filter to read requests\n     */\n    defaultFilter: null,\n    \n    /**\n     * Constructor: OpenLayers.Protocol\n     * Abstract class for vector protocols.  Create instances of a subclass.\n     *\n     * Parameters:\n     * options - {Object} Optional object whose properties will be set on the\n     *     instance.\n     */\n    initialize: function(options) {\n        options = options || {};\n        OpenLayers.Util.extend(this, options);\n        this.options = options;\n    },\n\n    /**\n     * Method: mergeWithDefaultFilter\n     * Merge filter passed to the read method with the default one\n     *\n     * Parameters:\n     * filter - {<OpenLayers.Filter>}\n     */\n    mergeWithDefaultFilter: function(filter) {\n        var merged;\n        if (filter && this.defaultFilter) {\n            merged = new OpenLayers.Filter.Logical({\n                type: OpenLayers.Filter.Logical.AND,\n                filters: [this.defaultFilter, filter]\n            });\n        } else {\n            merged = filter || this.defaultFilter || undefined;\n        }\n        return merged;\n    },\n\n    /**\n     * APIMethod: destroy\n     * Clean up the protocol.\n     */\n    destroy: function() {\n        this.options = null;\n        this.format = null;\n    },\n    \n    /**\n     * APIMethod: read\n     * Construct a request for reading new features.\n     *\n     * Parameters:\n     * options - {Object} Optional object for configuring the request.\n     *\n     * Returns:\n     * {<OpenLayers.Protocol.Response>} An <OpenLayers.Protocol.Response>\n     * object, the same object will be passed to the callback function passed\n     * if one exists in the options object.\n     */\n    read: function(options) {\n        options = options || {};\n        options.filter = this.mergeWithDefaultFilter(options.filter);\n    },\n    \n    \n    /**\n     * APIMethod: create\n     * Construct a request for writing newly created features.\n     *\n     * Parameters:\n     * features - {Array({<OpenLayers.Feature.Vector>})} or\n     *            {<OpenLayers.Feature.Vector>}\n     * options - {Object} Optional object for configuring the request.\n     *\n     * Returns:\n     * {<OpenLayers.Protocol.Response>} An <OpenLayers.Protocol.Response>\n     * object, the same object will be passed to the callback function passed\n     * if one exists in the options object.\n     */\n    create: function() {\n    },\n    \n    /**\n     * APIMethod: update\n     * Construct a request updating modified features.\n     *\n     * Parameters:\n     * features - {Array({<OpenLayers.Feature.Vector>})} or\n     *            {<OpenLayers.Feature.Vector>}\n     * options - {Object} Optional object for configuring the request.\n     *\n     * Returns:\n     * {<OpenLayers.Protocol.Response>} An <OpenLayers.Protocol.Response>\n     * object, the same object will be passed to the callback function passed\n     * if one exists in the options object.\n     */\n    update: function() {\n    },\n    \n    /**\n     * APIMethod: delete\n     * Construct a request deleting a removed feature.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>}\n     * options - {Object} Optional object for configuring the request.\n     *\n     * Returns:\n     * {<OpenLayers.Protocol.Response>} An <OpenLayers.Protocol.Response>\n     * object, the same object will be passed to the callback function passed\n     * if one exists in the options object.\n     */\n    \"delete\": function() {\n    },\n\n    /**\n     * APIMethod: commit\n     * Go over the features and for each take action\n     * based on the feature state. Possible actions are create,\n     * update and delete.\n     *\n     * Parameters:\n     * features - {Array({<OpenLayers.Feature.Vector>})}\n     * options - {Object} Object whose possible keys are \"create\", \"update\",\n     *      \"delete\", \"callback\" and \"scope\", the values referenced by the\n     *      first three are objects as passed to the \"create\", \"update\", and\n     *      \"delete\" methods, the value referenced by the \"callback\" key is\n     *      a function which is called when the commit operation is complete\n     *      using the scope referenced by the \"scope\" key.\n     *\n     * Returns:\n     * {Array({<OpenLayers.Protocol.Response>})} An array of\n     * <OpenLayers.Protocol.Response> objects.\n     */\n    commit: function() {\n    },\n\n    /**\n     * Method: abort\n     * Abort an ongoing request.\n     *\n     * Parameters:\n     * response - {<OpenLayers.Protocol.Response>}\n     */\n    abort: function(response) {\n    },\n   \n    /**\n     * Method: createCallback\n     * Returns a function that applies the given public method with resp and\n     *     options arguments.\n     *\n     * Parameters:\n     * method - {Function} The method to be applied by the callback.\n     * response - {<OpenLayers.Protocol.Response>} The protocol response object.\n     * options - {Object} Options sent to the protocol method\n     */\n    createCallback: function(method, response, options) {\n        return OpenLayers.Function.bind(function() {\n            method.apply(this, [response, options]);\n        }, this);\n    },\n   \n    CLASS_NAME: \"OpenLayers.Protocol\" \n});\n\n/**\n * Class: OpenLayers.Protocol.Response\n * Protocols return Response objects to their users.\n */\nOpenLayers.Protocol.Response = OpenLayers.Class({\n    /**\n     * Property: code\n     * {Number} - OpenLayers.Protocol.Response.SUCCESS or\n     *            OpenLayers.Protocol.Response.FAILURE\n     */\n    code: null,\n\n    /**\n     * Property: requestType\n     * {String} The type of request this response corresponds to. Either\n     *      \"create\", \"read\", \"update\" or \"delete\".\n     */\n    requestType: null,\n\n    /**\n     * Property: last\n     * {Boolean} - true if this is the last response expected in a commit,\n     * false otherwise, defaults to true.\n     */\n    last: true,\n\n    /**\n     * Property: features\n     * {Array({<OpenLayers.Feature.Vector>})} or {<OpenLayers.Feature.Vector>}\n     * The features returned in the response by the server. Depending on the \n     * protocol's read payload, either features or data will be populated.\n     */\n    features: null,\n\n    /**\n     * Property: data\n     * {Object}\n     * The data returned in the response by the server. Depending on the \n     * protocol's read payload, either features or data will be populated.\n     */\n    data: null,\n\n    /**\n     * Property: reqFeatures\n     * {Array({<OpenLayers.Feature.Vector>})} or {<OpenLayers.Feature.Vector>}\n     * The features provided by the user and placed in the request by the\n     *      protocol.\n     */\n    reqFeatures: null,\n\n    /**\n     * Property: priv\n     */\n    priv: null,\n\n    /**\n     * Property: error\n     * {Object} The error object in case a service exception was encountered.\n     */\n    error: null,\n\n    /**\n     * Constructor: OpenLayers.Protocol.Response\n     *\n     * Parameters:\n     * options - {Object} Optional object whose properties will be set on the\n     *     instance.\n     */\n    initialize: function(options) {\n        OpenLayers.Util.extend(this, options);\n    },\n\n    /**\n     * Method: success\n     *\n     * Returns:\n     * {Boolean} - true on success, false otherwise\n     */\n    success: function() {\n        return this.code > 0;\n    },\n\n    CLASS_NAME: \"OpenLayers.Protocol.Response\"\n});\n\nOpenLayers.Protocol.Response.SUCCESS = 1;\nOpenLayers.Protocol.Response.FAILURE = 0;\n/* ======================================================================\n    OpenLayers/Request.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Events.js\n * @requires OpenLayers/Request/XMLHttpRequest.js\n */\n\n/**\n * TODO: deprecate me\n * Use OpenLayers.Request.proxy instead.\n */\nOpenLayers.ProxyHost = \"\";\n\n/**\n * Namespace: OpenLayers.Request\n * The OpenLayers.Request namespace contains convenience methods for working\n *     with XMLHttpRequests.  These methods work with a cross-browser\n *     W3C compliant <OpenLayers.Request.XMLHttpRequest> class.\n */\nif (!OpenLayers.Request) {\n    /**\n     * This allows for OpenLayers/Request/XMLHttpRequest.js to be included\n     * before or after this script.\n     */\n    OpenLayers.Request = {};\n}\nOpenLayers.Util.extend(OpenLayers.Request, {\n    \n    /**\n     * Constant: DEFAULT_CONFIG\n     * {Object} Default configuration for all requests.\n     */\n    DEFAULT_CONFIG: {\n        method: \"GET\",\n        url: window.location.href,\n        async: true,\n        user: undefined,\n        password: undefined,\n        params: null,\n        proxy: OpenLayers.ProxyHost,\n        headers: {},\n        data: null,\n        callback: function() {},\n        success: null,\n        failure: null,\n        scope: null\n    },\n    \n    /**\n     * Constant: URL_SPLIT_REGEX\n     */\n    URL_SPLIT_REGEX: /([^:]*:)\\/\\/([^:]*:?[^@]*@)?([^:\\/\\?]*):?([^\\/\\?]*)/,\n    \n    /**\n     * APIProperty: events\n     * {<OpenLayers.Events>} An events object that handles all \n     *     events on the {<OpenLayers.Request>} object.\n     *\n     * All event listeners will receive an event object with three properties:\n     * request - {<OpenLayers.Request.XMLHttpRequest>} The request object.\n     * config - {Object} The config object sent to the specific request method.\n     * requestUrl - {String} The request url.\n     * \n     * Supported event types:\n     * complete - Triggered when we have a response from the request, if a\n     *     listener returns false, no further response processing will take\n     *     place.\n     * success - Triggered when the HTTP response has a success code (200-299).\n     * failure - Triggered when the HTTP response does not have a success code.\n     */\n    events: new OpenLayers.Events(this),\n    \n    /**\n     * Method: makeSameOrigin\n     * Using the specified proxy, returns a same origin url of the provided url.\n     *\n     * Parameters:\n     * url - {String} An arbitrary url\n     * proxy {String|Function} The proxy to use to make the provided url a\n     *     same origin url.\n     *\n     * Returns\n     * {String} the same origin url. If no proxy is provided, the returned url\n     *     will be the same as the provided url.\n     */\n    makeSameOrigin: function(url, proxy) {\n        var sameOrigin = url.indexOf(\"http\") !== 0;\n        var urlParts = !sameOrigin && url.match(this.URL_SPLIT_REGEX);\n        if (urlParts) {\n            var location = window.location;\n            sameOrigin =\n                urlParts[1] == location.protocol &&\n                urlParts[3] == location.hostname;\n            var uPort = urlParts[4], lPort = location.port;\n            if (uPort != 80 && uPort != \"\" || lPort != \"80\" && lPort != \"\") {\n                sameOrigin = sameOrigin && uPort == lPort;\n            }\n        }\n        if (!sameOrigin) {\n            if (proxy) {\n                if (typeof proxy == \"function\") {\n                    url = proxy(url);\n                } else {\n                    url = proxy + encodeURIComponent(url);\n                }\n            }\n        }\n        return url;\n    },\n\n    /**\n     * APIMethod: issue\n     * Create a new XMLHttpRequest object, open it, set any headers, bind\n     *     a callback to done state, and send any data.  It is recommended that\n     *     you use one <GET>, <POST>, <PUT>, <DELETE>, <OPTIONS>, or <HEAD>.\n     *     This method is only documented to provide detail on the configuration\n     *     options available to all request methods.\n     *\n     * Parameters:\n     * config - {Object} Object containing properties for configuring the\n     *     request.  Allowed configuration properties are described below.\n     *     This object is modified and should not be reused.\n     *\n     * Allowed config properties:\n     * method - {String} One of GET, POST, PUT, DELETE, HEAD, or\n     *     OPTIONS.  Default is GET.\n     * url - {String} URL for the request.\n     * async - {Boolean} Open an asynchronous request.  Default is true.\n     * user - {String} User for relevant authentication scheme.  Set\n     *     to null to clear current user.\n     * password - {String} Password for relevant authentication scheme.\n     *     Set to null to clear current password.\n     * proxy - {String} Optional proxy.  Defaults to\n     *     <OpenLayers.ProxyHost>.\n     * params - {Object} Any key:value pairs to be appended to the\n     *     url as a query string.  Assumes url doesn't already include a query\n     *     string or hash.  Typically, this is only appropriate for <GET>\n     *     requests where the query string will be appended to the url.\n     *     Parameter values that are arrays will be\n     *     concatenated with a comma (note that this goes against form-encoding)\n     *     as is done with <OpenLayers.Util.getParameterString>.\n     * headers - {Object} Object with header:value pairs to be set on\n     *     the request.\n     * data - {String | Document} Optional data to send with the request.\n     *     Typically, this is only used with <POST> and <PUT> requests.\n     *     Make sure to provide the appropriate \"Content-Type\" header for your\n     *     data.  For <POST> and <PUT> requests, the content type defaults to\n     *     \"application-xml\".  If your data is a different content type, or\n     *     if you are using a different HTTP method, set the \"Content-Type\"\n     *     header to match your data type.\n     * callback - {Function} Function to call when request is done.\n     *     To determine if the request failed, check request.status (200\n     *     indicates success).\n     * success - {Function} Optional function to call if request status is in\n     *     the 200s.  This will be called in addition to callback above and\n     *     would typically only be used as an alternative.\n     * failure - {Function} Optional function to call if request status is not\n     *     in the 200s.  This will be called in addition to callback above and\n     *     would typically only be used as an alternative.\n     * scope - {Object} If callback is a public method on some object,\n     *     set the scope to that object.\n     *\n     * Returns:\n     * {XMLHttpRequest} Request object.  To abort the request before a response\n     *     is received, call abort() on the request object.\n     */\n    issue: function(config) {        \n        // apply default config - proxy host may have changed\n        var defaultConfig = OpenLayers.Util.extend(\n            this.DEFAULT_CONFIG,\n            {proxy: OpenLayers.ProxyHost}\n        );\n        config = config || {};\n        config.headers = config.headers || {};\n        config = OpenLayers.Util.applyDefaults(config, defaultConfig);\n        config.headers = OpenLayers.Util.applyDefaults(config.headers, defaultConfig.headers);\n        // Always set the \"X-Requested-With\" header to signal that this request\n        // was issued through the XHR-object. Since header keys are case \n        // insensitive and we want to allow overriding of the \"X-Requested-With\"\n        // header through the user we cannot use applyDefaults, but have to \n        // check manually whether we were called with a \"X-Requested-With\"\n        // header.\n        var customRequestedWithHeader = false,\n            headerKey;\n        for(headerKey in config.headers) {\n            if (config.headers.hasOwnProperty( headerKey )) {\n                if (headerKey.toLowerCase() === 'x-requested-with') {\n                    customRequestedWithHeader = true;\n                }\n            }\n        }\n        if (customRequestedWithHeader === false) {\n            // we did not have a custom \"X-Requested-With\" header\n            config.headers['X-Requested-With'] = 'XMLHttpRequest';\n        }\n\n        // create request, open, and set headers\n        var request = new OpenLayers.Request.XMLHttpRequest();\n        var url = OpenLayers.Util.urlAppend(config.url, \n            OpenLayers.Util.getParameterString(config.params || {}));\n        url = OpenLayers.Request.makeSameOrigin(url, config.proxy);\n        request.open(\n            config.method, url, config.async, config.user, config.password\n        );\n        for(var header in config.headers) {\n            request.setRequestHeader(header, config.headers[header]);\n        }\n\n        var events = this.events;\n\n        // we want to execute runCallbacks with \"this\" as the\n        // execution scope\n        var self = this;\n        \n        request.onreadystatechange = function() {\n            if(request.readyState == OpenLayers.Request.XMLHttpRequest.DONE) {\n                var proceed = events.triggerEvent(\n                    \"complete\",\n                    {request: request, config: config, requestUrl: url}\n                );\n                if(proceed !== false) {\n                    self.runCallbacks(\n                        {request: request, config: config, requestUrl: url}\n                    );\n                }\n            }\n        };\n        \n        // send request (optionally with data) and return\n        // call in a timeout for asynchronous requests so the return is\n        // available before readyState == 4 for cached docs\n        if(config.async === false) {\n            request.send(config.data);\n        } else {\n            window.setTimeout(function(){\n                if (request.readyState !== 0) { // W3C: 0-UNSENT\n                    request.send(config.data);\n                }\n            }, 0);\n        }\n        return request;\n    },\n    \n    /**\n     * Method: runCallbacks\n     * Calls the complete, success and failure callbacks. Application\n     *    can listen to the \"complete\" event, have the listener \n     *    display a confirm window and always return false, and\n     *    execute OpenLayers.Request.runCallbacks if the user\n     *    hits \"yes\" in the confirm window.\n     *\n     * Parameters:\n     * options - {Object} Hash containing request, config and requestUrl keys\n     */\n    runCallbacks: function(options) {\n        var request = options.request;\n        var config = options.config;\n        \n        // bind callbacks to readyState 4 (done)\n        var complete = (config.scope) ?\n            OpenLayers.Function.bind(config.callback, config.scope) :\n            config.callback;\n        \n        // optional success callback\n        var success;\n        if(config.success) {\n            success = (config.scope) ?\n                OpenLayers.Function.bind(config.success, config.scope) :\n                config.success;\n        }\n\n        // optional failure callback\n        var failure;\n        if(config.failure) {\n            failure = (config.scope) ?\n                OpenLayers.Function.bind(config.failure, config.scope) :\n                config.failure;\n        }\n\n        if (OpenLayers.Util.createUrlObject(config.url).protocol == \"file:\" &&\n                                                        request.responseText) {\n            request.status = 200;\n        }\n        complete(request);\n\n        if (!request.status || (request.status >= 200 && request.status < 300)) {\n            this.events.triggerEvent(\"success\", options);\n            if(success) {\n                success(request);\n            }\n        }\n        if(request.status && (request.status < 200 || request.status >= 300)) {                    \n            this.events.triggerEvent(\"failure\", options);\n            if(failure) {\n                failure(request);\n            }\n        }\n    },\n    \n    /**\n     * APIMethod: GET\n     * Send an HTTP GET request.  Additional configuration properties are\n     *     documented in the <issue> method, with the method property set\n     *     to GET.\n     *\n     * Parameters:\n     * config - {Object} Object with properties for configuring the request.\n     *     See the <issue> method for documentation of allowed properties.\n     *     This object is modified and should not be reused.\n     * \n     * Returns:\n     * {XMLHttpRequest} Request object.\n     */\n    GET: function(config) {\n        config = OpenLayers.Util.extend(config, {method: \"GET\"});\n        return OpenLayers.Request.issue(config);\n    },\n    \n    /**\n     * APIMethod: POST\n     * Send a POST request.  Additional configuration properties are\n     *     documented in the <issue> method, with the method property set\n     *     to POST and \"Content-Type\" header set to \"application/xml\".\n     *\n     * Parameters:\n     * config - {Object} Object with properties for configuring the request.\n     *     See the <issue> method for documentation of allowed properties.  The\n     *     default \"Content-Type\" header will be set to \"application-xml\" if\n     *     none is provided.  This object is modified and should not be reused.\n     * \n     * Returns:\n     * {XMLHttpRequest} Request object.\n     */\n    POST: function(config) {\n        config = OpenLayers.Util.extend(config, {method: \"POST\"});\n        // set content type to application/xml if it isn't already set\n        config.headers = config.headers ? config.headers : {};\n        if(!(\"CONTENT-TYPE\" in OpenLayers.Util.upperCaseObject(config.headers))) {\n            config.headers[\"Content-Type\"] = \"application/xml\";\n        }\n        return OpenLayers.Request.issue(config);\n    },\n    \n    /**\n     * APIMethod: PUT\n     * Send an HTTP PUT request.  Additional configuration properties are\n     *     documented in the <issue> method, with the method property set\n     *     to PUT and \"Content-Type\" header set to \"application/xml\".\n     *\n     * Parameters:\n     * config - {Object} Object with properties for configuring the request.\n     *     See the <issue> method for documentation of allowed properties.  The\n     *     default \"Content-Type\" header will be set to \"application-xml\" if\n     *     none is provided.  This object is modified and should not be reused.\n     * \n     * Returns:\n     * {XMLHttpRequest} Request object.\n     */\n    PUT: function(config) {\n        config = OpenLayers.Util.extend(config, {method: \"PUT\"});\n        // set content type to application/xml if it isn't already set\n        config.headers = config.headers ? config.headers : {};\n        if(!(\"CONTENT-TYPE\" in OpenLayers.Util.upperCaseObject(config.headers))) {\n            config.headers[\"Content-Type\"] = \"application/xml\";\n        }\n        return OpenLayers.Request.issue(config);\n    },\n    \n    /**\n     * APIMethod: DELETE\n     * Send an HTTP DELETE request.  Additional configuration properties are\n     *     documented in the <issue> method, with the method property set\n     *     to DELETE.\n     *\n     * Parameters:\n     * config - {Object} Object with properties for configuring the request.\n     *     See the <issue> method for documentation of allowed properties.\n     *     This object is modified and should not be reused.\n     * \n     * Returns:\n     * {XMLHttpRequest} Request object.\n     */\n    DELETE: function(config) {\n        config = OpenLayers.Util.extend(config, {method: \"DELETE\"});\n        return OpenLayers.Request.issue(config);\n    },\n  \n    /**\n     * APIMethod: HEAD\n     * Send an HTTP HEAD request.  Additional configuration properties are\n     *     documented in the <issue> method, with the method property set\n     *     to HEAD.\n     *\n     * Parameters:\n     * config - {Object} Object with properties for configuring the request.\n     *     See the <issue> method for documentation of allowed properties.\n     *     This object is modified and should not be reused.\n     * \n     * Returns:\n     * {XMLHttpRequest} Request object.\n     */\n    HEAD: function(config) {\n        config = OpenLayers.Util.extend(config, {method: \"HEAD\"});\n        return OpenLayers.Request.issue(config);\n    },\n    \n    /**\n     * APIMethod: OPTIONS\n     * Send an HTTP OPTIONS request.  Additional configuration properties are\n     *     documented in the <issue> method, with the method property set\n     *     to OPTIONS.\n     *\n     * Parameters:\n     * config - {Object} Object with properties for configuring the request.\n     *     See the <issue> method for documentation of allowed properties.\n     *     This object is modified and should not be reused.\n     * \n     * Returns:\n     * {XMLHttpRequest} Request object.\n     */\n    OPTIONS: function(config) {\n        config = OpenLayers.Util.extend(config, {method: \"OPTIONS\"});\n        return OpenLayers.Request.issue(config);\n    }\n\n});\n/* ======================================================================\n    OpenLayers/Request/XMLHttpRequest.js\n   ====================================================================== */\n\n// XMLHttpRequest.js Copyright (C) 2010 Sergey Ilinsky (http://www.ilinsky.com)\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//   http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @requires OpenLayers/Request.js\n */\n\n(function () {\n\n    // Save reference to earlier defined object implementation (if any)\n    var oXMLHttpRequest    = window.XMLHttpRequest;\n\n    // Define on browser type\n    var bGecko    = !!window.controllers,\n        bIE        = window.document.all && !window.opera,\n        bIE7    = bIE && window.navigator.userAgent.match(/MSIE 7.0/);\n\n    // Enables \"XMLHttpRequest()\" call next to \"new XMLHttpReques()\"\n    function fXMLHttpRequest() {\n        this._object    = oXMLHttpRequest && !bIE7 ? new oXMLHttpRequest : new window.ActiveXObject(\"Microsoft.XMLHTTP\");\n        this._listeners    = [];\n    };\n\n    // Constructor\n    function cXMLHttpRequest() {\n        return new fXMLHttpRequest;\n    };\n    cXMLHttpRequest.prototype    = fXMLHttpRequest.prototype;\n\n    // BUGFIX: Firefox with Firebug installed would break pages if not executed\n    if (bGecko && oXMLHttpRequest.wrapped)\n        cXMLHttpRequest.wrapped    = oXMLHttpRequest.wrapped;\n\n    // Constants\n    cXMLHttpRequest.UNSENT                = 0;\n    cXMLHttpRequest.OPENED                = 1;\n    cXMLHttpRequest.HEADERS_RECEIVED    = 2;\n    cXMLHttpRequest.LOADING                = 3;\n    cXMLHttpRequest.DONE                = 4;\n\n    // Public Properties\n    cXMLHttpRequest.prototype.readyState    = cXMLHttpRequest.UNSENT;\n    cXMLHttpRequest.prototype.responseText    = '';\n    cXMLHttpRequest.prototype.responseXML    = null;\n    cXMLHttpRequest.prototype.status        = 0;\n    cXMLHttpRequest.prototype.statusText    = '';\n\n    // Priority proposal\n    cXMLHttpRequest.prototype.priority        = \"NORMAL\";\n\n    // Instance-level Events Handlers\n    cXMLHttpRequest.prototype.onreadystatechange    = null;\n\n    // Class-level Events Handlers\n    cXMLHttpRequest.onreadystatechange    = null;\n    cXMLHttpRequest.onopen                = null;\n    cXMLHttpRequest.onsend                = null;\n    cXMLHttpRequest.onabort                = null;\n\n    // Public Methods\n    cXMLHttpRequest.prototype.open    = function(sMethod, sUrl, bAsync, sUser, sPassword) {\n        // Delete headers, required when object is reused\n        delete this._headers;\n\n        // When bAsync parameter value is omitted, use true as default\n        if (arguments.length < 3)\n            bAsync    = true;\n\n        // Save async parameter for fixing Gecko bug with missing readystatechange in synchronous requests\n        this._async        = bAsync;\n\n        // Set the onreadystatechange handler\n        var oRequest    = this,\n            nState        = this.readyState,\n            fOnUnload;\n\n        // BUGFIX: IE - memory leak on page unload (inter-page leak)\n        if (bIE && bAsync) {\n            fOnUnload = function() {\n                if (nState != cXMLHttpRequest.DONE) {\n                    fCleanTransport(oRequest);\n                    // Safe to abort here since onreadystatechange handler removed\n                    oRequest.abort();\n                }\n            };\n            window.attachEvent(\"onunload\", fOnUnload);\n        }\n\n        // Add method sniffer\n        if (cXMLHttpRequest.onopen)\n            cXMLHttpRequest.onopen.apply(this, arguments);\n\n        if (arguments.length > 4)\n            this._object.open(sMethod, sUrl, bAsync, sUser, sPassword);\n        else\n        if (arguments.length > 3)\n            this._object.open(sMethod, sUrl, bAsync, sUser);\n        else\n            this._object.open(sMethod, sUrl, bAsync);\n\n        this.readyState    = cXMLHttpRequest.OPENED;\n        fReadyStateChange(this);\n\n        this._object.onreadystatechange    = function() {\n            if (bGecko && !bAsync)\n                return;\n\n            // Synchronize state\n            oRequest.readyState        = oRequest._object.readyState;\n\n            //\n            fSynchronizeValues(oRequest);\n\n            // BUGFIX: Firefox fires unnecessary DONE when aborting\n            if (oRequest._aborted) {\n                // Reset readyState to UNSENT\n                oRequest.readyState    = cXMLHttpRequest.UNSENT;\n\n                // Return now\n                return;\n            }\n\n            if (oRequest.readyState == cXMLHttpRequest.DONE) {\n                // Free up queue\n                delete oRequest._data;\n/*                if (bAsync)\n                    fQueue_remove(oRequest);*/\n                //\n                fCleanTransport(oRequest);\n// Uncomment this block if you need a fix for IE cache\n/*\n                // BUGFIX: IE - cache issue\n                if (!oRequest._object.getResponseHeader(\"Date\")) {\n                    // Save object to cache\n                    oRequest._cached    = oRequest._object;\n\n                    // Instantiate a new transport object\n                    cXMLHttpRequest.call(oRequest);\n\n                    // Re-send request\n                    if (sUser) {\n                         if (sPassword)\n                            oRequest._object.open(sMethod, sUrl, bAsync, sUser, sPassword);\n                        else\n                            oRequest._object.open(sMethod, sUrl, bAsync, sUser);\n                    }\n                    else\n                        oRequest._object.open(sMethod, sUrl, bAsync);\n                    oRequest._object.setRequestHeader(\"If-Modified-Since\", oRequest._cached.getResponseHeader(\"Last-Modified\") || new window.Date(0));\n                    // Copy headers set\n                    if (oRequest._headers)\n                        for (var sHeader in oRequest._headers)\n                            if (typeof oRequest._headers[sHeader] == \"string\")    // Some frameworks prototype objects with functions\n                                oRequest._object.setRequestHeader(sHeader, oRequest._headers[sHeader]);\n\n                    oRequest._object.onreadystatechange    = function() {\n                        // Synchronize state\n                        oRequest.readyState        = oRequest._object.readyState;\n\n                        if (oRequest._aborted) {\n                            //\n                            oRequest.readyState    = cXMLHttpRequest.UNSENT;\n\n                            // Return\n                            return;\n                        }\n\n                        if (oRequest.readyState == cXMLHttpRequest.DONE) {\n                            // Clean Object\n                            fCleanTransport(oRequest);\n\n                            // get cached request\n                            if (oRequest.status == 304)\n                                oRequest._object    = oRequest._cached;\n\n                            //\n                            delete oRequest._cached;\n\n                            //\n                            fSynchronizeValues(oRequest);\n\n                            //\n                            fReadyStateChange(oRequest);\n\n                            // BUGFIX: IE - memory leak in interrupted\n                            if (bIE && bAsync)\n                                window.detachEvent(\"onunload\", fOnUnload);\n                        }\n                    };\n                    oRequest._object.send(null);\n\n                    // Return now - wait until re-sent request is finished\n                    return;\n                };\n*/\n                // BUGFIX: IE - memory leak in interrupted\n                if (bIE && bAsync)\n                    window.detachEvent(\"onunload\", fOnUnload);\n            }\n\n            // BUGFIX: Some browsers (Internet Explorer, Gecko) fire OPEN readystate twice\n            if (nState != oRequest.readyState)\n                fReadyStateChange(oRequest);\n\n            nState    = oRequest.readyState;\n        }\n    };\n    function fXMLHttpRequest_send(oRequest) {\n        oRequest._object.send(oRequest._data);\n\n        // BUGFIX: Gecko - missing readystatechange calls in synchronous requests\n        if (bGecko && !oRequest._async) {\n            oRequest.readyState    = cXMLHttpRequest.OPENED;\n\n            // Synchronize state\n            fSynchronizeValues(oRequest);\n\n            // Simulate missing states\n            while (oRequest.readyState < cXMLHttpRequest.DONE) {\n                oRequest.readyState++;\n                fReadyStateChange(oRequest);\n                // Check if we are aborted\n                if (oRequest._aborted)\n                    return;\n            }\n        }\n    };\n    cXMLHttpRequest.prototype.send    = function(vData) {\n        // Add method sniffer\n        if (cXMLHttpRequest.onsend)\n            cXMLHttpRequest.onsend.apply(this, arguments);\n\n        if (!arguments.length)\n            vData    = null;\n\n        // BUGFIX: Safari - fails sending documents created/modified dynamically, so an explicit serialization required\n        // BUGFIX: IE - rewrites any custom mime-type to \"text/xml\" in case an XMLNode is sent\n        // BUGFIX: Gecko - fails sending Element (this is up to the implementation either to standard)\n        if (vData && vData.nodeType) {\n            vData    = window.XMLSerializer ? new window.XMLSerializer().serializeToString(vData) : vData.xml;\n            if (!this._headers[\"Content-Type\"])\n                this._object.setRequestHeader(\"Content-Type\", \"application/xml\");\n        }\n\n        this._data    = vData;\n/*\n        // Add to queue\n        if (this._async)\n            fQueue_add(this);\n        else*/\n            fXMLHttpRequest_send(this);\n    };\n    cXMLHttpRequest.prototype.abort    = function() {\n        // Add method sniffer\n        if (cXMLHttpRequest.onabort)\n            cXMLHttpRequest.onabort.apply(this, arguments);\n\n        // BUGFIX: Gecko - unnecessary DONE when aborting\n        if (this.readyState > cXMLHttpRequest.UNSENT)\n            this._aborted    = true;\n\n        this._object.abort();\n\n        // BUGFIX: IE - memory leak\n        fCleanTransport(this);\n\n        this.readyState    = cXMLHttpRequest.UNSENT;\n\n        delete this._data;\n/*        if (this._async)\n            fQueue_remove(this);*/\n    };\n    cXMLHttpRequest.prototype.getAllResponseHeaders    = function() {\n        return this._object.getAllResponseHeaders();\n    };\n    cXMLHttpRequest.prototype.getResponseHeader    = function(sName) {\n        return this._object.getResponseHeader(sName);\n    };\n    cXMLHttpRequest.prototype.setRequestHeader    = function(sName, sValue) {\n        // BUGFIX: IE - cache issue\n        if (!this._headers)\n            this._headers    = {};\n        this._headers[sName]    = sValue;\n\n        return this._object.setRequestHeader(sName, sValue);\n    };\n\n    // EventTarget interface implementation\n    cXMLHttpRequest.prototype.addEventListener    = function(sName, fHandler, bUseCapture) {\n        for (var nIndex = 0, oListener; oListener = this._listeners[nIndex]; nIndex++)\n            if (oListener[0] == sName && oListener[1] == fHandler && oListener[2] == bUseCapture)\n                return;\n        // Add listener\n        this._listeners.push([sName, fHandler, bUseCapture]);\n    };\n\n    cXMLHttpRequest.prototype.removeEventListener    = function(sName, fHandler, bUseCapture) {\n        for (var nIndex = 0, oListener; oListener = this._listeners[nIndex]; nIndex++)\n            if (oListener[0] == sName && oListener[1] == fHandler && oListener[2] == bUseCapture)\n                break;\n        // Remove listener\n        if (oListener)\n            this._listeners.splice(nIndex, 1);\n    };\n\n    cXMLHttpRequest.prototype.dispatchEvent    = function(oEvent) {\n        var oEventPseudo    = {\n            'type':            oEvent.type,\n            'target':        this,\n            'currentTarget':this,\n            'eventPhase':    2,\n            'bubbles':        oEvent.bubbles,\n            'cancelable':    oEvent.cancelable,\n            'timeStamp':    oEvent.timeStamp,\n            'stopPropagation':    function() {},    // There is no flow\n            'preventDefault':    function() {},    // There is no default action\n            'initEvent':        function() {}    // Original event object should be initialized\n        };\n\n        // Execute onreadystatechange\n        if (oEventPseudo.type == \"readystatechange\" && this.onreadystatechange)\n            (this.onreadystatechange.handleEvent || this.onreadystatechange).apply(this, [oEventPseudo]);\n\n        // Execute listeners\n        for (var nIndex = 0, oListener; oListener = this._listeners[nIndex]; nIndex++)\n            if (oListener[0] == oEventPseudo.type && !oListener[2])\n                (oListener[1].handleEvent || oListener[1]).apply(this, [oEventPseudo]);\n    };\n\n    //\n    cXMLHttpRequest.prototype.toString    = function() {\n        return '[' + \"object\" + ' ' + \"XMLHttpRequest\" + ']';\n    };\n\n    cXMLHttpRequest.toString    = function() {\n        return '[' + \"XMLHttpRequest\" + ']';\n    };\n\n    // Helper function\n    function fReadyStateChange(oRequest) {\n        // Sniffing code\n        if (cXMLHttpRequest.onreadystatechange)\n            cXMLHttpRequest.onreadystatechange.apply(oRequest);\n\n        // Fake event\n        oRequest.dispatchEvent({\n            'type':            \"readystatechange\",\n            'bubbles':        false,\n            'cancelable':    false,\n            'timeStamp':    new Date + 0\n        });\n    };\n\n    function fGetDocument(oRequest) {\n        var oDocument    = oRequest.responseXML,\n            sResponse    = oRequest.responseText;\n        // Try parsing responseText\n        if (bIE && sResponse && oDocument && !oDocument.documentElement && oRequest.getResponseHeader(\"Content-Type\").match(/[^\\/]+\\/[^\\+]+\\+xml/)) {\n            oDocument    = new window.ActiveXObject(\"Microsoft.XMLDOM\");\n            oDocument.async                = false;\n            oDocument.validateOnParse    = false;\n            oDocument.loadXML(sResponse);\n        }\n        // Check if there is no error in document\n        if (oDocument)\n            if ((bIE && oDocument.parseError != 0) || !oDocument.documentElement || (oDocument.documentElement && oDocument.documentElement.tagName == \"parsererror\"))\n                return null;\n        return oDocument;\n    };\n\n    function fSynchronizeValues(oRequest) {\n        try {    oRequest.responseText    = oRequest._object.responseText;    } catch (e) {}\n        try {    oRequest.responseXML    = fGetDocument(oRequest._object);    } catch (e) {}\n        try {    oRequest.status            = oRequest._object.status;            } catch (e) {}\n        try {    oRequest.statusText        = oRequest._object.statusText;        } catch (e) {}\n    };\n\n    function fCleanTransport(oRequest) {\n        // BUGFIX: IE - memory leak (on-page leak)\n        oRequest._object.onreadystatechange    = new window.Function;\n    };\n/*\n    // Queue manager\n    var oQueuePending    = {\"CRITICAL\":[],\"HIGH\":[],\"NORMAL\":[],\"LOW\":[],\"LOWEST\":[]},\n        aQueueRunning    = [];\n    function fQueue_add(oRequest) {\n        oQueuePending[oRequest.priority in oQueuePending ? oRequest.priority : \"NORMAL\"].push(oRequest);\n        //\n        setTimeout(fQueue_process);\n    };\n\n    function fQueue_remove(oRequest) {\n        for (var nIndex = 0, bFound    = false; nIndex < aQueueRunning.length; nIndex++)\n            if (bFound)\n                aQueueRunning[nIndex - 1]    = aQueueRunning[nIndex];\n            else\n            if (aQueueRunning[nIndex] == oRequest)\n                bFound    = true;\n        if (bFound)\n            aQueueRunning.length--;\n        //\n        setTimeout(fQueue_process);\n    };\n\n    function fQueue_process() {\n        if (aQueueRunning.length < 6) {\n            for (var sPriority in oQueuePending) {\n                if (oQueuePending[sPriority].length) {\n                    var oRequest    = oQueuePending[sPriority][0];\n                    oQueuePending[sPriority]    = oQueuePending[sPriority].slice(1);\n                    //\n                    aQueueRunning.push(oRequest);\n                    // Send request\n                    fXMLHttpRequest_send(oRequest);\n                    break;\n                }\n            }\n        }\n    };\n*/\n    // Internet Explorer 5.0 (missing apply)\n    if (!window.Function.prototype.apply) {\n        window.Function.prototype.apply    = function(oRequest, oArguments) {\n            if (!oArguments)\n                oArguments    = [];\n            oRequest.__func    = this;\n            oRequest.__func(oArguments[0], oArguments[1], oArguments[2], oArguments[3], oArguments[4]);\n            delete oRequest.__func;\n        };\n    };\n\n    // Register new object with window\n    /**\n     * Class: OpenLayers.Request.XMLHttpRequest\n     * Standard-compliant (W3C) cross-browser implementation of the\n     *     XMLHttpRequest object.  From\n     *     http://code.google.com/p/xmlhttprequest/.\n     */\n    if (!OpenLayers.Request) {\n        /**\n         * This allows for OpenLayers/Request.js to be included\n         * before or after this script.\n         */\n        OpenLayers.Request = {};\n    }\n    OpenLayers.Request.XMLHttpRequest = cXMLHttpRequest;\n})();\n/* ======================================================================\n    OpenLayers/Protocol/HTTP.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Protocol.js\n * @requires OpenLayers/Request/XMLHttpRequest.js\n */\n\n/**\n * if application uses the query string, for example, for BBOX parameters,\n * OpenLayers/Format/QueryStringFilter.js should be included in the build config file\n */\n\n/**\n * Class: OpenLayers.Protocol.HTTP\n * A basic HTTP protocol for vector layers.  Create a new instance with the\n *     <OpenLayers.Protocol.HTTP> constructor.\n *\n * Inherits from:\n *  - <OpenLayers.Protocol>\n */\nOpenLayers.Protocol.HTTP = OpenLayers.Class(OpenLayers.Protocol, {\n\n    /**\n     * Property: url\n     * {String} Service URL, read-only, set through the options\n     *     passed to constructor.\n     */\n    url: null,\n\n    /**\n     * Property: headers\n     * {Object} HTTP request headers, read-only, set through the options\n     *     passed to the constructor,\n     *     Example: {'Content-Type': 'plain/text'}\n     */\n    headers: null,\n\n    /**\n     * Property: params\n     * {Object} Parameters of GET requests, read-only, set through the options\n     *     passed to the constructor,\n     *     Example: {'bbox': '5,5,5,5'}\n     */\n    params: null,\n    \n    /**\n     * Property: callback\n     * {Object} Function to be called when the <read>, <create>,\n     *     <update>, <delete> or <commit> operation completes, read-only,\n     *     set through the options passed to the constructor.\n     */\n    callback: null,\n\n    /**\n     * Property: scope\n     * {Object} Callback execution scope, read-only, set through the\n     *     options passed to the constructor.\n     */\n    scope: null,\n\n    /**\n     * APIProperty: readWithPOST\n     * {Boolean} true if read operations are done with POST requests\n     *     instead of GET, defaults to false.\n     */\n    readWithPOST: false,\n\n    /**\n     * APIProperty: updateWithPOST\n     * {Boolean} true if update operations are done with POST requests\n     *     defaults to false.\n     */\n    updateWithPOST: false,\n    \n    /**\n     * APIProperty: deleteWithPOST\n     * {Boolean} true if delete operations are done with POST requests\n     *     defaults to false.\n     *     if true, POST data is set to output of format.write().\n     */\n    deleteWithPOST: false,\n\n    /**\n     * Property: wildcarded.\n     * {Boolean} If true percent signs are added around values\n     *     read from LIKE filters, for example if the protocol\n     *     read method is passed a LIKE filter whose property\n     *     is \"foo\" and whose value is \"bar\" the string\n     *     \"foo__ilike=%bar%\" will be sent in the query string;\n     *     defaults to false.\n     */\n    wildcarded: false,\n\n    /**\n     * APIProperty: srsInBBOX\n     * {Boolean} Include the SRS identifier in BBOX query string parameter.  \n     *     Default is false.  If true and the layer has a projection object set,\n     *     any BBOX filter will be serialized with a fifth item identifying the\n     *     projection.  E.g. bbox=-1000,-1000,1000,1000,EPSG:900913\n     */\n    srsInBBOX: false,\n\n    /**\n     * Constructor: OpenLayers.Protocol.HTTP\n     * A class for giving layers generic HTTP protocol.\n     *\n     * Parameters:\n     * options - {Object} Optional object whose properties will be set on the\n     *     instance.\n     *\n     * Valid options include:\n     * url - {String}\n     * headers - {Object} \n     * params - {Object} URL parameters for GET requests\n     * format - {<OpenLayers.Format>}\n     * callback - {Function}\n     * scope - {Object}\n     */\n    initialize: function(options) {\n        options = options || {};\n        this.params = {};\n        this.headers = {};\n        OpenLayers.Protocol.prototype.initialize.apply(this, arguments);\n\n        if (!this.filterToParams && OpenLayers.Format.QueryStringFilter) {\n            var format = new OpenLayers.Format.QueryStringFilter({\n                wildcarded: this.wildcarded,\n                srsInBBOX: this.srsInBBOX\n            });\n            this.filterToParams = function(filter, params) {\n                return format.write(filter, params);\n            };\n        }\n    },\n    \n    /**\n     * APIMethod: destroy\n     * Clean up the protocol.\n     */\n    destroy: function() {\n        this.params = null;\n        this.headers = null;\n        OpenLayers.Protocol.prototype.destroy.apply(this);\n    },\n\n    /**\n     * APIMethod: filterToParams\n     * Optional method to translate an <OpenLayers.Filter> object into an object\n     *     that can be serialized as request query string provided.  If a custom\n     *     method is not provided, the filter will be serialized using the \n     *     <OpenLayers.Format.QueryStringFilter> class.\n     *\n     * Parameters:\n     * filter - {<OpenLayers.Filter>} filter to convert.\n     * params - {Object} The parameters object.\n     *\n     * Returns:\n     * {Object} The resulting parameters object.\n     */\n    \n    /**\n     * APIMethod: read\n     * Construct a request for reading new features.\n     *\n     * Parameters:\n     * options - {Object} Optional object for configuring the request.\n     *     This object is modified and should not be reused.\n     *\n     * Valid options:\n     * url - {String} Url for the request.\n     * params - {Object} Parameters to get serialized as a query string.\n     * headers - {Object} Headers to be set on the request.\n     * filter - {<OpenLayers.Filter>} Filter to get serialized as a\n     *     query string.\n     * readWithPOST - {Boolean} If the request should be done with POST.\n     *\n     * Returns:\n     * {<OpenLayers.Protocol.Response>} A response object, whose \"priv\" property\n     *     references the HTTP request, this object is also passed to the\n     *     callback function when the request completes, its \"features\" property\n     *     is then populated with the features received from the server.\n     */\n    read: function(options) {\n        OpenLayers.Protocol.prototype.read.apply(this, arguments);\n        options = options || {};\n        options.params = OpenLayers.Util.applyDefaults(\n            options.params, this.options.params);\n        options = OpenLayers.Util.applyDefaults(options, this.options);\n        if (options.filter && this.filterToParams) {\n            options.params = this.filterToParams(\n                options.filter, options.params\n            );\n        }\n        var readWithPOST = (options.readWithPOST !== undefined) ?\n                           options.readWithPOST : this.readWithPOST;\n        var resp = new OpenLayers.Protocol.Response({requestType: \"read\"});\n        if(readWithPOST) {\n            var headers = options.headers || {};\n            headers[\"Content-Type\"] = \"application/x-www-form-urlencoded\";\n            resp.priv = OpenLayers.Request.POST({\n                url: options.url,\n                callback: this.createCallback(this.handleRead, resp, options),\n                data: OpenLayers.Util.getParameterString(options.params),\n                headers: headers\n            });\n        } else {\n            resp.priv = OpenLayers.Request.GET({\n                url: options.url,\n                callback: this.createCallback(this.handleRead, resp, options),\n                params: options.params,\n                headers: options.headers\n            });\n        }\n        return resp;\n    },\n\n    /**\n     * Method: handleRead\n     * Individual callbacks are created for read, create and update, should\n     *     a subclass need to override each one separately.\n     *\n     * Parameters:\n     * resp - {<OpenLayers.Protocol.Response>} The response object to pass to\n     *     the user callback.\n     * options - {Object} The user options passed to the read call.\n     */\n    handleRead: function(resp, options) {\n        this.handleResponse(resp, options);\n    },\n\n    /**\n     * APIMethod: create\n     * Construct a request for writing newly created features.\n     *\n     * Parameters:\n     * features - {Array({<OpenLayers.Feature.Vector>})} or\n     *     {<OpenLayers.Feature.Vector>}\n     * options - {Object} Optional object for configuring the request.\n     *     This object is modified and should not be reused.\n     *\n     * Returns:\n     * {<OpenLayers.Protocol.Response>} An <OpenLayers.Protocol.Response>\n     *     object, whose \"priv\" property references the HTTP request, this \n     *     object is also passed to the callback function when the request\n     *     completes, its \"features\" property is then populated with the\n     *     the features received from the server.\n     */\n    create: function(features, options) {\n        options = OpenLayers.Util.applyDefaults(options, this.options);\n\n        var resp = new OpenLayers.Protocol.Response({\n            reqFeatures: features,\n            requestType: \"create\"\n        });\n\n        resp.priv = OpenLayers.Request.POST({\n            url: options.url,\n            callback: this.createCallback(this.handleCreate, resp, options),\n            headers: options.headers,\n            data: this.format.write(features)\n        });\n\n        return resp;\n    },\n\n    /**\n     * Method: handleCreate\n     * Called the the request issued by <create> is complete.  May be overridden\n     *     by subclasses.\n     *\n     * Parameters:\n     * resp - {<OpenLayers.Protocol.Response>} The response object to pass to\n     *     any user callback.\n     * options - {Object} The user options passed to the create call.\n     */\n    handleCreate: function(resp, options) {\n        this.handleResponse(resp, options);\n    },\n\n    /**\n     * APIMethod: update\n     * Construct a request updating modified feature.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>}\n     * options - {Object} Optional object for configuring the request.\n     *     This object is modified and should not be reused.\n     *\n     * Returns:\n     * {<OpenLayers.Protocol.Response>} An <OpenLayers.Protocol.Response>\n     *     object, whose \"priv\" property references the HTTP request, this \n     *     object is also passed to the callback function when the request\n     *     completes, its \"features\" property is then populated with the\n     *     the feature received from the server.\n     */\n    update: function(feature, options) {\n        options = options || {};\n        var url = options.url ||\n                  feature.url ||\n                  this.options.url + \"/\" + feature.fid;\n        options = OpenLayers.Util.applyDefaults(options, this.options);\n\n        var resp = new OpenLayers.Protocol.Response({\n            reqFeatures: feature,\n            requestType: \"update\"\n        });\n\n        var method = this.updateWithPOST ? \"POST\" : \"PUT\";\n        resp.priv = OpenLayers.Request[method]({\n            url: url,\n            callback: this.createCallback(this.handleUpdate, resp, options),\n            headers: options.headers,\n            data: this.format.write(feature)\n        });\n\n        return resp;\n    },\n\n    /**\n     * Method: handleUpdate\n     * Called the the request issued by <update> is complete.  May be overridden\n     *     by subclasses.\n     *\n     * Parameters:\n     * resp - {<OpenLayers.Protocol.Response>} The response object to pass to\n     *     any user callback.\n     * options - {Object} The user options passed to the update call.\n     */\n    handleUpdate: function(resp, options) {\n        this.handleResponse(resp, options);\n    },\n\n    /**\n     * APIMethod: delete\n     * Construct a request deleting a removed feature.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>}\n     * options - {Object} Optional object for configuring the request.\n     *     This object is modified and should not be reused.\n     *\n     * Returns:\n     * {<OpenLayers.Protocol.Response>} An <OpenLayers.Protocol.Response>\n     *     object, whose \"priv\" property references the HTTP request, this \n     *     object is also passed to the callback function when the request\n     *     completes.\n     */\n    \"delete\": function(feature, options) {\n        options = options || {};\n        var url = options.url ||\n                  feature.url ||\n                  this.options.url + \"/\" + feature.fid;\n        options = OpenLayers.Util.applyDefaults(options, this.options);\n\n        var resp = new OpenLayers.Protocol.Response({\n            reqFeatures: feature,\n            requestType: \"delete\"\n        });\n\n        var method = this.deleteWithPOST ? \"POST\" : \"DELETE\";\n        var requestOptions = {\n            url: url,\n            callback: this.createCallback(this.handleDelete, resp, options),\n            headers: options.headers\n        };\n        if (this.deleteWithPOST) {\n            requestOptions.data = this.format.write(feature);\n        }\n        resp.priv = OpenLayers.Request[method](requestOptions);\n\n        return resp;\n    },\n\n    /**\n     * Method: handleDelete\n     * Called the the request issued by <delete> is complete.  May be overridden\n     *     by subclasses.\n     *\n     * Parameters:\n     * resp - {<OpenLayers.Protocol.Response>} The response object to pass to\n     *     any user callback.\n     * options - {Object} The user options passed to the delete call.\n     */\n    handleDelete: function(resp, options) {\n        this.handleResponse(resp, options);\n    },\n\n    /**\n     * Method: handleResponse\n     * Called by CRUD specific handlers.\n     *\n     * Parameters:\n     * resp - {<OpenLayers.Protocol.Response>} The response object to pass to\n     *     any user callback.\n     * options - {Object} The user options passed to the create, read, update,\n     *     or delete call.\n     */\n    handleResponse: function(resp, options) {\n        var request = resp.priv;\n        if(options.callback) {\n            if(request.status >= 200 && request.status < 300) {\n                // success\n                if(resp.requestType != \"delete\") {\n                    resp.features = this.parseFeatures(request);\n                }\n                resp.code = OpenLayers.Protocol.Response.SUCCESS;\n            } else {\n                // failure\n                resp.code = OpenLayers.Protocol.Response.FAILURE;\n            }\n            options.callback.call(options.scope, resp);\n        }\n    },\n\n    /**\n     * Method: parseFeatures\n     * Read HTTP response body and return features.\n     *\n     * Parameters:\n     * request - {XMLHttpRequest} The request object\n     *\n     * Returns:\n     * {Array({<OpenLayers.Feature.Vector>})} or\n     *     {<OpenLayers.Feature.Vector>} Array of features or a single feature.\n     */\n    parseFeatures: function(request) {\n        var doc = request.responseXML;\n        if (!doc || !doc.documentElement) {\n            doc = request.responseText;\n        }\n        if (!doc || doc.length <= 0) {\n            return null;\n        }\n        return this.format.read(doc);\n    },\n\n    /**\n     * APIMethod: commit\n     * Iterate over each feature and take action based on the feature state.\n     *     Possible actions are create, update and delete.\n     *\n     * Parameters:\n     * features - {Array({<OpenLayers.Feature.Vector>})}\n     * options - {Object} Optional object for setting up intermediate commit\n     *     callbacks.\n     *\n     * Valid options:\n     * create - {Object} Optional object to be passed to the <create> method.\n     * update - {Object} Optional object to be passed to the <update> method.\n     * delete - {Object} Optional object to be passed to the <delete> method.\n     * callback - {Function} Optional function to be called when the commit\n     *     is complete.\n     * scope - {Object} Optional object to be set as the scope of the callback.\n     *\n     * Returns:\n     * {Array(<OpenLayers.Protocol.Response>)} An array of response objects,\n     *     one per request made to the server, each object's \"priv\" property\n     *     references the corresponding HTTP request.\n     */\n    commit: function(features, options) {\n        options = OpenLayers.Util.applyDefaults(options, this.options);\n        var resp = [], nResponses = 0;\n        \n        // Divide up features before issuing any requests.  This properly\n        // counts requests in the event that any responses come in before\n        // all requests have been issued.\n        var types = {};\n        types[OpenLayers.State.INSERT] = [];\n        types[OpenLayers.State.UPDATE] = [];\n        types[OpenLayers.State.DELETE] = [];\n        var feature, list, requestFeatures = [];\n        for(var i=0, len=features.length; i<len; ++i) {\n            feature = features[i];\n            list = types[feature.state];\n            if(list) {\n                list.push(feature);\n                requestFeatures.push(feature); \n            }\n        }\n        // tally up number of requests\n        var nRequests = (types[OpenLayers.State.INSERT].length > 0 ? 1 : 0) +\n            types[OpenLayers.State.UPDATE].length +\n            types[OpenLayers.State.DELETE].length;\n        \n        // This response will be sent to the final callback after all the others\n        // have been fired.\n        var success = true;\n        var finalResponse = new OpenLayers.Protocol.Response({\n            reqFeatures: requestFeatures        \n        });\n        \n        function insertCallback(response) {\n            var len = response.features ? response.features.length : 0;\n            var fids = new Array(len);\n            for(var i=0; i<len; ++i) {\n                fids[i] = response.features[i].fid;\n            }   \n            finalResponse.insertIds = fids;\n            callback.apply(this, [response]);\n        }\n \n        function callback(response) {\n            this.callUserCallback(response, options);\n            success = success && response.success();\n            nResponses++;\n            if (nResponses >= nRequests) {\n                if (options.callback) {\n                    finalResponse.code = success ? \n                        OpenLayers.Protocol.Response.SUCCESS :\n                        OpenLayers.Protocol.Response.FAILURE;\n                    options.callback.apply(options.scope, [finalResponse]);\n                }    \n            }\n        }\n\n        // start issuing requests\n        var queue = types[OpenLayers.State.INSERT];\n        if(queue.length > 0) {\n            resp.push(this.create(\n                queue, OpenLayers.Util.applyDefaults(\n                    {callback: insertCallback, scope: this}, options.create\n                )\n            ));\n        }\n        queue = types[OpenLayers.State.UPDATE];\n        for(var i=queue.length-1; i>=0; --i) {\n            resp.push(this.update(\n                queue[i], OpenLayers.Util.applyDefaults(\n                    {callback: callback, scope: this}, options.update\n                ))\n            );\n        }\n        queue = types[OpenLayers.State.DELETE];\n        for(var i=queue.length-1; i>=0; --i) {\n            resp.push(this[\"delete\"](\n                queue[i], OpenLayers.Util.applyDefaults(\n                    {callback: callback, scope: this}, options[\"delete\"]\n                ))\n            );\n        }\n        return resp;\n    },\n\n    /**\n     * APIMethod: abort\n     * Abort an ongoing request, the response object passed to\n     * this method must come from this HTTP protocol (as a result\n     * of a create, read, update, delete or commit operation).\n     *\n     * Parameters:\n     * response - {<OpenLayers.Protocol.Response>}\n     */\n    abort: function(response) {\n        if (response) {\n            response.priv.abort();\n        }\n    },\n\n    /**\n     * Method: callUserCallback\n     * This method is used from within the commit method each time an\n     *     an HTTP response is received from the server, it is responsible\n     *     for calling the user-supplied callbacks.\n     *\n     * Parameters:\n     * resp - {<OpenLayers.Protocol.Response>}\n     * options - {Object} The map of options passed to the commit call.\n     */\n    callUserCallback: function(resp, options) {\n        var opt = options[resp.requestType];\n        if(opt && opt.callback) {\n            opt.callback.call(opt.scope, resp);\n        }\n    },\n\n    CLASS_NAME: \"OpenLayers.Protocol.HTTP\" \n});\n/* ======================================================================\n    OpenLayers/Geometry.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n \n/**\n * @requires OpenLayers/BaseTypes/Class.js\n */\n\n/**\n * Class: OpenLayers.Geometry\n * A Geometry is a description of a geographic object.  Create an instance of\n * this class with the <OpenLayers.Geometry> constructor.  This is a base class,\n * typical geometry types are described by subclasses of this class.\n *\n * Note that if you use the <OpenLayers.Geometry.fromWKT> method, you must\n * explicitly include the OpenLayers.Format.WKT in your build.\n */\nOpenLayers.Geometry = OpenLayers.Class({\n\n    /**\n     * Property: id\n     * {String} A unique identifier for this geometry.\n     */\n    id: null,\n\n    /**\n     * Property: parent\n     * {<OpenLayers.Geometry>}This is set when a Geometry is added as component\n     * of another geometry\n     */\n    parent: null,\n\n    /**\n     * Property: bounds \n     * {<OpenLayers.Bounds>} The bounds of this geometry\n     */\n    bounds: null,\n\n    /**\n     * Constructor: OpenLayers.Geometry\n     * Creates a geometry object.  \n     */\n    initialize: function() {\n        this.id = OpenLayers.Util.createUniqueID(this.CLASS_NAME+ \"_\");\n    },\n    \n    /**\n     * Method: destroy\n     * Destroy this geometry.\n     */\n    destroy: function() {\n        this.id = null;\n        this.bounds = null;\n    },\n    \n    /**\n     * APIMethod: clone\n     * Create a clone of this geometry.  Does not set any non-standard\n     *     properties of the cloned geometry.\n     * \n     * Returns:\n     * {<OpenLayers.Geometry>} An exact clone of this geometry.\n     */\n    clone: function() {\n        return new OpenLayers.Geometry();\n    },\n    \n    /**\n     * Method: setBounds\n     * Set the bounds for this Geometry.\n     * \n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>} \n     */\n    setBounds: function(bounds) {\n        if (bounds) {\n            this.bounds = bounds.clone();\n        }\n    },\n    \n    /**\n     * Method: clearBounds\n     * Nullify this components bounds and that of its parent as well.\n     */\n    clearBounds: function() {\n        this.bounds = null;\n        if (this.parent) {\n            this.parent.clearBounds();\n        }    \n    },\n    \n    /**\n     * Method: extendBounds\n     * Extend the existing bounds to include the new bounds. \n     * If geometry's bounds is not yet set, then set a new Bounds.\n     * \n     * Parameters:\n     * newBounds - {<OpenLayers.Bounds>} \n     */\n    extendBounds: function(newBounds){\n        var bounds = this.getBounds();\n        if (!bounds) {\n            this.setBounds(newBounds);\n        } else {\n            this.bounds.extend(newBounds);\n        }\n    },\n    \n    /**\n     * APIMethod: getBounds\n     * Get the bounds for this Geometry. If bounds is not set, it \n     * is calculated again, this makes queries faster.\n     * \n     * Returns:\n     * {<OpenLayers.Bounds>}\n     */\n    getBounds: function() {\n        if (this.bounds == null) {\n            this.calculateBounds();\n        }\n        return this.bounds;\n    },\n    \n    /** \n     * APIMethod: calculateBounds\n     * Recalculate the bounds for the geometry. \n     */\n    calculateBounds: function() {\n        //\n        // This should be overridden by subclasses.\n        //\n    },\n    \n    /**\n     * APIMethod: distanceTo\n     * Calculate the closest distance between two geometries (on the x-y plane).\n     *\n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>} The target geometry.\n     * options - {Object} Optional properties for configuring the distance\n     *     calculation.\n     *\n     * Valid options depend on the specific geometry type.\n     * \n     * Returns:\n     * {Number | Object} The distance between this geometry and the target.\n     *     If details is true, the return will be an object with distance,\n     *     x0, y0, x1, and x2 properties.  The x0 and y0 properties represent\n     *     the coordinates of the closest point on this geometry. The x1 and y1\n     *     properties represent the coordinates of the closest point on the\n     *     target geometry.\n     */\n    distanceTo: function(geometry, options) {\n    },\n    \n    /**\n     * APIMethod: getVertices\n     * Return a list of all points in this geometry.\n     *\n     * Parameters:\n     * nodes - {Boolean} For lines, only return vertices that are\n     *     endpoints.  If false, for lines, only vertices that are not\n     *     endpoints will be returned.  If not provided, all vertices will\n     *     be returned.\n     *\n     * Returns:\n     * {Array} A list of all vertices in the geometry.\n     */\n    getVertices: function(nodes) {\n    },\n\n    /**\n     * Method: atPoint\n     * Note - This is only an approximation based on the bounds of the \n     * geometry.\n     * \n     * Parameters:\n     * lonlat - {<OpenLayers.LonLat>|Object} OpenLayers.LonLat or an\n     *     object with a 'lon' and 'lat' properties.\n     * toleranceLon - {float} Optional tolerance in Geometric Coords\n     * toleranceLat - {float} Optional tolerance in Geographic Coords\n     * \n     * Returns:\n     * {Boolean} Whether or not the geometry is at the specified location\n     */\n    atPoint: function(lonlat, toleranceLon, toleranceLat) {\n        var atPoint = false;\n        var bounds = this.getBounds();\n        if ((bounds != null) && (lonlat != null)) {\n\n            var dX = (toleranceLon != null) ? toleranceLon : 0;\n            var dY = (toleranceLat != null) ? toleranceLat : 0;\n    \n            var toleranceBounds = \n                new OpenLayers.Bounds(this.bounds.left - dX,\n                                      this.bounds.bottom - dY,\n                                      this.bounds.right + dX,\n                                      this.bounds.top + dY);\n\n            atPoint = toleranceBounds.containsLonLat(lonlat);\n        }\n        return atPoint;\n    },\n    \n    /**\n     * Method: getLength\n     * Calculate the length of this geometry. This method is defined in\n     * subclasses.\n     * \n     * Returns:\n     * {Float} The length of the collection by summing its parts\n     */\n    getLength: function() {\n        //to be overridden by geometries that actually have a length\n        //\n        return 0.0;\n    },\n\n    /**\n     * Method: getArea\n     * Calculate the area of this geometry. This method is defined in subclasses.\n     * \n     * Returns:\n     * {Float} The area of the collection by summing its parts\n     */\n    getArea: function() {\n        //to be overridden by geometries that actually have an area\n        //\n        return 0.0;\n    },\n    \n    /**\n     * APIMethod: getCentroid\n     * Calculate the centroid of this geometry. This method is defined in subclasses.\n     *\n     * Returns:\n     * {<OpenLayers.Geometry.Point>} The centroid of the collection\n     */\n    getCentroid: function() {\n        return null;\n    },\n\n    /**\n     * Method: toString\n     * Returns a text representation of the geometry.  If the WKT format is\n     *     included in a build, this will be the Well-Known Text \n     *     representation.\n     *\n     * Returns:\n     * {String} String representation of this geometry.\n     */\n    toString: function() {\n        var string;\n        if (OpenLayers.Format && OpenLayers.Format.WKT) {\n            string = OpenLayers.Format.WKT.prototype.write(\n                new OpenLayers.Feature.Vector(this)\n            );\n        } else {\n            string = Object.prototype.toString.call(this);\n        }\n        return string;\n    },\n\n    CLASS_NAME: \"OpenLayers.Geometry\"\n});\n\n/**\n * Function: OpenLayers.Geometry.fromWKT\n * Generate a geometry given a Well-Known Text string.  For this method to\n *     work, you must include the OpenLayers.Format.WKT in your build \n *     explicitly.\n *\n * Parameters:\n * wkt - {String} A string representing the geometry in Well-Known Text.\n *\n * Returns:\n * {<OpenLayers.Geometry>} A geometry of the appropriate class.\n */\nOpenLayers.Geometry.fromWKT = function(wkt) {\n    var geom;\n    if (OpenLayers.Format && OpenLayers.Format.WKT) {\n        var format = OpenLayers.Geometry.fromWKT.format;\n        if (!format) {\n            format = new OpenLayers.Format.WKT();\n            OpenLayers.Geometry.fromWKT.format = format;\n        }\n        var result = format.read(wkt);\n        if (result instanceof OpenLayers.Feature.Vector) {\n            geom = result.geometry;\n        } else if (OpenLayers.Util.isArray(result)) {\n            var len = result.length;\n            var components = new Array(len);\n            for (var i=0; i<len; ++i) {\n                components[i] = result[i].geometry;\n            }\n            geom = new OpenLayers.Geometry.Collection(components);\n        }\n    }\n    return geom;\n};\n    \n/**\n * Method: OpenLayers.Geometry.segmentsIntersect\n * Determine whether two line segments intersect.  Optionally calculates\n *     and returns the intersection point.  This function is optimized for\n *     cases where seg1.x2 >= seg2.x1 || seg2.x2 >= seg1.x1.  In those\n *     obvious cases where there is no intersection, the function should\n *     not be called.\n *\n * Parameters:\n * seg1 - {Object} Object representing a segment with properties x1, y1, x2,\n *     and y2.  The start point is represented by x1 and y1.  The end point\n *     is represented by x2 and y2.  Start and end are ordered so that x1 < x2.\n * seg2 - {Object} Object representing a segment with properties x1, y1, x2,\n *     and y2.  The start point is represented by x1 and y1.  The end point\n *     is represented by x2 and y2.  Start and end are ordered so that x1 < x2.\n * options - {Object} Optional properties for calculating the intersection.\n *\n * Valid options:\n * point - {Boolean} Return the intersection point.  If false, the actual\n *     intersection point will not be calculated.  If true and the segments\n *     intersect, the intersection point will be returned.  If true and\n *     the segments do not intersect, false will be returned.  If true and\n *     the segments are coincident, true will be returned.\n * tolerance - {Number} If a non-null value is provided, if the segments are\n *     within the tolerance distance, this will be considered an intersection.\n *     In addition, if the point option is true and the calculated intersection\n *     is within the tolerance distance of an end point, the endpoint will be\n *     returned instead of the calculated intersection.  Further, if the\n *     intersection is within the tolerance of endpoints on both segments, or\n *     if two segment endpoints are within the tolerance distance of eachother\n *     (but no intersection is otherwise calculated), an endpoint on the\n *     first segment provided will be returned.\n *\n * Returns:\n * {Boolean | <OpenLayers.Geometry.Point>}  The two segments intersect.\n *     If the point argument is true, the return will be the intersection\n *     point or false if none exists.  If point is true and the segments\n *     are coincident, return will be true (and the instersection is equal\n *     to the shorter segment).\n */\nOpenLayers.Geometry.segmentsIntersect = function(seg1, seg2, options) {\n    var point = options && options.point;\n    var tolerance = options && options.tolerance;\n    var intersection = false;\n    var x11_21 = seg1.x1 - seg2.x1;\n    var y11_21 = seg1.y1 - seg2.y1;\n    var x12_11 = seg1.x2 - seg1.x1;\n    var y12_11 = seg1.y2 - seg1.y1;\n    var y22_21 = seg2.y2 - seg2.y1;\n    var x22_21 = seg2.x2 - seg2.x1;\n    var d = (y22_21 * x12_11) - (x22_21 * y12_11);\n    var n1 = (x22_21 * y11_21) - (y22_21 * x11_21);\n    var n2 = (x12_11 * y11_21) - (y12_11 * x11_21);\n    if(d == 0) {\n        // parallel\n        if(n1 == 0 && n2 == 0) {\n            // coincident\n            intersection = true;\n        }\n    } else {\n        var along1 = n1 / d;\n        var along2 = n2 / d;\n        if(along1 >= 0 && along1 <= 1 && along2 >=0 && along2 <= 1) {\n            // intersect\n            if(!point) {\n                intersection = true;\n            } else {\n                // calculate the intersection point\n                var x = seg1.x1 + (along1 * x12_11);\n                var y = seg1.y1 + (along1 * y12_11);\n                intersection = new OpenLayers.Geometry.Point(x, y);\n            }\n        }\n    }\n    if(tolerance) {\n        var dist;\n        if(intersection) {\n            if(point) {\n                var segs = [seg1, seg2];\n                var seg, x, y;\n                // check segment endpoints for proximity to intersection\n                // set intersection to first endpoint within the tolerance\n                outer: for(var i=0; i<2; ++i) {\n                    seg = segs[i];\n                    for(var j=1; j<3; ++j) {\n                        x = seg[\"x\" + j];\n                        y = seg[\"y\" + j];\n                        dist = Math.sqrt(\n                            Math.pow(x - intersection.x, 2) +\n                            Math.pow(y - intersection.y, 2)\n                        );\n                        if(dist < tolerance) {\n                            intersection.x = x;\n                            intersection.y = y;\n                            break outer;\n                        }\n                    }\n                }\n                \n            }\n        } else {\n            // no calculated intersection, but segments could be within\n            // the tolerance of one another\n            var segs = [seg1, seg2];\n            var source, target, x, y, p, result;\n            // check segment endpoints for proximity to intersection\n            // set intersection to first endpoint within the tolerance\n            outer: for(var i=0; i<2; ++i) {\n                source = segs[i];\n                target = segs[(i+1)%2];\n                for(var j=1; j<3; ++j) {\n                    p = {x: source[\"x\"+j], y: source[\"y\"+j]};\n                    result = OpenLayers.Geometry.distanceToSegment(p, target);\n                    if(result.distance < tolerance) {\n                        if(point) {\n                            intersection = new OpenLayers.Geometry.Point(p.x, p.y);\n                        } else {\n                            intersection = true;\n                        }\n                        break outer;\n                    }\n                }\n            }\n        }\n    }\n    return intersection;\n};\n\n/**\n * Function: OpenLayers.Geometry.distanceToSegment\n *\n * Parameters:\n * point - {Object} An object with x and y properties representing the\n *     point coordinates.\n * segment - {Object} An object with x1, y1, x2, and y2 properties\n *     representing endpoint coordinates.\n *\n * Returns:\n * {Object} An object with distance, along, x, and y properties.  The distance\n *     will be the shortest distance between the input point and segment.\n *     The x and y properties represent the coordinates along the segment\n *     where the shortest distance meets the segment. The along attribute\n *     describes how far between the two segment points the given point is.\n */\nOpenLayers.Geometry.distanceToSegment = function(point, segment) {\n    var result = OpenLayers.Geometry.distanceSquaredToSegment(point, segment);\n    result.distance = Math.sqrt(result.distance);\n    return result;\n};\n\n/**\n * Function: OpenLayers.Geometry.distanceSquaredToSegment\n *\n * Usually the distanceToSegment function should be used. This variant however\n * can be used for comparisons where the exact distance is not important.\n *\n * Parameters:\n * point - {Object} An object with x and y properties representing the\n *     point coordinates.\n * segment - {Object} An object with x1, y1, x2, and y2 properties\n *     representing endpoint coordinates.\n *\n * Returns:\n * {Object} An object with squared distance, along, x, and y properties.\n *     The distance will be the shortest distance between the input point and\n *     segment. The x and y properties represent the coordinates along the\n *     segment where the shortest distance meets the segment. The along\n *     attribute describes how far between the two segment points the given\n *     point is.\n */\nOpenLayers.Geometry.distanceSquaredToSegment = function(point, segment) {\n    var x0 = point.x;\n    var y0 = point.y;\n    var x1 = segment.x1;\n    var y1 = segment.y1;\n    var x2 = segment.x2;\n    var y2 = segment.y2;\n    var dx = x2 - x1;\n    var dy = y2 - y1;\n    var along = (dx == 0 && dy == 0) ? 0 : ((dx * (x0 - x1)) + (dy * (y0 - y1))) /\n                (Math.pow(dx, 2) + Math.pow(dy, 2));\n    var x, y;\n    if(along <= 0.0) {\n        x = x1;\n        y = y1;\n    } else if(along >= 1.0) {\n        x = x2;\n        y = y2;\n    } else {\n        x = x1 + along * dx;\n        y = y1 + along * dy;\n    }\n    return {\n        distance: Math.pow(x - x0, 2) + Math.pow(y - y0, 2),\n        x: x, y: y,\n        along: along\n    };\n};\n/* ======================================================================\n    OpenLayers/Geometry/Collection.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Geometry.js\n */\n\n/**\n * Class: OpenLayers.Geometry.Collection\n * A Collection is exactly what it sounds like: A collection of different \n * Geometries. These are stored in the local parameter <components> (which\n * can be passed as a parameter to the constructor). \n * \n * As new geometries are added to the collection, they are NOT cloned. \n * When removing geometries, they need to be specified by reference (ie you \n * have to pass in the *exact* geometry to be removed).\n * \n * The <getArea> and <getLength> functions here merely iterate through\n * the components, summing their respective areas and lengths.\n *\n * Create a new instance with the <OpenLayers.Geometry.Collection> constructor.\n *\n * Inherits from:\n *  - <OpenLayers.Geometry> \n */\nOpenLayers.Geometry.Collection = OpenLayers.Class(OpenLayers.Geometry, {\n\n    /**\n     * APIProperty: components\n     * {Array(<OpenLayers.Geometry>)} The component parts of this geometry\n     */\n    components: null,\n    \n    /**\n     * Property: componentTypes\n     * {Array(String)} An array of class names representing the types of\n     * components that the collection can include.  A null value means the\n     * component types are not restricted.\n     */\n    componentTypes: null,\n\n    /**\n     * Constructor: OpenLayers.Geometry.Collection\n     * Creates a Geometry Collection -- a list of geoms.\n     *\n     * Parameters: \n     * components - {Array(<OpenLayers.Geometry>)} Optional array of geometries\n     *\n     */\n    initialize: function (components) {\n        OpenLayers.Geometry.prototype.initialize.apply(this, arguments);\n        this.components = [];\n        if (components != null) {\n            this.addComponents(components);\n        }\n    },\n\n    /**\n     * APIMethod: destroy\n     * Destroy this geometry.\n     */\n    destroy: function () {\n        this.components.length = 0;\n        this.components = null;\n        OpenLayers.Geometry.prototype.destroy.apply(this, arguments);\n    },\n\n    /**\n     * APIMethod: clone\n     * Clone this geometry.\n     *\n     * Returns:\n     * {<OpenLayers.Geometry.Collection>} An exact clone of this collection\n     */\n    clone: function() {\n        var Constructor = OpenLayers.Util.getConstructor(this.CLASS_NAME);\n        var geometry = new Constructor();\n        for(var i=0, len=this.components.length; i<len; i++) {\n            geometry.addComponent(this.components[i].clone());\n        }\n        \n        // catch any randomly tagged-on properties\n        OpenLayers.Util.applyDefaults(geometry, this);\n        \n        return geometry;\n    },\n\n    /**\n     * Method: getComponentsString\n     * Get a string representing the components for this collection\n     * \n     * Returns:\n     * {String} A string representation of the components of this geometry\n     */\n    getComponentsString: function(){\n        var strings = [];\n        for(var i=0, len=this.components.length; i<len; i++) {\n            strings.push(this.components[i].toShortString()); \n        }\n        return strings.join(\",\");\n    },\n\n    /**\n     * APIMethod: calculateBounds\n     * Recalculate the bounds by iterating through the components and \n     * calling calling extendBounds() on each item.\n     */\n    calculateBounds: function() {\n        this.bounds = null;\n        var bounds = new OpenLayers.Bounds();\n        var components = this.components;\n        if (components) {\n            for (var i=0, len=components.length; i<len; i++) {\n                bounds.extend(components[i].getBounds());\n            }\n        }\n        // to preserve old behavior, we only set bounds if non-null\n        // in the future, we could add bounds.isEmpty()\n        if (bounds.left != null && bounds.bottom != null && \n            bounds.right != null && bounds.top != null) {\n            this.setBounds(bounds);\n        }\n    },\n\n    /**\n     * APIMethod: addComponents\n     * Add components to this geometry.\n     *\n     * Parameters:\n     * components - {Array(<OpenLayers.Geometry>)} An array of geometries to add\n     */\n    addComponents: function(components){\n        if(!(OpenLayers.Util.isArray(components))) {\n            components = [components];\n        }\n        for(var i=0, len=components.length; i<len; i++) {\n            this.addComponent(components[i]);\n        }\n    },\n\n    /**\n     * Method: addComponent\n     * Add a new component (geometry) to the collection.  If this.componentTypes\n     * is set, then the component class name must be in the componentTypes array.\n     *\n     * The bounds cache is reset.\n     * \n     * Parameters:\n     * component - {<OpenLayers.Geometry>} A geometry to add\n     * index - {int} Optional index into the array to insert the component\n     *\n     * Returns:\n     * {Boolean} The component geometry was successfully added\n     */    \n    addComponent: function(component, index) {\n        var added = false;\n        if(component) {\n            if(this.componentTypes == null ||\n               (OpenLayers.Util.indexOf(this.componentTypes,\n                                        component.CLASS_NAME) > -1)) {\n\n                if(index != null && (index < this.components.length)) {\n                    var components1 = this.components.slice(0, index);\n                    var components2 = this.components.slice(index, \n                                                           this.components.length);\n                    components1.push(component);\n                    this.components = components1.concat(components2);\n                } else {\n                    this.components.push(component);\n                }\n                component.parent = this;\n                this.clearBounds();\n                added = true;\n            }\n        }\n        return added;\n    },\n    \n    /**\n     * APIMethod: removeComponents\n     * Remove components from this geometry.\n     *\n     * Parameters:\n     * components - {Array(<OpenLayers.Geometry>)} The components to be removed\n     *\n     * Returns: \n     * {Boolean} A component was removed.\n     */\n    removeComponents: function(components) {\n        var removed = false;\n\n        if(!(OpenLayers.Util.isArray(components))) {\n            components = [components];\n        }\n        for(var i=components.length-1; i>=0; --i) {\n            removed = this.removeComponent(components[i]) || removed;\n        }\n        return removed;\n    },\n    \n    /**\n     * Method: removeComponent\n     * Remove a component from this geometry.\n     *\n     * Parameters:\n     * component - {<OpenLayers.Geometry>} \n     *\n     * Returns: \n     * {Boolean} The component was removed.\n     */\n    removeComponent: function(component) {\n        \n        OpenLayers.Util.removeItem(this.components, component);\n        \n        // clearBounds() so that it gets recalculated on the next call\n        // to this.getBounds();\n        this.clearBounds();\n        return true;\n    },\n\n    /**\n     * APIMethod: getLength\n     * Calculate the length of this geometry\n     *\n     * Returns:\n     * {Float} The length of the geometry\n     */\n    getLength: function() {\n        var length = 0.0;\n        for (var i=0, len=this.components.length; i<len; i++) {\n            length += this.components[i].getLength();\n        }\n        return length;\n    },\n    \n    /**\n     * APIMethod: getArea\n     * Calculate the area of this geometry. Note how this function is overridden\n     * in <OpenLayers.Geometry.Polygon>.\n     *\n     * Returns:\n     * {Float} The area of the collection by summing its parts\n     */\n    getArea: function() {\n        var area = 0.0;\n        for (var i=0, len=this.components.length; i<len; i++) {\n            area += this.components[i].getArea();\n        }\n        return area;\n    },\n\n    /** \n     * APIMethod: getGeodesicArea\n     * Calculate the approximate area of the polygon were it projected onto\n     *     the earth.\n     *\n     * Parameters:\n     * projection - {<OpenLayers.Projection>} The spatial reference system\n     *     for the geometry coordinates.  If not provided, Geographic/WGS84 is\n     *     assumed.\n     * \n     * Reference:\n     * Robert. G. Chamberlain and William H. Duquette, \"Some Algorithms for\n     *     Polygons on a Sphere\", JPL Publication 07-03, Jet Propulsion\n     *     Laboratory, Pasadena, CA, June 2007 http://trs-new.jpl.nasa.gov/dspace/handle/2014/40409\n     *\n     * Returns:\n     * {float} The approximate geodesic area of the geometry in square meters.\n     */\n    getGeodesicArea: function(projection) {\n        var area = 0.0;\n        for(var i=0, len=this.components.length; i<len; i++) {\n            area += this.components[i].getGeodesicArea(projection);\n        }\n        return area;\n    },\n    \n    /**\n     * APIMethod: getCentroid\n     *\n     * Compute the centroid for this geometry collection.\n     *\n     * Parameters:\n     * weighted - {Boolean} Perform the getCentroid computation recursively,\n     * returning an area weighted average of all geometries in this collection.\n     *\n     * Returns:\n     * {<OpenLayers.Geometry.Point>} The centroid of the collection\n     */\n    getCentroid: function(weighted) {\n        if (!weighted) {\n            return this.components.length && this.components[0].getCentroid();\n        }\n        var len = this.components.length;\n        if (!len) {\n            return false;\n        }\n        \n        var areas = [];\n        var centroids = [];\n        var areaSum = 0;\n        var minArea = Number.MAX_VALUE;\n        var component;\n        for (var i=0; i<len; ++i) {\n            component = this.components[i];\n            var area = component.getArea();\n            var centroid = component.getCentroid(true);\n            if (isNaN(area) || isNaN(centroid.x) || isNaN(centroid.y)) {\n                continue;\n            }\n            areas.push(area);\n            areaSum += area;\n            minArea = (area < minArea && area > 0) ? area : minArea;\n            centroids.push(centroid);\n        }\n        len = areas.length;\n        if (areaSum === 0) {\n            // all the components in this collection have 0 area\n            // probably a collection of points -- weight all the points the same\n            for (var i=0; i<len; ++i) {\n                areas[i] = 1;\n            }\n            areaSum = areas.length;\n        } else {\n            // normalize all the areas where the smallest area will get\n            // a value of 1\n            for (var i=0; i<len; ++i) {\n                areas[i] /= minArea;\n            }\n            areaSum /= minArea;\n        }\n        \n        var xSum = 0, ySum = 0, centroid, area;\n        for (var i=0; i<len; ++i) {\n            centroid = centroids[i];\n            area = areas[i];\n            xSum += centroid.x * area;\n            ySum += centroid.y * area;\n        }\n        \n        return new OpenLayers.Geometry.Point(xSum/areaSum, ySum/areaSum);\n    },\n\n    /**\n     * APIMethod: getGeodesicLength\n     * Calculate the approximate length of the geometry were it projected onto\n     *     the earth.\n     *\n     * projection - {<OpenLayers.Projection>} The spatial reference system\n     *     for the geometry coordinates.  If not provided, Geographic/WGS84 is\n     *     assumed.\n     * \n     * Returns:\n     * {Float} The appoximate geodesic length of the geometry in meters.\n     */\n    getGeodesicLength: function(projection) {\n        var length = 0.0;\n        for(var i=0, len=this.components.length; i<len; i++) {\n            length += this.components[i].getGeodesicLength(projection);\n        }\n        return length;\n    },\n\n    /**\n     * APIMethod: move\n     * Moves a geometry by the given displacement along positive x and y axes.\n     *     This modifies the position of the geometry and clears the cached\n     *     bounds.\n     *\n     * Parameters:\n     * x - {Float} Distance to move geometry in positive x direction. \n     * y - {Float} Distance to move geometry in positive y direction.\n     */\n    move: function(x, y) {\n        for(var i=0, len=this.components.length; i<len; i++) {\n            this.components[i].move(x, y);\n        }\n    },\n\n    /**\n     * APIMethod: rotate\n     * Rotate a geometry around some origin\n     *\n     * Parameters:\n     * angle - {Float} Rotation angle in degrees (measured counterclockwise\n     *                 from the positive x-axis)\n     * origin - {<OpenLayers.Geometry.Point>} Center point for the rotation\n     */\n    rotate: function(angle, origin) {\n        for(var i=0, len=this.components.length; i<len; ++i) {\n            this.components[i].rotate(angle, origin);\n        }\n    },\n\n    /**\n     * APIMethod: resize\n     * Resize a geometry relative to some origin.  Use this method to apply\n     *     a uniform scaling to a geometry.\n     *\n     * Parameters:\n     * scale - {Float} Factor by which to scale the geometry.  A scale of 2\n     *                 doubles the size of the geometry in each dimension\n     *                 (lines, for example, will be twice as long, and polygons\n     *                 will have four times the area).\n     * origin - {<OpenLayers.Geometry.Point>} Point of origin for resizing\n     * ratio - {Float} Optional x:y ratio for resizing.  Default ratio is 1.\n     * \n     * Returns:\n     * {<OpenLayers.Geometry>} - The current geometry. \n     */\n    resize: function(scale, origin, ratio) {\n        for(var i=0; i<this.components.length; ++i) {\n            this.components[i].resize(scale, origin, ratio);\n        }\n        return this;\n    },\n\n    /**\n     * APIMethod: distanceTo\n     * Calculate the closest distance between two geometries (on the x-y plane).\n     *\n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>} The target geometry.\n     * options - {Object} Optional properties for configuring the distance\n     *     calculation.\n     *\n     * Valid options:\n     * details - {Boolean} Return details from the distance calculation.\n     *     Default is false.\n     * edge - {Boolean} Calculate the distance from this geometry to the\n     *     nearest edge of the target geometry.  Default is true.  If true,\n     *     calling distanceTo from a geometry that is wholly contained within\n     *     the target will result in a non-zero distance.  If false, whenever\n     *     geometries intersect, calling distanceTo will return 0.  If false,\n     *     details cannot be returned.\n     *\n     * Returns:\n     * {Number | Object} The distance between this geometry and the target.\n     *     If details is true, the return will be an object with distance,\n     *     x0, y0, x1, and y1 properties.  The x0 and y0 properties represent\n     *     the coordinates of the closest point on this geometry. The x1 and y1\n     *     properties represent the coordinates of the closest point on the\n     *     target geometry.\n     */\n    distanceTo: function(geometry, options) {\n        var edge = !(options && options.edge === false);\n        var details = edge && options && options.details;\n        var result, best, distance;\n        var min = Number.POSITIVE_INFINITY;\n        for(var i=0, len=this.components.length; i<len; ++i) {\n            result = this.components[i].distanceTo(geometry, options);\n            distance = details ? result.distance : result;\n            if(distance < min) {\n                min = distance;\n                best = result;\n                if(min == 0) {\n                    break;\n                }\n            }\n        }\n        return best;\n    },\n\n    /** \n     * APIMethod: equals\n     * Determine whether another geometry is equivalent to this one.  Geometries\n     *     are considered equivalent if all components have the same coordinates.\n     * \n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>} The geometry to test. \n     *\n     * Returns:\n     * {Boolean} The supplied geometry is equivalent to this geometry.\n     */\n    equals: function(geometry) {\n        var equivalent = true;\n        if(!geometry || !geometry.CLASS_NAME ||\n           (this.CLASS_NAME != geometry.CLASS_NAME)) {\n            equivalent = false;\n        } else if(!(OpenLayers.Util.isArray(geometry.components)) ||\n                  (geometry.components.length != this.components.length)) {\n            equivalent = false;\n        } else {\n            for(var i=0, len=this.components.length; i<len; ++i) {\n                if(!this.components[i].equals(geometry.components[i])) {\n                    equivalent = false;\n                    break;\n                }\n            }\n        }\n        return equivalent;\n    },\n\n    /**\n     * APIMethod: transform\n     * Reproject the components geometry from source to dest.\n     * \n     * Parameters:\n     * source - {<OpenLayers.Projection>} \n     * dest - {<OpenLayers.Projection>}\n     * \n     * Returns:\n     * {<OpenLayers.Geometry>} \n     */\n    transform: function(source, dest) {\n        if (source && dest) {\n            for (var i=0, len=this.components.length; i<len; i++) {  \n                var component = this.components[i];\n                component.transform(source, dest);\n            }\n            this.bounds = null;\n        }\n        return this;\n    },\n\n    /**\n     * APIMethod: intersects\n     * Determine if the input geometry intersects this one.\n     *\n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>} Any type of geometry.\n     *\n     * Returns:\n     * {Boolean} The input geometry intersects this one.\n     */\n    intersects: function(geometry) {\n        var intersect = false;\n        for(var i=0, len=this.components.length; i<len; ++ i) {\n            intersect = geometry.intersects(this.components[i]);\n            if(intersect) {\n                break;\n            }\n        }\n        return intersect;\n    },\n\n    /**\n     * APIMethod: getVertices\n     * Return a list of all points in this geometry.\n     *\n     * Parameters:\n     * nodes - {Boolean} For lines, only return vertices that are\n     *     endpoints.  If false, for lines, only vertices that are not\n     *     endpoints will be returned.  If not provided, all vertices will\n     *     be returned.\n     *\n     * Returns:\n     * {Array} A list of all vertices in the geometry.\n     */\n    getVertices: function(nodes) {\n        var vertices = [];\n        for(var i=0, len=this.components.length; i<len; ++i) {\n            Array.prototype.push.apply(\n                vertices, this.components[i].getVertices(nodes)\n            );\n        }\n        return vertices;\n    },\n\n\n    CLASS_NAME: \"OpenLayers.Geometry.Collection\"\n});\n/* ======================================================================\n    OpenLayers/Geometry/Point.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Geometry.js\n */\n\n/**\n * Class: OpenLayers.Geometry.Point\n * Point geometry class. \n * \n * Inherits from:\n *  - <OpenLayers.Geometry> \n */\nOpenLayers.Geometry.Point = OpenLayers.Class(OpenLayers.Geometry, {\n\n    /** \n     * APIProperty: x \n     * {float} \n     */\n    x: null,\n\n    /** \n     * APIProperty: y \n     * {float} \n     */\n    y: null,\n\n    /**\n     * Constructor: OpenLayers.Geometry.Point\n     * Construct a point geometry.\n     *\n     * Parameters:\n     * x - {float} \n     * y - {float}\n     * \n     */\n    initialize: function(x, y) {\n        OpenLayers.Geometry.prototype.initialize.apply(this, arguments);\n        \n        this.x = parseFloat(x);\n        this.y = parseFloat(y);\n    },\n\n    /**\n     * APIMethod: clone\n     * \n     * Returns:\n     * {<OpenLayers.Geometry.Point>} An exact clone of this OpenLayers.Geometry.Point\n     */\n    clone: function(obj) {\n        if (obj == null) {\n            obj = new OpenLayers.Geometry.Point(this.x, this.y);\n        }\n\n        // catch any randomly tagged-on properties\n        OpenLayers.Util.applyDefaults(obj, this);\n\n        return obj;\n    },\n\n    /** \n     * Method: calculateBounds\n     * Create a new Bounds based on the lon/lat\n     */\n    calculateBounds: function () {\n        this.bounds = new OpenLayers.Bounds(this.x, this.y,\n                                            this.x, this.y);\n    },\n\n    /**\n     * APIMethod: distanceTo\n     * Calculate the closest distance between two geometries (on the x-y plane).\n     *\n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>} The target geometry.\n     * options - {Object} Optional properties for configuring the distance\n     *     calculation.\n     *\n     * Valid options:\n     * details - {Boolean} Return details from the distance calculation.\n     *     Default is false.\n     * edge - {Boolean} Calculate the distance from this geometry to the\n     *     nearest edge of the target geometry.  Default is true.  If true,\n     *     calling distanceTo from a geometry that is wholly contained within\n     *     the target will result in a non-zero distance.  If false, whenever\n     *     geometries intersect, calling distanceTo will return 0.  If false,\n     *     details cannot be returned.\n     *\n     * Returns:\n     * {Number | Object} The distance between this geometry and the target.\n     *     If details is true, the return will be an object with distance,\n     *     x0, y0, x1, and x2 properties.  The x0 and y0 properties represent\n     *     the coordinates of the closest point on this geometry. The x1 and y1\n     *     properties represent the coordinates of the closest point on the\n     *     target geometry.\n     */\n    distanceTo: function(geometry, options) {\n        var edge = !(options && options.edge === false);\n        var details = edge && options && options.details;\n        var distance, x0, y0, x1, y1, result;\n        if(geometry instanceof OpenLayers.Geometry.Point) {\n            x0 = this.x;\n            y0 = this.y;\n            x1 = geometry.x;\n            y1 = geometry.y;\n            distance = Math.sqrt(Math.pow(x0 - x1, 2) + Math.pow(y0 - y1, 2));\n            result = !details ?\n                distance : {x0: x0, y0: y0, x1: x1, y1: y1, distance: distance};\n        } else {\n            result = geometry.distanceTo(this, options);\n            if(details) {\n                // switch coord order since this geom is target\n                result = {\n                    x0: result.x1, y0: result.y1,\n                    x1: result.x0, y1: result.y0,\n                    distance: result.distance\n                };\n            }\n        }\n        return result;\n    },\n    \n    /** \n     * APIMethod: equals\n     * Determine whether another geometry is equivalent to this one.  Geometries\n     *     are considered equivalent if all components have the same coordinates.\n     * \n     * Parameters:\n     * geom - {<OpenLayers.Geometry.Point>} The geometry to test. \n     *\n     * Returns:\n     * {Boolean} The supplied geometry is equivalent to this geometry.\n     */\n    equals: function(geom) {\n        var equals = false;\n        if (geom != null) {\n            equals = ((this.x == geom.x && this.y == geom.y) ||\n                      (isNaN(this.x) && isNaN(this.y) && isNaN(geom.x) && isNaN(geom.y)));\n        }\n        return equals;\n    },\n    \n    /**\n     * Method: toShortString\n     *\n     * Returns:\n     * {String} Shortened String representation of Point object. \n     *         (ex. <i>\"5, 42\"</i>)\n     */\n    toShortString: function() {\n        return (this.x + \", \" + this.y);\n    },\n    \n    /**\n     * APIMethod: move\n     * Moves a geometry by the given displacement along positive x and y axes.\n     *     This modifies the position of the geometry and clears the cached\n     *     bounds.\n     *\n     * Parameters:\n     * x - {Float} Distance to move geometry in positive x direction. \n     * y - {Float} Distance to move geometry in positive y direction.\n     */\n    move: function(x, y) {\n        this.x = this.x + x;\n        this.y = this.y + y;\n        this.clearBounds();\n    },\n\n    /**\n     * APIMethod: rotate\n     * Rotate a point around another.\n     *\n     * Parameters:\n     * angle - {Float} Rotation angle in degrees (measured counterclockwise\n     *                 from the positive x-axis)\n     * origin - {<OpenLayers.Geometry.Point>} Center point for the rotation\n     */\n    rotate: function(angle, origin) {\n        angle *= Math.PI / 180;\n        var radius = this.distanceTo(origin);\n        var theta = angle + Math.atan2(this.y - origin.y, this.x - origin.x);\n        this.x = origin.x + (radius * Math.cos(theta));\n        this.y = origin.y + (radius * Math.sin(theta));\n        this.clearBounds();\n    },\n    \n    /**\n     * APIMethod: getCentroid\n     *\n     * Returns:\n     * {<OpenLayers.Geometry.Point>} The centroid of the collection\n     */\n    getCentroid: function() {\n        return new OpenLayers.Geometry.Point(this.x, this.y);\n    },\n\n    /**\n     * APIMethod: resize\n     * Resize a point relative to some origin.  For points, this has the effect\n     *     of scaling a vector (from the origin to the point).  This method is\n     *     more useful on geometry collection subclasses.\n     *\n     * Parameters:\n     * scale - {Float} Ratio of the new distance from the origin to the old\n     *                 distance from the origin.  A scale of 2 doubles the\n     *                 distance between the point and origin.\n     * origin - {<OpenLayers.Geometry.Point>} Point of origin for resizing\n     * ratio - {Float} Optional x:y ratio for resizing.  Default ratio is 1.\n     * \n     * Returns:\n     * {<OpenLayers.Geometry>} - The current geometry. \n     */\n    resize: function(scale, origin, ratio) {\n        ratio = (ratio == undefined) ? 1 : ratio;\n        this.x = origin.x + (scale * ratio * (this.x - origin.x));\n        this.y = origin.y + (scale * (this.y - origin.y));\n        this.clearBounds();\n        return this;\n    },\n    \n    /**\n     * APIMethod: intersects\n     * Determine if the input geometry intersects this one.\n     *\n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>} Any type of geometry.\n     *\n     * Returns:\n     * {Boolean} The input geometry intersects this one.\n     */\n    intersects: function(geometry) {\n        var intersect = false;\n        if(geometry.CLASS_NAME == \"OpenLayers.Geometry.Point\") {\n            intersect = this.equals(geometry);\n        } else {\n            intersect = geometry.intersects(this);\n        }\n        return intersect;\n    },\n    \n    /**\n     * APIMethod: transform\n     * Translate the x,y properties of the point from source to dest.\n     * \n     * Parameters:\n     * source - {<OpenLayers.Projection>} \n     * dest - {<OpenLayers.Projection>}\n     * \n     * Returns:\n     * {<OpenLayers.Geometry>} \n     */\n    transform: function(source, dest) {\n        if ((source && dest)) {\n            OpenLayers.Projection.transform(\n                this, source, dest); \n            this.bounds = null;\n        }       \n        return this;\n    },\n\n    /**\n     * APIMethod: getVertices\n     * Return a list of all points in this geometry.\n     *\n     * Parameters:\n     * nodes - {Boolean} For lines, only return vertices that are\n     *     endpoints.  If false, for lines, only vertices that are not\n     *     endpoints will be returned.  If not provided, all vertices will\n     *     be returned.\n     *\n     * Returns:\n     * {Array} A list of all vertices in the geometry.\n     */\n    getVertices: function(nodes) {\n        return [this];\n    },\n\n    CLASS_NAME: \"OpenLayers.Geometry.Point\"\n});\n/* ======================================================================\n    OpenLayers/Geometry/MultiPoint.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Geometry/Collection.js\n * @requires OpenLayers/Geometry/Point.js\n */\n\n/**\n * Class: OpenLayers.Geometry.MultiPoint\n * MultiPoint is a collection of Points.  Create a new instance with the\n * <OpenLayers.Geometry.MultiPoint> constructor.\n *\n * Inherits from:\n *  - <OpenLayers.Geometry.Collection>\n *  - <OpenLayers.Geometry>\n */\nOpenLayers.Geometry.MultiPoint = OpenLayers.Class(\n  OpenLayers.Geometry.Collection, {\n\n    /**\n     * Property: componentTypes\n     * {Array(String)} An array of class names representing the types of\n     * components that the collection can include.  A null value means the\n     * component types are not restricted.\n     */\n    componentTypes: [\"OpenLayers.Geometry.Point\"],\n\n    /**\n     * Constructor: OpenLayers.Geometry.MultiPoint\n     * Create a new MultiPoint Geometry\n     *\n     * Parameters:\n     * components - {Array(<OpenLayers.Geometry.Point>)} \n     *\n     * Returns:\n     * {<OpenLayers.Geometry.MultiPoint>}\n     */\n\n    /**\n     * APIMethod: addPoint\n     * Wrapper for <OpenLayers.Geometry.Collection.addComponent>\n     *\n     * Parameters:\n     * point - {<OpenLayers.Geometry.Point>} Point to be added\n     * index - {Integer} Optional index\n     */\n    addPoint: function(point, index) {\n        this.addComponent(point, index);\n    },\n    \n    /**\n     * APIMethod: removePoint\n     * Wrapper for <OpenLayers.Geometry.Collection.removeComponent>\n     *\n     * Parameters:\n     * point - {<OpenLayers.Geometry.Point>} Point to be removed\n     */\n    removePoint: function(point){\n        this.removeComponent(point);\n    },\n\n    CLASS_NAME: \"OpenLayers.Geometry.MultiPoint\"\n});\n/* ======================================================================\n    OpenLayers/Geometry/Curve.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Geometry/MultiPoint.js\n */\n\n/**\n * Class: OpenLayers.Geometry.Curve\n * A Curve is a MultiPoint, whose points are assumed to be connected. To \n * this end, we provide a \"getLength()\" function, which iterates through \n * the points, summing the distances between them. \n * \n * Inherits: \n *  - <OpenLayers.Geometry.MultiPoint>\n */\nOpenLayers.Geometry.Curve = OpenLayers.Class(OpenLayers.Geometry.MultiPoint, {\n\n    /**\n     * Property: componentTypes\n     * {Array(String)} An array of class names representing the types of \n     *                 components that the collection can include.  A null \n     *                 value means the component types are not restricted.\n     */\n    componentTypes: [\"OpenLayers.Geometry.Point\"],\n\n    /**\n     * Constructor: OpenLayers.Geometry.Curve\n     * \n     * Parameters:\n     * point - {Array(<OpenLayers.Geometry.Point>)}\n     */\n    \n    /**\n     * APIMethod: getLength\n     * \n     * Returns:\n     * {Float} The length of the curve\n     */\n    getLength: function() {\n        var length = 0.0;\n        if ( this.components && (this.components.length > 1)) {\n            for(var i=1, len=this.components.length; i<len; i++) {\n                length += this.components[i-1].distanceTo(this.components[i]);\n            }\n        }\n        return length;\n    },\n\n    /**\n     * APIMethod: getGeodesicLength\n     * Calculate the approximate length of the geometry were it projected onto\n     *     the earth.\n     *\n     * projection - {<OpenLayers.Projection>} The spatial reference system\n     *     for the geometry coordinates.  If not provided, Geographic/WGS84 is\n     *     assumed.\n     * \n     * Returns:\n     * {Float} The appoximate geodesic length of the geometry in meters.\n     */\n    getGeodesicLength: function(projection) {\n        var geom = this;  // so we can work with a clone if needed\n        if(projection) {\n            var gg = new OpenLayers.Projection(\"EPSG:4326\");\n            if(!gg.equals(projection)) {\n                geom = this.clone().transform(projection, gg);\n            }\n        }\n        var length = 0.0;\n        if(geom.components && (geom.components.length > 1)) {\n            var p1, p2;\n            for(var i=1, len=geom.components.length; i<len; i++) {\n                p1 = geom.components[i-1];\n                p2 = geom.components[i];\n                // this returns km and requires lon/lat properties\n                length += OpenLayers.Util.distVincenty(\n                    {lon: p1.x, lat: p1.y}, {lon: p2.x, lat: p2.y}\n                );\n            }\n        }\n        // convert to m\n        return length * 1000;\n    },\n\n    CLASS_NAME: \"OpenLayers.Geometry.Curve\"\n});\n/* ======================================================================\n    OpenLayers/Geometry/LineString.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Geometry/Curve.js\n */\n\n/**\n * Class: OpenLayers.Geometry.LineString\n * A LineString is a Curve which, once two points have been added to it, can \n * never be less than two points long.\n * \n * Inherits from:\n *  - <OpenLayers.Geometry.Curve>\n */\nOpenLayers.Geometry.LineString = OpenLayers.Class(OpenLayers.Geometry.Curve, {\n\n    /**\n     * Constructor: OpenLayers.Geometry.LineString\n     * Create a new LineString geometry\n     *\n     * Parameters:\n     * points - {Array(<OpenLayers.Geometry.Point>)} An array of points used to\n     *          generate the linestring\n     *\n     */\n\n    /**\n     * APIMethod: removeComponent\n     * Only allows removal of a point if there are three or more points in \n     * the linestring. (otherwise the result would be just a single point)\n     *\n     * Parameters: \n     * point - {<OpenLayers.Geometry.Point>} The point to be removed\n     *\n     * Returns: \n     * {Boolean} The component was removed.\n     */\n    removeComponent: function(point) {\n        var removed = this.components && (this.components.length > 2);\n        if (removed) {\n            OpenLayers.Geometry.Collection.prototype.removeComponent.apply(this, \n                                                                  arguments);\n        }\n        return removed;\n    },\n    \n    /**\n     * APIMethod: intersects\n     * Test for instersection between two geometries.  This is a cheapo\n     *     implementation of the Bently-Ottmann algorigithm.  It doesn't\n     *     really keep track of a sweep line data structure.  It is closer\n     *     to the brute force method, except that segments are sorted and\n     *     potential intersections are only calculated when bounding boxes\n     *     intersect.\n     *\n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>}\n     *\n     * Returns:\n     * {Boolean} The input geometry intersects this geometry.\n     */\n    intersects: function(geometry) {\n        var intersect = false;\n        var type = geometry.CLASS_NAME;\n        if(type == \"OpenLayers.Geometry.LineString\" ||\n           type == \"OpenLayers.Geometry.LinearRing\" ||\n           type == \"OpenLayers.Geometry.Point\") {\n            var segs1 = this.getSortedSegments();\n            var segs2;\n            if(type == \"OpenLayers.Geometry.Point\") {\n                segs2 = [{\n                    x1: geometry.x, y1: geometry.y,\n                    x2: geometry.x, y2: geometry.y\n                }];\n            } else {\n                segs2 = geometry.getSortedSegments();\n            }\n            var seg1, seg1x1, seg1x2, seg1y1, seg1y2,\n                seg2, seg2y1, seg2y2;\n            // sweep right\n            outer: for(var i=0, len=segs1.length; i<len; ++i) {\n                seg1 = segs1[i];\n                seg1x1 = seg1.x1;\n                seg1x2 = seg1.x2;\n                seg1y1 = seg1.y1;\n                seg1y2 = seg1.y2;\n                inner: for(var j=0, jlen=segs2.length; j<jlen; ++j) {\n                    seg2 = segs2[j];\n                    if(seg2.x1 > seg1x2) {\n                        // seg1 still left of seg2\n                        break;\n                    }\n                    if(seg2.x2 < seg1x1) {\n                        // seg2 still left of seg1\n                        continue;\n                    }\n                    seg2y1 = seg2.y1;\n                    seg2y2 = seg2.y2;\n                    if(Math.min(seg2y1, seg2y2) > Math.max(seg1y1, seg1y2)) {\n                        // seg2 above seg1\n                        continue;\n                    }\n                    if(Math.max(seg2y1, seg2y2) < Math.min(seg1y1, seg1y2)) {\n                        // seg2 below seg1\n                        continue;\n                    }\n                    if(OpenLayers.Geometry.segmentsIntersect(seg1, seg2)) {\n                        intersect = true;\n                        break outer;\n                    }\n                }\n            }\n        } else {\n            intersect = geometry.intersects(this);\n        }\n        return intersect;\n    },\n    \n    /**\n     * Method: getSortedSegments\n     *\n     * Returns:\n     * {Array} An array of segment objects.  Segment objects have properties\n     *     x1, y1, x2, and y2.  The start point is represented by x1 and y1.\n     *     The end point is represented by x2 and y2.  Start and end are\n     *     ordered so that x1 < x2.\n     */\n    getSortedSegments: function() {\n        var numSeg = this.components.length - 1;\n        var segments = new Array(numSeg), point1, point2;\n        for(var i=0; i<numSeg; ++i) {\n            point1 = this.components[i];\n            point2 = this.components[i + 1];\n            if(point1.x < point2.x) {\n                segments[i] = {\n                    x1: point1.x,\n                    y1: point1.y,\n                    x2: point2.x,\n                    y2: point2.y\n                };\n            } else {\n                segments[i] = {\n                    x1: point2.x,\n                    y1: point2.y,\n                    x2: point1.x,\n                    y2: point1.y\n                };\n            }\n        }\n        // more efficient to define this somewhere static\n        function byX1(seg1, seg2) {\n            return seg1.x1 - seg2.x1;\n        }\n        return segments.sort(byX1);\n    },\n    \n    /**\n     * Method: splitWithSegment\n     * Split this geometry with the given segment.\n     *\n     * Parameters:\n     * seg - {Object} An object with x1, y1, x2, and y2 properties referencing\n     *     segment endpoint coordinates.\n     * options - {Object} Properties of this object will be used to determine\n     *     how the split is conducted.\n     *\n     * Valid options:\n     * edge - {Boolean} Allow splitting when only edges intersect.  Default is\n     *     true.  If false, a vertex on the source segment must be within the\n     *     tolerance distance of the intersection to be considered a split.\n     * tolerance - {Number} If a non-null value is provided, intersections\n     *     within the tolerance distance of one of the source segment's\n     *     endpoints will be assumed to occur at the endpoint.\n     *\n     * Returns:\n     * {Object} An object with *lines* and *points* properties.  If the given\n     *     segment intersects this linestring, the lines array will reference\n     *     geometries that result from the split.  The points array will contain\n     *     all intersection points.  Intersection points are sorted along the\n     *     segment (in order from x1,y1 to x2,y2).\n     */\n    splitWithSegment: function(seg, options) {\n        var edge = !(options && options.edge === false);\n        var tolerance = options && options.tolerance;\n        var lines = [];\n        var verts = this.getVertices();\n        var points = [];\n        var intersections = [];\n        var split = false;\n        var vert1, vert2, point;\n        var node, vertex, target;\n        var interOptions = {point: true, tolerance: tolerance};\n        var result = null;\n        for(var i=0, stop=verts.length-2; i<=stop; ++i) {\n            vert1 = verts[i];\n            points.push(vert1.clone());\n            vert2 = verts[i+1];\n            target = {x1: vert1.x, y1: vert1.y, x2: vert2.x, y2: vert2.y};\n            point = OpenLayers.Geometry.segmentsIntersect(\n                seg, target, interOptions\n            );\n            if(point instanceof OpenLayers.Geometry.Point) {\n                if((point.x === seg.x1 && point.y === seg.y1) ||\n                   (point.x === seg.x2 && point.y === seg.y2) ||\n                   point.equals(vert1) || point.equals(vert2)) {\n                    vertex = true;\n                } else {\n                    vertex = false;\n                }\n                if(vertex || edge) {\n                    // push intersections different than the previous\n                    if(!point.equals(intersections[intersections.length-1])) {\n                        intersections.push(point.clone());\n                    }\n                    if(i === 0) {\n                        if(point.equals(vert1)) {\n                            continue;\n                        }\n                    }\n                    if(point.equals(vert2)) {\n                        continue;\n                    }\n                    split = true;\n                    if(!point.equals(vert1)) {\n                        points.push(point);\n                    }\n                    lines.push(new OpenLayers.Geometry.LineString(points));\n                    points = [point.clone()];\n                }\n            }\n        }\n        if(split) {\n            points.push(vert2.clone());\n            lines.push(new OpenLayers.Geometry.LineString(points));\n        }\n        if(intersections.length > 0) {\n            // sort intersections along segment\n            var xDir = seg.x1 < seg.x2 ? 1 : -1;\n            var yDir = seg.y1 < seg.y2 ? 1 : -1;\n            result = {\n                lines: lines,\n                points: intersections.sort(function(p1, p2) {\n                    return (xDir * p1.x - xDir * p2.x) || (yDir * p1.y - yDir * p2.y);\n                })\n            };\n        }\n        return result;\n    },\n\n    /**\n     * Method: split\n     * Use this geometry (the source) to attempt to split a target geometry.\n     * \n     * Parameters:\n     * target - {<OpenLayers.Geometry>} The target geometry.\n     * options - {Object} Properties of this object will be used to determine\n     *     how the split is conducted.\n     *\n     * Valid options:\n     * mutual - {Boolean} Split the source geometry in addition to the target\n     *     geometry.  Default is false.\n     * edge - {Boolean} Allow splitting when only edges intersect.  Default is\n     *     true.  If false, a vertex on the source must be within the tolerance\n     *     distance of the intersection to be considered a split.\n     * tolerance - {Number} If a non-null value is provided, intersections\n     *     within the tolerance distance of an existing vertex on the source\n     *     will be assumed to occur at the vertex.\n     * \n     * Returns:\n     * {Array} A list of geometries (of this same type as the target) that\n     *     result from splitting the target with the source geometry.  The\n     *     source and target geometry will remain unmodified.  If no split\n     *     results, null will be returned.  If mutual is true and a split\n     *     results, return will be an array of two arrays - the first will be\n     *     all geometries that result from splitting the source geometry and\n     *     the second will be all geometries that result from splitting the\n     *     target geometry.\n     */\n    split: function(target, options) {\n        var results = null;\n        var mutual = options && options.mutual;\n        var sourceSplit, targetSplit, sourceParts, targetParts;\n        if(target instanceof OpenLayers.Geometry.LineString) {\n            var verts = this.getVertices();\n            var vert1, vert2, seg, splits, lines, point;\n            var points = [];\n            sourceParts = [];\n            for(var i=0, stop=verts.length-2; i<=stop; ++i) {\n                vert1 = verts[i];\n                vert2 = verts[i+1];\n                seg = {\n                    x1: vert1.x, y1: vert1.y,\n                    x2: vert2.x, y2: vert2.y\n                };\n                targetParts = targetParts || [target];\n                if(mutual) {\n                    points.push(vert1.clone());\n                }\n                for(var j=0; j<targetParts.length; ++j) {\n                    splits = targetParts[j].splitWithSegment(seg, options);\n                    if(splits) {\n                        // splice in new features\n                        lines = splits.lines;\n                        if(lines.length > 0) {\n                            lines.unshift(j, 1);\n                            Array.prototype.splice.apply(targetParts, lines);\n                            j += lines.length - 2;\n                        }\n                        if(mutual) {\n                            for(var k=0, len=splits.points.length; k<len; ++k) {\n                                point = splits.points[k];\n                                if(!point.equals(vert1)) {\n                                    points.push(point);\n                                    sourceParts.push(new OpenLayers.Geometry.LineString(points));\n                                    if(point.equals(vert2)) {\n                                        points = [];\n                                    } else {\n                                        points = [point.clone()];\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n            if(mutual && sourceParts.length > 0 && points.length > 0) {\n                points.push(vert2.clone());\n                sourceParts.push(new OpenLayers.Geometry.LineString(points));\n            }\n        } else {\n            results = target.splitWith(this, options);\n        }\n        if(targetParts && targetParts.length > 1) {\n            targetSplit = true;\n        } else {\n            targetParts = [];\n        }\n        if(sourceParts && sourceParts.length > 1) {\n            sourceSplit = true;\n        } else {\n            sourceParts = [];\n        }\n        if(targetSplit || sourceSplit) {\n            if(mutual) {\n                results = [sourceParts, targetParts];\n            } else {\n                results = targetParts;\n            }\n        }\n        return results;\n    },\n\n    /**\n     * Method: splitWith\n     * Split this geometry (the target) with the given geometry (the source).\n     *\n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>} A geometry used to split this\n     *     geometry (the source).\n     * options - {Object} Properties of this object will be used to determine\n     *     how the split is conducted.\n     *\n     * Valid options:\n     * mutual - {Boolean} Split the source geometry in addition to the target\n     *     geometry.  Default is false.\n     * edge - {Boolean} Allow splitting when only edges intersect.  Default is\n     *     true.  If false, a vertex on the source must be within the tolerance\n     *     distance of the intersection to be considered a split.\n     * tolerance - {Number} If a non-null value is provided, intersections\n     *     within the tolerance distance of an existing vertex on the source\n     *     will be assumed to occur at the vertex.\n     * \n     * Returns:\n     * {Array} A list of geometries (of this same type as the target) that\n     *     result from splitting the target with the source geometry.  The\n     *     source and target geometry will remain unmodified.  If no split\n     *     results, null will be returned.  If mutual is true and a split\n     *     results, return will be an array of two arrays - the first will be\n     *     all geometries that result from splitting the source geometry and\n     *     the second will be all geometries that result from splitting the\n     *     target geometry.\n     */\n    splitWith: function(geometry, options) {\n        return geometry.split(this, options);\n\n    },\n\n    /**\n     * APIMethod: getVertices\n     * Return a list of all points in this geometry.\n     *\n     * Parameters:\n     * nodes - {Boolean} For lines, only return vertices that are\n     *     endpoints.  If false, for lines, only vertices that are not\n     *     endpoints will be returned.  If not provided, all vertices will\n     *     be returned.\n     *\n     * Returns:\n     * {Array} A list of all vertices in the geometry.\n     */\n    getVertices: function(nodes) {\n        var vertices;\n        if(nodes === true) {\n            vertices = [\n                this.components[0],\n                this.components[this.components.length-1]\n            ];\n        } else if (nodes === false) {\n            vertices = this.components.slice(1, this.components.length-1);\n        } else {\n            vertices = this.components.slice();\n        }\n        return vertices;\n    },\n\n    /**\n     * APIMethod: distanceTo\n     * Calculate the closest distance between two geometries (on the x-y plane).\n     *\n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>} The target geometry.\n     * options - {Object} Optional properties for configuring the distance\n     *     calculation.\n     *\n     * Valid options:\n     * details - {Boolean} Return details from the distance calculation.\n     *     Default is false.\n     * edge - {Boolean} Calculate the distance from this geometry to the\n     *     nearest edge of the target geometry.  Default is true.  If true,\n     *     calling distanceTo from a geometry that is wholly contained within\n     *     the target will result in a non-zero distance.  If false, whenever\n     *     geometries intersect, calling distanceTo will return 0.  If false,\n     *     details cannot be returned.\n     *\n     * Returns:\n     * {Number | Object} The distance between this geometry and the target.\n     *     If details is true, the return will be an object with distance,\n     *     x0, y0, x1, and x2 properties.  The x0 and y0 properties represent\n     *     the coordinates of the closest point on this geometry. The x1 and y1\n     *     properties represent the coordinates of the closest point on the\n     *     target geometry.\n     */\n    distanceTo: function(geometry, options) {\n        var edge = !(options && options.edge === false);\n        var details = edge && options && options.details;\n        var result, best = {};\n        var min = Number.POSITIVE_INFINITY;\n        if(geometry instanceof OpenLayers.Geometry.Point) {\n            var segs = this.getSortedSegments();\n            var x = geometry.x;\n            var y = geometry.y;\n            var seg;\n            for(var i=0, len=segs.length; i<len; ++i) {\n                seg = segs[i];\n                result = OpenLayers.Geometry.distanceToSegment(geometry, seg);\n                if(result.distance < min) {\n                    min = result.distance;\n                    if(details) {\n                        best = {\n                            distance: min,\n                            x0: result.x, y0: result.y,\n                            x1: x, y1: y,\n                            index: i,\n                            indexDistance: new OpenLayers.Geometry.Point(seg.x1, seg.y1).distanceTo(geometry)\n                        };\n                    } else {\n                        best = min;\n                    }\n                    if(min === 0) {\n                        break;\n                    }\n                }\n            }\n        } else if(geometry instanceof OpenLayers.Geometry.LineString) { \n            var segs0 = this.getSortedSegments();\n            var segs1 = geometry.getSortedSegments();\n            var seg0, seg1, intersection, x0, y0;\n            var len1 = segs1.length;\n            var interOptions = {point: true};\n            outer: for(var i=0, len=segs0.length; i<len; ++i) {\n                seg0 = segs0[i];\n                x0 = seg0.x1;\n                y0 = seg0.y1;\n                for(var j=0; j<len1; ++j) {\n                    seg1 = segs1[j];\n                    intersection = OpenLayers.Geometry.segmentsIntersect(seg0, seg1, interOptions);\n                    if(intersection) {\n                        min = 0;\n                        best = {\n                            distance: 0,\n                            x0: intersection.x, y0: intersection.y,\n                            x1: intersection.x, y1: intersection.y\n                        };\n                        break outer;\n                    } else {\n                        result = OpenLayers.Geometry.distanceToSegment({x: x0, y: y0}, seg1);\n                        if(result.distance < min) {\n                            min = result.distance;\n                            best = {\n                                distance: min,\n                                x0: x0, y0: y0,\n                                x1: result.x, y1: result.y\n                            };\n                        }\n                    }\n                }\n            }\n            if(!details) {\n                best = best.distance;\n            }\n            if(min !== 0) {\n                // check the final vertex in this line's sorted segments\n                if(seg0) {\n                    result = geometry.distanceTo(\n                        new OpenLayers.Geometry.Point(seg0.x2, seg0.y2),\n                        options\n                    );\n                    var dist = details ? result.distance : result;\n                    if(dist < min) {\n                        if(details) {\n                            best = {\n                                distance: min,\n                                x0: result.x1, y0: result.y1,\n                                x1: result.x0, y1: result.y0\n                            };\n                        } else {\n                            best = dist;\n                        }\n                    }\n                }\n            }\n        } else {\n            best = geometry.distanceTo(this, options);\n            // swap since target comes from this line\n            if(details) {\n                best = {\n                    distance: best.distance,\n                    x0: best.x1, y0: best.y1,\n                    x1: best.x0, y1: best.y0\n                };\n            }\n        }\n        return best;\n    },\n    \n    /**\n     * APIMethod: simplify\n     * This function will return a simplified LineString.\n     * Simplification is based on the Douglas-Peucker algorithm.\n     *\n     *\n     * Parameters:\n     * tolerance - {number} threshold for simplification in map units\n     *\n     * Returns:\n     * {OpenLayers.Geometry.LineString} the simplified LineString\n     */\n    simplify: function(tolerance){\n        if (this && this !== null) {\n            var points = this.getVertices();\n            if (points.length < 3) {\n                return this;\n            }\n    \n            var compareNumbers = function(a, b){\n                return (a-b);\n            };\n    \n            /**\n             * Private function doing the Douglas-Peucker reduction\n             */\n            var douglasPeuckerReduction = function(points, firstPoint, lastPoint, tolerance){\n                var maxDistance = 0;\n                var indexFarthest = 0;\n    \n                for (var index = firstPoint, distance; index < lastPoint; index++) {\n                    distance = perpendicularDistance(points[firstPoint], points[lastPoint], points[index]);\n                    if (distance > maxDistance) {\n                        maxDistance = distance;\n                        indexFarthest = index;\n                    }\n                }\n    \n                if (maxDistance > tolerance && indexFarthest != firstPoint) {\n                    //Add the largest point that exceeds the tolerance\n                    pointIndexsToKeep.push(indexFarthest);\n                    douglasPeuckerReduction(points, firstPoint, indexFarthest, tolerance);\n                    douglasPeuckerReduction(points, indexFarthest, lastPoint, tolerance);\n                }\n            };\n    \n            /**\n             * Private function calculating the perpendicular distance\n             * TODO: check whether OpenLayers.Geometry.LineString::distanceTo() is faster or slower\n             */\n            var perpendicularDistance = function(point1, point2, point){\n                //Area = |(1/2)(x1y2 + x2y3 + x3y1 - x2y1 - x3y2 - x1y3)|   *Area of triangle\n                //Base = v((x1-x2)²+(x1-x2)²)                               *Base of Triangle*\n                //Area = .5*Base*H                                          *Solve for height\n                //Height = Area/.5/Base\n    \n                var area = Math.abs(0.5 * (point1.x * point2.y + point2.x * point.y + point.x * point1.y - point2.x * point1.y - point.x * point2.y - point1.x * point.y));\n                var bottom = Math.sqrt(Math.pow(point1.x - point2.x, 2) + Math.pow(point1.y - point2.y, 2));\n                var height = area / bottom * 2;\n    \n                return height;\n            };\n    \n            var firstPoint = 0;\n            var lastPoint = points.length - 1;\n            var pointIndexsToKeep = [];\n    \n            //Add the first and last index to the keepers\n            pointIndexsToKeep.push(firstPoint);\n            pointIndexsToKeep.push(lastPoint);\n    \n            //The first and the last point cannot be the same\n            while (points[firstPoint].equals(points[lastPoint])) {\n                lastPoint--;\n                //Addition: the first point not equal to first point in the LineString is kept as well\n                pointIndexsToKeep.push(lastPoint);\n            }\n    \n            douglasPeuckerReduction(points, firstPoint, lastPoint, tolerance);\n            var returnPoints = [];\n            pointIndexsToKeep.sort(compareNumbers);\n            for (var index = 0; index < pointIndexsToKeep.length; index++) {\n                returnPoints.push(points[pointIndexsToKeep[index]]);\n            }\n            return new OpenLayers.Geometry.LineString(returnPoints);\n    \n        }\n        else {\n            return this;\n        }\n    },\n\n    CLASS_NAME: \"OpenLayers.Geometry.LineString\"\n});\n\n\n/**\n * Function: OpenLayers.Geometry.LineString.geodesic\n *\n * Parameters:\n * interpolate - {function(number): OpenLayers.Geometry.Point} Interpolate\n *     function.\n * transform - {function(OpenLayers.Geometry.Point): OpenLayers.Geometry.Point}\n *     Transform from longitude/latitude to projected coordinates.\n * squaredTolerance - {number} Squared tolerance.\n *\n * Returns:\n * {OpenLayers.Geometry.LineString}\n */\nOpenLayers.Geometry.LineString.geodesic =\n        function(interpolate, transform, squaredTolerance) {\n    // FIXME reduce garbage generation\n    // FIXME optimize stack operations\n\n    var components = [];\n\n    var geoA = interpolate(0);\n    var geoB = interpolate(1);\n\n    var a = transform(geoA);\n    var b = transform(geoB);\n\n    var geoStack = [geoB, geoA];\n    var stack = [b, a];\n    var fractionStack = [1, 0];\n\n    var fractions = {};\n\n    var maxIterations = 1e5;\n    var geoM, m, fracA, fracB, fracM, key;\n\n    while (--maxIterations > 0 && fractionStack.length > 0) {\n        // Pop the a coordinate off the stack\n        fracA = fractionStack.pop();\n        geoA = geoStack.pop();\n        a = stack.pop();\n        // Add the a coordinate if it has not been added yet\n        key = fracA.toString();\n        if (!(key in fractions)) {\n            components.push(a);\n            fractions[key] = true;\n        }\n        // Pop the b coordinate off the stack\n        fracB = fractionStack.pop();\n        geoB = geoStack.pop();\n        b = stack.pop();\n        // Find the m point between the a and b coordinates\n        fracM = (fracA + fracB) / 2;\n        geoM = interpolate(fracM);\n        m = transform(geoM);\n        if (OpenLayers.Geometry.distanceSquaredToSegment(m, {x1: a.x, y1: a.y,\n                x2: b.x, y2: b.y}).distance < squaredTolerance) {\n            // If the m point is sufficiently close to the straight line, then\n            // we discard it. Just use the b coordinate and move on to the next\n            // line segment.\n            components.push(b);\n            key = fracB.toString();\n            fractions[key] = true;\n        } else {\n            // Otherwise, we need to subdivide the current line segment.\n            // Split it into two and push the two line segments onto the stack.\n            fractionStack.push(fracB, fracM, fracM, fracA);\n            stack.push(b, m, m, a);\n            geoStack.push(geoB, geoM, geoM, geoA);\n        }\n    }\n\n    return new OpenLayers.Geometry.LineString(components);\n};\n\n\n/**\n * Function: OpenLayers.Geometry.LineString.geodesicMeridian\n * Generate a meridian (line at constant longitude).\n *\n * Parameters:\n * lon - {number} Longitude.\n * lat1 - {number} Latitude 1.\n * lat2 - {number} Latitude 2.\n * projection - {OpenLayers.Projection} Projection.\n * squaredTolerance - {number} Squared tolerance.\n *\n * Returns:\n * {OpenLayers.Geometry.LineString} Line geometry for the meridian at <lon>.\n */\nOpenLayers.Geometry.LineString.geodesicMeridian =\n        function(lon, lat1, lat2, projection, squaredTolerance) {\n    var epsg4326Projection = new OpenLayers.Projection('EPSG:4326');\n    return OpenLayers.Geometry.LineString.geodesic(\n        function(frac) {\n            return new OpenLayers.Geometry.Point(\n                    lon, lat1 + ((lat2 - lat1) * frac));\n        },\n        function(point) {\n            return point.transform(epsg4326Projection, projection);\n        },\n        squaredTolerance\n  );\n};\n\n\n/**\n * Function: OpenLayers.Geometry.LineString.geodesicParallel\n * Generate a parallel (line at constant latitude).\n *\n * Parameters:\n * lat - {number} Latitude.\n * lon1 - {number} Longitude 1.\n * lon2 - {number} Longitude 2.\n * projection {OpenLayers.Projection} Projection.\n * squaredTolerance - {number} Squared tolerance.\n *\n * Returns:\n * {OpenLayers.Geometry.LineString} Line geometry for the parallel at <lat>.\n */\nOpenLayers.Geometry.LineString.geodesicParallel =\n        function(lat, lon1, lon2, projection, squaredTolerance) {\n    var epsg4326Projection = new OpenLayers.Projection('EPSG:4326');\n    return OpenLayers.Geometry.LineString.geodesic(\n        function(frac) {\n            return new OpenLayers.Geometry.Point(\n                    lon1 + ((lon2 - lon1) * frac), lat);\n        },\n        function(point) {\n            return point.transform(epsg4326Projection, projection);\n        },\n        squaredTolerance\n    );\n};\n\n/* ======================================================================\n    OpenLayers/Geometry/LinearRing.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Geometry/LineString.js\n */\n\n/**\n * Class: OpenLayers.Geometry.LinearRing\n * \n * A Linear Ring is a special LineString which is closed. It closes itself \n * automatically on every addPoint/removePoint by adding a copy of the first\n * point as the last point. \n * \n * Also, as it is the first in the line family to close itself, a getArea()\n * function is defined to calculate the enclosed area of the linearRing\n * \n * Inherits:\n *  - <OpenLayers.Geometry.LineString>\n */\nOpenLayers.Geometry.LinearRing = OpenLayers.Class(\n  OpenLayers.Geometry.LineString, {\n\n    /**\n     * Property: componentTypes\n     * {Array(String)} An array of class names representing the types of \n     *                 components that the collection can include.  A null \n     *                 value means the component types are not restricted.\n     */\n    componentTypes: [\"OpenLayers.Geometry.Point\"],\n\n    /**\n     * Constructor: OpenLayers.Geometry.LinearRing\n     * Linear rings are constructed with an array of points.  This array\n     *     can represent a closed or open ring.  If the ring is open (the last\n     *     point does not equal the first point), the constructor will close\n     *     the ring.  If the ring is already closed (the last point does equal\n     *     the first point), it will be left closed.\n     * \n     * Parameters:\n     * points - {Array(<OpenLayers.Geometry.Point>)} points\n     */\n\n    /**\n     * APIMethod: addComponent\n     * Adds a point to geometry components.  If the point is to be added to\n     *     the end of the components array and it is the same as the last point\n     *     already in that array, the duplicate point is not added.  This has \n     *     the effect of closing the ring if it is not already closed, and \n     *     doing the right thing if it is already closed.  This behavior can \n     *     be overridden by calling the method with a non-null index as the \n     *     second argument.\n     *\n     * Parameters:\n     * point - {<OpenLayers.Geometry.Point>}\n     * index - {Integer} Index into the array to insert the component\n     * \n     * Returns:\n     * {Boolean} Was the Point successfully added?\n     */\n    addComponent: function(point, index) {\n        var added = false;\n\n        //remove last point\n        var lastPoint = this.components.pop();\n\n        // given an index, add the point\n        // without an index only add non-duplicate points\n        if(index != null || !point.equals(lastPoint)) {\n            added = OpenLayers.Geometry.Collection.prototype.addComponent.apply(this, \n                                                                    arguments);\n        }\n\n        //append copy of first point\n        var firstPoint = this.components[0];\n        OpenLayers.Geometry.Collection.prototype.addComponent.apply(this, \n                                                                [firstPoint]);\n        \n        return added;\n    },\n    \n    /**\n     * APIMethod: removeComponent\n     * Removes a point from geometry components.\n     *\n     * Parameters:\n     * point - {<OpenLayers.Geometry.Point>}\n     *\n     * Returns: \n     * {Boolean} The component was removed.\n     */\n    removeComponent: function(point) {\n        var removed = this.components && (this.components.length > 3);\n        if (removed) {\n            //remove last point\n            this.components.pop();\n            \n            //remove our point\n            OpenLayers.Geometry.Collection.prototype.removeComponent.apply(this, \n                                                                    arguments);\n            //append copy of first point\n            var firstPoint = this.components[0];\n            OpenLayers.Geometry.Collection.prototype.addComponent.apply(this, \n                                                                [firstPoint]);\n        }\n        return removed;\n    },\n    \n    /**\n     * APIMethod: move\n     * Moves a geometry by the given displacement along positive x and y axes.\n     *     This modifies the position of the geometry and clears the cached\n     *     bounds.\n     *\n     * Parameters:\n     * x - {Float} Distance to move geometry in positive x direction. \n     * y - {Float} Distance to move geometry in positive y direction.\n     */\n    move: function(x, y) {\n        for(var i = 0, len=this.components.length; i<len - 1; i++) {\n            this.components[i].move(x, y);\n        }\n    },\n\n    /**\n     * APIMethod: rotate\n     * Rotate a geometry around some origin\n     *\n     * Parameters:\n     * angle - {Float} Rotation angle in degrees (measured counterclockwise\n     *                 from the positive x-axis)\n     * origin - {<OpenLayers.Geometry.Point>} Center point for the rotation\n     */\n    rotate: function(angle, origin) {\n        for(var i=0, len=this.components.length; i<len - 1; ++i) {\n            this.components[i].rotate(angle, origin);\n        }\n    },\n\n    /**\n     * APIMethod: resize\n     * Resize a geometry relative to some origin.  Use this method to apply\n     *     a uniform scaling to a geometry.\n     *\n     * Parameters:\n     * scale - {Float} Factor by which to scale the geometry.  A scale of 2\n     *                 doubles the size of the geometry in each dimension\n     *                 (lines, for example, will be twice as long, and polygons\n     *                 will have four times the area).\n     * origin - {<OpenLayers.Geometry.Point>} Point of origin for resizing\n     * ratio - {Float} Optional x:y ratio for resizing.  Default ratio is 1.\n     * \n     * Returns:\n     * {<OpenLayers.Geometry>} - The current geometry. \n     */\n    resize: function(scale, origin, ratio) {\n        for(var i=0, len=this.components.length; i<len - 1; ++i) {\n            this.components[i].resize(scale, origin, ratio);\n        }\n        return this;\n    },\n    \n    /**\n     * APIMethod: transform\n     * Reproject the components geometry from source to dest.\n     *\n     * Parameters:\n     * source - {<OpenLayers.Projection>}\n     * dest - {<OpenLayers.Projection>}\n     * \n     * Returns:\n     * {<OpenLayers.Geometry>} \n     */\n    transform: function(source, dest) {\n        if (source && dest) {\n            for (var i=0, len=this.components.length; i<len - 1; i++) {\n                var component = this.components[i];\n                component.transform(source, dest);\n            }\n            this.bounds = null;\n        }\n        return this;\n    },\n    \n    /**\n     * APIMethod: getCentroid\n     *\n     * Returns:\n     * {<OpenLayers.Geometry.Point>} The centroid of the collection\n     */\n    getCentroid: function() {\n        if (this.components) {\n            var len = this.components.length;\n            if (len > 0 && len <= 2) {\n                return this.components[0].clone();\n            } else if (len > 2) {\n                var sumX = 0.0;\n                var sumY = 0.0;\n                var x0 = this.components[0].x;\n                var y0 = this.components[0].y;\n                var area = -1 * this.getArea();\n                if (area != 0) {\n                    for (var i = 0; i < len - 1; i++) {\n                        var b = this.components[i];\n                        var c = this.components[i+1];\n                        sumX += (b.x + c.x - 2 * x0) * ((b.x - x0) * (c.y - y0) - (c.x - x0) * (b.y - y0));\n                        sumY += (b.y + c.y - 2 * y0) * ((b.x - x0) * (c.y - y0) - (c.x - x0) * (b.y - y0));\n                    }\n                    var x = x0 + sumX / (6 * area);\n                    var y = y0 + sumY / (6 * area);\n                } else {\n                    for (var i = 0; i < len - 1; i++) {\n                        sumX += this.components[i].x;\n                        sumY += this.components[i].y;\n                    }\n                    var x = sumX / (len - 1);\n                    var y = sumY / (len - 1);\n                }\n                return new OpenLayers.Geometry.Point(x, y);\n            } else {\n                return null;\n            }\n        }\n    },\n\n    /**\n     * APIMethod: getArea\n     * Note - The area is positive if the ring is oriented CW, otherwise\n     *         it will be negative.\n     * \n     * Returns:\n     * {Float} The signed area for a ring.\n     */\n    getArea: function() {\n        var area = 0.0;\n        if ( this.components && (this.components.length > 2)) {\n            var sum = 0.0;\n            for (var i=0, len=this.components.length; i<len - 1; i++) {\n                var b = this.components[i];\n                var c = this.components[i+1];\n                sum += (b.x + c.x) * (c.y - b.y);\n            }\n            area = - sum / 2.0;\n        }\n        return area;\n    },\n    \n    /**\n     * APIMethod: getGeodesicArea\n     * Calculate the approximate area of the polygon were it projected onto\n     *     the earth.  Note that this area will be positive if ring is oriented\n     *     clockwise, otherwise it will be negative.\n     *\n     * Parameters:\n     * projection - {<OpenLayers.Projection>} The spatial reference system\n     *     for the geometry coordinates.  If not provided, Geographic/WGS84 is\n     *     assumed.\n     * \n     * Reference:\n     * Robert. G. Chamberlain and William H. Duquette, \"Some Algorithms for\n     *     Polygons on a Sphere\", JPL Publication 07-03, Jet Propulsion\n     *     Laboratory, Pasadena, CA, June 2007 http://trs-new.jpl.nasa.gov/dspace/handle/2014/40409\n     *\n     * Returns:\n     * {float} The approximate signed geodesic area of the polygon in square\n     *     meters.\n     */\n    getGeodesicArea: function(projection) {\n        var ring = this;  // so we can work with a clone if needed\n        if(projection) {\n            var gg = new OpenLayers.Projection(\"EPSG:4326\");\n            if(!gg.equals(projection)) {\n                ring = this.clone().transform(projection, gg);\n            }\n        }\n        var area = 0.0;\n        var len = ring.components && ring.components.length;\n        if(len > 2) {\n            var p1, p2;\n            for(var i=0; i<len-1; i++) {\n                p1 = ring.components[i];\n                p2 = ring.components[i+1];\n                area += OpenLayers.Util.rad(p2.x - p1.x) *\n                        (2 + Math.sin(OpenLayers.Util.rad(p1.y)) +\n                        Math.sin(OpenLayers.Util.rad(p2.y)));\n            }\n            area = area * OpenLayers.Util.VincentyConstants.a * OpenLayers.Util.VincentyConstants.a / 2.0;\n        }\n        return area;\n    },\n    \n    /**\n     * Method: containsPoint\n     * Test if a point is inside a linear ring.  For the case where a point\n     *     is coincident with a linear ring edge, returns 1.  Otherwise,\n     *     returns boolean.\n     *\n     * Parameters:\n     * point - {<OpenLayers.Geometry.Point>}\n     *\n     * Returns:\n     * {Boolean | Number} The point is inside the linear ring.  Returns 1 if\n     *     the point is coincident with an edge.  Returns boolean otherwise.\n     */\n    containsPoint: function(point) {\n        var approx = OpenLayers.Number.limitSigDigs;\n        var digs = 14;\n        var px = approx(point.x, digs);\n        var py = approx(point.y, digs);\n        function getX(y, x1, y1, x2, y2) {\n            return (y - y2) * ((x2 - x1) / (y2 - y1)) + x2;\n        }\n        var numSeg = this.components.length - 1;\n        var start, end, x1, y1, x2, y2, cx, cy;\n        var crosses = 0;\n        for(var i=0; i<numSeg; ++i) {\n            start = this.components[i];\n            x1 = approx(start.x, digs);\n            y1 = approx(start.y, digs);\n            end = this.components[i + 1];\n            x2 = approx(end.x, digs);\n            y2 = approx(end.y, digs);\n            \n            /**\n             * The following conditions enforce five edge-crossing rules:\n             *    1. points coincident with edges are considered contained;\n             *    2. an upward edge includes its starting endpoint, and\n             *    excludes its final endpoint;\n             *    3. a downward edge excludes its starting endpoint, and\n             *    includes its final endpoint;\n             *    4. horizontal edges are excluded; and\n             *    5. the edge-ray intersection point must be strictly right\n             *    of the point P.\n             */\n            if(y1 == y2) {\n                // horizontal edge\n                if(py == y1) {\n                    // point on horizontal line\n                    if(x1 <= x2 && (px >= x1 && px <= x2) || // right or vert\n                       x1 >= x2 && (px <= x1 && px >= x2)) { // left or vert\n                        // point on edge\n                        crosses = -1;\n                        break;\n                    }\n                }\n                // ignore other horizontal edges\n                continue;\n            }\n            cx = approx(getX(py, x1, y1, x2, y2), digs);\n            if(cx == px) {\n                // point on line\n                if(y1 < y2 && (py >= y1 && py <= y2) || // upward\n                   y1 > y2 && (py <= y1 && py >= y2)) { // downward\n                    // point on edge\n                    crosses = -1;\n                    break;\n                }\n            }\n            if(cx <= px) {\n                // no crossing to the right\n                continue;\n            }\n            if(x1 != x2 && (cx < Math.min(x1, x2) || cx > Math.max(x1, x2))) {\n                // no crossing\n                continue;\n            }\n            if(y1 < y2 && (py >= y1 && py < y2) || // upward\n               y1 > y2 && (py < y1 && py >= y2)) { // downward\n                ++crosses;\n            }\n        }\n        var contained = (crosses == -1) ?\n            // on edge\n            1 :\n            // even (out) or odd (in)\n            !!(crosses & 1);\n\n        return contained;\n    },\n\n    /**\n     * APIMethod: intersects\n     * Determine if the input geometry intersects this one.\n     *\n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>} Any type of geometry.\n     *\n     * Returns:\n     * {Boolean} The input geometry intersects this one.\n     */\n    intersects: function(geometry) {\n        var intersect = false;\n        if(geometry.CLASS_NAME == \"OpenLayers.Geometry.Point\") {\n            intersect = this.containsPoint(geometry);\n        } else if(geometry.CLASS_NAME == \"OpenLayers.Geometry.LineString\") {\n            intersect = geometry.intersects(this);\n        } else if(geometry.CLASS_NAME == \"OpenLayers.Geometry.LinearRing\") {\n            intersect = OpenLayers.Geometry.LineString.prototype.intersects.apply(\n                this, [geometry]\n            );\n        } else {\n            // check for component intersections\n            for(var i=0, len=geometry.components.length; i<len; ++ i) {\n                intersect = geometry.components[i].intersects(this);\n                if(intersect) {\n                    break;\n                }\n            }\n        }\n        return intersect;\n    },\n\n    /**\n     * APIMethod: getVertices\n     * Return a list of all points in this geometry.\n     *\n     * Parameters:\n     * nodes - {Boolean} For lines, only return vertices that are\n     *     endpoints.  If false, for lines, only vertices that are not\n     *     endpoints will be returned.  If not provided, all vertices will\n     *     be returned.\n     *\n     * Returns:\n     * {Array} A list of all vertices in the geometry.\n     */\n    getVertices: function(nodes) {\n        return (nodes === true) ? [] : this.components.slice(0, this.components.length-1);\n    },\n\n    CLASS_NAME: \"OpenLayers.Geometry.LinearRing\"\n});\n/* ======================================================================\n    OpenLayers/Geometry/Polygon.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Geometry/Collection.js\n * @requires OpenLayers/Geometry/LinearRing.js\n */\n\n/**\n * Class: OpenLayers.Geometry.Polygon \n * Polygon is a collection of Geometry.LinearRings. \n * \n * Inherits from:\n *  - <OpenLayers.Geometry.Collection> \n *  - <OpenLayers.Geometry> \n */\nOpenLayers.Geometry.Polygon = OpenLayers.Class(\n  OpenLayers.Geometry.Collection, {\n\n    /**\n     * Property: componentTypes\n     * {Array(String)} An array of class names representing the types of\n     * components that the collection can include.  A null value means the\n     * component types are not restricted.\n     */\n    componentTypes: [\"OpenLayers.Geometry.LinearRing\"],\n\n    /**\n     * Constructor: OpenLayers.Geometry.Polygon\n     * Constructor for a Polygon geometry. \n     * The first ring (this.component[0])is the outer bounds of the polygon and \n     * all subsequent rings (this.component[1-n]) are internal holes.\n     *\n     *\n     * Parameters:\n     * components - {Array(<OpenLayers.Geometry.LinearRing>)} \n     */\n\n    /** \n     * APIMethod: getArea\n     * Calculated by subtracting the areas of the internal holes from the \n     *   area of the outer hole.\n     * \n     * Returns:\n     * {float} The area of the geometry\n     */\n    getArea: function() {\n        var area = 0.0;\n        if ( this.components && (this.components.length > 0)) {\n            area += Math.abs(this.components[0].getArea());\n            for (var i=1, len=this.components.length; i<len; i++) {\n                area -= Math.abs(this.components[i].getArea());\n            }\n        }\n        return area;\n    },\n\n    /** \n     * APIMethod: getGeodesicArea\n     * Calculate the approximate area of the polygon were it projected onto\n     *     the earth.\n     *\n     * Parameters:\n     * projection - {<OpenLayers.Projection>} The spatial reference system\n     *     for the geometry coordinates.  If not provided, Geographic/WGS84 is\n     *     assumed.\n     * \n     * Reference:\n     * Robert. G. Chamberlain and William H. Duquette, \"Some Algorithms for\n     *     Polygons on a Sphere\", JPL Publication 07-03, Jet Propulsion\n     *     Laboratory, Pasadena, CA, June 2007 http://trs-new.jpl.nasa.gov/dspace/handle/2014/40409\n     *\n     * Returns:\n     * {float} The approximate geodesic area of the polygon in square meters.\n     */\n    getGeodesicArea: function(projection) {\n        var area = 0.0;\n        if(this.components && (this.components.length > 0)) {\n            area += Math.abs(this.components[0].getGeodesicArea(projection));\n            for(var i=1, len=this.components.length; i<len; i++) {\n                area -= Math.abs(this.components[i].getGeodesicArea(projection));\n            }\n        }\n        return area;\n    },\n\n    /**\n     * Method: containsPoint\n     * Test if a point is inside a polygon.  Points on a polygon edge are\n     *     considered inside.\n     *\n     * Parameters:\n     * point - {<OpenLayers.Geometry.Point>}\n     *\n     * Returns:\n     * {Boolean | Number} The point is inside the polygon.  Returns 1 if the\n     *     point is on an edge.  Returns boolean otherwise.\n     */\n    containsPoint: function(point) {\n        var numRings = this.components.length;\n        var contained = false;\n        if(numRings > 0) {\n            // check exterior ring - 1 means on edge, boolean otherwise\n            contained = this.components[0].containsPoint(point);\n            if(contained !== 1) {\n                if(contained && numRings > 1) {\n                    // check interior rings\n                    var hole;\n                    for(var i=1; i<numRings; ++i) {\n                        hole = this.components[i].containsPoint(point);\n                        if(hole) {\n                            if(hole === 1) {\n                                // on edge\n                                contained = 1;\n                            } else {\n                                // in hole\n                                contained = false;\n                            }                            \n                            break;\n                        }\n                    }\n                }\n            }\n        }\n        return contained;\n    },\n\n    /**\n     * APIMethod: intersects\n     * Determine if the input geometry intersects this one.\n     *\n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>} Any type of geometry.\n     *\n     * Returns:\n     * {Boolean} The input geometry intersects this one.\n     */\n    intersects: function(geometry) {\n        var intersect = false;\n        var i, len;\n        if(geometry.CLASS_NAME == \"OpenLayers.Geometry.Point\") {\n            intersect = this.containsPoint(geometry);\n        } else if(geometry.CLASS_NAME == \"OpenLayers.Geometry.LineString\" ||\n                  geometry.CLASS_NAME == \"OpenLayers.Geometry.LinearRing\") {\n            // check if rings/linestrings intersect\n            for(i=0, len=this.components.length; i<len; ++i) {\n                intersect = geometry.intersects(this.components[i]);\n                if(intersect) {\n                    break;\n                }\n            }\n            if(!intersect) {\n                // check if this poly contains points of the ring/linestring\n                for(i=0, len=geometry.components.length; i<len; ++i) {\n                    intersect = this.containsPoint(geometry.components[i]);\n                    if(intersect) {\n                        break;\n                    }\n                }\n            }\n        } else {\n            for(i=0, len=geometry.components.length; i<len; ++ i) {\n                intersect = this.intersects(geometry.components[i]);\n                if(intersect) {\n                    break;\n                }\n            }\n        }\n        // check case where this poly is wholly contained by another\n        if(!intersect && geometry.CLASS_NAME == \"OpenLayers.Geometry.Polygon\") {\n            // exterior ring points will be contained in the other geometry\n            var ring = this.components[0];\n            for(i=0, len=ring.components.length; i<len; ++i) {\n                intersect = geometry.containsPoint(ring.components[i]);\n                if(intersect) {\n                    break;\n                }\n            }\n        }\n        return intersect;\n    },\n\n    /**\n     * APIMethod: distanceTo\n     * Calculate the closest distance between two geometries (on the x-y plane).\n     *\n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>} The target geometry.\n     * options - {Object} Optional properties for configuring the distance\n     *     calculation.\n     *\n     * Valid options:\n     * details - {Boolean} Return details from the distance calculation.\n     *     Default is false.\n     * edge - {Boolean} Calculate the distance from this geometry to the\n     *     nearest edge of the target geometry.  Default is true.  If true,\n     *     calling distanceTo from a geometry that is wholly contained within\n     *     the target will result in a non-zero distance.  If false, whenever\n     *     geometries intersect, calling distanceTo will return 0.  If false,\n     *     details cannot be returned.\n     *\n     * Returns:\n     * {Number | Object} The distance between this geometry and the target.\n     *     If details is true, the return will be an object with distance,\n     *     x0, y0, x1, and y1 properties.  The x0 and y0 properties represent\n     *     the coordinates of the closest point on this geometry. The x1 and y1\n     *     properties represent the coordinates of the closest point on the\n     *     target geometry.\n     */\n    distanceTo: function(geometry, options) {\n        var edge = !(options && options.edge === false);\n        var result;\n        // this is the case where we might not be looking for distance to edge\n        if(!edge && this.intersects(geometry)) {\n            result = 0;\n        } else {\n            result = OpenLayers.Geometry.Collection.prototype.distanceTo.apply(\n                this, [geometry, options]\n            );\n        }\n        return result;\n    },\n\n    CLASS_NAME: \"OpenLayers.Geometry.Polygon\"\n});\n\n/**\n * APIMethod: createRegularPolygon\n * Create a regular polygon around a radius. Useful for creating circles \n * and the like.\n *\n * Parameters:\n * origin - {<OpenLayers.Geometry.Point>} center of polygon.\n * radius - {Float} distance to vertex, in map units.\n * sides - {Integer} Number of sides. 20 approximates a circle.\n * rotation - {Float} original angle of rotation, in degrees.\n */\nOpenLayers.Geometry.Polygon.createRegularPolygon = function(origin, radius, sides, rotation) {  \n    var angle = Math.PI * ((1/sides) - (1/2));\n    if(rotation) {\n        angle += (rotation / 180) * Math.PI;\n    }\n    var rotatedAngle, x, y;\n    var points = [];\n    for(var i=0; i<sides; ++i) {\n        rotatedAngle = angle + (i * 2 * Math.PI / sides);\n        x = origin.x + (radius * Math.cos(rotatedAngle));\n        y = origin.y + (radius * Math.sin(rotatedAngle));\n        points.push(new OpenLayers.Geometry.Point(x, y));\n    }\n    var ring = new OpenLayers.Geometry.LinearRing(points);\n    return new OpenLayers.Geometry.Polygon([ring]);\n};\n/* ======================================================================\n    OpenLayers/Feature.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/BaseTypes/Class.js\n * @requires OpenLayers/Util.js\n */\n\n/**\n * Class: OpenLayers.Feature\n * Features are combinations of geography and attributes. The OpenLayers.Feature\n *     class specifically combines a marker and a lonlat.\n */\nOpenLayers.Feature = OpenLayers.Class({\n\n    /** \n     * Property: layer \n     * {<OpenLayers.Layer>} \n     */\n    layer: null,\n\n    /** \n     * Property: id \n     * {String} \n     */\n    id: null,\n    \n    /** \n     * Property: lonlat \n     * {<OpenLayers.LonLat>} \n     */\n    lonlat: null,\n\n    /** \n     * Property: data \n     * {Object} \n     */\n    data: null,\n\n    /** \n     * Property: marker \n     * {<OpenLayers.Marker>} \n     */\n    marker: null,\n\n    /**\n     * APIProperty: popupClass\n     * {<OpenLayers.Class>} The class which will be used to instantiate\n     *     a new Popup. Default is <OpenLayers.Popup.Anchored>.\n     */\n    popupClass: null,\n\n    /** \n     * Property: popup \n     * {<OpenLayers.Popup>} \n     */\n    popup: null,\n\n    /** \n     * Constructor: OpenLayers.Feature\n     * Constructor for features.\n     *\n     * Parameters:\n     * layer - {<OpenLayers.Layer>} \n     * lonlat - {<OpenLayers.LonLat>} \n     * data - {Object} \n     * \n     * Returns:\n     * {<OpenLayers.Feature>}\n     */\n    initialize: function(layer, lonlat, data) {\n        this.layer = layer;\n        this.lonlat = lonlat;\n        this.data = (data != null) ? data : {};\n        this.id = OpenLayers.Util.createUniqueID(this.CLASS_NAME + \"_\"); \n    },\n\n    /** \n     * Method: destroy\n     * nullify references to prevent circular references and memory leaks\n     */\n    destroy: function() {\n\n        //remove the popup from the map\n        if ((this.layer != null) && (this.layer.map != null)) {\n            if (this.popup != null) {\n                this.layer.map.removePopup(this.popup);\n            }\n        }\n        // remove the marker from the layer\n        if (this.layer != null && this.marker != null) {\n            this.layer.removeMarker(this.marker);\n        }\n\n        this.layer = null;\n        this.id = null;\n        this.lonlat = null;\n        this.data = null;\n        if (this.marker != null) {\n            this.destroyMarker(this.marker);\n            this.marker = null;\n        }\n        if (this.popup != null) {\n            this.destroyPopup(this.popup);\n            this.popup = null;\n        }\n    },\n    \n    /**\n     * Method: onScreen\n     * \n     * Returns:\n     * {Boolean} Whether or not the feature is currently visible on screen\n     *           (based on its 'lonlat' property)\n     */\n    onScreen:function() {\n        \n        var onScreen = false;\n        if ((this.layer != null) && (this.layer.map != null)) {\n            var screenBounds = this.layer.map.getExtent();\n            onScreen = screenBounds.containsLonLat(this.lonlat);\n        }    \n        return onScreen;\n    },\n    \n\n    /**\n     * Method: createMarker\n     * Based on the data associated with the Feature, create and return a marker object.\n     *\n     * Returns: \n     * {<OpenLayers.Marker>} A Marker Object created from the 'lonlat' and 'icon' properties\n     *          set in this.data. If no 'lonlat' is set, returns null. If no\n     *          'icon' is set, OpenLayers.Marker() will load the default image.\n     *          \n     *          Note - this.marker is set to return value\n     * \n     */\n    createMarker: function() {\n\n        if (this.lonlat != null) {\n            this.marker = new OpenLayers.Marker(this.lonlat, this.data.icon);\n        }\n        return this.marker;\n    },\n\n    /**\n     * Method: destroyMarker\n     * Destroys marker.\n     * If user overrides the createMarker() function, s/he should be able\n     *   to also specify an alternative function for destroying it\n     */\n    destroyMarker: function() {\n        this.marker.destroy();  \n    },\n\n    /**\n     * Method: createPopup\n     * Creates a popup object created from the 'lonlat', 'popupSize',\n     *     and 'popupContentHTML' properties set in this.data. It uses\n     *     this.marker.icon as default anchor. \n     *  \n     *  If no 'lonlat' is set, returns null. \n     *  If no this.marker has been created, no anchor is sent.\n     *\n     *  Note - the returned popup object is 'owned' by the feature, so you\n     *      cannot use the popup's destroy method to discard the popup.\n     *      Instead, you must use the feature's destroyPopup\n     * \n     *  Note - this.popup is set to return value\n     * \n     * Parameters: \n     * closeBox - {Boolean} create popup with closebox or not\n     * \n     * Returns:\n     * {<OpenLayers.Popup>} Returns the created popup, which is also set\n     *     as 'popup' property of this feature. Will be of whatever type\n     *     specified by this feature's 'popupClass' property, but must be\n     *     of type <OpenLayers.Popup>.\n     * \n     */\n    createPopup: function(closeBox) {\n\n        if (this.lonlat != null) {\n            if (!this.popup) {\n                var anchor = (this.marker) ? this.marker.icon : null;\n                var popupClass = this.popupClass ? \n                    this.popupClass : OpenLayers.Popup.Anchored;\n                this.popup = new popupClass(this.id + \"_popup\", \n                                            this.lonlat,\n                                            this.data.popupSize,\n                                            this.data.popupContentHTML,\n                                            anchor, \n                                            closeBox); \n            }    \n            if (this.data.overflow != null) {\n                this.popup.contentDiv.style.overflow = this.data.overflow;\n            }    \n            \n            this.popup.feature = this;\n        }        \n        return this.popup;\n    },\n\n    \n    /**\n     * Method: destroyPopup\n     * Destroys the popup created via createPopup.\n     *\n     * As with the marker, if user overrides the createPopup() function, s/he \n     *   should also be able to override the destruction\n     */\n    destroyPopup: function() {\n        if (this.popup) {\n            this.popup.feature = null;\n            this.popup.destroy();\n            this.popup = null;\n        }    \n    },\n\n    CLASS_NAME: \"OpenLayers.Feature\"\n});\n/* ======================================================================\n    OpenLayers/Feature/Vector.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n// TRASH THIS\nOpenLayers.State = {\n    /** states */\n    UNKNOWN: 'Unknown',\n    INSERT: 'Insert',\n    UPDATE: 'Update',\n    DELETE: 'Delete'\n};\n\n/**\n * @requires OpenLayers/Feature.js\n * @requires OpenLayers/Util.js\n */\n\n/**\n * Class: OpenLayers.Feature.Vector\n * Vector features use the OpenLayers.Geometry classes as geometry description.\n * They have an 'attributes' property, which is the data object, and a 'style'\n * property, the default values of which are defined in the \n * <OpenLayers.Feature.Vector.style> objects.\n * \n * Inherits from:\n *  - <OpenLayers.Feature>\n */\nOpenLayers.Feature.Vector = OpenLayers.Class(OpenLayers.Feature, {\n\n    /** \n     * Property: fid \n     * {String} \n     */\n    fid: null,\n    \n    /** \n     * APIProperty: geometry \n     * {<OpenLayers.Geometry>} \n     */\n    geometry: null,\n\n    /** \n     * APIProperty: attributes \n     * {Object} This object holds arbitrary, serializable properties that\n     *     describe the feature.\n     */\n    attributes: null,\n\n    /**\n     * Property: bounds\n     * {<OpenLayers.Bounds>} The box bounding that feature's geometry, that\n     *     property can be set by an <OpenLayers.Format> object when\n     *     deserializing the feature, so in most cases it represents an\n     *     information set by the server. \n     */\n    bounds: null,\n\n    /** \n     * Property: state \n     * {String} \n     */\n    state: null,\n    \n    /** \n     * APIProperty: style \n     * {Object} \n     */\n    style: null,\n\n    /**\n     * APIProperty: url\n     * {String} If this property is set it will be taken into account by\n     *     {<OpenLayers.HTTP>} when updating or deleting the feature.\n     */\n    url: null,\n    \n    /**\n     * Property: renderIntent\n     * {String} rendering intent currently being used\n     */\n    renderIntent: \"default\",\n    \n    /**\n     * APIProperty: modified\n     * {Object} An object with the originals of the geometry and attributes of\n     * the feature, if they were changed. Currently this property is only read\n     * by <OpenLayers.Format.WFST.v1>, and written by\n     * <OpenLayers.Control.ModifyFeature>, which sets the geometry property.\n     * Applications can set the originals of modified attributes in the\n     * attributes property. Note that applications have to check if this\n     * object and the attributes property is already created before using it.\n     * After a change made with ModifyFeature, this object could look like\n     *\n     * (code)\n     * {\n     *     geometry: >Object\n     * }\n     * (end)\n     *\n     * When an application has made changes to feature attributes, it could\n     * have set the attributes to something like this:\n     *\n     * (code)\n     * {\n     *     attributes: {\n     *         myAttribute: \"original\"\n     *     }\n     * }\n     * (end)\n     *\n     * Note that <OpenLayers.Format.WFST.v1> only checks for truthy values in\n     * *modified.geometry* and the attribute names in *modified.attributes*,\n     * but it is recommended to set the original values (and not just true) as\n     * attribute value, so applications could use this information to undo\n     * changes.\n     */\n    modified: null,\n\n    /** \n     * Constructor: OpenLayers.Feature.Vector\n     * Create a vector feature. \n     * \n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>} The geometry that this feature\n     *     represents.\n     * attributes - {Object} An optional object that will be mapped to the\n     *     <attributes> property. \n     * style - {Object} An optional style object.\n     */\n    initialize: function(geometry, attributes, style) {\n        OpenLayers.Feature.prototype.initialize.apply(this,\n                                                      [null, null, attributes]);\n        this.lonlat = null;\n        this.geometry = geometry ? geometry : null;\n        this.state = null;\n        this.attributes = {};\n        if (attributes) {\n            this.attributes = OpenLayers.Util.extend(this.attributes,\n                                                     attributes);\n        }\n        this.style = style ? style : null; \n    },\n    \n    /** \n     * Method: destroy\n     * nullify references to prevent circular references and memory leaks\n     */\n    destroy: function() {\n        if (this.layer) {\n            this.layer.removeFeatures(this);\n            this.layer = null;\n        }\n            \n        this.geometry = null;\n        this.modified = null;\n        OpenLayers.Feature.prototype.destroy.apply(this, arguments);\n    },\n    \n    /**\n     * Method: clone\n     * Create a clone of this vector feature.  Does not set any non-standard\n     *     properties.\n     *\n     * Returns:\n     * {<OpenLayers.Feature.Vector>} An exact clone of this vector feature.\n     */\n    clone: function () {\n        return new OpenLayers.Feature.Vector(\n            this.geometry ? this.geometry.clone() : null,\n            this.attributes,\n            this.style);\n    },\n\n    /**\n     * Method: onScreen\n     * Determine whether the feature is within the map viewport.  This method\n     *     tests for an intersection between the geometry and the viewport\n     *     bounds.  If a more efficient but less precise geometry bounds\n     *     intersection is desired, call the method with the boundsOnly\n     *     parameter true.\n     *\n     * Parameters:\n     * boundsOnly - {Boolean} Only test whether a feature's bounds intersects\n     *     the viewport bounds.  Default is false.  If false, the feature's\n     *     geometry must intersect the viewport for onScreen to return true.\n     * \n     * Returns:\n     * {Boolean} The feature is currently visible on screen (optionally\n     *     based on its bounds if boundsOnly is true).\n     */\n    onScreen:function(boundsOnly) {\n        var onScreen = false;\n        if(this.layer && this.layer.map) {\n            var screenBounds = this.layer.map.getExtent();\n            if(boundsOnly) {\n                var featureBounds = this.geometry.getBounds();\n                onScreen = screenBounds.intersectsBounds(featureBounds);\n            } else {\n                var screenPoly = screenBounds.toGeometry();\n                onScreen = screenPoly.intersects(this.geometry);\n            }\n        }    \n        return onScreen;\n    },\n\n    /**\n     * Method: getVisibility\n     * Determine whether the feature is displayed or not. It may not displayed\n     *     because:\n     *     - its style display property is set to 'none',\n     *     - it doesn't belong to any layer,\n     *     - the styleMap creates a symbolizer with display property set to 'none'\n     *          for it,\n     *     - the layer which it belongs to is not visible.\n     * \n     * Returns:\n     * {Boolean} The feature is currently displayed.\n     */\n    getVisibility: function() {\n        return !(this.style && this.style.display == 'none' ||\n                 !this.layer ||\n                 this.layer && this.layer.styleMap &&\n                 this.layer.styleMap.createSymbolizer(this, this.renderIntent).display == 'none' ||\n                 this.layer && !this.layer.getVisibility());\n    },\n    \n    /**\n     * Method: createMarker\n     * HACK - we need to decide if all vector features should be able to\n     *     create markers\n     * \n     * Returns:\n     * {<OpenLayers.Marker>} For now just returns null\n     */\n    createMarker: function() {\n        return null;\n    },\n\n    /**\n     * Method: destroyMarker\n     * HACK - we need to decide if all vector features should be able to\n     *     delete markers\n     * \n     * If user overrides the createMarker() function, s/he should be able\n     *   to also specify an alternative function for destroying it\n     */\n    destroyMarker: function() {\n        // pass\n    },\n\n    /**\n     * Method: createPopup\n     * HACK - we need to decide if all vector features should be able to\n     *     create popups\n     * \n     * Returns:\n     * {<OpenLayers.Popup>} For now just returns null\n     */\n    createPopup: function() {\n        return null;\n    },\n\n    /**\n     * Method: atPoint\n     * Determins whether the feature intersects with the specified location.\n     * \n     * Parameters: \n     * lonlat - {<OpenLayers.LonLat>|Object} OpenLayers.LonLat or an\n     *     object with a 'lon' and 'lat' properties.\n     * toleranceLon - {float} Optional tolerance in Geometric Coords\n     * toleranceLat - {float} Optional tolerance in Geographic Coords\n     * \n     * Returns:\n     * {Boolean} Whether or not the feature is at the specified location\n     */\n    atPoint: function(lonlat, toleranceLon, toleranceLat) {\n        var atPoint = false;\n        if(this.geometry) {\n            atPoint = this.geometry.atPoint(lonlat, toleranceLon, \n                                                    toleranceLat);\n        }\n        return atPoint;\n    },\n\n    /**\n     * Method: destroyPopup\n     * HACK - we need to decide if all vector features should be able to\n     * delete popups\n     */\n    destroyPopup: function() {\n        // pass\n    },\n\n    /**\n     * Method: move\n     * Moves the feature and redraws it at its new location\n     *\n     * Parameters:\n     * location - {<OpenLayers.LonLat> or <OpenLayers.Pixel>} the\n     *         location to which to move the feature.\n     */\n    move: function(location) {\n\n        if(!this.layer || !this.geometry.move){\n            //do nothing if no layer or immoveable geometry\n            return undefined;\n        }\n\n        var pixel;\n        if (location.CLASS_NAME == \"OpenLayers.LonLat\") {\n            pixel = this.layer.getViewPortPxFromLonLat(location);\n        } else {\n            pixel = location;\n        }\n        \n        var lastPixel = this.layer.getViewPortPxFromLonLat(this.geometry.getBounds().getCenterLonLat());\n        var res = this.layer.map.getResolution();\n        this.geometry.move(res * (pixel.x - lastPixel.x),\n                           res * (lastPixel.y - pixel.y));\n        this.layer.drawFeature(this);\n        return lastPixel;\n    },\n    \n    /**\n     * Method: toState\n     * Sets the new state\n     *\n     * Parameters:\n     * state - {String} \n     */\n    toState: function(state) {\n        if (state == OpenLayers.State.UPDATE) {\n            switch (this.state) {\n                case OpenLayers.State.UNKNOWN:\n                case OpenLayers.State.DELETE:\n                    this.state = state;\n                    break;\n                case OpenLayers.State.UPDATE:\n                case OpenLayers.State.INSERT:\n                    break;\n            }\n        } else if (state == OpenLayers.State.INSERT) {\n            switch (this.state) {\n                case OpenLayers.State.UNKNOWN:\n                    break;\n                default:\n                    this.state = state;\n                    break;\n            }\n        } else if (state == OpenLayers.State.DELETE) {\n            switch (this.state) {\n                case OpenLayers.State.INSERT:\n                    // the feature should be destroyed\n                    break;\n                case OpenLayers.State.DELETE:\n                    break;\n                case OpenLayers.State.UNKNOWN:\n                case OpenLayers.State.UPDATE:\n                    this.state = state;\n                    break;\n            }\n        } else if (state == OpenLayers.State.UNKNOWN) {\n            this.state = state;\n        }\n    },\n    \n    CLASS_NAME: \"OpenLayers.Feature.Vector\"\n});\n\n\n/**\n * Constant: OpenLayers.Feature.Vector.style\n * OpenLayers features can have a number of style attributes. The 'default' \n *     style will typically be used if no other style is specified. These\n *     styles correspond for the most part, to the styling properties defined\n *     by the SVG standard. \n *     Information on fill properties: http://www.w3.org/TR/SVG/painting.html#FillProperties\n *     Information on stroke properties: http://www.w3.org/TR/SVG/painting.html#StrokeProperties\n *\n * Symbolizer properties:\n * fill - {Boolean} Set to false if no fill is desired.\n * fillColor - {String} Hex fill color.  Default is \"#ee9900\".\n * fillOpacity - {Number} Fill opacity (0-1).  Default is 0.4 \n * stroke - {Boolean} Set to false if no stroke is desired.\n * strokeColor - {String} Hex stroke color.  Default is \"#ee9900\".\n * strokeOpacity - {Number} Stroke opacity (0-1).  Default is 1.\n * strokeWidth - {Number} Pixel stroke width.  Default is 1.\n * strokeLinecap - {String} Stroke cap type.  Default is \"round\".  [butt | round | square]\n * strokeDashstyle - {String} Stroke dash style.  Default is \"solid\". [dot | dash | dashdot | longdash | longdashdot | solid]\n * graphic - {Boolean} Set to false if no graphic is desired.\n * pointRadius - {Number} Pixel point radius.  Default is 6.\n * pointerEvents - {String}  Default is \"visiblePainted\".\n * cursor - {String} Default is \"\".\n * externalGraphic - {String} Url to an external graphic that will be used for rendering points.\n * graphicWidth - {Number} Pixel width for sizing an external graphic.\n * graphicHeight - {Number} Pixel height for sizing an external graphic.\n * graphicOpacity - {Number} Opacity (0-1) for an external graphic.\n * graphicXOffset - {Number} Pixel offset along the positive x axis for displacing an external graphic.\n * graphicYOffset - {Number} Pixel offset along the positive y axis for displacing an external graphic.\n * rotation - {Number} For point symbolizers, this is the rotation of a graphic in the clockwise direction about its center point (or any point off center as specified by graphicXOffset and graphicYOffset).\n * graphicZIndex - {Number} The integer z-index value to use in rendering.\n * graphicName - {String} Named graphic to use when rendering points.  Supported values include \"circle\" (default),\n *     \"square\", \"star\", \"x\", \"cross\", \"triangle\".\n * graphicTitle - {String} Tooltip when hovering over a feature. *deprecated*, use title instead\n * title - {String} Tooltip when hovering over a feature. Not supported by the canvas renderer.\n * backgroundGraphic - {String} Url to a graphic to be used as the background under an externalGraphic.\n * backgroundGraphicZIndex - {Number} The integer z-index value to use in rendering the background graphic.\n * backgroundXOffset - {Number} The x offset (in pixels) for the background graphic.\n * backgroundYOffset - {Number} The y offset (in pixels) for the background graphic.\n * backgroundHeight - {Number} The height of the background graphic.  If not provided, the graphicHeight will be used.\n * backgroundWidth - {Number} The width of the background width.  If not provided, the graphicWidth will be used.\n * label - {String} The text for an optional label. For browsers that use the canvas renderer, this requires either\n *     fillText or mozDrawText to be available.\n * labelAlign - {String} Label alignment. This specifies the insertion point relative to the text. It is a string\n *     composed of two characters. The first character is for the horizontal alignment, the second for the vertical\n *     alignment. Valid values for horizontal alignment: \"l\"=left, \"c\"=center, \"r\"=right. Valid values for vertical\n *     alignment: \"t\"=top, \"m\"=middle, \"b\"=bottom. Example values: \"lt\", \"cm\", \"rb\". Default is \"cm\".\n * labelXOffset - {Number} Pixel offset along the positive x axis for displacing the label. Not supported by the canvas renderer.\n * labelYOffset - {Number} Pixel offset along the positive y axis for displacing the label. Not supported by the canvas renderer.\n * labelSelect - {Boolean} If set to true, labels will be selectable using SelectFeature or similar controls.\n *     Default is false.\n * labelOutlineColor - {String} The color of the label outline. Default is 'white'. Only supported by the canvas & SVG renderers.\n * labelOutlineWidth - {Number} The width of the label outline. Default is 3, set to 0 or null to disable. Only supported by the  SVG renderers.\n * labelOutlineOpacity - {Number} The opacity (0-1) of the label outline. Default is fontOpacity. Only supported by the canvas & SVG renderers.\n * fontColor - {String} The font color for the label, to be provided like CSS.\n * fontOpacity - {Number} Opacity (0-1) for the label\n * fontFamily - {String} The font family for the label, to be provided like in CSS.\n * fontSize - {String} The font size for the label, to be provided like in CSS.\n * fontStyle - {String} The font style for the label, to be provided like in CSS.\n * fontWeight - {String} The font weight for the label, to be provided like in CSS.\n * display - {String} Symbolizers will have no effect if display is set to \"none\".  All other values have no effect.\n */ \nOpenLayers.Feature.Vector.style = {\n    'default': {\n        fillColor: \"#ee9900\",\n        fillOpacity: 0.4, \n        hoverFillColor: \"white\",\n        hoverFillOpacity: 0.8,\n        strokeColor: \"#ee9900\",\n        strokeOpacity: 1,\n        strokeWidth: 1,\n        strokeLinecap: \"round\",\n        strokeDashstyle: \"solid\",\n        hoverStrokeColor: \"red\",\n        hoverStrokeOpacity: 1,\n        hoverStrokeWidth: 0.2,\n        pointRadius: 6,\n        hoverPointRadius: 1,\n        hoverPointUnit: \"%\",\n        pointerEvents: \"visiblePainted\",\n        cursor: \"inherit\",\n        fontColor: \"#000000\",\n        labelAlign: \"cm\",\n        labelOutlineColor: \"white\",\n        labelOutlineWidth: 3\n    },\n    'select': {\n        fillColor: \"blue\",\n        fillOpacity: 0.4, \n        hoverFillColor: \"white\",\n        hoverFillOpacity: 0.8,\n        strokeColor: \"blue\",\n        strokeOpacity: 1,\n        strokeWidth: 2,\n        strokeLinecap: \"round\",\n        strokeDashstyle: \"solid\",\n        hoverStrokeColor: \"red\",\n        hoverStrokeOpacity: 1,\n        hoverStrokeWidth: 0.2,\n        pointRadius: 6,\n        hoverPointRadius: 1,\n        hoverPointUnit: \"%\",\n        pointerEvents: \"visiblePainted\",\n        cursor: \"pointer\",\n        fontColor: \"#000000\",\n        labelAlign: \"cm\",\n        labelOutlineColor: \"white\",\n        labelOutlineWidth: 3\n\n    },\n    'temporary': {\n        fillColor: \"#66cccc\",\n        fillOpacity: 0.2, \n        hoverFillColor: \"white\",\n        hoverFillOpacity: 0.8,\n        strokeColor: \"#66cccc\",\n        strokeOpacity: 1,\n        strokeLinecap: \"round\",\n        strokeWidth: 2,\n        strokeDashstyle: \"solid\",\n        hoverStrokeColor: \"red\",\n        hoverStrokeOpacity: 1,\n        hoverStrokeWidth: 0.2,\n        pointRadius: 6,\n        hoverPointRadius: 1,\n        hoverPointUnit: \"%\",\n        pointerEvents: \"visiblePainted\",\n        cursor: \"inherit\",\n        fontColor: \"#000000\",\n        labelAlign: \"cm\",\n        labelOutlineColor: \"white\",\n        labelOutlineWidth: 3\n\n    },\n    'delete': {\n        display: \"none\"\n    }\n};    \n/* ======================================================================\n    OpenLayers/Style.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/BaseTypes/Class.js\n * @requires OpenLayers/Util.js\n * @requires OpenLayers/Feature/Vector.js\n */\n\n/**\n * Class: OpenLayers.Style\n * This class represents a UserStyle obtained\n *     from a SLD, containing styling rules.\n */\nOpenLayers.Style = OpenLayers.Class({\n\n    /**\n     * Property: id\n     * {String} A unique id for this session.\n     */\n    id: null,\n    \n    /**\n     * APIProperty: name\n     * {String}\n     */\n    name: null,\n    \n    /**\n     * Property: title\n     * {String} Title of this style (set if included in SLD)\n     */\n    title: null,\n    \n    /**\n     * Property: description\n     * {String} Description of this style (set if abstract is included in SLD)\n     */\n    description: null,\n\n    /**\n     * APIProperty: layerName\n     * {<String>} name of the layer that this style belongs to, usually\n     * according to the NamedLayer attribute of an SLD document.\n     */\n    layerName: null,\n    \n    /**\n     * APIProperty: isDefault\n     * {Boolean}\n     */\n    isDefault: false,\n     \n    /** \n     * Property: rules \n     * {Array(<OpenLayers.Rule>)}\n     */\n    rules: null,\n    \n    /**\n     * APIProperty: context\n     * {Object} An optional object with properties that symbolizers' property\n     * values should be evaluated against. If no context is specified,\n     * feature.attributes will be used\n     */\n    context: null,\n\n    /**\n     * Property: defaultStyle\n     * {Object} hash of style properties to use as default for merging\n     * rule-based style symbolizers onto. If no rules are defined,\n     * createSymbolizer will return this style. If <defaultsPerSymbolizer> is set to\n     * true, the defaultStyle will only be taken into account if there are\n     * rules defined.\n     */\n    defaultStyle: null,\n    \n    /**\n     * Property: defaultsPerSymbolizer\n     * {Boolean} If set to true, the <defaultStyle> will extend the symbolizer\n     * of every rule. Properties of the <defaultStyle> will also be used to set\n     * missing symbolizer properties if the symbolizer has stroke, fill or\n     * graphic set to true. Default is false.\n     */\n    defaultsPerSymbolizer: false,\n    \n    /**\n     * Property: propertyStyles\n     * {Hash of Boolean} cache of style properties that need to be parsed for\n     * propertyNames. Property names are keys, values won't be used.\n     */\n    propertyStyles: null,\n    \n\n    /** \n     * Constructor: OpenLayers.Style\n     * Creates a UserStyle.\n     *\n     * Parameters:\n     * style        - {Object} Optional hash of style properties that will be\n     *                used as default style for this style object. This style\n     *                applies if no rules are specified. Symbolizers defined in\n     *                rules will extend this default style.\n     * options - {Object} An optional object with properties to set on the\n     *     style.\n     *\n     * Valid options:\n     * rules - {Array(<OpenLayers.Rule>)} List of rules to be added to the\n     *     style.\n     * \n     * Returns:\n     * {<OpenLayers.Style>}\n     */\n    initialize: function(style, options) {\n\n        OpenLayers.Util.extend(this, options);\n        this.rules = [];\n        if(options && options.rules) {\n            this.addRules(options.rules);\n        }\n\n        // use the default style from OpenLayers.Feature.Vector if no style\n        // was given in the constructor\n        this.setDefaultStyle(style ||\n                             OpenLayers.Feature.Vector.style[\"default\"]);\n\n        this.id = OpenLayers.Util.createUniqueID(this.CLASS_NAME + \"_\");\n    },\n\n    /** \n     * APIMethod: destroy\n     * nullify references to prevent circular references and memory leaks\n     */\n    destroy: function() {\n        for (var i=0, len=this.rules.length; i<len; i++) {\n            this.rules[i].destroy();\n            this.rules[i] = null;\n        }\n        this.rules = null;\n        this.defaultStyle = null;\n    },\n    \n    /**\n     * Method: createSymbolizer\n     * creates a style by applying all feature-dependent rules to the base\n     * style.\n     * \n     * Parameters:\n     * feature - {<OpenLayers.Feature>} feature to evaluate rules for\n     * \n     * Returns:\n     * {Object} symbolizer hash\n     */\n    createSymbolizer: function(feature) {\n        var style = this.defaultsPerSymbolizer ? {} : this.createLiterals(\n            OpenLayers.Util.extend({}, this.defaultStyle), feature);\n        \n        var rules = this.rules;\n\n        var rule, context;\n        var elseRules = [];\n        var appliedRules = false;\n        for(var i=0, len=rules.length; i<len; i++) {\n            rule = rules[i];\n            // does the rule apply?\n            var applies = rule.evaluate(feature);\n            \n            if(applies) {\n                if(rule instanceof OpenLayers.Rule && rule.elseFilter) {\n                    elseRules.push(rule);\n                } else {\n                    appliedRules = true;\n                    this.applySymbolizer(rule, style, feature);\n                }\n            }\n        }\n        \n        // if no other rules apply, apply the rules with else filters\n        if(appliedRules == false && elseRules.length > 0) {\n            appliedRules = true;\n            for(var i=0, len=elseRules.length; i<len; i++) {\n                this.applySymbolizer(elseRules[i], style, feature);\n            }\n        }\n\n        // don't display if there were rules but none applied\n        if(rules.length > 0 && appliedRules == false) {\n            style.display = \"none\";\n        }\n        \n        if (style.label != null && typeof style.label !== \"string\") {\n            style.label = String(style.label);\n        }\n        \n        return style;\n    },\n    \n    /**\n     * Method: applySymbolizer\n     *\n     * Parameters:\n     * rule - {<OpenLayers.Rule>}\n     * style - {Object}\n     * feature - {<OpenLayer.Feature.Vector>}\n     *\n     * Returns:\n     * {Object} A style with new symbolizer applied.\n     */\n    applySymbolizer: function(rule, style, feature) {\n        var symbolizerPrefix = feature.geometry ?\n                this.getSymbolizerPrefix(feature.geometry) :\n                OpenLayers.Style.SYMBOLIZER_PREFIXES[0];\n\n        var symbolizer = rule.symbolizer[symbolizerPrefix] || rule.symbolizer;\n        \n        if(this.defaultsPerSymbolizer === true) {\n            var defaults = this.defaultStyle;\n            OpenLayers.Util.applyDefaults(symbolizer, {\n                pointRadius: defaults.pointRadius\n            });\n            if(symbolizer.stroke === true || symbolizer.graphic === true) {\n                OpenLayers.Util.applyDefaults(symbolizer, {\n                    strokeWidth: defaults.strokeWidth,\n                    strokeColor: defaults.strokeColor,\n                    strokeOpacity: defaults.strokeOpacity,\n                    strokeDashstyle: defaults.strokeDashstyle,\n                    strokeLinecap: defaults.strokeLinecap\n                });\n            }\n            if(symbolizer.fill === true || symbolizer.graphic === true) {\n                OpenLayers.Util.applyDefaults(symbolizer, {\n                    fillColor: defaults.fillColor,\n                    fillOpacity: defaults.fillOpacity\n                });\n            }\n            if(symbolizer.graphic === true) {\n                OpenLayers.Util.applyDefaults(symbolizer, {\n                    pointRadius: this.defaultStyle.pointRadius,\n                    externalGraphic: this.defaultStyle.externalGraphic,\n                    graphicName: this.defaultStyle.graphicName,\n                    graphicOpacity: this.defaultStyle.graphicOpacity,\n                    graphicWidth: this.defaultStyle.graphicWidth,\n                    graphicHeight: this.defaultStyle.graphicHeight,\n                    graphicXOffset: this.defaultStyle.graphicXOffset,\n                    graphicYOffset: this.defaultStyle.graphicYOffset\n                });\n            }\n        }\n\n        // merge the style with the current style\n        return this.createLiterals(\n                OpenLayers.Util.extend(style, symbolizer), feature);\n    },\n    \n    /**\n     * Method: createLiterals\n     * creates literals for all style properties that have an entry in\n     * <this.propertyStyles>.\n     * \n     * Parameters:\n     * style   - {Object} style to create literals for. Will be modified\n     *           inline.\n     * feature - {Object}\n     * \n     * Returns:\n     * {Object} the modified style\n     */\n    createLiterals: function(style, feature) {\n        var context = OpenLayers.Util.extend({}, feature.attributes || feature.data);\n        OpenLayers.Util.extend(context, this.context);\n        \n        for (var i in this.propertyStyles) {\n            style[i] = OpenLayers.Style.createLiteral(style[i], context, feature, i);\n        }\n        return style;\n    },\n    \n    /**\n     * Method: findPropertyStyles\n     * Looks into all rules for this style and the defaultStyle to collect\n     * all the style hash property names containing ${...} strings that have\n     * to be replaced using the createLiteral method before returning them.\n     * \n     * Returns:\n     * {Object} hash of property names that need createLiteral parsing. The\n     * name of the property is the key, and the value is true;\n     */\n    findPropertyStyles: function() {\n        var propertyStyles = {};\n\n        // check the default style\n        var style = this.defaultStyle;\n        this.addPropertyStyles(propertyStyles, style);\n\n        // walk through all rules to check for properties in their symbolizer\n        var rules = this.rules;\n        var symbolizer, value;\n        for (var i=0, len=rules.length; i<len; i++) {\n            symbolizer = rules[i].symbolizer;\n            for (var key in symbolizer) {\n                value = symbolizer[key];\n                if (typeof value == \"object\") {\n                    // symbolizer key is \"Point\", \"Line\" or \"Polygon\"\n                    this.addPropertyStyles(propertyStyles, value);\n                } else {\n                    // symbolizer is a hash of style properties\n                    this.addPropertyStyles(propertyStyles, symbolizer);\n                    break;\n                }\n            }\n        }\n        return propertyStyles;\n    },\n    \n    /**\n     * Method: addPropertyStyles\n     * \n     * Parameters:\n     * propertyStyles - {Object} hash to add new property styles to. Will be\n     *                  modified inline\n     * symbolizer     - {Object} search this symbolizer for property styles\n     * \n     * Returns:\n     * {Object} propertyStyles hash\n     */\n    addPropertyStyles: function(propertyStyles, symbolizer) {\n        var property;\n        for (var key in symbolizer) {\n            property = symbolizer[key];\n            if (typeof property == \"string\" &&\n                    property.match(/\\$\\{\\w+\\}/)) {\n                propertyStyles[key] = true;\n            }\n        }\n        return propertyStyles;\n    },\n    \n    /**\n     * APIMethod: addRules\n     * Adds rules to this style.\n     * \n     * Parameters:\n     * rules - {Array(<OpenLayers.Rule>)}\n     */\n    addRules: function(rules) {\n        Array.prototype.push.apply(this.rules, rules);\n        this.propertyStyles = this.findPropertyStyles();\n    },\n    \n    /**\n     * APIMethod: setDefaultStyle\n     * Sets the default style for this style object.\n     * \n     * Parameters:\n     * style - {Object} Hash of style properties\n     */\n    setDefaultStyle: function(style) {\n        this.defaultStyle = style; \n        this.propertyStyles = this.findPropertyStyles();\n    },\n        \n    /**\n     * Method: getSymbolizerPrefix\n     * Returns the correct symbolizer prefix according to the\n     * geometry type of the passed geometry\n     * \n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>}\n     * \n     * Returns:\n     * {String} key of the according symbolizer\n     */\n    getSymbolizerPrefix: function(geometry) {\n        var prefixes = OpenLayers.Style.SYMBOLIZER_PREFIXES;\n        for (var i=0, len=prefixes.length; i<len; i++) {\n            if (geometry.CLASS_NAME.indexOf(prefixes[i]) != -1) {\n                return prefixes[i];\n            }\n        }\n    },\n    \n    /**\n     * APIMethod: clone\n     * Clones this style.\n     * \n     * Returns:\n     * {<OpenLayers.Style>} Clone of this style.\n     */\n    clone: function() {\n        var options = OpenLayers.Util.extend({}, this);\n        // clone rules\n        if(this.rules) {\n            options.rules = [];\n            for(var i=0, len=this.rules.length; i<len; ++i) {\n                options.rules.push(this.rules[i].clone());\n            }\n        }\n        // clone context\n        options.context = this.context && OpenLayers.Util.extend({}, this.context);\n        //clone default style\n        var defaultStyle = OpenLayers.Util.extend({}, this.defaultStyle);\n        return new OpenLayers.Style(defaultStyle, options);\n    },\n    \n    CLASS_NAME: \"OpenLayers.Style\"\n});\n\n\n/**\n * Function: createLiteral\n * converts a style value holding a combination of PropertyName and Literal\n * into a Literal, taking the property values from the passed features.\n * \n * Parameters:\n * value - {String} value to parse. If this string contains a construct like\n *         \"foo ${bar}\", then \"foo \" will be taken as literal, and \"${bar}\"\n *         will be replaced by the value of the \"bar\" attribute of the passed\n *         feature.\n * context - {Object} context to take attribute values from\n * feature - {<OpenLayers.Feature.Vector>} optional feature to pass to\n *           <OpenLayers.String.format> for evaluating functions in the\n *           context.\n * property - {String} optional, name of the property for which the literal is\n *            being created for evaluating functions in the context.\n * \n * Returns:\n * {String} the parsed value. In the example of the value parameter above, the\n * result would be \"foo valueOfBar\", assuming that the passed feature has an\n * attribute named \"bar\" with the value \"valueOfBar\".\n */\nOpenLayers.Style.createLiteral = function(value, context, feature, property) {\n    if (typeof value == \"string\" && value.indexOf(\"${\") != -1) {\n        value = OpenLayers.String.format(value, context, [feature, property]);\n        value = (isNaN(value) || !value) ? value : parseFloat(value);\n    }\n    return value;\n};\n    \n/**\n * Constant: OpenLayers.Style.SYMBOLIZER_PREFIXES\n * {Array} prefixes of the sld symbolizers. These are the\n * same as the main geometry types\n */\nOpenLayers.Style.SYMBOLIZER_PREFIXES = ['Point', 'Line', 'Polygon', 'Text',\n    'Raster'];\n/* ======================================================================\n    OpenLayers/StyleMap.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/BaseTypes/Class.js\n * @requires OpenLayers/Style.js\n * @requires OpenLayers/Feature/Vector.js\n */\n \n/**\n * Class: OpenLayers.StyleMap\n */\nOpenLayers.StyleMap = OpenLayers.Class({\n    \n    /**\n     * Property: styles\n     * {Object} Hash of {<OpenLayers.Style>}, keyed by names of well known\n     * rendering intents (e.g. \"default\", \"temporary\", \"select\", \"delete\").\n     */\n    styles: null,\n    \n    /**\n     * Property: extendDefault\n     * {Boolean} if true, every render intent will extend the symbolizers\n     * specified for the \"default\" intent at rendering time. Otherwise, every\n     * rendering intent will be treated as a completely independent style.\n     */\n    extendDefault: true,\n    \n    /**\n     * Constructor: OpenLayers.StyleMap\n     * \n     * Parameters:\n     * style   - {Object} Optional. Either a style hash, or a style object, or\n     *           a hash of style objects (style hashes) keyed by rendering\n     *           intent. If just one style hash or style object is passed,\n     *           this will be used for all known render intents (default,\n     *           select, temporary)\n     * options - {Object} optional hash of additional options for this\n     *           instance\n     */\n    initialize: function (style, options) {\n        this.styles = {\n            \"default\": new OpenLayers.Style(\n                OpenLayers.Feature.Vector.style[\"default\"]),\n            \"select\": new OpenLayers.Style(\n                OpenLayers.Feature.Vector.style[\"select\"]),\n            \"temporary\": new OpenLayers.Style(\n                OpenLayers.Feature.Vector.style[\"temporary\"]),\n            \"delete\": new OpenLayers.Style(\n                OpenLayers.Feature.Vector.style[\"delete\"])\n        };\n        \n        // take whatever the user passed as style parameter and convert it\n        // into parts of stylemap.\n        if(style instanceof OpenLayers.Style) {\n            // user passed a style object\n            this.styles[\"default\"] = style;\n            this.styles[\"select\"] = style;\n            this.styles[\"temporary\"] = style;\n            this.styles[\"delete\"] = style;\n        } else if(typeof style == \"object\") {\n            for(var key in style) {\n                if(style[key] instanceof OpenLayers.Style) {\n                    // user passed a hash of style objects\n                    this.styles[key] = style[key];\n                } else if(typeof style[key] == \"object\") {\n                    // user passsed a hash of style hashes\n                    this.styles[key] = new OpenLayers.Style(style[key]);\n                } else {\n                    // user passed a style hash (i.e. symbolizer)\n                    this.styles[\"default\"] = new OpenLayers.Style(style);\n                    this.styles[\"select\"] = new OpenLayers.Style(style);\n                    this.styles[\"temporary\"] = new OpenLayers.Style(style);\n                    this.styles[\"delete\"] = new OpenLayers.Style(style);\n                    break;\n                }\n            }\n        }\n        OpenLayers.Util.extend(this, options);\n    },\n\n    /**\n     * Method: destroy\n     */\n    destroy: function() {\n        for(var key in this.styles) {\n            this.styles[key].destroy();\n        }\n        this.styles = null;\n    },\n    \n    /**\n     * Method: createSymbolizer\n     * Creates the symbolizer for a feature for a render intent.\n     * \n     * Parameters:\n     * feature - {<OpenLayers.Feature>} The feature to evaluate the rules\n     *           of the intended style against.\n     * intent  - {String} The intent determines the symbolizer that will be\n     *           used to draw the feature. Well known intents are \"default\"\n     *           (for just drawing the features), \"select\" (for selected\n     *           features) and \"temporary\" (for drawing features).\n     * \n     * Returns:\n     * {Object} symbolizer hash\n     */\n    createSymbolizer: function(feature, intent) {\n        if(!feature) {\n            feature = new OpenLayers.Feature.Vector();\n        }\n        if(!this.styles[intent]) {\n            intent = \"default\";\n        }\n        feature.renderIntent = intent;\n        var defaultSymbolizer = {};\n        if(this.extendDefault && intent != \"default\") {\n            defaultSymbolizer = this.styles[\"default\"].createSymbolizer(feature);\n        }\n        return OpenLayers.Util.extend(defaultSymbolizer,\n            this.styles[intent].createSymbolizer(feature));\n    },\n    \n    /**\n     * Method: addUniqueValueRules\n     * Convenience method to create comparison rules for unique values of a\n     * property. The rules will be added to the style object for a specified\n     * rendering intent. This method is a shortcut for creating something like\n     * the \"unique value legends\" familiar from well known desktop GIS systems\n     * \n     * Parameters:\n     * renderIntent - {String} rendering intent to add the rules to\n     * property     - {String} values of feature attributes to create the\n     *                rules for\n     * symbolizers  - {Object} Hash of symbolizers, keyed by the desired\n     *                property values \n     * context      - {Object} An optional object with properties that\n     *                symbolizers' property values should be evaluated\n     *                against. If no context is specified, feature.attributes\n     *                will be used\n     */\n    addUniqueValueRules: function(renderIntent, property, symbolizers, context) {\n        var rules = [];\n        for (var value in symbolizers) {\n            rules.push(new OpenLayers.Rule({\n                symbolizer: symbolizers[value],\n                context: context,\n                filter: new OpenLayers.Filter.Comparison({\n                    type: OpenLayers.Filter.Comparison.EQUAL_TO,\n                    property: property,\n                    value: value\n                })\n            }));\n        }\n        this.styles[renderIntent].addRules(rules);\n    },\n\n    CLASS_NAME: \"OpenLayers.StyleMap\"\n});\n/* ======================================================================\n    OpenLayers/Layer/Vector.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Layer.js\n * @requires OpenLayers/Renderer.js\n * @requires OpenLayers/StyleMap.js\n * @requires OpenLayers/Feature/Vector.js\n * @requires OpenLayers/Console.js\n * @requires OpenLayers/Lang.js\n */\n\n/**\n * Class: OpenLayers.Layer.Vector\n * Instances of OpenLayers.Layer.Vector are used to render vector data from\n *     a variety of sources. Create a new vector layer with the\n *     <OpenLayers.Layer.Vector> constructor.\n *\n * Inherits from:\n *  - <OpenLayers.Layer>\n */\nOpenLayers.Layer.Vector = OpenLayers.Class(OpenLayers.Layer, {\n\n    /**\n     * APIProperty: events\n     * {<OpenLayers.Events>}\n     *\n     * Register a listener for a particular event with the following syntax:\n     * (code)\n     * layer.events.register(type, obj, listener);\n     * (end)\n     *\n     * Listeners will be called with a reference to an event object.  The\n     *     properties of this event depends on exactly what happened.\n     *\n     * All event objects have at least the following properties:\n     * object - {Object} A reference to layer.events.object.\n     * element - {DOMElement} A reference to layer.events.element.\n     *\n     * Supported map event types (in addition to those from <OpenLayers.Layer.events>):\n     * beforefeatureadded - Triggered before a feature is added.  Listeners\n     *      will receive an object with a *feature* property referencing the\n     *      feature to be added.  To stop the feature from being added, a\n     *      listener should return false.\n     * beforefeaturesadded - Triggered before an array of features is added.\n     *      Listeners will receive an object with a *features* property\n     *      referencing the feature to be added. To stop the features from\n     *      being added, a listener should return false.\n     * featureadded - Triggered after a feature is added.  The event\n     *      object passed to listeners will have a *feature* property with a\n     *      reference to the added feature.\n     * featuresadded - Triggered after features are added.  The event\n     *      object passed to listeners will have a *features* property with a\n     *      reference to an array of added features.\n     * beforefeatureremoved - Triggered before a feature is removed. Listeners\n     *      will receive an object with a *feature* property referencing the\n     *      feature to be removed.\n     * beforefeaturesremoved - Triggered before multiple features are removed. \n     *      Listeners will receive an object with a *features* property\n     *      referencing the features to be removed.\n     * featureremoved - Triggered after a feature is removed. The event\n     *      object passed to listeners will have a *feature* property with a\n     *      reference to the removed feature.\n     * featuresremoved - Triggered after features are removed. The event\n     *      object passed to listeners will have a *features* property with a\n     *      reference to an array of removed features.\n     * beforefeatureselected - Triggered before a feature is selected.  Listeners\n     *      will receive an object with a *feature* property referencing the\n     *      feature to be selected. To stop the feature from being selectd, a\n     *      listener should return false.\n     * featureselected - Triggered after a feature is selected.  Listeners\n     *      will receive an object with a *feature* property referencing the\n     *      selected feature.\n     * featureunselected - Triggered after a feature is unselected.\n     *      Listeners will receive an object with a *feature* property\n     *      referencing the unselected feature.\n     * beforefeaturemodified - Triggered when a feature is selected to \n     *      be modified.  Listeners will receive an object with a *feature* \n     *      property referencing the selected feature.\n     * featuremodified - Triggered when a feature has been modified.\n     *      Listeners will receive an object with a *feature* property referencing \n     *      the modified feature.\n     * afterfeaturemodified - Triggered when a feature is finished being modified.\n     *      Listeners will receive an object with a *feature* property referencing \n     *      the modified feature.\n     * vertexmodified - Triggered when a vertex within any feature geometry\n     *      has been modified.  Listeners will receive an object with a\n     *      *feature* property referencing the modified feature, a *vertex*\n     *      property referencing the vertex modified (always a point geometry),\n     *      and a *pixel* property referencing the pixel location of the\n     *      modification.\n     * vertexremoved - Triggered when a vertex within any feature geometry\n     *      has been deleted.  Listeners will receive an object with a\n     *      *feature* property referencing the modified feature, a *vertex*\n     *      property referencing the vertex modified (always a point geometry),\n     *      and a *pixel* property referencing the pixel location of the\n     *      removal.\n     * sketchstarted - Triggered when a feature sketch bound for this layer\n     *      is started.  Listeners will receive an object with a *feature*\n     *      property referencing the new sketch feature and a *vertex* property\n     *      referencing the creation point.\n     * sketchmodified - Triggered when a feature sketch bound for this layer\n     *      is modified.  Listeners will receive an object with a *vertex*\n     *      property referencing the modified vertex and a *feature* property\n     *      referencing the sketch feature.\n     * sketchcomplete - Triggered when a feature sketch bound for this layer\n     *      is complete.  Listeners will receive an object with a *feature*\n     *      property referencing the sketch feature.  By returning false, a\n     *      listener can stop the sketch feature from being added to the layer.\n     * refresh - Triggered when something wants a strategy to ask the protocol\n     *      for a new set of features.\n     */\n\n    /**\n     * APIProperty: isBaseLayer\n     * {Boolean} The layer is a base layer.  Default is false.  Set this property\n     * in the layer options.\n     */\n    isBaseLayer: false,\n\n    /** \n     * APIProperty: isFixed\n     * {Boolean} Whether the layer remains in one place while dragging the\n     * map. Note that setting this to true will move the layer to the bottom\n     * of the layer stack.\n     */\n    isFixed: false,\n\n    /** \n     * APIProperty: features\n     * {Array(<OpenLayers.Feature.Vector>)} \n     */\n    features: null,\n    \n    /** \n     * Property: filter\n     * {<OpenLayers.Filter>} The filter set in this layer,\n     *     a strategy launching read requests can combined\n     *     this filter with its own filter.\n     */\n    filter: null,\n    \n    /** \n     * Property: selectedFeatures\n     * {Array(<OpenLayers.Feature.Vector>)} \n     */\n    selectedFeatures: null,\n    \n    /**\n     * Property: unrenderedFeatures\n     * {Object} hash of features, keyed by feature.id, that the renderer\n     *     failed to draw\n     */\n    unrenderedFeatures: null,\n\n    /**\n     * APIProperty: reportError\n     * {Boolean} report friendly error message when loading of renderer\n     * fails.\n     */\n    reportError: true, \n\n    /** \n     * APIProperty: style\n     * {Object} Default style for the layer\n     */\n    style: null,\n    \n    /**\n     * Property: styleMap\n     * {<OpenLayers.StyleMap>}\n     */\n    styleMap: null,\n    \n    /**\n     * Property: strategies\n     * {Array(<OpenLayers.Strategy>})} Optional list of strategies for the layer.\n     */\n    strategies: null,\n    \n    /**\n     * Property: protocol\n     * {<OpenLayers.Protocol>} Optional protocol for the layer.\n     */\n    protocol: null,\n    \n    /**\n     * Property: renderers\n     * {Array(String)} List of supported Renderer classes. Add to this list to\n     * add support for additional renderers. This list is ordered:\n     * the first renderer which returns true for the  'supported()'\n     * method will be used, if not defined in the 'renderer' option.\n     */\n    renderers: ['SVG', 'VML', 'Canvas'],\n    \n    /** \n     * Property: renderer\n     * {<OpenLayers.Renderer>}\n     */\n    renderer: null,\n    \n    /**\n     * APIProperty: rendererOptions\n     * {Object} Options for the renderer. See {<OpenLayers.Renderer>} for\n     *     supported options.\n     */\n    rendererOptions: null,\n    \n    /** \n     * APIProperty: geometryType\n     * {String} geometryType allows you to limit the types of geometries this\n     * layer supports. This should be set to something like\n     * \"OpenLayers.Geometry.Point\" to limit types.\n     */\n    geometryType: null,\n\n    /** \n     * Property: drawn\n     * {Boolean} Whether the Vector Layer features have been drawn yet.\n     */\n    drawn: false,\n    \n    /** \n     * APIProperty: ratio\n     * {Float} This specifies the ratio of the size of the visiblity of the Vector Layer features to the size of the map.\n     */   \n    ratio: 1,\n\n    /**\n     * Constructor: OpenLayers.Layer.Vector\n     * Create a new vector layer\n     *\n     * Parameters:\n     * name - {String} A name for the layer\n     * options - {Object} Optional object with non-default properties to set on\n     *           the layer.\n     *\n     * Returns:\n     * {<OpenLayers.Layer.Vector>} A new vector layer\n     */\n    initialize: function(name, options) {\n        OpenLayers.Layer.prototype.initialize.apply(this, arguments);\n\n        // allow user-set renderer, otherwise assign one\n        if (!this.renderer || !this.renderer.supported()) {  \n            this.assignRenderer();\n        }\n\n        // if no valid renderer found, display error\n        if (!this.renderer || !this.renderer.supported()) {\n            this.renderer = null;\n            this.displayError();\n        } \n\n        if (!this.styleMap) {\n            this.styleMap = new OpenLayers.StyleMap();\n        }\n\n        this.features = [];\n        this.selectedFeatures = [];\n        this.unrenderedFeatures = {};\n        \n        // Allow for custom layer behavior\n        if(this.strategies){\n            for(var i=0, len=this.strategies.length; i<len; i++) {\n                this.strategies[i].setLayer(this);\n            }\n        }\n\n    },\n\n    /**\n     * APIMethod: destroy\n     * Destroy this layer\n     */\n    destroy: function() {\n        if (this.strategies) {\n            var strategy, i, len;\n            for(i=0, len=this.strategies.length; i<len; i++) {\n                strategy = this.strategies[i];\n                if(strategy.autoDestroy) {\n                    strategy.destroy();\n                }\n            }\n            this.strategies = null;\n        }\n        if (this.protocol) {\n            if(this.protocol.autoDestroy) {\n                this.protocol.destroy();\n            }\n            this.protocol = null;\n        }\n        this.destroyFeatures();\n        this.features = null;\n        this.selectedFeatures = null;\n        this.unrenderedFeatures = null;\n        if (this.renderer) {\n            this.renderer.destroy();\n        }\n        this.renderer = null;\n        this.geometryType = null;\n        this.drawn = null;\n        OpenLayers.Layer.prototype.destroy.apply(this, arguments);  \n    },\n\n    /**\n     * Method: clone\n     * Create a clone of this layer.\n     * \n     * Note: Features of the layer are also cloned.\n     *\n     * Returns:\n     * {<OpenLayers.Layer.Vector>} An exact clone of this layer\n     */\n    clone: function (obj) {\n        \n        if (obj == null) {\n            obj = new OpenLayers.Layer.Vector(this.name, this.getOptions());\n        }\n\n        //get all additions from superclasses\n        obj = OpenLayers.Layer.prototype.clone.apply(this, [obj]);\n\n        // copy/set any non-init, non-simple values here\n        var features = this.features;\n        var len = features.length;\n        var clonedFeatures = new Array(len);\n        for(var i=0; i<len; ++i) {\n            clonedFeatures[i] = features[i].clone();\n        }\n        obj.features = clonedFeatures;\n\n        return obj;\n    },    \n    \n    /**\n     * Method: refresh\n     * Ask the layer to request features again and redraw them.  Triggers\n     *     the refresh event if the layer is in range and visible.\n     *\n     * Parameters:\n     * obj - {Object} Optional object with properties for any listener of\n     *     the refresh event.\n     */\n    refresh: function(obj) {\n        if(this.calculateInRange() && this.visibility) {\n            this.events.triggerEvent(\"refresh\", obj);\n        }\n    },\n\n    /** \n     * Method: assignRenderer\n     * Iterates through the available renderer implementations and selects \n     * and assigns the first one whose \"supported()\" function returns true.\n     */    \n    assignRenderer: function()  {\n        for (var i=0, len=this.renderers.length; i<len; i++) {\n            var rendererClass = this.renderers[i];\n            var renderer = (typeof rendererClass == \"function\") ?\n                rendererClass :\n                OpenLayers.Renderer[rendererClass];\n            if (renderer && renderer.prototype.supported()) {\n                this.renderer = new renderer(this.div, this.rendererOptions);\n                break;\n            }  \n        }  \n    },\n\n    /** \n     * Method: displayError \n     * Let the user know their browser isn't supported.\n     */\n    displayError: function() {\n        if (this.reportError) {\n            OpenLayers.Console.userError(OpenLayers.i18n(\"browserNotSupported\", \n                                     {renderers: this. renderers.join('\\n')}));\n        }    \n    },\n\n    /** \n     * Method: setMap\n     * The layer has been added to the map. \n     * \n     * If there is no renderer set, the layer can't be used. Remove it.\n     * Otherwise, give the renderer a reference to the map and set its size.\n     * \n     * Parameters:\n     * map - {<OpenLayers.Map>} \n     */\n    setMap: function(map) {        \n        OpenLayers.Layer.prototype.setMap.apply(this, arguments);\n\n        if (!this.renderer) {\n            this.map.removeLayer(this);\n        } else {\n            this.renderer.map = this.map;\n\n            var newSize = this.map.getSize();\n            newSize.w = newSize.w * this.ratio;\n            newSize.h = newSize.h * this.ratio;\n            this.renderer.setSize(newSize);\n        }\n    },\n\n    /**\n     * Method: afterAdd\n     * Called at the end of the map.addLayer sequence.  At this point, the map\n     *     will have a base layer.  Any autoActivate strategies will be\n     *     activated here.\n     */\n    afterAdd: function() {\n        if(this.strategies) {\n            var strategy, i, len;\n            for(i=0, len=this.strategies.length; i<len; i++) {\n                strategy = this.strategies[i];\n                if(strategy.autoActivate) {\n                    strategy.activate();\n                }\n            }\n        }\n    },\n\n    /**\n     * Method: removeMap\n     * The layer has been removed from the map.\n     *\n     * Parameters:\n     * map - {<OpenLayers.Map>}\n     */\n    removeMap: function(map) {\n        this.drawn = false;\n        if(this.strategies) {\n            var strategy, i, len;\n            for(i=0, len=this.strategies.length; i<len; i++) {\n                strategy = this.strategies[i];\n                if(strategy.autoActivate) {\n                    strategy.deactivate();\n                }\n            }\n        }\n    },\n    \n    /**\n     * Method: onMapResize\n     * Notify the renderer of the change in size. \n     * \n     */\n    onMapResize: function() {\n        OpenLayers.Layer.prototype.onMapResize.apply(this, arguments);\n        \n        var newSize = this.map.getSize();\n        newSize.w = newSize.w * this.ratio;\n        newSize.h = newSize.h * this.ratio;\n        this.renderer.setSize(newSize);\n    },\n\n    /**\n     * Method: moveTo\n     *  Reset the vector layer's div so that it once again is lined up with \n     *   the map. Notify the renderer of the change of extent, and in the\n     *   case of a change of zoom level (resolution), have the \n     *   renderer redraw features.\n     * \n     *  If the layer has not yet been drawn, cycle through the layer's \n     *   features and draw each one.\n     * \n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>} \n     * zoomChanged - {Boolean} \n     * dragging - {Boolean} \n     */\n    moveTo: function(bounds, zoomChanged, dragging) {\n        OpenLayers.Layer.prototype.moveTo.apply(this, arguments);\n        \n        var coordSysUnchanged = true;\n        if (!dragging) {\n            this.renderer.root.style.visibility = 'hidden';\n\n            var viewSize = this.map.getSize(),\n                viewWidth = viewSize.w,\n                viewHeight = viewSize.h,\n                offsetLeft = (viewWidth / 2 * this.ratio) - viewWidth / 2,\n                offsetTop = (viewHeight / 2 * this.ratio) - viewHeight / 2;\n            offsetLeft += this.map.layerContainerOriginPx.x;\n            offsetLeft = -Math.round(offsetLeft);\n            offsetTop += this.map.layerContainerOriginPx.y;\n            offsetTop = -Math.round(offsetTop);\n\n            this.div.style.left = offsetLeft + 'px';\n            this.div.style.top = offsetTop + 'px';\n\n            var extent = this.map.getExtent().scale(this.ratio);\n            coordSysUnchanged = this.renderer.setExtent(extent, zoomChanged);\n\n            this.renderer.root.style.visibility = 'visible';\n\n            // Force a reflow on gecko based browsers to prevent jump/flicker.\n            // This seems to happen on only certain configurations; it was originally\n            // noticed in FF 2.0 and Linux.\n            if (OpenLayers.IS_GECKO === true) {\n                this.div.scrollLeft = this.div.scrollLeft;\n            }\n            \n            if (!zoomChanged && coordSysUnchanged) {\n                for (var i in this.unrenderedFeatures) {\n                    var feature = this.unrenderedFeatures[i];\n                    this.drawFeature(feature);\n                }\n            }\n        }\n        if (!this.drawn || zoomChanged || !coordSysUnchanged) {\n            this.drawn = true;\n            var feature;\n            for(var i=0, len=this.features.length; i<len; i++) {\n                this.renderer.locked = (i !== (len - 1));\n                feature = this.features[i];\n                this.drawFeature(feature);\n            }\n        }    \n    },\n    \n    /** \n     * APIMethod: display\n     * Hide or show the Layer\n     * \n     * Parameters:\n     * display - {Boolean}\n     */\n    display: function(display) {\n        OpenLayers.Layer.prototype.display.apply(this, arguments);\n        // we need to set the display style of the root in case it is attached\n        // to a foreign layer\n        var currentDisplay = this.div.style.display;\n        if(currentDisplay != this.renderer.root.style.display) {\n            this.renderer.root.style.display = currentDisplay;\n        }\n    },\n\n    /**\n     * APIMethod: addFeatures\n     * Add Features to the layer.\n     *\n     * Parameters:\n     * features - {Array(<OpenLayers.Feature.Vector>)} \n     * options - {Object}\n     */\n    addFeatures: function(features, options) {\n        if (!(OpenLayers.Util.isArray(features))) {\n            features = [features];\n        }\n        \n        var notify = !options || !options.silent;\n        if(notify) {\n            var event = {features: features};\n            var ret = this.events.triggerEvent(\"beforefeaturesadded\", event);\n            if(ret === false) {\n                return;\n            }\n            features = event.features;\n        }\n        \n        // Track successfully added features for featuresadded event, since\n        // beforefeatureadded can veto single features.\n        var featuresAdded = [];\n        for (var i=0, len=features.length; i<len; i++) {\n            if (i != (features.length - 1)) {\n                this.renderer.locked = true;\n            } else {\n                this.renderer.locked = false;\n            }    \n            var feature = features[i];\n            \n            if (this.geometryType &&\n              !(feature.geometry instanceof this.geometryType)) {\n                throw new TypeError('addFeatures: component should be an ' +\n                                    this.geometryType.prototype.CLASS_NAME);\n              }\n\n            //give feature reference to its layer\n            feature.layer = this;\n\n            if (!feature.style && this.style) {\n                feature.style = OpenLayers.Util.extend({}, this.style);\n            }\n\n            if (notify) {\n                if(this.events.triggerEvent(\"beforefeatureadded\",\n                                            {feature: feature}) === false) {\n                    continue;\n                }\n                this.preFeatureInsert(feature);\n            }\n\n            featuresAdded.push(feature);\n            this.features.push(feature);\n            this.drawFeature(feature);\n            \n            if (notify) {\n                this.events.triggerEvent(\"featureadded\", {\n                    feature: feature\n                });\n                this.onFeatureInsert(feature);\n            }\n        }\n        \n        if(notify) {\n            this.events.triggerEvent(\"featuresadded\", {features: featuresAdded});\n        }\n    },\n\n\n    /**\n     * APIMethod: removeFeatures\n     * Remove features from the layer.  This erases any drawn features and\n     *     removes them from the layer's control.  The beforefeatureremoved\n     *     and featureremoved events will be triggered for each feature.  The\n     *     featuresremoved event will be triggered after all features have\n     *     been removed.  To suppress event triggering, use the silent option.\n     * \n     * Parameters:\n     * features - {Array(<OpenLayers.Feature.Vector>)} List of features to be\n     *     removed.\n     * options - {Object} Optional properties for changing behavior of the\n     *     removal.\n     *\n     * Valid options:\n     * silent - {Boolean} Suppress event triggering.  Default is false.\n     */\n    removeFeatures: function(features, options) {\n        if(!features || features.length === 0) {\n            return;\n        }\n        if (features === this.features) {\n            return this.removeAllFeatures(options);\n        }\n        if (!(OpenLayers.Util.isArray(features))) {\n            features = [features];\n        }\n        if (features === this.selectedFeatures) {\n            features = features.slice();\n        }\n\n        var notify = !options || !options.silent;\n        \n        if (notify) {\n            this.events.triggerEvent(\n                \"beforefeaturesremoved\", {features: features}\n            );\n        }\n\n        for (var i = features.length - 1; i >= 0; i--) {\n            // We remain locked so long as we're not at 0\n            // and the 'next' feature has a geometry. We do the geometry check\n            // because if all the features after the current one are 'null', we\n            // won't call eraseGeometry, so we break the 'renderer functions\n            // will always be called with locked=false *last*' rule. The end result\n            // is a possible gratiutious unlocking to save a loop through the rest \n            // of the list checking the remaining features every time. So long as\n            // null geoms are rare, this is probably okay.    \n            if (i != 0 && features[i-1].geometry) {\n                this.renderer.locked = true;\n            } else {\n                this.renderer.locked = false;\n            }\n    \n            var feature = features[i];\n            delete this.unrenderedFeatures[feature.id];\n\n            if (notify) {\n                this.events.triggerEvent(\"beforefeatureremoved\", {\n                    feature: feature\n                });\n            }\n\n            this.features = OpenLayers.Util.removeItem(this.features, feature);\n            // feature has no layer at this point\n            feature.layer = null;\n\n            if (feature.geometry) {\n                this.renderer.eraseFeatures(feature);\n            }\n                    \n            //in the case that this feature is one of the selected features, \n            // remove it from that array as well.\n            if (OpenLayers.Util.indexOf(this.selectedFeatures, feature) != -1){\n                OpenLayers.Util.removeItem(this.selectedFeatures, feature);\n            }\n\n            if (notify) {\n                this.events.triggerEvent(\"featureremoved\", {\n                    feature: feature\n                });\n            }\n        }\n\n        if (notify) {\n            this.events.triggerEvent(\"featuresremoved\", {features: features});\n        }\n    },\n    \n    /** \n     * APIMethod: removeAllFeatures\n     * Remove all features from the layer.\n     *\n     * Parameters:\n     * options - {Object} Optional properties for changing behavior of the\n     *     removal.\n     *\n     * Valid options:\n     * silent - {Boolean} Suppress event triggering.  Default is false.\n     */\n    removeAllFeatures: function(options) {\n        var notify = !options || !options.silent;\n        var features = this.features;\n        if (notify) {\n            this.events.triggerEvent(\n                \"beforefeaturesremoved\", {features: features}\n            );\n        }\n        var feature;\n        for (var i = features.length-1; i >= 0; i--) {\n            feature = features[i];\n            if (notify) {\n                this.events.triggerEvent(\"beforefeatureremoved\", {\n                    feature: feature\n                });\n            }\n            feature.layer = null;\n            if (notify) {\n                this.events.triggerEvent(\"featureremoved\", {\n                    feature: feature\n                });\n            }\n        }\n        this.renderer.clear();\n        this.features = [];\n        this.unrenderedFeatures = {};\n        this.selectedFeatures = [];\n        if (notify) {\n            this.events.triggerEvent(\"featuresremoved\", {features: features});\n        }\n    },\n\n    /**\n     * APIMethod: destroyFeatures\n     * Erase and destroy features on the layer.\n     *\n     * Parameters:\n     * features - {Array(<OpenLayers.Feature.Vector>)} An optional array of\n     *     features to destroy.  If not supplied, all features on the layer\n     *     will be destroyed.\n     * options - {Object}\n     */\n    destroyFeatures: function(features, options) {\n        var all = (features == undefined); // evaluates to true if\n                                           // features is null\n        if(all) {\n            features = this.features;\n        }\n        if(features) {\n            this.removeFeatures(features, options);\n            for(var i=features.length-1; i>=0; i--) {\n                features[i].destroy();\n            }\n        }\n    },\n\n    /**\n     * APIMethod: drawFeature\n     * Draw (or redraw) a feature on the layer.  If the optional style argument\n     * is included, this style will be used.  If no style is included, the\n     * feature's style will be used.  If the feature doesn't have a style,\n     * the layer's style will be used.\n     * \n     * This function is not designed to be used when adding features to \n     * the layer (use addFeatures instead). It is meant to be used when\n     * the style of a feature has changed, or in some other way needs to \n     * visually updated *after* it has already been added to a layer. You\n     * must add the feature to the layer for most layer-related events to \n     * happen.\n     *\n     * Parameters: \n     * feature - {<OpenLayers.Feature.Vector>} \n     * style - {String | Object} Named render intent or full symbolizer object.\n     */\n    drawFeature: function(feature, style) {\n        // don't try to draw the feature with the renderer if the layer is not \n        // drawn itself\n        if (!this.drawn) {\n            return;\n        }\n        if (typeof style != \"object\") {\n            if(!style && feature.state === OpenLayers.State.DELETE) {\n                style = \"delete\";\n            }\n            var renderIntent = style || feature.renderIntent;\n            style = feature.style || this.style;\n            if (!style) {\n                style = this.styleMap.createSymbolizer(feature, renderIntent);\n            }\n        }\n        \n        var drawn = this.renderer.drawFeature(feature, style);\n        //TODO remove the check for null when we get rid of Renderer.SVG\n        if (drawn === false || drawn === null) {\n            this.unrenderedFeatures[feature.id] = feature;\n        } else {\n            delete this.unrenderedFeatures[feature.id];\n        }\n    },\n    \n    /**\n     * Method: eraseFeatures\n     * Erase features from the layer.\n     *\n     * Parameters:\n     * features - {Array(<OpenLayers.Feature.Vector>)} \n     */\n    eraseFeatures: function(features) {\n        this.renderer.eraseFeatures(features);\n    },\n\n    /**\n     * Method: getFeatureFromEvent\n     * Given an event, return a feature if the event occurred over one.\n     * Otherwise, return null.\n     *\n     * Parameters:\n     * evt - {Event} \n     *\n     * Returns:\n     * {<OpenLayers.Feature.Vector>} A feature if one was under the event.\n     */\n    getFeatureFromEvent: function(evt) {\n        if (!this.renderer) {\n            throw new Error('getFeatureFromEvent called on layer with no ' +\n                            'renderer. This usually means you destroyed a ' +\n                            'layer, but not some handler which is associated ' +\n                            'with it.');\n        }\n        var feature = null;\n        var featureId = this.renderer.getFeatureIdFromEvent(evt);\n        if (featureId) {\n            if (typeof featureId === \"string\") {\n                feature = this.getFeatureById(featureId);\n            } else {\n                feature = featureId;\n            }\n        }\n        return feature;\n    },\n\n    /**\n     * APIMethod: getFeatureBy\n     * Given a property value, return the feature if it exists in the features array\n     *\n     * Parameters:\n     * property - {String}\n     * value - {String}\n     *\n     * Returns:\n     * {<OpenLayers.Feature.Vector>} A feature corresponding to the given\n     * property value or null if there is no such feature.\n     */\n    getFeatureBy: function(property, value) {\n        //TBD - would it be more efficient to use a hash for this.features?\n        var feature = null;\n        for(var i=0, len=this.features.length; i<len; ++i) {\n            if(this.features[i][property] == value) {\n                feature = this.features[i];\n                break;\n            }\n        }\n        return feature;\n    },\n\n    /**\n     * APIMethod: getFeatureById\n     * Given a feature id, return the feature if it exists in the features array\n     *\n     * Parameters:\n     * featureId - {String}\n     *\n     * Returns:\n     * {<OpenLayers.Feature.Vector>} A feature corresponding to the given\n     * featureId or null if there is no such feature.\n     */\n    getFeatureById: function(featureId) {\n        return this.getFeatureBy('id', featureId);\n    },\n\n    /**\n     * APIMethod: getFeatureByFid\n     * Given a feature fid, return the feature if it exists in the features array\n     *\n     * Parameters:\n     * featureFid - {String}\n     *\n     * Returns:\n     * {<OpenLayers.Feature.Vector>} A feature corresponding to the given\n     * featureFid or null if there is no such feature.\n     */\n    getFeatureByFid: function(featureFid) {\n        return this.getFeatureBy('fid', featureFid);\n    },\n    \n    /**\n     * APIMethod: getFeaturesByAttribute\n     * Returns an array of features that have the given attribute key set to the\n     * given value. Comparison of attribute values takes care of datatypes, e.g.\n     * the string '1234' is not equal to the number 1234.\n     *\n     * Parameters:\n     * attrName - {String}\n     * attrValue - {Mixed}\n     *\n     * Returns:\n     * Array({<OpenLayers.Feature.Vector>}) An array of features that have the \n     * passed named attribute set to the given value.\n     */\n    getFeaturesByAttribute: function(attrName, attrValue) {\n        var i,\n            feature,    \n            len = this.features.length,\n            foundFeatures = [];\n        for(i = 0; i < len; i++) {            \n            feature = this.features[i];\n            if(feature && feature.attributes) {\n                if (feature.attributes[attrName] === attrValue) {\n                    foundFeatures.push(feature);\n                }\n            }\n        }\n        return foundFeatures;\n    },\n\n    /**\n     * Unselect the selected features\n     * i.e. clears the featureSelection array\n     * change the style back\n    clearSelection: function() {\n\n       var vectorLayer = this.map.vectorLayer;\n        for (var i = 0; i < this.map.featureSelection.length; i++) {\n            var featureSelection = this.map.featureSelection[i];\n            vectorLayer.drawFeature(featureSelection, vectorLayer.style);\n        }\n        this.map.featureSelection = [];\n    },\n     */\n\n\n    /**\n     * APIMethod: onFeatureInsert\n     * method called after a feature is inserted.\n     * Does nothing by default. Override this if you\n     * need to do something on feature updates.\n     *\n     * Parameters: \n     * feature - {<OpenLayers.Feature.Vector>} \n     */\n    onFeatureInsert: function(feature) {\n    },\n    \n    /**\n     * APIMethod: preFeatureInsert\n     * method called before a feature is inserted.\n     * Does nothing by default. Override this if you\n     * need to do something when features are first added to the\n     * layer, but before they are drawn, such as adjust the style.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>} \n     */\n    preFeatureInsert: function(feature) {\n    },\n\n    /** \n     * APIMethod: getDataExtent\n     * Calculates the max extent which includes all of the features.\n     * \n     * Returns:\n     * {<OpenLayers.Bounds>} or null if the layer has no features with\n     * geometries.\n     */\n    getDataExtent: function () {\n        var maxExtent = null;\n        var features = this.features;\n        if(features && (features.length > 0)) {\n            var geometry = null;\n            for(var i=0, len=features.length; i<len; i++) {\n                geometry = features[i].geometry;\n                if (geometry) {\n                    if (maxExtent === null) {\n                        maxExtent = new OpenLayers.Bounds();\n                    }\n                    maxExtent.extend(geometry.getBounds());\n                }\n            }\n        }\n        return maxExtent;\n    },\n\n    CLASS_NAME: \"OpenLayers.Layer.Vector\"\n});\n/* ======================================================================\n    OpenLayers/Layer/Markers.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Layer.js\n */\n\n/**\n * Class: OpenLayers.Layer.Markers\n * \n * Inherits from:\n *  - <OpenLayers.Layer> \n */\nOpenLayers.Layer.Markers = OpenLayers.Class(OpenLayers.Layer, {\n    \n    /** \n     * APIProperty: isBaseLayer \n     * {Boolean} Markers layer is never a base layer.  \n     */\n    isBaseLayer: false,\n    \n    /** \n     * APIProperty: markers \n     * {Array(<OpenLayers.Marker>)} internal marker list \n     */\n    markers: null,\n\n\n    /** \n     * Property: drawn \n     * {Boolean} internal state of drawing. This is a workaround for the fact\n     * that the map does not call moveTo with a zoomChanged when the map is\n     * first starting up. This lets us catch the case where we have *never*\n     * drawn the layer, and draw it even if the zoom hasn't changed.\n     */\n    drawn: false,\n    \n    /**\n     * Constructor: OpenLayers.Layer.Markers \n     * Create a Markers layer.\n     *\n     * Parameters:\n     * name - {String} \n     * options - {Object} Hashtable of extra options to tag onto the layer\n     */\n    initialize: function(name, options) {\n        OpenLayers.Layer.prototype.initialize.apply(this, arguments);\n        this.markers = [];\n    },\n    \n    /**\n     * APIMethod: destroy \n     */\n    destroy: function() {\n        this.clearMarkers();\n        this.markers = null;\n        OpenLayers.Layer.prototype.destroy.apply(this, arguments);\n    },\n\n    /**\n     * APIMethod: setOpacity\n     * Sets the opacity for all the markers.\n     * \n     * Parameters:\n     * opacity - {Float}\n     */\n    setOpacity: function(opacity) {\n        if (opacity != this.opacity) {\n            this.opacity = opacity;\n            for (var i=0, len=this.markers.length; i<len; i++) {\n                this.markers[i].setOpacity(this.opacity);\n            }\n        }\n    },\n\n    /** \n     * Method: moveTo\n     *\n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>} \n     * zoomChanged - {Boolean} \n     * dragging - {Boolean} \n     */\n    moveTo:function(bounds, zoomChanged, dragging) {\n        OpenLayers.Layer.prototype.moveTo.apply(this, arguments);\n\n        if (zoomChanged || !this.drawn) {\n            for(var i=0, len=this.markers.length; i<len; i++) {\n                this.drawMarker(this.markers[i]);\n            }\n            this.drawn = true;\n        }\n    },\n\n    /**\n     * APIMethod: addMarker\n     *\n     * Parameters:\n     * marker - {<OpenLayers.Marker>} \n     */\n    addMarker: function(marker) {\n        this.markers.push(marker);\n\n        if (this.opacity < 1) {\n            marker.setOpacity(this.opacity);\n        }\n\n        if (this.map && this.map.getExtent()) {\n            marker.map = this.map;\n            this.drawMarker(marker);\n        }\n    },\n\n    /**\n     * APIMethod: removeMarker\n     *\n     * Parameters:\n     * marker - {<OpenLayers.Marker>} \n     */\n    removeMarker: function(marker) {\n        if (this.markers && this.markers.length) {\n            OpenLayers.Util.removeItem(this.markers, marker);\n            marker.erase();\n        }\n    },\n\n    /**\n     * Method: clearMarkers\n     * This method removes all markers from a layer. The markers are not\n     * destroyed by this function, but are removed from the list of markers.\n     */\n    clearMarkers: function() {\n        if (this.markers != null) {\n            while(this.markers.length > 0) {\n                this.removeMarker(this.markers[0]);\n            }\n        }\n    },\n\n    /** \n     * Method: drawMarker\n     * Calculate the pixel location for the marker, create it, and \n     *    add it to the layer's div\n     *\n     * Parameters:\n     * marker - {<OpenLayers.Marker>} \n     */\n    drawMarker: function(marker) {\n        var px = this.map.getLayerPxFromLonLat(marker.lonlat);\n        if (px == null) {\n            marker.display(false);\n        } else {\n            if (!marker.isDrawn()) {\n                var markerImg = marker.draw(px);\n                this.div.appendChild(markerImg);\n            } else if(marker.icon) {\n                marker.icon.moveTo(px);\n            }\n        }\n    },\n    \n    /** \n     * APIMethod: getDataExtent\n     * Calculates the max extent which includes all of the markers.\n     * \n     * Returns:\n     * {<OpenLayers.Bounds>}\n     */\n    getDataExtent: function () {\n        var maxExtent = null;\n        \n        if ( this.markers && (this.markers.length > 0)) {\n            var maxExtent = new OpenLayers.Bounds();\n            for(var i=0, len=this.markers.length; i<len; i++) {\n                var marker = this.markers[i];\n                maxExtent.extend(marker.lonlat);\n            }\n        }\n\n        return maxExtent;\n    },\n\n    CLASS_NAME: \"OpenLayers.Layer.Markers\"\n});\n/* ======================================================================\n    OpenLayers/Layer/Zoomify.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/*\n * Development supported by a R&D grant DC08P02OUK006 - Old Maps Online\n * (www.oldmapsonline.org) from Ministry of Culture of the Czech Republic.\n */\n\n\n/**\n * @requires OpenLayers/Layer/Grid.js\n */\n\n/**\n * Class: OpenLayers.Layer.Zoomify\n *\n * Inherits from:\n *  - <OpenLayers.Layer.Grid>\n */\nOpenLayers.Layer.Zoomify = OpenLayers.Class(OpenLayers.Layer.Grid, {\n\n    /**\n     * Property: size\n     * {<OpenLayers.Size>} The Zoomify image size in pixels.\n     */\n    size: null,\n\n    /**\n     * APIProperty: isBaseLayer\n     * {Boolean}\n     */\n    isBaseLayer: true,\n\n    /**\n     * Property: standardTileSize\n     * {Integer} The size of a standard (non-border) square tile in pixels.\n     */\n    standardTileSize: 256,\n\n    /** \n     * Property: tileOriginCorner\n     * {String} This layer uses top-left as tile origin\n     **/\n    tileOriginCorner: \"tl\",\n\n    /**\n     * Property: numberOfTiers\n     * {Integer} Depth of the Zoomify pyramid, number of tiers (zoom levels)\n     *                          - filled during Zoomify pyramid initialization.\n     */\n    numberOfTiers: 0,\n\n    /**\n     * Property: tileCountUpToTier\n     * {Array(Integer)} Number of tiles up to the given tier of pyramid.\n     *                          - filled during Zoomify pyramid initialization.\n     */\n    tileCountUpToTier: null,\n\n    /**\n     * Property: tierSizeInTiles\n     * {Array(<OpenLayers.Size>)} Size (in tiles) for each tier of pyramid.\n     *                          - filled during Zoomify pyramid initialization.\n     */\n    tierSizeInTiles: null,\n\n    /**\n     * Property: tierImageSize\n     * {Array(<OpenLayers.Size>)} Image size in pixels for each pyramid tier.\n     *                          - filled during Zoomify pyramid initialization.\n     */\n    tierImageSize: null,\n\n    /**\n     * Constructor: OpenLayers.Layer.Zoomify\n     *\n     * Parameters:\n     * name - {String} A name for the layer.\n     * url - {String} - Relative or absolute path to the image or more\n     *        precisely to the TileGroup[X] directories root.\n     *        Flash plugin use the variable name \"zoomifyImagePath\" for this.\n     * size - {<OpenLayers.Size>} The size (in pixels) of the image.\n     * options - {Object} Hashtable of extra options to tag onto the layer\n     */\n    initialize: function(name, url, size, options) {\n\n        // initialize the Zoomify pyramid for given size\n        this.initializeZoomify(size);\n\n        OpenLayers.Layer.Grid.prototype.initialize.apply(this, [\n            name, url, {}, options\n        ]);\n    },\n\n    /**\n     * Method: initializeZoomify\n     * It generates constants for all tiers of the Zoomify pyramid\n     *\n     * Parameters:\n     * size - {<OpenLayers.Size>} The size of the image in pixels\n     *\n     */\n    initializeZoomify: function( size ) {\n\n        var imageSize = size.clone();\n        this.size = size.clone();\n        var tiles = new OpenLayers.Size(\n            Math.ceil( imageSize.w / this.standardTileSize ),\n            Math.ceil( imageSize.h / this.standardTileSize )\n            );\n\n        this.tierSizeInTiles = [tiles];\n        this.tierImageSize = [imageSize];\n\n        while (imageSize.w > this.standardTileSize ||\n               imageSize.h > this.standardTileSize ) {\n\n            imageSize = new OpenLayers.Size(\n                Math.floor( imageSize.w / 2 ),\n                Math.floor( imageSize.h / 2 )\n                );\n            tiles = new OpenLayers.Size(\n                Math.ceil( imageSize.w / this.standardTileSize ),\n                Math.ceil( imageSize.h / this.standardTileSize )\n                );\n            this.tierSizeInTiles.push( tiles );\n            this.tierImageSize.push( imageSize );\n        }\n\n        this.tierSizeInTiles.reverse();\n        this.tierImageSize.reverse();\n\n        this.numberOfTiers = this.tierSizeInTiles.length;\n        var resolutions = [1];\n        this.tileCountUpToTier = [0];\n        for (var i = 1; i < this.numberOfTiers; i++) {\n            resolutions.unshift(Math.pow(2, i));\n            this.tileCountUpToTier.push(\n                this.tierSizeInTiles[i-1].w * this.tierSizeInTiles[i-1].h +\n                this.tileCountUpToTier[i-1]\n                );\n        }\n        if (!this.serverResolutions) {\n            this.serverResolutions = resolutions;\n        }\n    },\n\n    /**\n     * APIMethod:destroy\n     */\n    destroy: function() {\n        // for now, nothing special to do here.\n        OpenLayers.Layer.Grid.prototype.destroy.apply(this, arguments);\n\n        // Remove from memory the Zoomify pyramid - is that enough?\n        this.tileCountUpToTier.length = 0;\n        this.tierSizeInTiles.length = 0;\n        this.tierImageSize.length = 0;\n\n    },\n\n    /**\n     * APIMethod: clone\n     *\n     * Parameters:\n     * obj - {Object}\n     *\n     * Returns:\n     * {<OpenLayers.Layer.Zoomify>} An exact clone of this <OpenLayers.Layer.Zoomify>\n     */\n    clone: function (obj) {\n\n        if (obj == null) {\n            obj = new OpenLayers.Layer.Zoomify(this.name,\n                                           this.url,\n                                           this.size,\n                                           this.options);\n        }\n\n        //get all additions from superclasses\n        obj = OpenLayers.Layer.Grid.prototype.clone.apply(this, [obj]);\n\n        // copy/set any non-init, non-simple values here\n\n        return obj;\n    },\n\n    /**\n     * Method: createBackBuffer\n     * Create a back buffer.\n     *\n     * Returns:\n     * {DOMElement} The DOM element for the back buffer, undefined if the\n     * grid isn't initialized yet.\n     */\n    createBackBuffer: function() {\n        var backBuffer = OpenLayers.Layer.Grid.prototype.createBackBuffer.apply(this, arguments);\n        if(backBuffer) {\n            var image;\n            for (var i=backBuffer.childNodes.length-1; i>=0; --i) {\n                image = backBuffer.childNodes[i];\n                image._w = image.width;\n                image._h = image.height;\n            }\n        }\n        return backBuffer;\n    },\n\n    /**\n     * Method: getURL\n     *\n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>}\n     *\n     * Returns:\n     * {String} A string with the layer's url and parameters and also the\n     *          passed-in bounds and appropriate tile size specified as\n     *          parameters\n     */\n    getURL: function (bounds) {\n        bounds = this.adjustBounds(bounds);\n        var res = this.getServerResolution();\n        var x = Math.round((bounds.left - this.tileOrigin.lon) / (res * this.tileSize.w));\n        var y = Math.round((this.tileOrigin.lat - bounds.top) / (res * this.tileSize.h));\n        var z = this.getZoomForResolution( res );\n\n        var tileIndex = x + y * this.tierSizeInTiles[z].w + this.tileCountUpToTier[z];\n        var path = \"TileGroup\" + Math.floor( (tileIndex) / 256 ) +\n            \"/\" + z + \"-\" + x + \"-\" + y + \".jpg\";\n        var url = this.url;\n        if (OpenLayers.Util.isArray(url)) {\n            url = this.selectUrl(path, url);\n        }\n        return url + path;\n    },\n\n    /**\n     * Method: getImageSize\n     * getImageSize returns size for a particular tile. If bounds are given as\n     * first argument, size is calculated (bottom-right tiles are non square).\n     *\n     */\n    getImageSize: function() {\n        if (arguments.length > 0) {\n            var bounds = this.adjustBounds(arguments[0]);\n            var res = this.getServerResolution();\n            var x = Math.round((bounds.left - this.tileOrigin.lon) / (res * this.tileSize.w));\n            var y = Math.round((this.tileOrigin.lat - bounds.top) / (res * this.tileSize.h));\n            var z = this.getZoomForResolution( res );\n            var w = this.standardTileSize;\n            var h = this.standardTileSize;\n            if (x == this.tierSizeInTiles[z].w -1 ) {\n                var w = this.tierImageSize[z].w % this.standardTileSize;\n                if (w == 0) {\n                    w = this.standardTileSize;\n                }\n            }\n            if (y == this.tierSizeInTiles[z].h -1 ) {\n                var h = this.tierImageSize[z].h % this.standardTileSize;\n                if (h == 0) {\n                    h = this.standardTileSize;\n                }\n            }\n            // in jp2 format, dimensions of tiles are ceiled, that means there may be requested part of image (1px usually) above dimension stated in tierImageSize. \n            if (x == this.tierSizeInTiles[z].w) {\n                w = Math.ceil(this.size.w / Math.pow(2, this.numberOfTiers - 1 - z) - this.tierImageSize[z].w);\n            }\n            if (y == this.tierSizeInTiles[z].h) {\n                h = Math.ceil(this.size.h / Math.pow(2, this.numberOfTiers - 1 - z) - this.tierImageSize[z].h);\n            }\n            return (new OpenLayers.Size(w, h));\n        } else {\n            return this.tileSize;\n        }\n    },\n\n    /**\n     * APIMethod: setMap\n     * When the layer is added to a map, then we can fetch our origin\n     *    (if we don't have one.)\n     *\n     * Parameters:\n     * map - {<OpenLayers.Map>}\n     */\n    setMap: function(map) {\n        OpenLayers.Layer.Grid.prototype.setMap.apply(this, arguments);\n        this.tileOrigin = new OpenLayers.LonLat(this.map.maxExtent.left,\n                                                this.map.maxExtent.top);\n    },\n\n    CLASS_NAME: \"OpenLayers.Layer.Zoomify\"\n});\n/* ======================================================================\n    OpenLayers/Layer/TMS.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Layer/Grid.js\n */\n\n/**\n * Class: OpenLayers.Layer.TMS\n * Create a layer for accessing tiles from services that conform with the \n *     Tile Map Service Specification \n *     (http://wiki.osgeo.org/wiki/Tile_Map_Service_Specification).\n *\n * Example:\n * (code)\n *     var layer = new OpenLayers.Layer.TMS(\n *         \"My Layer\", // name for display in LayerSwitcher\n *         \"http://tilecache.osgeo.org/wms-c/Basic.py/\", // service endpoint\n *         {layername: \"basic\", type: \"png\"} // required properties\n *     );\n * (end)\n * \n * Inherits from:\n *  - <OpenLayers.Layer.Grid>\n */\nOpenLayers.Layer.TMS = OpenLayers.Class(OpenLayers.Layer.Grid, {\n\n    /**\n     * APIProperty: serviceVersion\n     * {String} Service version for tile requests.  Default is \"1.0.0\".\n     */\n    serviceVersion: \"1.0.0\",\n\n    /**\n     * APIProperty: layername\n     * {String} The identifier for the <TileMap> as advertised by the service.  \n     *     For example, if the service advertises a <TileMap> with \n     *    'href=\"http://tms.osgeo.org/1.0.0/vmap0\"', the <layername> property \n     *     would be set to \"vmap0\".\n     */\n    layername: null,\n\n    /**\n     * APIProperty: type\n     * {String} The format extension corresponding to the requested tile image\n     *     type.  This is advertised in a <TileFormat> element as the \n     *     \"extension\" attribute.  For example, if the service advertises a \n     *     <TileMap> with <TileFormat width=\"256\" height=\"256\" mime-type=\"image/jpeg\" extension=\"jpg\" />,\n     *     the <type> property would be set to \"jpg\".\n     */\n    type: null,\n\n    /**\n     * APIProperty: isBaseLayer\n     * {Boolean} Make this layer a base layer.  Default is true.  Set false to\n     *     use the layer as an overlay.\n     */\n    isBaseLayer: true,\n\n    /**\n     * APIProperty: tileOrigin\n     * {<OpenLayers.LonLat>} Optional origin for aligning the grid of tiles.\n     *     If provided, requests for tiles at all resolutions will be aligned\n     *     with this location (no tiles shall overlap this location).  If\n     *     not provided, the grid of tiles will be aligned with the bottom-left\n     *     corner of the map's <maxExtent>.  Default is ``null``.\n     *\n     * Example:\n     * (code)\n     *     var layer = new OpenLayers.Layer.TMS(\n     *         \"My Layer\",\n     *         \"http://tilecache.osgeo.org/wms-c/Basic.py/\",\n     *         {\n     *             layername: \"basic\", \n     *             type: \"png\",\n     *             // set if different than the bottom left of map.maxExtent\n     *             tileOrigin: new OpenLayers.LonLat(-180, -90)\n     *         }\n     *     );\n     * (end)\n     */\n    tileOrigin: null,\n\n    /**\n     * APIProperty: serverResolutions\n     * {Array} A list of all resolutions available on the server.  Only set this\n     *     property if the map resolutions differ from the server. This\n     *     property serves two purposes. (a) <serverResolutions> can include\n     *     resolutions that the server supports and that you don't want to\n     *     provide with this layer; you can also look at <zoomOffset>, which is\n     *     an alternative to <serverResolutions> for that specific purpose.\n     *     (b) The map can work with resolutions that aren't supported by\n     *     the server, i.e. that aren't in <serverResolutions>. When the\n     *     map is displayed in such a resolution data for the closest\n     *     server-supported resolution is loaded and the layer div is\n     *     stretched as necessary.\n     */\n    serverResolutions: null,\n\n    /**\n     * APIProperty: zoomOffset\n     * {Number} If your cache has more zoom levels than you want to provide\n     *     access to with this layer, supply a zoomOffset.  This zoom offset\n     *     is added to the current map zoom level to determine the level\n     *     for a requested tile.  For example, if you supply a zoomOffset\n     *     of 3, when the map is at the zoom 0, tiles will be requested from\n     *     level 3 of your cache.  Default is 0 (assumes cache level and map\n     *     zoom are equivalent).  Using <zoomOffset> is an alternative to\n     *     setting <serverResolutions> if you only want to expose a subset\n     *     of the server resolutions.\n     */\n    zoomOffset: 0,\n    \n    /**\n     * Constructor: OpenLayers.Layer.TMS\n     * \n     * Parameters:\n     * name - {String} Title to be displayed in a <OpenLayers.Control.LayerSwitcher>\n     * url - {String} Service endpoint (without the version number).  E.g.\n     *     \"http://tms.osgeo.org/\".\n     * options - {Object} Additional properties to be set on the layer.  The\n     *     <layername> and <type> properties must be set here.\n     */\n    initialize: function(name, url, options) {\n        var newArguments = [];\n        newArguments.push(name, url, {}, options);\n        OpenLayers.Layer.Grid.prototype.initialize.apply(this, newArguments);\n    },    \n\n    /**\n     * APIMethod: clone\n     * Create a complete copy of this layer.\n     *\n     * Parameters:\n     * obj - {Object} Should only be provided by subclasses that call this\n     *     method.\n     * \n     * Returns:\n     * {<OpenLayers.Layer.TMS>} An exact clone of this <OpenLayers.Layer.TMS>\n     */\n    clone: function (obj) {\n        \n        if (obj == null) {\n            obj = new OpenLayers.Layer.TMS(this.name,\n                                           this.url,\n                                           this.getOptions());\n        }\n\n        //get all additions from superclasses\n        obj = OpenLayers.Layer.Grid.prototype.clone.apply(this, [obj]);\n\n        // copy/set any non-init, non-simple values here\n\n        return obj;\n    },    \n    \n    /**\n     * Method: getURL\n     * \n     * Parameters:\n     * bounds - {<OpenLayers.Bounds>}\n     * \n     * Returns:\n     * {String} A string with the layer's url and parameters and also the \n     *          passed-in bounds and appropriate tile size specified as \n     *          parameters\n     */\n    getURL: function (bounds) {\n        bounds = this.adjustBounds(bounds);\n        var res = this.getServerResolution();\n        var x = Math.round((bounds.left - this.tileOrigin.lon) / (res * this.tileSize.w));\n        var y = Math.round((bounds.bottom - this.tileOrigin.lat) / (res * this.tileSize.h));\n        var z = this.getServerZoom();\n        var path = this.serviceVersion + \"/\" + this.layername + \"/\" + z + \"/\" + x + \"/\" + y + \".\" + this.type; \n        var url = this.url;\n        if (OpenLayers.Util.isArray(url)) {\n            url = this.selectUrl(path, url);\n        }\n        return url + path;\n    },\n\n    /** \n     * Method: setMap\n     * When the layer is added to a map, then we can fetch our origin \n     *    (if we don't have one.) \n     * \n     * Parameters:\n     * map - {<OpenLayers.Map>}\n     */\n    setMap: function(map) {\n        OpenLayers.Layer.Grid.prototype.setMap.apply(this, arguments);\n        if (!this.tileOrigin) { \n            this.tileOrigin = new OpenLayers.LonLat(this.map.maxExtent.left,\n                                                this.map.maxExtent.bottom);\n        }                                       \n    },\n\n    CLASS_NAME: \"OpenLayers.Layer.TMS\"\n});\n/* ======================================================================\n    OpenLayers/BaseTypes/Date.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/SingleFile.js\n */\n\n/**\n * Namespace: OpenLayers.Date\n * Contains implementations of Date.parse and date.toISOString that match the\n *     ECMAScript 5 specification for parsing RFC 3339 dates.\n *     http://tools.ietf.org/html/rfc3339\n */\nOpenLayers.Date = {\n\n    /** \n     * APIProperty: dateRegEx\n     * The regex to be used for validating dates. You can provide your own\n     * regex for instance for adding support for years before BC. Default\n     * value is: /^(?:(\\d{4})(?:-(\\d{2})(?:-(\\d{2}))?)?)?(?:(?:T(\\d{1,2}):(\\d{2}):(\\d{2}(?:\\.\\d+)?)(Z|(?:[+-]\\d{1,2}(?::(\\d{2}))?)))|Z)?$/\n     */\n    dateRegEx: /^(?:(\\d{4})(?:-(\\d{2})(?:-(\\d{2}))?)?)?(?:(?:T(\\d{1,2}):(\\d{2}):(\\d{2}(?:\\.\\d+)?)(Z|(?:[+-]\\d{1,2}(?::(\\d{2}))?)))|Z)?$/,\n\n    /**\n     * APIMethod: toISOString\n     * Generates a string representing a date.  The format of the string follows\n     *     the profile of ISO 8601 for date and time on the Internet (see\n     *     http://tools.ietf.org/html/rfc3339).  If the toISOString method is\n     *     available on the Date prototype, that is used.  The toISOString\n     *     method for Date instances is defined in ECMA-262.\n     *\n     * Parameters:\n     * date - {Date} A date object.\n     *\n     * Returns:\n     * {String} A string representing the date (e.g.\n     *     \"2010-08-07T16:58:23.123Z\").  If the date does not have a valid time\n     *     (i.e. isNaN(date.getTime())) this method returns the string \"Invalid\n     *     Date\".  The ECMA standard says the toISOString method should throw\n     *     RangeError in this case, but Firefox returns a string instead.  For\n     *     best results, use isNaN(date.getTime()) to determine date validity\n     *     before generating date strings.\n     */\n    toISOString: (function() {\n        if (\"toISOString\" in Date.prototype) {\n            return function(date) {\n                return date.toISOString();\n            };\n        } else {\n            return function(date) {\n                var str;\n                if (isNaN(date.getTime())) {\n                    // ECMA-262 says throw RangeError, Firefox returns\n                    // \"Invalid Date\"\n                    str = \"Invalid Date\";\n                } else {\n                    str =\n                        date.getUTCFullYear() + \"-\" +\n                        OpenLayers.Number.zeroPad(date.getUTCMonth() + 1, 2) + \"-\" +\n                        OpenLayers.Number.zeroPad(date.getUTCDate(), 2) + \"T\" +\n                        OpenLayers.Number.zeroPad(date.getUTCHours(), 2) + \":\" +\n                        OpenLayers.Number.zeroPad(date.getUTCMinutes(), 2) + \":\" +\n                        OpenLayers.Number.zeroPad(date.getUTCSeconds(), 2) + \".\" +\n                        OpenLayers.Number.zeroPad(date.getUTCMilliseconds(), 3) + \"Z\";\n                }\n                return str;\n            };\n        }\n\n    })(),\n\n    /**\n     * APIMethod: parse\n     * Generate a date object from a string.  The format for the string follows\n     *     the profile of ISO 8601 for date and time on the Internet (see\n     *     http://tools.ietf.org/html/rfc3339).  We don't call the native\n     *     Date.parse because of inconsistency between implmentations.  In\n     *     Chrome, calling Date.parse with a string that doesn't contain any\n     *     indication of the timezone (e.g. \"2011\"), the date is interpreted\n     *     in local time.  On Firefox, the assumption is UTC.\n     *\n     * Parameters:\n     * str - {String} A string representing the date (e.g.\n     *     \"2010\", \"2010-08\", \"2010-08-07\", \"2010-08-07T16:58:23.123Z\",\n     *     \"2010-08-07T11:58:23.123-06\").\n     *\n     * Returns:\n     * {Date} A date object.  If the string could not be parsed, an invalid\n     *     date is returned (i.e. isNaN(date.getTime())).\n     */\n    parse: function(str) {\n        var date;\n        var match = str.match(this.dateRegEx);\n        if (match && (match[1] || match[7])) { // must have at least year or time\n            var year = parseInt(match[1], 10) || 0;\n            var month = (parseInt(match[2], 10) - 1) || 0;\n            var day = parseInt(match[3], 10) || 1;\n            date = new Date(Date.UTC(year, month, day));\n            // optional time\n            var type = match[7];\n            if (type) {\n                var hours = parseInt(match[4], 10);\n                var minutes = parseInt(match[5], 10);\n                var secFrac = parseFloat(match[6]);\n                var seconds = secFrac | 0;\n                var milliseconds = Math.round(1000 * (secFrac - seconds));\n                date.setUTCHours(hours, minutes, seconds, milliseconds);\n                // check offset\n                if (type !== \"Z\") {\n                    var hoursOffset = parseInt(type, 10);\n                    var minutesOffset = parseInt(match[8], 10) || 0;\n                    var offset = -1000 * (60 * (hoursOffset * 60) + minutesOffset * 60);\n                    date = new Date(date.getTime() + offset);\n                }\n            }\n        } else {\n            date = new Date(\"invalid\");\n        }\n        return date;\n    }\n};\n/* ======================================================================\n    OpenLayers/Format.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/BaseTypes/Class.js\n * @requires OpenLayers/Util.js\n */\n\n/**\n * Class: OpenLayers.Format\n * Base class for format reading/writing a variety of formats.  Subclasses\n *     of OpenLayers.Format are expected to have read and write methods.\n */\nOpenLayers.Format = OpenLayers.Class({\n    \n    /**\n     * Property: options\n     * {Object} A reference to options passed to the constructor.\n     */\n    options: null,\n    \n    /**\n     * APIProperty: externalProjection\n     * {<OpenLayers.Projection>} When passed a externalProjection and\n     *     internalProjection, the format will reproject the geometries it\n     *     reads or writes. The externalProjection is the projection used by\n     *     the content which is passed into read or which comes out of write.\n     *     In order to reproject, a projection transformation function for the\n     *     specified projections must be available. This support may be \n     *     provided via proj4js or via a custom transformation function. See\n     *     {<OpenLayers.Projection.addTransform>} for more information on\n     *     custom transformations.\n     */\n    externalProjection: null,\n\n    /**\n     * APIProperty: internalProjection\n     * {<OpenLayers.Projection>} When passed a externalProjection and\n     *     internalProjection, the format will reproject the geometries it\n     *     reads or writes. The internalProjection is the projection used by\n     *     the geometries which are returned by read or which are passed into\n     *     write.  In order to reproject, a projection transformation function\n     *     for the specified projections must be available. This support may be\n     *     provided via proj4js or via a custom transformation function. See\n     *     {<OpenLayers.Projection.addTransform>} for more information on\n     *     custom transformations.\n     */\n    internalProjection: null,\n\n    /**\n     * APIProperty: data\n     * {Object} When <keepData> is true, this is the parsed string sent to\n     *     <read>.\n     */\n    data: null,\n\n    /**\n     * APIProperty: keepData\n     * {Object} Maintain a reference (<data>) to the most recently read data.\n     *     Default is false.\n     */\n    keepData: false,\n\n    /**\n     * Constructor: OpenLayers.Format\n     * Instances of this class are not useful.  See one of the subclasses.\n     *\n     * Parameters:\n     * options - {Object} An optional object with properties to set on the\n     *           format\n     *\n     * Valid options:\n     * keepData - {Boolean} If true, upon <read>, the data property will be\n     *     set to the parsed object (e.g. the json or xml object).\n     *\n     * Returns:\n     * An instance of OpenLayers.Format\n     */\n    initialize: function(options) {\n        OpenLayers.Util.extend(this, options);\n        this.options = options;\n    },\n    \n    /**\n     * APIMethod: destroy\n     * Clean up.\n     */\n    destroy: function() {\n    },\n\n    /**\n     * Method: read\n     * Read data from a string, and return an object whose type depends on the\n     * subclass. \n     * \n     * Parameters:\n     * data - {string} Data to read/parse.\n     *\n     * Returns:\n     * Depends on the subclass\n     */\n    read: function(data) {\n        throw new Error('Read not implemented.');\n    },\n    \n    /**\n     * Method: write\n     * Accept an object, and return a string. \n     *\n     * Parameters:\n     * object - {Object} Object to be serialized\n     *\n     * Returns:\n     * {String} A string representation of the object.\n     */\n    write: function(object) {\n        throw new Error('Write not implemented.');\n    },\n\n    CLASS_NAME: \"OpenLayers.Format\"\n});     \n/* ======================================================================\n    OpenLayers/Format/XML.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format.js\n */\n\n/**\n * Class: OpenLayers.Format.XML\n * Read and write XML.  For cross-browser XML generation, use methods on an\n *     instance of the XML format class instead of on <code>document<end>.\n *     The DOM creation and traversing methods exposed here all mimic the\n *     W3C XML DOM methods.  Create a new parser with the\n *     <OpenLayers.Format.XML> constructor.\n *\n * Inherits from:\n *  - <OpenLayers.Format>\n */\nOpenLayers.Format.XML = OpenLayers.Class(OpenLayers.Format, {\n    \n    /**\n     * Property: namespaces\n     * {Object} Mapping of namespace aliases to namespace URIs.  Properties\n     *     of this object should not be set individually.  Read-only.  All\n     *     XML subclasses should have their own namespaces object.  Use\n     *     <setNamespace> to add or set a namespace alias after construction.\n     */\n    namespaces: null,\n    \n    /**\n     * Property: namespaceAlias\n     * {Object} Mapping of namespace URI to namespace alias.  This object\n     *     is read-only.  Use <setNamespace> to add or set a namespace alias.\n     */\n    namespaceAlias: null,\n    \n    /**\n     * Property: defaultPrefix\n     * {String} The default namespace alias for creating element nodes.\n     */\n    defaultPrefix: null,\n    \n    /**\n     * Property: readers\n     * Contains public functions, grouped by namespace prefix, that will\n     *     be applied when a namespaced node is found matching the function\n     *     name.  The function will be applied in the scope of this parser\n     *     with two arguments: the node being read and a context object passed\n     *     from the parent.\n     */\n    readers: {},\n    \n    /**\n     * Property: writers\n     * As a compliment to the <readers> property, this structure contains public\n     *     writing functions grouped by namespace alias and named like the\n     *     node names they produce.\n     */\n    writers: {},\n\n    /**\n     * Property: xmldom\n     * {XMLDom} If this browser uses ActiveX, this will be set to a XMLDOM\n     *     object.  It is not intended to be a browser sniffing property.\n     *     Instead, the xmldom property is used instead of <code>document<end>\n     *     where namespaced node creation methods are not supported. In all\n     *     other browsers, this remains null.\n     */\n    xmldom: null,\n\n    /**\n     * Constructor: OpenLayers.Format.XML\n     * Construct an XML parser.  The parser is used to read and write XML.\n     *     Reading XML from a string returns a DOM element.  Writing XML from\n     *     a DOM element returns a string.\n     *\n     * Parameters:\n     * options - {Object} Optional object whose properties will be set on\n     *     the object.\n     */\n    initialize: function(options) {\n        if (OpenLayers.Format.XML.supportActiveX) {\n            this.xmldom = new ActiveXObject(\"Microsoft.XMLDOM\");\n        }\n        OpenLayers.Format.prototype.initialize.apply(this, [options]);\n        // clone the namespace object and set all namespace aliases\n        this.namespaces = OpenLayers.Util.extend({}, this.namespaces);\n        this.namespaceAlias = {};\n        for(var alias in this.namespaces) {\n            this.namespaceAlias[this.namespaces[alias]] = alias;\n        }\n    },\n    \n    /**\n     * APIMethod: destroy\n     * Clean up.\n     */\n    destroy: function() {\n        this.xmldom = null;\n        OpenLayers.Format.prototype.destroy.apply(this, arguments);\n    },\n    \n    /**\n     * Method: setNamespace\n     * Set a namespace alias and URI for the format.\n     *\n     * Parameters:\n     * alias - {String} The namespace alias (prefix).\n     * uri - {String} The namespace URI.\n     */\n    setNamespace: function(alias, uri) {\n        this.namespaces[alias] = uri;\n        this.namespaceAlias[uri] = alias;\n    },\n\n    /**\n     * APIMethod: read\n     * Deserialize a XML string and return a DOM node.\n     *\n     * Parameters:\n     * text - {String} A XML string\n     \n     * Returns:\n     * {DOMElement} A DOM node\n     */\n    read: function(text) {\n        var index = text.indexOf('<');\n        if(index > 0) {\n            text = text.substring(index);\n        }\n        var node = OpenLayers.Util.Try(\n            OpenLayers.Function.bind((\n                function() {\n                    var xmldom;\n                    /**\n                     * Since we want to be able to call this method on the prototype\n                     * itself, this.xmldom may not exist even if in IE.\n                     */\n                    if (OpenLayers.Format.XML.supportActiveX && !this.xmldom) {\n                        xmldom = new ActiveXObject(\"Microsoft.XMLDOM\");\n                    } else {\n                        xmldom = this.xmldom;\n                        \n                    }\n                    xmldom.loadXML(text);\n                    return xmldom;\n                }\n            ), this),\n            function() {\n                return new DOMParser().parseFromString(text, 'text/xml');\n            },\n            function() {\n                var req = new XMLHttpRequest();\n                req.open(\"GET\", \"data:\" + \"text/xml\" +\n                         \";charset=utf-8,\" + encodeURIComponent(text), false);\n                if(req.overrideMimeType) {\n                    req.overrideMimeType(\"text/xml\");\n                }\n                req.send(null);\n                return req.responseXML;\n            }\n        );\n\n        if(this.keepData) {\n            this.data = node;\n        }\n\n        return node;\n    },\n\n    /**\n     * APIMethod: write\n     * Serialize a DOM node into a XML string.\n     * \n     * Parameters:\n     * node - {DOMElement} A DOM node.\n     *\n     * Returns:\n     * {String} The XML string representation of the input node.\n     */\n    write: function(node) {\n        var data;\n        if(this.xmldom) {\n            data = node.xml;\n        } else {\n            var serializer = new XMLSerializer();\n            if (node.nodeType == 1) {\n                // Add nodes to a document before serializing. Everything else\n                // is serialized as is. This may need more work. See #1218 .\n                var doc = document.implementation.createDocument(\"\", \"\", null);\n                if (doc.importNode) {\n                    node = doc.importNode(node, true);\n                }\n                doc.appendChild(node);\n                data = serializer.serializeToString(doc);\n            } else {\n                data = serializer.serializeToString(node);\n            }\n        }\n        return data;\n    },\n\n    /**\n     * APIMethod: createElementNS\n     * Create a new element with namespace.  This node can be appended to\n     *     another node with the standard node.appendChild method.  For\n     *     cross-browser support, this method must be used instead of\n     *     document.createElementNS.\n     *\n     * Parameters:\n     * uri - {String} Namespace URI for the element.\n     * name - {String} The qualified name of the element (prefix:localname).\n     * \n     * Returns:\n     * {Element} A DOM element with namespace.\n     */\n    createElementNS: function(uri, name) {\n        var element;\n        if(this.xmldom) {\n            if(typeof uri == \"string\") {\n                element = this.xmldom.createNode(1, name, uri);\n            } else {\n                element = this.xmldom.createNode(1, name, \"\");\n            }\n        } else {\n            element = document.createElementNS(uri, name);\n        }\n        return element;\n    },\n\n    /**\n     * APIMethod: createDocumentFragment\n     * Create a document fragment node that can be appended to another node\n     *     created by createElementNS.  This will call \n     *     document.createDocumentFragment outside of IE.  In IE, the ActiveX\n     *     object's createDocumentFragment method is used.\n     *\n     * Returns:\n     * {Element} A document fragment.\n     */\n    createDocumentFragment: function() {\n        var element;\n        if (this.xmldom) {\n            element = this.xmldom.createDocumentFragment();\n        } else {\n            element = document.createDocumentFragment();\n        }\n        return element;\n    },\n\n    /**\n     * APIMethod: createTextNode\n     * Create a text node.  This node can be appended to another node with\n     *     the standard node.appendChild method.  For cross-browser support,\n     *     this method must be used instead of document.createTextNode.\n     * \n     * Parameters:\n     * text - {String} The text of the node.\n     * \n     * Returns: \n     * {DOMElement} A DOM text node.\n     */\n    createTextNode: function(text) {\n        var node;\n        if (typeof text !== \"string\") {\n            text = String(text);\n        }\n        if(this.xmldom) {\n            node = this.xmldom.createTextNode(text);\n        } else {\n            node = document.createTextNode(text);\n        }\n        return node;\n    },\n\n    /**\n     * APIMethod: getElementsByTagNameNS\n     * Get a list of elements on a node given the namespace URI and local name.\n     *     To return all nodes in a given namespace, use '*' for the name\n     *     argument.  To return all nodes of a given (local) name, regardless\n     *     of namespace, use '*' for the uri argument.\n     * \n     * Parameters:\n     * node - {Element} Node on which to search for other nodes.\n     * uri - {String} Namespace URI.\n     * name - {String} Local name of the tag (without the prefix).\n     * \n     * Returns:\n     * {NodeList} A node list or array of elements.\n     */\n    getElementsByTagNameNS: function(node, uri, name) {\n        var elements = [];\n        if(node.getElementsByTagNameNS) {\n            elements = node.getElementsByTagNameNS(uri, name);\n        } else {\n            // brute force method\n            var allNodes = node.getElementsByTagName(\"*\");\n            var potentialNode, fullName;\n            for(var i=0, len=allNodes.length; i<len; ++i) {\n                potentialNode = allNodes[i];\n                fullName = (potentialNode.prefix) ?\n                           (potentialNode.prefix + \":\" + name) : name;\n                if((name == \"*\") || (fullName == potentialNode.nodeName)) {\n                    if((uri == \"*\") || (uri == potentialNode.namespaceURI)) {\n                        elements.push(potentialNode);\n                    }\n                }\n            }\n        }\n        return elements;\n    },\n\n    /**\n     * APIMethod: getAttributeNodeNS\n     * Get an attribute node given the namespace URI and local name.\n     * \n     * Parameters:\n     * node - {Element} Node on which to search for attribute nodes.\n     * uri - {String} Namespace URI.\n     * name - {String} Local name of the attribute (without the prefix).\n     * \n     * Returns:\n     * {DOMElement} An attribute node or null if none found.\n     */\n    getAttributeNodeNS: function(node, uri, name) {\n        var attributeNode = null;\n        if(node.getAttributeNodeNS) {\n            attributeNode = node.getAttributeNodeNS(uri, name);\n        } else {\n            var attributes = node.attributes;\n            var potentialNode, fullName;\n            for(var i=0, len=attributes.length; i<len; ++i) {\n                potentialNode = attributes[i];\n                if(potentialNode.namespaceURI == uri) {\n                    fullName = (potentialNode.prefix) ?\n                               (potentialNode.prefix + \":\" + name) : name;\n                    if(fullName == potentialNode.nodeName) {\n                        attributeNode = potentialNode;\n                        break;\n                    }\n                }\n            }\n        }\n        return attributeNode;\n    },\n\n    /**\n     * APIMethod: getAttributeNS\n     * Get an attribute value given the namespace URI and local name.\n     * \n     * Parameters:\n     * node - {Element} Node on which to search for an attribute.\n     * uri - {String} Namespace URI.\n     * name - {String} Local name of the attribute (without the prefix).\n     * \n     * Returns:\n     * {String} An attribute value or and empty string if none found.\n     */\n    getAttributeNS: function(node, uri, name) {\n        var attributeValue = \"\";\n        if(node.getAttributeNS) {\n            attributeValue = node.getAttributeNS(uri, name) || \"\";\n        } else {\n            var attributeNode = this.getAttributeNodeNS(node, uri, name);\n            if(attributeNode) {\n                attributeValue = attributeNode.nodeValue;\n            }\n        }\n        return attributeValue;\n    },\n    \n    /**\n     * APIMethod: getChildValue\n     * Get the textual value of the node if it exists, or return an\n     *     optional default string.  Returns an empty string if no first child\n     *     exists and no default value is supplied.\n     *\n     * Parameters:\n     * node - {DOMElement} The element used to look for a first child value.\n     * def - {String} Optional string to return in the event that no\n     *     first child value exists.\n     *\n     * Returns:\n     * {String} The value of the first child of the given node.\n     */\n    getChildValue: function(node, def) {\n        var value = def || \"\";\n        if(node) {\n            for(var child=node.firstChild; child; child=child.nextSibling) {\n                switch(child.nodeType) {\n                    case 3: // text node\n                    case 4: // cdata section\n                        value += child.nodeValue;\n                }\n            }\n        }\n        return value;\n    },\n\n    /**\n     * APIMethod: isSimpleContent\n     * Test if the given node has only simple content (i.e. no child element\n     *     nodes).\n     *\n     * Parameters:\n     * node - {DOMElement} An element node.\n     *\n     * Returns:\n     * {Boolean} The node has no child element nodes (nodes of type 1). \n     */\n    isSimpleContent: function(node) {\n        var simple = true;\n        for(var child=node.firstChild; child; child=child.nextSibling) {\n            if(child.nodeType === 1) {\n                simple = false;\n                break;\n            }\n        }\n        return simple;\n    },\n    \n    /**\n     * APIMethod: contentType\n     * Determine the content type for a given node.\n     *\n     * Parameters:\n     * node - {DOMElement}\n     *\n     * Returns:\n     * {Integer} One of OpenLayers.Format.XML.CONTENT_TYPE.{EMPTY,SIMPLE,COMPLEX,MIXED}\n     *     if the node has no, simple, complex, or mixed content.\n     */\n    contentType: function(node) {\n        var simple = false,\n            complex = false;\n            \n        var type = OpenLayers.Format.XML.CONTENT_TYPE.EMPTY;\n\n        for(var child=node.firstChild; child; child=child.nextSibling) {\n            switch(child.nodeType) {\n                case 1: // element\n                    complex = true;\n                    break;\n                case 8: // comment\n                    break;\n                default:\n                    simple = true;\n            }\n            if(complex && simple) {\n                break;\n            }\n        }\n        \n        if(complex && simple) {\n            type = OpenLayers.Format.XML.CONTENT_TYPE.MIXED;\n        } else if(complex) {\n            return OpenLayers.Format.XML.CONTENT_TYPE.COMPLEX;\n        } else if(simple) {\n            return OpenLayers.Format.XML.CONTENT_TYPE.SIMPLE;\n        }\n        return type;\n    },\n\n    /**\n     * APIMethod: hasAttributeNS\n     * Determine whether a node has a particular attribute matching the given\n     *     name and namespace.\n     * \n     * Parameters:\n     * node - {Element} Node on which to search for an attribute.\n     * uri - {String} Namespace URI.\n     * name - {String} Local name of the attribute (without the prefix).\n     * \n     * Returns:\n     * {Boolean} The node has an attribute matching the name and namespace.\n     */\n    hasAttributeNS: function(node, uri, name) {\n        var found = false;\n        if(node.hasAttributeNS) {\n            found = node.hasAttributeNS(uri, name);\n        } else {\n            found = !!this.getAttributeNodeNS(node, uri, name);\n        }\n        return found;\n    },\n    \n    /**\n     * APIMethod: setAttributeNS\n     * Adds a new attribute or changes the value of an attribute with the given\n     *     namespace and name.\n     *\n     * Parameters:\n     * node - {Element} Element node on which to set the attribute.\n     * uri - {String} Namespace URI for the attribute.\n     * name - {String} Qualified name (prefix:localname) for the attribute.\n     * value - {String} Attribute value.\n     */\n    setAttributeNS: function(node, uri, name, value) {\n        if(node.setAttributeNS) {\n            node.setAttributeNS(uri, name, value);\n        } else {\n            if(this.xmldom) {\n                if(uri) {\n                    var attribute = node.ownerDocument.createNode(\n                        2, name, uri\n                    );\n                    attribute.nodeValue = value;\n                    node.setAttributeNode(attribute);\n                } else {\n                    node.setAttribute(name, value);\n                }\n            } else {\n                throw \"setAttributeNS not implemented\";\n            }\n        }\n    },\n\n    /**\n     * Method: createElementNSPlus\n     * Shorthand for creating namespaced elements with optional attributes and\n     *     child text nodes.\n     *\n     * Parameters:\n     * name - {String} The qualified node name.\n     * options - {Object} Optional object for node configuration.\n     *\n     * Valid options:\n     * uri - {String} Optional namespace uri for the element - supply a prefix\n     *     instead if the namespace uri is a property of the format's namespace\n     *     object.\n     * attributes - {Object} Optional attributes to be set using the\n     *     <setAttributes> method.\n     * value - {String} Optional text to be appended as a text node.\n     *\n     * Returns:\n     * {Element} An element node.\n     */\n    createElementNSPlus: function(name, options) {\n        options = options || {};\n        // order of prefix preference\n        // 1. in the uri option\n        // 2. in the prefix option\n        // 3. in the qualified name\n        // 4. from the defaultPrefix\n        var uri = options.uri || this.namespaces[options.prefix];\n        if(!uri) {\n            var loc = name.indexOf(\":\");\n            uri = this.namespaces[name.substring(0, loc)];\n        }\n        if(!uri) {\n            uri = this.namespaces[this.defaultPrefix];\n        }\n        var node = this.createElementNS(uri, name);\n        if(options.attributes) {\n            this.setAttributes(node, options.attributes);\n        }\n        var value = options.value;\n        if(value != null) {\n            node.appendChild(this.createTextNode(value));\n        }\n        return node;\n    },\n    \n    /**\n     * Method: setAttributes\n     * Set multiple attributes given key value pairs from an object.\n     *\n     * Parameters:\n     * node - {Element} An element node.\n     * obj - {Object || Array} An object whose properties represent attribute\n     *     names and values represent attribute values.  If an attribute name\n     *     is a qualified name (\"prefix:local\"), the prefix will be looked up\n     *     in the parsers {namespaces} object.  If the prefix is found,\n     *     setAttributeNS will be used instead of setAttribute.\n     */\n    setAttributes: function(node, obj) {\n        var value, uri;\n        for(var name in obj) {\n            if(obj[name] != null && obj[name].toString) {\n                value = obj[name].toString();\n                // check for qualified attribute name (\"prefix:local\")\n                uri = this.namespaces[name.substring(0, name.indexOf(\":\"))] || null;\n                this.setAttributeNS(node, uri, name, value);\n            }\n        }\n    },\n\n    /**\n     * Method: getFirstElementChild\n     * Implementation of firstElementChild attribute that works on ie7 and ie8.\n     *\n     * Parameters:\n     * node - {DOMElement} The parent node (required).\n     *\n     * Returns:\n     * {DOMElement} The first child element.\n     */\n    getFirstElementChild: function(node) {\n        if (node.firstElementChild) {\n            return node.firstElementChild;\n        }\n        else {\n            var child = node.firstChild;\n            while (child.nodeType != 1 && (child = child.nextSibling)) {}\n            return child;\n        }\n    },\n\n    /**\n     * Method: readNode\n     * Shorthand for applying one of the named readers given the node\n     *     namespace and local name.  Readers take two args (node, obj) and\n     *     generally extend or modify the second.\n     *\n     * Parameters:\n     * node - {DOMElement} The node to be read (required).\n     * obj - {Object} The object to be modified (optional).\n     *\n     * Returns:\n     * {Object} The input object, modified (or a new one if none was provided).\n     */\n    readNode: function(node, obj) {\n        if(!obj) {\n            obj = {};\n        }\n        var group = this.readers[node.namespaceURI ? this.namespaceAlias[node.namespaceURI]: this.defaultPrefix];\n        if(group) {\n            var local = node.localName || node.nodeName.split(\":\").pop();\n            var reader = group[local] || group[\"*\"];\n            if(reader) {\n                reader.apply(this, [node, obj]);\n            }\n        }\n        return obj;\n    },\n\n    /**\n     * Method: readChildNodes\n     * Shorthand for applying the named readers to all children of a node.\n     *     For each child of type 1 (element), <readSelf> is called.\n     *\n     * Parameters:\n     * node - {DOMElement} The node to be read (required).\n     * obj - {Object} The object to be modified (optional).\n     *\n     * Returns:\n     * {Object} The input object, modified.\n     */\n    readChildNodes: function(node, obj) {\n        if(!obj) {\n            obj = {};\n        }\n        var children = node.childNodes;\n        var child;\n        for(var i=0, len=children.length; i<len; ++i) {\n            child = children[i];\n            if(child.nodeType == 1) {\n                this.readNode(child, obj);\n            }\n        }\n        return obj;\n    },\n\n    /**\n     * Method: writeNode\n     * Shorthand for applying one of the named writers and appending the\n     *     results to a node.  If a qualified name is not provided for the\n     *     second argument (and a local name is used instead), the namespace\n     *     of the parent node will be assumed.\n     *\n     * Parameters:\n     * name - {String} The name of a node to generate.  If a qualified name\n     *     (e.g. \"pre:Name\") is used, the namespace prefix is assumed to be\n     *     in the <writers> group.  If a local name is used (e.g. \"Name\") then\n     *     the namespace of the parent is assumed.  If a local name is used\n     *     and no parent is supplied, then the default namespace is assumed.\n     * obj - {Object} Structure containing data for the writer.\n     * parent - {DOMElement} Result will be appended to this node.  If no parent\n     *     is supplied, the node will not be appended to anything.\n     *\n     * Returns:\n     * {DOMElement} The child node.\n     */\n    writeNode: function(name, obj, parent) {\n        var prefix, local;\n        var split = name.indexOf(\":\");\n        if(split > 0) {\n            prefix = name.substring(0, split);\n            local = name.substring(split + 1);\n        } else {\n            if(parent) {\n                prefix = this.namespaceAlias[parent.namespaceURI];\n            } else {\n                prefix = this.defaultPrefix;\n            }\n            local = name;\n        }\n        var child = this.writers[prefix][local].apply(this, [obj]);\n        if(parent) {\n            parent.appendChild(child);\n        }\n        return child;\n    },\n\n    /**\n     * APIMethod: getChildEl\n     * Get the first child element.  Optionally only return the first child\n     *     if it matches the given name and namespace URI.\n     *\n     * Parameters:\n     * node - {DOMElement} The parent node.\n     * name - {String} Optional node name (local) to search for.\n     * uri - {String} Optional namespace URI to search for.\n     *\n     * Returns:\n     * {DOMElement} The first child.  Returns null if no element is found, if\n     *     something significant besides an element is found, or if the element\n     *     found does not match the optional name and uri.\n     */\n    getChildEl: function(node, name, uri) {\n        return node && this.getThisOrNextEl(node.firstChild, name, uri);\n    },\n    \n    /**\n     * APIMethod: getNextEl\n     * Get the next sibling element.  Optionally get the first sibling only\n     *     if it matches the given local name and namespace URI.\n     *\n     * Parameters:\n     * node - {DOMElement} The node.\n     * name - {String} Optional local name of the sibling to search for.\n     * uri - {String} Optional namespace URI of the sibling to search for.\n     *\n     * Returns:\n     * {DOMElement} The next sibling element.  Returns null if no element is\n     *     found, something significant besides an element is found, or the\n     *     found element does not match the optional name and uri.\n     */\n    getNextEl: function(node, name, uri) {\n        return node && this.getThisOrNextEl(node.nextSibling, name, uri);\n    },\n    \n    /**\n     * Method: getThisOrNextEl\n     * Return this node or the next element node.  Optionally get the first\n     *     sibling with the given local name or namespace URI.\n     *\n     * Parameters:\n     * node - {DOMElement} The node.\n     * name - {String} Optional local name of the sibling to search for.\n     * uri - {String} Optional namespace URI of the sibling to search for.\n     *\n     * Returns:\n     * {DOMElement} The next sibling element.  Returns null if no element is\n     *     found, something significant besides an element is found, or the\n     *     found element does not match the query.\n     */\n    getThisOrNextEl: function(node, name, uri) {\n        outer: for(var sibling=node; sibling; sibling=sibling.nextSibling) {\n            switch(sibling.nodeType) {\n                case 1: // Element\n                    if((!name || name === (sibling.localName || sibling.nodeName.split(\":\").pop())) &&\n                       (!uri || uri === sibling.namespaceURI)) {\n                        // matches\n                        break outer;\n                    }\n                    sibling = null;\n                    break outer;\n                case 3: // Text\n                    if(/^\\s*$/.test(sibling.nodeValue)) {\n                        break;\n                    }\n                case 4: // CDATA\n                case 6: // ENTITY_NODE\n                case 12: // NOTATION_NODE\n                case 10: // DOCUMENT_TYPE_NODE\n                case 11: // DOCUMENT_FRAGMENT_NODE\n                    sibling = null;\n                    break outer;\n            } // ignore comments and processing instructions\n        }\n        return sibling || null;\n    },\n    \n    /**\n     * APIMethod: lookupNamespaceURI\n     * Takes a prefix and returns the namespace URI associated with it on the given\n     *     node if found (and null if not). Supplying null for the prefix will\n     *     return the default namespace.\n     *\n     * For browsers that support it, this calls the native lookupNamesapceURI\n     *     function.  In other browsers, this is an implementation of\n     *     http://www.w3.org/TR/DOM-Level-3-Core/core.html#Node3-lookupNamespaceURI.\n     *\n     * For browsers that don't support the attribute.ownerElement property, this\n     *     method cannot be called on attribute nodes.\n     *     \n     * Parameters:\n     * node - {DOMElement} The node from which to start looking.\n     * prefix - {String} The prefix to lookup or null to lookup the default namespace.\n     * \n     * Returns:\n     * {String} The namespace URI for the given prefix.  Returns null if the prefix\n     *     cannot be found or the node is the wrong type.\n     */\n    lookupNamespaceURI: function(node, prefix) {\n        var uri = null;\n        if(node) {\n            if(node.lookupNamespaceURI) {\n                uri = node.lookupNamespaceURI(prefix);\n            } else {\n                outer: switch(node.nodeType) {\n                    case 1: // ELEMENT_NODE\n                        if(node.namespaceURI !== null && node.prefix === prefix) {\n                            uri = node.namespaceURI;\n                            break outer;\n                        }\n                        var len = node.attributes.length;\n                        if(len) {\n                            var attr;\n                            for(var i=0; i<len; ++i) {\n                                attr = node.attributes[i];\n                                if(attr.prefix === \"xmlns\" && attr.name === \"xmlns:\" + prefix) {\n                                    uri = attr.value || null;\n                                    break outer;\n                                } else if(attr.name === \"xmlns\" && prefix === null) {\n                                    uri = attr.value || null;\n                                    break outer;\n                                }\n                            }\n                        }\n                        uri = this.lookupNamespaceURI(node.parentNode, prefix);\n                        break outer;\n                    case 2: // ATTRIBUTE_NODE\n                        uri = this.lookupNamespaceURI(node.ownerElement, prefix);\n                        break outer;\n                    case 9: // DOCUMENT_NODE\n                        uri = this.lookupNamespaceURI(node.documentElement, prefix);\n                        break outer;\n                    case 6: // ENTITY_NODE\n                    case 12: // NOTATION_NODE\n                    case 10: // DOCUMENT_TYPE_NODE\n                    case 11: // DOCUMENT_FRAGMENT_NODE\n                        break outer;\n                    default: \n                        // TEXT_NODE (3), CDATA_SECTION_NODE (4), ENTITY_REFERENCE_NODE (5),\n                        // PROCESSING_INSTRUCTION_NODE (7), COMMENT_NODE (8)\n                        uri =  this.lookupNamespaceURI(node.parentNode, prefix);\n                        break outer;\n                }\n            }\n        }\n        return uri;\n    },\n    \n    /**\n     * Method: getXMLDoc\n     * Get an XML document for nodes that are not supported in HTML (e.g.\n     * createCDATASection). On IE, this will either return an existing or\n     * create a new <xmldom> on the instance. On other browsers, this will\n     * either return an existing or create a new shared document (see\n     * <OpenLayers.Format.XML.document>).\n     *\n     * Returns:\n     * {XMLDocument}\n     */\n    getXMLDoc: function() {\n        if (!OpenLayers.Format.XML.document && !this.xmldom) {\n            if (document.implementation && document.implementation.createDocument) {\n                OpenLayers.Format.XML.document =\n                    document.implementation.createDocument(\"\", \"\", null);\n            } else if (!this.xmldom && OpenLayers.Format.XML.supportActiveX) {\n                this.xmldom = new ActiveXObject(\"Microsoft.XMLDOM\");\n            }\n        }\n        return OpenLayers.Format.XML.document || this.xmldom;\n    },\n\n    CLASS_NAME: \"OpenLayers.Format.XML\" \n\n});     \n\nOpenLayers.Format.XML.CONTENT_TYPE = {EMPTY: 0, SIMPLE: 1, COMPLEX: 2, MIXED: 3};\n\n/**\n * APIFunction: OpenLayers.Format.XML.lookupNamespaceURI\n * Takes a prefix and returns the namespace URI associated with it on the given\n *     node if found (and null if not). Supplying null for the prefix will\n *     return the default namespace.\n *\n * For browsers that support it, this calls the native lookupNamesapceURI\n *     function.  In other browsers, this is an implementation of\n *     http://www.w3.org/TR/DOM-Level-3-Core/core.html#Node3-lookupNamespaceURI.\n *\n * For browsers that don't support the attribute.ownerElement property, this\n *     method cannot be called on attribute nodes.\n *     \n * Parameters:\n * node - {DOMElement} The node from which to start looking.\n * prefix - {String} The prefix to lookup or null to lookup the default namespace.\n * \n * Returns:\n * {String} The namespace URI for the given prefix.  Returns null if the prefix\n *     cannot be found or the node is the wrong type.\n */\nOpenLayers.Format.XML.lookupNamespaceURI = OpenLayers.Function.bind(\n    OpenLayers.Format.XML.prototype.lookupNamespaceURI,\n    OpenLayers.Format.XML.prototype\n);\n\n/**\n * Property: OpenLayers.Format.XML.document\n * {XMLDocument} XML document to reuse for creating non-HTML compliant nodes,\n * like document.createCDATASection.\n */\nOpenLayers.Format.XML.document = null;\n\n/**\n * APIFunction: OpenLayers.Format.XML.supportActiveX\n * Returns a poolean flag to check if this browser uses ActiveX.\n */\nOpenLayers.Format.XML.supportActiveX = (function () {\n    return (Object.getOwnPropertyDescriptor &&\n            Object.getOwnPropertyDescriptor(window, \"ActiveXObject\")) ||\n            (\"ActiveXObject\" in window);\n})();\n/* ======================================================================\n    OpenLayers/Format/KML.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/BaseTypes/Date.js\n * @requires OpenLayers/Format/XML.js\n * @requires OpenLayers/Feature/Vector.js\n * @requires OpenLayers/Geometry/Point.js\n * @requires OpenLayers/Geometry/LineString.js\n * @requires OpenLayers/Geometry/Polygon.js\n * @requires OpenLayers/Geometry/Collection.js\n * @requires OpenLayers/Request/XMLHttpRequest.js\n * @requires OpenLayers/Projection.js\n */\n\n/**\n * Class: OpenLayers.Format.KML\n * Read/Write KML. Create a new instance with the <OpenLayers.Format.KML>\n *     constructor. \n * \n * Inherits from:\n *  - <OpenLayers.Format.XML>\n */\nOpenLayers.Format.KML = OpenLayers.Class(OpenLayers.Format.XML, {\n    \n    /**\n     * Property: namespaces\n     * {Object} Mapping of namespace aliases to namespace URIs.\n     */\n    namespaces: {\n        kml: \"http://www.opengis.net/kml/2.2\",\n        gx: \"http://www.google.com/kml/ext/2.2\"\n    },\n\n    /**\n     * APIProperty: kmlns\n     * {String} KML Namespace to use. Defaults to 2.0 namespace.\n     */\n    kmlns: \"http://earth.google.com/kml/2.0\",\n    \n    /** \n     * APIProperty: placemarksDesc\n     * {String} Name of the placemarks.  Default is \"No description available\".\n     */\n    placemarksDesc: \"No description available\",\n    \n    /** \n     * APIProperty: foldersName\n     * {String} Name of the folders.  Default is \"OpenLayers export\".\n     *          If set to null, no name element will be created.\n     */\n    foldersName: \"OpenLayers export\",\n    \n    /** \n     * APIProperty: foldersDesc\n     * {String} Description of the folders. Default is \"Exported on [date].\"\n     *          If set to null, no description element will be created.\n     */\n    foldersDesc: \"Exported on \" + new Date(),\n    \n    /**\n     * APIProperty: extractAttributes\n     * {Boolean} Extract attributes from KML.  Default is true.\n     *           Extracting styleUrls requires this to be set to true\n     *           Note that currently only Data and SimpleData \n     *           elements are handled.\n     */\n    extractAttributes: true,\n    \n    /**\n     * APIProperty: kvpAttributes\n     * {Boolean} Only used if extractAttributes is true.\n     *           If set to true, attributes will be simple\n     *           key-value pairs, compatible with other formats,\n     *           Any displayName elements will be ignored.\n     *           If set to false, attributes will be objects,\n     *           retaining any displayName elements, but not\n     *           compatible with other formats. Any CDATA in\n     *           displayName will be read in as a string value.\n     *           Default is false.\n     */\n    kvpAttributes: false,\n    \n    /**\n     * Property: extractStyles\n     * {Boolean} Extract styles from KML.  Default is false.\n     *           Extracting styleUrls also requires extractAttributes to be\n     *           set to true\n     */\n    extractStyles: false,\n    \n    /**\n     * APIProperty: extractTracks\n     * {Boolean} Extract gx:Track elements from Placemark elements.  Default\n     *     is false.  If true, features will be generated for all points in\n     *     all gx:Track elements.  Features will have a when (Date) attribute\n     *     based on when elements in the track.  If tracks include angle\n     *     elements, features will have heading, tilt, and roll attributes.\n     *     If track point coordinates have three values, features will have\n     *     an altitude attribute with the third coordinate value.\n     */\n    extractTracks: false,\n    \n    /**\n     * APIProperty: trackAttributes\n     * {Array} If <extractTracks> is true, points within gx:Track elements will \n     *     be parsed as features with when, heading, tilt, and roll attributes.\n     *     Any additional attribute names can be provided in <trackAttributes>.\n     */\n    trackAttributes: null,\n    \n    /**\n     * Property: internalns\n     * {String} KML Namespace to use -- defaults to the namespace of the\n     *     Placemark node being parsed, but falls back to kmlns. \n     */\n    internalns: null,\n\n    /**\n     * Property: features\n     * {Array} Array of features\n     *     \n     */\n    features: null,\n\n    /**\n     * Property: styles\n     * {Object} Storage of style objects\n     *     \n     */\n    styles: null,\n    \n    /**\n     * Property: styleBaseUrl\n     * {String}\n     */\n    styleBaseUrl: \"\",\n\n    /**\n     * Property: fetched\n     * {Object} Storage of KML URLs that have been fetched before\n     *     in order to prevent reloading them.\n     */\n    fetched: null,\n\n    /**\n     * APIProperty: maxDepth\n     * {Integer} Maximum depth for recursive loading external KML URLs \n     *           Defaults to 0: do no external fetching\n     */\n    maxDepth: 0,\n\n    /**\n     * Constructor: OpenLayers.Format.KML\n     * Create a new parser for KML.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n    initialize: function(options) {\n        // compile regular expressions once instead of every time they are used\n        this.regExes = {\n            trimSpace: (/^\\s*|\\s*$/g),\n            removeSpace: (/\\s*/g),\n            splitSpace: (/\\s+/),\n            trimComma: (/\\s*,\\s*/g),\n            kmlColor: (/(\\w{2})(\\w{2})(\\w{2})(\\w{2})/),\n            kmlIconPalette: (/root:\\/\\/icons\\/palette-(\\d+)(\\.\\w+)/),\n            straightBracket: (/\\$\\[(.*?)\\]/g)\n        };\n        // KML coordinates are always in longlat WGS84\n        this.externalProjection = new OpenLayers.Projection(\"EPSG:4326\");\n\n        OpenLayers.Format.XML.prototype.initialize.apply(this, [options]);\n    },\n\n    /**\n     * APIMethod: read\n     * Read data from a string, and return a list of features. \n     * \n     * Parameters: \n     * data    - {String} or {DOMElement} data to read/parse.\n     *\n     * Returns:\n     * {Array(<OpenLayers.Feature.Vector>)} List of features.\n     */\n    read: function(data) {\n        this.features = [];\n        this.styles   = {};\n        this.fetched  = {};\n\n        // Set default options \n        var options = {\n            depth: 0,\n            styleBaseUrl: this.styleBaseUrl\n        };\n\n        return this.parseData(data, options);\n    },\n\n    /**\n     * Method: parseData\n     * Read data from a string, and return a list of features. \n     * \n     * Parameters: \n     * data    - {String} or {DOMElement} data to read/parse.\n     * options - {Object} Hash of options\n     *\n     * Returns:\n     * {Array(<OpenLayers.Feature.Vector>)} List of features.\n     */\n    parseData: function(data, options) {\n        if(typeof data == \"string\") {\n            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);\n        }\n\n        // Loop through the following node types in this order and\n        // process the nodes found \n        var types = [\"Link\", \"NetworkLink\", \"Style\", \"StyleMap\", \"Placemark\"];\n        for(var i=0, len=types.length; i<len; ++i) {\n            var type = types[i];\n\n            var nodes = this.getElementsByTagNameNS(data, \"*\", type);\n\n            // skip to next type if no nodes are found\n            if(nodes.length == 0) { \n                continue;\n            }\n\n            switch (type.toLowerCase()) {\n\n                // Fetch external links \n                case \"link\":\n                case \"networklink\":\n                    this.parseLinks(nodes, options);\n                    break;\n\n                // parse style information\n                case \"style\":\n                    if (this.extractStyles) {\n                        this.parseStyles(nodes, options);\n                    }\n                    break;\n                case \"stylemap\":\n                    if (this.extractStyles) {\n                        this.parseStyleMaps(nodes, options);\n                    }\n                    break;\n\n                // parse features\n                case \"placemark\":\n                    this.parseFeatures(nodes, options);\n                    break;\n            }\n        }\n        \n        return this.features;\n    },\n\n    /**\n     * Method: parseLinks\n     * Finds URLs of linked KML documents and fetches them\n     * \n     * Parameters: \n     * nodes   - {Array} of {DOMElement} data to read/parse.\n     * options - {Object} Hash of options\n     * \n     */\n    parseLinks: function(nodes, options) {\n        \n        // Fetch external links <NetworkLink> and <Link>\n        // Don't do anything if we have reached our maximum depth for recursion\n        if (options.depth >= this.maxDepth) {\n            return false;\n        }\n\n        // increase depth\n        var newOptions = OpenLayers.Util.extend({}, options);\n        newOptions.depth++;\n\n        for(var i=0, len=nodes.length; i<len; i++) {\n            var href = this.parseProperty(nodes[i], \"*\", \"href\");\n            if(href && !this.fetched[href]) {\n                this.fetched[href] = true; // prevent reloading the same urls\n                var data = this.fetchLink(href);\n                if (data) {\n                    this.parseData(data, newOptions);\n                }\n            } \n        }\n\n    },\n\n    /**\n     * Method: fetchLink\n     * Fetches a URL and returns the result\n     * \n     * Parameters: \n     * href  - {String} url to be fetched\n     * \n     */\n    fetchLink: function(href) {\n        var request = OpenLayers.Request.GET({url: href, async: false});\n        if (request) {\n            return request.responseText;\n        }\n    },\n\n    /**\n     * Method: parseStyles\n     * Parses <Style> nodes\n     * \n     * Parameters: \n     * nodes    - {Array} of {DOMElement} data to read/parse.\n     * options  - {Object} Hash of options\n     * \n     */\n    parseStyles: function(nodes, options) {\n        for(var i=0, len=nodes.length; i<len; i++) {\n            var style = this.parseStyle(nodes[i]);\n            if(style) {\n                var styleName = (options.styleBaseUrl || \"\") + \"#\" + style.id;\n                \n                this.styles[styleName] = style;\n            }\n        }\n    },\n\n    /**\n     * Method: parseKmlColor\n     * Parses a kml color (in 'aabbggrr' format) and returns the corresponding \n     * color and opacity or null if the color is invalid.\n     *\n     * Parameters: \n     * kmlColor - {String} a kml formatted color\n     *\n     * Returns:\n     * {Object}\n     */\n    parseKmlColor: function(kmlColor) {\n        var color = null;\n        if (kmlColor) {\n            var matches = kmlColor.match(this.regExes.kmlColor);\n            if (matches) {\n                color = {\n                    color: '#' + matches[4] + matches[3] + matches[2],\n                    opacity: parseInt(matches[1], 16) / 255\n                };\n            }\n        }\n        return color;\n    },\n\n    /**\n     * Method: parseStyle\n     * Parses the children of a <Style> node and builds the style hash\n     * accordingly\n     * \n     * Parameters: \n     * node - {DOMElement} <Style> node\n     * \n     */\n    parseStyle: function(node) {\n        var style = {};\n        \n        var types = [\"LineStyle\", \"PolyStyle\", \"IconStyle\", \"BalloonStyle\", \n                     \"LabelStyle\"];\n        var type, styleTypeNode, nodeList, geometry, parser;\n        for(var i=0, len=types.length; i<len; ++i) {\n            type = types[i];\n            styleTypeNode = this.getElementsByTagNameNS(node, \"*\", type)[0];\n            if(!styleTypeNode) { \n                continue;\n            }\n\n            // only deal with first geometry of this type\n            switch (type.toLowerCase()) {\n                case \"linestyle\":\n                    var kmlColor = this.parseProperty(styleTypeNode, \"*\", \"color\");\n                    var color = this.parseKmlColor(kmlColor);\n                    if (color) {\n                        style[\"strokeColor\"] = color.color;\n                        style[\"strokeOpacity\"] = color.opacity;\n                    }\n                    \n                    var width = this.parseProperty(styleTypeNode, \"*\", \"width\");\n                    if (width) {\n                        style[\"strokeWidth\"] = width;\n                    }\n                    break;\n\n                case \"polystyle\":\n                    var kmlColor = this.parseProperty(styleTypeNode, \"*\", \"color\");\n                    var color = this.parseKmlColor(kmlColor);\n                    if (color) {\n                        style[\"fillOpacity\"] = color.opacity;\n                        style[\"fillColor\"] = color.color;\n                    }\n                    // Check if fill is disabled\n                    var fill = this.parseProperty(styleTypeNode, \"*\", \"fill\");\n                    if (fill == \"0\") {\n                        style[\"fillColor\"] = \"none\";\n                    }\n                    // Check if outline is disabled\n                    var outline = this.parseProperty(styleTypeNode, \"*\", \"outline\");\n                    if (outline == \"0\") {\n                        style[\"strokeWidth\"] = \"0\";\n                    }\n                   \n                    break;\n\n                case \"iconstyle\":\n                    // set scale\n                    var scale = parseFloat(this.parseProperty(styleTypeNode, \n                                                          \"*\", \"scale\") || 1);\n  \n                    // set default width and height of icon\n                    var width = 32 * scale;\n                    var height = 32 * scale;\n\n                    var iconNode = this.getElementsByTagNameNS(styleTypeNode, \n                                               \"*\", \n                                               \"Icon\")[0];\n                    if (iconNode) {\n                        var href = this.parseProperty(iconNode, \"*\", \"href\");\n                        if (href) {                                                   \n\n                            var w = this.parseProperty(iconNode, \"*\", \"w\");\n                            var h = this.parseProperty(iconNode, \"*\", \"h\");\n\n                            // Settings for Google specific icons that are 64x64\n                            // We set the width and height to 64 and halve the\n                            // scale to prevent icons from being too big\n                            var google = \"http://maps.google.com/mapfiles/kml\";\n                            if (OpenLayers.String.startsWith(\n                                                 href, google) && !w && !h) {\n                                w = 64;\n                                h = 64;\n                                scale = scale / 2;\n                            }\n                                \n                            // if only dimension is defined, make sure the\n                            // other one has the same value\n                            w = w || h;\n                            h = h || w;\n\n                            if (w) {\n                                width = parseInt(w) * scale;\n                            }\n\n                            if (h) {\n                                height = parseInt(h) * scale;\n                            }\n\n                            // support for internal icons \n                            //    (/root://icons/palette-x.png)\n                            // x and y tell the position on the palette:\n                            // - in pixels\n                            // - starting from the left bottom\n                            // We translate that to a position in the list \n                            // and request the appropriate icon from the \n                            // google maps website\n                            var matches = href.match(this.regExes.kmlIconPalette);\n                            if (matches)  {\n                                var palette = matches[1];\n                                var file_extension = matches[2];\n\n                                var x = this.parseProperty(iconNode, \"*\", \"x\");\n                                var y = this.parseProperty(iconNode, \"*\", \"y\");\n\n                                var posX = x ? x/32 : 0;\n                                var posY = y ? (7 - y/32) : 7;\n\n                                var pos = posY * 8 + posX;\n                                href = \"http://maps.google.com/mapfiles/kml/pal\" \n                                     + palette + \"/icon\" + pos + file_extension;\n                            }\n\n                            style[\"graphicOpacity\"] = 1; // fully opaque\n                            style[\"externalGraphic\"] = href;\n                        }\n\n                    }\n\n\n                    // hotSpots define the offset for an Icon\n                    var hotSpotNode = this.getElementsByTagNameNS(styleTypeNode, \n                                               \"*\", \n                                               \"hotSpot\")[0];\n                    if (hotSpotNode) {\n                        var x = parseFloat(hotSpotNode.getAttribute(\"x\"));\n                        var y = parseFloat(hotSpotNode.getAttribute(\"y\"));\n\n                        var xUnits = hotSpotNode.getAttribute(\"xunits\");\n                        if (xUnits == \"pixels\") {\n                            style[\"graphicXOffset\"] = -x * scale;\n                        }\n                        else if (xUnits == \"insetPixels\") {\n                            style[\"graphicXOffset\"] = -width + (x * scale);\n                        }\n                        else if (xUnits == \"fraction\") {\n                            style[\"graphicXOffset\"] = -width * x;\n                        }\n\n                        var yUnits = hotSpotNode.getAttribute(\"yunits\");\n                        if (yUnits == \"pixels\") {\n                            style[\"graphicYOffset\"] = -height + (y * scale) + 1;\n                        }\n                        else if (yUnits == \"insetPixels\") {\n                            style[\"graphicYOffset\"] = -(y * scale) + 1;\n                        }\n                        else if (yUnits == \"fraction\") {\n                            style[\"graphicYOffset\"] =  -height * (1 - y) + 1;\n                        }\n                    }\n\n                    style[\"graphicWidth\"] = width;\n                    style[\"graphicHeight\"] = height;\n                    break;\n\n                case \"balloonstyle\":\n                    var balloonStyle = OpenLayers.Util.getXmlNodeValue(\n                                            styleTypeNode);\n                    if (balloonStyle) {\n                        style[\"balloonStyle\"] = balloonStyle.replace(\n                                       this.regExes.straightBracket, \"${$1}\");\n                    }\n                    break;\n                case \"labelstyle\":\n                    var kmlColor = this.parseProperty(styleTypeNode, \"*\", \"color\");\n                    var color = this.parseKmlColor(kmlColor);\n                    if (color) {\n                        style[\"fontColor\"] = color.color;\n                        style[\"fontOpacity\"] = color.opacity;\n                    }\n                    break;\n\n                default:\n            }\n        }\n\n        // Some polygons have no line color, so we use the fillColor for that\n        if (!style[\"strokeColor\"] && style[\"fillColor\"]) {\n            style[\"strokeColor\"] = style[\"fillColor\"];\n        }\n\n        var id = node.getAttribute(\"id\");\n        if (id && style) {\n            style.id = id;\n        }\n\n        return style;\n    },\n\n    /**\n     * Method: parseStyleMaps\n     * Parses <StyleMap> nodes, but only uses the 'normal' key\n     * \n     * Parameters: \n     * nodes    - {Array} of {DOMElement} data to read/parse.\n     * options  - {Object} Hash of options\n     * \n     */\n    parseStyleMaps: function(nodes, options) {\n        // Only the default or \"normal\" part of the StyleMap is processed now\n        // To do the select or \"highlight\" bit, we'd need to change lots more\n\n        for(var i=0, len=nodes.length; i<len; i++) {\n            var node = nodes[i];\n            var pairs = this.getElementsByTagNameNS(node, \"*\", \n                            \"Pair\");\n\n            var id = node.getAttribute(\"id\");\n            for (var j=0, jlen=pairs.length; j<jlen; j++) {\n                var pair = pairs[j];\n                // Use the shortcut in the SLD format to quickly retrieve the \n                // value of a node. Maybe it's good to have a method in \n                // Format.XML to do this\n                var key = this.parseProperty(pair, \"*\", \"key\");\n                var styleUrl = this.parseProperty(pair, \"*\", \"styleUrl\");\n\n                if (styleUrl && key == \"normal\") {\n                    this.styles[(options.styleBaseUrl || \"\") + \"#\" + id] =\n                        this.styles[(options.styleBaseUrl || \"\") + styleUrl];\n                }\n\n                // TODO: implement the \"select\" part\n                //if (styleUrl && key == \"highlight\") {\n                //}\n\n            }\n        }\n\n    },\n\n\n    /**\n     * Method: parseFeatures\n     * Loop through all Placemark nodes and parse them.\n     * Will create a list of features\n     * \n     * Parameters: \n     * nodes    - {Array} of {DOMElement} data to read/parse.\n     * options  - {Object} Hash of options\n     * \n     */\n    parseFeatures: function(nodes, options) {\n        var features = [];\n        for(var i=0, len=nodes.length; i<len; i++) {\n            var featureNode = nodes[i];\n            var feature = this.parseFeature.apply(this,[featureNode]) ;\n            if(feature) {\n\n                // Create reference to styleUrl \n                if (this.extractStyles && feature.attributes &&\n                    feature.attributes.styleUrl) {\n                    feature.style = this.getStyle(feature.attributes.styleUrl, options);\n                }\n\n                if (this.extractStyles) {\n                    // Make sure that <Style> nodes within a placemark are \n                    // processed as well\n                    var inlineStyleNode = this.getElementsByTagNameNS(featureNode,\n                                                        \"*\",\n                                                        \"Style\")[0];\n                    if (inlineStyleNode) {\n                        var inlineStyle= this.parseStyle(inlineStyleNode);\n                        if (inlineStyle) {\n                            feature.style = OpenLayers.Util.extend(\n                                feature.style, inlineStyle\n                            );\n                        }\n                    }\n                }\n\n                // check if gx:Track elements should be parsed\n                if (this.extractTracks) {\n                    var tracks = this.getElementsByTagNameNS(\n                        featureNode, this.namespaces.gx, \"Track\"\n                    );\n                    if (tracks && tracks.length > 0) {\n                        var track = tracks[0];\n                        var container = {\n                            features: [],\n                            feature: feature\n                        };\n                        this.readNode(track, container);\n                        if (container.features.length > 0) {\n                            features.push.apply(features, container.features);\n                        }\n                    }\n                } else {\n                    // add feature to list of features\n                    features.push(feature);                    \n                }\n            } else {\n                throw \"Bad Placemark: \" + i;\n            }\n        }\n\n        // add new features to existing feature list\n        this.features = this.features.concat(features);\n    },\n    \n    /**\n     * Property: readers\n     * Contains public functions, grouped by namespace prefix, that will\n     *     be applied when a namespaced node is found matching the function\n     *     name.  The function will be applied in the scope of this parser\n     *     with two arguments: the node being read and a context object passed\n     *     from the parent.\n     */\n    readers: {\n        \"kml\": {\n            \"when\": function(node, container) {\n                container.whens.push(OpenLayers.Date.parse(\n                    this.getChildValue(node)\n                ));\n            },\n            \"_trackPointAttribute\": function(node, container) {\n                var name = node.nodeName.split(\":\").pop();\n                container.attributes[name].push(this.getChildValue(node));\n            }\n        },\n        \"gx\": {\n            \"Track\": function(node, container) {\n                var obj = {\n                    whens: [],\n                    points: [],\n                    angles: []\n                };\n                if (this.trackAttributes) {\n                    var name;\n                    obj.attributes = {};\n                    for (var i=0, ii=this.trackAttributes.length; i<ii; ++i) {\n                        name = this.trackAttributes[i];\n                        obj.attributes[name] = [];\n                        if (!(name in this.readers.kml)) {\n                            this.readers.kml[name] = this.readers.kml._trackPointAttribute;\n                        }\n                    }\n                }\n                this.readChildNodes(node, obj);\n                if (obj.whens.length !== obj.points.length) {\n                    throw new Error(\"gx:Track with unequal number of when (\" +\n                                    obj.whens.length + \") and gx:coord (\" +\n                                    obj.points.length + \") elements.\");\n                }\n                var hasAngles = obj.angles.length > 0;\n                if (hasAngles && obj.whens.length !== obj.angles.length) {\n                    throw new Error(\"gx:Track with unequal number of when (\" +\n                                    obj.whens.length + \") and gx:angles (\" +\n                                    obj.angles.length + \") elements.\");\n                }\n                var feature, point, angles;\n                for (var i=0, ii=obj.whens.length; i<ii; ++i) {\n                    feature = container.feature.clone();\n                    feature.fid = container.feature.fid || container.feature.id;\n                    point = obj.points[i];\n                    feature.geometry = point;\n                    if (\"z\" in point) {\n                        feature.attributes.altitude = point.z;\n                    }\n                    if (this.internalProjection && this.externalProjection) {\n                        feature.geometry.transform(\n                            this.externalProjection, this.internalProjection\n                        ); \n                    }\n                    if (this.trackAttributes) {\n                        for (var j=0, jj=this.trackAttributes.length; j<jj; ++j) {\n                            var name = this.trackAttributes[j];\n                            feature.attributes[name] = obj.attributes[name][i];\n                        }\n                    }\n                    feature.attributes.when = obj.whens[i];\n                    feature.attributes.trackId = container.feature.id;\n                    if (hasAngles) {\n                        angles = obj.angles[i];\n                        feature.attributes.heading = parseFloat(angles[0]);\n                        feature.attributes.tilt = parseFloat(angles[1]);\n                        feature.attributes.roll = parseFloat(angles[2]);\n                    }\n                    container.features.push(feature);\n                }\n            },\n            \"coord\": function(node, container) {\n                var str = this.getChildValue(node);\n                var coords = str.replace(this.regExes.trimSpace, \"\").split(/\\s+/);\n                var point = new OpenLayers.Geometry.Point(coords[0], coords[1]);\n                if (coords.length > 2) {\n                    point.z = parseFloat(coords[2]);\n                }\n                container.points.push(point);\n            },\n            \"angles\": function(node, container) {\n                var str = this.getChildValue(node);\n                var parts = str.replace(this.regExes.trimSpace, \"\").split(/\\s+/);\n                container.angles.push(parts);\n            }\n        }\n    },\n    \n    /**\n     * Method: parseFeature\n     * This function is the core of the KML parsing code in OpenLayers.\n     *     It creates the geometries that are then attached to the returned\n     *     feature, and calls parseAttributes() to get attribute data out.\n     *\n     * Parameters:\n     * node - {DOMElement}\n     *\n     * Returns:\n     * {<OpenLayers.Feature.Vector>} A vector feature.\n     */\n    parseFeature: function(node) {\n        // only accept one geometry per feature - look for highest \"order\"\n        var order = [\"MultiGeometry\", \"Polygon\", \"LineString\", \"Point\"];\n        var type, nodeList, geometry, parser;\n        for(var i=0, len=order.length; i<len; ++i) {\n            type = order[i];\n            this.internalns = node.namespaceURI ? \n                    node.namespaceURI : this.kmlns;\n            nodeList = this.getElementsByTagNameNS(node, \n                                                   this.internalns, type);\n            if(nodeList.length > 0) {\n                // only deal with first geometry of this type\n                var parser = this.parseGeometry[type.toLowerCase()];\n                if(parser) {\n                    geometry = parser.apply(this, [nodeList[0]]);\n                    if (this.internalProjection && this.externalProjection) {\n                        geometry.transform(this.externalProjection, \n                                           this.internalProjection); \n                    }                       \n                } else {\n                    throw new TypeError(\"Unsupported geometry type: \" + type);\n                }\n                // stop looking for different geometry types\n                break;\n            }\n        }\n\n        // construct feature (optionally with attributes)\n        var attributes;\n        if(this.extractAttributes) {\n            attributes = this.parseAttributes(node);\n        }\n        var feature = new OpenLayers.Feature.Vector(geometry, attributes);\n\n        var fid = node.getAttribute(\"id\") || node.getAttribute(\"name\");\n        if(fid != null) {\n            feature.fid = fid;\n        }\n\n        return feature;\n    },        \n    \n    /**\n     * Method: getStyle\n     * Retrieves a style from a style hash using styleUrl as the key\n     * If the styleUrl doesn't exist yet, we try to fetch it \n     * Internet\n     * \n     * Parameters: \n     * styleUrl  - {String} URL of style\n     * options   - {Object} Hash of options \n     *\n     * Returns:\n     * {Object}  - (reference to) Style hash\n     */\n    getStyle: function(styleUrl, options) {\n\n        var styleBaseUrl = OpenLayers.Util.removeTail(styleUrl);\n\n        var newOptions = OpenLayers.Util.extend({}, options);\n        newOptions.depth++;\n        newOptions.styleBaseUrl = styleBaseUrl;\n\n        // Fetch remote Style URLs (if not fetched before) \n        if (!this.styles[styleUrl] \n                && !OpenLayers.String.startsWith(styleUrl, \"#\") \n                && newOptions.depth <= this.maxDepth\n                && !this.fetched[styleBaseUrl] ) {\n\n            var data = this.fetchLink(styleBaseUrl);\n            if (data) {\n                this.parseData(data, newOptions);\n            }\n\n        }\n\n        // return requested style\n        var style = OpenLayers.Util.extend({}, this.styles[styleUrl]);\n        return style;\n    },\n    \n    /**\n     * Property: parseGeometry\n     * Properties of this object are the functions that parse geometries based\n     *     on their type.\n     */\n    parseGeometry: {\n        \n        /**\n         * Method: parseGeometry.point\n         * Given a KML node representing a point geometry, create an OpenLayers\n         *     point geometry.\n         *\n         * Parameters:\n         * node - {DOMElement} A KML Point node.\n         *\n         * Returns:\n         * {<OpenLayers.Geometry.Point>} A point geometry.\n         */\n        point: function(node) {\n            var nodeList = this.getElementsByTagNameNS(node, this.internalns,\n                                                       \"coordinates\");\n            var coords = [];\n            if(nodeList.length > 0) {\n                var coordString = nodeList[0].firstChild.nodeValue;\n                coordString = coordString.replace(this.regExes.removeSpace, \"\");\n                coords = coordString.split(\",\");\n            }\n\n            var point = null;\n            if(coords.length > 1) {\n                // preserve third dimension\n                if(coords.length == 2) {\n                    coords[2] = null;\n                }\n                point = new OpenLayers.Geometry.Point(coords[0], coords[1],\n                                                      coords[2]);\n            } else {\n                throw \"Bad coordinate string: \" + coordString;\n            }\n            return point;\n        },\n        \n        /**\n         * Method: parseGeometry.linestring\n         * Given a KML node representing a linestring geometry, create an\n         *     OpenLayers linestring geometry.\n         *\n         * Parameters:\n         * node - {DOMElement} A KML LineString node.\n         *\n         * Returns:\n         * {<OpenLayers.Geometry.LineString>} A linestring geometry.\n         */\n        linestring: function(node, ring) {\n            var nodeList = this.getElementsByTagNameNS(node, this.internalns,\n                                                       \"coordinates\");\n            var line = null;\n            if(nodeList.length > 0) {\n                var coordString = this.getChildValue(nodeList[0]);\n\n                coordString = coordString.replace(this.regExes.trimSpace,\n                                                  \"\");\n                coordString = coordString.replace(this.regExes.trimComma,\n                                                  \",\");\n                var pointList = coordString.split(this.regExes.splitSpace);\n                var numPoints = pointList.length;\n                var points = new Array(numPoints);\n                var coords, numCoords;\n                for(var i=0; i<numPoints; ++i) {\n                    coords = pointList[i].split(\",\");\n                    numCoords = coords.length;\n                    if(numCoords > 1) {\n                        if(coords.length == 2) {\n                            coords[2] = null;\n                        }\n                        points[i] = new OpenLayers.Geometry.Point(coords[0],\n                                                                  coords[1],\n                                                                  coords[2]);\n                    } else {\n                        throw \"Bad LineString point coordinates: \" +\n                              pointList[i];\n                    }\n                }\n                if(numPoints) {\n                    if(ring) {\n                        line = new OpenLayers.Geometry.LinearRing(points);\n                    } else {\n                        line = new OpenLayers.Geometry.LineString(points);\n                    }\n                } else {\n                    throw \"Bad LineString coordinates: \" + coordString;\n                }\n            }\n\n            return line;\n        },\n        \n        /**\n         * Method: parseGeometry.polygon\n         * Given a KML node representing a polygon geometry, create an\n         *     OpenLayers polygon geometry.\n         *\n         * Parameters:\n         * node - {DOMElement} A KML Polygon node.\n         *\n         * Returns:\n         * {<OpenLayers.Geometry.Polygon>} A polygon geometry.\n         */\n        polygon: function(node) {\n            var nodeList = this.getElementsByTagNameNS(node, this.internalns,\n                                                       \"LinearRing\");\n            var numRings = nodeList.length;\n            var components = new Array(numRings);\n            if(numRings > 0) {\n                // this assumes exterior ring first, inner rings after\n                var ring;\n                for(var i=0, len=nodeList.length; i<len; ++i) {\n                    ring = this.parseGeometry.linestring.apply(this,\n                                                        [nodeList[i], true]);\n                    if(ring) {\n                        components[i] = ring;\n                    } else {\n                        throw \"Bad LinearRing geometry: \" + i;\n                    }\n                }\n            }\n            return new OpenLayers.Geometry.Polygon(components);\n        },\n        \n        /**\n         * Method: parseGeometry.multigeometry\n         * Given a KML node representing a multigeometry, create an\n         *     OpenLayers geometry collection.\n         *\n         * Parameters:\n         * node - {DOMElement} A KML MultiGeometry node.\n         *\n         * Returns:\n         * {<OpenLayers.Geometry.Collection>} A geometry collection.\n         */\n        multigeometry: function(node) {\n            var child, parser;\n            var parts = [];\n            var children = node.childNodes;\n            for(var i=0, len=children.length; i<len; ++i ) {\n                child = children[i];\n                if(child.nodeType == 1) {\n                    var type = (child.prefix) ?\n                            child.nodeName.split(\":\")[1] :\n                            child.nodeName;\n                    var parser = this.parseGeometry[type.toLowerCase()];\n                    if(parser) {\n                        parts.push(parser.apply(this, [child]));\n                    }\n                }\n            }\n            return new OpenLayers.Geometry.Collection(parts);\n        }\n        \n    },\n\n    /**\n     * Method: parseAttributes\n     *\n     * Parameters:\n     * node - {DOMElement}\n     *\n     * Returns:\n     * {Object} An attributes object.\n     */\n    parseAttributes: function(node) {\n        var attributes = {};\n       \n        // Extended Data is parsed first.\n        var edNodes = node.getElementsByTagName(\"ExtendedData\");\n        if (edNodes.length) {\n            attributes = this.parseExtendedData(edNodes[0]);\n        }\n        \n        // assume attribute nodes are type 1 children with a type 3 or 4 child\n        var child, grandchildren, grandchild;\n        var children = node.childNodes;\n\n        for(var i=0, len=children.length; i<len; ++i) {\n            child = children[i];\n            if(child.nodeType == 1) {\n                grandchildren = child.childNodes;\n                if(grandchildren.length >= 1 && grandchildren.length <= 3) {\n                    var grandchild;\n                    switch (grandchildren.length) {\n                        case 1:\n                            grandchild = grandchildren[0];\n                            break;\n                        case 2:\n                            var c1 = grandchildren[0];\n                            var c2 = grandchildren[1];\n                            grandchild = (c1.nodeType == 3 || c1.nodeType == 4) ?\n                                c1 : c2;\n                            break;\n                        case 3:\n                        default:\n                            grandchild = grandchildren[1];\n                            break;\n                    }\n                    if(grandchild.nodeType == 3 || grandchild.nodeType == 4) {\n                        var name = (child.prefix) ?\n                                child.nodeName.split(\":\")[1] :\n                                child.nodeName;\n                        var value = OpenLayers.Util.getXmlNodeValue(grandchild);\n                        if (value) {\n                            value = value.replace(this.regExes.trimSpace, \"\");\n                            attributes[name] = value;\n                        }\n                    }\n                } \n            }\n        }\n        return attributes;\n    },\n\n    /**\n     * Method: parseExtendedData\n     * Parse ExtendedData from KML. Limited support for schemas/datatypes.\n     *     See http://code.google.com/apis/kml/documentation/kmlreference.html#extendeddata\n     *     for more information on extendeddata.\n     */\n    parseExtendedData: function(node) {\n        var attributes = {};\n        var i, len, data, key;\n        var dataNodes = node.getElementsByTagName(\"Data\");\n        for (i = 0, len = dataNodes.length; i < len; i++) {\n            data = dataNodes[i];\n            key = data.getAttribute(\"name\");\n            var ed = {};\n            var valueNode = data.getElementsByTagName(\"value\");\n            if (valueNode.length) {\n                ed['value'] = this.getChildValue(valueNode[0]);\n            }\n            if (this.kvpAttributes) {\n                attributes[key] = ed['value'];\n            } else {\n                var nameNode = data.getElementsByTagName(\"displayName\");\n                if (nameNode.length) {\n                    ed['displayName'] = this.getChildValue(nameNode[0]);\n                }\n                attributes[key] = ed;\n            } \n        }\n        var simpleDataNodes = node.getElementsByTagName(\"SimpleData\");\n        for (i = 0, len = simpleDataNodes.length; i < len; i++) {\n            var ed = {};\n            data = simpleDataNodes[i];\n            key = data.getAttribute(\"name\");\n            ed['value'] = this.getChildValue(data);\n            if (this.kvpAttributes) {\n                attributes[key] = ed['value'];\n            } else {\n                ed['displayName'] = key;\n                attributes[key] = ed;\n            }\n        }\n        \n        return attributes;    \n    },\n    \n    /**\n     * Method: parseProperty\n     * Convenience method to find a node and return its value\n     *\n     * Parameters:\n     * xmlNode    - {<DOMElement>}\n     * namespace  - {String} namespace of the node to find\n     * tagName    - {String} name of the property to parse\n     * \n     * Returns:\n     * {String} The value for the requested property (defaults to null)\n     */    \n    parseProperty: function(xmlNode, namespace, tagName) {\n        var value;\n        var nodeList = this.getElementsByTagNameNS(xmlNode, namespace, tagName);\n        try {\n            value = OpenLayers.Util.getXmlNodeValue(nodeList[0]);\n        } catch(e) {\n            value = null;\n        }\n     \n        return value;\n    },                                                              \n\n    /**\n     * APIMethod: write\n     * Accept Feature Collection, and return a string. \n     * \n     * Parameters:\n     * features - {Array(<OpenLayers.Feature.Vector>)} An array of features.\n     *\n     * Returns:\n     * {String} A KML string.\n     */\n    write: function(features) {\n        if(!(OpenLayers.Util.isArray(features))) {\n            features = [features];\n        }\n        var kml = this.createElementNS(this.kmlns, \"kml\");\n        var folder = this.createFolderXML();\n        for(var i=0, len=features.length; i<len; ++i) {\n            folder.appendChild(this.createPlacemarkXML(features[i]));\n        }\n        kml.appendChild(folder);\n        return OpenLayers.Format.XML.prototype.write.apply(this, [kml]);\n    },\n\n    /**\n     * Method: createFolderXML\n     * Creates and returns a KML folder node\n     * \n     * Returns:\n     * {DOMElement}\n     */\n    createFolderXML: function() {\n        // Folder\n        var folder = this.createElementNS(this.kmlns, \"Folder\");\n\n        // Folder name\n        if (this.foldersName) {\n            var folderName = this.createElementNS(this.kmlns, \"name\");\n            var folderNameText = this.createTextNode(this.foldersName); \n            folderName.appendChild(folderNameText);\n            folder.appendChild(folderName);\n        }\n\n        // Folder description\n        if (this.foldersDesc) {\n            var folderDesc = this.createElementNS(this.kmlns, \"description\");        \n            var folderDescText = this.createTextNode(this.foldersDesc); \n            folderDesc.appendChild(folderDescText);\n            folder.appendChild(folderDesc);\n        }\n\n        return folder;\n    },\n\n    /**\n     * Method: createPlacemarkXML\n     * Creates and returns a KML placemark node representing the given feature. \n     * \n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>}\n     * \n     * Returns:\n     * {DOMElement}\n     */\n    createPlacemarkXML: function(feature) {        \n        // Placemark name\n        var placemarkName = this.createElementNS(this.kmlns, \"name\");\n        var label = (feature.style && feature.style.label) ? feature.style.label : feature.id;\n        var name = feature.attributes.name || label;\n        placemarkName.appendChild(this.createTextNode(name));\n\n        // Placemark description\n        var placemarkDesc = this.createElementNS(this.kmlns, \"description\");\n        var desc = feature.attributes.description || this.placemarksDesc;\n        placemarkDesc.appendChild(this.createTextNode(desc));\n        \n        // Placemark\n        var placemarkNode = this.createElementNS(this.kmlns, \"Placemark\");\n        if(feature.fid != null) {\n            placemarkNode.setAttribute(\"id\", feature.fid);\n        }\n        placemarkNode.appendChild(placemarkName);\n        placemarkNode.appendChild(placemarkDesc);\n\n        // output attributes as extendedData\n        if (feature.attributes) {\n            var edNode = this.buildExtendedData(feature.attributes);\n            if (edNode) {\n                placemarkNode.appendChild(edNode);\n            }\n        }\n        \n        // Geometry node (Point, LineString, etc. nodes)\n        var geometryNode = this.buildGeometryNode(feature.geometry);\n        placemarkNode.appendChild(geometryNode);        \n        \n        return placemarkNode;\n    },    \n\n    /**\n     * Method: buildGeometryNode\n     * Builds and returns a KML geometry node with the given geometry.\n     * \n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>}\n     * \n     * Returns:\n     * {DOMElement}\n     */\n    buildGeometryNode: function(geometry) {\n        var className = geometry.CLASS_NAME;\n        var type = className.substring(className.lastIndexOf(\".\") + 1);\n        var builder = this.buildGeometry[type.toLowerCase()];\n        var node = null;\n        if(builder) {\n            node = builder.apply(this, [geometry]);\n        }\n        return node;\n    },\n\n    /**\n     * Property: buildGeometry\n     * Object containing methods to do the actual geometry node building\n     *     based on geometry type.\n     */\n    buildGeometry: {\n        // TBD: Anybody care about namespace aliases here (these nodes have\n        //    no prefixes)?\n\n        /**\n         * Method: buildGeometry.point\n         * Given an OpenLayers point geometry, create a KML point.\n         *\n         * Parameters:\n         * geometry - {<OpenLayers.Geometry.Point>} A point geometry.\n         *\n         * Returns:\n         * {DOMElement} A KML point node.\n         */\n        point: function(geometry) {\n            var kml = this.createElementNS(this.kmlns, \"Point\");\n            kml.appendChild(this.buildCoordinatesNode(geometry));\n            return kml;\n        },\n        \n        /**\n         * Method: buildGeometry.multipoint\n         * Given an OpenLayers multipoint geometry, create a KML\n         *     GeometryCollection.\n         *\n         * Parameters:\n         * geometry - {<OpenLayers.Geometry.Point>} A multipoint geometry.\n         *\n         * Returns:\n         * {DOMElement} A KML GeometryCollection node.\n         */\n        multipoint: function(geometry) {\n            return this.buildGeometry.collection.apply(this, [geometry]);\n        },\n\n        /**\n         * Method: buildGeometry.linestring\n         * Given an OpenLayers linestring geometry, create a KML linestring.\n         *\n         * Parameters:\n         * geometry - {<OpenLayers.Geometry.LineString>} A linestring geometry.\n         *\n         * Returns:\n         * {DOMElement} A KML linestring node.\n         */\n        linestring: function(geometry) {\n            var kml = this.createElementNS(this.kmlns, \"LineString\");\n            kml.appendChild(this.buildCoordinatesNode(geometry));\n            return kml;\n        },\n        \n        /**\n         * Method: buildGeometry.multilinestring\n         * Given an OpenLayers multilinestring geometry, create a KML\n         *     GeometryCollection.\n         *\n         * Parameters:\n         * geometry - {<OpenLayers.Geometry.Point>} A multilinestring geometry.\n         *\n         * Returns:\n         * {DOMElement} A KML GeometryCollection node.\n         */\n        multilinestring: function(geometry) {\n            return this.buildGeometry.collection.apply(this, [geometry]);\n        },\n\n        /**\n         * Method: buildGeometry.linearring\n         * Given an OpenLayers linearring geometry, create a KML linearring.\n         *\n         * Parameters:\n         * geometry - {<OpenLayers.Geometry.LinearRing>} A linearring geometry.\n         *\n         * Returns:\n         * {DOMElement} A KML linearring node.\n         */\n        linearring: function(geometry) {\n            var kml = this.createElementNS(this.kmlns, \"LinearRing\");\n            kml.appendChild(this.buildCoordinatesNode(geometry));\n            return kml;\n        },\n        \n        /**\n         * Method: buildGeometry.polygon\n         * Given an OpenLayers polygon geometry, create a KML polygon.\n         *\n         * Parameters:\n         * geometry - {<OpenLayers.Geometry.Polygon>} A polygon geometry.\n         *\n         * Returns:\n         * {DOMElement} A KML polygon node.\n         */\n        polygon: function(geometry) {\n            var kml = this.createElementNS(this.kmlns, \"Polygon\");\n            var rings = geometry.components;\n            var ringMember, ringGeom, type;\n            for(var i=0, len=rings.length; i<len; ++i) {\n                type = (i==0) ? \"outerBoundaryIs\" : \"innerBoundaryIs\";\n                ringMember = this.createElementNS(this.kmlns, type);\n                ringGeom = this.buildGeometry.linearring.apply(this,\n                                                               [rings[i]]);\n                ringMember.appendChild(ringGeom);\n                kml.appendChild(ringMember);\n            }\n            return kml;\n        },\n        \n        /**\n         * Method: buildGeometry.multipolygon\n         * Given an OpenLayers multipolygon geometry, create a KML\n         *     GeometryCollection.\n         *\n         * Parameters:\n         * geometry - {<OpenLayers.Geometry.Point>} A multipolygon geometry.\n         *\n         * Returns:\n         * {DOMElement} A KML GeometryCollection node.\n         */\n        multipolygon: function(geometry) {\n            return this.buildGeometry.collection.apply(this, [geometry]);\n        },\n\n        /**\n         * Method: buildGeometry.collection\n         * Given an OpenLayers geometry collection, create a KML MultiGeometry.\n         *\n         * Parameters:\n         * geometry - {<OpenLayers.Geometry.Collection>} A geometry collection.\n         *\n         * Returns:\n         * {DOMElement} A KML MultiGeometry node.\n         */\n        collection: function(geometry) {\n            var kml = this.createElementNS(this.kmlns, \"MultiGeometry\");\n            var child;\n            for(var i=0, len=geometry.components.length; i<len; ++i) {\n                child = this.buildGeometryNode.apply(this,\n                                                     [geometry.components[i]]);\n                if(child) {\n                    kml.appendChild(child);\n                }\n            }\n            return kml;\n        }\n    },\n\n    /**\n     * Method: buildCoordinatesNode\n     * Builds and returns the KML coordinates node with the given geometry\n     * <coordinates>...</coordinates>\n     * \n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>}\n     * \n     * Returns:\n     * {DOMElement}\n     */     \n    buildCoordinatesNode: function(geometry) {\n        var coordinatesNode = this.createElementNS(this.kmlns, \"coordinates\");\n        \n        var path;\n        var points = geometry.components;\n        if(points) {\n            // LineString or LinearRing\n            var point;\n            var numPoints = points.length;\n            var parts = new Array(numPoints);\n            for(var i=0; i<numPoints; ++i) {\n                point = points[i];\n                parts[i] = this.buildCoordinates(point);\n            }\n            path = parts.join(\" \");\n        } else {\n            // Point\n            path = this.buildCoordinates(geometry);\n        }\n        \n        var txtNode = this.createTextNode(path);\n        coordinatesNode.appendChild(txtNode);\n        \n        return coordinatesNode;\n    },    \n    \n    /**\n     * Method: buildCoordinates\n     *\n     * Parameters:\n     * point - {<OpenLayers.Geometry.Point>}\n     *\n     * Returns\n     * {String} a coordinate pair\n     */\n    buildCoordinates: function(point) {\n        if (this.internalProjection && this.externalProjection) {\n            point = point.clone();\n            point.transform(this.internalProjection, \n                               this.externalProjection);\n        }\n        return point.x + \",\" + point.y;                     \n    },\n\n    /**\n     * Method: buildExtendedData\n     *\n     * Parameters:\n     * attributes - {Object}\n     *\n     * Returns\n     * {DOMElement} A KML ExtendedData node or {null} if no attributes.\n     */\n    buildExtendedData: function(attributes) {\n        var extendedData = this.createElementNS(this.kmlns, \"ExtendedData\");\n        for (var attributeName in attributes) {\n            // empty, name, description, styleUrl attributes ignored\n            if (attributes[attributeName] && attributeName != \"name\" && attributeName != \"description\" && attributeName != \"styleUrl\") {\n                var data = this.createElementNS(this.kmlns, \"Data\");\n                data.setAttribute(\"name\", attributeName);\n                var value = this.createElementNS(this.kmlns, \"value\");\n                if (typeof attributes[attributeName] == \"object\") {\n                    // cater for object attributes with 'value' properties\n                    // other object properties will output an empty node\n                    if (attributes[attributeName].value) {\n                        value.appendChild(this.createTextNode(attributes[attributeName].value));\n                    }\n                    if (attributes[attributeName].displayName) {\n                        var displayName = this.createElementNS(this.kmlns, \"displayName\");\n                        // displayName always written as CDATA\n                        displayName.appendChild(this.getXMLDoc().createCDATASection(attributes[attributeName].displayName));\n                        data.appendChild(displayName);\n                    }\n                } else {\n                    value.appendChild(this.createTextNode(attributes[attributeName]));\n                }\n                data.appendChild(value);\n                extendedData.appendChild(data);\n            }\n        }\n        if (this.isSimpleContent(extendedData)) {\n            return null;\n        } else {\n            return extendedData;\n        }\n    },\n    \n    CLASS_NAME: \"OpenLayers.Format.KML\" \n});\n/* ======================================================================\n    OpenLayers/Format/JSON.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * Note:\n * This work draws heavily from the public domain JSON serializer/deserializer\n *     at http://www.json.org/json.js. Rewritten so that it doesn't modify\n *     basic data prototypes.\n */\n\n/**\n * @requires OpenLayers/Format.js\n */\n\n/**\n * Class: OpenLayers.Format.JSON\n * A parser to read/write JSON safely.  Create a new instance with the\n *     <OpenLayers.Format.JSON> constructor.\n *\n * Inherits from:\n *  - <OpenLayers.Format>\n */\nOpenLayers.Format.JSON = OpenLayers.Class(OpenLayers.Format, {\n    \n    /**\n     * APIProperty: indent\n     * {String} For \"pretty\" printing, the indent string will be used once for\n     *     each indentation level.\n     */\n    indent: \"    \",\n    \n    /**\n     * APIProperty: space\n     * {String} For \"pretty\" printing, the space string will be used after\n     *     the \":\" separating a name/value pair.\n     */\n    space: \" \",\n    \n    /**\n     * APIProperty: newline\n     * {String} For \"pretty\" printing, the newline string will be used at the\n     *     end of each name/value pair or array item.\n     */\n    newline: \"\\n\",\n    \n    /**\n     * Property: level\n     * {Integer} For \"pretty\" printing, this is incremented/decremented during\n     *     serialization.\n     */\n    level: 0,\n\n    /**\n     * Property: pretty\n     * {Boolean} Serialize with extra whitespace for structure.  This is set\n     *     by the <write> method.\n     */\n    pretty: false,\n\n    /**\n     * Property: nativeJSON\n     * {Boolean} Does the browser support native json?\n     */\n    nativeJSON: (function() {\n        return !!(window.JSON && typeof JSON.parse == \"function\" && typeof JSON.stringify == \"function\");\n    })(),\n\n    /**\n     * Constructor: OpenLayers.Format.JSON\n     * Create a new parser for JSON.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n\n    /**\n     * APIMethod: read\n     * Deserialize a json string.\n     *\n     * Parameters:\n     * json - {String} A JSON string\n     * filter - {Function} A function which will be called for every key and\n     *     value at every level of the final result. Each value will be\n     *     replaced by the result of the filter function. This can be used to\n     *     reform generic objects into instances of classes, or to transform\n     *     date strings into Date objects.\n     *     \n     * Returns:\n     * {Object} An object, array, string, or number .\n     */\n    read: function(json, filter) {\n        var object;\n        if (this.nativeJSON) {\n            object = JSON.parse(json, filter);\n        } else try {\n            /**\n             * Parsing happens in three stages. In the first stage, we run the\n             *     text against a regular expression which looks for non-JSON\n             *     characters. We are especially concerned with '()' and 'new'\n             *     because they can cause invocation, and '=' because it can\n             *     cause mutation. But just to be safe, we will reject all\n             *     unexpected characters.\n             */\n            if (/^[\\],:{}\\s]*$/.test(json.replace(/\\\\[\"\\\\\\/bfnrtu]/g, '@').\n                                replace(/\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g, ']').\n                                replace(/(?:^|:|,)(?:\\s*\\[)+/g, ''))) {\n\n                /**\n                 * In the second stage we use the eval function to compile the\n                 *     text into a JavaScript structure. The '{' operator is\n                 *     subject to a syntactic ambiguity in JavaScript - it can\n                 *     begin a block or an object literal. We wrap the text in\n                 *     parens to eliminate the ambiguity.\n                 */\n                object = eval('(' + json + ')');\n\n                /**\n                 * In the optional third stage, we recursively walk the new\n                 *     structure, passing each name/value pair to a filter\n                 *     function for possible transformation.\n                 */\n                if(typeof filter === 'function') {\n                    function walk(k, v) {\n                        if(v && typeof v === 'object') {\n                            for(var i in v) {\n                                if(v.hasOwnProperty(i)) {\n                                    v[i] = walk(i, v[i]);\n                                }\n                            }\n                        }\n                        return filter(k, v);\n                    }\n                    object = walk('', object);\n                }\n            }\n        } catch(e) {\n            // Fall through if the regexp test fails.\n        }\n\n        if(this.keepData) {\n            this.data = object;\n        }\n\n        return object;\n    },\n\n    /**\n     * APIMethod: write\n     * Serialize an object into a JSON string.\n     *\n     * Parameters:\n     * value - {String} The object, array, string, number, boolean or date\n     *     to be serialized.\n     * pretty - {Boolean} Structure the output with newlines and indentation.\n     *     Default is false.\n     *\n     * Returns:\n     * {String} The JSON string representation of the input value.\n     */\n    write: function(value, pretty) {\n        this.pretty = !!pretty;\n        var json = null;\n        var type = typeof value;\n        if(this.serialize[type]) {\n            try {\n                json = (!this.pretty && this.nativeJSON) ?\n                    JSON.stringify(value) :\n                    this.serialize[type].apply(this, [value]);\n            } catch(err) {\n                OpenLayers.Console.error(\"Trouble serializing: \" + err);\n            }\n        }\n        return json;\n    },\n    \n    /**\n     * Method: writeIndent\n     * Output an indentation string depending on the indentation level.\n     *\n     * Returns:\n     * {String} An appropriate indentation string.\n     */\n    writeIndent: function() {\n        var pieces = [];\n        if(this.pretty) {\n            for(var i=0; i<this.level; ++i) {\n                pieces.push(this.indent);\n            }\n        }\n        return pieces.join('');\n    },\n    \n    /**\n     * Method: writeNewline\n     * Output a string representing a newline if in pretty printing mode.\n     *\n     * Returns:\n     * {String} A string representing a new line.\n     */\n    writeNewline: function() {\n        return (this.pretty) ? this.newline : '';\n    },\n    \n    /**\n     * Method: writeSpace\n     * Output a string representing a space if in pretty printing mode.\n     *\n     * Returns:\n     * {String} A space.\n     */\n    writeSpace: function() {\n        return (this.pretty) ? this.space : '';\n    },\n\n    /**\n     * Property: serialize\n     * Object with properties corresponding to the serializable data types.\n     *     Property values are functions that do the actual serializing.\n     */\n    serialize: {\n        /**\n         * Method: serialize.object\n         * Transform an object into a JSON string.\n         *\n         * Parameters:\n         * object - {Object} The object to be serialized.\n         * \n         * Returns:\n         * {String} A JSON string representing the object.\n         */\n        'object': function(object) {\n            // three special objects that we want to treat differently\n            if(object == null) {\n                return \"null\";\n            }\n            if(object.constructor == Date) {\n                return this.serialize.date.apply(this, [object]);\n            }\n            if(object.constructor == Array) {\n                return this.serialize.array.apply(this, [object]);\n            }\n            var pieces = ['{'];\n            this.level += 1;\n            var key, keyJSON, valueJSON;\n            \n            var addComma = false;\n            for(key in object) {\n                if(object.hasOwnProperty(key)) {\n                    // recursive calls need to allow for sub-classing\n                    keyJSON = OpenLayers.Format.JSON.prototype.write.apply(this,\n                                                    [key, this.pretty]);\n                    valueJSON = OpenLayers.Format.JSON.prototype.write.apply(this,\n                                                    [object[key], this.pretty]);\n                    if(keyJSON != null && valueJSON != null) {\n                        if(addComma) {\n                            pieces.push(',');\n                        }\n                        pieces.push(this.writeNewline(), this.writeIndent(),\n                                    keyJSON, ':', this.writeSpace(), valueJSON);\n                        addComma = true;\n                    }\n                }\n            }\n            \n            this.level -= 1;\n            pieces.push(this.writeNewline(), this.writeIndent(), '}');\n            return pieces.join('');\n        },\n        \n        /**\n         * Method: serialize.array\n         * Transform an array into a JSON string.\n         *\n         * Parameters:\n         * array - {Array} The array to be serialized\n         * \n         * Returns:\n         * {String} A JSON string representing the array.\n         */\n        'array': function(array) {\n            var json;\n            var pieces = ['['];\n            this.level += 1;\n    \n            for(var i=0, len=array.length; i<len; ++i) {\n                // recursive calls need to allow for sub-classing\n                json = OpenLayers.Format.JSON.prototype.write.apply(this,\n                                                    [array[i], this.pretty]);\n                if(json != null) {\n                    if(i > 0) {\n                        pieces.push(',');\n                    }\n                    pieces.push(this.writeNewline(), this.writeIndent(), json);\n                }\n            }\n\n            this.level -= 1;    \n            pieces.push(this.writeNewline(), this.writeIndent(), ']');\n            return pieces.join('');\n        },\n        \n        /**\n         * Method: serialize.string\n         * Transform a string into a JSON string.\n         *\n         * Parameters:\n         * string - {String} The string to be serialized\n         * \n         * Returns:\n         * {String} A JSON string representing the string.\n         */\n        'string': function(string) {\n            // If the string contains no control characters, no quote characters, and no\n            // backslash characters, then we can simply slap some quotes around it.\n            // Otherwise we must also replace the offending characters with safe\n            // sequences.    \n            var m = {\n                '\\b': '\\\\b',\n                '\\t': '\\\\t',\n                '\\n': '\\\\n',\n                '\\f': '\\\\f',\n                '\\r': '\\\\r',\n                '\"' : '\\\\\"',\n                '\\\\': '\\\\\\\\'\n            };\n            if(/[\"\\\\\\x00-\\x1f]/.test(string)) {\n                return '\"' + string.replace(/([\\x00-\\x1f\\\\\"])/g, function(a, b) {\n                    var c = m[b];\n                    if(c) {\n                        return c;\n                    }\n                    c = b.charCodeAt();\n                    return '\\\\u00' +\n                        Math.floor(c / 16).toString(16) +\n                        (c % 16).toString(16);\n                }) + '\"';\n            }\n            return '\"' + string + '\"';\n        },\n\n        /**\n         * Method: serialize.number\n         * Transform a number into a JSON string.\n         *\n         * Parameters:\n         * number - {Number} The number to be serialized.\n         *\n         * Returns:\n         * {String} A JSON string representing the number.\n         */\n        'number': function(number) {\n            return isFinite(number) ? String(number) : \"null\";\n        },\n        \n        /**\n         * Method: serialize.boolean\n         * Transform a boolean into a JSON string.\n         *\n         * Parameters:\n         * bool - {Boolean} The boolean to be serialized.\n         * \n         * Returns:\n         * {String} A JSON string representing the boolean.\n         */\n        'boolean': function(bool) {\n            return String(bool);\n        },\n        \n        /**\n         * Method: serialize.object\n         * Transform a date into a JSON string.\n         *\n         * Parameters:\n         * date - {Date} The date to be serialized.\n         * \n         * Returns:\n         * {String} A JSON string representing the date.\n         */\n        'date': function(date) {    \n            function format(number) {\n                // Format integers to have at least two digits.\n                return (number < 10) ? '0' + number : number;\n            }\n            return '\"' + date.getFullYear() + '-' +\n                    format(date.getMonth() + 1) + '-' +\n                    format(date.getDate()) + 'T' +\n                    format(date.getHours()) + ':' +\n                    format(date.getMinutes()) + ':' +\n                    format(date.getSeconds()) + '\"';\n        }\n    },\n\n    CLASS_NAME: \"OpenLayers.Format.JSON\" \n\n});     \n/* ======================================================================\n    OpenLayers/Geometry/MultiLineString.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Geometry/Collection.js\n * @requires OpenLayers/Geometry/LineString.js\n */\n\n/**\n * Class: OpenLayers.Geometry.MultiLineString\n * A MultiLineString is a geometry with multiple <OpenLayers.Geometry.LineString>\n * components.\n * \n * Inherits from:\n *  - <OpenLayers.Geometry.Collection>\n *  - <OpenLayers.Geometry> \n */\nOpenLayers.Geometry.MultiLineString = OpenLayers.Class(\n  OpenLayers.Geometry.Collection, {\n\n    /**\n     * Property: componentTypes\n     * {Array(String)} An array of class names representing the types of\n     * components that the collection can include.  A null value means the\n     * component types are not restricted.\n     */\n    componentTypes: [\"OpenLayers.Geometry.LineString\"],\n\n    /**\n     * Constructor: OpenLayers.Geometry.MultiLineString\n     * Constructor for a MultiLineString Geometry.\n     *\n     * Parameters: \n     * components - {Array(<OpenLayers.Geometry.LineString>)} \n     *\n     */\n    \n    /**\n     * Method: split\n     * Use this geometry (the source) to attempt to split a target geometry.\n     * \n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>} The target geometry.\n     * options - {Object} Properties of this object will be used to determine\n     *     how the split is conducted.\n     *\n     * Valid options:\n     * mutual - {Boolean} Split the source geometry in addition to the target\n     *     geometry.  Default is false.\n     * edge - {Boolean} Allow splitting when only edges intersect.  Default is\n     *     true.  If false, a vertex on the source must be within the tolerance\n     *     distance of the intersection to be considered a split.\n     * tolerance - {Number} If a non-null value is provided, intersections\n     *     within the tolerance distance of an existing vertex on the source\n     *     will be assumed to occur at the vertex.\n     * \n     * Returns:\n     * {Array} A list of geometries (of this same type as the target) that\n     *     result from splitting the target with the source geometry.  The\n     *     source and target geometry will remain unmodified.  If no split\n     *     results, null will be returned.  If mutual is true and a split\n     *     results, return will be an array of two arrays - the first will be\n     *     all geometries that result from splitting the source geometry and\n     *     the second will be all geometries that result from splitting the\n     *     target geometry.\n     */\n    split: function(geometry, options) {\n        var results = null;\n        var mutual = options && options.mutual;\n        var splits, sourceLine, sourceLines, sourceSplit, targetSplit;\n        var sourceParts = [];\n        var targetParts = [geometry];\n        for(var i=0, len=this.components.length; i<len; ++i) {\n            sourceLine = this.components[i];\n            sourceSplit = false;\n            for(var j=0; j < targetParts.length; ++j) { \n                splits = sourceLine.split(targetParts[j], options);\n                if(splits) {\n                    if(mutual) {\n                        sourceLines = splits[0];\n                        for(var k=0, klen=sourceLines.length; k<klen; ++k) {\n                            if(k===0 && sourceParts.length) {\n                                sourceParts[sourceParts.length-1].addComponent(\n                                    sourceLines[k]\n                                );\n                            } else {\n                                sourceParts.push(\n                                    new OpenLayers.Geometry.MultiLineString([\n                                        sourceLines[k]\n                                    ])\n                                );\n                            }\n                        }\n                        sourceSplit = true;\n                        splits = splits[1];\n                    }\n                    if(splits.length) {\n                        // splice in new target parts\n                        splits.unshift(j, 1);\n                        Array.prototype.splice.apply(targetParts, splits);\n                        break;\n                    }\n                }\n            }\n            if(!sourceSplit) {\n                // source line was not hit\n                if(sourceParts.length) {\n                    // add line to existing multi\n                    sourceParts[sourceParts.length-1].addComponent(\n                        sourceLine.clone()\n                    );\n                } else {\n                    // create a fresh multi\n                    sourceParts = [\n                        new OpenLayers.Geometry.MultiLineString(\n                            sourceLine.clone()\n                        )\n                    ];\n                }\n            }\n        }\n        if(sourceParts && sourceParts.length > 1) {\n            sourceSplit = true;\n        } else {\n            sourceParts = [];\n        }\n        if(targetParts && targetParts.length > 1) {\n            targetSplit = true;\n        } else {\n            targetParts = [];\n        }\n        if(sourceSplit || targetSplit) {\n            if(mutual) {\n                results = [sourceParts, targetParts];\n            } else {\n                results = targetParts;\n            }\n        }\n        return results;\n    },\n    \n    /**\n     * Method: splitWith\n     * Split this geometry (the target) with the given geometry (the source).\n     *\n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>} A geometry used to split this\n     *     geometry (the source).\n     * options - {Object} Properties of this object will be used to determine\n     *     how the split is conducted.\n     *\n     * Valid options:\n     * mutual - {Boolean} Split the source geometry in addition to the target\n     *     geometry.  Default is false.\n     * edge - {Boolean} Allow splitting when only edges intersect.  Default is\n     *     true.  If false, a vertex on the source must be within the tolerance\n     *     distance of the intersection to be considered a split.\n     * tolerance - {Number} If a non-null value is provided, intersections\n     *     within the tolerance distance of an existing vertex on the source\n     *     will be assumed to occur at the vertex.\n     * \n     * Returns:\n     * {Array} A list of geometries (of this same type as the target) that\n     *     result from splitting the target with the source geometry.  The\n     *     source and target geometry will remain unmodified.  If no split\n     *     results, null will be returned.  If mutual is true and a split\n     *     results, return will be an array of two arrays - the first will be\n     *     all geometries that result from splitting the source geometry and\n     *     the second will be all geometries that result from splitting the\n     *     target geometry.\n     */\n    splitWith: function(geometry, options) {\n        var results = null;\n        var mutual = options && options.mutual;\n        var splits, targetLine, sourceLines, sourceSplit, targetSplit, sourceParts, targetParts;\n        if(geometry instanceof OpenLayers.Geometry.LineString) {\n            targetParts = [];\n            sourceParts = [geometry];\n            for(var i=0, len=this.components.length; i<len; ++i) {\n                targetSplit = false;\n                targetLine = this.components[i];\n                for(var j=0; j<sourceParts.length; ++j) {\n                    splits = sourceParts[j].split(targetLine, options);\n                    if(splits) {\n                        if(mutual) {\n                            sourceLines = splits[0];\n                            if(sourceLines.length) {\n                                // splice in new source parts\n                                sourceLines.unshift(j, 1);\n                                Array.prototype.splice.apply(sourceParts, sourceLines);\n                                j += sourceLines.length - 2;\n                            }\n                            splits = splits[1];\n                            if(splits.length === 0) {\n                                splits = [targetLine.clone()];\n                            }\n                        }\n                        for(var k=0, klen=splits.length; k<klen; ++k) {\n                            if(k===0 && targetParts.length) {\n                                targetParts[targetParts.length-1].addComponent(\n                                    splits[k]\n                                );\n                            } else {\n                                targetParts.push(\n                                    new OpenLayers.Geometry.MultiLineString([\n                                        splits[k]\n                                    ])\n                                );\n                            }\n                        }\n                        targetSplit = true;                    \n                    }\n                }\n                if(!targetSplit) {\n                    // target component was not hit\n                    if(targetParts.length) {\n                        // add it to any existing multi-line\n                        targetParts[targetParts.length-1].addComponent(\n                            targetLine.clone()\n                        );\n                    } else {\n                        // or start with a fresh multi-line\n                        targetParts = [\n                            new OpenLayers.Geometry.MultiLineString([\n                                targetLine.clone()\n                            ])\n                        ];\n                    }\n                    \n                }\n            }\n        } else {\n            results = geometry.split(this);\n        }\n        if(sourceParts && sourceParts.length > 1) {\n            sourceSplit = true;\n        } else {\n            sourceParts = [];\n        }\n        if(targetParts && targetParts.length > 1) {\n            targetSplit = true;\n        } else {\n            targetParts = [];\n        }\n        if(sourceSplit || targetSplit) {\n            if(mutual) {\n                results = [sourceParts, targetParts];\n            } else {\n                results = targetParts;\n            }\n        }\n        return results;\n    },\n\n    CLASS_NAME: \"OpenLayers.Geometry.MultiLineString\"\n});\n/* ======================================================================\n    OpenLayers/Geometry/MultiPolygon.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Geometry/Collection.js\n * @requires OpenLayers/Geometry/Polygon.js\n */\n\n/**\n * Class: OpenLayers.Geometry.MultiPolygon\n * MultiPolygon is a geometry with multiple <OpenLayers.Geometry.Polygon>\n * components.  Create a new instance with the <OpenLayers.Geometry.MultiPolygon>\n * constructor.\n * \n * Inherits from:\n *  - <OpenLayers.Geometry.Collection>\n */\nOpenLayers.Geometry.MultiPolygon = OpenLayers.Class(\n  OpenLayers.Geometry.Collection, {\n\n    /**\n     * Property: componentTypes\n     * {Array(String)} An array of class names representing the types of\n     * components that the collection can include.  A null value means the\n     * component types are not restricted.\n     */\n    componentTypes: [\"OpenLayers.Geometry.Polygon\"],\n\n    /**\n     * Constructor: OpenLayers.Geometry.MultiPolygon\n     * Create a new MultiPolygon geometry\n     *\n     * Parameters:\n     * components - {Array(<OpenLayers.Geometry.Polygon>)} An array of polygons\n     *              used to generate the MultiPolygon\n     *\n     */\n\n    CLASS_NAME: \"OpenLayers.Geometry.MultiPolygon\"\n});\n/* ======================================================================\n    OpenLayers/Format/GeoJSON.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Format/JSON.js\n * @requires OpenLayers/Feature/Vector.js\n * @requires OpenLayers/Geometry/Point.js\n * @requires OpenLayers/Geometry/MultiPoint.js\n * @requires OpenLayers/Geometry/LineString.js\n * @requires OpenLayers/Geometry/MultiLineString.js\n * @requires OpenLayers/Geometry/Polygon.js\n * @requires OpenLayers/Geometry/MultiPolygon.js\n * @requires OpenLayers/Console.js\n */\n\n/**\n * Class: OpenLayers.Format.GeoJSON\n * Read and write GeoJSON. Create a new parser with the\n *     <OpenLayers.Format.GeoJSON> constructor.\n *\n * Inherits from:\n *  - <OpenLayers.Format.JSON>\n */\nOpenLayers.Format.GeoJSON = OpenLayers.Class(OpenLayers.Format.JSON, {\n\n    /**\n     * APIProperty: ignoreExtraDims\n     * {Boolean} Ignore dimensions higher than 2 when reading geometry\n     * coordinates.\n     */ \n    ignoreExtraDims: false,\n    \n    /**\n     * Constructor: OpenLayers.Format.GeoJSON\n     * Create a new parser for GeoJSON.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *     this instance.\n     */\n\n    /**\n     * APIMethod: read\n     * Deserialize a GeoJSON string.\n     *\n     * Parameters:\n     * json - {String} A GeoJSON string\n     * type - {String} Optional string that determines the structure of\n     *     the output.  Supported values are \"Geometry\", \"Feature\", and\n     *     \"FeatureCollection\".  If absent or null, a default of\n     *     \"FeatureCollection\" is assumed.\n     * filter - {Function} A function which will be called for every key and\n     *     value at every level of the final result. Each value will be\n     *     replaced by the result of the filter function. This can be used to\n     *     reform generic objects into instances of classes, or to transform\n     *     date strings into Date objects.\n     *\n     * Returns: \n     * {Object} The return depends on the value of the type argument. If type\n     *     is \"FeatureCollection\" (the default), the return will be an array\n     *     of <OpenLayers.Feature.Vector>. If type is \"Geometry\", the input json\n     *     must represent a single geometry, and the return will be an\n     *     <OpenLayers.Geometry>.  If type is \"Feature\", the input json must\n     *     represent a single feature, and the return will be an\n     *     <OpenLayers.Feature.Vector>.\n     */\n    read: function(json, type, filter) {\n        type = (type) ? type : \"FeatureCollection\";\n        var results = null;\n        var obj = null;\n        if (typeof json == \"string\") {\n            obj = OpenLayers.Format.JSON.prototype.read.apply(this,\n                                                              [json, filter]);\n        } else { \n            obj = json;\n        }    \n        if(!obj) {\n            OpenLayers.Console.error(\"Bad JSON: \" + json);\n        } else if(typeof(obj.type) != \"string\") {\n            OpenLayers.Console.error(\"Bad GeoJSON - no type: \" + json);\n        } else if(this.isValidType(obj, type)) {\n            switch(type) {\n                case \"Geometry\":\n                    try {\n                        results = this.parseGeometry(obj);\n                    } catch(err) {\n                        OpenLayers.Console.error(err);\n                    }\n                    break;\n                case \"Feature\":\n                    try {\n                        results = this.parseFeature(obj);\n                        results.type = \"Feature\";\n                    } catch(err) {\n                        OpenLayers.Console.error(err);\n                    }\n                    break;\n                case \"FeatureCollection\":\n                    // for type FeatureCollection, we allow input to be any type\n                    results = [];\n                    switch(obj.type) {\n                        case \"Feature\":\n                            try {\n                                results.push(this.parseFeature(obj));\n                            } catch(err) {\n                                results = null;\n                                OpenLayers.Console.error(err);\n                            }\n                            break;\n                        case \"FeatureCollection\":\n                            for(var i=0, len=obj.features.length; i<len; ++i) {\n                                try {\n                                    results.push(this.parseFeature(obj.features[i]));\n                                } catch(err) {\n                                    results = null;\n                                    OpenLayers.Console.error(err);\n                                }\n                            }\n                            break;\n                        default:\n                            try {\n                                var geom = this.parseGeometry(obj);\n                                results.push(new OpenLayers.Feature.Vector(geom));\n                            } catch(err) {\n                                results = null;\n                                OpenLayers.Console.error(err);\n                            }\n                    }\n                break;\n            }\n        }\n        return results;\n    },\n    \n    /**\n     * Method: isValidType\n     * Check if a GeoJSON object is a valid representative of the given type.\n     *\n     * Returns:\n     * {Boolean} The object is valid GeoJSON object of the given type.\n     */\n    isValidType: function(obj, type) {\n        var valid = false;\n        switch(type) {\n            case \"Geometry\":\n                if(OpenLayers.Util.indexOf(\n                    [\"Point\", \"MultiPoint\", \"LineString\", \"MultiLineString\",\n                     \"Polygon\", \"MultiPolygon\", \"Box\", \"GeometryCollection\"],\n                    obj.type) == -1) {\n                    // unsupported geometry type\n                    OpenLayers.Console.error(\"Unsupported geometry type: \" +\n                                              obj.type);\n                } else {\n                    valid = true;\n                }\n                break;\n            case \"FeatureCollection\":\n                // allow for any type to be converted to a feature collection\n                valid = true;\n                break;\n            default:\n                // for Feature types must match\n                if(obj.type == type) {\n                    valid = true;\n                } else {\n                    OpenLayers.Console.error(\"Cannot convert types from \" +\n                                              obj.type + \" to \" + type);\n                }\n        }\n        return valid;\n    },\n    \n    /**\n     * Method: parseFeature\n     * Convert a feature object from GeoJSON into an\n     *     <OpenLayers.Feature.Vector>.\n     *\n     * Parameters:\n     * obj - {Object} An object created from a GeoJSON object\n     *\n     * Returns:\n     * {<OpenLayers.Feature.Vector>} A feature.\n     */\n    parseFeature: function(obj) {\n        var feature, geometry, attributes, bbox;\n        attributes = (obj.properties) ? obj.properties : {};\n        bbox = (obj.geometry && obj.geometry.bbox) || obj.bbox;\n        try {\n            geometry = this.parseGeometry(obj.geometry);\n        } catch(err) {\n            // deal with bad geometries\n            throw err;\n        }\n        feature = new OpenLayers.Feature.Vector(geometry, attributes);\n        if(bbox) {\n            feature.bounds = OpenLayers.Bounds.fromArray(bbox);\n        }\n        if(obj.id) {\n            feature.fid = obj.id;\n        }\n        return feature;\n    },\n    \n    /**\n     * Method: parseGeometry\n     * Convert a geometry object from GeoJSON into an <OpenLayers.Geometry>.\n     *\n     * Parameters:\n     * obj - {Object} An object created from a GeoJSON object\n     *\n     * Returns: \n     * {<OpenLayers.Geometry>} A geometry.\n     */\n    parseGeometry: function(obj) {\n        if (obj == null) {\n            return null;\n        }\n        var geometry, collection = false;\n        if(obj.type == \"GeometryCollection\") {\n            if(!(OpenLayers.Util.isArray(obj.geometries))) {\n                throw \"GeometryCollection must have geometries array: \" + obj;\n            }\n            var numGeom = obj.geometries.length;\n            var components = new Array(numGeom);\n            for(var i=0; i<numGeom; ++i) {\n                components[i] = this.parseGeometry.apply(\n                    this, [obj.geometries[i]]\n                );\n            }\n            geometry = new OpenLayers.Geometry.Collection(components);\n            collection = true;\n        } else {\n            if(!(OpenLayers.Util.isArray(obj.coordinates))) {\n                throw \"Geometry must have coordinates array: \" + obj;\n            }\n            if(!this.parseCoords[obj.type.toLowerCase()]) {\n                throw \"Unsupported geometry type: \" + obj.type;\n            }\n            try {\n                geometry = this.parseCoords[obj.type.toLowerCase()].apply(\n                    this, [obj.coordinates]\n                );\n            } catch(err) {\n                // deal with bad coordinates\n                throw err;\n            }\n        }\n        // We don't reproject collections because the children are reprojected\n        // for us when they are created.\n        if (this.internalProjection && this.externalProjection && !collection) {\n            geometry.transform(this.externalProjection, \n                               this.internalProjection); \n        }                       \n        return geometry;\n    },\n    \n    /**\n     * Property: parseCoords\n     * Object with properties corresponding to the GeoJSON geometry types.\n     *     Property values are functions that do the actual parsing.\n     */\n    parseCoords: {\n        /**\n         * Method: parseCoords.point\n         * Convert a coordinate array from GeoJSON into an\n         *     <OpenLayers.Geometry>.\n         *\n         * Parameters:\n         * array - {Object} The coordinates array from the GeoJSON fragment.\n         *\n         * Returns:\n         * {<OpenLayers.Geometry>} A geometry.\n         */\n        \"point\": function(array) {\n            if (this.ignoreExtraDims == false && \n                  array.length != 2) {\n                    throw \"Only 2D points are supported: \" + array;\n            }\n            return new OpenLayers.Geometry.Point(array[0], array[1]);\n        },\n        \n        /**\n         * Method: parseCoords.multipoint\n         * Convert a coordinate array from GeoJSON into an\n         *     <OpenLayers.Geometry>.\n         *\n         * Parameters:\n         * array - {Object} The coordinates array from the GeoJSON fragment.\n         *\n         * Returns:\n         * {<OpenLayers.Geometry>} A geometry.\n         */\n        \"multipoint\": function(array) {\n            var points = [];\n            var p = null;\n            for(var i=0, len=array.length; i<len; ++i) {\n                try {\n                    p = this.parseCoords[\"point\"].apply(this, [array[i]]);\n                } catch(err) {\n                    throw err;\n                }\n                points.push(p);\n            }\n            return new OpenLayers.Geometry.MultiPoint(points);\n        },\n\n        /**\n         * Method: parseCoords.linestring\n         * Convert a coordinate array from GeoJSON into an\n         *     <OpenLayers.Geometry>.\n         *\n         * Parameters:\n         * array - {Object} The coordinates array from the GeoJSON fragment.\n         *\n         * Returns:\n         * {<OpenLayers.Geometry>} A geometry.\n         */\n        \"linestring\": function(array) {\n            var points = [];\n            var p = null;\n            for(var i=0, len=array.length; i<len; ++i) {\n                try {\n                    p = this.parseCoords[\"point\"].apply(this, [array[i]]);\n                } catch(err) {\n                    throw err;\n                }\n                points.push(p);\n            }\n            return new OpenLayers.Geometry.LineString(points);\n        },\n        \n        /**\n         * Method: parseCoords.multilinestring\n         * Convert a coordinate array from GeoJSON into an\n         *     <OpenLayers.Geometry>.\n         *\n         * Parameters:\n         * array - {Object} The coordinates array from the GeoJSON fragment.\n         *\n         * Returns:\n         * {<OpenLayers.Geometry>} A geometry.\n         */\n        \"multilinestring\": function(array) {\n            var lines = [];\n            var l = null;\n            for(var i=0, len=array.length; i<len; ++i) {\n                try {\n                    l = this.parseCoords[\"linestring\"].apply(this, [array[i]]);\n                } catch(err) {\n                    throw err;\n                }\n                lines.push(l);\n            }\n            return new OpenLayers.Geometry.MultiLineString(lines);\n        },\n        \n        /**\n         * Method: parseCoords.polygon\n         * Convert a coordinate array from GeoJSON into an\n         *     <OpenLayers.Geometry>.\n         *\n         * Returns:\n         * {<OpenLayers.Geometry>} A geometry.\n         */\n        \"polygon\": function(array) {\n            var rings = [];\n            var r, l;\n            for(var i=0, len=array.length; i<len; ++i) {\n                try {\n                    l = this.parseCoords[\"linestring\"].apply(this, [array[i]]);\n                } catch(err) {\n                    throw err;\n                }\n                r = new OpenLayers.Geometry.LinearRing(l.components);\n                rings.push(r);\n            }\n            return new OpenLayers.Geometry.Polygon(rings);\n        },\n\n        /**\n         * Method: parseCoords.multipolygon\n         * Convert a coordinate array from GeoJSON into an\n         *     <OpenLayers.Geometry>.\n         *\n         * Parameters:\n         * array - {Object} The coordinates array from the GeoJSON fragment.\n         *\n         * Returns:\n         * {<OpenLayers.Geometry>} A geometry.\n         */\n        \"multipolygon\": function(array) {\n            var polys = [];\n            var p = null;\n            for(var i=0, len=array.length; i<len; ++i) {\n                try {\n                    p = this.parseCoords[\"polygon\"].apply(this, [array[i]]);\n                } catch(err) {\n                    throw err;\n                }\n                polys.push(p);\n            }\n            return new OpenLayers.Geometry.MultiPolygon(polys);\n        },\n\n        /**\n         * Method: parseCoords.box\n         * Convert a coordinate array from GeoJSON into an\n         *     <OpenLayers.Geometry>.\n         *\n         * Parameters:\n         * array - {Object} The coordinates array from the GeoJSON fragment.\n         *\n         * Returns:\n         * {<OpenLayers.Geometry>} A geometry.\n         */\n        \"box\": function(array) {\n            if(array.length != 2) {\n                throw \"GeoJSON box coordinates must have 2 elements\";\n            }\n            return new OpenLayers.Geometry.Polygon([\n                new OpenLayers.Geometry.LinearRing([\n                    new OpenLayers.Geometry.Point(array[0][0], array[0][1]),\n                    new OpenLayers.Geometry.Point(array[1][0], array[0][1]),\n                    new OpenLayers.Geometry.Point(array[1][0], array[1][1]),\n                    new OpenLayers.Geometry.Point(array[0][0], array[1][1]),\n                    new OpenLayers.Geometry.Point(array[0][0], array[0][1])\n                ])\n            ]);\n        }\n\n    },\n\n    /**\n     * APIMethod: write\n     * Serialize a feature, geometry, array of features into a GeoJSON string.\n     *\n     * Parameters:\n     * obj - {Object} An <OpenLayers.Feature.Vector>, <OpenLayers.Geometry>,\n     *     or an array of features.\n     * pretty - {Boolean} Structure the output with newlines and indentation.\n     *     Default is false.\n     *\n     * Returns:\n     * {String} The GeoJSON string representation of the input geometry,\n     *     features, or array of features.\n     */\n    write: function(obj, pretty) {\n        var geojson = {\n            \"type\": null\n        };\n        if(OpenLayers.Util.isArray(obj)) {\n            geojson.type = \"FeatureCollection\";\n            var numFeatures = obj.length;\n            geojson.features = new Array(numFeatures);\n            for(var i=0; i<numFeatures; ++i) {\n                var element = obj[i];\n                if(!element instanceof OpenLayers.Feature.Vector) {\n                    var msg = \"FeatureCollection only supports collections \" +\n                              \"of features: \" + element;\n                    throw msg;\n                }\n                geojson.features[i] = this.extract.feature.apply(\n                    this, [element]\n                );\n            }\n        } else if (obj.CLASS_NAME.indexOf(\"OpenLayers.Geometry\") == 0) {\n            geojson = this.extract.geometry.apply(this, [obj]);\n        } else if (obj instanceof OpenLayers.Feature.Vector) {\n            geojson = this.extract.feature.apply(this, [obj]);\n            if(obj.layer && obj.layer.projection) {\n                geojson.crs = this.createCRSObject(obj);\n            }\n        }\n        return OpenLayers.Format.JSON.prototype.write.apply(this,\n                                                            [geojson, pretty]);\n    },\n\n    /**\n     * Method: createCRSObject\n     * Create the CRS object for an object.\n     *\n     * Parameters:\n     * object - {<OpenLayers.Feature.Vector>} \n     *\n     * Returns:\n     * {Object} An object which can be assigned to the crs property\n     * of a GeoJSON object.\n     */\n    createCRSObject: function(object) {\n       var proj = object.layer.projection.toString();\n       var crs = {};\n       if (proj.match(/epsg:/i)) {\n           var code = parseInt(proj.substring(proj.indexOf(\":\") + 1));\n           if (code == 4326) {\n               crs = {\n                   \"type\": \"name\",\n                   \"properties\": {\n                       \"name\": \"urn:ogc:def:crs:OGC:1.3:CRS84\"\n                   }\n               };\n           } else {    \n               crs = {\n                   \"type\": \"name\",\n                   \"properties\": {\n                       \"name\": \"EPSG:\" + code\n                   }\n               };\n           }    \n       }\n       return crs;\n    },\n    \n    /**\n     * Property: extract\n     * Object with properties corresponding to the GeoJSON types.\n     *     Property values are functions that do the actual value extraction.\n     */\n    extract: {\n        /**\n         * Method: extract.feature\n         * Return a partial GeoJSON object representing a single feature.\n         *\n         * Parameters:\n         * feature - {<OpenLayers.Feature.Vector>}\n         *\n         * Returns:\n         * {Object} An object representing the point.\n         */\n        'feature': function(feature) {\n            var geom = this.extract.geometry.apply(this, [feature.geometry]);\n            var json = {\n                \"type\": \"Feature\",\n                \"properties\": feature.attributes,\n                \"geometry\": geom\n            };\n            if (feature.fid != null) {\n                json.id = feature.fid;\n            }\n            return json;\n        },\n        \n        /**\n         * Method: extract.geometry\n         * Return a GeoJSON object representing a single geometry.\n         *\n         * Parameters:\n         * geometry - {<OpenLayers.Geometry>}\n         *\n         * Returns:\n         * {Object} An object representing the geometry.\n         */\n        'geometry': function(geometry) {\n            if (geometry == null) {\n                return null;\n            }\n            if (this.internalProjection && this.externalProjection) {\n                geometry = geometry.clone();\n                geometry.transform(this.internalProjection, \n                                   this.externalProjection);\n            }                       \n            var geometryType = geometry.CLASS_NAME.split('.')[2];\n            var data = this.extract[geometryType.toLowerCase()].apply(this, [geometry]);\n            var json;\n            if(geometryType == \"Collection\") {\n                json = {\n                    \"type\": \"GeometryCollection\",\n                    \"geometries\": data\n                };\n            } else {\n                json = {\n                    \"type\": geometryType,\n                    \"coordinates\": data\n                };\n            }\n            \n            return json;\n        },\n\n        /**\n         * Method: extract.point\n         * Return an array of coordinates from a point.\n         *\n         * Parameters:\n         * point - {<OpenLayers.Geometry.Point>}\n         *\n         * Returns: \n         * {Array} An array of coordinates representing the point.\n         */\n        'point': function(point) {\n            return [point.x, point.y];\n        },\n\n        /**\n         * Method: extract.multipoint\n         * Return an array of point coordinates from a multipoint.\n         *\n         * Parameters:\n         * multipoint - {<OpenLayers.Geometry.MultiPoint>}\n         *\n         * Returns:\n         * {Array} An array of point coordinate arrays representing\n         *     the multipoint.\n         */\n        'multipoint': function(multipoint) {\n            var array = [];\n            for(var i=0, len=multipoint.components.length; i<len; ++i) {\n                array.push(this.extract.point.apply(this, [multipoint.components[i]]));\n            }\n            return array;\n        },\n        \n        /**\n         * Method: extract.linestring\n         * Return an array of coordinate arrays from a linestring.\n         *\n         * Parameters:\n         * linestring - {<OpenLayers.Geometry.LineString>}\n         *\n         * Returns:\n         * {Array} An array of coordinate arrays representing\n         *     the linestring.\n         */\n        'linestring': function(linestring) {\n            var array = [];\n            for(var i=0, len=linestring.components.length; i<len; ++i) {\n                array.push(this.extract.point.apply(this, [linestring.components[i]]));\n            }\n            return array;\n        },\n\n        /**\n         * Method: extract.multilinestring\n         * Return an array of linestring arrays from a linestring.\n         * \n         * Parameters:\n         * multilinestring - {<OpenLayers.Geometry.MultiLineString>}\n         * \n         * Returns:\n         * {Array} An array of linestring arrays representing\n         *     the multilinestring.\n         */\n        'multilinestring': function(multilinestring) {\n            var array = [];\n            for(var i=0, len=multilinestring.components.length; i<len; ++i) {\n                array.push(this.extract.linestring.apply(this, [multilinestring.components[i]]));\n            }\n            return array;\n        },\n        \n        /**\n         * Method: extract.polygon\n         * Return an array of linear ring arrays from a polygon.\n         *\n         * Parameters:\n         * polygon - {<OpenLayers.Geometry.Polygon>}\n         * \n         * Returns:\n         * {Array} An array of linear ring arrays representing the polygon.\n         */\n        'polygon': function(polygon) {\n            var array = [];\n            for(var i=0, len=polygon.components.length; i<len; ++i) {\n                array.push(this.extract.linestring.apply(this, [polygon.components[i]]));\n            }\n            return array;\n        },\n\n        /**\n         * Method: extract.multipolygon\n         * Return an array of polygon arrays from a multipolygon.\n         * \n         * Parameters:\n         * multipolygon - {<OpenLayers.Geometry.MultiPolygon>}\n         * \n         * Returns:\n         * {Array} An array of polygon arrays representing\n         *     the multipolygon\n         */\n        'multipolygon': function(multipolygon) {\n            var array = [];\n            for(var i=0, len=multipolygon.components.length; i<len; ++i) {\n                array.push(this.extract.polygon.apply(this, [multipolygon.components[i]]));\n            }\n            return array;\n        },\n        \n        /**\n         * Method: extract.collection\n         * Return an array of geometries from a geometry collection.\n         * \n         * Parameters:\n         * collection - {<OpenLayers.Geometry.Collection>}\n         * \n         * Returns:\n         * {Array} An array of geometry objects representing the geometry\n         *     collection.\n         */\n        'collection': function(collection) {\n            var len = collection.components.length;\n            var array = new Array(len);\n            for(var i=0; i<len; ++i) {\n                array[i] = this.extract.geometry.apply(\n                    this, [collection.components[i]]\n                );\n            }\n            return array;\n        }\n        \n\n    },\n\n    CLASS_NAME: \"OpenLayers.Format.GeoJSON\" \n\n});     \n/* ======================================================================\n    OpenLayers/Control.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/BaseTypes/Class.js\n */\n\n/**\n * Class: OpenLayers.Control\n * Controls affect the display or behavior of the map. They allow everything\n * from panning and zooming to displaying a scale indicator. Controls by \n * default are added to the map they are contained within however it is\n * possible to add a control to an external div by passing the div in the\n * options parameter.\n * \n * Example:\n * The following example shows how to add many of the common controls\n * to a map.\n * \n * > var map = new OpenLayers.Map('map', { controls: [] });\n * >\n * > map.addControl(new OpenLayers.Control.PanZoomBar());\n * > map.addControl(new OpenLayers.Control.LayerSwitcher({'ascending':false}));\n * > map.addControl(new OpenLayers.Control.Permalink());\n * > map.addControl(new OpenLayers.Control.Permalink('permalink'));\n * > map.addControl(new OpenLayers.Control.MousePosition());\n * > map.addControl(new OpenLayers.Control.OverviewMap());\n * > map.addControl(new OpenLayers.Control.KeyboardDefaults());\n *\n * The next code fragment is a quick example of how to intercept \n * shift-mouse click to display the extent of the bounding box\n * dragged out by the user.  Usually controls are not created\n * in exactly this manner.  See the source for a more complete \n * example:\n *\n * > var control = new OpenLayers.Control();\n * > OpenLayers.Util.extend(control, {\n * >     draw: function () {\n * >         // this Handler.Box will intercept the shift-mousedown\n * >         // before Control.MouseDefault gets to see it\n * >         this.box = new OpenLayers.Handler.Box( control, \n * >             {\"done\": this.notice},\n * >             {keyMask: OpenLayers.Handler.MOD_SHIFT});\n * >         this.box.activate();\n * >     },\n * >\n * >     notice: function (bounds) {\n * >         OpenLayers.Console.userError(bounds);\n * >     }\n * > }); \n * > map.addControl(control);\n * \n */\nOpenLayers.Control = OpenLayers.Class({\n\n    /** \n     * Property: id \n     * {String} \n     */\n    id: null,\n    \n    /** \n     * Property: map \n     * {<OpenLayers.Map>} this gets set in the addControl() function in\n     * OpenLayers.Map \n     */\n    map: null,\n\n    /** \n     * APIProperty: div \n     * {DOMElement} The element that contains the control, if not present the \n     *     control is placed inside the map.\n     */\n    div: null,\n\n    /** \n     * APIProperty: type \n     * {Number} Controls can have a 'type'. The type determines the type of\n     * interactions which are possible with them when they are placed in an\n     * <OpenLayers.Control.Panel>. \n     */\n    type: null, \n\n    /** \n     * Property: allowSelection\n     * {Boolean} By default, controls do not allow selection, because\n     * it may interfere with map dragging. If this is true, OpenLayers\n     * will not prevent selection of the control.\n     * Default is false.\n     */\n    allowSelection: false,  \n\n    /** \n     * Property: displayClass \n     * {string}  This property is used for CSS related to the drawing of the\n     * Control. \n     */\n    displayClass: \"\",\n    \n    /**\n    * APIProperty: title  \n    * {string}  This property is used for showing a tooltip over the  \n    * Control.  \n    */ \n    title: \"\",\n\n    /**\n     * APIProperty: autoActivate\n     * {Boolean} Activate the control when it is added to a map.  Default is\n     *     false.\n     */\n    autoActivate: false,\n\n    /** \n     * APIProperty: active \n     * {Boolean} The control is active (read-only).  Use <activate> and \n     *     <deactivate> to change control state.\n     */\n    active: null,\n\n    /**\n     * Property: handlerOptions\n     * {Object} Used to set non-default properties on the control's handler\n     */\n    handlerOptions: null,\n\n    /** \n     * Property: handler \n     * {<OpenLayers.Handler>} null\n     */\n    handler: null,\n\n    /**\n     * APIProperty: eventListeners\n     * {Object} If set as an option at construction, the eventListeners\n     *     object will be registered with <OpenLayers.Events.on>.  Object\n     *     structure must be a listeners object as shown in the example for\n     *     the events.on method.\n     */\n    eventListeners: null,\n\n    /** \n     * APIProperty: events\n     * {<OpenLayers.Events>} Events instance for listeners and triggering\n     *     control specific events.\n     *\n     * Register a listener for a particular event with the following syntax:\n     * (code)\n     * control.events.register(type, obj, listener);\n     * (end)\n     *\n     * Listeners will be called with a reference to an event object.  The\n     *     properties of this event depends on exactly what happened.\n     *\n     * All event objects have at least the following properties:\n     * object - {Object} A reference to control.events.object (a reference\n     *      to the control).\n     * element - {DOMElement} A reference to control.events.element (which\n     *      will be null unless documented otherwise).\n     *\n     * Supported map event types:\n     * activate - Triggered when activated.\n     * deactivate - Triggered when deactivated.\n     */\n    events: null,\n\n    /**\n     * Constructor: OpenLayers.Control\n     * Create an OpenLayers Control.  The options passed as a parameter\n     * directly extend the control.  For example passing the following:\n     * \n     * > var control = new OpenLayers.Control({div: myDiv});\n     *\n     * Overrides the default div attribute value of null.\n     * \n     * Parameters:\n     * options - {Object} \n     */\n    initialize: function (options) {\n        // We do this before the extend so that instances can override\n        // className in options.\n        this.displayClass = \n            this.CLASS_NAME.replace(\"OpenLayers.\", \"ol\").replace(/\\./g, \"\");\n        \n        OpenLayers.Util.extend(this, options);\n        \n        this.events = new OpenLayers.Events(this);\n        if(this.eventListeners instanceof Object) {\n            this.events.on(this.eventListeners);\n        }\n        if (this.id == null) {\n            this.id = OpenLayers.Util.createUniqueID(this.CLASS_NAME + \"_\");\n        }\n    },\n\n    /**\n     * Method: destroy\n     * The destroy method is used to perform any clean up before the control\n     * is dereferenced.  Typically this is where event listeners are removed\n     * to prevent memory leaks.\n     */\n    destroy: function () {\n        if(this.events) {\n            if(this.eventListeners) {\n                this.events.un(this.eventListeners);\n            }\n            this.events.destroy();\n            this.events = null;\n        }\n        this.eventListeners = null;\n\n        // eliminate circular references\n        if (this.handler) {\n            this.handler.destroy();\n            this.handler = null;\n        }\n        if(this.handlers) {\n            for(var key in this.handlers) {\n                if(this.handlers.hasOwnProperty(key) &&\n                   typeof this.handlers[key].destroy == \"function\") {\n                    this.handlers[key].destroy();\n                }\n            }\n            this.handlers = null;\n        }\n        if (this.map) {\n            this.map.removeControl(this);\n            this.map = null;\n        }\n        this.div = null;\n    },\n\n    /** \n     * Method: setMap\n     * Set the map property for the control. This is done through an accessor\n     * so that subclasses can override this and take special action once \n     * they have their map variable set. \n     *\n     * Parameters:\n     * map - {<OpenLayers.Map>} \n     */\n    setMap: function(map) {\n        this.map = map;\n        if (this.handler) {\n            this.handler.setMap(map);\n        }\n    },\n  \n    /**\n     * Method: draw\n     * The draw method is called when the control is ready to be displayed\n     * on the page.  If a div has not been created one is created.  Controls\n     * with a visual component will almost always want to override this method \n     * to customize the look of control. \n     *\n     * Parameters:\n     * px - {<OpenLayers.Pixel>} The top-left pixel position of the control\n     *      or null.\n     *\n     * Returns:\n     * {DOMElement} A reference to the DIV DOMElement containing the control\n     */\n    draw: function (px) {\n        if (this.div == null) {\n            this.div = OpenLayers.Util.createDiv(this.id);\n            this.div.className = this.displayClass;\n            if (!this.allowSelection) {\n                this.div.className += \" olControlNoSelect\";\n                this.div.setAttribute(\"unselectable\", \"on\", 0);\n                this.div.onselectstart = OpenLayers.Function.False; \n            }    \n            if (this.title != \"\") {\n                this.div.title = this.title;\n            }\n        }\n        if (px != null) {\n            this.position = px.clone();\n        }\n        this.moveTo(this.position);\n        return this.div;\n    },\n\n    /**\n     * Method: moveTo\n     * Sets the left and top style attributes to the passed in pixel \n     * coordinates.\n     *\n     * Parameters:\n     * px - {<OpenLayers.Pixel>}\n     */\n    moveTo: function (px) {\n        if ((px != null) && (this.div != null)) {\n            this.div.style.left = px.x + \"px\";\n            this.div.style.top = px.y + \"px\";\n        }\n    },\n\n    /**\n     * APIMethod: activate\n     * Explicitly activates a control and its associated\n     * handler if one has been set.  Controls can be\n     * deactivated by calling the deactivate() method.\n     * \n     * Returns:\n     * {Boolean}  True if the control was successfully activated or\n     *            false if the control was already active.\n     */\n    activate: function () {\n        if (this.active) {\n            return false;\n        }\n        if (this.handler) {\n            this.handler.activate();\n        }\n        this.active = true;\n        if(this.map) {\n            OpenLayers.Element.addClass(\n                this.map.viewPortDiv,\n                this.displayClass.replace(/ /g, \"\") + \"Active\"\n            );\n        }\n        this.events.triggerEvent(\"activate\");\n        return true;\n    },\n    \n    /**\n     * APIMethod: deactivate\n     * Deactivates a control and its associated handler if any.  The exact\n     * effect of this depends on the control itself.\n     * \n     * Returns:\n     * {Boolean} True if the control was effectively deactivated or false\n     *           if the control was already inactive.\n     */\n    deactivate: function () {\n        if (this.active) {\n            if (this.handler) {\n                this.handler.deactivate();\n            }\n            this.active = false;\n            if(this.map) {\n                OpenLayers.Element.removeClass(\n                    this.map.viewPortDiv,\n                    this.displayClass.replace(/ /g, \"\") + \"Active\"\n                );\n            }\n            this.events.triggerEvent(\"deactivate\");\n            return true;\n        }\n        return false;\n    },\n\n    CLASS_NAME: \"OpenLayers.Control\"\n});\n\n/**\n * Constant: OpenLayers.Control.TYPE_BUTTON\n */\nOpenLayers.Control.TYPE_BUTTON = 1;\n\n/**\n * Constant: OpenLayers.Control.TYPE_TOGGLE\n */\nOpenLayers.Control.TYPE_TOGGLE = 2;\n\n/**\n * Constant: OpenLayers.Control.TYPE_TOOL\n */\nOpenLayers.Control.TYPE_TOOL   = 3;\n/* ======================================================================\n    OpenLayers/Control/DrawFeature.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Control.js\n * @requires OpenLayers/Feature/Vector.js\n */\n\n/**\n * Class: OpenLayers.Control.DrawFeature\n * The DrawFeature control draws point, line or polygon features on a vector\n * layer when active.\n *\n * Inherits from:\n *  - <OpenLayers.Control>\n */\nOpenLayers.Control.DrawFeature = OpenLayers.Class(OpenLayers.Control, {\n    \n    /**\n     * Property: layer\n     * {<OpenLayers.Layer.Vector>}\n     */\n    layer: null,\n\n    /**\n     * Property: callbacks\n     * {Object} The functions that are sent to the handler for callback\n     */\n    callbacks: null,\n    \n    /** \n     * APIProperty: events\n     * {<OpenLayers.Events>} Events instance for listeners and triggering\n     *     control specific events.\n     *\n     * Register a listener for a particular event with the following syntax:\n     * (code)\n     * control.events.register(type, obj, listener);\n     * (end)\n     *\n     * Supported event types (in addition to those from <OpenLayers.Control.events>):\n     * featureadded - Triggered when a feature is added\n     */\n    \n    /**\n     * APIProperty: multi\n     * {Boolean} Cast features to multi-part geometries before passing to the\n     *     layer.  Default is false.\n     */\n    multi: false,\n\n    /**\n     * APIProperty: featureAdded\n     * {Function} Called after each feature is added\n     */\n    featureAdded: function() {},\n\n    /**\n     * APIProperty: handlerOptions\n     * {Object} Used to set non-default properties on the control's handler\n     */\n    \n    /**\n     * Constructor: OpenLayers.Control.DrawFeature\n     * \n     * Parameters:\n     * layer - {<OpenLayers.Layer.Vector>} \n     * handler - {<OpenLayers.Handler>} \n     * options - {Object} \n     */\n    initialize: function(layer, handler, options) {\n        OpenLayers.Control.prototype.initialize.apply(this, [options]);\n        this.callbacks = OpenLayers.Util.extend(\n            {\n                done: this.drawFeature,\n                modify: function(vertex, feature) {\n                    this.layer.events.triggerEvent(\n                        \"sketchmodified\", {vertex: vertex, feature: feature}\n                    );\n                },\n                create: function(vertex, feature) {\n                    this.layer.events.triggerEvent(\n                        \"sketchstarted\", {vertex: vertex, feature: feature}\n                    );\n                }\n            },\n            this.callbacks\n        );\n        this.layer = layer;\n        this.handlerOptions = this.handlerOptions || {};\n        this.handlerOptions.layerOptions = OpenLayers.Util.applyDefaults(\n            this.handlerOptions.layerOptions, {\n                renderers: layer.renderers, rendererOptions: layer.rendererOptions\n            }\n        );\n        if (!(\"multi\" in this.handlerOptions)) {\n            this.handlerOptions.multi = this.multi;\n        }\n        var sketchStyle = this.layer.styleMap && this.layer.styleMap.styles.temporary;\n        if(sketchStyle) {\n            this.handlerOptions.layerOptions = OpenLayers.Util.applyDefaults(\n                this.handlerOptions.layerOptions,\n                {styleMap: new OpenLayers.StyleMap({\"default\": sketchStyle})}\n            );\n        }\n        this.handler = new handler(this, this.callbacks, this.handlerOptions);\n    },\n\n    /**\n     * Method: drawFeature\n     */\n    drawFeature: function(geometry) {\n        var feature = new OpenLayers.Feature.Vector(geometry);\n        var proceed = this.layer.events.triggerEvent(\n            \"sketchcomplete\", {feature: feature}\n        );\n        if(proceed !== false) {\n            feature.state = OpenLayers.State.INSERT;\n            this.layer.addFeatures([feature]);\n            this.featureAdded(feature);\n            this.events.triggerEvent(\"featureadded\",{feature : feature});\n        }\n    },\n    \n    /**\n     * APIMethod: insertXY\n     * Insert a point in the current sketch given x & y coordinates.\n     *\n     * Parameters:\n     * x - {Number} The x-coordinate of the point.\n     * y - {Number} The y-coordinate of the point.\n     */\n    insertXY: function(x, y) {\n        if (this.handler && this.handler.line) {\n            this.handler.insertXY(x, y);\n        }\n    },\n\n    /**\n     * APIMethod: insertDeltaXY\n     * Insert a point given offsets from the previously inserted point.\n     *\n     * Parameters:\n     * dx - {Number} The x-coordinate offset of the point.\n     * dy - {Number} The y-coordinate offset of the point.\n     */\n    insertDeltaXY: function(dx, dy) {\n        if (this.handler && this.handler.line) {\n            this.handler.insertDeltaXY(dx, dy);\n        }\n    },\n\n    /**\n     * APIMethod: insertDirectionLength\n     * Insert a point in the current sketch given a direction and a length.\n     *\n     * Parameters:\n     * direction - {Number} Degrees clockwise from the positive x-axis.\n     * length - {Number} Distance from the previously drawn point.\n     */\n    insertDirectionLength: function(direction, length) {\n        if (this.handler && this.handler.line) {\n            this.handler.insertDirectionLength(direction, length);\n        }\n    },\n\n    /**\n     * APIMethod: insertDeflectionLength\n     * Insert a point in the current sketch given a deflection and a length.\n     *     The deflection should be degrees clockwise from the previously \n     *     digitized segment.\n     *\n     * Parameters:\n     * deflection - {Number} Degrees clockwise from the previous segment.\n     * length - {Number} Distance from the previously drawn point.\n     */\n    insertDeflectionLength: function(deflection, length) {\n        if (this.handler && this.handler.line) {\n            this.handler.insertDeflectionLength(deflection, length);\n        }\n    },\n    \n    /**\n     * APIMethod: undo\n     * Remove the most recently added point in the current sketch geometry.\n     *\n     * Returns: \n     * {Boolean} An edit was undone.\n     */\n    undo: function() {\n        return this.handler.undo && this.handler.undo();\n    },\n    \n    /**\n     * APIMethod: redo\n     * Reinsert the most recently removed point resulting from an <undo> call.\n     *     The undo stack is deleted whenever a point is added by other means.\n     *\n     * Returns: \n     * {Boolean} An edit was redone.\n     */\n    redo: function() {\n        return this.handler.redo && this.handler.redo();\n    },\n    \n    /**\n     * APIMethod: finishSketch\n     * Finishes the sketch without including the currently drawn point.\n     *     This method can be called to terminate drawing programmatically\n     *     instead of waiting for the user to end the sketch.\n     */\n    finishSketch: function() {\n        this.handler.finishGeometry();\n    },\n\n    /**\n     * APIMethod: cancel\n     * Cancel the current sketch.  This removes the current sketch and keeps\n     *     the drawing control active.\n     */\n    cancel: function() {\n        this.handler.cancel();\n    },\n\n    CLASS_NAME: \"OpenLayers.Control.DrawFeature\"\n});\n/* ======================================================================\n    OpenLayers/Control/MousePosition.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Control.js\n */\n\n/**\n * Class: OpenLayers.Control.MousePosition\n * The MousePosition control displays geographic coordinates of the mouse\n * pointer, as it is moved about the map.\n *\n * You can use the <prefix>- or <suffix>-properties to provide more information\n * about the displayed coordinates to the user:\n *\n * (code)\n *     var mousePositionCtrl = new OpenLayers.Control.MousePosition({\n *         prefix: '<a target=\"_blank\" ' +\n *             'href=\"http://spatialreference.org/ref/epsg/4326/\">' +\n *             'EPSG:4326</a> coordinates: '\n *         }\n *     );\n * (end code)\n *\n * Inherits from:\n *  - <OpenLayers.Control>\n */\nOpenLayers.Control.MousePosition = OpenLayers.Class(OpenLayers.Control, {\n\n    /**\n     * APIProperty: autoActivate\n     * {Boolean} Activate the control when it is added to a map.  Default is\n     *     true.\n     */\n    autoActivate: true,\n\n    /**\n     * Property: element\n     * {DOMElement}\n     */\n    element: null,\n\n    /**\n     * APIProperty: prefix\n     * {String} A string to be prepended to the current pointers coordinates\n     *     when it is rendered.  Defaults to the empty string ''.\n     */\n    prefix: '',\n\n    /**\n     * APIProperty: separator\n     * {String} A string to be used to separate the two coordinates from each\n     *     other.  Defaults to the string ', ', which will result in a\n     *     rendered coordinate of e.g. '42.12, 21.22'.\n     */\n    separator: ', ',\n\n    /**\n     * APIProperty: suffix\n     * {String} A string to be appended to the current pointers coordinates\n     *     when it is rendered.  Defaults to the empty string ''.\n     */\n    suffix: '',\n\n    /**\n     * APIProperty: numDigits\n     * {Integer} The number of digits each coordinate shall have when being\n     *     rendered, Defaults to 5.\n     */\n    numDigits: 5,\n\n    /**\n     * APIProperty: granularity\n     * {Integer}\n     */\n    granularity: 10,\n\n    /**\n     * APIProperty: emptyString\n     * {String} Set this to some value to set when the mouse is outside the\n     *     map.\n     */\n    emptyString: null,\n\n    /**\n     * Property: lastXy\n     * {<OpenLayers.Pixel>}\n     */\n    lastXy: null,\n\n    /**\n     * APIProperty: displayProjection\n     * {<OpenLayers.Projection>} The projection in which the mouse position is\n     *     displayed.\n     */\n    displayProjection: null,\n\n    /**\n     * Constructor: OpenLayers.Control.MousePosition\n     *\n     * Parameters:\n     * options - {Object} Options for control.\n     */\n\n    /**\n     * Method: destroy\n     */\n     destroy: function() {\n         this.deactivate();\n         OpenLayers.Control.prototype.destroy.apply(this, arguments);\n     },\n\n    /**\n     * APIMethod: activate\n     */\n    activate: function() {\n        if (OpenLayers.Control.prototype.activate.apply(this, arguments)) {\n            this.map.events.register('mousemove', this, this.redraw);\n            this.map.events.register('mouseout', this, this.reset);\n            this.redraw();\n            return true;\n        } else {\n            return false;\n        }\n    },\n\n    /**\n     * APIMethod: deactivate\n     */\n    deactivate: function() {\n        if (OpenLayers.Control.prototype.deactivate.apply(this, arguments)) {\n            this.map.events.unregister('mousemove', this, this.redraw);\n            this.map.events.unregister('mouseout', this, this.reset);\n            this.element.innerHTML = \"\";\n            return true;\n        } else {\n            return false;\n        }\n    },\n\n    /**\n     * Method: draw\n     * {DOMElement}\n     */\n    draw: function() {\n        OpenLayers.Control.prototype.draw.apply(this, arguments);\n\n        if (!this.element) {\n            this.div.left = \"\";\n            this.div.top = \"\";\n            this.element = this.div;\n        }\n\n        return this.div;\n    },\n\n    /**\n     * Method: redraw\n     */\n    redraw: function(evt) {\n\n        var lonLat;\n\n        if (evt == null) {\n            this.reset();\n            return;\n        } else {\n            if (this.lastXy == null ||\n                Math.abs(evt.xy.x - this.lastXy.x) > this.granularity ||\n                Math.abs(evt.xy.y - this.lastXy.y) > this.granularity)\n            {\n                this.lastXy = evt.xy;\n                return;\n            }\n\n            lonLat = this.map.getLonLatFromPixel(evt.xy);\n            if (!lonLat) {\n                // map has not yet been properly initialized\n                return;\n            }\n            if (this.displayProjection) {\n                lonLat.transform(this.map.getProjectionObject(),\n                                 this.displayProjection );\n            }\n            this.lastXy = evt.xy;\n\n        }\n\n        var newHtml = this.formatOutput(lonLat);\n\n        if (newHtml != this.element.innerHTML) {\n            this.element.innerHTML = newHtml;\n        }\n    },\n\n    /**\n     * Method: reset\n     */\n    reset: function(evt) {\n        if (this.emptyString != null) {\n            this.element.innerHTML = this.emptyString;\n        }\n    },\n\n    /**\n     * Method: formatOutput\n     * Override to provide custom display output\n     *\n     * Parameters:\n     * lonLat - {<OpenLayers.LonLat>} Location to display\n     */\n    formatOutput: function(lonLat) {\n        var digits = parseInt(this.numDigits);\n        var newHtml =\n            this.prefix +\n            lonLat.lon.toFixed(digits) +\n            this.separator +\n            lonLat.lat.toFixed(digits) +\n            this.suffix;\n        return newHtml;\n    },\n\n    CLASS_NAME: \"OpenLayers.Control.MousePosition\"\n});\n/* ======================================================================\n    OpenLayers/Events/buttonclick.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Events.js\n */\n\n/**\n * Class: OpenLayers.Events.buttonclick\n * Extension event type for handling buttons on top of a dom element. This\n *     event type fires \"buttonclick\" on its <target> when a button was\n *     clicked. Buttons are detected by the \"olButton\" class.\n *\n * This event type makes sure that button clicks do not interfere with other\n *     events that are registered on the same <element>.\n *\n * Event types provided by this extension:\n * - *buttonclick* Triggered when a button is clicked. Listeners receive an\n *     object with a *buttonElement* property referencing the dom element of\n *     the clicked button, and an *buttonXY* property with the click position\n *     relative to the button.\n */\nOpenLayers.Events.buttonclick = OpenLayers.Class({\n    \n    /**\n     * Property: target\n     * {<OpenLayers.Events>} The events instance that the buttonclick event will\n     * be triggered on.\n     */\n    target: null,\n    \n    /**\n     * Property: events\n     * {Array} Events to observe and conditionally stop from propagating when\n     *     an element with the olButton class (or its olAlphaImg child) is\n     *     clicked.\n     */\n    events: [\n        'mousedown', 'mouseup', 'click', 'dblclick',\n        'touchstart', 'touchmove', 'touchend', 'keydown'\n    ],\n    \n    /**\n     * Property: startRegEx\n     * {RegExp} Regular expression to test Event.type for events that start\n     *     a buttonclick sequence.\n     */\n    startRegEx: /^mousedown|touchstart$/,\n\n    /**\n     * Property: cancelRegEx\n     * {RegExp} Regular expression to test Event.type for events that cancel\n     *     a buttonclick sequence.\n     */\n    cancelRegEx: /^touchmove$/,\n\n    /**\n     * Property: completeRegEx\n     * {RegExp} Regular expression to test Event.type for events that complete\n     *     a buttonclick sequence.\n     */\n    completeRegEx: /^mouseup|touchend$/,\n\n    /**\n     * Property: isDeviceTouchCapable\n     * {Boolean} Tells whether the browser detects touch events.\n     */\n    isDeviceTouchCapable: 'ontouchstart' in window ||\n        window.DocumentTouch && document instanceof window.DocumentTouch,\n    \n    /**\n     * Property: startEvt\n     * {Event} The event that started the click sequence\n     */\n    \n    /**\n     * Constructor: OpenLayers.Events.buttonclick\n     * Construct a buttonclick event type. Applications are not supposed to\n     *     create instances of this class - they are created on demand by\n     *     <OpenLayers.Events> instances.\n     *\n     * Parameters:\n     * target - {<OpenLayers.Events>} The events instance that the buttonclick\n     *     event will be triggered on.\n     */\n    initialize: function(target) {\n        this.target = target;\n        for (var i=this.events.length-1; i>=0; --i) {\n            this.target.register(this.events[i], this, this.buttonClick, {\n                extension: true\n            });\n        }\n    },\n    \n    /**\n     * Method: destroy\n     */\n    destroy: function() {\n        for (var i=this.events.length-1; i>=0; --i) {\n            this.target.unregister(this.events[i], this, this.buttonClick);\n        }\n        delete this.target;\n    },\n\n    /**\n     * Method: getPressedButton\n     * Get the pressed button, if any. Returns undefined if no button\n     * was pressed.\n     *\n     * Arguments:\n     * element - {DOMElement} The event target.\n     *\n     * Returns:\n     * {DOMElement} The button element, or undefined.\n     */\n    getPressedButton: function(element) {\n        var depth = 3, // limit the search depth\n            button;\n        do {\n            if(OpenLayers.Element.hasClass(element, \"olButton\")) {\n                // hit!\n                button = element;\n                break;\n            }\n            element = element.parentNode;\n        } while(--depth > 0 && element);\n        return button;\n    },\n    \n    /**\n     * Method: ignore\n     * Check for event target elements that should be ignored by OpenLayers.\n     *\n     * Parameters:\n     * element - {DOMElement} The event target.\n     */\n    ignore: function(element) {\n        var depth = 3,\n            ignore = false;\n        do {\n            if (element.nodeName.toLowerCase() === 'a') {\n                ignore = true;\n                break;\n            }\n            element = element.parentNode;\n        } while (--depth > 0 && element);\n        return ignore;\n    },\n\n    /**\n     * Method: buttonClick\n     * Check if a button was clicked, and fire the buttonclick event\n     *\n     * Parameters:\n     * evt - {Event}\n     */\n    buttonClick: function(evt) {\n        var propagate = true,\n            element = OpenLayers.Event.element(evt);\n\n        if (element &&\n           (OpenLayers.Event.isLeftClick(evt) &&\n            !this.isDeviceTouchCapable ||\n            !~evt.type.indexOf(\"mouse\"))) {\n            // was a button pressed?\n            var button = this.getPressedButton(element);\n            if (button) {\n                if (evt.type === \"keydown\") {\n                    switch (evt.keyCode) {\n                    case OpenLayers.Event.KEY_RETURN:\n                    case OpenLayers.Event.KEY_SPACE:\n                        this.target.triggerEvent(\"buttonclick\", {\n                            buttonElement: button\n                        });\n                        OpenLayers.Event.stop(evt);\n                        propagate = false;\n                        break;\n                    }\n                } else if (this.startEvt) {\n                    if (this.completeRegEx.test(evt.type)) {\n                        var pos = OpenLayers.Util.pagePosition(button);\n                        var viewportElement = OpenLayers.Util.getViewportElement();\n                        var scrollTop = window.pageYOffset || viewportElement.scrollTop;\n                        var scrollLeft = window.pageXOffset || viewportElement.scrollLeft;\n                        pos[0] = pos[0] - scrollLeft;\n                        pos[1] = pos[1] - scrollTop;\n                        \n                        this.target.triggerEvent(\"buttonclick\", {\n                            buttonElement: button,\n                            buttonXY: {\n                                x: this.startEvt.clientX - pos[0],\n                                y: this.startEvt.clientY - pos[1]\n                            }\n                        });\n                    }\n                    if (this.cancelRegEx.test(evt.type)) {\n                        if (evt.touches && this.startEvt.touches &&\n                                (Math.abs(evt.touches[0].olClientX - this.startEvt.touches[0].olClientX) > 4 ||\n                                Math.abs(evt.touches[0].olClientY - this.startEvt.touches[0].olClientY)) > 4) {\n                            delete this.startEvt;\n                        }\n                    }\n                    OpenLayers.Event.stop(evt);\n                    propagate = false;\n                }\n                if (this.startRegEx.test(evt.type)) {\n                    this.startEvt = evt;\n                    OpenLayers.Event.stop(evt);\n                    propagate = false;\n                }\n            } else {\n                propagate = !this.ignore(OpenLayers.Event.element(evt));\n                delete this.startEvt;\n            }\n        }\n        return propagate;\n    }\n    \n});\n/* ======================================================================\n    OpenLayers/Control/Zoom.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Control.js\n * @requires OpenLayers/Events/buttonclick.js\n */\n\n/**\n * Class: OpenLayers.Control.Zoom\n * The Zoom control is a pair of +/- links for zooming in and out.\n *\n * Inherits from:\n *  - <OpenLayers.Control>\n */\nOpenLayers.Control.Zoom = OpenLayers.Class(OpenLayers.Control, {\n    \n    /**\n     * APIProperty: zoomInText\n     * {String}\n     * Text for zoom-in link.  Default is \"+\".\n     */\n    zoomInText: \"+\",\n\n    /**\n     * APIProperty: zoomInId\n     * {String}\n     * Instead of having the control create a zoom in link, you can provide \n     *     the identifier for an anchor element already added to the document.\n     *     By default, an element with id \"olZoomInLink\" will be searched for\n     *     and used if it exists.\n     */\n    zoomInId: \"olZoomInLink\",\n\n    /**\n     * APIProperty: zoomOutText\n     * {String}\n     * Text for zoom-out link.  Default is \"\\u2212\".\n     */\n    zoomOutText: \"\\u2212\",\n\n    /**\n     * APIProperty: zoomOutId\n     * {String}\n     * Instead of having the control create a zoom out link, you can provide \n     *     the identifier for an anchor element already added to the document.\n     *     By default, an element with id \"olZoomOutLink\" will be searched for\n     *     and used if it exists.\n     */\n    zoomOutId: \"olZoomOutLink\",\n\n    /**\n     * Method: draw\n     *\n     * Returns:\n     * {DOMElement} A reference to the DOMElement containing the zoom links.\n     */\n    draw: function() {\n        var div = OpenLayers.Control.prototype.draw.apply(this),\n            links = this.getOrCreateLinks(div),\n            zoomIn = links.zoomIn,\n            zoomOut = links.zoomOut,\n            eventsInstance = this.map.events;\n        \n        if (zoomOut.parentNode !== div) {\n            eventsInstance = this.events;\n            eventsInstance.attachToElement(zoomOut.parentNode);\n        }\n        eventsInstance.register(\"buttonclick\", this, this.onZoomClick);\n        \n        this.zoomInLink = zoomIn;\n        this.zoomOutLink = zoomOut;\n        return div;\n    },\n    \n    /**\n     * Method: getOrCreateLinks\n     * \n     * Parameters:\n     * el - {DOMElement}\n     *\n     * Return: \n     * {Object} Object with zoomIn and zoomOut properties referencing links.\n     */\n    getOrCreateLinks: function(el) {\n        var zoomIn = document.getElementById(this.zoomInId),\n            zoomOut = document.getElementById(this.zoomOutId);\n        if (!zoomIn) {\n            zoomIn = document.createElement(\"a\");\n            zoomIn.href = \"#zoomIn\";\n            zoomIn.appendChild(document.createTextNode(this.zoomInText));\n            zoomIn.className = \"olControlZoomIn\";\n            el.appendChild(zoomIn);\n        }\n        OpenLayers.Element.addClass(zoomIn, \"olButton\");\n        if (!zoomOut) {\n            zoomOut = document.createElement(\"a\");\n            zoomOut.href = \"#zoomOut\";\n            zoomOut.appendChild(document.createTextNode(this.zoomOutText));\n            zoomOut.className = \"olControlZoomOut\";\n            el.appendChild(zoomOut);\n        }\n        OpenLayers.Element.addClass(zoomOut, \"olButton\");\n        return {\n            zoomIn: zoomIn, zoomOut: zoomOut\n        };\n    },\n    \n    /**\n     * Method: onZoomClick\n     * Called when zoomin/out link is clicked.\n     */\n    onZoomClick: function(evt) {\n        var button = evt.buttonElement;\n        if (button === this.zoomInLink) {\n            this.map.zoomIn();\n        } else if (button === this.zoomOutLink) {\n            this.map.zoomOut();\n        }\n    },\n\n    /** \n     * Method: destroy\n     * Clean up.\n     */\n    destroy: function() {\n        if (this.map) {\n            this.map.events.unregister(\"buttonclick\", this, this.onZoomClick);\n        }\n        delete this.zoomInLink;\n        delete this.zoomOutLink;\n        OpenLayers.Control.prototype.destroy.apply(this);\n    },\n\n    CLASS_NAME: \"OpenLayers.Control.Zoom\"\n});\n/* ======================================================================\n    OpenLayers/Handler/Feature.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Handler.js\n */\n\n/**\n * Class: OpenLayers.Handler.Feature \n * Handler to respond to mouse events related to a drawn feature.  Callbacks\n *     with the following keys will be notified of the following events\n *     associated with features: click, clickout, over, out, and dblclick.\n *\n * This handler stops event propagation for mousedown and mouseup if those\n *     browser events target features that can be selected.\n *\n * Inherits from:\n *  - <OpenLayers.Handler>\n */\nOpenLayers.Handler.Feature = OpenLayers.Class(OpenLayers.Handler, {\n\n    /**\n     * Property: EVENTMAP\n     * {Object} A object mapping the browser events to objects with callback\n     *     keys for in and out.\n     */\n    EVENTMAP: {\n        'click': {'in': 'click', 'out': 'clickout'},\n        'mousemove': {'in': 'over', 'out': 'out'},\n        'dblclick': {'in': 'dblclick', 'out': null},\n        'mousedown': {'in': null, 'out': null},\n        'mouseup': {'in': null, 'out': null},\n        'touchstart': {'in': 'click', 'out': 'clickout'}\n    },\n\n    /**\n     * Property: feature\n     * {<OpenLayers.Feature.Vector>} The last feature that was hovered.\n     */\n    feature: null,\n\n    /**\n     * Property: lastFeature\n     * {<OpenLayers.Feature.Vector>} The last feature that was handled.\n     */\n    lastFeature: null,\n\n    /**\n     * Property: down\n     * {<OpenLayers.Pixel>} The location of the last mousedown.\n     */\n    down: null,\n\n    /**\n     * Property: up\n     * {<OpenLayers.Pixel>} The location of the last mouseup.\n     */\n    up: null,\n    \n    /**\n     * Property: clickTolerance\n     * {Number} The number of pixels the mouse can move between mousedown\n     *     and mouseup for the event to still be considered a click.\n     *     Dragging the map should not trigger the click and clickout callbacks\n     *     unless the map is moved by less than this tolerance. Defaults to 4.\n     */\n    clickTolerance: 4,\n\n    /**\n     * Property: geometryTypes\n     * To restrict dragging to a limited set of geometry types, send a list\n     * of strings corresponding to the geometry class names.\n     * \n     * @type Array(String)\n     */\n    geometryTypes: null,\n\n    /**\n     * Property: stopClick\n     * {Boolean} If stopClick is set to true, handled clicks do not\n     *      propagate to other click listeners. Otherwise, handled clicks\n     *      do propagate. Unhandled clicks always propagate, whatever the\n     *      value of stopClick. Defaults to true.\n     */\n    stopClick: true,\n\n    /**\n     * Property: stopDown\n     * {Boolean} If stopDown is set to true, handled mousedowns do not\n     *      propagate to other mousedown listeners. Otherwise, handled\n     *      mousedowns do propagate. Unhandled mousedowns always propagate,\n     *      whatever the value of stopDown. Defaults to true.\n     */\n    stopDown: true,\n\n    /**\n     * Property: stopUp\n     * {Boolean} If stopUp is set to true, handled mouseups do not\n     *      propagate to other mouseup listeners. Otherwise, handled mouseups\n     *      do propagate. Unhandled mouseups always propagate, whatever the\n     *      value of stopUp. Defaults to false.\n     */\n    stopUp: false,\n    \n    /**\n     * Constructor: OpenLayers.Handler.Feature\n     *\n     * Parameters:\n     * control - {<OpenLayers.Control>} \n     * layer - {<OpenLayers.Layer.Vector>}\n     * callbacks - {Object} An object with a 'over' property whos value is\n     *     a function to be called when the mouse is over a feature. The \n     *     callback should expect to receive a single argument, the feature.\n     * options - {Object} \n     */\n    initialize: function(control, layer, callbacks, options) {\n        OpenLayers.Handler.prototype.initialize.apply(this, [control, callbacks, options]);\n        this.layer = layer;\n    },\n\n    /**\n     * Method: touchstart\n     * Handle touchstart events\n     *\n     * Parameters:\n     * evt - {Event}\n     *\n     * Returns:\n     * {Boolean} Let the event propagate.\n     */\n    touchstart: function(evt) {\n        this.startTouch(); \n        return OpenLayers.Event.isMultiTouch(evt) ?\n                true : this.mousedown(evt);\n    },\n\n    /**\n     * Method: touchmove\n     * Handle touchmove events. We just prevent the browser default behavior,\n     *    for Android Webkit not to select text when moving the finger after\n     *    selecting a feature.\n     *\n     * Parameters:\n     * evt - {Event}\n     */\n    touchmove: function(evt) {\n        OpenLayers.Event.preventDefault(evt);\n    },\n\n    /**\n     * Method: mousedown\n     * Handle mouse down.  Stop propagation if a feature is targeted by this\n     *     event (stops map dragging during feature selection).\n     * \n     * Parameters:\n     * evt - {Event} \n     */\n    mousedown: function(evt) {\n        // Feature selection is only done with a left click. Other handlers may stop the\n        // propagation of left-click mousedown events but not right-click mousedown events.\n        // This mismatch causes problems when comparing the location of the down and up\n        // events in the click function so it is important ignore right-clicks.\n        if (OpenLayers.Event.isLeftClick(evt) || OpenLayers.Event.isSingleTouch(evt)) {\n            this.down = evt.xy;\n        }\n        return this.handle(evt) ? !this.stopDown : true;\n    },\n    \n    /**\n     * Method: mouseup\n     * Handle mouse up.  Stop propagation if a feature is targeted by this\n     *     event.\n     * \n     * Parameters:\n     * evt - {Event} \n     */\n    mouseup: function(evt) {\n        this.up = evt.xy;\n        return this.handle(evt) ? !this.stopUp : true;\n    },\n\n    /**\n     * Method: click\n     * Handle click.  Call the \"click\" callback if click on a feature,\n     *     or the \"clickout\" callback if click outside any feature.\n     * \n     * Parameters:\n     * evt - {Event} \n     *\n     * Returns:\n     * {Boolean}\n     */\n    click: function(evt) {\n        return this.handle(evt) ? !this.stopClick : true;\n    },\n        \n    /**\n     * Method: mousemove\n     * Handle mouse moves.  Call the \"over\" callback if moving in to a feature,\n     *     or the \"out\" callback if moving out of a feature.\n     * \n     * Parameters:\n     * evt - {Event} \n     *\n     * Returns:\n     * {Boolean}\n     */\n    mousemove: function(evt) {\n        if (!this.callbacks['over'] && !this.callbacks['out']) {\n            return true;\n        }     \n        this.handle(evt);\n        return true;\n    },\n    \n    /**\n     * Method: dblclick\n     * Handle dblclick.  Call the \"dblclick\" callback if dblclick on a feature.\n     *\n     * Parameters:\n     * evt - {Event} \n     *\n     * Returns:\n     * {Boolean}\n     */\n    dblclick: function(evt) {\n        return !this.handle(evt);\n    },\n\n    /**\n     * Method: geometryTypeMatches\n     * Return true if the geometry type of the passed feature matches\n     *     one of the geometry types in the geometryTypes array.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Vector.Feature>}\n     *\n     * Returns:\n     * {Boolean}\n     */\n    geometryTypeMatches: function(feature) {\n        return this.geometryTypes == null ||\n            OpenLayers.Util.indexOf(this.geometryTypes,\n                                    feature.geometry.CLASS_NAME) > -1;\n    },\n\n    /**\n     * Method: handle\n     *\n     * Parameters:\n     * evt - {Event}\n     *\n     * Returns:\n     * {Boolean} The event occurred over a relevant feature.\n     */\n    handle: function(evt) {\n        if(this.feature && !this.feature.layer) {\n            // feature has been destroyed\n            this.feature = null;\n        }\n        var type = evt.type;\n        var handled = false;\n        var previouslyIn = !!(this.feature); // previously in a feature\n        var click = (type == \"click\" || type == \"dblclick\" || type == \"touchstart\");\n        this.feature = this.layer.getFeatureFromEvent(evt);\n        if(this.feature && !this.feature.layer) {\n            // feature has been destroyed\n            this.feature = null;\n        }\n        if(this.lastFeature && !this.lastFeature.layer) {\n            // last feature has been destroyed\n            this.lastFeature = null;\n        }\n        if(this.feature) {\n            if(type === \"touchstart\") {\n                // stop the event to prevent Android Webkit from\n                // \"flashing\" the map div\n                OpenLayers.Event.preventDefault(evt);\n            }\n            var inNew = (this.feature != this.lastFeature);\n            if(this.geometryTypeMatches(this.feature)) {\n                // in to a feature\n                if(previouslyIn && inNew) {\n                    // out of last feature and in to another\n                    if(this.lastFeature) {\n                        this.triggerCallback(type, 'out', [this.lastFeature]);\n                    }\n                    this.triggerCallback(type, 'in', [this.feature]);\n                } else if(!previouslyIn || click) {\n                    // in feature for the first time\n                    this.triggerCallback(type, 'in', [this.feature]);\n                }\n                this.lastFeature = this.feature;\n                handled = true;\n            } else {\n                // not in to a feature\n                if(this.lastFeature && (previouslyIn && inNew || click)) {\n                    // out of last feature for the first time\n                    this.triggerCallback(type, 'out', [this.lastFeature]);\n                }\n                // next time the mouse goes in a feature whose geometry type\n                // doesn't match we don't want to call the 'out' callback\n                // again, so let's set this.feature to null so that\n                // previouslyIn will evaluate to false the next time\n                // we enter handle. Yes, a bit hackish...\n                this.feature = null;\n            }\n        } else if(this.lastFeature && (previouslyIn || click)) {\n            this.triggerCallback(type, 'out', [this.lastFeature]);\n        }\n        return handled;\n    },\n    \n    /**\n     * Method: triggerCallback\n     * Call the callback keyed in the event map with the supplied arguments.\n     *     For click and clickout, the <clickTolerance> is checked first.\n     *\n     * Parameters:\n     * type - {String}\n     */\n    triggerCallback: function(type, mode, args) {\n        var key = this.EVENTMAP[type][mode];\n        if(key) {\n            if(type == 'click' && this.up && this.down) {\n                // for click/clickout, only trigger callback if tolerance is met\n                var dpx = Math.sqrt(\n                    Math.pow(this.up.x - this.down.x, 2) +\n                    Math.pow(this.up.y - this.down.y, 2)\n                );\n                if(dpx <= this.clickTolerance) {\n                    this.callback(key, args);\n                }\n                // we're done with this set of events now: clear the cached\n                // positions so we can't trip over them later (this can occur\n                // if one of the up/down events gets eaten before it gets to us\n                // but we still get the click)\n                this.up = this.down = null;\n            } else {\n                this.callback(key, args);\n            }\n        }\n    },\n\n    /**\n     * Method: activate \n     * Turn on the handler.  Returns false if the handler was already active.\n     *\n     * Returns:\n     * {Boolean}\n     */\n    activate: function() {\n        var activated = false;\n        if(OpenLayers.Handler.prototype.activate.apply(this, arguments)) {\n            this.moveLayerToTop();\n            this.map.events.on({\n                \"removelayer\": this.handleMapEvents,\n                \"changelayer\": this.handleMapEvents,\n                scope: this\n            });\n            activated = true;\n        }\n        return activated;\n    },\n    \n    /**\n     * Method: deactivate \n     * Turn off the handler.  Returns false if the handler was already active.\n     *\n     * Returns: \n     * {Boolean}\n     */\n    deactivate: function() {\n        var deactivated = false;\n        if(OpenLayers.Handler.prototype.deactivate.apply(this, arguments)) {\n            this.moveLayerBack();\n            this.feature = null;\n            this.lastFeature = null;\n            this.down = null;\n            this.up = null;\n            this.map.events.un({\n                \"removelayer\": this.handleMapEvents,\n                \"changelayer\": this.handleMapEvents,\n                scope: this\n            });\n            deactivated = true;\n        }\n        return deactivated;\n    },\n    \n    /**\n     * Method: handleMapEvents\n     * \n     * Parameters:\n     * evt - {Object}\n     */\n    handleMapEvents: function(evt) {\n        if (evt.type == \"removelayer\" || evt.property == \"order\") {\n            this.moveLayerToTop();\n        }\n    },\n    \n    /**\n     * Method: moveLayerToTop\n     * Moves the layer for this handler to the top, so mouse events can reach\n     * it.\n     */\n    moveLayerToTop: function() {\n        var index = Math.max(this.map.Z_INDEX_BASE['Feature'] - 1,\n            this.layer.getZIndex()) + 1;\n        this.layer.setZIndex(index);\n        \n    },\n    \n    /**\n     * Method: moveLayerBack\n     * Moves the layer back to the position determined by the map's layers\n     * array.\n     */\n    moveLayerBack: function() {\n        var index = this.layer.getZIndex() - 1;\n        if (index >= this.map.Z_INDEX_BASE['Feature']) {\n            this.layer.setZIndex(index);\n        } else {\n            this.map.setLayerZIndex(this.layer,\n                this.map.getLayerIndex(this.layer));\n        }\n    },\n\n    CLASS_NAME: \"OpenLayers.Handler.Feature\"\n});\n/* ======================================================================\n    OpenLayers/Layer/Vector/RootContainer.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Layer/Vector.js\n */\n\n/**\n * Class: OpenLayers.Layer.Vector.RootContainer\n * A special layer type to combine multiple vector layers inside a single\n *     renderer root container. This class is not supposed to be instantiated\n *     from user space, it is a helper class for controls that require event\n *     processing for multiple vector layers.\n *\n * Inherits from:\n *  - <OpenLayers.Layer.Vector>\n */\nOpenLayers.Layer.Vector.RootContainer = OpenLayers.Class(OpenLayers.Layer.Vector, {\n    \n    /**\n     * Property: displayInLayerSwitcher\n     * Set to false for this layer type\n     */\n    displayInLayerSwitcher: false,\n    \n    /**\n     * APIProperty: layers\n     * Layers that are attached to this container. Required config option.\n     */\n    layers: null,\n    \n    /**\n     * Constructor: OpenLayers.Layer.Vector.RootContainer\n     * Create a new root container for multiple vector layer. This constructor\n     * is not supposed to be used from user space, it is only to be used by\n     * controls that need feature selection across multiple vector layers.\n     *\n     * Parameters:\n     * name - {String} A name for the layer\n     * options - {Object} Optional object with non-default properties to set on\n     *           the layer.\n     * \n     * Required options properties:\n     * layers - {Array(<OpenLayers.Layer.Vector>)} The layers managed by this\n     *     container\n     *\n     * Returns:\n     * {<OpenLayers.Layer.Vector.RootContainer>} A new vector layer root\n     *     container\n     */\n    \n    /**\n     * Method: display\n     */\n    display: function() {},\n    \n    /**\n     * Method: getFeatureFromEvent\n     * walk through the layers to find the feature returned by the event\n     * \n     * Parameters:\n     * evt - {Object} event object with a feature property\n     * \n     * Returns:\n     * {<OpenLayers.Feature.Vector>}\n     */\n    getFeatureFromEvent: function(evt) {\n        var layers = this.layers;\n        var feature;\n        for(var i=0; i<layers.length; i++) {\n            feature = layers[i].getFeatureFromEvent(evt);\n            if(feature) {\n                return feature;\n            }\n        }\n    },\n    \n    /**\n     * Method: setMap\n     * \n     * Parameters:\n     * map - {<OpenLayers.Map>}\n     */\n    setMap: function(map) {\n        OpenLayers.Layer.Vector.prototype.setMap.apply(this, arguments);\n        this.collectRoots();\n        map.events.register(\"changelayer\", this, this.handleChangeLayer);\n    },\n    \n    /**\n     * Method: removeMap\n     * \n     * Parameters:\n     * map - {<OpenLayers.Map>}\n     */\n    removeMap: function(map) {\n        map.events.unregister(\"changelayer\", this, this.handleChangeLayer);\n        this.resetRoots();\n        OpenLayers.Layer.Vector.prototype.removeMap.apply(this, arguments);\n    },\n    \n    /**\n     * Method: collectRoots\n     * Collects the root nodes of all layers this control is configured with\n     * and moveswien the nodes to this control's layer\n     */\n    collectRoots: function() {\n        var layer;\n        // walk through all map layers, because we want to keep the order\n        for(var i=0; i<this.map.layers.length; ++i) {\n            layer = this.map.layers[i];\n            if(OpenLayers.Util.indexOf(this.layers, layer) != -1) {\n                layer.renderer.moveRoot(this.renderer);\n            }\n        }\n    },\n    \n    /**\n     * Method: resetRoots\n     * Resets the root nodes back into the layers they belong to.\n     */\n    resetRoots: function() {\n        var layer;\n        for(var i=0; i<this.layers.length; ++i) {\n            layer = this.layers[i];\n            if(this.renderer && layer.renderer.getRenderLayerId() == this.id) {\n                this.renderer.moveRoot(layer.renderer);\n            }\n        }\n    },\n    \n    /**\n     * Method: handleChangeLayer\n     * Event handler for the map's changelayer event. We need to rebuild\n     * this container's layer dom if order of one of its layers changes.\n     * This handler is added with the setMap method, and removed with the\n     * removeMap method.\n     * \n     * Parameters:\n     * evt - {Object}\n     */\n    handleChangeLayer: function(evt) {\n        var layer = evt.layer;\n        if(evt.property == \"order\" &&\n                        OpenLayers.Util.indexOf(this.layers, layer) != -1) {\n            this.resetRoots();\n            this.collectRoots();\n        }\n    },\n\n    CLASS_NAME: \"OpenLayers.Layer.Vector.RootContainer\"\n});\n/* ======================================================================\n    OpenLayers/Control/SelectFeature.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Control.js\n * @requires OpenLayers/Feature/Vector.js\n * @requires OpenLayers/Handler/Feature.js\n * @requires OpenLayers/Layer/Vector/RootContainer.js\n */\n\n/**\n * Class: OpenLayers.Control.SelectFeature\n * The SelectFeature control selects vector features from a given layer on\n * click or hover.\n *\n * Inherits from:\n *  - <OpenLayers.Control>\n */\nOpenLayers.Control.SelectFeature = OpenLayers.Class(OpenLayers.Control, {\n\n    /**\n     * APIProperty: events\n     * {<OpenLayers.Events>} Events instance for listeners and triggering\n     *     control specific events.\n     *\n     * Register a listener for a particular event with the following syntax:\n     * (code)\n     * control.events.register(type, obj, listener);\n     * (end)\n     *\n     * Supported event types (in addition to those from <OpenLayers.Control.events>):\n     * beforefeaturehighlighted - Triggered before a feature is highlighted\n     * featurehighlighted - Triggered when a feature is highlighted\n     * featureunhighlighted - Triggered when a feature is unhighlighted\n     * boxselectionstart - Triggered before box selection starts\n     * boxselectionend - Triggered after box selection ends\n     */\n\n    /**\n     * APIProperty: multipleKey\n     * {String} An event modifier ('altKey' or 'shiftKey') that temporarily sets\n     *     the <multiple> property to true.  Default is null.\n     */\n    multipleKey: null,\n\n    /**\n     * APIProperty: toggleKey\n     * {String} An event modifier ('altKey' or 'shiftKey') that temporarily sets\n     *     the <toggle> property to true.  Default is null.\n     */\n    toggleKey: null,\n\n    /**\n     * APIProperty: multiple\n     * {Boolean} Allow selection of multiple geometries.  Default is false.\n     */\n    multiple: false,\n\n    /**\n     * APIProperty: clickout\n     * {Boolean} Unselect features when clicking outside any feature.\n     *     Default is true.\n     */\n    clickout: true,\n\n    /**\n     * APIProperty: toggle\n     * {Boolean} Unselect a selected feature on click.  Default is false.  Only\n     *     has meaning if hover is false.\n     */\n    toggle: false,\n\n    /**\n     * APIProperty: hover\n     * {Boolean} Select on mouse over and deselect on mouse out.  If true, this\n     * ignores clicks and only listens to mouse moves.\n     */\n    hover: false,\n\n    /**\n     * APIProperty: highlightOnly\n     * {Boolean} If true do not actually select features (that is place them in\n     * the layer's selected features array), just highlight them. This property\n     * has no effect if hover is false. Defaults to false.\n     */\n    highlightOnly: false,\n\n    /**\n     * APIProperty: box\n     * {Boolean} Allow feature selection by drawing a box.\n     */\n    box: false,\n\n    /**\n     * APIProperty: onBeforeSelect\n     * {Function} Optional function to be called before a feature is selected.\n     *     The function should expect to be called with a feature.\n     */\n    onBeforeSelect: function() {},\n\n    /**\n     * APIProperty: onSelect\n     * {Function} Optional function to be called when a feature is selected.\n     *     The function should expect to be called with a feature.\n     */\n    onSelect: function() {},\n\n    /**\n     * APIProperty: onUnselect\n     * {Function} Optional function to be called when a feature is unselected.\n     *     The function should expect to be called with a feature.\n     */\n    onUnselect: function() {},\n\n    /**\n     * APIProperty: scope\n     * {Object} The scope to use with the onBeforeSelect, onSelect, onUnselect\n     *     callbacks. If null the scope will be this control.\n     */\n    scope: null,\n\n    /**\n     * APIProperty: geometryTypes\n     * {Array(String)} To restrict selecting to a limited set of geometry types,\n     *     send a list of strings corresponding to the geometry class names.\n     */\n    geometryTypes: null,\n\n    /**\n     * Property: layer\n     * {<OpenLayers.Layer.Vector>} The vector layer with a common renderer\n     * root for all layers this control is configured with (if an array of\n     * layers was passed to the constructor), or the vector layer the control\n     * was configured with (if a single layer was passed to the constructor).\n     */\n    layer: null,\n\n    /**\n     * Property: layers\n     * {Array(<OpenLayers.Layer.Vector>)} The layers this control will work on,\n     * or null if the control was configured with a single layer\n     */\n    layers: null,\n\n    /**\n     * APIProperty: callbacks\n     * {Object} The functions that are sent to the handlers.feature for callback\n     */\n    callbacks: null,\n\n    /**\n     * APIProperty: selectStyle\n     * {Object} Hash of styles\n     */\n    selectStyle: null,\n\n    /**\n     * APIProperty: renderIntent\n     * {String} key used to retrieve the select style from the layer's\n     * style map.\n     */\n    renderIntent: \"select\",\n\n    /**\n     * Property: handlers\n     * {Object} Object with references to multiple <OpenLayers.Handler>\n     *     instances.\n     */\n    handlers: null,\n\n    /**\n     * Constructor: OpenLayers.Control.SelectFeature\n     * Create a new control for selecting features.\n     *\n     * Parameters:\n     * layers - {<OpenLayers.Layer.Vector>}, or an array of vector layers. The\n     *     layer(s) this control will select features from.\n     * options - {Object}\n     */\n    initialize: function(layers, options) {\n        OpenLayers.Control.prototype.initialize.apply(this, [options]);\n\n        if(this.scope === null) {\n            this.scope = this;\n        }\n        this.initLayer(layers);\n        var callbacks = {\n            click: this.clickFeature,\n            clickout: this.clickoutFeature\n        };\n        if (this.hover) {\n            callbacks.over = this.overFeature;\n            callbacks.out = this.outFeature;\n        }\n\n        this.callbacks = OpenLayers.Util.extend(callbacks, this.callbacks);\n        this.handlers = {\n            feature: new OpenLayers.Handler.Feature(\n                this, this.layer, this.callbacks,\n                {geometryTypes: this.geometryTypes}\n            )\n        };\n\n        if (this.box) {\n            this.handlers.box = new OpenLayers.Handler.Box(\n                this, {done: this.selectBox},\n                {boxDivClassName: \"olHandlerBoxSelectFeature\"}\n            );\n        }\n    },\n\n    /**\n     * Method: initLayer\n     * Assign the layer property. If layers is an array, we need to use\n     *     a RootContainer.\n     *\n     * Parameters:\n     * layers - {<OpenLayers.Layer.Vector>}, or an array of vector layers.\n     */\n    initLayer: function(layers) {\n        if(OpenLayers.Util.isArray(layers)) {\n            this.layers = layers;\n            this.layer = new OpenLayers.Layer.Vector.RootContainer(\n                this.id + \"_container\", {\n                    layers: layers\n                }\n            );\n        } else {\n            this.layer = layers;\n        }\n    },\n\n    /**\n     * Method: destroy\n     */\n    destroy: function() {\n        if(this.active && this.layers) {\n            this.map.removeLayer(this.layer);\n        }\n        OpenLayers.Control.prototype.destroy.apply(this, arguments);\n        if(this.layers) {\n            this.layer.destroy();\n        }\n    },\n\n    /**\n     * Method: activate\n     * Activates the control.\n     *\n     * Returns:\n     * {Boolean} The control was effectively activated.\n     */\n    activate: function () {\n        if (!this.active) {\n            if(this.layers) {\n                this.map.addLayer(this.layer);\n            }\n            this.handlers.feature.activate();\n            if(this.box && this.handlers.box) {\n                this.handlers.box.activate();\n            }\n        }\n        return OpenLayers.Control.prototype.activate.apply(\n            this, arguments\n        );\n    },\n\n    /**\n     * Method: deactivate\n     * Deactivates the control.\n     *\n     * Returns:\n     * {Boolean} The control was effectively deactivated.\n     */\n    deactivate: function () {\n        if (this.active) {\n            this.handlers.feature.deactivate();\n            if(this.handlers.box) {\n                this.handlers.box.deactivate();\n            }\n            if(this.layers) {\n                this.map.removeLayer(this.layer);\n            }\n        }\n        return OpenLayers.Control.prototype.deactivate.apply(\n            this, arguments\n        );\n    },\n\n    /**\n     * Method: unselectAll\n     * Unselect all selected features.  To unselect all except for a single\n     *     feature, set the options.except property to the feature.\n     *\n     * Parameters:\n     * options - {Object} Optional configuration object.\n     */\n    unselectAll: function(options) {\n        // we'll want an option to suppress notification here\n        var layers = this.layers || [this.layer],\n            layer, feature, l, numExcept;\n        for(l=0; l<layers.length; ++l) {\n            layer = layers[l];\n            numExcept = 0;\n            //layer.selectedFeatures is null when layer is destroyed and\n            //one of it's preremovelayer listener calls setLayer\n            //with another layer on this control\n            if(layer.selectedFeatures != null) {\n                while(layer.selectedFeatures.length > numExcept) {\n                    feature = layer.selectedFeatures[numExcept];\n                    if(!options || options.except != feature) {\n                        this.unselect(feature);\n                    } else {\n                        ++numExcept;\n                    }\n                }\n            }\n        }\n    },\n\n    /**\n     * Method: clickFeature\n     * Called on click in a feature\n     * Only responds if this.hover is false.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>}\n     */\n    clickFeature: function(feature) {\n        if(!this.hover) {\n            var selected = (OpenLayers.Util.indexOf(\n                feature.layer.selectedFeatures, feature) > -1);\n            if(selected) {\n                if(this.toggleSelect()) {\n                    this.unselect(feature);\n                } else if(!this.multipleSelect()) {\n                    this.unselectAll({except: feature});\n                }\n            } else {\n                if(!this.multipleSelect()) {\n                    this.unselectAll({except: feature});\n                }\n                this.select(feature);\n            }\n        }\n    },\n\n    /**\n     * Method: multipleSelect\n     * Allow for multiple selected features based on <multiple> property and\n     *     <multipleKey> event modifier.\n     *\n     * Returns:\n     * {Boolean} Allow for multiple selected features.\n     */\n    multipleSelect: function() {\n        return this.multiple || (this.handlers.feature.evt &&\n                                 this.handlers.feature.evt[this.multipleKey]);\n    },\n\n    /**\n     * Method: toggleSelect\n     * Event should toggle the selected state of a feature based on <toggle>\n     *     property and <toggleKey> event modifier.\n     *\n     * Returns:\n     * {Boolean} Toggle the selected state of a feature.\n     */\n    toggleSelect: function() {\n        return this.toggle || (this.handlers.feature.evt &&\n                               this.handlers.feature.evt[this.toggleKey]);\n    },\n\n    /**\n     * Method: clickoutFeature\n     * Called on click outside a previously clicked (selected) feature.\n     * Only responds if this.hover is false.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Vector.Feature>}\n     */\n    clickoutFeature: function(feature) {\n        if(!this.hover && this.clickout) {\n            this.unselectAll();\n        }\n    },\n\n    /**\n     * Method: overFeature\n     * Called on over a feature.\n     * Only responds if this.hover is true.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>}\n     */\n    overFeature: function(feature) {\n        var layer = feature.layer;\n        if(this.hover) {\n            if(this.highlightOnly) {\n                this.highlight(feature);\n            } else if(OpenLayers.Util.indexOf(\n                layer.selectedFeatures, feature) == -1) {\n                this.select(feature);\n            }\n        }\n    },\n\n    /**\n     * Method: outFeature\n     * Called on out of a selected feature.\n     * Only responds if this.hover is true.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>}\n     */\n    outFeature: function(feature) {\n        if(this.hover) {\n            if(this.highlightOnly) {\n                // we do nothing if we're not the last highlighter of the\n                // feature\n                if(feature._lastHighlighter == this.id) {\n                    // if another select control had highlighted the feature before\n                    // we did it ourself then we use that control to highlight the\n                    // feature as it was before we highlighted it, else we just\n                    // unhighlight it\n                    if(feature._prevHighlighter &&\n                       feature._prevHighlighter != this.id) {\n                        delete feature._lastHighlighter;\n                        var control = this.map.getControl(\n                            feature._prevHighlighter);\n                        if(control) {\n                            control.highlight(feature);\n                        }\n                    } else {\n                        this.unhighlight(feature);\n                    }\n                }\n            } else {\n                this.unselect(feature);\n            }\n        }\n    },\n\n    /**\n     * Method: highlight\n     * Redraw feature with the select style.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>}\n     */\n    highlight: function(feature) {\n        var layer = feature.layer;\n        var cont = this.events.triggerEvent(\"beforefeaturehighlighted\", {\n            feature : feature\n        });\n        if(cont !== false) {\n            feature._prevHighlighter = feature._lastHighlighter;\n            feature._lastHighlighter = this.id;\n            var style = this.selectStyle || this.renderIntent;\n            layer.drawFeature(feature, style);\n            this.events.triggerEvent(\"featurehighlighted\", {feature : feature});\n        }\n    },\n\n    /**\n     * Method: unhighlight\n     * Redraw feature with the \"default\" style\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>}\n     */\n    unhighlight: function(feature) {\n        var layer = feature.layer;\n        // three cases:\n        // 1. there's no other highlighter, in that case _prev is undefined,\n        //    and we just need to undef _last\n        // 2. another control highlighted the feature after we did it, in\n        //    that case _last references this other control, and we just\n        //    need to undef _prev\n        // 3. another control highlighted the feature before we did it, in\n        //    that case _prev references this other control, and we need to\n        //    set _last to _prev and undef _prev\n        if(feature._prevHighlighter == undefined) {\n            delete feature._lastHighlighter;\n        } else if(feature._prevHighlighter == this.id) {\n            delete feature._prevHighlighter;\n        } else {\n            feature._lastHighlighter = feature._prevHighlighter;\n            delete feature._prevHighlighter;\n        }\n        layer.drawFeature(feature, feature.style || feature.layer.style ||\n            \"default\");\n        this.events.triggerEvent(\"featureunhighlighted\", {feature : feature});\n    },\n\n    /**\n     * Method: select\n     * Add feature to the layer's selectedFeature array, render the feature as\n     * selected, and call the onSelect function.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>}\n     */\n    select: function(feature) {\n        var cont = this.onBeforeSelect.call(this.scope, feature);\n        var layer = feature.layer;\n        if(cont !== false) {\n            cont = layer.events.triggerEvent(\"beforefeatureselected\", {\n                feature: feature\n            });\n            if(cont !== false) {\n                layer.selectedFeatures.push(feature);\n                this.highlight(feature);\n                // if the feature handler isn't involved in the feature\n                // selection (because the box handler is used or the\n                // feature is selected programatically) we fake the\n                // feature handler to allow unselecting on click\n                if(!this.handlers.feature.lastFeature) {\n                    this.handlers.feature.lastFeature = layer.selectedFeatures[0];\n                }\n                layer.events.triggerEvent(\"featureselected\", {feature: feature});\n                this.onSelect.call(this.scope, feature);\n            }\n        }\n    },\n\n    /**\n     * Method: unselect\n     * Remove feature from the layer's selectedFeature array, render the feature as\n     * normal, and call the onUnselect function.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>}\n     */\n    unselect: function(feature) {\n        var layer = feature.layer;\n        // Store feature style for restoration later\n        this.unhighlight(feature);\n        OpenLayers.Util.removeItem(layer.selectedFeatures, feature);\n        layer.events.triggerEvent(\"featureunselected\", {feature: feature});\n        this.onUnselect.call(this.scope, feature);\n    },\n\n    /**\n     * Method: selectBox\n     * Callback from the handlers.box set up when <box> selection is true\n     *     on.\n     *\n     * Parameters:\n     * position - {<OpenLayers.Bounds> || <OpenLayers.Pixel> }\n     */\n    selectBox: function(position) {\n        if (position instanceof OpenLayers.Bounds) {\n            var minXY = this.map.getLonLatFromPixel({\n                x: position.left,\n                y: position.bottom\n            });\n            var maxXY = this.map.getLonLatFromPixel({\n                x: position.right,\n                y: position.top\n            });\n            var bounds = new OpenLayers.Bounds(\n                minXY.lon, minXY.lat, maxXY.lon, maxXY.lat\n            );\n\n            // if multiple is false, first deselect currently selected features\n            if (!this.multipleSelect()) {\n                this.unselectAll();\n            }\n\n            // because we're using a box, we consider we want multiple selection\n            var prevMultiple = this.multiple;\n            this.multiple = true;\n            var layers = this.layers || [this.layer];\n            this.events.triggerEvent(\"boxselectionstart\", {layers: layers});\n            var layer;\n            for(var l=0; l<layers.length; ++l) {\n                layer = layers[l];\n                for(var i=0, len = layer.features.length; i<len; ++i) {\n                    var feature = layer.features[i];\n                    // check if the feature is displayed\n                    if (!feature.getVisibility()) {\n                        continue;\n                    }\n\n                    if (this.geometryTypes == null || OpenLayers.Util.indexOf(\n                            this.geometryTypes, feature.geometry.CLASS_NAME) > -1) {\n                        if (bounds.toGeometry().intersects(feature.geometry)) {\n                            if (OpenLayers.Util.indexOf(layer.selectedFeatures, feature) == -1) {\n                                this.select(feature);\n                            }\n                        }\n                    }\n                }\n            }\n            this.multiple = prevMultiple;\n            this.events.triggerEvent(\"boxselectionend\", {layers: layers});\n        }\n    },\n\n    /**\n     * Method: setMap\n     * Set the map property for the control.\n     *\n     * Parameters:\n     * map - {<OpenLayers.Map>}\n     */\n    setMap: function(map) {\n        this.handlers.feature.setMap(map);\n        if (this.box) {\n            this.handlers.box.setMap(map);\n        }\n        OpenLayers.Control.prototype.setMap.apply(this, arguments);\n    },\n\n    /**\n     * APIMethod: setLayer\n     * Attach a new layer to the control, overriding any existing layers.\n     *\n     * Parameters:\n     * layers - Array of {<OpenLayers.Layer.Vector>} or a single\n     *     {<OpenLayers.Layer.Vector>}\n     */\n    setLayer: function(layers) {\n        var isActive = this.active;\n        this.unselectAll();\n        this.deactivate();\n        if(this.layers) {\n            this.layer.destroy();\n            this.layers = null;\n        }\n        this.initLayer(layers);\n        this.handlers.feature.layer = this.layer;\n        if (isActive) {\n            this.activate();\n        }\n    },\n    \n    /**\n     * APIMethod: addLayer\n     * Add a layer to the control, making the existing layers still selectable\n     *\n     * Parameters:\n     * layer - element <OpenLayers.Layer.Vector> \n     */\n    addLayer: function( layer ) {\n        var isActive = this.active;\n        this.deactivate();\n        if (this.layers == null) {\n            if (this.layer != null) {\n                this.layers = [this.layer];\n                this.layers.push(layer);\n            } else {\n                this.layers = [layer];\n            }\n        } else {\t\n            this.layers.push(layer);\n        }\n        this.initLayer(this.layers);\n        this.handlers.feature.layer = this.layer;\n        if (isActive) {\n            this.activate();\n        }\n    },\t    \n\n    CLASS_NAME: \"OpenLayers.Control.SelectFeature\"\n});\n/* ======================================================================\n    OpenLayers/Handler/Drag.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Handler.js\n */\n\n/**\n * Class: OpenLayers.Handler.Drag\n * The drag handler is used to deal with sequences of browser events related\n *     to dragging.  The handler is used by controls that want to know when\n *     a drag sequence begins, when a drag is happening, and when it has\n *     finished.\n *\n * Controls that use the drag handler typically construct it with callbacks\n *     for 'down', 'move', and 'done'.  Callbacks for these keys are called\n *     when the drag begins, with each move, and when the drag is done.  In\n *     addition, controls can have callbacks keyed to 'up' and 'out' if they\n *     care to differentiate between the types of events that correspond with\n *     the end of a drag sequence.  If no drag actually occurs (no mouse move)\n *     the 'down' and 'up' callbacks will be called, but not the 'done'\n *     callback.\n *\n * Create a new drag handler with the <OpenLayers.Handler.Drag> constructor.\n *\n * Inherits from:\n *  - <OpenLayers.Handler>\n */\nOpenLayers.Handler.Drag = OpenLayers.Class(OpenLayers.Handler, {\n  \n    /** \n     * Property: started\n     * {Boolean} When a mousedown or touchstart event is received, we want to\n     * record it, but not set 'dragging' until the mouse moves after starting.\n     */\n    started: false,\n\n    /**\n     * Property: stopDown\n     * {Boolean} Stop propagation of mousedown events from getting to listeners\n     *     on the same element.  Default is true.\n     */\n    stopDown: true,\n\n    /** \n     * Property: dragging \n     * {Boolean} \n     */\n    dragging: false,\n\n    /** \n     * Property: last\n     * {<OpenLayers.Pixel>} The last pixel location of the drag.\n     */\n    last: null,\n\n    /** \n     * Property: start\n     * {<OpenLayers.Pixel>} The first pixel location of the drag.\n     */\n    start: null,\n\n    /**\n     * Property: lastMoveEvt\n     * {Object} The last mousemove event that occurred. Used to\n     *     position the map correctly when our \"delay drag\"\n     *     timeout expired.\n     */\n    lastMoveEvt: null,\n\n    /**\n     * Property: oldOnselectstart\n     * {Function}\n     */\n    oldOnselectstart: null,\n    \n    /**\n     * Property: interval\n     * {Integer} In order to increase performance, an interval (in \n     *     milliseconds) can be set to reduce the number of drag events \n     *     called. If set, a new drag event will not be set until the \n     *     interval has passed. \n     *     Defaults to 0, meaning no interval. \n     */\n    interval: 0,\n    \n    /**\n     * Property: timeoutId\n     * {String} The id of the timeout used for the mousedown interval.\n     *     This is \"private\", and should be left alone.\n     */\n    timeoutId: null,\n    \n    /**\n     * APIProperty: documentDrag\n     * {Boolean} If set to true, the handler will also handle mouse moves when\n     *     the cursor has moved out of the map viewport. Default is false.\n     */\n    documentDrag: false,\n    \n    /**\n     * Property: documentEvents\n     * {Boolean} Are we currently observing document events?\n     */\n    documentEvents: null,\n\n    /**\n     * Constructor: OpenLayers.Handler.Drag\n     * Returns OpenLayers.Handler.Drag\n     * \n     * Parameters:\n     * control - {<OpenLayers.Control>} The control that is making use of\n     *     this handler.  If a handler is being used without a control, the\n     *     handlers setMap method must be overridden to deal properly with\n     *     the map.\n     * callbacks - {Object} An object containing a single function to be\n     *     called when the drag operation is finished. The callback should\n     *     expect to receive a single argument, the pixel location of the event.\n     *     Callbacks for 'move' and 'done' are supported. You can also speficy\n     *     callbacks for 'down', 'up', and 'out' to respond to those events.\n     * options - {Object} \n     */\n    initialize: function(control, callbacks, options) {\n        OpenLayers.Handler.prototype.initialize.apply(this, arguments);\n        \n        if (this.documentDrag === true) {\n            var me = this;\n            this._docMove = function(evt) {\n                me.mousemove({\n                    xy: {x: evt.clientX, y: evt.clientY},\n                    element: document\n                });\n            };\n            this._docUp = function(evt) {\n                me.mouseup({xy: {x: evt.clientX, y: evt.clientY}});\n            };\n        }\n    },\n\n    \n    /**\n     * Method: dragstart\n     * This private method is factorized from mousedown and touchstart methods\n     *\n     * Parameters:\n     * evt - {Event} The event\n     *\n     * Returns:\n     * {Boolean} Let the event propagate.\n     */\n    dragstart: function (evt) {\n        var propagate = true;\n        this.dragging = false;\n        if (this.checkModifiers(evt) &&\n               this._pointerId == evt.pointerId &&\n               (OpenLayers.Event.isLeftClick(evt) ||\n                OpenLayers.Event.isSingleTouch(evt))) {\n            this.started = true;\n            this.start = evt.xy;\n            this.last = evt.xy;\n            OpenLayers.Element.addClass(\n                this.map.viewPortDiv, \"olDragDown\"\n            );\n            this.down(evt);\n            this.callback(\"down\", [evt.xy]);\n\n            // prevent document dragging\n            OpenLayers.Event.preventDefault(evt);\n\n            if(!this.oldOnselectstart) {\n                this.oldOnselectstart = document.onselectstart ?\n                    document.onselectstart : OpenLayers.Function.True;\n            }\n            document.onselectstart = OpenLayers.Function.False;\n\n            propagate = !this.stopDown;\n        } else {\n            delete this._pointerId;\n            this.started = false;\n            this.start = null;\n            this.last = null;\n        }\n        return propagate;\n    },\n\n    /**\n     * Method: dragmove\n     * This private method is factorized from mousemove and touchmove methods\n     *\n     * Parameters:\n     * evt - {Event} The event\n     *\n     * Returns:\n     * {Boolean} Let the event propagate.\n     */\n    dragmove: function (evt) {\n        this.lastMoveEvt = evt;\n        if (this.started && this._pointerId == evt.pointerId &&\n            !this.timeoutId && (evt.xy.x != this.last.x ||\n                                evt.xy.y != this.last.y)) {\n            if(this.documentDrag === true && this.documentEvents) {\n                if(evt.element === document) {\n                    this.adjustXY(evt);\n                    // do setEvent manually because the documentEvents are not\n                    // registered with the map\n                    this.setEvent(evt);\n                } else {\n                    this.removeDocumentEvents();\n                }\n            }\n            if (this.interval > 0) {\n                this.timeoutId = setTimeout(\n                    OpenLayers.Function.bind(this.removeTimeout, this),\n                    this.interval);\n            }\n            this.dragging = true;\n\n            this.move(evt);\n            this.callback(\"move\", [evt.xy]);\n            if(!this.oldOnselectstart) {\n                this.oldOnselectstart = document.onselectstart;\n                document.onselectstart = OpenLayers.Function.False;\n            }\n            this.last = evt.xy;\n        }\n        return true;\n    },\n\n    /**\n     * Method: dragend\n     * This private method is factorized from mouseup and touchend methods\n     *\n     * Parameters:\n     * evt - {Event} The event\n     *\n     * Returns:\n     * {Boolean} Let the event propagate.\n     */\n    dragend: function (evt) {\n        if (this.started && this._pointerId == evt.pointerId) {\n            if(this.documentDrag === true && this.documentEvents) {\n                this.adjustXY(evt);\n                this.removeDocumentEvents();\n            }\n            var dragged = (this.start != this.last);\n            this.started = false;\n            this.dragging = false;\n            delete this._pointerId;\n            OpenLayers.Element.removeClass(\n                this.map.viewPortDiv, \"olDragDown\"\n            );\n            this.up(evt);\n            this.callback(\"up\", [evt.xy]);\n            if(dragged) {\n                this.callback(\"done\", [evt.xy]);\n            }\n            document.onselectstart = this.oldOnselectstart;\n        }\n        return true;\n    },\n\n    /**\n     * The four methods below (down, move, up, and out) are used by subclasses\n     *     to do their own processing related to these mouse events.\n     */\n\n    /**\n     * Method: down\n     * This method is called during the handling of the mouse down event.\n     *     Subclasses can do their own processing here.\n     *\n     * Parameters:\n     * evt - {Event} The mouse down event\n     */\n    down: function(evt) {\n    },\n\n    /**\n     * Method: move\n     * This method is called during the handling of the mouse move event.\n     *     Subclasses can do their own processing here.\n     *\n     * Parameters:\n     * evt - {Event} The mouse move event\n     *\n     */\n    move: function(evt) {\n    },\n\n    /**\n     * Method: up\n     * This method is called during the handling of the mouse up event.\n     *     Subclasses can do their own processing here.\n     *\n     * Parameters:\n     * evt - {Event} The mouse up event\n     */\n    up: function(evt) {\n    },\n\n    /**\n     * Method: out\n     * This method is called during the handling of the mouse out event.\n     *     Subclasses can do their own processing here.\n     *\n     * Parameters:\n     * evt - {Event} The mouse out event\n     */\n    out: function(evt) {\n    },\n\n    /**\n     * The methods below are part of the magic of event handling.  Because\n     *     they are named like browser events, they are registered as listeners\n     *     for the events they represent.\n     */\n\n    /**\n     * Method: mousedown\n     * Handle mousedown events\n     *\n     * Parameters:\n     * evt - {Event}\n     *\n     * Returns:\n     * {Boolean} Let the event propagate.\n     */\n    mousedown: function(evt) {\n        return this.dragstart(evt);\n    },\n\n    /**\n     * Method: touchstart\n     * Handle touchstart events\n     *\n     * Parameters:\n     * evt - {Event}\n     *\n     * Returns:\n     * {Boolean} Let the event propagate.\n     */\n    touchstart: function(evt) {\n        this.startTouch();\n        // only allow the first pointer event to be monitored by noting its pointerId\n        // which is unique in the pointer model (and undefined in the touch model)\n        if (!(\"_pointerId\" in this)) {\n            this._pointerId = evt.pointerId;\n        }\n        return this.dragstart(evt);\n    },\n\n    /**\n     * Method: mousemove\n     * Handle mousemove events\n     *\n     * Parameters:\n     * evt - {Event}\n     *\n     * Returns:\n     * {Boolean} Let the event propagate.\n     */\n    mousemove: function(evt) {\n        return this.dragmove(evt);\n    },\n\n    /**\n     * Method: touchmove\n     * Handle touchmove events\n     *\n     * Parameters:\n     * evt - {Event}\n     *\n     * Returns:\n     * {Boolean} Let the event propagate.\n     */\n    touchmove: function(evt) {\n        return this.dragmove(evt);\n    },\n\n    /**\n     * Method: removeTimeout\n     * Private. Called by mousemove() to remove the drag timeout.\n     */\n    removeTimeout: function() {\n        this.timeoutId = null;\n        // if timeout expires while we're still dragging (mouseup\n        // hasn't occurred) then call mousemove to move to the\n        // correct position\n        if(this.dragging) {\n            this.mousemove(this.lastMoveEvt);\n        }\n    },\n\n    /**\n     * Method: mouseup\n     * Handle mouseup events\n     *\n     * Parameters:\n     * evt - {Event}\n     *\n     * Returns:\n     * {Boolean} Let the event propagate.\n     */\n    mouseup: function(evt) {\n        return this.dragend(evt);\n    },\n\n    /**\n     * Method: touchend\n     * Handle touchend events\n     *\n     * Parameters:\n     * evt - {Event}\n     *\n     * Returns:\n     * {Boolean} Let the event propagate.\n     */\n    touchend: function(evt) {\n        // override evt.xy with last position since touchend does not have\n        // any touch position\n        evt.xy = this.last;\n        return this.dragend(evt);\n    },\n\n    /**\n     * Method: mouseout\n     * Handle mouseout events\n     *\n     * Parameters:\n     * evt - {Event}\n     *\n     * Returns:\n     * {Boolean} Let the event propagate.\n     */\n    mouseout: function (evt) {\n        if (this.started && OpenLayers.Util.mouseLeft(evt, this.map.viewPortDiv)) {\n            if(this.documentDrag === true) {\n                this.addDocumentEvents();\n            } else {\n                var dragged = (this.start != this.last);\n                this.started = false; \n                this.dragging = false;\n                OpenLayers.Element.removeClass(\n                    this.map.viewPortDiv, \"olDragDown\"\n                );\n                this.out(evt);\n                this.callback(\"out\", []);\n                if(dragged) {\n                    this.callback(\"done\", [evt.xy]);\n                }\n                if(document.onselectstart) {\n                    document.onselectstart = this.oldOnselectstart;\n                }\n            }\n        }\n        return true;\n    },\n\n    /**\n     * Method: click\n     * The drag handler captures the click event.  If something else registers\n     *     for clicks on the same element, its listener will not be called \n     *     after a drag.\n     * \n     * Parameters: \n     * evt - {Event} \n     * \n     * Returns:\n     * {Boolean} Let the event propagate.\n     */\n    click: function (evt) {\n        // let the click event propagate only if the mouse moved\n        return (this.start == this.last);\n    },\n\n    /**\n     * Method: activate\n     * Activate the handler.\n     * \n     * Returns:\n     * {Boolean} The handler was successfully activated.\n     */\n    activate: function() {\n        var activated = false;\n        if(OpenLayers.Handler.prototype.activate.apply(this, arguments)) {\n            this.dragging = false;\n            activated = true;\n        }\n        return activated;\n    },\n\n    /**\n     * Method: deactivate \n     * Deactivate the handler.\n     * \n     * Returns:\n     * {Boolean} The handler was successfully deactivated.\n     */\n    deactivate: function() {\n        var deactivated = false;\n        if(OpenLayers.Handler.prototype.deactivate.apply(this, arguments)) {\n            this.started = false;\n            this.dragging = false;\n            this.start = null;\n            this.last = null;\n            deactivated = true;\n            OpenLayers.Element.removeClass(\n                this.map.viewPortDiv, \"olDragDown\"\n            );\n        }\n        return deactivated;\n    },\n    \n    /**\n     * Method: adjustXY\n     * Converts event coordinates that are relative to the document body to\n     * ones that are relative to the map viewport. The latter is the default in\n     * OpenLayers.\n     * \n     * Parameters:\n     * evt - {Object}\n     */\n    adjustXY: function(evt) {\n        var pos = OpenLayers.Util.pagePosition(this.map.viewPortDiv);\n        evt.xy.x -= pos[0];\n        evt.xy.y -= pos[1];\n    },\n    \n    /**\n     * Method: addDocumentEvents\n     * Start observing document events when documentDrag is true and the mouse\n     * cursor leaves the map viewport while dragging.\n     */\n    addDocumentEvents: function() {\n        OpenLayers.Element.addClass(document.body, \"olDragDown\");\n        this.documentEvents = true;\n        OpenLayers.Event.observe(document, \"mousemove\", this._docMove);\n        OpenLayers.Event.observe(document, \"mouseup\", this._docUp);\n    },\n    \n    /**\n     * Method: removeDocumentEvents\n     * Stops observing document events when documentDrag is true and the mouse\n     * cursor re-enters the map viewport while dragging.\n     */\n    removeDocumentEvents: function() {\n        OpenLayers.Element.removeClass(document.body, \"olDragDown\");\n        this.documentEvents = false;\n        OpenLayers.Event.stopObserving(document, \"mousemove\", this._docMove);\n        OpenLayers.Event.stopObserving(document, \"mouseup\", this._docUp);\n    },\n\n    CLASS_NAME: \"OpenLayers.Handler.Drag\"\n});\n/* ======================================================================\n    OpenLayers/Handler/Box.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Handler.js\n * @requires OpenLayers/Handler/Drag.js\n */\n\n/**\n * Class: OpenLayers.Handler.Box\n * Handler for dragging a rectangle across the map.  Box is displayed \n * on mouse down, moves on mouse move, and is finished on mouse up.\n *\n * Inherits from:\n *  - <OpenLayers.Handler> \n */\nOpenLayers.Handler.Box = OpenLayers.Class(OpenLayers.Handler, {\n\n    /** \n     * Property: dragHandler \n     * {<OpenLayers.Handler.Drag>} \n     */\n    dragHandler: null,\n\n    /**\n     * APIProperty: boxDivClassName\n     * {String} The CSS class to use for drawing the box. Default is\n     *     olHandlerBoxZoomBox\n     */\n    boxDivClassName: 'olHandlerBoxZoomBox',\n    \n    /**\n     * Property: boxOffsets\n     * {Object} Caches box offsets from css. This is used by the getBoxOffsets\n     * method.\n     */\n    boxOffsets: null,\n\n    /**\n     * Constructor: OpenLayers.Handler.Box\n     *\n     * Parameters:\n     * control - {<OpenLayers.Control>} \n     * callbacks - {Object} An object with a properties whose values are\n     *     functions.  Various callbacks described below.\n     * options - {Object} \n     *\n     * Named callbacks:\n     * start - Called when the box drag operation starts.\n     * done - Called when the box drag operation is finished.\n     *     The callback should expect to receive a single argument, the box \n     *     bounds or a pixel. If the box dragging didn't span more than a 5 \n     *     pixel distance, a pixel will be returned instead of a bounds object.\n     */\n    initialize: function(control, callbacks, options) {\n        OpenLayers.Handler.prototype.initialize.apply(this, arguments);\n        this.dragHandler = new OpenLayers.Handler.Drag(\n            this, \n            {\n                down: this.startBox, \n                move: this.moveBox, \n                out: this.removeBox,\n                up: this.endBox\n            }, \n            {keyMask: this.keyMask}\n        );\n    },\n\n    /**\n     * Method: destroy\n     */\n    destroy: function() {\n        OpenLayers.Handler.prototype.destroy.apply(this, arguments);\n        if (this.dragHandler) {\n            this.dragHandler.destroy();\n            this.dragHandler = null;\n        }            \n    },\n\n    /**\n     * Method: setMap\n     */\n    setMap: function (map) {\n        OpenLayers.Handler.prototype.setMap.apply(this, arguments);\n        if (this.dragHandler) {\n            this.dragHandler.setMap(map);\n        }\n    },\n\n    /**\n    * Method: startBox\n    *\n    * Parameters:\n    * xy - {<OpenLayers.Pixel>}\n    */\n    startBox: function (xy) {\n        this.callback(\"start\", []);\n        this.zoomBox = OpenLayers.Util.createDiv('zoomBox', {\n            x: -9999, y: -9999\n        });\n        this.zoomBox.className = this.boxDivClassName;                                         \n        this.zoomBox.style.zIndex = this.map.Z_INDEX_BASE[\"Popup\"] - 1;\n        \n        this.map.viewPortDiv.appendChild(this.zoomBox);\n        \n        OpenLayers.Element.addClass(\n            this.map.viewPortDiv, \"olDrawBox\"\n        );\n    },\n\n    /**\n    * Method: moveBox\n    */\n    moveBox: function (xy) {\n        var startX = this.dragHandler.start.x;\n        var startY = this.dragHandler.start.y;\n        var deltaX = Math.abs(startX - xy.x);\n        var deltaY = Math.abs(startY - xy.y);\n\n        var offset = this.getBoxOffsets();\n        this.zoomBox.style.width = (deltaX + offset.width + 1) + \"px\";\n        this.zoomBox.style.height = (deltaY + offset.height + 1) + \"px\";\n        this.zoomBox.style.left = (xy.x < startX ?\n            startX - deltaX - offset.left : startX - offset.left) + \"px\";\n        this.zoomBox.style.top = (xy.y < startY ?\n            startY - deltaY - offset.top : startY - offset.top) + \"px\";\n    },\n\n    /**\n    * Method: endBox\n    */\n    endBox: function(end) {\n        var result;\n        if (Math.abs(this.dragHandler.start.x - end.x) > 5 ||    \n            Math.abs(this.dragHandler.start.y - end.y) > 5) {   \n            var start = this.dragHandler.start;\n            var top = Math.min(start.y, end.y);\n            var bottom = Math.max(start.y, end.y);\n            var left = Math.min(start.x, end.x);\n            var right = Math.max(start.x, end.x);\n            result = new OpenLayers.Bounds(left, bottom, right, top);\n        } else {\n            result = this.dragHandler.start.clone(); // i.e. OL.Pixel\n        } \n        this.removeBox();\n\n        this.callback(\"done\", [result]);\n    },\n\n    /**\n     * Method: removeBox\n     * Remove the zoombox from the screen and nullify our reference to it.\n     */\n    removeBox: function() {\n        this.map.viewPortDiv.removeChild(this.zoomBox);\n        this.zoomBox = null;\n        this.boxOffsets = null;\n        OpenLayers.Element.removeClass(\n            this.map.viewPortDiv, \"olDrawBox\"\n        );\n\n    },\n\n    /**\n     * Method: activate\n     */\n    activate: function () {\n        if (OpenLayers.Handler.prototype.activate.apply(this, arguments)) {\n            this.dragHandler.activate();\n            return true;\n        } else {\n            return false;\n        }\n    },\n\n    /**\n     * Method: deactivate\n     */\n    deactivate: function () {\n        if (OpenLayers.Handler.prototype.deactivate.apply(this, arguments)) {\n            if (this.dragHandler.deactivate()) {\n                if (this.zoomBox) {\n                    this.removeBox();\n                }\n            }\n            return true;\n        } else {\n            return false;\n        }\n    },\n    \n    /**\n     * Method: getBoxOffsets\n     * Determines border offsets for a box, according to the box model.\n     * \n     * Returns:\n     * {Object} an object with the following offsets:\n     *     - left\n     *     - right\n     *     - top\n     *     - bottom\n     *     - width\n     *     - height\n     */\n    getBoxOffsets: function() {\n        if (!this.boxOffsets) {\n            // Determine the box model. If the testDiv's clientWidth is 3, then\n            // the borders are outside and we are dealing with the w3c box\n            // model. Otherwise, the browser uses the traditional box model and\n            // the borders are inside the box bounds, leaving us with a\n            // clientWidth of 1.\n            var testDiv = document.createElement(\"div\");\n            //testDiv.style.visibility = \"hidden\";\n            testDiv.style.position = \"absolute\";\n            testDiv.style.border = \"1px solid black\";\n            testDiv.style.width = \"3px\";\n            document.body.appendChild(testDiv);\n            var w3cBoxModel = testDiv.clientWidth == 3;\n            document.body.removeChild(testDiv);\n            \n            var left = parseInt(OpenLayers.Element.getStyle(this.zoomBox,\n                \"border-left-width\"));\n            var right = parseInt(OpenLayers.Element.getStyle(\n                this.zoomBox, \"border-right-width\"));\n            var top = parseInt(OpenLayers.Element.getStyle(this.zoomBox,\n                \"border-top-width\"));\n            var bottom = parseInt(OpenLayers.Element.getStyle(\n                this.zoomBox, \"border-bottom-width\"));\n            this.boxOffsets = {\n                left: left,\n                right: right,\n                top: top,\n                bottom: bottom,\n                width: w3cBoxModel === false ? left + right : 0,\n                height: w3cBoxModel === false ? top + bottom : 0\n            };\n        }\n        return this.boxOffsets;\n    },\n  \n    CLASS_NAME: \"OpenLayers.Handler.Box\"\n});\n/* ======================================================================\n    OpenLayers/Control/ZoomBox.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Control.js\n * @requires OpenLayers/Handler/Box.js\n */\n\n/**\n * Class: OpenLayers.Control.ZoomBox\n * The ZoomBox control enables zooming directly to a given extent, by drawing \n * a box on the map. The box is drawn by holding down shift, whilst dragging \n * the mouse.\n *\n * Inherits from:\n *  - <OpenLayers.Control>\n */\nOpenLayers.Control.ZoomBox = OpenLayers.Class(OpenLayers.Control, {\n    /**\n     * Property: type\n     * {OpenLayers.Control.TYPE}\n     */\n    type: OpenLayers.Control.TYPE_TOOL,\n\n    /**\n     * Property: out\n     * {Boolean} Should the control be used for zooming out?\n     */\n    out: false,\n\n    /**\n     * APIProperty: keyMask\n     * {Integer} Zoom only occurs if the keyMask matches the combination of \n     *     keys down. Use bitwise operators and one or more of the\n     *     <OpenLayers.Handler> constants to construct a keyMask. Leave null if \n     *     not used mask. Default is null.\n     */\n    keyMask: null,\n\n    /**\n     * APIProperty: alwaysZoom\n     * {Boolean} Always zoom in/out when box drawn, even if the zoom level does\n     * not change.\n     */\n    alwaysZoom: false,\n    \n    /**\n     * APIProperty: zoomOnClick\n     * {Boolean} Should we zoom when no box was dragged, i.e. the user only\n     * clicked? Default is true.\n     */\n    zoomOnClick: true,\n\n    /**\n     * Method: draw\n     */    \n    draw: function() {\n        this.handler = new OpenLayers.Handler.Box( this,\n                            {done: this.zoomBox}, {keyMask: this.keyMask} );\n    },\n\n    /**\n     * Method: zoomBox\n     *\n     * Parameters:\n     * position - {<OpenLayers.Bounds>} or {<OpenLayers.Pixel>}\n     */\n    zoomBox: function (position) {\n        if (position instanceof OpenLayers.Bounds) {\n            var bounds,\n                targetCenterPx = position.getCenterPixel();\n            if (!this.out) {\n                var minXY = this.map.getLonLatFromPixel({\n                    x: position.left,\n                    y: position.bottom\n                });\n                var maxXY = this.map.getLonLatFromPixel({\n                    x: position.right,\n                    y: position.top\n                });\n                bounds = new OpenLayers.Bounds(minXY.lon, minXY.lat,\n                                               maxXY.lon, maxXY.lat);\n            } else {\n                var pixWidth = position.right - position.left;\n                var pixHeight = position.bottom - position.top;\n                var zoomFactor = Math.min((this.map.size.h / pixHeight),\n                    (this.map.size.w / pixWidth));\n                var extent = this.map.getExtent();\n                var center = this.map.getLonLatFromPixel(targetCenterPx);\n                var xmin = center.lon - (extent.getWidth()/2)*zoomFactor;\n                var xmax = center.lon + (extent.getWidth()/2)*zoomFactor;\n                var ymin = center.lat - (extent.getHeight()/2)*zoomFactor;\n                var ymax = center.lat + (extent.getHeight()/2)*zoomFactor;\n                bounds = new OpenLayers.Bounds(xmin, ymin, xmax, ymax);\n            }\n            // always zoom in/out \n            var lastZoom = this.map.getZoom(),\n                size = this.map.getSize(),\n                centerPx = {x: size.w / 2, y: size.h / 2},\n                zoom = this.map.getZoomForExtent(bounds),\n                oldRes = this.map.getResolution(),\n                newRes = this.map.getResolutionForZoom(zoom);\n            if (oldRes == newRes) {\n                this.map.setCenter(this.map.getLonLatFromPixel(targetCenterPx));\n            } else {\n              var zoomOriginPx = {\n                    x: (oldRes * targetCenterPx.x - newRes * centerPx.x) /\n                        (oldRes - newRes),\n                    y: (oldRes * targetCenterPx.y - newRes * centerPx.y) /\n                        (oldRes - newRes)\n                };\n                this.map.zoomTo(zoom, zoomOriginPx);\n            }\n            if (lastZoom == this.map.getZoom() && this.alwaysZoom == true){ \n                this.map.zoomTo(lastZoom + (this.out ? -1 : 1)); \n            }\n        } else if (this.zoomOnClick) { // it's a pixel\n            if (!this.out) {\n                this.map.zoomTo(this.map.getZoom() + 1, position);\n            } else {\n                this.map.zoomTo(this.map.getZoom() - 1, position);\n            }\n        }\n    },\n\n    CLASS_NAME: \"OpenLayers.Control.ZoomBox\"\n});\n/* ======================================================================\n    OpenLayers/Control/DragPan.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Control.js\n * @requires OpenLayers/Handler/Drag.js\n */\n\n/**\n * Class: OpenLayers.Control.DragPan\n * The DragPan control pans the map with a drag of the mouse.\n *\n * Inherits from:\n *  - <OpenLayers.Control>\n */\nOpenLayers.Control.DragPan = OpenLayers.Class(OpenLayers.Control, {\n\n    /** \n     * Property: type\n     * {OpenLayers.Control.TYPES}\n     */\n    type: OpenLayers.Control.TYPE_TOOL,\n    \n    /**\n     * Property: panned\n     * {Boolean} The map moved.\n     */\n    panned: false,\n    \n    /**\n     * Property: interval\n     * {Integer} The number of milliseconds that should ellapse before\n     *     panning the map again. Defaults to 0 milliseconds, which means that\n     *     no separate cycle is used for panning. In most cases you won't want\n     *     to change this value. For slow machines/devices larger values can be\n     *     tried out.\n     */\n    interval: 0,\n    \n    /**\n     * APIProperty: documentDrag\n     * {Boolean} If set to true, mouse dragging will continue even if the\n     *     mouse cursor leaves the map viewport. Default is false.\n     */\n    documentDrag: false,\n\n    /**\n     * Property: kinetic\n     * {<OpenLayers.Kinetic>} The OpenLayers.Kinetic object.\n     */\n    kinetic: null,\n\n    /**\n     * APIProperty: enableKinetic\n     * {Boolean} Set this option to enable \"kinetic dragging\". Can be\n     *     set to true or to an object. If set to an object this\n     *     object will be passed to the {<OpenLayers.Kinetic>}\n     *     constructor. Defaults to true.\n     *     To get kinetic dragging, ensure that OpenLayers/Kinetic.js is\n     *     included in your build config.\n     */\n    enableKinetic: true,\n\n    /**\n     * APIProperty: kineticInterval\n     * {Integer} Interval in milliseconds between 2 steps in the \"kinetic\n     *     scrolling\". Applies only if enableKinetic is set. Defaults\n     *     to 10 milliseconds.\n     */\n    kineticInterval: 10,\n\n\n    /**\n     * Method: draw\n     * Creates a Drag handler, using <panMap> and\n     * <panMapDone> as callbacks.\n     */    \n    draw: function() {\n        if (this.enableKinetic && OpenLayers.Kinetic) {\n            var config = {interval: this.kineticInterval};\n            if(typeof this.enableKinetic === \"object\") {\n                config = OpenLayers.Util.extend(config, this.enableKinetic);\n            }\n            this.kinetic = new OpenLayers.Kinetic(config);\n        }\n        this.handler = new OpenLayers.Handler.Drag(this, {\n                \"move\": this.panMap,\n                \"done\": this.panMapDone,\n                \"down\": this.panMapStart\n            }, {\n                interval: this.interval,\n                documentDrag: this.documentDrag\n            }\n        );\n    },\n\n    /**\n     * Method: panMapStart\n     */\n    panMapStart: function() {\n        if(this.kinetic) {\n            this.kinetic.begin();\n        }\n    },\n\n    /**\n    * Method: panMap\n    *\n    * Parameters:\n    * xy - {<OpenLayers.Pixel>} Pixel of the mouse position\n    */\n    panMap: function(xy) {\n        if(this.kinetic) {\n            this.kinetic.update(xy);\n        }\n        this.panned = true;\n        this.map.pan(\n            this.handler.last.x - xy.x,\n            this.handler.last.y - xy.y,\n            {dragging: true, animate: false}\n        );\n    },\n    \n    /**\n     * Method: panMapDone\n     * Finish the panning operation.  Only call setCenter (through <panMap>)\n     *     if the map has actually been moved.\n     *\n     * Parameters:\n     * xy - {<OpenLayers.Pixel>} Pixel of the mouse position\n     */\n    panMapDone: function(xy) {\n        if(this.panned) {\n            var res = null;\n            if (this.kinetic) {\n                res = this.kinetic.end(xy);\n            }\n            this.map.pan(\n                this.handler.last.x - xy.x,\n                this.handler.last.y - xy.y,\n                {dragging: !!res, animate: false}\n            );\n            if (res) {\n                var self = this;\n                this.kinetic.move(res, function(x, y, end) {\n                    self.map.pan(x, y, {dragging: !end, animate: false});\n                });\n            }\n            this.panned = false;\n        }\n    },\n\n    CLASS_NAME: \"OpenLayers.Control.DragPan\"\n});\n/* ======================================================================\n    OpenLayers/Handler/MouseWheel.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Handler.js\n */\n\n/**\n * Class: OpenLayers.Handler.MouseWheel\n * Handler for wheel up/down events.\n * \n * Inherits from:\n *  - <OpenLayers.Handler>\n */\nOpenLayers.Handler.MouseWheel = OpenLayers.Class(OpenLayers.Handler, {\n    /** \n     * Property: wheelListener \n     * {function} \n     */\n    wheelListener: null,\n\n    /**\n     * Property: interval\n     * {Integer} In order to increase server performance, an interval (in \n     *     milliseconds) can be set to reduce the number of up/down events \n     *     called. If set, a new up/down event will not be set until the \n     *     interval has passed. \n     *     Defaults to 0, meaning no interval. \n     */\n    interval: 0,\n    \n    /**\n     * Property: maxDelta\n     * {Integer} Maximum delta to collect before breaking from the current\n     *    interval. In cumulative mode, this also limits the maximum delta\n     *    returned from the handler. Default is Number.POSITIVE_INFINITY.\n     */\n    maxDelta: Number.POSITIVE_INFINITY,\n    \n    /**\n     * Property: delta\n     * {Integer} When interval is set, delta collects the mousewheel z-deltas\n     *     of the events that occur within the interval.\n     *      See also the cumulative option\n     */\n    delta: 0,\n    \n    /**\n     * Property: cumulative\n     * {Boolean} When interval is set: true to collect all the mousewheel \n     *     z-deltas, false to only record the delta direction (positive or\n     *     negative)\n     */\n    cumulative: true,\n    \n    /**\n     * Constructor: OpenLayers.Handler.MouseWheel\n     *\n     * Parameters:\n     * control - {<OpenLayers.Control>} \n     * callbacks - {Object} An object containing a single function to be\n     *                          called when the drag operation is finished.\n     *                          The callback should expect to receive a single\n     *                          argument, the point geometry.\n     * options - {Object} \n     */\n    initialize: function(control, callbacks, options) {\n        OpenLayers.Handler.prototype.initialize.apply(this, arguments);\n        this.wheelListener = OpenLayers.Function.bindAsEventListener(\n            this.onWheelEvent, this\n        );\n    },\n\n    /**\n     * Method: destroy\n     */    \n    destroy: function() {\n        OpenLayers.Handler.prototype.destroy.apply(this, arguments);\n        this.wheelListener = null;\n    },\n\n    /**\n     *  Mouse ScrollWheel code thanks to http://adomas.org/javascript-mouse-wheel/\n     */\n\n    /** \n     * Method: onWheelEvent\n     * Catch the wheel event and handle it xbrowserly\n     * \n     * Parameters:\n     * e - {Event} \n     */\n    onWheelEvent: function(e){\n        \n        // make sure we have a map and check keyboard modifiers\n        if (!this.map || !this.checkModifiers(e)) {\n            return;\n        }\n        \n        // Ride up the element's DOM hierarchy to determine if it or any of \n        //  its ancestors was: \n        //   * specifically marked as scrollable (CSS overflow property)\n        //   * one of our layer divs or a div marked as scrollable\n        //     ('olScrollable' CSS class)\n        //   * the map div\n        //\n        var overScrollableDiv = false;\n        var allowScroll = false;\n        var overMapDiv = false;\n        \n        var elem = OpenLayers.Event.element(e);\n        while((elem != null) && !overMapDiv && !overScrollableDiv) {\n\n            if (!overScrollableDiv) {\n                try {\n                    var overflow;\n                    if (elem.currentStyle) {\n                        overflow = elem.currentStyle[\"overflow\"];\n                    } else {\n                        var style = \n                            document.defaultView.getComputedStyle(elem, null);\n                        overflow = style.getPropertyValue(\"overflow\");\n                    }\n                    overScrollableDiv = ( overflow && \n                        (overflow == \"auto\") || (overflow == \"scroll\") );\n                } catch(err) {\n                    //sometimes when scrolling in a popup, this causes \n                    // obscure browser error\n                }\n            }\n\n            if (!allowScroll) {\n                allowScroll = OpenLayers.Element.hasClass(elem, 'olScrollable');\n                if (!allowScroll) {\n                    for (var i = 0, len = this.map.layers.length; i < len; i++) {\n                        // Are we in the layer div? Note that we have two cases\n                        // here: one is to catch EventPane layers, which have a\n                        // pane above the layer (layer.pane)\n                        var layer = this.map.layers[i];\n                        if (elem == layer.div || elem == layer.pane) {\n                            allowScroll = true;\n                            break;\n                        }\n                    }\n                }\n            }\n            overMapDiv = (elem == this.map.div);\n\n            elem = elem.parentNode;\n        }\n        \n        // Logic below is the following:\n        //\n        // If we are over a scrollable div or not over the map div:\n        //  * do nothing (let the browser handle scrolling)\n        //\n        //    otherwise \n        // \n        //    If we are over the layer div or a 'olScrollable' div:\n        //     * zoom/in out\n        //     then\n        //     * kill event (so as not to also scroll the page after zooming)\n        //\n        //       otherwise\n        //\n        //       Kill the event (dont scroll the page if we wheel over the \n        //        layerswitcher or the pan/zoom control)\n        //\n        if (!overScrollableDiv && overMapDiv) {\n            if (allowScroll) {\n                var delta = 0;\n                \n                if (e.wheelDelta) {\n                    delta = e.wheelDelta;\n                    if (delta % 160 === 0) {\n                        // opera have steps of 160 instead of 120\n                        delta = delta * 0.75;\n                    }\n                    delta = delta / 120;\n                } else if (e.detail) {\n                    // detail in Firefox on OS X is 1/3 of Windows\n                    // so force delta 1 / -1\n                    delta = - (e.detail / Math.abs(e.detail));\n                }\n                this.delta += delta;\n\n                window.clearTimeout(this._timeoutId);\n                if(this.interval && Math.abs(this.delta) < this.maxDelta) {\n                    // store e because window.event might change during delay\n                    var evt = OpenLayers.Util.extend({}, e);\n                    this._timeoutId = window.setTimeout(\n                        OpenLayers.Function.bind(function(){\n                            this.wheelZoom(evt);\n                        }, this),\n                        this.interval\n                    );\n                } else {\n                    this.wheelZoom(e);\n                }\n            }\n            OpenLayers.Event.stop(e);\n        }\n    },\n\n    /**\n     * Method: wheelZoom\n     * Given the wheel event, we carry out the appropriate zooming in or out,\n     *     based on the 'wheelDelta' or 'detail' property of the event.\n     * \n     * Parameters:\n     * e - {Event}\n     */\n    wheelZoom: function(e) {\n        var delta = this.delta;\n        this.delta = 0;\n        \n        if (delta) {\n            e.xy = this.map.events.getMousePosition(e);\n            if (delta < 0) {\n                this.callback(\"down\",\n                    [e, this.cumulative ? Math.max(-this.maxDelta, delta) : -1]);\n            } else {\n                this.callback(\"up\",\n                    [e, this.cumulative ? Math.min(this.maxDelta, delta) : 1]);\n            }\n        }\n    },\n    \n    /**\n     * Method: activate \n     */\n    activate: function (evt) {\n        if (OpenLayers.Handler.prototype.activate.apply(this, arguments)) {\n            //register mousewheel events specifically on the window and document\n            var wheelListener = this.wheelListener;\n            OpenLayers.Event.observe(window, \"DOMMouseScroll\", wheelListener);\n            OpenLayers.Event.observe(window, \"mousewheel\", wheelListener);\n            OpenLayers.Event.observe(document, \"mousewheel\", wheelListener);\n            return true;\n        } else {\n            return false;\n        }\n    },\n\n    /**\n     * Method: deactivate \n     */\n    deactivate: function (evt) {\n        if (OpenLayers.Handler.prototype.deactivate.apply(this, arguments)) {\n            // unregister mousewheel events specifically on the window and document\n            var wheelListener = this.wheelListener;\n            OpenLayers.Event.stopObserving(window, \"DOMMouseScroll\", wheelListener);\n            OpenLayers.Event.stopObserving(window, \"mousewheel\", wheelListener);\n            OpenLayers.Event.stopObserving(document, \"mousewheel\", wheelListener);\n            return true;\n        } else {\n            return false;\n        }\n    },\n\n    CLASS_NAME: \"OpenLayers.Handler.MouseWheel\"\n});\n/* ======================================================================\n    OpenLayers/Handler/Click.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Handler.js\n */\n\n/**\n * Class: OpenLayers.Handler.Click\n * A handler for mouse clicks.  The intention of this handler is to give\n *     controls more flexibility with handling clicks.  Browsers trigger\n *     click events twice for a double-click.  In addition, the mousedown,\n *     mousemove, mouseup sequence fires a click event.  With this handler,\n *     controls can decide whether to ignore clicks associated with a double\n *     click.  By setting a <pixelTolerance>, controls can also ignore clicks\n *     that include a drag.  Create a new instance with the\n *     <OpenLayers.Handler.Click> constructor.\n * \n * Inherits from:\n *  - <OpenLayers.Handler> \n */\nOpenLayers.Handler.Click = OpenLayers.Class(OpenLayers.Handler, {\n    /**\n     * APIProperty: delay\n     * {Number} Number of milliseconds between clicks before the event is\n     *     considered a double-click.\n     */\n    delay: 300,\n    \n    /**\n     * APIProperty: single\n     * {Boolean} Handle single clicks.  Default is true.  If false, clicks\n     * will not be reported.  If true, single-clicks will be reported.\n     */\n    single: true,\n    \n    /**\n     * APIProperty: double\n     * {Boolean} Handle double-clicks.  Default is false.\n     */\n    'double': false,\n    \n    /**\n     * APIProperty: pixelTolerance\n     * {Number} Maximum number of pixels between mouseup and mousedown for an\n     *     event to be considered a click.  Default is 0.  If set to an\n     *     integer value, clicks with a drag greater than the value will be\n     *     ignored.  This property can only be set when the handler is\n     *     constructed.\n     */\n    pixelTolerance: 0,\n        \n    /**\n     * APIProperty: dblclickTolerance\n     * {Number} Maximum distance in pixels between clicks for a sequence of \n     *     events to be considered a double click.  Default is 13.  If the\n     *     distance between two clicks is greater than this value, a double-\n     *     click will not be fired.\n     */\n    dblclickTolerance: 13,\n        \n    /**\n     * APIProperty: stopSingle\n     * {Boolean} Stop other listeners from being notified of clicks.  Default\n     *     is false.  If true, any listeners registered before this one for \n     *     click or rightclick events will not be notified.\n     */\n    stopSingle: false,\n    \n    /**\n     * APIProperty: stopDouble\n     * {Boolean} Stop other listeners from being notified of double-clicks.\n     *     Default is false.  If true, any click listeners registered before\n     *     this one will not be notified of *any* double-click events.\n     * \n     * The one caveat with stopDouble is that given a map with two click\n     *     handlers, one with stopDouble true and the other with stopSingle\n     *     true, the stopSingle handler should be activated last to get\n     *     uniform cross-browser performance.  Since IE triggers one click\n     *     with a dblclick and FF triggers two, if a stopSingle handler is\n     *     activated first, all it gets in IE is a single click when the\n     *     second handler stops propagation on the dblclick.\n     */\n    stopDouble: false,\n\n    /**\n     * Property: timerId\n     * {Number} The id of the timeout waiting to clear the <delayedCall>.\n     */\n    timerId: null,\n    \n    /**\n     * Property: down\n     * {Object} Object that store relevant information about the last\n     *     mousedown or touchstart. Its 'xy' OpenLayers.Pixel property gives\n     *     the average location of the mouse/touch event. Its 'touches'\n     *     property records clientX/clientY of each touches.\n     */\n    down: null,\n\n    /**\n     * Property: last\n     * {Object} Object that store relevant information about the last\n     *     mousemove or touchmove. Its 'xy' OpenLayers.Pixel property gives\n     *     the average location of the mouse/touch event. Its 'touches'\n     *     property records clientX/clientY of each touches.\n     */\n    last: null,\n\n    /** \n     * Property: first\n     * {Object} When waiting for double clicks, this object will store \n     *     information about the first click in a two click sequence.\n     */\n    first: null,\n\n    /**\n     * Property: rightclickTimerId\n     * {Number} The id of the right mouse timeout waiting to clear the \n     *     <delayedEvent>.\n     */\n    rightclickTimerId: null,\n    \n    /**\n     * Constructor: OpenLayers.Handler.Click\n     * Create a new click handler.\n     * \n     * Parameters:\n     * control - {<OpenLayers.Control>} The control that is making use of\n     *     this handler.  If a handler is being used without a control, the\n     *     handler's setMap method must be overridden to deal properly with\n     *     the map.\n     * callbacks - {Object} An object with keys corresponding to callbacks\n     *     that will be called by the handler. The callbacks should\n     *     expect to receive a single argument, the click event.\n     *     Callbacks for 'click' and 'dblclick' are supported.\n     * options - {Object} Optional object whose properties will be set on the\n     *     handler.\n     */\n    \n    /**\n     * Method: touchstart\n     * Handle touchstart.\n     *\n     * Returns:\n     * {Boolean} Continue propagating this event.\n     */\n    touchstart: function(evt) {\n        this.startTouch();\n        this.down = this.getEventInfo(evt);\n        this.last = this.getEventInfo(evt);\n        return true;\n    },\n    \n    /**\n     * Method: touchmove\n     *    Store position of last move, because touchend event can have\n     *    an empty \"touches\" property.\n     *\n     * Returns:\n     * {Boolean} Continue propagating this event.\n     */\n    touchmove: function(evt) {\n        this.last = this.getEventInfo(evt);\n        return true;\n    },\n\n    /**\n     * Method: touchend\n     *   Correctly set event xy property, and add lastTouches to have\n     *   touches property from last touchstart or touchmove\n     *\n     * Returns:\n     * {Boolean} Continue propagating this event.\n     */\n    touchend: function(evt) {\n        // touchstart may not have been allowed to propagate\n        if (this.down) {\n            evt.xy = this.last.xy;\n            evt.lastTouches = this.last.touches;\n            this.handleSingle(evt);\n            this.down = null;\n        }\n        return true;\n    },\n\n    /**\n     * Method: mousedown\n     * Handle mousedown.\n     *\n     * Returns:\n     * {Boolean} Continue propagating this event.\n     */\n    mousedown: function(evt) {\n        this.down = this.getEventInfo(evt);\n        this.last = this.getEventInfo(evt);\n        return true;\n    },\n\n    /**\n     * Method: mouseup\n     * Handle mouseup.  Installed to support collection of right mouse events.\n     * \n     * Returns:\n     * {Boolean} Continue propagating this event.\n     */\n    mouseup: function (evt) {\n        var propagate = true;\n\n        // Collect right mouse clicks from the mouseup\n        //  IE - ignores the second right click in mousedown so using\n        //  mouseup instead\n        if (this.checkModifiers(evt) && this.control.handleRightClicks &&\n           OpenLayers.Event.isRightClick(evt)) {\n            propagate = this.rightclick(evt);\n        }\n\n        return propagate;\n    },\n    \n    /**\n     * Method: rightclick\n     * Handle rightclick.  For a dblrightclick, we get two clicks so we need \n     *     to always register for dblrightclick to properly handle single \n     *     clicks.\n     *     \n     * Returns:\n     * {Boolean} Continue propagating this event.\n     */\n    rightclick: function(evt) {\n        if(this.passesTolerance(evt)) {\n           if(this.rightclickTimerId != null) {\n                //Second click received before timeout this must be \n                // a double click\n                this.clearTimer();\n                this.callback('dblrightclick', [evt]);\n                return !this.stopDouble;\n            } else { \n                //Set the rightclickTimerId, send evt only if double is \n                // true else trigger single\n                var clickEvent = this['double'] ?\n                    OpenLayers.Util.extend({}, evt) : \n                    this.callback('rightclick', [evt]);\n\n                var delayedRightCall = OpenLayers.Function.bind(\n                    this.delayedRightCall, \n                    this, \n                    clickEvent\n                );\n                this.rightclickTimerId = window.setTimeout(\n                    delayedRightCall, this.delay\n                );\n            } \n        }\n        return !this.stopSingle;\n    },\n    \n    /**\n     * Method: delayedRightCall\n     * Sets <rightclickTimerId> to null.  And optionally triggers the \n     *     rightclick callback if evt is set.\n     */\n    delayedRightCall: function(evt) {\n        this.rightclickTimerId = null;\n        if (evt) {\n           this.callback('rightclick', [evt]);\n        }\n    },\n    \n    /**\n     * Method: click\n     * Handle click events from the browser.  This is registered as a listener\n     *     for click events and should not be called from other events in this\n     *     handler.\n     *\n     * Returns:\n     * {Boolean} Continue propagating this event.\n     */\n    click: function(evt) {\n        if (!this.last) {\n            this.last = this.getEventInfo(evt);\n        }\n        this.handleSingle(evt);\n        return !this.stopSingle;\n    },\n\n    /**\n     * Method: dblclick\n     * Handle dblclick.  For a dblclick, we get two clicks in some browsers\n     *     (FF) and one in others (IE).  So we need to always register for\n     *     dblclick to properly handle single clicks.  This method is registered\n     *     as a listener for the dblclick browser event.  It should *not* be\n     *     called by other methods in this handler.\n     *     \n     * Returns:\n     * {Boolean} Continue propagating this event.\n     */\n    dblclick: function(evt) {\n        this.handleDouble(evt);\n        return !this.stopDouble;\n    },\n    \n    /** \n     * Method: handleDouble\n     * Handle double-click sequence.\n     */\n    handleDouble: function(evt) {\n        if (this.passesDblclickTolerance(evt)) {\n            if (this[\"double\"]) {\n                this.callback(\"dblclick\", [evt]);\n            }\n            // to prevent a dblclick from firing the click callback in IE\n            this.clearTimer();\n        }\n    },\n    \n    /** \n     * Method: handleSingle\n     * Handle single click sequence.\n     */\n    handleSingle: function(evt) {\n        if (this.passesTolerance(evt)) {\n            if (this.timerId != null) {\n                // already received a click\n                if (this.last.touches && this.last.touches.length === 1) {\n                    // touch device, no dblclick event - this may be a double\n                    if (this[\"double\"]) {\n                        // on Android don't let the browser zoom on the page\n                        OpenLayers.Event.preventDefault(evt);\n                    }\n                    this.handleDouble(evt);\n                }\n                // if we're not in a touch environment we clear the click timer\n                // if we've got a second touch, we'll get two touchend events\n                if (!this.last.touches || this.last.touches.length !== 2) {\n                    this.clearTimer();\n                }\n            } else {\n                // remember the first click info so we can compare to the second\n                this.first = this.getEventInfo(evt);\n                // set the timer, send evt only if single is true\n                //use a clone of the event object because it will no longer \n                //be a valid event object in IE in the timer callback\n                var clickEvent = this.single ?\n                    OpenLayers.Util.extend({}, evt) : null;\n                this.queuePotentialClick(clickEvent);\n            }\n        }\n    },\n    \n    /** \n     * Method: queuePotentialClick\n     * This method is separated out largely to make testing easier (so we\n     *     don't have to override window.setTimeout)\n     */\n    queuePotentialClick: function(evt) {\n        this.timerId = window.setTimeout(\n            OpenLayers.Function.bind(this.delayedCall, this, evt),\n            this.delay\n        );\n    },\n\n    /**\n     * Method: passesTolerance\n     * Determine whether the event is within the optional pixel tolerance.  Note\n     *     that the pixel tolerance check only works if mousedown events get to\n     *     the listeners registered here.  If they are stopped by other elements,\n     *     the <pixelTolerance> will have no effect here (this method will always\n     *     return true).\n     *\n     * Returns:\n     * {Boolean} The click is within the pixel tolerance (if specified).\n     */\n    passesTolerance: function(evt) {\n        var passes = true;\n        if (this.pixelTolerance != null && this.down && this.down.xy) {\n            passes = this.pixelTolerance >= this.down.xy.distanceTo(evt.xy);\n            // for touch environments, we also enforce that all touches\n            // start and end within the given tolerance to be considered a click\n            if (passes && this.touch && \n                this.down.touches.length === this.last.touches.length) {\n                // the touchend event doesn't come with touches, so we check\n                // down and last\n                for (var i=0, ii=this.down.touches.length; i<ii; ++i) {\n                    if (this.getTouchDistance(\n                            this.down.touches[i], \n                            this.last.touches[i]\n                        ) > this.pixelTolerance) {\n                        passes = false;\n                        break;\n                    }\n                }\n            }\n        }\n        return passes;\n    },\n    \n    /** \n     * Method: getTouchDistance\n     *\n     * Returns:\n     * {Boolean} The pixel displacement between two touches.\n     */\n    getTouchDistance: function(from, to) {\n        return Math.sqrt(\n            Math.pow(from.clientX - to.clientX, 2) +\n            Math.pow(from.clientY - to.clientY, 2)\n        );\n    },\n    \n    /**\n     * Method: passesDblclickTolerance\n     * Determine whether the event is within the optional double-cick pixel \n     *     tolerance.\n     *\n     * Returns:\n     * {Boolean} The click is within the double-click pixel tolerance.\n     */\n    passesDblclickTolerance: function(evt) {\n        var passes = true;\n        if (this.down && this.first) {\n            passes = this.down.xy.distanceTo(this.first.xy) <= this.dblclickTolerance;\n        }\n        return passes;\n    },\n\n    /**\n     * Method: clearTimer\n     * Clear the timer and set <timerId> to null.\n     */\n    clearTimer: function() {\n        if (this.timerId != null) {\n            window.clearTimeout(this.timerId);\n            this.timerId = null;\n        }\n        if (this.rightclickTimerId != null) {\n            window.clearTimeout(this.rightclickTimerId);\n            this.rightclickTimerId = null;\n        }\n    },\n    \n    /**\n     * Method: delayedCall\n     * Sets <timerId> to null.  And optionally triggers the click callback if\n     *     evt is set.\n     */\n    delayedCall: function(evt) {\n        this.timerId = null;\n        if (evt) {\n            this.callback(\"click\", [evt]);\n        }\n    },\n\n    /**\n     * Method: getEventInfo\n     * This method allows us to store event information without storing the\n     *     actual event.  In touch devices (at least), the same event is \n     *     modified between touchstart, touchmove, and touchend.\n     *\n     * Returns:\n     * {Object} An object with event related info.\n     */\n    getEventInfo: function(evt) {\n        var touches;\n        if (evt.touches) {\n            var len = evt.touches.length;\n            touches = new Array(len);\n            var touch;\n            for (var i=0; i<len; i++) {\n                touch = evt.touches[i];\n                touches[i] = {\n                    clientX: touch.olClientX,\n                    clientY: touch.olClientY\n                };\n            }\n        }\n        return {\n            xy: evt.xy,\n            touches: touches\n        };\n    },\n\n    /**\n     * APIMethod: deactivate\n     * Deactivate the handler.\n     *\n     * Returns:\n     * {Boolean} The handler was successfully deactivated.\n     */\n    deactivate: function() {\n        var deactivated = false;\n        if(OpenLayers.Handler.prototype.deactivate.apply(this, arguments)) {\n            this.clearTimer();\n            this.down = null;\n            this.first = null;\n            this.last = null;\n            deactivated = true;\n        }\n        return deactivated;\n    },\n\n    CLASS_NAME: \"OpenLayers.Handler.Click\"\n});\n/* ======================================================================\n    OpenLayers/Control/Navigation.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Control/ZoomBox.js\n * @requires OpenLayers/Control/DragPan.js\n * @requires OpenLayers/Handler/MouseWheel.js\n * @requires OpenLayers/Handler/Click.js\n */\n\n/**\n * Class: OpenLayers.Control.Navigation\n * The navigation control handles map browsing with mouse events (dragging,\n *     double-clicking, and scrolling the wheel).  Create a new navigation \n *     control with the <OpenLayers.Control.Navigation> control.  \n * \n *     Note that this control is added to the map by default (if no controls \n *     array is sent in the options object to the <OpenLayers.Map> \n *     constructor).\n * \n * Inherits:\n *  - <OpenLayers.Control>\n */\nOpenLayers.Control.Navigation = OpenLayers.Class(OpenLayers.Control, {\n\n    /** \n     * Property: dragPan\n     * {<OpenLayers.Control.DragPan>} \n     */\n    dragPan: null,\n\n    /**\n     * APIProperty: dragPanOptions\n     * {Object} Options passed to the DragPan control.\n     */\n    dragPanOptions: null,\n\n    /**\n     * Property: pinchZoom\n     * {<OpenLayers.Control.PinchZoom>}\n     */\n    pinchZoom: null,\n\n    /**\n     * APIProperty: pinchZoomOptions\n     * {Object} Options passed to the PinchZoom control.\n     */\n    pinchZoomOptions: null,\n\n    /**\n     * APIProperty: documentDrag\n     * {Boolean} Allow panning of the map by dragging outside map viewport.\n     *     Default is false.\n     */\n    documentDrag: false,\n\n    /** \n     * Property: zoomBox\n     * {<OpenLayers.Control.ZoomBox>}\n     */\n    zoomBox: null,\n\n    /**\n     * APIProperty: zoomBoxEnabled\n     * {Boolean} Whether the user can draw a box to zoom\n     */\n    zoomBoxEnabled: true, \n\n    /**\n     * APIProperty: zoomWheelEnabled\n     * {Boolean} Whether the mousewheel should zoom the map\n     */\n    zoomWheelEnabled: true,\n    \n    /**\n     * Property: mouseWheelOptions\n     * {Object} Options passed to the MouseWheel control (only useful if\n     *     <zoomWheelEnabled> is set to true). Default is no options for maps\n     *     with fractionalZoom set to true, otherwise\n     *     {cumulative: false, interval: 50, maxDelta: 6} \n     */\n    mouseWheelOptions: null,\n\n    /**\n     * APIProperty: handleRightClicks\n     * {Boolean} Whether or not to handle right clicks. Default is false.\n     */\n    handleRightClicks: false,\n\n    /**\n     * APIProperty: zoomBoxKeyMask\n     * {Integer} <OpenLayers.Handler> key code of the key, which has to be\n     *    pressed, while drawing the zoom box with the mouse on the screen. \n     *    You should probably set handleRightClicks to true if you use this\n     *    with MOD_CTRL, to disable the context menu for machines which use\n     *    CTRL-Click as a right click.\n     * Default: <OpenLayers.Handler.MOD_SHIFT>\n     */\n    zoomBoxKeyMask: OpenLayers.Handler.MOD_SHIFT,\n    \n    /**\n     * APIProperty: autoActivate\n     * {Boolean} Activate the control when it is added to a map.  Default is\n     *     true.\n     */\n    autoActivate: true,\n\n    /**\n     * Constructor: OpenLayers.Control.Navigation\n     * Create a new navigation control\n     * \n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *                    the control\n     */\n    initialize: function(options) {\n        this.handlers = {};\n        OpenLayers.Control.prototype.initialize.apply(this, arguments);\n    },\n\n    /**\n     * Method: destroy\n     * The destroy method is used to perform any clean up before the control\n     * is dereferenced.  Typically this is where event listeners are removed\n     * to prevent memory leaks.\n     */\n    destroy: function() {\n        this.deactivate();\n\n        if (this.dragPan) {\n            this.dragPan.destroy();\n        }\n        this.dragPan = null;\n\n        if (this.zoomBox) {\n            this.zoomBox.destroy();\n        }\n        this.zoomBox = null;\n\n        if (this.pinchZoom) {\n            this.pinchZoom.destroy();\n        }\n        this.pinchZoom = null;\n\n        OpenLayers.Control.prototype.destroy.apply(this,arguments);\n    },\n    \n    /**\n     * Method: activate\n     */\n    activate: function() {\n        this.dragPan.activate();\n        if (this.zoomWheelEnabled) {\n            this.handlers.wheel.activate();\n        }    \n        this.handlers.click.activate();\n        if (this.zoomBoxEnabled) {\n            this.zoomBox.activate();\n        }\n        if (this.pinchZoom) {\n            this.pinchZoom.activate();\n        }\n        return OpenLayers.Control.prototype.activate.apply(this,arguments);\n    },\n\n    /**\n     * Method: deactivate\n     */\n    deactivate: function() {\n        if (this.pinchZoom) {\n            this.pinchZoom.deactivate();\n        }\n        this.zoomBox.deactivate();\n        this.dragPan.deactivate();\n        this.handlers.click.deactivate();\n        this.handlers.wheel.deactivate();\n        return OpenLayers.Control.prototype.deactivate.apply(this,arguments);\n    },\n    \n    /**\n     * Method: draw\n     */\n    draw: function() {\n        // disable right mouse context menu for support of right click events\n        if (this.handleRightClicks) {\n            this.map.viewPortDiv.oncontextmenu = OpenLayers.Function.False;\n        }\n\n        var clickCallbacks = { \n            'click': this.defaultClick,\n            'dblclick': this.defaultDblClick, \n            'dblrightclick': this.defaultDblRightClick \n        };\n        var clickOptions = {\n            'double': true, \n            'stopDouble': true\n        };\n        this.handlers.click = new OpenLayers.Handler.Click(\n            this, clickCallbacks, clickOptions\n        );\n        this.dragPan = new OpenLayers.Control.DragPan(\n            OpenLayers.Util.extend({\n                map: this.map,\n                documentDrag: this.documentDrag\n            }, this.dragPanOptions)\n        );\n        this.zoomBox = new OpenLayers.Control.ZoomBox(\n                    {map: this.map, keyMask: this.zoomBoxKeyMask});\n        this.dragPan.draw();\n        this.zoomBox.draw();\n        var wheelOptions = this.map.fractionalZoom ? {} : {\n            cumulative: false,\n            interval: 50,\n            maxDelta: 6\n        };\n        this.handlers.wheel = new OpenLayers.Handler.MouseWheel(\n            this, {up : this.wheelUp, down: this.wheelDown},\n            OpenLayers.Util.extend(wheelOptions, this.mouseWheelOptions)\n        );\n        if (OpenLayers.Control.PinchZoom) {\n            this.pinchZoom = new OpenLayers.Control.PinchZoom(\n                OpenLayers.Util.extend(\n                    {map: this.map}, this.pinchZoomOptions));\n        }\n    },\n\n    /**\n     * Method: defaultClick\n     *\n     * Parameters:\n     * evt - {Event}\n     */\n    defaultClick: function (evt) {\n        if (evt.lastTouches && evt.lastTouches.length == 2) {\n            this.map.zoomOut();\n        }\n    },\n\n    /**\n     * Method: defaultDblClick \n     * \n     * Parameters:\n     * evt - {Event} \n     */\n    defaultDblClick: function (evt) {\n        this.map.zoomTo(this.map.zoom + 1, evt.xy);\n    },\n\n    /**\n     * Method: defaultDblRightClick \n     * \n     * Parameters:\n     * evt - {Event} \n     */\n    defaultDblRightClick: function (evt) {\n        this.map.zoomTo(this.map.zoom - 1, evt.xy);\n    },\n    \n    /**\n     * Method: wheelChange  \n     *\n     * Parameters:\n     * evt - {Event}\n     * deltaZ - {Integer}\n     */\n    wheelChange: function(evt, deltaZ) {\n        if (!this.map.fractionalZoom) {\n            deltaZ =  Math.round(deltaZ);\n        }\n        var currentZoom = this.map.getZoom(),\n            newZoom = currentZoom + deltaZ;\n        newZoom = Math.max(newZoom, 0);\n        newZoom = Math.min(newZoom, this.map.getNumZoomLevels());\n        if (newZoom === currentZoom) {\n            return;\n        }\n        this.map.zoomTo(newZoom, evt.xy);\n    },\n\n    /** \n     * Method: wheelUp\n     * User spun scroll wheel up\n     * \n     * Parameters:\n     * evt - {Event}\n     * delta - {Integer}\n     */\n    wheelUp: function(evt, delta) {\n        this.wheelChange(evt, delta || 1);\n    },\n\n    /** \n     * Method: wheelDown\n     * User spun scroll wheel down\n     * \n     * Parameters:\n     * evt - {Event}\n     * delta - {Integer}\n     */\n    wheelDown: function(evt, delta) {\n        this.wheelChange(evt, delta || -1);\n    },\n    \n    /**\n     * Method: disableZoomBox\n     */\n    disableZoomBox : function() {\n        this.zoomBoxEnabled = false;\n        this.zoomBox.deactivate();       \n    },\n    \n    /**\n     * Method: enableZoomBox\n     */\n    enableZoomBox : function() {\n        this.zoomBoxEnabled = true;\n        if (this.active) {\n            this.zoomBox.activate();\n        }    \n    },\n    \n    /**\n     * Method: disableZoomWheel\n     */\n    \n    disableZoomWheel : function() {\n        this.zoomWheelEnabled = false;\n        this.handlers.wheel.deactivate();       \n    },\n    \n    /**\n     * Method: enableZoomWheel\n     */\n    \n    enableZoomWheel : function() {\n        this.zoomWheelEnabled = true;\n        if (this.active) {\n            this.handlers.wheel.activate();\n        }    \n    },\n\n    CLASS_NAME: \"OpenLayers.Control.Navigation\"\n});\n/* ======================================================================\n    OpenLayers/Handler/Keyboard.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Handler.js\n * @requires OpenLayers/Events.js\n */\n\n/**\n * Class: OpenLayers.handler.Keyboard\n * A handler for keyboard events.  Create a new instance with the\n *     <OpenLayers.Handler.Keyboard> constructor.\n * \n * Inherits from:\n *  - <OpenLayers.Handler> \n */\nOpenLayers.Handler.Keyboard = OpenLayers.Class(OpenLayers.Handler, {\n\n    /* http://www.quirksmode.org/js/keys.html explains key x-browser\n        key handling quirks in pretty nice detail */\n\n    /** \n     * Constant: KEY_EVENTS\n     * keydown, keypress, keyup\n     */\n    KEY_EVENTS: [\"keydown\", \"keyup\"],\n\n    /** \n    * Property: eventListener\n    * {Function}\n    */\n    eventListener: null,\n\n    /**\n     * Property: observeElement\n     * {DOMElement|String} The DOM element on which we listen for\n     *     key events. Default to the document.\n     */\n    observeElement: null,\n\n    /**\n     * Constructor: OpenLayers.Handler.Keyboard\n     * Returns a new keyboard handler.\n     * \n     * Parameters:\n     * control - {<OpenLayers.Control>} The control that is making use of\n     *     this handler.  If a handler is being used without a control, the\n     *     handlers setMap method must be overridden to deal properly with\n     *     the map.\n     * callbacks - {Object} An object containing a single function to be\n     *     called when the drag operation is finished. The callback should\n     *     expect to receive a single argument, the pixel location of the event.\n     *     Callbacks for 'keydown', 'keypress', and 'keyup' are supported.\n     * options - {Object} Optional object whose properties will be set on the\n     *     handler.\n     */\n    initialize: function(control, callbacks, options) {\n        OpenLayers.Handler.prototype.initialize.apply(this, arguments);\n        // cache the bound event listener method so it can be unobserved later\n        this.eventListener = OpenLayers.Function.bindAsEventListener(\n            this.handleKeyEvent, this\n        );\n    },\n    \n    /**\n     * Method: destroy\n     */\n    destroy: function() {\n        this.deactivate();\n        this.eventListener = null;\n        OpenLayers.Handler.prototype.destroy.apply(this, arguments);\n    },\n\n    /**\n     * Method: activate\n     */\n    activate: function() {\n        if (OpenLayers.Handler.prototype.activate.apply(this, arguments)) {\n            this.observeElement = this.observeElement || document;\n            for (var i=0, len=this.KEY_EVENTS.length; i<len; i++) {\n                OpenLayers.Event.observe(\n                    this.observeElement, this.KEY_EVENTS[i], this.eventListener);\n            }\n            return true;\n        } else {\n            return false;\n        }\n    },\n\n    /**\n     * Method: deactivate\n     */\n    deactivate: function() {\n        var deactivated = false;\n        if (OpenLayers.Handler.prototype.deactivate.apply(this, arguments)) {\n            for (var i=0, len=this.KEY_EVENTS.length; i<len; i++) {\n                OpenLayers.Event.stopObserving(\n                    this.observeElement, this.KEY_EVENTS[i], this.eventListener);\n            }\n            deactivated = true;\n        }\n        return deactivated;\n    },\n\n    /**\n     * Method: handleKeyEvent \n     */\n    handleKeyEvent: function (evt) {\n        if (this.checkModifiers(evt)) {\n            this.callback(evt.type, [evt]);\n        }\n    },\n\n    CLASS_NAME: \"OpenLayers.Handler.Keyboard\"\n});\n/* ======================================================================\n    OpenLayers/Control/KeyboardDefaults.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Control.js\n * @requires OpenLayers/Handler/Keyboard.js\n * @requires OpenLayers/Events.js\n */\n\n/**\n * Class: OpenLayers.Control.KeyboardDefaults\n * The KeyboardDefaults control adds panning and zooming functions, controlled\n * with the keyboard. By default arrow keys pan, +/- keys zoom & Page Up/Page\n * Down/Home/End scroll by three quarters of a page.\n * \n * This control has no visible appearance.\n *\n * Inherits from:\n *  - <OpenLayers.Control>\n */\nOpenLayers.Control.KeyboardDefaults = OpenLayers.Class(OpenLayers.Control, {\n\n    /**\n     * APIProperty: autoActivate\n     * {Boolean} Activate the control when it is added to a map.  Default is\n     *     true.\n     */\n    autoActivate: true,\n\n    /**\n     * APIProperty: slideFactor\n     * Pixels to slide by.\n     */\n    slideFactor: 75,\n\n    /**\n     * APIProperty: observeElement\n     * {DOMelement|String} The DOM element to handle keys for. You\n     *     can use the map div here, to have the navigation keys\n     *     work when the map div has the focus. If undefined the\n     *     document is used.\n     */\n    observeElement: null,\n\n    /**\n     * Constructor: OpenLayers.Control.KeyboardDefaults\n     */\n        \n    /**\n     * Method: draw\n     * Create handler.\n     */\n    draw: function() {\n        var observeElement = this.observeElement || document;\n        this.handler = new OpenLayers.Handler.Keyboard( this,\n                {\"keydown\": this.defaultKeyPress},\n                {observeElement: observeElement}\n        );\n    },\n    \n    /**\n     * Method: defaultKeyPress\n     * When handling the key event, we only use evt.keyCode. This holds \n     * some drawbacks, though we get around them below. When interpretting\n     * the keycodes below (including the comments associated with them),\n     * consult the URL below. For instance, the Safari browser returns\n     * \"IE keycodes\", and so is supported by any keycode labeled \"IE\".\n     * \n     * Very informative URL:\n     *    http://unixpapa.com/js/key.html\n     *\n     * Parameters:\n     * evt - {Event} \n     */\n    defaultKeyPress: function (evt) {\n        var size, handled = true;\n\n        var target = OpenLayers.Event.element(evt);\n        if (target  &&\n            (target.tagName == 'INPUT' ||\n             target.tagName == 'TEXTAREA' ||\n             target.tagName == 'SELECT')) {\n            return;\n        }\n\n        switch (evt.keyCode) {\n            case OpenLayers.Event.KEY_LEFT:\n                this.map.pan(-this.slideFactor, 0);\n                break;\n            case OpenLayers.Event.KEY_RIGHT: \n                this.map.pan(this.slideFactor, 0);\n                break;\n            case OpenLayers.Event.KEY_UP:\n                this.map.pan(0, -this.slideFactor);\n                break;\n            case OpenLayers.Event.KEY_DOWN:\n                this.map.pan(0, this.slideFactor);\n                break;\n            \n            case 33: // Page Up. Same in all browsers.\n                size = this.map.getSize();\n                this.map.pan(0, -0.75*size.h);\n                break;\n            case 34: // Page Down. Same in all browsers.\n                size = this.map.getSize();\n                this.map.pan(0, 0.75*size.h);\n                break; \n            case 35: // End. Same in all browsers.\n                size = this.map.getSize();\n                this.map.pan(0.75*size.w, 0);\n                break; \n            case 36: // Home. Same in all browsers.\n                size = this.map.getSize();\n                this.map.pan(-0.75*size.w, 0);\n                break; \n\n            case 43:  // +/= (ASCII), keypad + (ASCII, Opera)\n            case 61:  // +/= (Mozilla, Opera, some ASCII)\n            case 187: // +/= (IE)\n            case 107: // keypad + (IE, Mozilla)\n                this.map.zoomIn();\n                break; \n            case 45:  // -/_ (ASCII, Opera), keypad - (ASCII, Opera)\n            case 109: // -/_ (Mozilla), keypad - (Mozilla, IE)\n            case 189: // -/_ (IE)\n            case 95:  // -/_ (some ASCII)\n                this.map.zoomOut();\n                break; \n            default:\n                handled = false;\n        }\n        if (handled) {\n            // prevent browser default not to move the page\n            // when moving the page with the keyboard\n            OpenLayers.Event.stop(evt);\n        }\n    },\n\n    CLASS_NAME: \"OpenLayers.Control.KeyboardDefaults\"\n});\n/* ======================================================================\n    OpenLayers/Control/Measure.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Control.js\n * @requires OpenLayers/Feature/Vector.js\n */\n\n/**\n * Class: OpenLayers.Control.Measure\n * Allows for drawing of features for measurements.\n *\n * Inherits from:\n *  - <OpenLayers.Control>\n */\nOpenLayers.Control.Measure = OpenLayers.Class(OpenLayers.Control, {\n\n    /**\n     * APIProperty: events\n     * {<OpenLayers.Events>} Events instance for listeners and triggering\n     *     control specific events.\n     *\n     * Register a listener for a particular event with the following syntax:\n     * (code)\n     * control.events.register(type, obj, listener);\n     * (end)\n     *\n     * Supported event types (in addition to those from <OpenLayers.Control.events>):\n     * measure - Triggered when a measurement sketch is complete.  Listeners\n     *      will receive an event with measure, units, order, and geometry\n     *      properties.\n     * measurepartial - Triggered when a new point is added to the\n     *      measurement sketch or if the <immediate> property is true and the\n     *      measurement sketch is modified.  Listeners receive an event with measure,\n     *      units, order, and geometry.\n     */\n\n    /**\n     * APIProperty: handlerOptions\n     * {Object} Used to set non-default properties on the control's handler\n     */\n\n    /**\n     * Property: callbacks\n     * {Object} The functions that are sent to the handler for callback\n     */\n    callbacks: null,\n\n    /**\n     * APIProperty: displaySystem\n     * {String} Display system for output measurements.  Supported values\n     *     are 'english', 'metric', and 'geographic'.  Default is 'metric'.\n     */\n    displaySystem: 'metric',\n\n    /**\n     * APIProperty: geodesic\n     * {Boolean} Calculate geodesic metrics instead of planar metrics.  This\n     *     requires that geometries can be transformed into Geographic/WGS84\n     *     (if that is not already the map projection).  Default is false.\n     */\n    geodesic: false,\n\n    /**\n     * Property: displaySystemUnits\n     * {Object} Units for various measurement systems.  Values are arrays\n     *     of unit abbreviations (from OpenLayers.INCHES_PER_UNIT) in decreasing\n     *     order of length.\n     */\n    displaySystemUnits: {\n        geographic: ['dd'],\n        english: ['mi', 'ft', 'in'],\n        metric: ['km', 'm']\n    },\n\n    /**\n     * Property: delay\n     * {Number} Number of milliseconds between clicks before the event is\n     *     considered a double-click.  The \"measurepartial\" event will not\n     *     be triggered if the sketch is completed within this time.  This\n     *     is required for IE where creating a browser reflow (if a listener\n     *     is modifying the DOM by displaying the measurement values) messes\n     *     with the dblclick listener in the sketch handler.\n     */\n    partialDelay: 300,\n\n    /**\n     * Property: delayedTrigger\n     * {Number} Timeout id of trigger for measurepartial.\n     */\n    delayedTrigger: null,\n\n    /**\n     * APIProperty: persist\n     * {Boolean} Keep the temporary measurement sketch drawn after the\n     *     measurement is complete.  The geometry will persist until a new\n     *     measurement is started, the control is deactivated, or <cancel> is\n     *     called.\n     */\n    persist: false,\n\n    /**\n     * APIProperty: immediate\n     * {Boolean} Activates the immediate measurement so that the \"measurepartial\"\n     *     event is also fired once the measurement sketch is modified.\n     *     Default is false.\n     */\n    immediate : false,\n\n    /**\n     * Constructor: OpenLayers.Control.Measure\n     *\n     * Parameters:\n     * handler - {<OpenLayers.Handler>}\n     * options - {Object}\n     */\n    initialize: function(handler, options) {\n        OpenLayers.Control.prototype.initialize.apply(this, [options]);\n        var callbacks = {done: this.measureComplete,\n            point: this.measurePartial};\n        if (this.immediate){\n            callbacks.modify = this.measureImmediate;\n        }\n        this.callbacks = OpenLayers.Util.extend(callbacks, this.callbacks);\n\n        // let the handler options override, so old code that passes 'persist'\n        // directly to the handler does not need an update\n        this.handlerOptions = OpenLayers.Util.extend(\n            {persist: this.persist}, this.handlerOptions\n        );\n        this.handler = new handler(this, this.callbacks, this.handlerOptions);\n    },\n\n    /**\n     * APIMethod: deactivate\n     */\n    deactivate: function() {\n        this.cancelDelay();\n        return OpenLayers.Control.prototype.deactivate.apply(this, arguments);\n    },\n\n    /**\n     * APIMethod: cancel\n     * Stop the control from measuring.  If <persist> is true, the temporary\n     *     sketch will be erased.\n     */\n    cancel: function() {\n        this.cancelDelay();\n        this.handler.cancel();\n    },\n\n    /**\n     * APIMethod: setImmediate\n     * Sets the <immediate> property. Changes the activity of immediate\n     * measurement.\n     */\n    setImmediate: function(immediate) {\n        this.immediate = immediate;\n        if (this.immediate){\n            this.callbacks.modify = this.measureImmediate;\n        } else {\n            delete this.callbacks.modify;\n        }\n    },\n\n    /**\n     * Method: updateHandler\n     *\n     * Parameters:\n     * handler - {Function} One of the sketch handler constructors.\n     * options - {Object} Options for the handler.\n     */\n    updateHandler: function(handler, options) {\n        var active = this.active;\n        if(active) {\n            this.deactivate();\n        }\n        this.handler = new handler(this, this.callbacks, options);\n        if(active) {\n            this.activate();\n        }\n    },\n\n    /**\n     * Method: measureComplete\n     * Called when the measurement sketch is done.\n     *\n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>}\n     */\n    measureComplete: function(geometry) {\n        this.cancelDelay();\n        this.measure(geometry, \"measure\");\n    },\n\n    /**\n     * Method: measurePartial\n     * Called each time a new point is added to the measurement sketch.\n     *\n     * Parameters:\n     * point - {<OpenLayers.Geometry.Point>} The last point added.\n     * geometry - {<OpenLayers.Geometry>} The sketch geometry.\n     */\n    measurePartial: function(point, geometry) {\n        this.cancelDelay();\n        geometry = geometry.clone();\n        // when we're wating for a dblclick, we have to trigger measurepartial\n        // after some delay to deal with reflow issues in IE\n        if (this.handler.freehandMode(this.handler.evt)) {\n            // no dblclick in freehand mode\n            this.measure(geometry, \"measurepartial\");\n        } else {\n            this.delayedTrigger = window.setTimeout(\n                OpenLayers.Function.bind(function() {\n                    this.delayedTrigger = null;\n                    this.measure(geometry, \"measurepartial\");\n                }, this),\n                this.partialDelay\n            );\n        }\n    },\n\n    /**\n     * Method: measureImmediate\n     * Called each time the measurement sketch is modified.\n     *\n     * Parameters:\n     * point - {<OpenLayers.Geometry.Point>} The point at the mouse position.\n     * feature - {<OpenLayers.Feature.Vector>} The sketch feature.\n     * drawing - {Boolean} Indicates whether we're currently drawing.\n     */\n    measureImmediate : function(point, feature, drawing) {\n        if (drawing && !this.handler.freehandMode(this.handler.evt)) {\n            this.cancelDelay();\n            this.measure(feature.geometry, \"measurepartial\");\n        }\n    },\n\n    /**\n     * Method: cancelDelay\n     * Cancels the delay measurement that measurePartial began.\n     */\n    cancelDelay: function() {\n        if (this.delayedTrigger !== null) {\n            window.clearTimeout(this.delayedTrigger);\n            this.delayedTrigger = null;\n        }\n    },\n\n    /**\n     * Method: measure\n     *\n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>}\n     * eventType - {String}\n     */\n    measure: function(geometry, eventType) {\n        var stat, order;\n        if(geometry.CLASS_NAME.indexOf('LineString') > -1) {\n            stat = this.getBestLength(geometry);\n            order = 1;\n        } else {\n            stat = this.getBestArea(geometry);\n            order = 2;\n        }\n        this.events.triggerEvent(eventType, {\n            measure: stat[0],\n            units: stat[1],\n            order: order,\n            geometry: geometry\n        });\n    },\n\n    /**\n     * Method: getBestArea\n     * Based on the <displaySystem> returns the area of a geometry.\n     *\n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>}\n     *\n     * Returns:\n     * {Array([Float, String])}  Returns a two item array containing the\n     *     area and the units abbreviation.\n     */\n    getBestArea: function(geometry) {\n        var units = this.displaySystemUnits[this.displaySystem];\n        var unit, area;\n        for(var i=0, len=units.length; i<len; ++i) {\n            unit = units[i];\n            area = this.getArea(geometry, unit);\n            if(area > 1) {\n                break;\n            }\n        }\n        return [area, unit];\n    },\n\n    /**\n     * Method: getArea\n     *\n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>}\n     * units - {String} Unit abbreviation\n     *\n     * Returns:\n     * {Float} The geometry area in the given units.\n     */\n    getArea: function(geometry, units) {\n        var area, geomUnits;\n        if(this.geodesic) {\n            area = geometry.getGeodesicArea(this.map.getProjectionObject());\n            geomUnits = \"m\";\n        } else {\n            area = geometry.getArea();\n            geomUnits = this.map.getUnits();\n        }\n        var inPerDisplayUnit = OpenLayers.INCHES_PER_UNIT[units];\n        if(inPerDisplayUnit) {\n            var inPerMapUnit = OpenLayers.INCHES_PER_UNIT[geomUnits];\n            area *= Math.pow((inPerMapUnit / inPerDisplayUnit), 2);\n        }\n        return area;\n    },\n\n    /**\n     * Method: getBestLength\n     * Based on the <displaySystem> returns the length of a geometry.\n     *\n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>}\n     *\n     * Returns:\n     * {Array([Float, String])}  Returns a two item array containing the\n     *     length and the units abbreviation.\n     */\n    getBestLength: function(geometry) {\n        var units = this.displaySystemUnits[this.displaySystem];\n        var unit, length;\n        for(var i=0, len=units.length; i<len; ++i) {\n            unit = units[i];\n            length = this.getLength(geometry, unit);\n            if(length > 1) {\n                break;\n            }\n        }\n        return [length, unit];\n    },\n\n    /**\n     * Method: getLength\n     *\n     * Parameters:\n     * geometry - {<OpenLayers.Geometry>}\n     * units - {String} Unit abbreviation\n     *\n     * Returns:\n     * {Float} The geometry length in the given units.\n     */\n    getLength: function(geometry, units) {\n        var length, geomUnits;\n        if(this.geodesic) {\n            length = geometry.getGeodesicLength(this.map.getProjectionObject());\n            geomUnits = \"m\";\n        } else {\n            length = geometry.getLength();\n            geomUnits = this.map.getUnits();\n        }\n        var inPerDisplayUnit = OpenLayers.INCHES_PER_UNIT[units];\n        if(inPerDisplayUnit) {\n            var inPerMapUnit = OpenLayers.INCHES_PER_UNIT[geomUnits];\n            length *= (inPerMapUnit / inPerDisplayUnit);\n        }\n        return length;\n    },\n\n    CLASS_NAME: \"OpenLayers.Control.Measure\"\n});\n/* ======================================================================\n    OpenLayers/Control/LayerSwitcher.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Control.js\n * @requires OpenLayers/Lang.js\n * @requires OpenLayers/Util.js\n * @requires OpenLayers/Events/buttonclick.js\n */\n\n/**\n * Class: OpenLayers.Control.LayerSwitcher\n * The LayerSwitcher control displays a table of contents for the map. This\n * allows the user interface to switch between BaseLasyers and to show or hide\n * Overlays. By default the switcher is shown minimized on the right edge of\n * the map, the user may expand it by clicking on the handle.\n *\n * To create the LayerSwitcher outside of the map, pass the Id of a html div\n * as the first argument to the constructor.\n *\n * Inherits from:\n *  - <OpenLayers.Control>\n */\nOpenLayers.Control.LayerSwitcher = OpenLayers.Class(OpenLayers.Control, {\n\n    /**  \n     * Property: layerStates \n     * {Array(Object)} Basically a copy of the \"state\" of the map's layers \n     *     the last time the control was drawn. We have this in order to avoid\n     *     unnecessarily redrawing the control.\n     */\n    layerStates: null,\n\n  // DOM Elements\n\n    /**\n     * Property: layersDiv\n     * {DOMElement}\n     */\n    layersDiv: null,\n\n    /**\n     * Property: baseLayersDiv\n     * {DOMElement}\n     */\n    baseLayersDiv: null,\n\n    /**\n     * Property: baseLayers\n     * {Array(Object)}\n     */\n    baseLayers: null,\n\n\n    /**\n     * Property: dataLbl\n     * {DOMElement}\n     */\n    dataLbl: null,\n\n    /**\n     * Property: dataLayersDiv\n     * {DOMElement}\n     */\n    dataLayersDiv: null,\n\n    /**\n     * Property: dataLayers\n     * {Array(Object)}\n     */\n    dataLayers: null,\n\n\n    /**\n     * Property: minimizeDiv\n     * {DOMElement}\n     */\n    minimizeDiv: null,\n\n    /**\n     * Property: maximizeDiv\n     * {DOMElement}\n     */\n    maximizeDiv: null,\n\n    /**\n     * APIProperty: ascending\n     * {Boolean}\n     */\n    ascending: true,\n\n    /**\n     * Constructor: OpenLayers.Control.LayerSwitcher\n     *\n     * Parameters:\n     * options - {Object}\n     */\n    initialize: function(options) {\n        OpenLayers.Control.prototype.initialize.apply(this, arguments);\n        this.layerStates = [];\n    },\n\n    /**\n     * APIMethod: destroy\n     */\n    destroy: function() {\n\n        //clear out layers info and unregister their events\n        this.clearLayersArray(\"base\");\n        this.clearLayersArray(\"data\");\n\n        this.map.events.un({\n            buttonclick: this.onButtonClick,\n            addlayer: this.redraw,\n            changelayer: this.redraw,\n            removelayer: this.redraw,\n            changebaselayer: this.redraw,\n            scope: this\n        });\n        this.events.unregister(\"buttonclick\", this, this.onButtonClick);\n\n        OpenLayers.Control.prototype.destroy.apply(this, arguments);\n    },\n\n    /**\n     * Method: setMap\n     *\n     * Properties:\n     * map - {<OpenLayers.Map>}\n     */\n    setMap: function(map) {\n        OpenLayers.Control.prototype.setMap.apply(this, arguments);\n\n        this.map.events.on({\n            addlayer: this.redraw,\n            changelayer: this.redraw,\n            removelayer: this.redraw,\n            changebaselayer: this.redraw,\n            scope: this\n        });\n        if (this.outsideViewport) {\n            this.events.attachToElement(this.div);\n            this.events.register(\"buttonclick\", this, this.onButtonClick);\n        } else {\n            this.map.events.register(\"buttonclick\", this, this.onButtonClick);\n        }\n    },\n\n    /**\n     * Method: draw\n     *\n     * Returns:\n     * {DOMElement} A reference to the DIV DOMElement containing the\n     *     switcher tabs.\n     */\n    draw: function() {\n        OpenLayers.Control.prototype.draw.apply(this);\n\n        // create layout divs\n        this.loadContents();\n\n        // set mode to minimize\n        if(!this.outsideViewport) {\n            this.minimizeControl();\n        }\n\n        // populate div with current info\n        this.redraw();\n\n        return this.div;\n    },\n\n    /**\n     * Method: onButtonClick\n     *\n     * Parameters:\n     * evt - {Event}\n     */\n    onButtonClick: function(evt) {\n        var button = evt.buttonElement;\n        if (button === this.minimizeDiv) {\n            this.minimizeControl();\n        } else if (button === this.maximizeDiv) {\n            this.maximizeControl();\n        } else if (button._layerSwitcher === this.id) {\n            if (button[\"for\"]) {\n                button = document.getElementById(button[\"for\"]);\n            }\n            if (!button.disabled) {\n                if (button.type == \"radio\") {\n                    button.checked = true;\n                    this.map.setBaseLayer(this.map.getLayer(button._layer));\n                } else {\n                    button.checked = !button.checked;\n                    this.updateMap();\n                }\n            }\n        }\n    },\n\n    /**\n     * Method: clearLayersArray\n     * User specifies either \"base\" or \"data\". we then clear all the\n     *     corresponding listeners, the div, and reinitialize a new array.\n     *\n     * Parameters:\n     * layersType - {String}\n     */\n    clearLayersArray: function(layersType) {\n        this[layersType + \"LayersDiv\"].innerHTML = \"\";\n        this[layersType + \"Layers\"] = [];\n    },\n\n\n    /**\n     * Method: checkRedraw\n     * Checks if the layer state has changed since the last redraw() call.\n     *\n     * Returns:\n     * {Boolean} The layer state changed since the last redraw() call.\n     */\n    checkRedraw: function() {\n        if ( !this.layerStates.length ||\n             (this.map.layers.length != this.layerStates.length) ) {\n            return true;\n        }\n\n        for (var i = 0, len = this.layerStates.length; i < len; i++) {\n            var layerState = this.layerStates[i];\n            var layer = this.map.layers[i];\n            if ( (layerState.name != layer.name) ||\n                 (layerState.inRange != layer.inRange) ||\n                 (layerState.id != layer.id) ||\n                 (layerState.visibility != layer.visibility) ) {\n                return true;\n            }\n        }\n\n        return false;\n    },\n\n    /**\n     * Method: redraw\n     * Goes through and takes the current state of the Map and rebuilds the\n     *     control to display that state. Groups base layers into a\n     *     radio-button group and lists each data layer with a checkbox.\n     *\n     * Returns:\n     * {DOMElement} A reference to the DIV DOMElement containing the control\n     */\n    redraw: function() {\n        //if the state hasn't changed since last redraw, no need\n        // to do anything. Just return the existing div.\n        if (!this.checkRedraw()) {\n            return this.div;\n        }\n\n        //clear out previous layers\n        this.clearLayersArray(\"base\");\n        this.clearLayersArray(\"data\");\n\n        var containsOverlays = false;\n        var containsBaseLayers = false;\n\n        // Save state -- for checking layer if the map state changed.\n        // We save this before redrawing, because in the process of redrawing\n        // we will trigger more visibility changes, and we want to not redraw\n        // and enter an infinite loop.\n        var len = this.map.layers.length;\n        this.layerStates = new Array(len);\n        for (var i=0; i <len; i++) {\n            var layer = this.map.layers[i];\n            this.layerStates[i] = {\n                'name': layer.name,\n                'visibility': layer.visibility,\n                'inRange': layer.inRange,\n                'id': layer.id\n            };\n        }\n\n        var layers = this.map.layers.slice();\n        if (!this.ascending) { layers.reverse(); }\n        for(var i=0, len=layers.length; i<len; i++) {\n            var layer = layers[i];\n            var baseLayer = layer.isBaseLayer;\n\n            if (layer.displayInLayerSwitcher) {\n\n                if (baseLayer) {\n                    containsBaseLayers = true;\n                } else {\n                    containsOverlays = true;\n                }\n\n                // only check a baselayer if it is *the* baselayer, check data\n                //  layers if they are visible\n                var checked = (baseLayer) ? (layer == this.map.baseLayer)\n                                          : layer.getVisibility();\n\n                // create input element\n                var inputElem = document.createElement(\"input\"),\n                    // The input shall have an id attribute so we can use\n                    // labels to interact with them.\n                    inputId = OpenLayers.Util.createUniqueID(\n                        this.id + \"_input_\"\n                    );\n\n                inputElem.id = inputId;\n                inputElem.name = (baseLayer) ? this.id + \"_baseLayers\" : layer.name;\n                inputElem.type = (baseLayer) ? \"radio\" : \"checkbox\";\n                inputElem.value = layer.name;\n                inputElem.checked = checked;\n                inputElem.defaultChecked = checked;\n                inputElem.className = \"olButton\";\n                inputElem._layer = layer.id;\n                inputElem._layerSwitcher = this.id;\n\n                if (!baseLayer && !layer.inRange) {\n                    inputElem.disabled = true;\n                }\n\n                // create span\n                var labelSpan = document.createElement(\"label\");\n                // this isn't the DOM attribute 'for', but an arbitrary name we\n                // use to find the appropriate input element in <onButtonClick>\n                labelSpan[\"for\"] = inputElem.id;\n                OpenLayers.Element.addClass(labelSpan, \"labelSpan olButton\");\n                labelSpan._layer = layer.id;\n                labelSpan._layerSwitcher = this.id;\n                if (!baseLayer && !layer.inRange) {\n                    labelSpan.style.color = \"gray\";\n                }\n                labelSpan.innerHTML = layer.name;\n                labelSpan.style.verticalAlign = (baseLayer) ? \"bottom\"\n                                                            : \"baseline\";\n                // create line break\n                var br = document.createElement(\"br\");\n\n\n                var groupArray = (baseLayer) ? this.baseLayers\n                                             : this.dataLayers;\n                groupArray.push({\n                    'layer': layer,\n                    'inputElem': inputElem,\n                    'labelSpan': labelSpan\n                });\n\n\n                var groupDiv = (baseLayer) ? this.baseLayersDiv\n                                           : this.dataLayersDiv;\n                groupDiv.appendChild(inputElem);\n                groupDiv.appendChild(labelSpan);\n                groupDiv.appendChild(br);\n            }\n        }\n\n        // if no overlays, dont display the overlay label\n        this.dataLbl.style.display = (containsOverlays) ? \"\" : \"none\";\n\n        // if no baselayers, dont display the baselayer label\n        this.baseLbl.style.display = (containsBaseLayers) ? \"\" : \"none\";\n\n        return this.div;\n    },\n\n    /**\n     * Method: updateMap\n     * Cycles through the loaded data and base layer input arrays and makes\n     *     the necessary calls to the Map object such that that the map's\n     *     visual state corresponds to what the user has selected in\n     *     the control.\n     */\n    updateMap: function() {\n\n        // set the newly selected base layer\n        for(var i=0, len=this.baseLayers.length; i<len; i++) {\n            var layerEntry = this.baseLayers[i];\n            if (layerEntry.inputElem.checked) {\n                this.map.setBaseLayer(layerEntry.layer, false);\n            }\n        }\n\n        // set the correct visibilities for the overlays\n        for(var i=0, len=this.dataLayers.length; i<len; i++) {\n            var layerEntry = this.dataLayers[i];\n            layerEntry.layer.setVisibility(layerEntry.inputElem.checked);\n        }\n\n    },\n\n    /**\n     * Method: maximizeControl\n     * Set up the labels and divs for the control\n     *\n     * Parameters:\n     * e - {Event}\n     */\n    maximizeControl: function(e) {\n\n        // set the div's width and height to empty values, so\n        // the div dimensions can be controlled by CSS\n        this.div.style.width = \"\";\n        this.div.style.height = \"\";\n\n        this.showControls(false);\n\n        if (e != null) {\n            OpenLayers.Event.stop(e);\n        }\n    },\n\n    /**\n     * Method: minimizeControl\n     * Hide all the contents of the control, shrink the size,\n     *     add the maximize icon\n     *\n     * Parameters:\n     * e - {Event}\n     */\n    minimizeControl: function(e) {\n\n        // to minimize the control we set its div's width\n        // and height to 0px, we cannot just set \"display\"\n        // to \"none\" because it would hide the maximize\n        // div\n        this.div.style.width = \"0px\";\n        this.div.style.height = \"0px\";\n\n        this.showControls(true);\n\n        if (e != null) {\n            OpenLayers.Event.stop(e);\n        }\n    },\n\n    /**\n     * Method: showControls\n     * Hide/Show all LayerSwitcher controls depending on whether we are\n     *     minimized or not\n     *\n     * Parameters:\n     * minimize - {Boolean}\n     */\n    showControls: function(minimize) {\n\n        this.maximizeDiv.style.display = minimize ? \"\" : \"none\";\n        this.minimizeDiv.style.display = minimize ? \"none\" : \"\";\n\n        this.layersDiv.style.display = minimize ? \"none\" : \"\";\n    },\n\n    /**\n     * Method: loadContents\n     * Set up the labels and divs for the control\n     */\n    loadContents: function() {\n\n        // layers list div\n        this.layersDiv = document.createElement(\"div\");\n        this.layersDiv.id = this.id + \"_layersDiv\";\n        OpenLayers.Element.addClass(this.layersDiv, \"layersDiv\");\n\n        this.baseLbl = document.createElement(\"div\");\n        this.baseLbl.innerHTML = OpenLayers.i18n(\"Base Layer\");\n        OpenLayers.Element.addClass(this.baseLbl, \"baseLbl\");\n\n        this.baseLayersDiv = document.createElement(\"div\");\n        OpenLayers.Element.addClass(this.baseLayersDiv, \"baseLayersDiv\");\n\n        this.dataLbl = document.createElement(\"div\");\n        this.dataLbl.innerHTML = OpenLayers.i18n(\"Overlays\");\n        OpenLayers.Element.addClass(this.dataLbl, \"dataLbl\");\n\n        this.dataLayersDiv = document.createElement(\"div\");\n        OpenLayers.Element.addClass(this.dataLayersDiv, \"dataLayersDiv\");\n\n        if (this.ascending) {\n            this.layersDiv.appendChild(this.baseLbl);\n            this.layersDiv.appendChild(this.baseLayersDiv);\n            this.layersDiv.appendChild(this.dataLbl);\n            this.layersDiv.appendChild(this.dataLayersDiv);\n        } else {\n            this.layersDiv.appendChild(this.dataLbl);\n            this.layersDiv.appendChild(this.dataLayersDiv);\n            this.layersDiv.appendChild(this.baseLbl);\n            this.layersDiv.appendChild(this.baseLayersDiv);\n        }\n\n        this.div.appendChild(this.layersDiv);\n\n        // maximize button div\n        var img = OpenLayers.Util.getImageLocation('layer-switcher-maximize.png');\n        this.maximizeDiv = OpenLayers.Util.createAlphaImageDiv(\n                                    \"OpenLayers_Control_MaximizeDiv\",\n                                    null,\n                                    null,\n                                    img,\n                                    \"absolute\");\n        OpenLayers.Element.addClass(this.maximizeDiv, \"maximizeDiv olButton\");\n        this.maximizeDiv.style.display = \"none\";\n\n        this.div.appendChild(this.maximizeDiv);\n\n        // minimize button div\n        var img = OpenLayers.Util.getImageLocation('layer-switcher-minimize.png');\n        this.minimizeDiv = OpenLayers.Util.createAlphaImageDiv(\n                                    \"OpenLayers_Control_MinimizeDiv\",\n                                    null,\n                                    null,\n                                    img,\n                                    \"absolute\");\n        OpenLayers.Element.addClass(this.minimizeDiv, \"minimizeDiv olButton\");\n        this.minimizeDiv.style.display = \"none\";\n\n        this.div.appendChild(this.minimizeDiv);\n    },\n\n    CLASS_NAME: \"OpenLayers.Control.LayerSwitcher\"\n});\n/* ======================================================================\n    OpenLayers/Handler/Pinch.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Handler.js\n */\n\n/**\n * Class: OpenLayers.Handler.Pinch\n * The pinch handler is used to deal with sequences of browser events related\n *     to pinch gestures. The handler is used by controls that want to know\n *     when a pinch sequence begins, when a pinch is happening, and when it has\n *     finished.\n *\n * Controls that use the pinch handler typically construct it with callbacks\n *     for 'start', 'move', and 'done'.  Callbacks for these keys are\n *     called when the pinch begins, with each change, and when the pinch is\n *     done.\n *\n * Create a new pinch handler with the <OpenLayers.Handler.Pinch> constructor.\n *\n * Inherits from:\n *  - <OpenLayers.Handler>\n */\nOpenLayers.Handler.Pinch = OpenLayers.Class(OpenLayers.Handler, {\n\n    /**\n     * Property: started\n     * {Boolean} When a touchstart event is received, we want to record it,\n     *     but not set 'pinching' until the touchmove get started after\n     *     starting.\n     */\n    started: false,\n\n    /**\n     * Property: stopDown\n     * {Boolean} Stop propagation of touchstart events from getting to\n     *     listeners on the same element. Default is false.\n     */\n    stopDown: false,\n\n    /**\n     * Property: pinching\n     * {Boolean}\n     */\n    pinching: false,\n\n    /**\n     * Property: last\n     * {Object} Object that store informations related to pinch last touch.\n     */\n    last: null,\n\n    /**\n     * Property: start\n     * {Object} Object that store informations related to pinch touchstart.\n     */\n    start: null,\n\n    /**\n     * Constructor: OpenLayers.Handler.Pinch\n     * Returns OpenLayers.Handler.Pinch\n     *\n     * Parameters:\n     * control - {<OpenLayers.Control>} The control that is making use of\n     *     this handler.  If a handler is being used without a control, the\n     *     handlers setMap method must be overridden to deal properly with\n     *     the map.\n     * callbacks - {Object} An object containing functions to be called when\n     *     the pinch operation start, change, or is finished. The callbacks\n     *     should expect to receive an object argument, which contains\n     *     information about scale, distance, and position of touch points.\n     * options - {Object}\n     */\n\n    /**\n     * Method: touchstart\n     * Handle touchstart events\n     *\n     * Parameters:\n     * evt - {Event}\n     *\n     * Returns:\n     * {Boolean} Let the event propagate.\n     */\n    touchstart: function(evt) {\n        var propagate = true;\n        this.pinching = false;\n        if (OpenLayers.Event.isMultiTouch(evt)) {\n            this.started = true;\n            this.last = this.start = {\n                distance: this.getDistance(evt.touches),\n                delta: 0,\n                scale: 1\n            };\n            this.callback(\"start\", [evt, this.start]);\n            propagate = !this.stopDown;\n        } else if (this.started) {\n            // Some webkit versions send fake single-touch events during\n            // multitouch, which cause the drag handler to trigger\n            return false;\n        } else {\n            this.started = false;\n            this.start = null;\n            this.last = null;\n        }\n        // prevent document dragging\n        OpenLayers.Event.preventDefault(evt);\n        return propagate;\n    },\n\n    /**\n     * Method: touchmove\n     * Handle touchmove events\n     *\n     * Parameters:\n     * evt - {Event}\n     *\n     * Returns:\n     * {Boolean} Let the event propagate.\n     */\n    touchmove: function(evt) {\n        if (this.started && OpenLayers.Event.isMultiTouch(evt)) {\n            this.pinching = true;\n            var current = this.getPinchData(evt);\n            this.callback(\"move\", [evt, current]);\n            this.last = current;\n            // prevent document dragging\n            OpenLayers.Event.stop(evt);\n        } else if (this.started) {\n            // Some webkit versions send fake single-touch events during\n            // multitouch, which cause the drag handler to trigger\n            return false;\n        }\n        return true;\n    },\n\n    /**\n     * Method: touchend\n     * Handle touchend events\n     *\n     * Parameters:\n     * evt - {Event}\n     *\n     * Returns:\n     * {Boolean} Let the event propagate.\n     */\n    touchend: function(evt) {\n        if (this.started && !OpenLayers.Event.isMultiTouch(evt)) {\n            this.started = false;\n            this.pinching = false;\n            this.callback(\"done\", [evt, this.start, this.last]);\n            this.start = null;\n            this.last = null;\n            return false;\n        }\n        return true;\n    },\n\n    /**\n     * Method: activate\n     * Activate the handler.\n     *\n     * Returns:\n     * {Boolean} The handler was successfully activated.\n     */\n    activate: function() {\n        var activated = false;\n        if (OpenLayers.Handler.prototype.activate.apply(this, arguments)) {\n            this.pinching = false;\n            activated = true;\n        }\n        return activated;\n    },\n\n    /**\n     * Method: deactivate\n     * Deactivate the handler.\n     *\n     * Returns:\n     * {Boolean} The handler was successfully deactivated.\n     */\n    deactivate: function() {\n        var deactivated = false;\n        if (OpenLayers.Handler.prototype.deactivate.apply(this, arguments)) {\n            this.started = false;\n            this.pinching = false;\n            this.start = null;\n            this.last = null;\n            deactivated = true;\n        }\n        return deactivated;\n    },\n\n    /**\n     * Method: getDistance\n     * Get the distance in pixels between two touches.\n     *\n     * Parameters:\n     * touches - {Array(Object)}\n     *\n     * Returns:\n     * {Number} The distance in pixels.\n     */\n    getDistance: function(touches) {\n        var t0 = touches[0];\n        var t1 = touches[1];\n        return Math.sqrt(\n            Math.pow(t0.olClientX - t1.olClientX, 2) +\n            Math.pow(t0.olClientY - t1.olClientY, 2)\n        );\n    },\n\n\n    /**\n     * Method: getPinchData\n     * Get informations about the pinch event.\n     *\n     * Parameters:\n     * evt - {Event}\n     *\n     * Returns:\n     * {Object} Object that contains data about the current pinch.\n     */\n    getPinchData: function(evt) {\n        var distance = this.getDistance(evt.touches);\n        var scale = distance / this.start.distance;\n        return {\n            distance: distance,\n            delta: this.last.distance - distance,\n            scale: scale\n        };\n    },\n\n    CLASS_NAME: \"OpenLayers.Handler.Pinch\"\n});\n\n/* ======================================================================\n    OpenLayers/Control/PinchZoom.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Handler/Pinch.js\n */\n\n/**\n * Class: OpenLayers.Control.PinchZoom\n *\n * Inherits:\n *  - <OpenLayers.Control>\n */\nOpenLayers.Control.PinchZoom = OpenLayers.Class(OpenLayers.Control, {\n\n    /** \n     * Property: type\n     * {OpenLayers.Control.TYPES}\n     */\n    type: OpenLayers.Control.TYPE_TOOL,\n\n    /**\n     * Property: pinchOrigin\n     * {Object} Cached object representing the pinch start (in pixels).\n     */\n    pinchOrigin: null,    \n    \n    /**\n     * Property: currentCenter\n     * {Object} Cached object representing the latest pinch center (in pixels).\n     */\n    currentCenter: null,    \n\n    /**\n     * APIProperty: autoActivate\n     * {Boolean} Activate the control when it is added to a map.  Default is\n     *     true.\n     */\n    autoActivate: true,\n\n    /**\n     * APIProperty: preserveCenter\n     * {Boolean} Set this to true if you don't want the map center to change\n     *     while pinching. For example you may want to set preserveCenter to\n     *     true when the user location is being watched and you want to preserve\n     *     the user location at the center of the map even if he zooms in or\n     *     out using pinch. This property's value can be changed any time on an\n     *     existing instance. Default is false.\n     */\n    preserveCenter: false,\n    \n    /**\n     * APIProperty: handlerOptions\n     * {Object} Used to set non-default properties on the pinch handler\n     */\n\n    /**\n     * Constructor: OpenLayers.Control.PinchZoom\n     * Create a control for zooming with pinch gestures.  This works on devices\n     *     with multi-touch support.\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *                    the control\n     */\n    initialize: function(options) {\n        OpenLayers.Control.prototype.initialize.apply(this, arguments);\n        this.handler = new OpenLayers.Handler.Pinch(this, {\n            start: this.pinchStart,\n            move: this.pinchMove,\n            done: this.pinchDone\n        }, this.handlerOptions);\n    },\n    \n    /**\n     * Method: pinchStart\n     *\n     * Parameters:\n     * evt - {Event}\n     * pinchData - {Object} pinch data object related to the current touchmove\n     *     of the pinch gesture. This give us the current scale of the pinch.\n     */\n    pinchStart: function(evt, pinchData) {\n        var xy = (this.preserveCenter) ?\n            this.map.getPixelFromLonLat(this.map.getCenter()) : evt.xy;\n        this.pinchOrigin = xy;\n        this.currentCenter = xy;\n    },\n    \n    /**\n     * Method: pinchMove\n     *\n     * Parameters:\n     * evt - {Event}\n     * pinchData - {Object} pinch data object related to the current touchmove\n     *     of the pinch gesture. This give us the current scale of the pinch.\n     */\n    pinchMove: function(evt, pinchData) {\n        var scale = pinchData.scale;\n        var containerOrigin = this.map.layerContainerOriginPx;\n        var pinchOrigin = this.pinchOrigin;\n        var current = (this.preserveCenter) ?\n            this.map.getPixelFromLonLat(this.map.getCenter()) : evt.xy;\n\n        var dx = Math.round((containerOrigin.x + current.x - pinchOrigin.x) + (scale - 1) * (containerOrigin.x - pinchOrigin.x));\n        var dy = Math.round((containerOrigin.y + current.y - pinchOrigin.y) + (scale - 1) * (containerOrigin.y - pinchOrigin.y));\n\n        this.map.applyTransform(dx, dy, scale);\n        this.currentCenter = current;\n    },\n\n    /**\n     * Method: pinchDone\n     *\n     * Parameters:\n     * evt - {Event}\n     * start - {Object} pinch data object related to the touchstart event that\n     *     started the pinch gesture.\n     * last - {Object} pinch data object related to the last touchmove event\n     *     of the pinch gesture. This give us the final scale of the pinch.\n     */\n    pinchDone: function(evt, start, last) {\n        this.map.applyTransform();\n        var zoom = this.map.getZoomForResolution(this.map.getResolution() / last.scale, true);\n        if (zoom !== this.map.getZoom() || !this.currentCenter.equals(this.pinchOrigin)) {\n            var resolution = this.map.getResolutionForZoom(zoom);\n\n            var location = this.map.getLonLatFromPixel(this.pinchOrigin);\n            var zoomPixel = this.currentCenter;        \n            var size = this.map.getSize();\n\n            location.lon += resolution * ((size.w / 2) - zoomPixel.x);\n            location.lat -= resolution * ((size.h / 2) - zoomPixel.y);\n\n            // Force a reflow before calling setCenter. This is to work\n            // around an issue occurring in iOS.\n            //\n            // See https://github.com/openlayers/ol2/pull/351.\n            //\n            // Without a reflow setting the layer container div's top left\n            // style properties to \"0px\" - as done in Map.moveTo when zoom\n            // is changed - won't actually correctly reposition the layer\n            // container div.\n            //\n            // Also, we need to use a statement that the Google Closure\n            // compiler won't optimize away.\n            this.map.div.clientWidth = this.map.div.clientWidth;\n\n            this.map.setCenter(location, zoom);\n        }\n    },\n\n    CLASS_NAME: \"OpenLayers.Control.PinchZoom\"\n\n});\n/* ======================================================================\n    OpenLayers/Control/TouchNavigation.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Control/DragPan.js\n * @requires OpenLayers/Control/PinchZoom.js\n * @requires OpenLayers/Handler/Click.js\n */\n\n/**\n * Class: OpenLayers.Control.TouchNavigation\n * The navigation control handles map browsing with touch events (dragging,\n *     double-tapping, tap with two fingers, and pinch zoom).  Create a new \n *     control with the <OpenLayers.Control.TouchNavigation> constructor.\n *\n * If you’re only targeting touch enabled devices with your mapping application,\n *     you can create a map with only a TouchNavigation control. The \n *     <OpenLayers.Control.Navigation> control is mobile ready by default, but \n *     you can generate a smaller build of the library by only including this\n *     touch navigation control if you aren't concerned about mouse interaction.\n *\n * Inherits:\n *  - <OpenLayers.Control>\n */\nOpenLayers.Control.TouchNavigation = OpenLayers.Class(OpenLayers.Control, {\n\n    /**\n     * Property: dragPan\n     * {<OpenLayers.Control.DragPan>}\n     */\n    dragPan: null,\n\n    /**\n     * APIProperty: dragPanOptions\n     * {Object} Options passed to the DragPan control.\n     */\n    dragPanOptions: null,\n\n    /**\n     * Property: pinchZoom\n     * {<OpenLayers.Control.PinchZoom>}\n     */\n    pinchZoom: null,\n\n    /**\n     * APIProperty: pinchZoomOptions\n     * {Object} Options passed to the PinchZoom control.\n     */\n    pinchZoomOptions: null,\n\n    /**\n     * APIProperty: clickHandlerOptions\n     * {Object} Options passed to the Click handler.\n     */\n    clickHandlerOptions: null,\n\n    /**\n     * APIProperty: documentDrag\n     * {Boolean} Allow panning of the map by dragging outside map viewport.\n     *     Default is false.\n     */\n    documentDrag: false,\n\n    /**\n     * APIProperty: autoActivate\n     * {Boolean} Activate the control when it is added to a map.  Default is\n     *     true.\n     */\n    autoActivate: true,\n\n    /**\n     * Constructor: OpenLayers.Control.TouchNavigation\n     * Create a new navigation control\n     *\n     * Parameters:\n     * options - {Object} An optional object whose properties will be set on\n     *                    the control\n     */\n    initialize: function(options) {\n        this.handlers = {};\n        OpenLayers.Control.prototype.initialize.apply(this, arguments);\n    },\n\n    /**\n     * Method: destroy\n     * The destroy method is used to perform any clean up before the control\n     * is dereferenced.  Typically this is where event listeners are removed\n     * to prevent memory leaks.\n     */\n    destroy: function() {\n        this.deactivate();\n        if(this.dragPan) {\n            this.dragPan.destroy();\n        }\n        this.dragPan = null;\n        if (this.pinchZoom) {\n            this.pinchZoom.destroy();\n            delete this.pinchZoom;\n        }\n        OpenLayers.Control.prototype.destroy.apply(this,arguments);\n    },\n\n    /**\n     * Method: activate\n     */\n    activate: function() {\n        if(OpenLayers.Control.prototype.activate.apply(this,arguments)) {\n            this.dragPan.activate();\n            this.handlers.click.activate();\n            this.pinchZoom.activate();\n            return true;\n        }\n        return false;\n    },\n\n    /**\n     * Method: deactivate\n     */\n    deactivate: function() {\n        if(OpenLayers.Control.prototype.deactivate.apply(this,arguments)) {\n            this.dragPan.deactivate();\n            this.handlers.click.deactivate();\n            this.pinchZoom.deactivate();\n            return true;\n        }\n        return false;\n    },\n    \n    /**\n     * Method: draw\n     */\n    draw: function() {\n        var clickCallbacks = {\n            click: this.defaultClick,\n            dblclick: this.defaultDblClick\n        };\n        var clickOptions = OpenLayers.Util.extend({\n            \"double\": true,\n            stopDouble: true,\n            pixelTolerance: 2\n        }, this.clickHandlerOptions);\n        this.handlers.click = new OpenLayers.Handler.Click(\n            this, clickCallbacks, clickOptions\n        );\n        this.dragPan = new OpenLayers.Control.DragPan(\n            OpenLayers.Util.extend({\n                map: this.map,\n                documentDrag: this.documentDrag\n            }, this.dragPanOptions)\n        );\n        this.dragPan.draw();\n        this.pinchZoom = new OpenLayers.Control.PinchZoom(\n            OpenLayers.Util.extend({map: this.map}, this.pinchZoomOptions)\n        );\n    },\n\n    /**\n     * Method: defaultClick\n     *\n     * Parameters:\n     * evt - {Event}\n     */\n    defaultClick: function (evt) {\n        if(evt.lastTouches && evt.lastTouches.length == 2) {\n            this.map.zoomOut();\n        }\n    },\n\n    /**\n     * Method: defaultDblClick\n     *\n     * Parameters:\n     * evt - {Event}\n     */\n    defaultDblClick: function (evt) {\n        this.map.zoomTo(this.map.zoom + 1, evt.xy);\n    },\n\n    CLASS_NAME: \"OpenLayers.Control.TouchNavigation\"\n});\n/* ======================================================================\n    OpenLayers/Control/ModifyFeature.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Control.js\n * @requires OpenLayers/Handler/Drag.js\n * @requires OpenLayers/Handler/Keyboard.js\n */\n\n/**\n * Class: OpenLayers.Control.ModifyFeature\n * Control to modify features.  When activated, a click renders the vertices\n *     of a feature - these vertices can then be dragged.  By default, the\n *     delete key will delete the vertex under the mouse.  New features are\n *     added by dragging \"virtual vertices\" between vertices.  Create a new\n *     control with the <OpenLayers.Control.ModifyFeature> constructor.\n *\n * Inherits From:\n *  - <OpenLayers.Control>\n */\nOpenLayers.Control.ModifyFeature = OpenLayers.Class(OpenLayers.Control, {\n\n    /**\n     * APIProperty: bySegment\n     * {Boolean} If set to true, one segment at a time will be editable (the\n     *     one under the mouse cursor on hover). This supports editing much\n     *     larger geometries. This requires the rbush library\n     *     (https://github.com/mourner/rbush) for spatial indexing. Default is\n     *     false.\n     */\n    bySegment: false,\n\n    /**\n     * APIProperty: documentDrag\n     * {Boolean} If set to true, dragging vertices will continue even if the\n     *     mouse cursor leaves the map viewport. Default is false.\n     */\n    documentDrag: false,\n\n    /**\n     * APIProperty: geometryTypes\n     * {Array(String)} To restrict modification to a limited set of geometry\n     *     types, send a list of strings corresponding to the geometry class\n     *     names.\n     */\n    geometryTypes: null,\n\n    /**\n     * APIProperty: clickout\n     * {Boolean} Unselect features when clicking outside any feature.\n     *     Default is true.\n     */\n    clickout: true,\n\n    /**\n     * APIProperty: toggle\n     * {Boolean} Unselect a selected feature on click.\n     *      Default is true.\n     */\n    toggle: true,\n\n    /**\n     * APIProperty: standalone\n     * {Boolean} Set to true to create a control without SelectFeature\n     *     capabilities. Default is false.  If standalone is true, to modify\n     *     a feature, call the <selectFeature> method with the target feature.\n     *     Note that you must call the <unselectFeature> method to finish\n     *     feature modification in standalone mode (before starting to modify\n     *     another feature).\n     */\n    standalone: false,\n\n    /**\n     * Property: layer\n     * {<OpenLayers.Layer.Vector>}\n     */\n    layer: null,\n\n    /**\n     * Property: feature\n     * {<OpenLayers.Feature.Vector>} Feature currently available for modification.\n     */\n    feature: null,\n\n    /**\n     * Property: vertex\n     * {<OpenLayers.Feature.Vector>} Vertex currently being modified.\n     */\n    vertex: null,\n\n    /**\n     * Property: vertices\n     * {Array(<OpenLayers.Feature.Vector>)} Verticies currently available\n     *     for dragging.\n     */\n    vertices: null,\n\n    /**\n     * Property: virtualVertices\n     * {Array(<OpenLayers.Feature.Vector>)} Virtual vertices in the middle\n     *     of each edge.\n     */\n    virtualVertices: null,\n\n    /**\n     * Property: handlers\n     * {Object}\n     */\n    handlers: null,\n\n    /**\n     * APIProperty: deleteCodes\n     * {Array(Integer)} Keycodes for deleting verticies.  Set to null to disable\n     *     vertex deltion by keypress.  If non-null, keypresses with codes\n     *     in this array will delete vertices under the mouse. Default\n     *     is 46 and 68, the 'delete' and lowercase 'd' keys.\n     */\n    deleteCodes: null,\n\n    /**\n     * APIProperty: virtualStyle\n     * {Object} A symbolizer to be used for virtual vertices.\n     */\n    virtualStyle: null,\n\n    /**\n     * APIProperty: vertexRenderIntent\n     * {String} The renderIntent to use for vertices. If no <virtualStyle> is\n     * provided, this renderIntent will also be used for virtual vertices, with\n     * a fillOpacity and strokeOpacity of 0.3. Default is null, which means\n     * that the layer's default style will be used for vertices.\n     */\n    vertexRenderIntent: null,\n\n    /**\n     * APIProperty: mode\n     * {Integer} Bitfields specifying the modification mode. Defaults to\n     *      OpenLayers.Control.ModifyFeature.RESHAPE. To set the mode to a\n     *      combination of options, use the | operator. For example, to allow\n     *      the control to both resize and rotate features, use the following\n     *      syntax\n     * (code)\n     * control.mode = OpenLayers.Control.ModifyFeature.RESIZE |\n     *                OpenLayers.Control.ModifyFeature.ROTATE;\n     *  (end)\n     */\n    mode: null,\n\n    /**\n     * APIProperty: createVertices\n     * {Boolean} Create new vertices by dragging the virtual vertices\n     *     in the middle of each edge. Default is true.\n     */\n    createVertices: true,\n\n    /**\n     * Property: modified\n     * {Boolean} The currently selected feature has been modified.\n     */\n    modified: false,\n\n    /**\n     * Property: radiusHandle\n     * {<OpenLayers.Feature.Vector>} A handle for rotating/resizing a feature.\n     */\n    radiusHandle: null,\n\n    /**\n     * Property: dragHandle\n     * {<OpenLayers.Feature.Vector>} A handle for dragging a feature.\n     */\n    dragHandle: null,\n\n    /**\n     * APIProperty: onModificationStart\n     * {Function} *Deprecated*.  Register for \"beforefeaturemodified\" instead.\n     *     The \"beforefeaturemodified\" event is triggered on the layer before\n     *     any modification begins.\n     *\n     * Optional function to be called when a feature is selected\n     *     to be modified. The function should expect to be called with a\n     *     feature.  This could be used for example to allow to lock the\n     *     feature on server-side.\n     */\n    onModificationStart: function() {},\n\n    /**\n     * APIProperty: onModification\n     * {Function} *Deprecated*.  Register for \"featuremodified\" instead.\n     *     The \"featuremodified\" event is triggered on the layer with each\n     *     feature modification.\n     *\n     * Optional function to be called when a feature has been\n     *     modified.  The function should expect to be called with a feature.\n     */\n    onModification: function() {},\n\n    /**\n     * APIProperty: onModificationEnd\n     * {Function} *Deprecated*.  Register for \"afterfeaturemodified\" instead.\n     *     The \"afterfeaturemodified\" event is triggered on the layer after\n     *     a feature has been modified.\n     *\n     * Optional function to be called when a feature is finished\n     *     being modified.  The function should expect to be called with a\n     *     feature.\n     */\n    onModificationEnd: function() {},\n\n    /**\n     * Constructor: OpenLayers.Control.ModifyFeature\n     * Create a new modify feature control.\n     *\n     * Parameters:\n     * layer - {<OpenLayers.Layer.Vector>} Layer that contains features that\n     *     will be modified.\n     * options - {Object} Optional object whose properties will be set on the\n     *     control.\n     */\n    initialize: function(layer, options) {\n        options = options || {};\n        this.layer = layer;\n        this.vertices = [];\n        this.virtualVertices = [];\n        this.virtualStyle = OpenLayers.Util.extend({},\n            this.layer.style ||\n            this.layer.styleMap.createSymbolizer(null, options.vertexRenderIntent)\n        );\n        this.virtualStyle.fillOpacity = 0.3;\n        this.virtualStyle.strokeOpacity = 0.3;\n        this.deleteCodes = [46, 68];\n        this.mode = OpenLayers.Control.ModifyFeature.RESHAPE;\n        OpenLayers.Control.prototype.initialize.apply(this, [options]);\n        if(!(OpenLayers.Util.isArray(this.deleteCodes))) {\n            this.deleteCodes = [this.deleteCodes];\n        }\n\n        // configure the drag handler\n        var dragCallbacks = {\n            down: function(pixel) {\n                this.vertex = null;\n                var feature = this.layer.getFeatureFromEvent(\n                        this.handlers.drag.evt);\n                if (feature) {\n                    this.dragStart(feature);\n                } else if (this.clickout) {\n                    this._unselect = this.feature;\n                }\n            },\n            move: function(pixel) {\n                delete this._unselect;\n                if (this.vertex) {\n                    this.dragVertex(this.vertex, pixel);\n                }\n            },\n            up: function() {\n                this.handlers.drag.stopDown = false;\n                if (this._unselect) {\n                    this.unselectFeature(this._unselect);\n                    delete this._unselect;\n                }\n            },\n            done: function(pixel) {\n                if (this.vertex) {\n                    this.dragComplete(this.vertex);\n                }\n            }\n        };\n        var _self = this;\n        var dragOptions = {\n            documentDrag: this.documentDrag,\n            setEvent: function(evt) {\n                var feature = _self.feature;\n                _self._lastVertex = feature ?\n                                  feature.layer.getFeatureFromEvent(evt) : null;\n                OpenLayers.Handler.Drag.prototype.setEvent.apply(\n                                                               this, arguments);\n            },\n            stopDown: false\n        };\n\n        // configure the keyboard handler\n        var keyboardOptions = {\n            keydown: this.handleKeypress\n        };\n        this.handlers = {\n            keyboard: new OpenLayers.Handler.Keyboard(this, keyboardOptions),\n            drag: new OpenLayers.Handler.Drag(this, dragCallbacks, dragOptions)\n        };\n\n        if (this.bySegment) {\n            if (!window.rbush) {\n                throw new Error(\"The rbush library is required\");\n            }\n            if (!OpenLayers.Control.ModifyFeature.BySegment) {\n                throw new Error(\"OpenLayers.Control.ModifyFeature.BySegment is missing from the build\");\n            } else {\n                OpenLayers.Util.extend(this, OpenLayers.Control.ModifyFeature.BySegment);\n            }\n        }\n    },\n\n    /**\n     * Method: createVirtualVertex\n     * Create a virtual vertex in the middle of the segment.\n     *\n     * Parameters:\n     * point1 - {<OpenLayers.Geometry.Point>} First point of the segment.\n     * point2 - {<OpenLayers.Geometry.Point>} Second point of the segment.\n     *\n     * Returns:\n     * {<OpenLayers.Feature.Vector>} The virtual vertex created.\n     */\n    createVirtualVertex: function(point1, point2) {\n        var x = (point1.x + point2.x) / 2;\n        var y = (point1.y + point2.y) / 2;\n        var point = new OpenLayers.Feature.Vector(\n            new OpenLayers.Geometry.Point(x, y),\n            null, this.virtualStyle\n        );\n        point._sketch = true;\n        return point;\n    },\n\n    /**\n     * APIMethod: destroy\n     * Take care of things that are not handled in superclass.\n     */\n    destroy: function() {\n        if (this.map) {\n            this.map.events.un({\n                \"removelayer\": this.handleMapEvents,\n                \"changelayer\": this.handleMapEvents,\n                scope: this\n            });\n        }\n        this.layer = null;\n        OpenLayers.Control.prototype.destroy.apply(this, []);\n    },\n\n    /**\n     * APIMethod: activate\n     * Activate the control.\n     *\n     * Returns:\n     * {Boolean} Successfully activated the control.\n     */\n    activate: function() {\n        if (OpenLayers.Control.prototype.activate.apply(this, arguments)) {\n            this.moveLayerToTop();\n            this.map.events.on({\n                \"removelayer\": this.handleMapEvents,\n                \"changelayer\": this.handleMapEvents,\n                scope: this\n            });\n            this._lastVertex = null;\n            return this.handlers.keyboard.activate() &&\n                    this.handlers.drag.activate();\n        }\n        return false;\n    },\n\n    /**\n     * APIMethod: deactivate\n     * Deactivate the control.\n     *\n     * Returns:\n     * {Boolean} Successfully deactivated the control.\n     */\n    deactivate: function() {\n        var deactivated = false;\n        // the return from the controls is unimportant in this case\n        if(OpenLayers.Control.prototype.deactivate.apply(this, arguments)) {\n            this.moveLayerBack();\n            this.map.events.un({\n                \"removelayer\": this.handleMapEvents,\n                \"changelayer\": this.handleMapEvents,\n                scope: this\n            });\n            this.layer.removeFeatures(this.vertices, {silent: true});\n            this.layer.removeFeatures(this.virtualVertices, {silent: true});\n            this.vertices = [];\n            this.handlers.drag.deactivate();\n            this.handlers.keyboard.deactivate();\n            var feature = this.feature;\n            if (feature && feature.geometry && feature.layer) {\n                this.unselectFeature(feature);\n            }\n            deactivated = true;\n        }\n        return deactivated;\n    },\n\n    /**\n     * Method: beforeSelectFeature\n     * Called before a feature is selected.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>} The feature about to be selected.\n     */\n    beforeSelectFeature: function(feature) {\n        return this.layer.events.triggerEvent(\n            \"beforefeaturemodified\", {feature: feature}\n        );\n    },\n\n    /**\n     * APIMethod: selectFeature\n     * Select a feature for modification in standalone mode. In non-standalone\n     * mode, this method is called when a feature is selected by clicking.\n     * Register a listener to the beforefeaturemodified event and return false\n     * to prevent feature modification.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>} the selected feature.\n     */\n    selectFeature: function(feature) {\n        var indexOf = OpenLayers.Util.indexOf;\n\n        if (this.feature === feature ||\n           (this.geometryTypes && indexOf(this.geometryTypes,\n           feature.geometry.CLASS_NAME) == -1)) {\n            return;\n        }\n        if (this.beforeSelectFeature(feature) !== false) {\n            if (this.feature) {\n                this.unselectFeature(this.feature);\n            }\n            this.feature = feature;\n\n            if(indexOf(this.layer.selectedFeatures, feature) == -1){\n                this.layer.selectedFeatures.push(feature);\n            }\n\n            this.layer.drawFeature(feature, 'select');\n            this.modified = false;\n            this.resetVertices();\n            this.onModificationStart(this.feature);\n        }\n        // keep track of geometry modifications\n        var modified = feature.modified;\n        if (feature.geometry && !(modified && modified.geometry)) {\n            this._originalGeometry = feature.geometry.clone();\n        }\n    },\n\n    /**\n     * APIMethod: unselectFeature\n     * Called when the select feature control unselects a feature.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>} The unselected feature.\n     */\n    unselectFeature: function(feature) {\n        this.layer.removeFeatures(this.vertices, {silent: true});\n        this.vertices = [];\n        this.layer.destroyFeatures(this.virtualVertices, {silent: true});\n        this.virtualVertices = [];\n        if(this.dragHandle) {\n            this.layer.destroyFeatures([this.dragHandle], {silent: true});\n            delete this.dragHandle;\n        }\n        if(this.radiusHandle) {\n            this.layer.destroyFeatures([this.radiusHandle], {silent: true});\n            delete this.radiusHandle;\n        }\n        this.layer.drawFeature(this.feature, 'default');\n        this.feature = null;\n        OpenLayers.Util.removeItem(this.layer.selectedFeatures, feature);\n        this.onModificationEnd(feature);\n        this.layer.events.triggerEvent(\"afterfeaturemodified\", {\n            feature: feature,\n            modified: this.modified\n        });\n        this.modified = false;\n    },\n\n\n    /**\n     * Method: dragStart\n     * Called by the drag handler before a feature is dragged.  This method is\n     *     used to differentiate between points and vertices\n     *     of higher order geometries.\n     *\n     * Parameters:\n     * feature - {<OpenLayers.Feature.Vector>} The point or vertex about to be\n     *     dragged.\n     */\n    dragStart: function(feature) {\n        var isPoint = feature.geometry.CLASS_NAME ==\n                'OpenLayers.Geometry.Point';\n        if (!this.standalone &&\n                ((!feature._sketch && isPoint) || !feature._sketch)) {\n            if (this.toggle && this.feature === feature) {\n                // mark feature for unselection\n                this._unselect = feature;\n            }\n            this.selectFeature(feature);\n        }\n        if (this.feature &&\n                (feature._sketch || isPoint && feature === this.feature)) {\n            // feature is a drag or virtual handle or point\n            this.vertex = feature;\n            this.handlers.drag.stopDown = true;\n        }\n    },\n\n    /**\n     * Method: dragVertex\n     * Called by the drag handler with each drag move of a vertex.\n     *\n     * Parameters:\n     * vertex - {<OpenLayers.Feature.Vector>} The vertex being dragged.\n     * pixel - {<OpenLayers.Pixel>} Pixel location of the mouse event.\n     */\n    dragVertex: function(vertex, pixel) {\n        var pos = this.map.getLonLatFromViewPortPx(pixel);\n        var geom = vertex.geometry;\n        geom.move(pos.lon - geom.x, pos.lat - geom.y);\n        this.modified = true;\n        /**\n         * Five cases:\n         * 1) dragging a simple point\n         * 2) dragging a virtual vertex\n         * 3) dragging a drag handle\n         * 4) dragging a real vertex\n         * 5) dragging a radius handle\n         */\n        if(this.feature.geometry.CLASS_NAME == \"OpenLayers.Geometry.Point\") {\n            // dragging a simple point\n            this.layer.events.triggerEvent(\"vertexmodified\", {\n                vertex: vertex.geometry,\n                feature: this.feature,\n                pixel: pixel\n            });\n        } else {\n            if(vertex._index) {\n                if (vertex._index == -1) {\n                    vertex._index = OpenLayers.Util.indexOf(vertex.geometry.parent.components, vertex._next);\n                }\n                // dragging a virtual vertex\n                vertex.geometry.parent.addComponent(vertex.geometry,\n                                                    vertex._index);\n                // move from virtual to real vertex\n                delete vertex._index;\n                OpenLayers.Util.removeItem(this.virtualVertices, vertex);\n                this.vertices.push(vertex);\n            } else if(vertex == this.dragHandle) {\n                // dragging a drag handle\n                this.layer.removeFeatures(this.vertices, {silent: true});\n                this.vertices = [];\n                if(this.radiusHandle) {\n                    this.layer.destroyFeatures([this.radiusHandle], {silent: true});\n                    this.radiusHandle = null;\n                }\n            } else if(vertex !== this.radiusHandle) {\n                // dragging a real vertex\n                this.layer.events.triggerEvent(\"vertexmodified\", {\n                    vertex: vertex.geometry,\n                    feature: this.feature,\n                    pixel: pixel\n                });\n            }\n            // dragging a radius handle - no special treatment\n            if(this.virtualVertices.length > 0) {\n                this.layer.destroyFeatures(this.virtualVertices, {silent: true});\n                this.virtualVertices = [];\n            }\n            this.layer.drawFeature(this.feature, this.standalone ? undefined :\n                                            'select');\n        }\n        // keep the vertex on top so it gets the mouseout after dragging\n        // this should be removed in favor of an option to draw under or\n        // maintain node z-index\n        this.layer.drawFeature(vertex);\n    },\n\n    /**\n     * Method: dragComplete\n     * Called by the drag handler when the feature dragging is complete.\n     *\n     * Parameters:\n     * vertex - {<OpenLayers.Feature.Vector>} The vertex being dragged.\n     */\n    dragComplete: function(vertex) {\n        this.resetVertices();\n        this.setFeatureState();\n        this.onModification(this.feature);\n        this.layer.events.triggerEvent(\"featuremodified\",\n                                       {feature: this.feature});\n    },\n\n    /**\n     * Method: setFeatureState\n     * Called when the feature is modified.  If the current state is not\n     *     INSERT or DELETE, the state is set to UPDATE.\n     */\n    setFeatureState: function() {\n        if(this.feature.state != OpenLayers.State.INSERT &&\n           this.feature.state != OpenLayers.State.DELETE) {\n            this.feature.state = OpenLayers.State.UPDATE;\n            if (this.modified && this._originalGeometry) {\n                var feature = this.feature;\n                feature.modified = OpenLayers.Util.extend(feature.modified, {\n                    geometry: this._originalGeometry\n                });\n                delete this._originalGeometry;\n            }\n        }\n    },\n\n    /**\n     * Method: resetVertices\n     */\n    resetVertices: function() {\n        if(this.vertices.length > 0) {\n            this.layer.removeFeatures(this.vertices, {silent: true});\n            this.vertices = [];\n        }\n        if(this.virtualVertices.length > 0) {\n            this.layer.removeFeatures(this.virtualVertices, {silent: true});\n            this.virtualVertices = [];\n        }\n        if(this.dragHandle) {\n            this.layer.destroyFeatures([this.dragHandle], {silent: true});\n            this.dragHandle = null;\n        }\n        if(this.radiusHandle) {\n            this.layer.destroyFeatures([this.radiusHandle], {silent: true});\n            this.radiusHandle = null;\n        }\n        if(this.feature &&\n           this.feature.geometry.CLASS_NAME != \"OpenLayers.Geometry.Point\") {\n            if((this.mode & OpenLayers.Control.ModifyFeature.DRAG)) {\n                this.collectDragHandle();\n            }\n            if((this.mode & (OpenLayers.Control.ModifyFeature.ROTATE |\n                             OpenLayers.Control.ModifyFeature.RESIZE))) {\n                this.collectRadiusHandle();\n            }\n            if(this.mode & OpenLayers.Control.ModifyFeature.RESHAPE){\n                // Don't collect vertices when we're resizing\n                if (!(this.mode & OpenLayers.Control.ModifyFeature.RESIZE)){\n                    this.collectVertices();\n                }\n            }\n        }\n    },\n\n    /**\n     * Method: handleKeypress\n     * Called by the feature handler on keypress.  This is used to delete\n     *     vertices. If the <deleteCode> property is set, vertices will\n     *     be deleted when a feature is selected for modification and\n     *     the mouse is over a vertex.\n     *\n     * Parameters:\n     * evt - {Event} Keypress event.\n     */\n    handleKeypress: function(evt) {\n        var code = evt.keyCode;\n\n        // check for delete key\n        if(this.feature &&\n           OpenLayers.Util.indexOf(this.deleteCodes, code) != -1) {\n            var vertex = this._lastVertex;\n            if (vertex &&\n                    OpenLayers.Util.indexOf(this.vertices, vertex) != -1 &&\n                    !this.handlers.drag.dragging && vertex.geometry.parent) {\n                // remove the vertex\n                vertex.geometry.parent.removeComponent(vertex.geometry);\n                this.layer.events.triggerEvent(\"vertexremoved\", {\n                    vertex: vertex.geometry,\n                    feature: this.feature,\n                    pixel: evt.xy\n                });\n                this.layer.drawFeature(this.feature, this.standalone ?\n                                       undefined : 'select');\n                this.modified = true;\n                this.resetVertices();\n                this.setFeatureState();\n                this.onModification(this.feature);\n                this.layer.events.triggerEvent(\"featuremodified\",\n                                               {feature: this.feature});\n            }\n        }\n    },\n\n    /**\n     * Method: collectVertices\n     * Collect the vertices from the modifiable feature's geometry and push\n     *     them on to the control's vertices array.\n     */\n    collectVertices: function() {\n        this.vertices = [];\n        this.virtualVertices = [];\n        var control = this;\n        function collectComponentVertices(geometry) {\n            var i, vertex, component, len;\n            if(geometry.CLASS_NAME == \"OpenLayers.Geometry.Point\") {\n                vertex = new OpenLayers.Feature.Vector(geometry);\n                vertex._sketch = true;\n                vertex.renderIntent = control.vertexRenderIntent;\n                control.vertices.push(vertex);\n            } else {\n                var numVert = geometry.components.length;\n                if(geometry.CLASS_NAME == \"OpenLayers.Geometry.LinearRing\") {\n                    numVert -= 1;\n                }\n                for(i=0; i<numVert; ++i) {\n                    component = geometry.components[i];\n                    if(component.CLASS_NAME == \"OpenLayers.Geometry.Point\") {\n                        vertex = new OpenLayers.Feature.Vector(component);\n                        vertex._sketch = true;\n                        vertex.renderIntent = control.vertexRenderIntent;\n                        control.vertices.push(vertex);\n                    } else {\n                        collectComponentVertices(component);\n                    }\n                }\n\n                // add virtual vertices in the middle of each edge\n                if (control.createVertices && geometry.CLASS_NAME != \"OpenLayers.Geometry.MultiPoint\") {\n                    for(i=0, len=geometry.components.length; i<len-1; ++i) {\n                        var prevVertex = geometry.components[i];\n                        var nextVertex = geometry.components[i + 1];\n                        if(prevVertex.CLASS_NAME == \"OpenLayers.Geometry.Point\" &&\n                           nextVertex.CLASS_NAME == \"OpenLayers.Geometry.Point\") {\n                            var point = control.createVirtualVertex.call(control, prevVertex, nextVertex);\n                            // set the virtual parent and intended index\n                            point.geometry.parent = geometry;\n                            point._index = i + 1;\n                            control.virtualVertices.push(point);\n                        }\n                    }\n                }\n            }\n        }\n        collectComponentVertices.call(this, this.feature.geometry);\n        this.layer.addFeatures(this.virtualVertices, {silent: true});\n        this.layer.addFeatures(this.vertices, {silent: true});\n    },\n\n    /**\n     * Method: collectDragHandle\n     * Collect the drag handle for the selected geometry.\n     */\n    collectDragHandle: function() {\n        var geometry = this.feature.geometry;\n        var center = geometry.getBounds().getCenterLonLat();\n        var originGeometry = new OpenLayers.Geometry.Point(\n            center.lon, center.lat\n        );\n        var origin = new OpenLayers.Feature.Vector(originGeometry);\n        originGeometry.move = function(x, y) {\n            OpenLayers.Geometry.Point.prototype.move.call(this, x, y);\n            geometry.move(x, y);\n        };\n        origin._sketch = true;\n        this.dragHandle = origin;\n        this.dragHandle.renderIntent = this.vertexRenderIntent;\n        this.layer.addFeatures([this.dragHandle], {silent: true});\n    },\n\n    /**\n     * Method: collectRadiusHandle\n     * Collect the radius handle for the selected geometry.\n     */\n    collectRadiusHandle: function() {\n        var geometry = this.feature.geometry;\n        var bounds = geometry.getBounds();\n        var center = bounds.getCenterLonLat();\n        var originGeometry = new OpenLayers.Geometry.Point(\n            center.lon, center.lat\n        );\n        var radiusGeometry = new OpenLayers.Geometry.Point(\n            bounds.right, bounds.bottom\n        );\n        var radius = new OpenLayers.Feature.Vector(radiusGeometry);\n        var resize = (this.mode & OpenLayers.Control.ModifyFeature.RESIZE);\n        var reshape = (this.mode & OpenLayers.Control.ModifyFeature.RESHAPE);\n        var rotate = (this.mode & OpenLayers.Control.ModifyFeature.ROTATE);\n\n        radiusGeometry.move = function(x, y) {\n            OpenLayers.Geometry.Point.prototype.move.call(this, x, y);\n            var dx1 = this.x - originGeometry.x;\n            var dy1 = this.y - originGeometry.y;\n            var dx0 = dx1 - x;\n            var dy0 = dy1 - y;\n            if(rotate) {\n                var a0 = Math.atan2(dy0, dx0);\n                var a1 = Math.atan2(dy1, dx1);\n                var angle = a1 - a0;\n                angle *= 180 / Math.PI;\n                geometry.rotate(angle, originGeometry);\n            }\n            if(resize) {\n                var scale, ratio;\n                // 'resize' together with 'reshape' implies that the aspect\n                // ratio of the geometry will not be preserved whilst resizing\n                if (reshape) {\n                    scale = dy1 / dy0;\n                    ratio = (dx1 / dx0) / scale;\n                } else {\n                    var l0 = Math.sqrt((dx0 * dx0) + (dy0 * dy0));\n                    var l1 = Math.sqrt((dx1 * dx1) + (dy1 * dy1));\n                    scale = l1 / l0;\n                }\n                geometry.resize(scale, originGeometry, ratio);\n            }\n        };\n        radius._sketch = true;\n        this.radiusHandle = radius;\n        this.radiusHandle.renderIntent = this.vertexRenderIntent;\n        this.layer.addFeatures([this.radiusHandle], {silent: true});\n    },\n\n    /**\n     * Method: setMap\n     * Set the map property for the control and all handlers.\n     *\n     * Parameters:\n     * map - {<OpenLayers.Map>} The control's map.\n     */\n    setMap: function(map) {\n        this.handlers.drag.setMap(map);\n        OpenLayers.Control.prototype.setMap.apply(this, arguments);\n    },\n\n    /**\n     * Method: handleMapEvents\n     *\n     * Parameters:\n     * evt - {Object}\n     */\n    handleMapEvents: function(evt) {\n        if (evt.type == \"removelayer\" || evt.property == \"order\") {\n            this.moveLayerToTop();\n        }\n    },\n\n    /**\n     * Method: moveLayerToTop\n     * Moves the layer for this handler to the top, so mouse events can reach\n     * it.\n     */\n    moveLayerToTop: function() {\n        var index = Math.max(this.map.Z_INDEX_BASE['Feature'] - 1,\n            this.layer.getZIndex()) + 1;\n        this.layer.setZIndex(index);\n\n    },\n\n    /**\n     * Method: moveLayerBack\n     * Moves the layer back to the position determined by the map's layers\n     * array.\n     */\n    moveLayerBack: function() {\n        var index = this.layer.getZIndex() - 1;\n        if (index >= this.map.Z_INDEX_BASE['Feature']) {\n            this.layer.setZIndex(index);\n        } else {\n            this.map.setLayerZIndex(this.layer,\n                this.map.getLayerIndex(this.layer));\n        }\n    },\n\n    CLASS_NAME: \"OpenLayers.Control.ModifyFeature\"\n});\n\n/**\n * Constant: RESHAPE\n * {Integer} Constant used to make the control work in reshape mode\n */\nOpenLayers.Control.ModifyFeature.RESHAPE = 1;\n/**\n * Constant: RESIZE\n * {Integer} Constant used to make the control work in resize mode\n */\nOpenLayers.Control.ModifyFeature.RESIZE = 2;\n/**\n * Constant: ROTATE\n * {Integer} Constant used to make the control work in rotate mode\n */\nOpenLayers.Control.ModifyFeature.ROTATE = 4;\n/**\n * Constant: DRAG\n * {Integer} Constant used to make the control work in drag mode\n */\nOpenLayers.Control.ModifyFeature.DRAG = 8;\n/* ======================================================================\n    OpenLayers/Strategy.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/BaseTypes/Class.js\n */\n\n/**\n * Class: OpenLayers.Strategy\n * Abstract vector layer strategy class.  Not to be instantiated directly.  Use\n *     one of the strategy subclasses instead.\n */\nOpenLayers.Strategy = OpenLayers.Class({\n    \n    /**\n     * Property: layer\n     * {<OpenLayers.Layer.Vector>} The layer this strategy belongs to.\n     */\n    layer: null,\n    \n    /**\n     * Property: options\n     * {Object} Any options sent to the constructor.\n     */\n    options: null,\n\n    /** \n     * Property: active \n     * {Boolean} The control is active.\n     */\n    active: null,\n\n    /**\n     * Property: autoActivate\n     * {Boolean} The creator of the strategy can set autoActivate to false\n     *      to fully control when the protocol is activated and deactivated.\n     *      Defaults to true.\n     */\n    autoActivate: true,\n\n    /**\n     * Property: autoDestroy\n     * {Boolean} The creator of the strategy can set autoDestroy to false\n     *      to fully control when the strategy is destroyed. Defaults to\n     *      true.\n     */\n    autoDestroy: true,\n\n    /**\n     * Constructor: OpenLayers.Strategy\n     * Abstract class for vector strategies.  Create instances of a subclass.\n     *\n     * Parameters:\n     * options - {Object} Optional object whose properties will be set on the\n     *     instance.\n     */\n    initialize: function(options) {\n        OpenLayers.Util.extend(this, options);\n        this.options = options;\n        // set the active property here, so that user cannot override it\n        this.active = false;\n    },\n    \n    /**\n     * APIMethod: destroy\n     * Clean up the strategy.\n     */\n    destroy: function() {\n        this.deactivate();\n        this.layer = null;\n        this.options = null;\n    },\n\n    /**\n     * Method: setLayer\n     * Called to set the <layer> property.\n     *\n     * Parameters:\n     * layer - {<OpenLayers.Layer.Vector>}\n     */\n    setLayer: function(layer) {\n        this.layer = layer;\n    },\n    \n    /**\n     * Method: activate\n     * Activate the strategy.  Register any listeners, do appropriate setup.\n     *\n     * Returns:\n     * {Boolean} True if the strategy was successfully activated or false if\n     *      the strategy was already active.\n     */\n    activate: function() {\n        if (!this.active) {\n            this.active = true;\n            return true;\n        }\n        return false;\n    },\n    \n    /**\n     * Method: deactivate\n     * Deactivate the strategy.  Unregister any listeners, do appropriate\n     *     tear-down.\n     *\n     * Returns:\n     * {Boolean} True if the strategy was successfully deactivated or false if\n     *      the strategy was already inactive.\n     */\n    deactivate: function() {\n        if (this.active) {\n            this.active = false;\n            return true;\n        }\n        return false;\n    },\n   \n    CLASS_NAME: \"OpenLayers.Strategy\" \n});\n/* ======================================================================\n    OpenLayers/Strategy/Fixed.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n/**\n * @requires OpenLayers/Strategy.js\n */\n\n/**\n * Class: OpenLayers.Strategy.Fixed\n * A simple strategy that requests features once and never requests new data.\n *\n * Inherits from:\n *  - <OpenLayers.Strategy>\n */\nOpenLayers.Strategy.Fixed = OpenLayers.Class(OpenLayers.Strategy, {\n    \n    /**\n     * APIProperty: preload\n     * {Boolean} Load data before layer made visible. Enabling this may result\n     *   in considerable overhead if your application loads many data layers\n     *   that are not visible by default. Default is false.\n     */\n    preload: false,\n\n    /**\n     * Constructor: OpenLayers.Strategy.Fixed\n     * Create a new Fixed strategy.\n     *\n     * Parameters:\n     * options - {Object} Optional object whose properties will be set on the\n     *     instance.\n     */\n\n    /**\n     * Method: activate\n     * Activate the strategy: load data or add listener to load when visible\n     *\n     * Returns:\n     * {Boolean} True if the strategy was successfully activated or false if\n     *      the strategy was already active.\n     */\n    activate: function() {\n        var activated = OpenLayers.Strategy.prototype.activate.apply(this, arguments);\n        if(activated) {\n            this.layer.events.on({\n                \"refresh\": this.load,\n                scope: this\n            });\n            if(this.layer.visibility == true || this.preload) {\n                this.load();\n            } else {\n                this.layer.events.on({\n                    \"visibilitychanged\": this.load,\n                    scope: this\n                });\n            }\n        }\n        return activated;\n    },\n    \n    /**\n     * Method: deactivate\n     * Deactivate the strategy.  Undo what is done in <activate>.\n     * \n     * Returns:\n     * {Boolean} The strategy was successfully deactivated.\n     */\n    deactivate: function() {\n        var deactivated = OpenLayers.Strategy.prototype.deactivate.call(this);\n        if(deactivated) {\n            this.layer.events.un({\n                \"refresh\": this.load,\n                \"visibilitychanged\": this.load,\n                scope: this\n            });\n        }\n        return deactivated;\n    },\n\n    /**\n     * Method: load\n     * Tells protocol to load data and unhooks the visibilitychanged event\n     *\n     * Parameters:\n     * options - {Object} options to pass to protocol read.\n     */\n    load: function(options) {\n        var layer = this.layer;\n        layer.events.triggerEvent(\"loadstart\", {filter: layer.filter});\n        layer.protocol.read(OpenLayers.Util.applyDefaults({\n            callback: this.merge,\n            filter: layer.filter,\n            scope: this\n        }, options));\n        layer.events.un({\n            \"visibilitychanged\": this.load,\n            scope: this\n        });\n    },\n\n    /**\n     * Method: merge\n     * Add all features to the layer.\n     *     If the layer projection differs from the map projection, features\n     *     will be transformed from the layer projection to the map projection.\n     *\n     * Parameters:\n     * resp - {<OpenLayers.Protocol.Response>} The response object passed\n     *      by the protocol.\n     */\n    merge: function(resp) {\n        var layer = this.layer;\n        layer.destroyFeatures();\n        var features = resp.features;\n        if (features && features.length > 0) {\n            var remote = layer.projection;\n            var local = layer.map.getProjectionObject();\n            if(!local.equals(remote)) {\n                var geom;\n                for(var i=0, len=features.length; i<len; ++i) {\n                    geom = features[i].geometry;\n                    if(geom) {\n                        geom.transform(remote, local);\n                    }\n                }\n            }\n            layer.addFeatures(features);\n        }\n        layer.events.triggerEvent(\"loadend\", {response: resp});\n    },\n\n    CLASS_NAME: \"OpenLayers.Strategy.Fixed\"\n});\n/* ======================================================================\n    OpenLayers/Handler/Point.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Handler.js\n * @requires OpenLayers/Geometry/Point.js\n */\n\n/**\n * Class: OpenLayers.Handler.Point\n * Handler to draw a point on the map. Point is displayed on activation,\n *     moves on mouse move, and is finished on mouse up. The handler triggers\n *     callbacks for 'done', 'cancel', and 'modify'. The modify callback is\n *     called with each change in the sketch and will receive the latest point\n *     drawn.  Create a new instance with the <OpenLayers.Handler.Point>\n *     constructor.\n * \n * Inherits from:\n *  - <OpenLayers.Handler>\n */\nOpenLayers.Handler.Point = OpenLayers.Class(OpenLayers.Handler, {\n    \n    /**\n     * Property: point\n     * {<OpenLayers.Feature.Vector>} The currently drawn point\n     */\n    point: null,\n\n    /**\n     * Property: layer\n     * {<OpenLayers.Layer.Vector>} The temporary drawing layer\n     */\n    layer: null,\n    \n    /**\n     * APIProperty: multi\n     * {Boolean} Cast features to multi-part geometries before passing to the\n     *     layer.  Default is false.\n     */\n    multi: false,\n    \n    /**\n     * APIProperty: citeCompliant\n     * {Boolean} If set to true, coordinates of features drawn in a map extent\n     * crossing the date line won't exceed the world bounds. Default is false.\n     */\n    citeCompliant: false,\n    \n    /**\n     * Property: mouseDown\n     * {Boolean} The mouse is down\n     */\n    mouseDown: false,\n\n    /**\n     * Property: stoppedDown\n     * {Boolean} Indicate whether the last mousedown stopped the event\n     * propagation.\n     */\n    stoppedDown: null,\n\n    /**\n     * Property: lastDown\n     * {<OpenLayers.Pixel>} Location of the last mouse down\n     */\n    lastDown: null,\n\n    /**\n     * Property: lastUp\n     * {<OpenLayers.Pixel>}\n     */\n    lastUp: null,\n\n    /**\n     * APIProperty: persist\n     * {Boolean} Leave the feature rendered until destroyFeature is called.\n     *     Default is false.  If set to true, the feature remains rendered until\n     *     destroyFeature is called, typically by deactivating the handler or\n     *     starting another drawing.\n     */\n    persist: false,\n\n    /**\n     * APIProperty: stopDown\n     * {Boolean} Stop event propagation on mousedown. Must be false to\n     *     allow \"pan while drawing\". Defaults to false.\n     */\n    stopDown: false,\n\n    /**\n     * APIPropery: stopUp\n     * {Boolean} Stop event propagation on mouse. Must be false to\n     *     allow \"pan while dragging\". Defaults to fase.\n     */\n    stopUp: false,\n\n    /**\n     * Property: layerOptions\n     * {Object} Any optional properties to be set on the sketch layer.\n     */\n    layerOptions: null,\n    \n    /**\n     * APIProperty: pixelTolerance\n     * {Number} Maximum number of pixels between down and up (mousedown\n     *     and mouseup, or touchstart and touchend) for the handler to\n     *     add a new point. If set to an integer value, if the\n     *     displacement between down and up is great to this value\n     *     no point will be added. Default value is 5.\n     */\n    pixelTolerance: 5,\n\n    /**\n     * Property: lastTouchPx\n     * {<OpenLayers.Pixel>} The last pixel used to know the distance between\n     * two touches (for double touch).\n     */\n    lastTouchPx: null,\n\n    /**\n     * Constructor: OpenLayers.Handler.Point\n     * Create a new point handler.\n     *\n     * Parameters:\n     * control - {<OpenLayers.Control>} The control that owns this handler\n     * callbacks - {Object} An object with a properties whose values are\n     *     functions.  Various callbacks described below.\n     * options - {Object} An optional object with properties to be set on the\n     *           handler\n     *\n     * Named callbacks:\n     * create - Called when a sketch is first created.  Callback called with\n     *     the creation point geometry and sketch feature.\n     * modify - Called with each move of a vertex with the vertex (point)\n     *     geometry and the sketch feature.\n     * done - Called when the point drawing is finished.  The callback will\n     *     receive a single argument, the point geometry.\n     * cancel - Called when the handler is deactivated while drawing.  The\n     *     cancel callback will receive a geometry.\n     */\n    initialize: function(control, callbacks, options) {\n        if(!(options && options.layerOptions && options.layerOptions.styleMap)) {\n            this.style = OpenLayers.Util.extend(OpenLayers.Feature.Vector.style['default'], {});\n        }\n\n        OpenLayers.Handler.prototype.initialize.apply(this, arguments);\n    },\n    \n    /**\n     * APIMethod: activate\n     * turn on the handler\n     */\n    activate: function() {\n        if(!OpenLayers.Handler.prototype.activate.apply(this, arguments)) {\n            return false;\n        }\n        // create temporary vector layer for rendering geometry sketch\n        // TBD: this could be moved to initialize/destroy - setting visibility here\n        var options = OpenLayers.Util.extend({\n            displayInLayerSwitcher: false,\n            // indicate that the temp vector layer will never be out of range\n            // without this, resolution properties must be specified at the\n            // map-level for this temporary layer to init its resolutions\n            // correctly\n            calculateInRange: OpenLayers.Function.True,\n            wrapDateLine: this.citeCompliant\n        }, this.layerOptions);\n        this.layer = new OpenLayers.Layer.Vector(this.CLASS_NAME, options);\n        this.map.addLayer(this.layer);\n        return true;\n    },\n    \n    /**\n     * Method: createFeature\n     * Add temporary features\n     *\n     * Parameters:\n     * pixel - {<OpenLayers.Pixel>} A pixel location on the map.\n     */\n    createFeature: function(pixel) {\n        var lonlat = this.layer.getLonLatFromViewPortPx(pixel); \n        var geometry = new OpenLayers.Geometry.Point(\n            lonlat.lon, lonlat.lat\n        );\n        this.point = new OpenLayers.Feature.Vector(geometry);\n        this.callback(\"create\", [this.point.geometry, this.point]);\n        this.point.geometry.clearBounds();\n        this.layer.addFeatures([this.point], {silent: true});\n    },\n\n    /**\n     * APIMethod: deactivate\n     * turn off the handler\n     */\n    deactivate: function() {\n        if(!OpenLayers.Handler.prototype.deactivate.apply(this, arguments)) {\n            return false;\n        }\n        this.cancel();\n        // If a layer's map property is set to null, it means that that layer\n        // isn't added to the map. Since we ourself added the layer to the map\n        // in activate(), we can assume that if this.layer.map is null it means\n        // that the layer has been destroyed (as a result of map.destroy() for\n        // example.\n        if (this.layer.map != null) {\n            this.destroyFeature(true);\n            this.layer.destroy(false);\n        }\n        this.layer = null;\n        return true;\n    },\n    \n    /**\n     * Method: destroyFeature\n     * Destroy the temporary geometries\n     *\n     * Parameters:\n     * force - {Boolean} Destroy even if persist is true.\n     */\n    destroyFeature: function(force) {\n        if(this.layer && (force || !this.persist)) {\n            this.layer.destroyFeatures();\n        }\n        this.point = null;\n    },\n\n    /**\n     * Method: destroyPersistedFeature\n     * Destroy the persisted feature.\n     */\n    destroyPersistedFeature: function() {\n        var layer = this.layer;\n        if(layer && layer.features.length > 1) {\n            this.layer.features[0].destroy();\n        }\n    },\n\n    /**\n     * Method: finalize\n     * Finish the geometry and call the \"done\" callback.\n     *\n     * Parameters:\n     * cancel - {Boolean} Call cancel instead of done callback.  Default\n     *          is false.\n     */\n    finalize: function(cancel) {\n        var key = cancel ? \"cancel\" : \"done\";\n        this.mouseDown = false;\n        this.lastDown = null;\n        this.lastUp = null;\n        this.lastTouchPx = null;\n        this.callback(key, [this.geometryClone()]);\n        this.destroyFeature(cancel);\n    },\n\n    /**\n     * APIMethod: cancel\n     * Finish the geometry and call the \"cancel\" callback.\n     */\n    cancel: function() {\n        this.finalize(true);\n    },\n\n    /**\n     * Method: click\n     * Handle clicks.  Clicks are stopped from propagating to other listeners\n     *     on map.events or other dom elements.\n     * \n     * Parameters:\n     * evt - {Event} The browser event\n     *\n     * Returns: \n     * {Boolean} Allow event propagation\n     */\n    click: function(evt) {\n        OpenLayers.Event.stop(evt);\n        return false;\n    },\n\n    /**\n     * Method: dblclick\n     * Handle double-clicks.  Double-clicks are stopped from propagating to other\n     *     listeners on map.events or other dom elements.\n     * \n     * Parameters:\n     * evt - {Event} The browser event\n     *\n     * Returns: \n     * {Boolean} Allow event propagation\n     */\n    dblclick: function(evt) {\n        OpenLayers.Event.stop(evt);\n        return false;\n    },\n    \n    /**\n     * Method: modifyFeature\n     * Modify the existing geometry given a pixel location.\n     *\n     * Parameters:\n     * pixel - {<OpenLayers.Pixel>} A pixel location on the map.\n     */\n    modifyFeature: function(pixel) {\n        if(!this.point) {\n            this.createFeature(pixel);\n        }\n        var lonlat = this.layer.getLonLatFromViewPortPx(pixel); \n        this.point.geometry.x = lonlat.lon;\n        this.point.geometry.y = lonlat.lat;\n        this.callback(\"modify\", [this.point.geometry, this.point, false]);\n        this.point.geometry.clearBounds();\n        this.drawFeature();\n    },\n\n    /**\n     * Method: drawFeature\n     * Render features on the temporary layer.\n     */\n    drawFeature: function() {\n        this.layer.drawFeature(this.point, this.style);\n    },\n    \n    /**\n     * Method: getGeometry\n     * Return the sketch geometry.  If <multi> is true, this will return\n     *     a multi-part geometry.\n     *\n     * Returns:\n     * {<OpenLayers.Geometry.Point>}\n     */\n    getGeometry: function() {\n        var geometry = this.point && this.point.geometry;\n        if(geometry && this.multi) {\n            geometry = new OpenLayers.Geometry.MultiPoint([geometry]);\n        }\n        return geometry;\n    },\n\n    /**\n     * Method: geometryClone\n     * Return a clone of the relevant geometry.\n     *\n     * Returns:\n     * {<OpenLayers.Geometry>}\n     */\n    geometryClone: function() {\n        var geom = this.getGeometry();\n        return geom && geom.clone();\n    },\n\n    /**\n     * Method: mousedown\n     * Handle mousedown.\n     * \n     * Parameters:\n     * evt - {Event} The browser event\n     *\n     * Returns: \n     * {Boolean} Allow event propagation\n     */\n    mousedown: function(evt) {\n        return this.down(evt);\n    },\n\n    /**\n     * Method: touchstart\n     * Handle touchstart.\n     * \n     * Parameters:\n     * evt - {Event} The browser event\n     *\n     * Returns: \n     * {Boolean} Allow event propagation\n     */\n    touchstart: function(evt) {\n        this.startTouch();\n        this.lastTouchPx = evt.xy;\n        return this.down(evt);\n    },\n\n    /**\n     * Method: mousemove\n     * Handle mousemove.\n     * \n     * Parameters:\n     * evt - {Event} The browser event\n     *\n     * Returns: \n     * {Boolean} Allow event propagation\n     */\n    mousemove: function(evt) {\n        return this.move(evt);\n    },\n\n    /**\n     * Method: touchmove\n     * Handle touchmove.\n     * \n     * Parameters:\n     * evt - {Event} The browser event\n     *\n     * Returns: \n     * {Boolean} Allow event propagation\n     */\n    touchmove: function(evt) {\n        this.lastTouchPx = evt.xy;\n        return this.move(evt);\n    },\n\n    /**\n     * Method: mouseup\n     * Handle mouseup.\n     * \n     * Parameters:\n     * evt - {Event} The browser event\n     *\n     * Returns: \n     * {Boolean} Allow event propagation\n     */\n    mouseup: function(evt) {\n        return this.up(evt);\n    },\n\n    /**\n     * Method: touchend\n     * Handle touchend.\n     * \n     * Parameters:\n     * evt - {Event} The browser event\n     *\n     * Returns: \n     * {Boolean} Allow event propagation\n     */\n    touchend: function(evt) {\n        evt.xy = this.lastTouchPx;\n        return this.up(evt);\n    },\n  \n    /**\n     * Method: down\n     * Handle mousedown and touchstart.  Adjust the geometry and redraw.\n     * Return determines whether to propagate the event on the map.\n     * \n     * Parameters:\n     * evt - {Event} The browser event\n     *\n     * Returns: \n     * {Boolean} Allow event propagation\n     */\n    down: function(evt) {\n        this.mouseDown = true;\n        this.lastDown = evt.xy;\n        if(!this.touch) { // no point displayed until up on touch devices\n            this.modifyFeature(evt.xy);\n        }\n        this.stoppedDown = this.stopDown;\n        return !this.stopDown;\n    },\n\n    /**\n     * Method: move\n     * Handle mousemove and touchmove.  Adjust the geometry and redraw.\n     * Return determines whether to propagate the event on the map.\n     * \n     * Parameters:\n     * evt - {Event} The browser event\n     *\n     * Returns: \n     * {Boolean} Allow event propagation\n     */\n    move: function (evt) {\n        if(!this.touch // no point displayed until up on touch devices\n           && (!this.mouseDown || this.stoppedDown)) {\n            this.modifyFeature(evt.xy);\n        }\n        return true;\n    },\n\n    /**\n     * Method: up\n     * Handle mouseup and touchend.  Send the latest point in the geometry to the control.\n     * Return determines whether to propagate the event on the map.\n     *\n     * Parameters:\n     * evt - {Event} The browser event\n     *\n     * Returns: \n     * {Boolean} Allow event propagation\n     */\n    up: function (evt) {\n        this.mouseDown = false;\n        this.stoppedDown = this.stopDown;\n\n        // check keyboard modifiers\n        if(!this.checkModifiers(evt)) {\n            return true;\n        }\n        // ignore double-clicks\n        if (this.lastUp && this.lastUp.equals(evt.xy)) {\n            return true;\n        }\n        if (this.lastDown && this.passesTolerance(this.lastDown, evt.xy,\n                                                  this.pixelTolerance)) {\n            if (this.touch) {\n                this.modifyFeature(evt.xy);\n            }\n            if(this.persist) {\n                this.destroyPersistedFeature();\n            }\n            this.lastUp = evt.xy;\n            this.finalize();\n            return !this.stopUp;\n        } else {\n            return true;\n        }\n    },\n\n    /**\n     * Method: mouseout\n     * Handle mouse out.  For better user experience reset mouseDown\n     * and stoppedDown when the mouse leaves the map viewport.\n     *\n     * Parameters:\n     * evt - {Event} The browser event\n     */\n    mouseout: function(evt) {\n        if(OpenLayers.Util.mouseLeft(evt, this.map.viewPortDiv)) {\n            this.stoppedDown = this.stopDown;\n            this.mouseDown = false;\n        }\n    },\n\n    /**\n     * Method: passesTolerance\n     * Determine whether the event is within the optional pixel tolerance.\n     *\n     * Returns:\n     * {Boolean} The event is within the pixel tolerance (if specified).\n     */\n    passesTolerance: function(pixel1, pixel2, tolerance) {\n        var passes = true;\n\n        if (tolerance != null && pixel1 && pixel2) {\n            var dist = pixel1.distanceTo(pixel2);\n            if (dist > tolerance) {\n                passes = false;\n            }\n        }\n        return passes;\n    },\n    \n    CLASS_NAME: \"OpenLayers.Handler.Point\"\n});\n/* ======================================================================\n    OpenLayers/Handler/Path.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Handler/Point.js\n * @requires OpenLayers/Geometry/Point.js\n * @requires OpenLayers/Geometry/LineString.js\n */\n\n/**\n * Class: OpenLayers.Handler.Path\n * Handler to draw a path on the map.  Path is displayed on mouse down,\n * moves on mouse move, and is finished on mouse up.\n *\n * Inherits from:\n *  - <OpenLayers.Handler.Point>\n */\nOpenLayers.Handler.Path = OpenLayers.Class(OpenLayers.Handler.Point, {\n    \n    /**\n     * Property: line\n     * {<OpenLayers.Feature.Vector>}\n     */\n    line: null,\n\n    /**\n     * APIProperty: maxVertices\n     * {Number} The maximum number of vertices which can be drawn by this\n     * handler. When the number of vertices reaches maxVertices, the\n     * geometry is automatically finalized. Default is null.\n     */\n    maxVertices: null,\n\n    /**\n     * Property: doubleTouchTolerance\n     * {Number} Maximum number of pixels between two touches for\n     *     the gesture to be considered a \"finalize feature\" action.\n     *     Default is 20.\n     */\n    doubleTouchTolerance: 20,\n\n    /**\n     * Property: freehand\n     * {Boolean} In freehand mode, the handler starts the path on mouse down,\n     * adds a point for every mouse move, and finishes the path on mouse up.\n     * Outside of freehand mode, a point is added to the path on every mouse\n     * click and double-click finishes the path.\n     */\n    freehand: false,\n    \n    /**\n     * Property: freehandToggle\n     * {String} If set, freehandToggle is checked on mouse events and will set\n     * the freehand mode to the opposite of this.freehand.  To disallow\n     * toggling between freehand and non-freehand mode, set freehandToggle to\n     * null.  Acceptable toggle values are 'shiftKey', 'ctrlKey', and 'altKey'.\n     */\n    freehandToggle: 'shiftKey',\n\n    /**\n     * Property: timerId\n     * {Integer} The timer used to test the double touch.\n     */\n    timerId: null,\n\n    /**\n     * Property: redoStack\n     * {Array} Stack containing points removed with <undo>.\n     */\n    redoStack: null,\n\n    /**\n     * Constructor: OpenLayers.Handler.Path\n     * Create a new path hander\n     *\n     * Parameters:\n     * control - {<OpenLayers.Control>} The control that owns this handler\n     * callbacks - {Object} An object with a properties whose values are\n     *     functions.  Various callbacks described below.\n     * options - {Object} An optional object with properties to be set on the\n     *           handler\n     *\n     * Named callbacks:\n     * create - Called when a sketch is first created.  Callback called with\n     *     the creation point geometry and sketch feature.\n     * modify - Called with each move of a vertex with the vertex (point)\n     *     geometry and the sketch feature.\n     * point - Called as each point is added.  Receives the new point geometry.\n     * done - Called when the point drawing is finished.  The callback will\n     *     receive a single argument, the linestring geometry.\n     * cancel - Called when the handler is deactivated while drawing.  The\n     *     cancel callback will receive a geometry.\n     */\n\n    /**\n     * Method: createFeature\n     * Add temporary geometries\n     *\n     * Parameters:\n     * pixel - {<OpenLayers.Pixel>} The initial pixel location for the new\n     *     feature.\n     */\n    createFeature: function(pixel) {\n        var lonlat = this.layer.getLonLatFromViewPortPx(pixel); \n        var geometry = new OpenLayers.Geometry.Point(\n            lonlat.lon, lonlat.lat\n        );\n        this.point = new OpenLayers.Feature.Vector(geometry);\n        this.line = new OpenLayers.Feature.Vector(\n            new OpenLayers.Geometry.LineString([this.point.geometry])\n        );\n        this.callback(\"create\", [this.point.geometry, this.getSketch()]);\n        this.point.geometry.clearBounds();\n        this.layer.addFeatures([this.line, this.point], {silent: true});\n    },\n        \n    /**\n     * Method: destroyFeature\n     * Destroy temporary geometries\n     *\n     * Parameters:\n     * force - {Boolean} Destroy even if persist is true.\n     */\n    destroyFeature: function(force) {\n        OpenLayers.Handler.Point.prototype.destroyFeature.call(\n            this, force);\n        this.line = null;\n    },\n\n    /**\n     * Method: destroyPersistedFeature\n     * Destroy the persisted feature.\n     */\n    destroyPersistedFeature: function() {\n        var layer = this.layer;\n        if(layer && layer.features.length > 2) {\n            this.layer.features[0].destroy();\n        }\n    },\n\n    /**\n     * Method: removePoint\n     * Destroy the temporary point.\n     */\n    removePoint: function() {\n        if(this.point) {\n            this.layer.removeFeatures([this.point]);\n        }\n    },\n    \n    /**\n     * Method: addPoint\n     * Add point to geometry.  Send the point index to override\n     * the behavior of LinearRing that disregards adding duplicate points.\n     *\n     * Parameters:\n     * pixel - {<OpenLayers.Pixel>} The pixel location for the new point.\n     */\n    addPoint: function(pixel) {\n        this.layer.removeFeatures([this.point]);\n        var lonlat = this.layer.getLonLatFromViewPortPx(pixel); \n        this.point = new OpenLayers.Feature.Vector(\n            new OpenLayers.Geometry.Point(lonlat.lon, lonlat.lat)\n        );\n        this.line.geometry.addComponent(\n            this.point.geometry, this.line.geometry.components.length\n        );\n        this.layer.addFeatures([this.point]);\n        this.callback(\"point\", [this.point.geometry, this.getGeometry()]);\n        this.callback(\"modify\", [this.point.geometry, this.getSketch()]);\n        this.drawFeature();\n        delete this.redoStack;\n    },\n    \n    /**\n     * Method: insertXY\n     * Insert a point in the current sketch given x & y coordinates.  The new\n     *     point is inserted immediately before the most recently drawn point.\n     *\n     * Parameters:\n     * x - {Number} The x-coordinate of the point.\n     * y - {Number} The y-coordinate of the point.\n     */\n    insertXY: function(x, y) {\n        this.line.geometry.addComponent(\n            new OpenLayers.Geometry.Point(x, y), \n            this.getCurrentPointIndex()\n        );\n        this.drawFeature();\n        delete this.redoStack;\n    },\n\n    /**\n     * Method: insertDeltaXY\n     * Insert a point given offsets from the previously inserted point.\n     *\n     * Parameters:\n     * dx - {Number} The x-coordinate offset of the point.\n     * dy - {Number} The y-coordinate offset of the point.\n     */\n    insertDeltaXY: function(dx, dy) {\n        var previousIndex = this.getCurrentPointIndex() - 1;\n        var p0 = this.line.geometry.components[previousIndex];\n        if (p0 && !isNaN(p0.x) && !isNaN(p0.y)) {\n            this.insertXY(p0.x + dx, p0.y + dy);\n        }\n    },\n\n    /**\n     * Method: insertDirectionLength\n     * Insert a point in the current sketch given a direction and a length.\n     *\n     * Parameters:\n     * direction - {Number} Degrees clockwise from the positive x-axis.\n     * length - {Number} Distance from the previously drawn point.\n     */\n    insertDirectionLength: function(direction, length) {\n        direction *= Math.PI / 180;\n        var dx = length * Math.cos(direction);\n        var dy = length * Math.sin(direction);\n        this.insertDeltaXY(dx, dy);\n    },\n\n    /**\n     * Method: insertDeflectionLength\n     * Insert a point in the current sketch given a deflection and a length.\n     *     The deflection should be degrees clockwise from the previously \n     *     digitized segment.\n     *\n     * Parameters:\n     * deflection - {Number} Degrees clockwise from the previous segment.\n     * length - {Number} Distance from the previously drawn point.\n     */\n    insertDeflectionLength: function(deflection, length) {\n        var previousIndex = this.getCurrentPointIndex() - 1;\n        if (previousIndex > 0) {\n            var p1 = this.line.geometry.components[previousIndex];\n            var p0 = this.line.geometry.components[previousIndex-1];\n            var theta = Math.atan2(p1.y - p0.y, p1.x - p0.x);\n            this.insertDirectionLength(\n                (theta * 180 / Math.PI) + deflection, length\n            );\n        }\n    },\n\n    /**\n     * Method: getCurrentPointIndex\n     * \n     * Returns:\n     * {Number} The index of the most recently drawn point.\n     */\n    getCurrentPointIndex: function() {\n        return this.line.geometry.components.length - 1;\n    },\n    \n    \n    /**\n     * Method: undo\n     * Remove the most recently added point in the sketch geometry.\n     *\n     * Returns: \n     * {Boolean} A point was removed.\n     */\n    undo: function() {\n        var geometry = this.line.geometry;\n        var components = geometry.components;\n        var index = this.getCurrentPointIndex() - 1;\n        var target = components[index];\n        var undone = geometry.removeComponent(target);\n        if (undone) {\n            // On touch devices, set the current (\"mouse location\") point to\n            // match the last digitized point.\n            if (this.touch && index > 0) {\n                components = geometry.components; // safety\n                var lastpt = components[index - 1];\n                var curptidx = this.getCurrentPointIndex();\n                var curpt = components[curptidx];\n                curpt.x = lastpt.x;\n                curpt.y = lastpt.y;\n            }\n            if (!this.redoStack) {\n                this.redoStack = [];\n            }\n            this.redoStack.push(target);\n            this.drawFeature();\n        }\n        return undone;\n    },\n    \n    /**\n     * Method: redo\n     * Reinsert the most recently removed point resulting from an <undo> call.\n     *     The undo stack is deleted whenever a point is added by other means.\n     *\n     * Returns: \n     * {Boolean} A point was added.\n     */\n    redo: function() {\n        var target = this.redoStack && this.redoStack.pop();\n        if (target) {\n            this.line.geometry.addComponent(target, this.getCurrentPointIndex());\n            this.drawFeature();\n        }\n        return !!target;\n    },\n    \n    /**\n     * Method: freehandMode\n     * Determine whether to behave in freehand mode or not.\n     *\n     * Returns:\n     * {Boolean}\n     */\n    freehandMode: function(evt) {\n        return (this.freehandToggle && evt[this.freehandToggle]) ?\n                    !this.freehand : this.freehand;\n    },\n\n    /**\n     * Method: modifyFeature\n     * Modify the existing geometry given the new point\n     *\n     * Parameters:\n     * pixel - {<OpenLayers.Pixel>} The updated pixel location for the latest\n     *     point.\n     * drawing - {Boolean} Indicate if we're currently drawing.\n     */\n    modifyFeature: function(pixel, drawing) {\n        if(!this.line) {\n            this.createFeature(pixel);\n        }\n        var lonlat = this.layer.getLonLatFromViewPortPx(pixel); \n        this.point.geometry.x = lonlat.lon;\n        this.point.geometry.y = lonlat.lat;\n        this.callback(\"modify\", [this.point.geometry, this.getSketch(), drawing]);\n        this.point.geometry.clearBounds();\n        this.drawFeature();\n    },\n\n    /**\n     * Method: drawFeature\n     * Render geometries on the temporary layer.\n     */\n    drawFeature: function() {\n        this.layer.drawFeature(this.line, this.style);\n        this.layer.drawFeature(this.point, this.style);\n    },\n\n    /**\n     * Method: getSketch\n     * Return the sketch feature.\n     *\n     * Returns:\n     * {<OpenLayers.Feature.Vector>}\n     */\n    getSketch: function() {\n        return this.line;\n    },\n\n    /**\n     * Method: getGeometry\n     * Return the sketch geometry.  If <multi> is true, this will return\n     *     a multi-part geometry.\n     *\n     * Returns:\n     * {<OpenLayers.Geometry.LineString>}\n     */\n    getGeometry: function() {\n        var geometry = this.line && this.line.geometry;\n        if(geometry && this.multi) {\n            geometry = new OpenLayers.Geometry.MultiLineString([geometry]);\n        }\n        return geometry;\n    },\n\n    /**\n     * method: touchstart\n     * handle touchstart.\n     *\n     * parameters:\n     * evt - {event} the browser event\n     *\n     * returns:\n     * {boolean} allow event propagation\n     */\n    touchstart: function(evt) {\n        if (this.timerId &&\n            this.passesTolerance(this.lastTouchPx, evt.xy,\n                                 this.doubleTouchTolerance)) {\n            // double-tap, finalize the geometry\n            this.finishGeometry();\n            window.clearTimeout(this.timerId);\n            this.timerId = null;\n            return false;\n        } else {\n            if (this.timerId) {\n                window.clearTimeout(this.timerId);\n                this.timerId = null;\n            }\n            this.timerId = window.setTimeout(\n                OpenLayers.Function.bind(function() {\n                    this.timerId = null;\n                }, this), 300);\n            return OpenLayers.Handler.Point.prototype.touchstart.call(this, evt);\n        }\n    },\n\n    /**\n     * Method: down\n     * Handle mousedown and touchstart.  Add a new point to the geometry and\n     * render it. Return determines whether to propagate the event on the map.\n     * \n     * Parameters:\n     * evt - {Event} The browser event\n     *\n     * Returns: \n     * {Boolean} Allow event propagation\n     */\n    down: function(evt) {\n        var stopDown = this.stopDown;\n        if(this.freehandMode(evt)) {\n            stopDown = true;\n            if (this.touch) {\n                this.modifyFeature(evt.xy, !!this.lastUp);\n                OpenLayers.Event.stop(evt);\n            }\n        }\n        if (!this.touch && (!this.lastDown ||\n                            !this.passesTolerance(this.lastDown, evt.xy,\n                                                  this.pixelTolerance))) {\n            this.modifyFeature(evt.xy, !!this.lastUp);\n        }\n        this.mouseDown = true;\n        this.lastDown = evt.xy;\n        this.stoppedDown = stopDown;\n        return !stopDown;\n    },\n\n    /**\n     * Method: move\n     * Handle mousemove and touchmove.  Adjust the geometry and redraw.\n     * Return determines whether to propagate the event on the map.\n     * \n     * Parameters:\n     * evt - {Event} The browser event\n     *\n     * Returns: \n     * {Boolean} Allow event propagation\n     */\n    move: function (evt) {\n        if(this.stoppedDown && this.freehandMode(evt)) {\n            if(this.persist) {\n                this.destroyPersistedFeature();\n            }\n            if(this.maxVertices && this.line &&\n                    this.line.geometry.components.length === this.maxVertices) {\n                this.removePoint();\n                this.finalize();\n            } else {\n                this.addPoint(evt.xy);\n            }\n            return false;\n        }\n        if (!this.touch && (!this.mouseDown || this.stoppedDown)) {\n            this.modifyFeature(evt.xy, !!this.lastUp);\n        }\n        return true;\n    },\n    \n    /**\n     * Method: up\n     * Handle mouseup and touchend.  Send the latest point in the geometry to\n     * the control. Return determines whether to propagate the event on the map.\n     * \n     * Parameters:\n     * evt - {Event} The browser event\n     *\n     * Returns: \n     * {Boolean} Allow event propagation\n     */\n    up: function (evt) {\n        if (this.mouseDown && (!this.lastUp || !this.lastUp.equals(evt.xy))) {\n            if(this.stoppedDown && this.freehandMode(evt)) {\n                if (this.persist) {\n                    this.destroyPersistedFeature();\n                }\n                this.removePoint();\n                this.finalize();\n            } else {\n                if (this.passesTolerance(this.lastDown, evt.xy,\n                                         this.pixelTolerance)) {\n                    if (this.touch) {\n                        this.modifyFeature(evt.xy);\n                    }\n                    if(this.lastUp == null && this.persist) {\n                        this.destroyPersistedFeature();\n                    }\n                    this.addPoint(evt.xy);\n                    this.lastUp = evt.xy;\n                    if(this.line.geometry.components.length === this.maxVertices + 1) {\n                        this.finishGeometry();\n                    }\n                }\n            }\n        }\n        this.stoppedDown = this.stopDown;\n        this.mouseDown = false;\n        return !this.stopUp;\n    },\n\n    /**\n     * APIMethod: finishGeometry\n     * Finish the geometry and send it back to the control.\n     */\n    finishGeometry: function() {\n        var index = this.line.geometry.components.length - 1;\n        this.line.geometry.removeComponent(this.line.geometry.components[index]);\n        this.removePoint();\n        this.finalize();\n    },\n  \n    /**\n     * Method: dblclick \n     * Handle double-clicks.\n     * \n     * Parameters:\n     * evt - {Event} The browser event\n     *\n     * Returns: \n     * {Boolean} Allow event propagation\n     */\n    dblclick: function(evt) {\n        if(!this.freehandMode(evt)) {\n            this.finishGeometry();\n        }\n        return false;\n    },\n\n    CLASS_NAME: \"OpenLayers.Handler.Path\"\n});\n/* ======================================================================\n    OpenLayers/Handler/Polygon.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Handler/Path.js\n * @requires OpenLayers/Geometry/Polygon.js\n */\n\n/**\n * Class: OpenLayers.Handler.Polygon\n * Handler to draw a polygon on the map.  Polygon is displayed on mouse down,\n * moves on mouse move, and is finished on mouse up.\n *\n * Inherits from:\n *  - <OpenLayers.Handler.Path>\n *  - <OpenLayers.Handler>\n */\nOpenLayers.Handler.Polygon = OpenLayers.Class(OpenLayers.Handler.Path, {\n    \n    /** \n     * APIProperty: holeModifier\n     * {String} Key modifier to trigger hole digitizing.  Acceptable values are\n     *     \"altKey\", \"shiftKey\", or \"ctrlKey\".  If not set, no hole digitizing\n     *     will take place.  Default is null.\n     */\n    holeModifier: null,\n    \n    /**\n     * Property: drawingHole\n     * {Boolean} Currently drawing an interior ring.\n     */\n    drawingHole: false,\n    \n    /**\n     * Property: polygon\n     * {<OpenLayers.Feature.Vector>}\n     */\n    polygon: null,\n\n    /**\n     * Constructor: OpenLayers.Handler.Polygon\n     * Create a Polygon Handler.\n     *\n     * Parameters:\n     * control - {<OpenLayers.Control>} The control that owns this handler\n     * callbacks - {Object} An object with a properties whose values are\n     *     functions.  Various callbacks described below.\n     * options - {Object} An optional object with properties to be set on the\n     *           handler\n     *\n     * Named callbacks:\n     * create - Called when a sketch is first created.  Callback called with\n     *     the creation point geometry and sketch feature.\n     * modify - Called with each move of a vertex with the vertex (point)\n     *     geometry and the sketch feature.\n     * point - Called as each point is added.  Receives the new point geometry.\n     * done - Called when the point drawing is finished.  The callback will\n     *     receive a single argument, the polygon geometry.\n     * cancel - Called when the handler is deactivated while drawing.  The\n     *     cancel callback will receive a geometry.\n     */\n    \n    /**\n     * Method: createFeature\n     * Add temporary geometries\n     *\n     * Parameters:\n     * pixel - {<OpenLayers.Pixel>} The initial pixel location for the new\n     *     feature.\n     */\n    createFeature: function(pixel) {\n        var lonlat = this.layer.getLonLatFromViewPortPx(pixel);\n        var geometry = new OpenLayers.Geometry.Point(\n            lonlat.lon, lonlat.lat\n        );\n        this.point = new OpenLayers.Feature.Vector(geometry);\n        this.line = new OpenLayers.Feature.Vector(\n            new OpenLayers.Geometry.LinearRing([this.point.geometry])\n        );\n        this.polygon = new OpenLayers.Feature.Vector(\n            new OpenLayers.Geometry.Polygon([this.line.geometry])\n        );\n        this.callback(\"create\", [this.point.geometry, this.getSketch()]);\n        this.point.geometry.clearBounds();\n        this.layer.addFeatures([this.polygon, this.point], {silent: true});\n    },\n\n    /**\n     * Method: addPoint\n     * Add point to geometry.\n     *\n     * Parameters:\n     * pixel - {<OpenLayers.Pixel>} The pixel location for the new point.\n     */\n    addPoint: function(pixel) {\n        if(!this.drawingHole && this.holeModifier &&\n           this.evt && this.evt[this.holeModifier]) {\n            var geometry = this.point.geometry;\n            var features = this.control.layer.features;\n            var candidate, polygon;\n            // look for intersections, last drawn gets priority\n            for (var i=features.length-1; i>=0; --i) {\n                candidate = features[i].geometry;\n                if ((candidate instanceof OpenLayers.Geometry.Polygon || \n                    candidate instanceof OpenLayers.Geometry.MultiPolygon) && \n                    candidate.intersects(geometry)) {\n                    polygon = features[i];\n                    this.control.layer.removeFeatures([polygon], {silent: true});\n                    this.control.layer.events.registerPriority(\n                        \"sketchcomplete\", this, this.finalizeInteriorRing\n                    );\n                    this.control.layer.events.registerPriority(\n                        \"sketchmodified\", this, this.enforceTopology\n                    );\n                    polygon.geometry.addComponent(this.line.geometry);\n                    this.polygon = polygon;\n                    this.drawingHole = true;\n                    break;\n                }\n            }\n        }\n        OpenLayers.Handler.Path.prototype.addPoint.apply(this, arguments);\n    },\n\n    /**\n     * Method: getCurrentPointIndex\n     * \n     * Returns:\n     * {Number} The index of the most recently drawn point.\n     */\n    getCurrentPointIndex: function() {\n        return this.line.geometry.components.length - 2;\n    },\n\n    /**\n     * Method: enforceTopology\n     * Simple topology enforcement for drawing interior rings.  Ensures vertices\n     *     of interior rings are contained by exterior ring.  Other topology \n     *     rules are enforced in <finalizeInteriorRing> to allow drawing of \n     *     rings that intersect only during the sketch (e.g. a \"C\" shaped ring\n     *     that nearly encloses another ring).\n     */\n    enforceTopology: function(event) {\n        var point = event.vertex;\n        var components = this.line.geometry.components;\n        // ensure that vertices of interior ring are contained by exterior ring\n        if (!this.polygon.geometry.intersects(point)) {\n            var last = components[components.length-3];\n            point.x = last.x;\n            point.y = last.y;\n        }\n    },\n\n    /**\n     * Method: finishGeometry\n     * Finish the geometry and send it back to the control.\n     */\n    finishGeometry: function() {\n        var index = this.line.geometry.components.length - 2;\n        this.line.geometry.removeComponent(this.line.geometry.components[index]);\n        this.removePoint();\n        this.finalize();\n    },\n\n    /**\n     * Method: finalizeInteriorRing\n     * Enforces that new ring has some area and doesn't contain vertices of any\n     *     other rings.\n     */\n    finalizeInteriorRing: function() {\n        var ring = this.line.geometry;\n        // ensure that ring has some area\n        var modified = (ring.getArea() !== 0);\n        if (modified) {\n            // ensure that new ring doesn't intersect any other rings\n            var rings = this.polygon.geometry.components;\n            for (var i=rings.length-2; i>=0; --i) {\n                if (ring.intersects(rings[i])) {\n                    modified = false;\n                    break;\n                }\n            }\n            if (modified) {\n                // ensure that new ring doesn't contain any other rings\n                var target;\n                outer: for (var i=rings.length-2; i>0; --i) {\n                    var points = rings[i].components;\n                    for (var j=0, jj=points.length; j<jj; ++j) {\n                        if (ring.containsPoint(points[j])) {\n                            modified = false;\n                            break outer;\n                        }\n                    }\n                }\n            }\n        }\n        if (modified) {\n            if (this.polygon.state !== OpenLayers.State.INSERT) {\n                this.polygon.state = OpenLayers.State.UPDATE;\n            }\n        } else {\n            this.polygon.geometry.removeComponent(ring);\n        }\n        this.restoreFeature();\n        return false;\n    },\n\n    /**\n     * APIMethod: cancel\n     * Finish the geometry and call the \"cancel\" callback.\n     */\n    cancel: function() {\n        if (this.drawingHole) {\n            this.polygon.geometry.removeComponent(this.line.geometry);\n            this.restoreFeature(true);\n        }\n        return OpenLayers.Handler.Path.prototype.cancel.apply(this, arguments);\n    },\n    \n    /**\n     * Method: restoreFeature\n     * Move the feature from the sketch layer to the target layer.\n     *\n     * Properties: \n     * cancel - {Boolean} Cancel drawing.  If falsey, the \"sketchcomplete\" event\n     *     will be fired.\n     */\n    restoreFeature: function(cancel) {\n        this.control.layer.events.unregister(\n            \"sketchcomplete\", this, this.finalizeInteriorRing\n        );\n        this.control.layer.events.unregister(\n            \"sketchmodified\", this, this.enforceTopology\n        );\n        this.layer.removeFeatures([this.polygon], {silent: true});\n        this.control.layer.addFeatures([this.polygon], {silent: true});\n        this.drawingHole = false;\n        if (!cancel) {\n            // Re-trigger \"sketchcomplete\" so other listeners can do their\n            // business.  While this is somewhat sloppy (if a listener is \n            // registered with registerPriority - not common - between the start\n            // and end of a single ring drawing - very uncommon - it will be \n            // called twice).\n            // TODO: In 3.0, collapse sketch handlers into geometry specific\n            // drawing controls.\n            this.control.layer.events.triggerEvent(\n                \"sketchcomplete\", {feature : this.polygon}\n            );\n        }\n    },\n\n    /**\n     * Method: destroyFeature\n     * Destroy temporary geometries\n     *\n     * Parameters:\n     * force - {Boolean} Destroy even if persist is true.\n     */\n    destroyFeature: function(force) {\n        OpenLayers.Handler.Path.prototype.destroyFeature.call(\n            this, force);\n        this.polygon = null;\n    },\n\n    /**\n     * Method: drawFeature\n     * Render geometries on the temporary layer.\n     */\n    drawFeature: function() {\n        this.layer.drawFeature(this.polygon, this.style);\n        this.layer.drawFeature(this.point, this.style);\n    },\n    \n    /**\n     * Method: getSketch\n     * Return the sketch feature.\n     *\n     * Returns:\n     * {<OpenLayers.Feature.Vector>}\n     */\n    getSketch: function() {\n        return this.polygon;\n    },\n\n    /**\n     * Method: getGeometry\n     * Return the sketch geometry.  If <multi> is true, this will return\n     *     a multi-part geometry.\n     *\n     * Returns:\n     * {<OpenLayers.Geometry.Polygon>}\n     */\n    getGeometry: function() {\n        var geometry = this.polygon && this.polygon.geometry;\n        if(geometry && this.multi) {\n            geometry = new OpenLayers.Geometry.MultiPolygon([geometry]);\n        }\n        return geometry;\n    },\n\n    CLASS_NAME: \"OpenLayers.Handler.Polygon\"\n});\n/* ======================================================================\n    OpenLayers/Handler/RegularPolygon.js\n   ====================================================================== */\n\n/* Copyright (c) 2006-2015 by OpenLayers Contributors (see authors.txt for\n * full list of contributors). Published under the 2-clause BSD license.\n * See license.txt in the OpenLayers distribution or repository for the\n * full text of the license. */\n\n\n/**\n * @requires OpenLayers/Handler/Drag.js\n */\n\n/**\n * Class: OpenLayers.Handler.RegularPolygon\n * Handler to draw a regular polygon on the map.  Polygon is displayed on mouse\n *     down, moves or is modified on mouse move, and is finished on mouse up.\n *     The handler triggers callbacks for 'done' and 'cancel'.  Create a new\n *     instance with the <OpenLayers.Handler.RegularPolygon> constructor.\n * \n * Inherits from:\n *  - <OpenLayers.Handler.Drag>\n */\nOpenLayers.Handler.RegularPolygon = OpenLayers.Class(OpenLayers.Handler.Drag, {\n    \n    /**\n     * APIProperty: sides\n     * {Integer} Number of sides for the regular polygon.  Needs to be greater\n     *     than 2.  Defaults to 4.\n     */\n    sides: 4,\n\n    /**\n     * APIProperty: radius\n     * {Float} Optional radius in map units of the regular polygon.  If this is\n     *     set to some non-zero value, a polygon with a fixed radius will be\n     *     drawn and dragged with mose movements.  If this property is not\n     *     set, dragging changes the radius of the polygon.  Set to null by\n     *     default.\n     */\n    radius: null,\n    \n    /**\n     * APIProperty: snapAngle\n     * {Float} If set to a non-zero value, the handler will snap the polygon\n     *     rotation to multiples of the snapAngle.  Value is an angle measured\n     *     in degrees counterclockwise from the positive x-axis.  \n     */\n    snapAngle: null,\n    \n    /**\n     * APIProperty: snapToggle\n     * {String} If set, snapToggle is checked on mouse events and will set\n     *     the snap mode to the opposite of what it currently is.  To disallow\n     *     toggling between snap and non-snap mode, set freehandToggle to\n     *     null.  Acceptable toggle values are 'shiftKey', 'ctrlKey', and\n     *     'altKey'. Snap mode is only possible if this.snapAngle is set to a\n     *     non-zero value.\n     */\n    snapToggle: 'shiftKey',\n    \n    /**\n     * Property: layerOptions\n     * {Object} Any optional properties to be set on the sketch layer.\n     */\n    layerOptions: null,\n\n    /**\n     * APIProperty: persist\n     * {Boolean} Leave the feature rendered until clear is called.  Default\n     *     is false.  If set to true, the feature remains rendered until\n     *     clear is called, typically by deactivating the handler or starting\n     *     another drawing.\n     */\n    persist: false,\n\n    /**\n     * APIProperty: irregular\n     * {Boolean} Draw an irregular polygon instead of a regular polygon.\n     *     Default is false.  If true, the initial mouse down will represent\n     *     one corner of the polygon bounds and with each mouse movement, the\n     *     polygon will be stretched so the opposite corner of its bounds\n     *     follows the mouse position.  This property takes precedence over\n     *     the radius property.  If set to true, the radius property will\n     *     be ignored.\n     */\n    irregular: false,\n\n    /**\n     * APIProperty: citeCompliant\n     * {Boolean} If set to true, coordinates of features drawn in a map extent\n     * crossing the date line won't exceed the world bounds. Default is false.\n     */\n    citeCompliant: false,\n\n    /**\n     * Property: angle\n     * {Float} The angle from the origin (mouse down) to the current mouse\n     *     position, in radians.  This is measured counterclockwise from the\n     *     positive x-axis.\n     */\n    angle: null,\n\n    /**\n     * Property: fixedRadius\n     * {Boolean} The polygon has a fixed radius.  True if a radius is set before\n     *     drawing begins.  False otherwise.\n     */\n    fixedRadius: false,\n\n    /**\n     * Property: feature\n     * {<OpenLayers.Feature.Vector>} The currently drawn polygon feature\n     */\n    feature: null,\n\n    /**\n     * Property: layer\n     * {<OpenLayers.Layer.Vector>} The temporary drawing layer\n     */\n    layer: null,\n\n    /**\n     * Property: origin\n     * {<OpenLayers.Geometry.Point>} Location of the first mouse down\n     */\n    origin: null,\n\n    /**\n     * Constructor: OpenLayers.Handler.RegularPolygon\n     * Create a new regular polygon handler.\n     *\n     * Parameters:\n     * control - {<OpenLayers.Control>} The control that owns this handler\n     * callbacks - {Object} An object with a properties whose values are\n     *     functions.  Various callbacks described below.\n     * options - {Object} An object with properties to be set on the handler.\n     *     If the options.sides property is not specified, the number of sides\n     *     will default to 4.\n     *\n     * Named callbacks:\n     * create - Called when a sketch is first created.  Callback called with\n     *     the creation point geometry and sketch feature.\n     * done - Called when the sketch drawing is finished.  The callback will\n     *     receive a single argument, the sketch geometry.\n     * cancel - Called when the handler is deactivated while drawing.  The\n     *     cancel callback will receive a geometry.\n     */\n    initialize: function(control, callbacks, options) {\n        if(!(options && options.layerOptions && options.layerOptions.styleMap)) {\n            this.style = OpenLayers.Util.extend(OpenLayers.Feature.Vector.style['default'], {});\n        }\n\n        OpenLayers.Handler.Drag.prototype.initialize.apply(this,\n                                                [control, callbacks, options]);\n        this.options = (options) ? options : {};\n    },\n    \n    /**\n     * APIMethod: setOptions\n     * \n     * Parameters:\n     * newOptions - {Object} \n     */\n    setOptions: function (newOptions) {\n        OpenLayers.Util.extend(this.options, newOptions);\n        OpenLayers.Util.extend(this, newOptions);\n    },\n    \n    /**\n     * APIMethod: activate\n     * Turn on the handler.\n     *\n     * Returns:\n     * {Boolean} The handler was successfully activated\n     */\n    activate: function() {\n        var activated = false;\n        if(OpenLayers.Handler.Drag.prototype.activate.apply(this, arguments)) {\n            // create temporary vector layer for rendering geometry sketch\n            var options = OpenLayers.Util.extend({\n                displayInLayerSwitcher: false,\n                // indicate that the temp vector layer will never be out of range\n                // without this, resolution properties must be specified at the\n                // map-level for this temporary layer to init its resolutions\n                // correctly\n                calculateInRange: OpenLayers.Function.True,\n                wrapDateLine: this.citeCompliant\n            }, this.layerOptions);\n            this.layer = new OpenLayers.Layer.Vector(this.CLASS_NAME, options);\n            this.map.addLayer(this.layer);\n            activated = true;\n        }\n        return activated;\n    },\n\n    /**\n     * APIMethod: deactivate\n     * Turn off the handler.\n     *\n     * Returns:\n     * {Boolean} The handler was successfully deactivated\n     */\n    deactivate: function() {\n        var deactivated = false;\n        if(OpenLayers.Handler.Drag.prototype.deactivate.apply(this, arguments)) {\n            // call the cancel callback if mid-drawing\n            if(this.dragging) {\n                this.cancel();\n            }\n            // If a layer's map property is set to null, it means that that\n            // layer isn't added to the map. Since we ourself added the layer\n            // to the map in activate(), we can assume that if this.layer.map\n            // is null it means that the layer has been destroyed (as a result\n            // of map.destroy() for example.\n            if (this.layer.map != null) {\n                this.layer.destroy(false);\n                if (this.feature) {\n                    this.feature.destroy();\n                }\n            }\n            this.layer = null;\n            this.feature = null;\n            deactivated = true;\n        }\n        return deactivated;\n    },\n    \n    /**\n     * Method: down\n     * Start drawing a new feature\n     *\n     * Parameters:\n     * evt - {Event} The drag start event\n     */\n    down: function(evt) {\n        this.fixedRadius = !!(this.radius);\n        var maploc = this.layer.getLonLatFromViewPortPx(evt.xy); \n        this.origin = new OpenLayers.Geometry.Point(maploc.lon, maploc.lat);\n        // create the new polygon\n        if(!this.fixedRadius || this.irregular) {\n            // smallest radius should not be less one pixel in map units\n            // VML doesn't behave well with smaller\n            this.radius = this.map.getResolution();\n        }\n        if(this.persist) {\n            this.clear();\n        }\n        this.feature = new OpenLayers.Feature.Vector();\n        this.createGeometry();\n        this.callback(\"create\", [this.origin, this.feature]);\n        this.layer.addFeatures([this.feature], {silent: true});\n        this.layer.drawFeature(this.feature, this.style);\n    },\n    \n    /**\n     * Method: move\n     * Respond to drag move events\n     *\n     * Parameters:\n     * evt - {Evt} The move event\n     */\n    move: function(evt) {\n        var maploc = this.layer.getLonLatFromViewPortPx(evt.xy); \n        var point = new OpenLayers.Geometry.Point(maploc.lon, maploc.lat);\n        if(this.irregular) {\n            var ry = Math.sqrt(2) * Math.abs(point.y - this.origin.y) / 2;\n            this.radius = Math.max(this.map.getResolution() / 2, ry);\n        } else if(this.fixedRadius) {\n            this.origin = point;\n        } else {\n            this.calculateAngle(point, evt);\n            this.radius = Math.max(this.map.getResolution() / 2,\n                                   point.distanceTo(this.origin));\n        }\n        this.modifyGeometry();\n        if(this.irregular) {\n            var dx = point.x - this.origin.x;\n            var dy = point.y - this.origin.y;\n            var ratio;\n            if(dy == 0) {\n                ratio = dx / (this.radius * Math.sqrt(2));\n            } else {\n                ratio = dx / dy;\n            }\n            this.feature.geometry.resize(1, this.origin, ratio);\n            this.feature.geometry.move(dx / 2, dy / 2);\n        }\n        this.layer.drawFeature(this.feature, this.style);\n    },\n\n    /**\n     * Method: up\n     * Finish drawing the feature\n     *\n     * Parameters:\n     * evt - {Event} The mouse up event\n     */\n    up: function(evt) {\n        this.finalize();\n        // the mouseup method of superclass doesn't call the\n        // \"done\" callback if there's been no move between\n        // down and up\n        if (this.start == this.last) {\n            this.callback(\"done\", [evt.xy]);\n        }\n    },\n\n    /**\n     * Method: out\n     * Finish drawing the feature.\n     *\n     * Parameters:\n     * evt - {Event} The mouse out event\n     */\n    out: function(evt) {\n        this.finalize();\n    },\n\n    /**\n     * Method: createGeometry\n     * Create the new polygon geometry.  This is called at the start of the\n     *     drag and at any point during the drag if the number of sides\n     *     changes.\n     */\n    createGeometry: function() {\n        this.angle = Math.PI * ((1/this.sides) - (1/2));\n        if(this.snapAngle) {\n            this.angle += this.snapAngle * (Math.PI / 180);\n        }\n        this.feature.geometry = OpenLayers.Geometry.Polygon.createRegularPolygon(\n            this.origin, this.radius, this.sides, this.snapAngle\n        );\n    },\n    \n    /**\n     * Method: modifyGeometry\n     * Modify the polygon geometry in place.\n     */\n    modifyGeometry: function() {\n        var angle, point;\n        var ring = this.feature.geometry.components[0];\n        // if the number of sides ever changes, create a new geometry\n        if(ring.components.length != (this.sides + 1)) {\n            this.createGeometry();\n            ring = this.feature.geometry.components[0];\n        }\n        for(var i=0; i<this.sides; ++i) {\n            point = ring.components[i];\n            angle = this.angle + (i * 2 * Math.PI / this.sides);\n            point.x = this.origin.x + (this.radius * Math.cos(angle));\n            point.y = this.origin.y + (this.radius * Math.sin(angle));\n            point.clearBounds();\n        }\n    },\n    \n    /**\n     * Method: calculateAngle\n     * Calculate the angle based on settings.\n     *\n     * Parameters:\n     * point - {<OpenLayers.Geometry.Point>}\n     * evt - {Event}\n     */\n    calculateAngle: function(point, evt) {\n        var alpha = Math.atan2(point.y - this.origin.y,\n                               point.x - this.origin.x);\n        if(this.snapAngle && (this.snapToggle && !evt[this.snapToggle])) {\n            var snapAngleRad = (Math.PI / 180) * this.snapAngle;\n            this.angle = Math.round(alpha / snapAngleRad) * snapAngleRad;\n        } else {\n            this.angle = alpha;\n        }\n    },\n\n    /**\n     * APIMethod: cancel\n     * Finish the geometry and call the \"cancel\" callback.\n     */\n    cancel: function() {\n        // the polygon geometry gets cloned in the callback method\n        this.callback(\"cancel\", null);\n        this.finalize();\n    },\n\n    /**\n     * Method: finalize\n     * Finish the geometry and call the \"done\" callback.\n     */\n    finalize: function() {\n        this.origin = null;\n        this.radius = this.options.radius;\n    },\n\n    /**\n     * APIMethod: clear\n     * Clear any rendered features on the temporary layer.  This is called\n     *     when the handler is deactivated, canceled, or done (unless persist\n     *     is true).\n     */\n    clear: function() {\n        if (this.layer) {\n            this.layer.renderer.clear();\n            this.layer.destroyFeatures();\n        }\n    },\n    \n    /**\n     * Method: callback\n     * Trigger the control's named callback with the given arguments\n     *\n     * Parameters:\n     * name - {String} The key for the callback that is one of the properties\n     *     of the handler's callbacks object.\n     * args - {Array} An array of arguments with which to call the callback\n     *     (defined by the control).\n     */\n    callback: function (name, args) {\n        // override the callback method to always send the polygon geometry\n        if (this.callbacks[name]) {\n            this.callbacks[name].apply(this.control,\n                                       [this.feature.geometry.clone()]);\n        }\n        // since sketch features are added to the temporary layer\n        // they must be cleared here if done or cancel\n        if(!this.persist && (name == \"done\" || name == \"cancel\")) {\n            this.clear();\n        }\n    },\n\n    CLASS_NAME: \"OpenLayers.Handler.RegularPolygon\"\n});\n\n/**\n * Class: OpenLayers.Control.UndoRedo\n * Instance of this class can be used to undo and redo vector edits.\n */\nOpenLayers.Control.UndoRedo = OpenLayers.Class(OpenLayers.Control, {\n\t/**\n\t * APIProperty: currentEditIndex\n\t * {integer} - sequence number for editing the feature[s] \n\t */\n\tcurrentEditIndex: 0,\n\t/**\n\t * Property: undoFeatures\n\t * {array} - stack of the edit features\n\t */\n\tundoFeatures: [],\n\t/**\n\t * Property: redoFeatures\n\t * {array} - stack of the undo features\n\t */\n\tredoFeatures: [],\n\t/**\n\t * Property: isEditMulty\n\t * {boolean} - true if in one action multiple features are edited \n\t */\n\tisEditMulty: false,\n\t\n\t/**\n\t * Constructor: UndoRedo\n\t * Parameters:\n\t * layers - array of {<OpenLayers.Layers.Vector>}\n\t */\n\tinitialize: function (layers) {\n        console.log('initialize', this, layers);\n\t\tif (!(layers instanceof Array)) {\n\t\t\tlayers = [layers];\n\t\t}\n\t\tfor(var i = 0; i < layers.length; i++) {\n            console.log('registering handlers');\n            layers[i].events.register(\"sketchstarted\", this, this.onSketchStarted);\n\t\t\tlayers[i].events.register(\"featureadded\", this, this.onInsert);\n            layers[i].events.register(\"beforefeatureremoved\", this, this.onDelete);\n            layers[i].events.register(\"beforefeaturemodified\", this, this.onUpdate);\n            layers[i].events.register(\"afterfeaturemodified\", this, this.onUpdateCompleted);\n\t\t}\n\t},\n    \n\t/**\n\t * Method: onEdit\n\t * on any edit operation performed this has to be triggered\n\t * i.e. on insert, delete, update \n\t * Parameters: \n\t * feature - {<OpenLayers.Feature.Vector>}\n\t * editType - {string} edit type done \"Insert\",\"Delete\",\"Update\"\n\t * component - {string} layer or any other identifier\n\t * Returns: \n\t */\t \n\tonEdit: function (feature, editType, component) {\n\t\tconsole.log(\"Updating undo stack as there is - \" + editType, feature, component);\n\t\tif (component == undefined) {\n\t\t\tcomponent = feature.layer.name;\n\t\t}\n\t\tif (this.undoFeatures[this.currentEditIndex] == undefined) {\n\t\t\tthis.undoFeatures[this.currentEditIndex] = {};\n\t\t\tthis.undoFeatures[this.currentEditIndex][component] = {\"Insert\": [], \"Update\": [], \"Delete\": []};\n\t\t}\n\t\tif (feature.fid == undefined) {\n\t\t\tfeature.fid = feature.id;\n\t\t}\t\n\t\tthis.undoFeatures[this.currentEditIndex][component][editType].push(feature);\n\t\tthis.redoFeatures.splice(0, this.redoFeatures.length);\n\t},\n\t\n\t/** \n\t * Method: onSketchStarted\n\t * event handler for sketchstarted\n\t */\n\tonSketchStarted: function (event) {\n\t\tthis.increaseEditIndex();\n\t\tconsole.log(\"currentEditIndex: \" + this.currentEditIndex);\n\t\treturn true;\n\t},\n\t\n\t/**\n\t * Method: onInsert\n\t * event handler for featureadded \n\t */\n\tonInsert: function (event) {\t\n\t\tfeature = event.feature.clone();\n\t\tif (event.feature.fid == undefined) {\n\t\t\tevent.feature.fid = event.feature.id;\n\t\t}\n\t\tfeature.fid = event.feature.fid;\n\t\tfeature.state = event.feature.state;\n\t\tfeature.layer = event.feature.layer;\n\t\tthis.onEdit(feature, \"Insert\", feature.layer.name);\n        return true;\n\t},\n\t\n\t/**\n\t * Method: onDelete\n\t * event handler for beforefeatureremoved \n\t */\n\tonDelete: function (event) {\n        this.increaseEditIndex();\n\t\tthis.onEdit(event.feature, \"Delete\", event.feature.layer.name);\n        return true;\n\t},\n\t\n\t/**\n\t * Method: onUpdate\n\t * event handler for beforefeaturemodified\n\t */\n\tonUpdate: function (event) {\n        this.increaseEditIndex();\n\t\tconsole.log(\"old feature geometry: \", event.feature.geometry);\n\t\tfeature = event.feature.clone();\n\t\tfeature.fid = event.feature.fid;\n\t\tfeature.state = event.feature.state;\n\t\tfeature.layer = event.feature.layer;\n\t\tthis.onEdit(feature, \"Update\", feature.layer.name);\n\t},\n\t\n\t/**\n\t * Method: onUpdateCompleted\n\t * event handler for afterfeaturemodified\n\t */\n\tonUpdateCompleted: function (event) {\n        console.log(\"onUpdateCompleted\", event.modified);\n        if (!event.modified) {\n            this.getUndoData();\n        }\n\t},\n\t\n\t/**\n\t * Method: increaseEditIndex\n\t * increase the editIndex\n\t */\n\tincreaseEditIndex: function () {\n\t\tif (this.currentEditIndex < this.undoFeatures.length ) {\n        \tthis.currentEditIndex += 1;\n        }\n\t},\n\t\n\t/**\n\t * Method: getUndoData\n\t * returns the last edited data\n\t */ \n\tgetUndoData: function () {\n\t\tvar data = this.undoFeatures.pop();\n        if (data) {\n            this.currentEditIndex -= 1;\n        }\n\t\treturn data;\n\t},\n\t\n\t/**\n     * Method: getRedoData\n\t * returns the last redo data\n\t */\n\tgetRedoData: function() {\n\t\tvar data = this.redoFeatures.pop();\n        if (data) {\n            this.currentEditIndex += 1;\n        }\n\t\treturn data;\n\t},\n\t\n\t/**\n\t * APIMethod: resetEditIndex\n\t * reset the editIndex to 0 and empty both undo and redo stack\n\t */\n\tresetEditIndex: function () {\n\t\tthis.currentEditIndex = 0;\n\t\tthis.undoFeatures.splice(0, this.undoFeatures.length);\n\t\tthis.redoFeatures.splice(0, this.redoFeatures.length);\n\t},\n\t\n\t/**\n\t * APIMethod: undo\n\t * perform undo operation \n\t */\n\tundo: function () {\t\n\t\tvar data = this.getUndoData();\n\t\tconsole.log(\"undo data :\", data);\n        if (data) {\n            for (component in data) {\n                console.log(\"component: \" + component);\n                var layer = this.map.getLayersByName(component)[0];\n                console.log(\"got layer, name: \" + layer.name);\n                for (editType in data[component]) {\n                    console.log(\"editType : \"+editType);\n                    for (var i = 0; i < data[component][editType].length;i++) {\n                        var feature = data[component][editType][i];\n                        console.log(\"features before undo: \" + layer.features.length, feature);\n                        switch (editType) {\n                            case \"Insert\":\n                                //layer.drawFeature(feature, {display : \"none\"});\n                                insertedFeature = layer.getFeatureByFid(feature.fid);\n                                console.log(\"undo Insert\", insertedFeature, feature, feature.fid);\n                                layer.eraseFeatures(insertedFeature);\n                                console.log('after erase', insertedFeature, layer.features.length);\n                                OpenLayers.Util.removeItem(layer.features, insertedFeature);\n                                console.log('OpenLayers.Util.removeItem', insertedFeature, layer.features.length);\n                                break;\n                            case \"Delete\":\n                                console.log(\"undo Delete\", feature);\n                                // layer.features.push(feature);\n                                // layer.drawFeature(feature);\n                                layer.addFeatures([feature], {silent: true});\n                                break;\n                            case \"Update\":\n                                console.log(\"undo Update\");\n                                updatedFeature = layer.getFeatureByFid(feature.fid);\n                                console.log(\"old feature geometry: \", feature.geometry);\n                                console.log(\"updated feature geometry: \", updatedFeature.geometry);\n                                //layer.drawFeature(updatedFeature, {display : \"none\"});\n                                layer.eraseFeatures(updatedFeature);\n                                OpenLayers.Util.removeItem(layer.features, updatedFeature);\t\t\t\t\t\t\n                                //layer.removeFeatures(updatedFeature);\n                                console.log(\"old feature geometry: \" + feature.geometry);\n                                //layer.features.push(feature);\n                                //layer.drawFeature(feature);\n                                layer.addFeatures([feature], {silent: true});\n                                data[component][editType][i] = updatedFeature;\n                                break;\n                            default:\n                                console.log(\"unknown\");\n                                break;\t\t\t\t\n                        }\n                        console.log(\"features after undo: \" + layer.features.length, feature);\n                    }\n                }\n            }\n            this.redoFeatures.push(data);\n        }\n\t},\n\t\n\t/**\n\t * APIMethod:  redo\n\t * perform redo operation\n\t */\n\tredo: function () {\n\t\tvar data = this.getRedoData();\n        console.log(\"redo data :\", data);\n        if (data) {\n            for (component in data) {\n                console.log(\"component: \" + component);\n                var layer = this.map.getLayersByName(component)[0];\n                console.log(\"got layer, name: \" + layer.name);\n                for (editType in data[component]) {\n                    console.log(\"editType : \" + editType);\n                    for (var i = 0; i < data[component][editType].length; i++) {\n                        var feature = data[component][editType][i];\n                        console.log(\"features before redo: \" + layer.features.length);\t\n                        switch (editType) {\n                            case \"Insert\":\n                                console.log(\"redo Insert\", feature);\n                                // layer.features.push(feature);\n                                // layer.drawFeature(feature);\n                                layer.addFeatures([feature], {silent: true});\n                                break;\n                            case \"Delete\":\n                                console.log(\"redo Delete\");\n                                deleteFeature = layer.getFeatureByFid(feature.fid)\n                                layer.eraseFeatures(deleteFeature);\n                                OpenLayers.Util.removeItem(layer.features, deleteFeature);\t\n                                break;\n                            case \"Update\":\n                                console.log(\"redo Update\");\n                                oldFeature = layer.getFeatureByFid(feature.fid);\n                                console.log(\"old feature id: \" + oldFeature.id);\n                                layer.eraseFeatures(oldFeature);\n                                OpenLayers.Util.removeItem(layer.features, oldFeature);\n                                console.log(\"updated feature id: \" + oldFeature.id);\n                                //layer.features.push(feature);\n                                //layer.drawFeature(feature);\n                                layer.addFeatures([feature], {silent: true});\n                                data[component][editType][i] = oldFeature;\n                                break;\n                            default:\n                                break; \n                        }\n                    }\n                }\n            }\n            this.undoFeatures.push(data);\n        }\n\t},\n\n\tCLASS_NAME : \"OpenLayers.Control.UndoRedo\"\n});\t\n/*!\n * ==========================================================\n *  COLOR PICKER PLUGIN 1.1.0\n * ==========================================================\n * Author: Taufik Nurrohman <http://latitudu.com>\n * License: MIT\n * ----------------------------------------------------------\n */\n\nvar CP = function(target, how) {\n\n    var w = window,\n        d = document,\n        r = this,\n        _ = false,\n        hooks = {},\n        picker = d.createElement('div');\n\n    function isset(x) {\n        return typeof x !== \"undefined\";\n    }\n\n    function edge(a, b, c) {\n        if (a < b) return b;\n        if (a > c) return c;\n        return a;\n    }\n\n    // trigger color picker panel on click by default\n    if (!isset(how)) {\n        how = [\"mousedown\", \"touchstart\"];\n    }\n\n    // [h, s, v] ... 0 <= h, s, v <= 1\n    function HSV2RGB(a) {\n        var h = +a[0],\n            s = +a[1],\n            v = +a[2],\n            r, g, b, i, f, p, q, t;\n        i = Math.floor(h * 6);\n        f = h * 6 - i;\n        p = v * (1 - s);\n        q = v * (1 - f * s);\n        t = v * (1 - (1 - f) * s);\n        if (isNaN(i)) i = 0;\n        if (isNaN(q)) q = 0;\n        if (isNaN(t)) t = 0;\n        switch (i % 6) {\n            case 0:\n                r = v, g = t, b = p;\n                break;\n            case 1:\n                r = q, g = v, b = p;\n                break;\n            case 2:\n                r = p, g = v, b = t;\n                break;\n            case 3:\n                r = p, g = q, b = v;\n                break;\n            case 4:\n                r = t, g = p, b = v;\n                break;\n            case 5:\n                r = v, g = p, b = q;\n                break;\n        }\n        return [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)];\n    }\n\n    function HSV2HEX(a) {\n        return RGB2HEX(HSV2RGB(a));\n    }\n\n    // [r, g, b] ... 0 <= r, g, b <= 255\n    function RGB2HSV(a) {\n        var r = +a[0],\n            g = +a[1],\n            b = +a[2],\n            max = Math.max(r, g, b),\n            min = Math.min(r, g, b),\n            d = max - min,\n            h, s = (max === 0 ? 0 : d / max),\n            v = max / 255;\n        switch (max) {\n            case min:\n                h = 0;\n                break;\n            case r:\n                h = (g - b) + d * (g < b ? 6 : 0);\n                h /= 6 * d;\n                break;\n            case g:\n                h = (b - r) + d * 2;\n                h /= 6 * d;\n                break;\n            case b:\n                h = (r - g) + d * 4;\n                h /= 6 * d;\n                break;\n        }\n        return [h, s, v];\n    }\n\n    function RGB2HEX(a) {\n        var s = +a[2] | (+a[1] << 8) | (+a[0] << 16);\n        s = '000000' + s.toString(16);\n        return s.slice(-6);\n    }\n\n    // rrggbb or rgb\n    function HEX2HSV(s) {\n        return RGB2HSV(HEX2RGB(s));\n    }\n\n    function HEX2RGB(s) {\n        if (s.length === 3) {\n            s = s.replace(/./g, '$&$&');\n        }\n        return [parseInt(s[0] + s[1], 16), parseInt(s[2] + s[3], 16), parseInt(s[4] + s[5], 16)];\n    }\n\n    // convert range from `0` to `360` and `0` to `100` in color into range from `0` to `1`\n    function _2HSV_pri(a) {\n        return [+a[0] / 360, +a[1] / 100, +a[2] / 100];\n    }\n\n    // convert range from `0` to `1` into `0` to `360` and `0` to `100` in color\n    function _2HSV_pub(a) {\n        return [Math.round(+a[0] * 360), Math.round(+a[1] * 100), Math.round(+a[2] * 100)];\n    }\n\n    // *\n    r.parse = function(x) {\n        if (typeof x === \"object\") return x;\n        var rgb = /\\s*rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)\\s*$/i.exec(x),\n            hsv = /\\s*hsv\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)%\\s*,\\s*(\\d+)%\\s*\\)\\s*$/i.exec(x),\n            hex = x[0] === '#' && x.match(/^#([\\da-f]{3}|[\\da-f]{6})$/);\n        if (hex) {\n            return HEX2HSV(x.slice(1));\n        } else if (hsv) {\n            return _2HSV_pri([+hsv[1], +hsv[2], +hsv[3]]);\n        } else if (rgb) {\n            return RGB2HSV([+rgb[1], +rgb[2], +rgb[3]]);\n        }\n        return [0, 1, 1]; // default is red\n    };\n\n    // add event\n    function on(ev, el, fn) {\n        return el.addEventListener(ev, fn, false);\n    }\n\n    // remove event\n    function off(ev, el, fn) {\n        return el.removeEventListener(ev, fn);\n    }\n\n    // get mouse/finger coordinate\n    function point(el, e) {\n        var x = !!e.touches ? e.touches[0].pageX : e.pageX,\n            y = !!e.touches ? e.touches[0].pageY : e.pageY,\n            left = offset(el).l,\n            top = offset(el).t;\n        while (el = el.offsetParent) {\n            left += offset(el).l;\n            top += offset(el).t;\n        }\n        return {\n            x: x - left,\n            y: y - top\n        };\n    }\n\n    // get position\n    function offset(el) {\n        return {\n            l: el.offsetLeft,\n            t: el.offsetTop\n        };\n    }\n\n    // get closest parent\n    function closest(a, b) {\n        while ((a = a.parentElement) && a !== b);\n        return a;\n    }\n\n    // prevent default\n    function prevent(e) {\n        if (e) e.preventDefault();\n    }\n\n    // get dimension\n    function size(el) {\n        return {\n            w: el.offsetWidth,\n            h: el.offsetHeight\n        };\n    }\n\n    // get color data\n    function get_data(a) {\n        return _ || (isset(a) ? a : false);\n    }\n\n    // set color data\n    function set_data(a) {\n        _ = a;\n    }\n\n    // add hook\n    function add(ev, fn, id) {\n        if (!isset(ev)) return hooks;\n        if (!isset(fn)) return hooks[ev];\n        if (!isset(hooks[ev])) hooks[ev] = {};\n        if (!isset(id)) id = Object.keys(hooks[ev]).length;\n        return hooks[ev][id] = fn, r;\n    }\n\n    // remove hook\n    function remove(ev, id) {\n        if (!isset(ev)) return hooks = {}, r;\n        if (!isset(id)) return hooks[ev] = {}, r;\n        return delete hooks[ev][id], r;\n    }\n\n    // trigger hook\n    function trigger(ev, a, id) {\n        if (!isset(hooks[ev])) return r;\n        if (!isset(id)) {\n            for (var i in hooks[ev]) {\n                hooks[ev][i].apply(r, a);\n            }\n        } else {\n            if (isset(hooks[ev][id])) {\n                hooks[ev][id].apply(r, a);\n            }\n        }\n        return r;\n    }\n\n    // initialize data ...\n    set_data(r.parse(target.getAttribute('data-color') || target.value || [0, 1, 1]));\n\n    // generate color picker pane ...\n    picker.className = 'color-picker';\n    picker.innerHTML = '<div class=\"color-picker-control\"><span class=\"color-picker-h\"><i></i></span><span class=\"color-picker-sv\"><i></i></span></div>';\n    var b = d.body,\n        h = d.documentElement,\n        c = picker.firstChild.children,\n        HSV = get_data([0, 1, 1]), // default is red\n        H = c[0],\n        SV = c[1],\n        H_point = H.firstChild,\n        SV_point = SV.firstChild,\n        start_H = false,\n        start_SV = false,\n        drag_H = false,\n        drag_SV = false,\n        left = 0,\n        top = 0,\n        P_W = 0,\n        P_H = 0,\n        v = HSV2HEX(HSV),\n        set, exit;\n\n    // on update ...\n    function trigger_(k, x) {\n        if (!k || k === \"h\") {\n            trigger(\"change:h\", x);\n        }\n        if (!k || k === \"sv\") {\n            trigger(\"change:sv\", x);\n        }\n        trigger(\"change\", x);\n    }\n\n    // delay\n    function delay(fn, t) {\n        return w.setTimeout(fn, t);\n    }\n\n    // is visible?\n    function visible() {\n        return picker.parentNode;\n    }\n\n    // fit to window\n    function fit() {\n        var w_W = /* w.innerWidth */ size(h).w,\n            w_H = w.innerHeight,\n            w_L = Math.max(b.scrollLeft, h.scrollLeft),\n            w_T = Math.max(b.scrollTop, h.scrollTop),\n            width = w_W + w_L,\n            height = w_H + w_T;\n        left = offset(target).l;\n        top = offset(target).t + size(target).h;\n        if (left + P_W > width) {\n            left = width - P_W;\n        }\n        if (top + P_H > height) {\n            top = height - P_H;\n        }\n        picker.style.left = left + 'px';\n        picker.style.top = top + 'px';\n        return trigger(\"fit\", [r]), r;\n    };\n\n    // create\n    function create(first, bucket) {\n        if (!first) {\n            (bucket || b).appendChild(picker), r.visible = true;\n        }\n        P_W = size(picker).w;\n        P_H = size(picker).h;\n        var H_H = size(H).h,\n            SV_W = size(SV).w,\n            SV_H = size(SV).h,\n            H_point_H = size(H_point).h,\n            SV_point_W = size(SV_point).w,\n            SV_point_H = size(SV_point).h;\n        if (first) {\n            picker.style.left = '-9999px';\n            picker.style.top = '-9999px';\n            function click(e) {\n                var t = e.target,\n                    is_target = t === target || closest(t, target) === target;\n                if (is_target) {\n                    create();\n                } else {\n                    exit();\n                }\n                trigger(is_target ? \"enter\" : \"exit\", [r]);\n            }\n            if (how !== false) {\n                var i = how.length;\n                while (i--) on(how[i], target, click);\n            }\n            r.create = function() {\n                return create(1), trigger(\"create\", [r]), r;\n            };\n            r.destroy = function() {\n                if (how !== false) {\n                    var i = how.length;\n                    while (i--) off(how[i], target, click);\n                }\n                exit(), set_data(false);\n                return trigger(\"destroy\", [r]), r;\n            };\n        } else {\n            fit();\n        }\n        set = function() {\n            HSV = get_data(HSV), color();\n            H_point.style.top = (H_H - (H_point_H / 2) - (H_H * +HSV[0])) + 'px';\n            SV_point.style.right = (SV_W - (SV_point_W / 2) - (SV_W * +HSV[1])) + 'px';\n            SV_point.style.top = (SV_H - (SV_point_H / 2) - (SV_H * +HSV[2])) + 'px';\n        };\n        exit = function(e) {\n            if (visible()) {\n                visible().removeChild(picker);\n                r.visible = false;\n            }\n            off(\"touchstart\", H, down_H);\n            off(\"mousedown\", H, down_H);\n            off(\"touchstart\", SV, down_SV);\n            off(\"mousedown\", SV, down_SV);\n            off(\"touchmove\", d, move);\n            off(\"mousemove\", d, move);\n            off(\"touchend\", d, stop);\n            off(\"mouseup\", d, stop);\n            off(\"resize\", w, fit);\n            return r;\n        };\n        function color(e) {\n            var a = HSV2RGB(HSV),\n                b = HSV2RGB([HSV[0], 1, 1]);\n            SV.style.backgroundColor = 'rgb(' + b.join(',') + ')';\n            set_data(HSV);\n            prevent(e);\n        };\n        set();\n        function do_H(e) {\n            var y = edge(point(H, e).y, 0, H_H);\n            HSV[0] = (H_H - y) / H_H;\n            H_point.style.top = (y - (H_point_H / 2)) + 'px';\n            color(e);\n        }\n        function do_SV(e) {\n            var o = point(SV, e),\n                x = edge(o.x, 0, SV_W),\n                y = edge(o.y, 0, SV_H);\n            HSV[1] = 1 - ((SV_W - x) / SV_W);\n            HSV[2] = (SV_H - y) / SV_H;\n            SV_point.style.right = (SV_W - x - (SV_point_W / 2)) + 'px';\n            SV_point.style.top = (y - (SV_point_H / 2)) + 'px';\n            color(e);\n        }\n        function move(e) {\n            if (drag_H) {\n                do_H(e), v = HSV2HEX(HSV);\n                if (!start_H) {\n                    trigger(\"drag:h\", [v, r]);\n                    trigger(\"drag\", [v, r]);\n                    trigger_(\"h\", [v, r]);\n                }\n            }\n            if (drag_SV) {\n                do_SV(e), v = HSV2HEX(HSV);\n                if (!start_SV) {\n                    trigger(\"drag:sv\", [v, r]);\n                    trigger(\"drag\", [v, r]);\n                    trigger_(\"sv\", [v, r]);\n                }\n            }\n            start_H = false,\n            start_SV = false;\n        }\n        function stop(e) {\n            var t = e.target,\n                k = drag_H ? \"h\" : \"sv\",\n                a = [HSV2HEX(HSV), r],\n                is_target = t === target || closest(t, target) === target,\n                is_picker = t === picker || closest(t, picker) === picker;\n            if (!is_target && !is_picker) {\n                // click outside the target or picker element to exit\n                if (visible() && how !== false) exit(), trigger(\"exit\", [r]), trigger_(0, a);\n            } else {\n                if (is_picker) {\n                    trigger(\"stop:\" + k, a);\n                    trigger(\"stop\", a);\n                    trigger_(k, a);\n                }\n            }\n            drag_H = false,\n            drag_SV = false;\n        }\n        function down_H(e) {\n            start_H = true,\n            drag_H = true,\n            move(e), prevent(e);\n            trigger(\"start:h\", [v, r]);\n            trigger(\"start\", [v, r]);\n            trigger_(\"h\", [v, r]);\n        }\n        function down_SV(e) {\n            start_SV = true,\n            drag_SV = true,\n            move(e), prevent(e);\n            trigger(\"start:sv\", [v, r]);\n            trigger(\"start\", [v, r]);\n            trigger_(\"sv\", [v, r]);\n        }\n        if (!first) {\n            on(\"touchstart\", H, down_H);\n            on(\"mousedown\", H, down_H);\n            on(\"touchstart\", SV, down_SV);\n            on(\"mousedown\", SV, down_SV);\n            on(\"touchmove\", d, move);\n            on(\"mousemove\", d, move);\n            on(\"touchend\", d, stop);\n            on(\"mouseup\", d, stop);\n            on(\"resize\", w, fit);\n        }\n    } create(1);\n\n    delay(function() {\n        var a = [HSV2HEX(HSV), r];\n        trigger(\"create\", a);\n        trigger_(0, a);\n    }, 0);\n\n    // register to global ...\n    r.target = target;\n    r.picker = picker;\n    r.visible = false;\n    r.on = add;\n    r.off = remove;\n    r.trigger = trigger;\n    r.fit = fit;\n    r.set = function(a) {\n        if (!isset(a)) return get_data();\n        if (typeof a === \"string\") {\n            a = r.parse(a);\n        }\n        return set_data(a), set(), r;\n    };\n    r.HSV2RGB = function(a) {\n        return HSV2RGB(_2HSV_pri(a));\n    };\n    r._HSV2RGB = HSV2RGB;\n    r.HSV2HEX = function(a) {\n        return HSV2HEX(_2HSV_pri(a));\n    };\n    r._HSV2HEX = HSV2HEX;\n    r.RGB2HSV = function(a) {\n        return _2HSV_pub(RGB2HSV(a));\n    };\n    r._RGB2HSV = RGB2HSV;\n    r.RGB2HEX = RGB2HEX;\n    r.HEX2HSV = function(s) {\n        return _2HSV_pub(HEX2HSV(s));\n    };\n    r._HEX2HSV = HEX2HSV;\n    r.HEX2RGB = HEX2RGB;\n    r.hooks = hooks;\n    r.enter = function(bucket) {\n        return create(0, bucket);\n    };\n    r.exit = exit;\n\n    // return the global object\n    return r;\n\n};\n/*eslint-disable no-unused-vars*/\n/*!\n * jQuery JavaScript Library v3.1.0\n * https://jquery.com/\n *\n * Includes Sizzle.js\n * https://sizzlejs.com/\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license\n * https://jquery.org/license\n *\n * Date: 2016-07-07T21:44Z\n */\n( function( global, factory ) {\n\n\t\"use strict\";\n\n\tif ( typeof module === \"object\" && typeof module.exports === \"object\" ) {\n\n\t\t// For CommonJS and CommonJS-like environments where a proper `window`\n\t\t// is present, execute the factory and get jQuery.\n\t\t// For environments that do not have a `window` with a `document`\n\t\t// (such as Node.js), expose a factory as module.exports.\n\t\t// This accentuates the need for the creation of a real `window`.\n\t\t// e.g. var jQuery = require(\"jquery\")(window);\n\t\t// See ticket #14549 for more info.\n\t\tmodule.exports = global.document ?\n\t\t\tfactory( global, true ) :\n\t\t\tfunction( w ) {\n\t\t\t\tif ( !w.document ) {\n\t\t\t\t\tthrow new Error( \"jQuery requires a window with a document\" );\n\t\t\t\t}\n\t\t\t\treturn factory( w );\n\t\t\t};\n\t} else {\n\t\tfactory( global );\n\t}\n\n// Pass this if window is not defined yet\n} )( typeof window !== \"undefined\" ? window : this, function( window, noGlobal ) {\n\n// Edge <= 12 - 13+, Firefox <=18 - 45+, IE 10 - 11, Safari 5.1 - 9+, iOS 6 - 9.1\n// throw exceptions when non-strict code (e.g., ASP.NET 4.5) accesses strict mode\n// arguments.callee.caller (trac-13335). But as of jQuery 3.0 (2016), strict mode should be common\n// enough that all such attempts are guarded in a try block.\n\"use strict\";\n\nvar arr = [];\n\nvar document = window.document;\n\nvar getProto = Object.getPrototypeOf;\n\nvar slice = arr.slice;\n\nvar concat = arr.concat;\n\nvar push = arr.push;\n\nvar indexOf = arr.indexOf;\n\nvar class2type = {};\n\nvar toString = class2type.toString;\n\nvar hasOwn = class2type.hasOwnProperty;\n\nvar fnToString = hasOwn.toString;\n\nvar ObjectFunctionString = fnToString.call( Object );\n\nvar support = {};\n\n\n\n\tfunction DOMEval( code, doc ) {\n\t\tdoc = doc || document;\n\n\t\tvar script = doc.createElement( \"script\" );\n\n\t\tscript.text = code;\n\t\tdoc.head.appendChild( script ).parentNode.removeChild( script );\n\t}\n/* global Symbol */\n// Defining this global in .eslintrc would create a danger of using the global\n// unguarded in another place, it seems safer to define global only for this module\n\n\n\nvar\n\tversion = \"3.1.0\",\n\n\t// Define a local copy of jQuery\n\tjQuery = function( selector, context ) {\n\n\t\t// The jQuery object is actually just the init constructor 'enhanced'\n\t\t// Need init if jQuery is called (just allow error to be thrown if not included)\n\t\treturn new jQuery.fn.init( selector, context );\n\t},\n\n\t// Support: Android <=4.0 only\n\t// Make sure we trim BOM and NBSP\n\trtrim = /^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g,\n\n\t// Matches dashed string for camelizing\n\trmsPrefix = /^-ms-/,\n\trdashAlpha = /-([a-z])/g,\n\n\t// Used by jQuery.camelCase as callback to replace()\n\tfcamelCase = function( all, letter ) {\n\t\treturn letter.toUpperCase();\n\t};\n\njQuery.fn = jQuery.prototype = {\n\n\t// The current version of jQuery being used\n\tjquery: version,\n\n\tconstructor: jQuery,\n\n\t// The default length of a jQuery object is 0\n\tlength: 0,\n\n\ttoArray: function() {\n\t\treturn slice.call( this );\n\t},\n\n\t// Get the Nth element in the matched element set OR\n\t// Get the whole matched element set as a clean array\n\tget: function( num ) {\n\t\treturn num != null ?\n\n\t\t\t// Return just the one element from the set\n\t\t\t( num < 0 ? this[ num + this.length ] : this[ num ] ) :\n\n\t\t\t// Return all the elements in a clean array\n\t\t\tslice.call( this );\n\t},\n\n\t// Take an array of elements and push it onto the stack\n\t// (returning the new matched element set)\n\tpushStack: function( elems ) {\n\n\t\t// Build a new jQuery matched element set\n\t\tvar ret = jQuery.merge( this.constructor(), elems );\n\n\t\t// Add the old object onto the stack (as a reference)\n\t\tret.prevObject = this;\n\n\t\t// Return the newly-formed element set\n\t\treturn ret;\n\t},\n\n\t// Execute a callback for every element in the matched set.\n\teach: function( callback ) {\n\t\treturn jQuery.each( this, callback );\n\t},\n\n\tmap: function( callback ) {\n\t\treturn this.pushStack( jQuery.map( this, function( elem, i ) {\n\t\t\treturn callback.call( elem, i, elem );\n\t\t} ) );\n\t},\n\n\tslice: function() {\n\t\treturn this.pushStack( slice.apply( this, arguments ) );\n\t},\n\n\tfirst: function() {\n\t\treturn this.eq( 0 );\n\t},\n\n\tlast: function() {\n\t\treturn this.eq( -1 );\n\t},\n\n\teq: function( i ) {\n\t\tvar len = this.length,\n\t\t\tj = +i + ( i < 0 ? len : 0 );\n\t\treturn this.pushStack( j >= 0 && j < len ? [ this[ j ] ] : [] );\n\t},\n\n\tend: function() {\n\t\treturn this.prevObject || this.constructor();\n\t},\n\n\t// For internal use only.\n\t// Behaves like an Array's method, not like a jQuery method.\n\tpush: push,\n\tsort: arr.sort,\n\tsplice: arr.splice\n};\n\njQuery.extend = jQuery.fn.extend = function() {\n\tvar options, name, src, copy, copyIsArray, clone,\n\t\ttarget = arguments[ 0 ] || {},\n\t\ti = 1,\n\t\tlength = arguments.length,\n\t\tdeep = false;\n\n\t// Handle a deep copy situation\n\tif ( typeof target === \"boolean\" ) {\n\t\tdeep = target;\n\n\t\t// Skip the boolean and the target\n\t\ttarget = arguments[ i ] || {};\n\t\ti++;\n\t}\n\n\t// Handle case when target is a string or something (possible in deep copy)\n\tif ( typeof target !== \"object\" && !jQuery.isFunction( target ) ) {\n\t\ttarget = {};\n\t}\n\n\t// Extend jQuery itself if only one argument is passed\n\tif ( i === length ) {\n\t\ttarget = this;\n\t\ti--;\n\t}\n\n\tfor ( ; i < length; i++ ) {\n\n\t\t// Only deal with non-null/undefined values\n\t\tif ( ( options = arguments[ i ] ) != null ) {\n\n\t\t\t// Extend the base object\n\t\t\tfor ( name in options ) {\n\t\t\t\tsrc = target[ name ];\n\t\t\t\tcopy = options[ name ];\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif ( target === copy ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\tif ( deep && copy && ( jQuery.isPlainObject( copy ) ||\n\t\t\t\t\t( copyIsArray = jQuery.isArray( copy ) ) ) ) {\n\n\t\t\t\t\tif ( copyIsArray ) {\n\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\tclone = src && jQuery.isArray( src ) ? src : [];\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclone = src && jQuery.isPlainObject( src ) ? src : {};\n\t\t\t\t\t}\n\n\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\ttarget[ name ] = jQuery.extend( deep, clone, copy );\n\n\t\t\t\t// Don't bring in undefined values\n\t\t\t\t} else if ( copy !== undefined ) {\n\t\t\t\t\ttarget[ name ] = copy;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n\njQuery.extend( {\n\n\t// Unique for each copy of jQuery on the page\n\texpando: \"jQuery\" + ( version + Math.random() ).replace( /\\D/g, \"\" ),\n\n\t// Assume jQuery is ready without the ready module\n\tisReady: true,\n\n\terror: function( msg ) {\n\t\tthrow new Error( msg );\n\t},\n\n\tnoop: function() {},\n\n\tisFunction: function( obj ) {\n\t\treturn jQuery.type( obj ) === \"function\";\n\t},\n\n\tisArray: Array.isArray,\n\n\tisWindow: function( obj ) {\n\t\treturn obj != null && obj === obj.window;\n\t},\n\n\tisNumeric: function( obj ) {\n\n\t\t// As of jQuery 3.0, isNumeric is limited to\n\t\t// strings and numbers (primitives or objects)\n\t\t// that can be coerced to finite numbers (gh-2662)\n\t\tvar type = jQuery.type( obj );\n\t\treturn ( type === \"number\" || type === \"string\" ) &&\n\n\t\t\t// parseFloat NaNs numeric-cast false positives (\"\")\n\t\t\t// ...but misinterprets leading-number strings, particularly hex literals (\"0x...\")\n\t\t\t// subtraction forces infinities to NaN\n\t\t\t!isNaN( obj - parseFloat( obj ) );\n\t},\n\n\tisPlainObject: function( obj ) {\n\t\tvar proto, Ctor;\n\n\t\t// Detect obvious negatives\n\t\t// Use toString instead of jQuery.type to catch host objects\n\t\tif ( !obj || toString.call( obj ) !== \"[object Object]\" ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tproto = getProto( obj );\n\n\t\t// Objects with no prototype (e.g., `Object.create( null )`) are plain\n\t\tif ( !proto ) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Objects with prototype are plain iff they were constructed by a global Object function\n\t\tCtor = hasOwn.call( proto, \"constructor\" ) && proto.constructor;\n\t\treturn typeof Ctor === \"function\" && fnToString.call( Ctor ) === ObjectFunctionString;\n\t},\n\n\tisEmptyObject: function( obj ) {\n\n\t\t/* eslint-disable no-unused-vars */\n\t\t// See https://github.com/eslint/eslint/issues/6125\n\t\tvar name;\n\n\t\tfor ( name in obj ) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t},\n\n\ttype: function( obj ) {\n\t\tif ( obj == null ) {\n\t\t\treturn obj + \"\";\n\t\t}\n\n\t\t// Support: Android <=2.3 only (functionish RegExp)\n\t\treturn typeof obj === \"object\" || typeof obj === \"function\" ?\n\t\t\tclass2type[ toString.call( obj ) ] || \"object\" :\n\t\t\ttypeof obj;\n\t},\n\n\t// Evaluates a script in a global context\n\tglobalEval: function( code ) {\n\t\tDOMEval( code );\n\t},\n\n\t// Convert dashed to camelCase; used by the css and data modules\n\t// Support: IE <=9 - 11, Edge 12 - 13\n\t// Microsoft forgot to hump their vendor prefix (#9572)\n\tcamelCase: function( string ) {\n\t\treturn string.replace( rmsPrefix, \"ms-\" ).replace( rdashAlpha, fcamelCase );\n\t},\n\n\tnodeName: function( elem, name ) {\n\t\treturn elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();\n\t},\n\n\teach: function( obj, callback ) {\n\t\tvar length, i = 0;\n\n\t\tif ( isArrayLike( obj ) ) {\n\t\t\tlength = obj.length;\n\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\tif ( callback.call( obj[ i ], i, obj[ i ] ) === false ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor ( i in obj ) {\n\t\t\t\tif ( callback.call( obj[ i ], i, obj[ i ] ) === false ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn obj;\n\t},\n\n\t// Support: Android <=4.0 only\n\ttrim: function( text ) {\n\t\treturn text == null ?\n\t\t\t\"\" :\n\t\t\t( text + \"\" ).replace( rtrim, \"\" );\n\t},\n\n\t// results is for internal usage only\n\tmakeArray: function( arr, results ) {\n\t\tvar ret = results || [];\n\n\t\tif ( arr != null ) {\n\t\t\tif ( isArrayLike( Object( arr ) ) ) {\n\t\t\t\tjQuery.merge( ret,\n\t\t\t\t\ttypeof arr === \"string\" ?\n\t\t\t\t\t[ arr ] : arr\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tpush.call( ret, arr );\n\t\t\t}\n\t\t}\n\n\t\treturn ret;\n\t},\n\n\tinArray: function( elem, arr, i ) {\n\t\treturn arr == null ? -1 : indexOf.call( arr, elem, i );\n\t},\n\n\t// Support: Android <=4.0 only, PhantomJS 1 only\n\t// push.apply(_, arraylike) throws on ancient WebKit\n\tmerge: function( first, second ) {\n\t\tvar len = +second.length,\n\t\t\tj = 0,\n\t\t\ti = first.length;\n\n\t\tfor ( ; j < len; j++ ) {\n\t\t\tfirst[ i++ ] = second[ j ];\n\t\t}\n\n\t\tfirst.length = i;\n\n\t\treturn first;\n\t},\n\n\tgrep: function( elems, callback, invert ) {\n\t\tvar callbackInverse,\n\t\t\tmatches = [],\n\t\t\ti = 0,\n\t\t\tlength = elems.length,\n\t\t\tcallbackExpect = !invert;\n\n\t\t// Go through the array, only saving the items\n\t\t// that pass the validator function\n\t\tfor ( ; i < length; i++ ) {\n\t\t\tcallbackInverse = !callback( elems[ i ], i );\n\t\t\tif ( callbackInverse !== callbackExpect ) {\n\t\t\t\tmatches.push( elems[ i ] );\n\t\t\t}\n\t\t}\n\n\t\treturn matches;\n\t},\n\n\t// arg is for internal usage only\n\tmap: function( elems, callback, arg ) {\n\t\tvar length, value,\n\t\t\ti = 0,\n\t\t\tret = [];\n\n\t\t// Go through the array, translating each of the items to their new values\n\t\tif ( isArrayLike( elems ) ) {\n\t\t\tlength = elems.length;\n\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\tvalue = callback( elems[ i ], i, arg );\n\n\t\t\t\tif ( value != null ) {\n\t\t\t\t\tret.push( value );\n\t\t\t\t}\n\t\t\t}\n\n\t\t// Go through every key on the object,\n\t\t} else {\n\t\t\tfor ( i in elems ) {\n\t\t\t\tvalue = callback( elems[ i ], i, arg );\n\n\t\t\t\tif ( value != null ) {\n\t\t\t\t\tret.push( value );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Flatten any nested arrays\n\t\treturn concat.apply( [], ret );\n\t},\n\n\t// A global GUID counter for objects\n\tguid: 1,\n\n\t// Bind a function to a context, optionally partially applying any\n\t// arguments.\n\tproxy: function( fn, context ) {\n\t\tvar tmp, args, proxy;\n\n\t\tif ( typeof context === \"string\" ) {\n\t\t\ttmp = fn[ context ];\n\t\t\tcontext = fn;\n\t\t\tfn = tmp;\n\t\t}\n\n\t\t// Quick check to determine if target is callable, in the spec\n\t\t// this throws a TypeError, but we will just return undefined.\n\t\tif ( !jQuery.isFunction( fn ) ) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\t// Simulated bind\n\t\targs = slice.call( arguments, 2 );\n\t\tproxy = function() {\n\t\t\treturn fn.apply( context || this, args.concat( slice.call( arguments ) ) );\n\t\t};\n\n\t\t// Set the guid of unique handler to the same of original handler, so it can be removed\n\t\tproxy.guid = fn.guid = fn.guid || jQuery.guid++;\n\n\t\treturn proxy;\n\t},\n\n\tnow: Date.now,\n\n\t// jQuery.support is not used in Core but other projects attach their\n\t// properties to it so it needs to exist.\n\tsupport: support\n} );\n\nif ( typeof Symbol === \"function\" ) {\n\tjQuery.fn[ Symbol.iterator ] = arr[ Symbol.iterator ];\n}\n\n// Populate the class2type map\njQuery.each( \"Boolean Number String Function Array Date RegExp Object Error Symbol\".split( \" \" ),\nfunction( i, name ) {\n\tclass2type[ \"[object \" + name + \"]\" ] = name.toLowerCase();\n} );\n\nfunction isArrayLike( obj ) {\n\n\t// Support: real iOS 8.2 only (not reproducible in simulator)\n\t// `in` check used to prevent JIT error (gh-2145)\n\t// hasOwn isn't used here due to false negatives\n\t// regarding Nodelist length in IE\n\tvar length = !!obj && \"length\" in obj && obj.length,\n\t\ttype = jQuery.type( obj );\n\n\tif ( type === \"function\" || jQuery.isWindow( obj ) ) {\n\t\treturn false;\n\t}\n\n\treturn type === \"array\" || length === 0 ||\n\t\ttypeof length === \"number\" && length > 0 && ( length - 1 ) in obj;\n}\nvar Sizzle =\n/*!\n * Sizzle CSS Selector Engine v2.3.0\n * https://sizzlejs.com/\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license\n * http://jquery.org/license\n *\n * Date: 2016-01-04\n */\n(function( window ) {\n\nvar i,\n\tsupport,\n\tExpr,\n\tgetText,\n\tisXML,\n\ttokenize,\n\tcompile,\n\tselect,\n\toutermostContext,\n\tsortInput,\n\thasDuplicate,\n\n\t// Local document vars\n\tsetDocument,\n\tdocument,\n\tdocElem,\n\tdocumentIsHTML,\n\trbuggyQSA,\n\trbuggyMatches,\n\tmatches,\n\tcontains,\n\n\t// Instance-specific data\n\texpando = \"sizzle\" + 1 * new Date(),\n\tpreferredDoc = window.document,\n\tdirruns = 0,\n\tdone = 0,\n\tclassCache = createCache(),\n\ttokenCache = createCache(),\n\tcompilerCache = createCache(),\n\tsortOrder = function( a, b ) {\n\t\tif ( a === b ) {\n\t\t\thasDuplicate = true;\n\t\t}\n\t\treturn 0;\n\t},\n\n\t// Instance methods\n\thasOwn = ({}).hasOwnProperty,\n\tarr = [],\n\tpop = arr.pop,\n\tpush_native = arr.push,\n\tpush = arr.push,\n\tslice = arr.slice,\n\t// Use a stripped-down indexOf as it's faster than native\n\t// https://jsperf.com/thor-indexof-vs-for/5\n\tindexOf = function( list, elem ) {\n\t\tvar i = 0,\n\t\t\tlen = list.length;\n\t\tfor ( ; i < len; i++ ) {\n\t\t\tif ( list[i] === elem ) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t},\n\n\tbooleans = \"checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped\",\n\n\t// Regular expressions\n\n\t// http://www.w3.org/TR/css3-selectors/#whitespace\n\twhitespace = \"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",\n\n\t// http://www.w3.org/TR/CSS21/syndata.html#value-def-identifier\n\tidentifier = \"(?:\\\\\\\\.|[\\\\w-]|[^\\0-\\\\xa0])+\",\n\n\t// Attribute selectors: http://www.w3.org/TR/selectors/#attribute-selectors\n\tattributes = \"\\\\[\" + whitespace + \"*(\" + identifier + \")(?:\" + whitespace +\n\t\t// Operator (capture 2)\n\t\t\"*([*^$|!~]?=)\" + whitespace +\n\t\t// \"Attribute values must be CSS identifiers [capture 5] or strings [capture 3 or capture 4]\"\n\t\t\"*(?:'((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\"|(\" + identifier + \"))|)\" + whitespace +\n\t\t\"*\\\\]\",\n\n\tpseudos = \":(\" + identifier + \")(?:\\\\((\" +\n\t\t// To reduce the number of selectors needing tokenize in the preFilter, prefer arguments:\n\t\t// 1. quoted (capture 3; capture 4 or capture 5)\n\t\t\"('((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\")|\" +\n\t\t// 2. simple (capture 6)\n\t\t\"((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\" + attributes + \")*)|\" +\n\t\t// 3. anything else (capture 2)\n\t\t\".*\" +\n\t\t\")\\\\)|)\",\n\n\t// Leading and non-escaped trailing whitespace, capturing some non-whitespace characters preceding the latter\n\trwhitespace = new RegExp( whitespace + \"+\", \"g\" ),\n\trtrim = new RegExp( \"^\" + whitespace + \"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\" + whitespace + \"+$\", \"g\" ),\n\n\trcomma = new RegExp( \"^\" + whitespace + \"*,\" + whitespace + \"*\" ),\n\trcombinators = new RegExp( \"^\" + whitespace + \"*([>+~]|\" + whitespace + \")\" + whitespace + \"*\" ),\n\n\trattributeQuotes = new RegExp( \"=\" + whitespace + \"*([^\\\\]'\\\"]*?)\" + whitespace + \"*\\\\]\", \"g\" ),\n\n\trpseudo = new RegExp( pseudos ),\n\tridentifier = new RegExp( \"^\" + identifier + \"$\" ),\n\n\tmatchExpr = {\n\t\t\"ID\": new RegExp( \"^#(\" + identifier + \")\" ),\n\t\t\"CLASS\": new RegExp( \"^\\\\.(\" + identifier + \")\" ),\n\t\t\"TAG\": new RegExp( \"^(\" + identifier + \"|[*])\" ),\n\t\t\"ATTR\": new RegExp( \"^\" + attributes ),\n\t\t\"PSEUDO\": new RegExp( \"^\" + pseudos ),\n\t\t\"CHILD\": new RegExp( \"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\" + whitespace +\n\t\t\t\"*(even|odd|(([+-]|)(\\\\d*)n|)\" + whitespace + \"*(?:([+-]|)\" + whitespace +\n\t\t\t\"*(\\\\d+)|))\" + whitespace + \"*\\\\)|)\", \"i\" ),\n\t\t\"bool\": new RegExp( \"^(?:\" + booleans + \")$\", \"i\" ),\n\t\t// For use in libraries implementing .is()\n\t\t// We use this for POS matching in `select`\n\t\t\"needsContext\": new RegExp( \"^\" + whitespace + \"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\" +\n\t\t\twhitespace + \"*((?:-\\\\d)?\\\\d*)\" + whitespace + \"*\\\\)|)(?=[^-]|$)\", \"i\" )\n\t},\n\n\trinputs = /^(?:input|select|textarea|button)$/i,\n\trheader = /^h\\d$/i,\n\n\trnative = /^[^{]+\\{\\s*\\[native \\w/,\n\n\t// Easily-parseable/retrievable ID or TAG or CLASS selectors\n\trquickExpr = /^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,\n\n\trsibling = /[+~]/,\n\n\t// CSS escapes\n\t// http://www.w3.org/TR/CSS21/syndata.html#escaped-characters\n\trunescape = new RegExp( \"\\\\\\\\([\\\\da-f]{1,6}\" + whitespace + \"?|(\" + whitespace + \")|.)\", \"ig\" ),\n\tfunescape = function( _, escaped, escapedWhitespace ) {\n\t\tvar high = \"0x\" + escaped - 0x10000;\n\t\t// NaN means non-codepoint\n\t\t// Support: Firefox<24\n\t\t// Workaround erroneous numeric interpretation of +\"0x\"\n\t\treturn high !== high || escapedWhitespace ?\n\t\t\tescaped :\n\t\t\thigh < 0 ?\n\t\t\t\t// BMP codepoint\n\t\t\t\tString.fromCharCode( high + 0x10000 ) :\n\t\t\t\t// Supplemental Plane codepoint (surrogate pair)\n\t\t\t\tString.fromCharCode( high >> 10 | 0xD800, high & 0x3FF | 0xDC00 );\n\t},\n\n\t// CSS string/identifier serialization\n\t// https://drafts.csswg.org/cssom/#common-serializing-idioms\n\trcssescape = /([\\0-\\x1f\\x7f]|^-?\\d)|^-$|[^\\x80-\\uFFFF\\w-]/g,\n\tfcssescape = function( ch, asCodePoint ) {\n\t\tif ( asCodePoint ) {\n\n\t\t\t// U+0000 NULL becomes U+FFFD REPLACEMENT CHARACTER\n\t\t\tif ( ch === \"\\0\" ) {\n\t\t\t\treturn \"\\uFFFD\";\n\t\t\t}\n\n\t\t\t// Control characters and (dependent upon position) numbers get escaped as code points\n\t\t\treturn ch.slice( 0, -1 ) + \"\\\\\" + ch.charCodeAt( ch.length - 1 ).toString( 16 ) + \" \";\n\t\t}\n\n\t\t// Other potentially-special ASCII characters get backslash-escaped\n\t\treturn \"\\\\\" + ch;\n\t},\n\n\t// Used for iframes\n\t// See setDocument()\n\t// Removing the function wrapper causes a \"Permission Denied\"\n\t// error in IE\n\tunloadHandler = function() {\n\t\tsetDocument();\n\t},\n\n\tdisabledAncestor = addCombinator(\n\t\tfunction( elem ) {\n\t\t\treturn elem.disabled === true;\n\t\t},\n\t\t{ dir: \"parentNode\", next: \"legend\" }\n\t);\n\n// Optimize for push.apply( _, NodeList )\ntry {\n\tpush.apply(\n\t\t(arr = slice.call( preferredDoc.childNodes )),\n\t\tpreferredDoc.childNodes\n\t);\n\t// Support: Android<4.0\n\t// Detect silently failing push.apply\n\tarr[ preferredDoc.childNodes.length ].nodeType;\n} catch ( e ) {\n\tpush = { apply: arr.length ?\n\n\t\t// Leverage slice if possible\n\t\tfunction( target, els ) {\n\t\t\tpush_native.apply( target, slice.call(els) );\n\t\t} :\n\n\t\t// Support: IE<9\n\t\t// Otherwise append directly\n\t\tfunction( target, els ) {\n\t\t\tvar j = target.length,\n\t\t\t\ti = 0;\n\t\t\t// Can't trust NodeList.length\n\t\t\twhile ( (target[j++] = els[i++]) ) {}\n\t\t\ttarget.length = j - 1;\n\t\t}\n\t};\n}\n\nfunction Sizzle( selector, context, results, seed ) {\n\tvar m, i, elem, nid, match, groups, newSelector,\n\t\tnewContext = context && context.ownerDocument,\n\n\t\t// nodeType defaults to 9, since context defaults to document\n\t\tnodeType = context ? context.nodeType : 9;\n\n\tresults = results || [];\n\n\t// Return early from calls with invalid selector or context\n\tif ( typeof selector !== \"string\" || !selector ||\n\t\tnodeType !== 1 && nodeType !== 9 && nodeType !== 11 ) {\n\n\t\treturn results;\n\t}\n\n\t// Try to shortcut find operations (as opposed to filters) in HTML documents\n\tif ( !seed ) {\n\n\t\tif ( ( context ? context.ownerDocument || context : preferredDoc ) !== document ) {\n\t\t\tsetDocument( context );\n\t\t}\n\t\tcontext = context || document;\n\n\t\tif ( documentIsHTML ) {\n\n\t\t\t// If the selector is sufficiently simple, try using a \"get*By*\" DOM method\n\t\t\t// (excepting DocumentFragment context, where the methods don't exist)\n\t\t\tif ( nodeType !== 11 && (match = rquickExpr.exec( selector )) ) {\n\n\t\t\t\t// ID selector\n\t\t\t\tif ( (m = match[1]) ) {\n\n\t\t\t\t\t// Document context\n\t\t\t\t\tif ( nodeType === 9 ) {\n\t\t\t\t\t\tif ( (elem = context.getElementById( m )) ) {\n\n\t\t\t\t\t\t\t// Support: IE, Opera, Webkit\n\t\t\t\t\t\t\t// TODO: identify versions\n\t\t\t\t\t\t\t// getElementById can match elements by name instead of ID\n\t\t\t\t\t\t\tif ( elem.id === m ) {\n\t\t\t\t\t\t\t\tresults.push( elem );\n\t\t\t\t\t\t\t\treturn results;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn results;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t// Element context\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// Support: IE, Opera, Webkit\n\t\t\t\t\t\t// TODO: identify versions\n\t\t\t\t\t\t// getElementById can match elements by name instead of ID\n\t\t\t\t\t\tif ( newContext && (elem = newContext.getElementById( m )) &&\n\t\t\t\t\t\t\tcontains( context, elem ) &&\n\t\t\t\t\t\t\telem.id === m ) {\n\n\t\t\t\t\t\t\tresults.push( elem );\n\t\t\t\t\t\t\treturn results;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t// Type selector\n\t\t\t\t} else if ( match[2] ) {\n\t\t\t\t\tpush.apply( results, context.getElementsByTagName( selector ) );\n\t\t\t\t\treturn results;\n\n\t\t\t\t// Class selector\n\t\t\t\t} else if ( (m = match[3]) && support.getElementsByClassName &&\n\t\t\t\t\tcontext.getElementsByClassName ) {\n\n\t\t\t\t\tpush.apply( results, context.getElementsByClassName( m ) );\n\t\t\t\t\treturn results;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Take advantage of querySelectorAll\n\t\t\tif ( support.qsa &&\n\t\t\t\t!compilerCache[ selector + \" \" ] &&\n\t\t\t\t(!rbuggyQSA || !rbuggyQSA.test( selector )) ) {\n\n\t\t\t\tif ( nodeType !== 1 ) {\n\t\t\t\t\tnewContext = context;\n\t\t\t\t\tnewSelector = selector;\n\n\t\t\t\t// qSA looks outside Element context, which is not what we want\n\t\t\t\t// Thanks to Andrew Dupont for this workaround technique\n\t\t\t\t// Support: IE <=8\n\t\t\t\t// Exclude object elements\n\t\t\t\t} else if ( context.nodeName.toLowerCase() !== \"object\" ) {\n\n\t\t\t\t\t// Capture the context ID, setting it first if necessary\n\t\t\t\t\tif ( (nid = context.getAttribute( \"id\" )) ) {\n\t\t\t\t\t\tnid = nid.replace( rcssescape, fcssescape );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcontext.setAttribute( \"id\", (nid = expando) );\n\t\t\t\t\t}\n\n\t\t\t\t\t// Prefix every selector in the list\n\t\t\t\t\tgroups = tokenize( selector );\n\t\t\t\t\ti = groups.length;\n\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\tgroups[i] = \"#\" + nid + \" \" + toSelector( groups[i] );\n\t\t\t\t\t}\n\t\t\t\t\tnewSelector = groups.join( \",\" );\n\n\t\t\t\t\t// Expand context for sibling selectors\n\t\t\t\t\tnewContext = rsibling.test( selector ) && testContext( context.parentNode ) ||\n\t\t\t\t\t\tcontext;\n\t\t\t\t}\n\n\t\t\t\tif ( newSelector ) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tpush.apply( results,\n\t\t\t\t\t\t\tnewContext.querySelectorAll( newSelector )\n\t\t\t\t\t\t);\n\t\t\t\t\t\treturn results;\n\t\t\t\t\t} catch ( qsaError ) {\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tif ( nid === expando ) {\n\t\t\t\t\t\t\tcontext.removeAttribute( \"id\" );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// All others\n\treturn select( selector.replace( rtrim, \"$1\" ), context, results, seed );\n}\n\n/**\n * Create key-value caches of limited size\n * @returns {function(string, object)} Returns the Object data after storing it on itself with\n *\tproperty name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)\n *\tdeleting the oldest entry\n */\nfunction createCache() {\n\tvar keys = [];\n\n\tfunction cache( key, value ) {\n\t\t// Use (key + \" \") to avoid collision with native prototype properties (see Issue #157)\n\t\tif ( keys.push( key + \" \" ) > Expr.cacheLength ) {\n\t\t\t// Only keep the most recent entries\n\t\t\tdelete cache[ keys.shift() ];\n\t\t}\n\t\treturn (cache[ key + \" \" ] = value);\n\t}\n\treturn cache;\n}\n\n/**\n * Mark a function for special use by Sizzle\n * @param {Function} fn The function to mark\n */\nfunction markFunction( fn ) {\n\tfn[ expando ] = true;\n\treturn fn;\n}\n\n/**\n * Support testing using an element\n * @param {Function} fn Passed the created element and returns a boolean result\n */\nfunction assert( fn ) {\n\tvar el = document.createElement(\"fieldset\");\n\n\ttry {\n\t\treturn !!fn( el );\n\t} catch (e) {\n\t\treturn false;\n\t} finally {\n\t\t// Remove from its parent by default\n\t\tif ( el.parentNode ) {\n\t\t\tel.parentNode.removeChild( el );\n\t\t}\n\t\t// release memory in IE\n\t\tel = null;\n\t}\n}\n\n/**\n * Adds the same handler for all of the specified attrs\n * @param {String} attrs Pipe-separated list of attributes\n * @param {Function} handler The method that will be applied\n */\nfunction addHandle( attrs, handler ) {\n\tvar arr = attrs.split(\"|\"),\n\t\ti = arr.length;\n\n\twhile ( i-- ) {\n\t\tExpr.attrHandle[ arr[i] ] = handler;\n\t}\n}\n\n/**\n * Checks document order of two siblings\n * @param {Element} a\n * @param {Element} b\n * @returns {Number} Returns less than 0 if a precedes b, greater than 0 if a follows b\n */\nfunction siblingCheck( a, b ) {\n\tvar cur = b && a,\n\t\tdiff = cur && a.nodeType === 1 && b.nodeType === 1 &&\n\t\t\ta.sourceIndex - b.sourceIndex;\n\n\t// Use IE sourceIndex if available on both nodes\n\tif ( diff ) {\n\t\treturn diff;\n\t}\n\n\t// Check if b follows a\n\tif ( cur ) {\n\t\twhile ( (cur = cur.nextSibling) ) {\n\t\t\tif ( cur === b ) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn a ? 1 : -1;\n}\n\n/**\n * Returns a function to use in pseudos for input types\n * @param {String} type\n */\nfunction createInputPseudo( type ) {\n\treturn function( elem ) {\n\t\tvar name = elem.nodeName.toLowerCase();\n\t\treturn name === \"input\" && elem.type === type;\n\t};\n}\n\n/**\n * Returns a function to use in pseudos for buttons\n * @param {String} type\n */\nfunction createButtonPseudo( type ) {\n\treturn function( elem ) {\n\t\tvar name = elem.nodeName.toLowerCase();\n\t\treturn (name === \"input\" || name === \"button\") && elem.type === type;\n\t};\n}\n\n/**\n * Returns a function to use in pseudos for :enabled/:disabled\n * @param {Boolean} disabled true for :disabled; false for :enabled\n */\nfunction createDisabledPseudo( disabled ) {\n\t// Known :disabled false positives:\n\t// IE: *[disabled]:not(button, input, select, textarea, optgroup, option, menuitem, fieldset)\n\t// not IE: fieldset[disabled] > legend:nth-of-type(n+2) :can-disable\n\treturn function( elem ) {\n\n\t\t// Check form elements and option elements for explicit disabling\n\t\treturn \"label\" in elem && elem.disabled === disabled ||\n\t\t\t\"form\" in elem && elem.disabled === disabled ||\n\n\t\t\t// Check non-disabled form elements for fieldset[disabled] ancestors\n\t\t\t\"form\" in elem && elem.disabled === false && (\n\t\t\t\t// Support: IE6-11+\n\t\t\t\t// Ancestry is covered for us\n\t\t\t\telem.isDisabled === disabled ||\n\n\t\t\t\t// Otherwise, assume any non-<option> under fieldset[disabled] is disabled\n\t\t\t\t/* jshint -W018 */\n\t\t\t\telem.isDisabled !== !disabled &&\n\t\t\t\t\t(\"label\" in elem || !disabledAncestor( elem )) !== disabled\n\t\t\t);\n\t};\n}\n\n/**\n * Returns a function to use in pseudos for positionals\n * @param {Function} fn\n */\nfunction createPositionalPseudo( fn ) {\n\treturn markFunction(function( argument ) {\n\t\targument = +argument;\n\t\treturn markFunction(function( seed, matches ) {\n\t\t\tvar j,\n\t\t\t\tmatchIndexes = fn( [], seed.length, argument ),\n\t\t\t\ti = matchIndexes.length;\n\n\t\t\t// Match elements found at the specified indexes\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( seed[ (j = matchIndexes[i]) ] ) {\n\t\t\t\t\tseed[j] = !(matches[j] = seed[j]);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n}\n\n/**\n * Checks a node for validity as a Sizzle context\n * @param {Element|Object=} context\n * @returns {Element|Object|Boolean} The input node if acceptable, otherwise a falsy value\n */\nfunction testContext( context ) {\n\treturn context && typeof context.getElementsByTagName !== \"undefined\" && context;\n}\n\n// Expose support vars for convenience\nsupport = Sizzle.support = {};\n\n/**\n * Detects XML nodes\n * @param {Element|Object} elem An element or a document\n * @returns {Boolean} True iff elem is a non-HTML XML node\n */\nisXML = Sizzle.isXML = function( elem ) {\n\t// documentElement is verified for cases where it doesn't yet exist\n\t// (such as loading iframes in IE - #4833)\n\tvar documentElement = elem && (elem.ownerDocument || elem).documentElement;\n\treturn documentElement ? documentElement.nodeName !== \"HTML\" : false;\n};\n\n/**\n * Sets document-related variables once based on the current document\n * @param {Element|Object} [doc] An element or document object to use to set the document\n * @returns {Object} Returns the current document\n */\nsetDocument = Sizzle.setDocument = function( node ) {\n\tvar hasCompare, subWindow,\n\t\tdoc = node ? node.ownerDocument || node : preferredDoc;\n\n\t// Return early if doc is invalid or already selected\n\tif ( doc === document || doc.nodeType !== 9 || !doc.documentElement ) {\n\t\treturn document;\n\t}\n\n\t// Update global variables\n\tdocument = doc;\n\tdocElem = document.documentElement;\n\tdocumentIsHTML = !isXML( document );\n\n\t// Support: IE 9-11, Edge\n\t// Accessing iframe documents after unload throws \"permission denied\" errors (jQuery #13936)\n\tif ( preferredDoc !== document &&\n\t\t(subWindow = document.defaultView) && subWindow.top !== subWindow ) {\n\n\t\t// Support: IE 11, Edge\n\t\tif ( subWindow.addEventListener ) {\n\t\t\tsubWindow.addEventListener( \"unload\", unloadHandler, false );\n\n\t\t// Support: IE 9 - 10 only\n\t\t} else if ( subWindow.attachEvent ) {\n\t\t\tsubWindow.attachEvent( \"onunload\", unloadHandler );\n\t\t}\n\t}\n\n\t/* Attributes\n\t---------------------------------------------------------------------- */\n\n\t// Support: IE<8\n\t// Verify that getAttribute really returns attributes and not properties\n\t// (excepting IE8 booleans)\n\tsupport.attributes = assert(function( el ) {\n\t\tel.className = \"i\";\n\t\treturn !el.getAttribute(\"className\");\n\t});\n\n\t/* getElement(s)By*\n\t---------------------------------------------------------------------- */\n\n\t// Check if getElementsByTagName(\"*\") returns only elements\n\tsupport.getElementsByTagName = assert(function( el ) {\n\t\tel.appendChild( document.createComment(\"\") );\n\t\treturn !el.getElementsByTagName(\"*\").length;\n\t});\n\n\t// Support: IE<9\n\tsupport.getElementsByClassName = rnative.test( document.getElementsByClassName );\n\n\t// Support: IE<10\n\t// Check if getElementById returns elements by name\n\t// The broken getElementById methods don't pick up programmatically-set names,\n\t// so use a roundabout getElementsByName test\n\tsupport.getById = assert(function( el ) {\n\t\tdocElem.appendChild( el ).id = expando;\n\t\treturn !document.getElementsByName || !document.getElementsByName( expando ).length;\n\t});\n\n\t// ID find and filter\n\tif ( support.getById ) {\n\t\tExpr.find[\"ID\"] = function( id, context ) {\n\t\t\tif ( typeof context.getElementById !== \"undefined\" && documentIsHTML ) {\n\t\t\t\tvar m = context.getElementById( id );\n\t\t\t\treturn m ? [ m ] : [];\n\t\t\t}\n\t\t};\n\t\tExpr.filter[\"ID\"] = function( id ) {\n\t\t\tvar attrId = id.replace( runescape, funescape );\n\t\t\treturn function( elem ) {\n\t\t\t\treturn elem.getAttribute(\"id\") === attrId;\n\t\t\t};\n\t\t};\n\t} else {\n\t\t// Support: IE6/7\n\t\t// getElementById is not reliable as a find shortcut\n\t\tdelete Expr.find[\"ID\"];\n\n\t\tExpr.filter[\"ID\"] =  function( id ) {\n\t\t\tvar attrId = id.replace( runescape, funescape );\n\t\t\treturn function( elem ) {\n\t\t\t\tvar node = typeof elem.getAttributeNode !== \"undefined\" &&\n\t\t\t\t\telem.getAttributeNode(\"id\");\n\t\t\t\treturn node && node.value === attrId;\n\t\t\t};\n\t\t};\n\t}\n\n\t// Tag\n\tExpr.find[\"TAG\"] = support.getElementsByTagName ?\n\t\tfunction( tag, context ) {\n\t\t\tif ( typeof context.getElementsByTagName !== \"undefined\" ) {\n\t\t\t\treturn context.getElementsByTagName( tag );\n\n\t\t\t// DocumentFragment nodes don't have gEBTN\n\t\t\t} else if ( support.qsa ) {\n\t\t\t\treturn context.querySelectorAll( tag );\n\t\t\t}\n\t\t} :\n\n\t\tfunction( tag, context ) {\n\t\t\tvar elem,\n\t\t\t\ttmp = [],\n\t\t\t\ti = 0,\n\t\t\t\t// By happy coincidence, a (broken) gEBTN appears on DocumentFragment nodes too\n\t\t\t\tresults = context.getElementsByTagName( tag );\n\n\t\t\t// Filter out possible comments\n\t\t\tif ( tag === \"*\" ) {\n\t\t\t\twhile ( (elem = results[i++]) ) {\n\t\t\t\t\tif ( elem.nodeType === 1 ) {\n\t\t\t\t\t\ttmp.push( elem );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn tmp;\n\t\t\t}\n\t\t\treturn results;\n\t\t};\n\n\t// Class\n\tExpr.find[\"CLASS\"] = support.getElementsByClassName && function( className, context ) {\n\t\tif ( typeof context.getElementsByClassName !== \"undefined\" && documentIsHTML ) {\n\t\t\treturn context.getElementsByClassName( className );\n\t\t}\n\t};\n\n\t/* QSA/matchesSelector\n\t---------------------------------------------------------------------- */\n\n\t// QSA and matchesSelector support\n\n\t// matchesSelector(:active) reports false when true (IE9/Opera 11.5)\n\trbuggyMatches = [];\n\n\t// qSa(:focus) reports false when true (Chrome 21)\n\t// We allow this because of a bug in IE8/9 that throws an error\n\t// whenever `document.activeElement` is accessed on an iframe\n\t// So, we allow :focus to pass through QSA all the time to avoid the IE error\n\t// See https://bugs.jquery.com/ticket/13378\n\trbuggyQSA = [];\n\n\tif ( (support.qsa = rnative.test( document.querySelectorAll )) ) {\n\t\t// Build QSA regex\n\t\t// Regex strategy adopted from Diego Perini\n\t\tassert(function( el ) {\n\t\t\t// Select is set to empty string on purpose\n\t\t\t// This is to test IE's treatment of not explicitly\n\t\t\t// setting a boolean content attribute,\n\t\t\t// since its presence should be enough\n\t\t\t// https://bugs.jquery.com/ticket/12359\n\t\t\tdocElem.appendChild( el ).innerHTML = \"<a id='\" + expando + \"'></a>\" +\n\t\t\t\t\"<select id='\" + expando + \"-\\r\\\\' msallowcapture=''>\" +\n\t\t\t\t\"<option selected=''></option></select>\";\n\n\t\t\t// Support: IE8, Opera 11-12.16\n\t\t\t// Nothing should be selected when empty strings follow ^= or $= or *=\n\t\t\t// The test attribute must be unknown in Opera but \"safe\" for WinRT\n\t\t\t// https://msdn.microsoft.com/en-us/library/ie/hh465388.aspx#attribute_section\n\t\t\tif ( el.querySelectorAll(\"[msallowcapture^='']\").length ) {\n\t\t\t\trbuggyQSA.push( \"[*^$]=\" + whitespace + \"*(?:''|\\\"\\\")\" );\n\t\t\t}\n\n\t\t\t// Support: IE8\n\t\t\t// Boolean attributes and \"value\" are not treated correctly\n\t\t\tif ( !el.querySelectorAll(\"[selected]\").length ) {\n\t\t\t\trbuggyQSA.push( \"\\\\[\" + whitespace + \"*(?:value|\" + booleans + \")\" );\n\t\t\t}\n\n\t\t\t// Support: Chrome<29, Android<4.4, Safari<7.0+, iOS<7.0+, PhantomJS<1.9.8+\n\t\t\tif ( !el.querySelectorAll( \"[id~=\" + expando + \"-]\" ).length ) {\n\t\t\t\trbuggyQSA.push(\"~=\");\n\t\t\t}\n\n\t\t\t// Webkit/Opera - :checked should return selected option elements\n\t\t\t// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked\n\t\t\t// IE8 throws error here and will not see later tests\n\t\t\tif ( !el.querySelectorAll(\":checked\").length ) {\n\t\t\t\trbuggyQSA.push(\":checked\");\n\t\t\t}\n\n\t\t\t// Support: Safari 8+, iOS 8+\n\t\t\t// https://bugs.webkit.org/show_bug.cgi?id=136851\n\t\t\t// In-page `selector#id sibling-combinator selector` fails\n\t\t\tif ( !el.querySelectorAll( \"a#\" + expando + \"+*\" ).length ) {\n\t\t\t\trbuggyQSA.push(\".#.+[+~]\");\n\t\t\t}\n\t\t});\n\n\t\tassert(function( el ) {\n\t\t\tel.innerHTML = \"<a href='' disabled='disabled'></a>\" +\n\t\t\t\t\"<select disabled='disabled'><option/></select>\";\n\n\t\t\t// Support: Windows 8 Native Apps\n\t\t\t// The type and name attributes are restricted during .innerHTML assignment\n\t\t\tvar input = document.createElement(\"input\");\n\t\t\tinput.setAttribute( \"type\", \"hidden\" );\n\t\t\tel.appendChild( input ).setAttribute( \"name\", \"D\" );\n\n\t\t\t// Support: IE8\n\t\t\t// Enforce case-sensitivity of name attribute\n\t\t\tif ( el.querySelectorAll(\"[name=d]\").length ) {\n\t\t\t\trbuggyQSA.push( \"name\" + whitespace + \"*[*^$|!~]?=\" );\n\t\t\t}\n\n\t\t\t// FF 3.5 - :enabled/:disabled and hidden elements (hidden elements are still enabled)\n\t\t\t// IE8 throws error here and will not see later tests\n\t\t\tif ( el.querySelectorAll(\":enabled\").length !== 2 ) {\n\t\t\t\trbuggyQSA.push( \":enabled\", \":disabled\" );\n\t\t\t}\n\n\t\t\t// Support: IE9-11+\n\t\t\t// IE's :disabled selector does not pick up the children of disabled fieldsets\n\t\t\tdocElem.appendChild( el ).disabled = true;\n\t\t\tif ( el.querySelectorAll(\":disabled\").length !== 2 ) {\n\t\t\t\trbuggyQSA.push( \":enabled\", \":disabled\" );\n\t\t\t}\n\n\t\t\t// Opera 10-11 does not throw on post-comma invalid pseudos\n\t\t\tel.querySelectorAll(\"*,:x\");\n\t\t\trbuggyQSA.push(\",.*:\");\n\t\t});\n\t}\n\n\tif ( (support.matchesSelector = rnative.test( (matches = docElem.matches ||\n\t\tdocElem.webkitMatchesSelector ||\n\t\tdocElem.mozMatchesSelector ||\n\t\tdocElem.oMatchesSelector ||\n\t\tdocElem.msMatchesSelector) )) ) {\n\n\t\tassert(function( el ) {\n\t\t\t// Check to see if it's possible to do matchesSelector\n\t\t\t// on a disconnected node (IE 9)\n\t\t\tsupport.disconnectedMatch = matches.call( el, \"*\" );\n\n\t\t\t// This should fail with an exception\n\t\t\t// Gecko does not error, returns false instead\n\t\t\tmatches.call( el, \"[s!='']:x\" );\n\t\t\trbuggyMatches.push( \"!=\", pseudos );\n\t\t});\n\t}\n\n\trbuggyQSA = rbuggyQSA.length && new RegExp( rbuggyQSA.join(\"|\") );\n\trbuggyMatches = rbuggyMatches.length && new RegExp( rbuggyMatches.join(\"|\") );\n\n\t/* Contains\n\t---------------------------------------------------------------------- */\n\thasCompare = rnative.test( docElem.compareDocumentPosition );\n\n\t// Element contains another\n\t// Purposefully self-exclusive\n\t// As in, an element does not contain itself\n\tcontains = hasCompare || rnative.test( docElem.contains ) ?\n\t\tfunction( a, b ) {\n\t\t\tvar adown = a.nodeType === 9 ? a.documentElement : a,\n\t\t\t\tbup = b && b.parentNode;\n\t\t\treturn a === bup || !!( bup && bup.nodeType === 1 && (\n\t\t\t\tadown.contains ?\n\t\t\t\t\tadown.contains( bup ) :\n\t\t\t\t\ta.compareDocumentPosition && a.compareDocumentPosition( bup ) & 16\n\t\t\t));\n\t\t} :\n\t\tfunction( a, b ) {\n\t\t\tif ( b ) {\n\t\t\t\twhile ( (b = b.parentNode) ) {\n\t\t\t\t\tif ( b === a ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\n\t/* Sorting\n\t---------------------------------------------------------------------- */\n\n\t// Document order sorting\n\tsortOrder = hasCompare ?\n\tfunction( a, b ) {\n\n\t\t// Flag for duplicate removal\n\t\tif ( a === b ) {\n\t\t\thasDuplicate = true;\n\t\t\treturn 0;\n\t\t}\n\n\t\t// Sort on method existence if only one input has compareDocumentPosition\n\t\tvar compare = !a.compareDocumentPosition - !b.compareDocumentPosition;\n\t\tif ( compare ) {\n\t\t\treturn compare;\n\t\t}\n\n\t\t// Calculate position if both inputs belong to the same document\n\t\tcompare = ( a.ownerDocument || a ) === ( b.ownerDocument || b ) ?\n\t\t\ta.compareDocumentPosition( b ) :\n\n\t\t\t// Otherwise we know they are disconnected\n\t\t\t1;\n\n\t\t// Disconnected nodes\n\t\tif ( compare & 1 ||\n\t\t\t(!support.sortDetached && b.compareDocumentPosition( a ) === compare) ) {\n\n\t\t\t// Choose the first element that is related to our preferred document\n\t\t\tif ( a === document || a.ownerDocument === preferredDoc && contains(preferredDoc, a) ) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\tif ( b === document || b.ownerDocument === preferredDoc && contains(preferredDoc, b) ) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\t// Maintain original order\n\t\t\treturn sortInput ?\n\t\t\t\t( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :\n\t\t\t\t0;\n\t\t}\n\n\t\treturn compare & 4 ? -1 : 1;\n\t} :\n\tfunction( a, b ) {\n\t\t// Exit early if the nodes are identical\n\t\tif ( a === b ) {\n\t\t\thasDuplicate = true;\n\t\t\treturn 0;\n\t\t}\n\n\t\tvar cur,\n\t\t\ti = 0,\n\t\t\taup = a.parentNode,\n\t\t\tbup = b.parentNode,\n\t\t\tap = [ a ],\n\t\t\tbp = [ b ];\n\n\t\t// Parentless nodes are either documents or disconnected\n\t\tif ( !aup || !bup ) {\n\t\t\treturn a === document ? -1 :\n\t\t\t\tb === document ? 1 :\n\t\t\t\taup ? -1 :\n\t\t\t\tbup ? 1 :\n\t\t\t\tsortInput ?\n\t\t\t\t( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :\n\t\t\t\t0;\n\n\t\t// If the nodes are siblings, we can do a quick check\n\t\t} else if ( aup === bup ) {\n\t\t\treturn siblingCheck( a, b );\n\t\t}\n\n\t\t// Otherwise we need full lists of their ancestors for comparison\n\t\tcur = a;\n\t\twhile ( (cur = cur.parentNode) ) {\n\t\t\tap.unshift( cur );\n\t\t}\n\t\tcur = b;\n\t\twhile ( (cur = cur.parentNode) ) {\n\t\t\tbp.unshift( cur );\n\t\t}\n\n\t\t// Walk down the tree looking for a discrepancy\n\t\twhile ( ap[i] === bp[i] ) {\n\t\t\ti++;\n\t\t}\n\n\t\treturn i ?\n\t\t\t// Do a sibling check if the nodes have a common ancestor\n\t\t\tsiblingCheck( ap[i], bp[i] ) :\n\n\t\t\t// Otherwise nodes in our document sort first\n\t\t\tap[i] === preferredDoc ? -1 :\n\t\t\tbp[i] === preferredDoc ? 1 :\n\t\t\t0;\n\t};\n\n\treturn document;\n};\n\nSizzle.matches = function( expr, elements ) {\n\treturn Sizzle( expr, null, null, elements );\n};\n\nSizzle.matchesSelector = function( elem, expr ) {\n\t// Set document vars if needed\n\tif ( ( elem.ownerDocument || elem ) !== document ) {\n\t\tsetDocument( elem );\n\t}\n\n\t// Make sure that attribute selectors are quoted\n\texpr = expr.replace( rattributeQuotes, \"='$1']\" );\n\n\tif ( support.matchesSelector && documentIsHTML &&\n\t\t!compilerCache[ expr + \" \" ] &&\n\t\t( !rbuggyMatches || !rbuggyMatches.test( expr ) ) &&\n\t\t( !rbuggyQSA     || !rbuggyQSA.test( expr ) ) ) {\n\n\t\ttry {\n\t\t\tvar ret = matches.call( elem, expr );\n\n\t\t\t// IE 9's matchesSelector returns false on disconnected nodes\n\t\t\tif ( ret || support.disconnectedMatch ||\n\t\t\t\t\t// As well, disconnected nodes are said to be in a document\n\t\t\t\t\t// fragment in IE 9\n\t\t\t\t\telem.document && elem.document.nodeType !== 11 ) {\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t} catch (e) {}\n\t}\n\n\treturn Sizzle( expr, document, null, [ elem ] ).length > 0;\n};\n\nSizzle.contains = function( context, elem ) {\n\t// Set document vars if needed\n\tif ( ( context.ownerDocument || context ) !== document ) {\n\t\tsetDocument( context );\n\t}\n\treturn contains( context, elem );\n};\n\nSizzle.attr = function( elem, name ) {\n\t// Set document vars if needed\n\tif ( ( elem.ownerDocument || elem ) !== document ) {\n\t\tsetDocument( elem );\n\t}\n\n\tvar fn = Expr.attrHandle[ name.toLowerCase() ],\n\t\t// Don't get fooled by Object.prototype properties (jQuery #13807)\n\t\tval = fn && hasOwn.call( Expr.attrHandle, name.toLowerCase() ) ?\n\t\t\tfn( elem, name, !documentIsHTML ) :\n\t\t\tundefined;\n\n\treturn val !== undefined ?\n\t\tval :\n\t\tsupport.attributes || !documentIsHTML ?\n\t\t\telem.getAttribute( name ) :\n\t\t\t(val = elem.getAttributeNode(name)) && val.specified ?\n\t\t\t\tval.value :\n\t\t\t\tnull;\n};\n\nSizzle.escape = function( sel ) {\n\treturn (sel + \"\").replace( rcssescape, fcssescape );\n};\n\nSizzle.error = function( msg ) {\n\tthrow new Error( \"Syntax error, unrecognized expression: \" + msg );\n};\n\n/**\n * Document sorting and removing duplicates\n * @param {ArrayLike} results\n */\nSizzle.uniqueSort = function( results ) {\n\tvar elem,\n\t\tduplicates = [],\n\t\tj = 0,\n\t\ti = 0;\n\n\t// Unless we *know* we can detect duplicates, assume their presence\n\thasDuplicate = !support.detectDuplicates;\n\tsortInput = !support.sortStable && results.slice( 0 );\n\tresults.sort( sortOrder );\n\n\tif ( hasDuplicate ) {\n\t\twhile ( (elem = results[i++]) ) {\n\t\t\tif ( elem === results[ i ] ) {\n\t\t\t\tj = duplicates.push( i );\n\t\t\t}\n\t\t}\n\t\twhile ( j-- ) {\n\t\t\tresults.splice( duplicates[ j ], 1 );\n\t\t}\n\t}\n\n\t// Clear input after sorting to release objects\n\t// See https://github.com/jquery/sizzle/pull/225\n\tsortInput = null;\n\n\treturn results;\n};\n\n/**\n * Utility function for retrieving the text value of an array of DOM nodes\n * @param {Array|Element} elem\n */\ngetText = Sizzle.getText = function( elem ) {\n\tvar node,\n\t\tret = \"\",\n\t\ti = 0,\n\t\tnodeType = elem.nodeType;\n\n\tif ( !nodeType ) {\n\t\t// If no nodeType, this is expected to be an array\n\t\twhile ( (node = elem[i++]) ) {\n\t\t\t// Do not traverse comment nodes\n\t\t\tret += getText( node );\n\t\t}\n\t} else if ( nodeType === 1 || nodeType === 9 || nodeType === 11 ) {\n\t\t// Use textContent for elements\n\t\t// innerText usage removed for consistency of new lines (jQuery #11153)\n\t\tif ( typeof elem.textContent === \"string\" ) {\n\t\t\treturn elem.textContent;\n\t\t} else {\n\t\t\t// Traverse its children\n\t\t\tfor ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {\n\t\t\t\tret += getText( elem );\n\t\t\t}\n\t\t}\n\t} else if ( nodeType === 3 || nodeType === 4 ) {\n\t\treturn elem.nodeValue;\n\t}\n\t// Do not include comment or processing instruction nodes\n\n\treturn ret;\n};\n\nExpr = Sizzle.selectors = {\n\n\t// Can be adjusted by the user\n\tcacheLength: 50,\n\n\tcreatePseudo: markFunction,\n\n\tmatch: matchExpr,\n\n\tattrHandle: {},\n\n\tfind: {},\n\n\trelative: {\n\t\t\">\": { dir: \"parentNode\", first: true },\n\t\t\" \": { dir: \"parentNode\" },\n\t\t\"+\": { dir: \"previousSibling\", first: true },\n\t\t\"~\": { dir: \"previousSibling\" }\n\t},\n\n\tpreFilter: {\n\t\t\"ATTR\": function( match ) {\n\t\t\tmatch[1] = match[1].replace( runescape, funescape );\n\n\t\t\t// Move the given value to match[3] whether quoted or unquoted\n\t\t\tmatch[3] = ( match[3] || match[4] || match[5] || \"\" ).replace( runescape, funescape );\n\n\t\t\tif ( match[2] === \"~=\" ) {\n\t\t\t\tmatch[3] = \" \" + match[3] + \" \";\n\t\t\t}\n\n\t\t\treturn match.slice( 0, 4 );\n\t\t},\n\n\t\t\"CHILD\": function( match ) {\n\t\t\t/* matches from matchExpr[\"CHILD\"]\n\t\t\t\t1 type (only|nth|...)\n\t\t\t\t2 what (child|of-type)\n\t\t\t\t3 argument (even|odd|\\d*|\\d*n([+-]\\d+)?|...)\n\t\t\t\t4 xn-component of xn+y argument ([+-]?\\d*n|)\n\t\t\t\t5 sign of xn-component\n\t\t\t\t6 x of xn-component\n\t\t\t\t7 sign of y-component\n\t\t\t\t8 y of y-component\n\t\t\t*/\n\t\t\tmatch[1] = match[1].toLowerCase();\n\n\t\t\tif ( match[1].slice( 0, 3 ) === \"nth\" ) {\n\t\t\t\t// nth-* requires argument\n\t\t\t\tif ( !match[3] ) {\n\t\t\t\t\tSizzle.error( match[0] );\n\t\t\t\t}\n\n\t\t\t\t// numeric x and y parameters for Expr.filter.CHILD\n\t\t\t\t// remember that false/true cast respectively to 0/1\n\t\t\t\tmatch[4] = +( match[4] ? match[5] + (match[6] || 1) : 2 * ( match[3] === \"even\" || match[3] === \"odd\" ) );\n\t\t\t\tmatch[5] = +( ( match[7] + match[8] ) || match[3] === \"odd\" );\n\n\t\t\t// other types prohibit arguments\n\t\t\t} else if ( match[3] ) {\n\t\t\t\tSizzle.error( match[0] );\n\t\t\t}\n\n\t\t\treturn match;\n\t\t},\n\n\t\t\"PSEUDO\": function( match ) {\n\t\t\tvar excess,\n\t\t\t\tunquoted = !match[6] && match[2];\n\n\t\t\tif ( matchExpr[\"CHILD\"].test( match[0] ) ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\t// Accept quoted arguments as-is\n\t\t\tif ( match[3] ) {\n\t\t\t\tmatch[2] = match[4] || match[5] || \"\";\n\n\t\t\t// Strip excess characters from unquoted arguments\n\t\t\t} else if ( unquoted && rpseudo.test( unquoted ) &&\n\t\t\t\t// Get excess from tokenize (recursively)\n\t\t\t\t(excess = tokenize( unquoted, true )) &&\n\t\t\t\t// advance to the next closing parenthesis\n\t\t\t\t(excess = unquoted.indexOf( \")\", unquoted.length - excess ) - unquoted.length) ) {\n\n\t\t\t\t// excess is a negative index\n\t\t\t\tmatch[0] = match[0].slice( 0, excess );\n\t\t\t\tmatch[2] = unquoted.slice( 0, excess );\n\t\t\t}\n\n\t\t\t// Return only captures needed by the pseudo filter method (type and argument)\n\t\t\treturn match.slice( 0, 3 );\n\t\t}\n\t},\n\n\tfilter: {\n\n\t\t\"TAG\": function( nodeNameSelector ) {\n\t\t\tvar nodeName = nodeNameSelector.replace( runescape, funescape ).toLowerCase();\n\t\t\treturn nodeNameSelector === \"*\" ?\n\t\t\t\tfunction() { return true; } :\n\t\t\t\tfunction( elem ) {\n\t\t\t\t\treturn elem.nodeName && elem.nodeName.toLowerCase() === nodeName;\n\t\t\t\t};\n\t\t},\n\n\t\t\"CLASS\": function( className ) {\n\t\t\tvar pattern = classCache[ className + \" \" ];\n\n\t\t\treturn pattern ||\n\t\t\t\t(pattern = new RegExp( \"(^|\" + whitespace + \")\" + className + \"(\" + whitespace + \"|$)\" )) &&\n\t\t\t\tclassCache( className, function( elem ) {\n\t\t\t\t\treturn pattern.test( typeof elem.className === \"string\" && elem.className || typeof elem.getAttribute !== \"undefined\" && elem.getAttribute(\"class\") || \"\" );\n\t\t\t\t});\n\t\t},\n\n\t\t\"ATTR\": function( name, operator, check ) {\n\t\t\treturn function( elem ) {\n\t\t\t\tvar result = Sizzle.attr( elem, name );\n\n\t\t\t\tif ( result == null ) {\n\t\t\t\t\treturn operator === \"!=\";\n\t\t\t\t}\n\t\t\t\tif ( !operator ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tresult += \"\";\n\n\t\t\t\treturn operator === \"=\" ? result === check :\n\t\t\t\t\toperator === \"!=\" ? result !== check :\n\t\t\t\t\toperator === \"^=\" ? check && result.indexOf( check ) === 0 :\n\t\t\t\t\toperator === \"*=\" ? check && result.indexOf( check ) > -1 :\n\t\t\t\t\toperator === \"$=\" ? check && result.slice( -check.length ) === check :\n\t\t\t\t\toperator === \"~=\" ? ( \" \" + result.replace( rwhitespace, \" \" ) + \" \" ).indexOf( check ) > -1 :\n\t\t\t\t\toperator === \"|=\" ? result === check || result.slice( 0, check.length + 1 ) === check + \"-\" :\n\t\t\t\t\tfalse;\n\t\t\t};\n\t\t},\n\n\t\t\"CHILD\": function( type, what, argument, first, last ) {\n\t\t\tvar simple = type.slice( 0, 3 ) !== \"nth\",\n\t\t\t\tforward = type.slice( -4 ) !== \"last\",\n\t\t\t\tofType = what === \"of-type\";\n\n\t\t\treturn first === 1 && last === 0 ?\n\n\t\t\t\t// Shortcut for :nth-*(n)\n\t\t\t\tfunction( elem ) {\n\t\t\t\t\treturn !!elem.parentNode;\n\t\t\t\t} :\n\n\t\t\t\tfunction( elem, context, xml ) {\n\t\t\t\t\tvar cache, uniqueCache, outerCache, node, nodeIndex, start,\n\t\t\t\t\t\tdir = simple !== forward ? \"nextSibling\" : \"previousSibling\",\n\t\t\t\t\t\tparent = elem.parentNode,\n\t\t\t\t\t\tname = ofType && elem.nodeName.toLowerCase(),\n\t\t\t\t\t\tuseCache = !xml && !ofType,\n\t\t\t\t\t\tdiff = false;\n\n\t\t\t\t\tif ( parent ) {\n\n\t\t\t\t\t\t// :(first|last|only)-(child|of-type)\n\t\t\t\t\t\tif ( simple ) {\n\t\t\t\t\t\t\twhile ( dir ) {\n\t\t\t\t\t\t\t\tnode = elem;\n\t\t\t\t\t\t\t\twhile ( (node = node[ dir ]) ) {\n\t\t\t\t\t\t\t\t\tif ( ofType ?\n\t\t\t\t\t\t\t\t\t\tnode.nodeName.toLowerCase() === name :\n\t\t\t\t\t\t\t\t\t\tnode.nodeType === 1 ) {\n\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// Reverse direction for :only-* (if we haven't yet done so)\n\t\t\t\t\t\t\t\tstart = dir = type === \"only\" && !start && \"nextSibling\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tstart = [ forward ? parent.firstChild : parent.lastChild ];\n\n\t\t\t\t\t\t// non-xml :nth-child(...) stores cache data on `parent`\n\t\t\t\t\t\tif ( forward && useCache ) {\n\n\t\t\t\t\t\t\t// Seek `elem` from a previously-cached index\n\n\t\t\t\t\t\t\t// ...in a gzip-friendly way\n\t\t\t\t\t\t\tnode = parent;\n\t\t\t\t\t\t\touterCache = node[ expando ] || (node[ expando ] = {});\n\n\t\t\t\t\t\t\t// Support: IE <9 only\n\t\t\t\t\t\t\t// Defend against cloned attroperties (jQuery gh-1709)\n\t\t\t\t\t\t\tuniqueCache = outerCache[ node.uniqueID ] ||\n\t\t\t\t\t\t\t\t(outerCache[ node.uniqueID ] = {});\n\n\t\t\t\t\t\t\tcache = uniqueCache[ type ] || [];\n\t\t\t\t\t\t\tnodeIndex = cache[ 0 ] === dirruns && cache[ 1 ];\n\t\t\t\t\t\t\tdiff = nodeIndex && cache[ 2 ];\n\t\t\t\t\t\t\tnode = nodeIndex && parent.childNodes[ nodeIndex ];\n\n\t\t\t\t\t\t\twhile ( (node = ++nodeIndex && node && node[ dir ] ||\n\n\t\t\t\t\t\t\t\t// Fallback to seeking `elem` from the start\n\t\t\t\t\t\t\t\t(diff = nodeIndex = 0) || start.pop()) ) {\n\n\t\t\t\t\t\t\t\t// When found, cache indexes on `parent` and break\n\t\t\t\t\t\t\t\tif ( node.nodeType === 1 && ++diff && node === elem ) {\n\t\t\t\t\t\t\t\t\tuniqueCache[ type ] = [ dirruns, nodeIndex, diff ];\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Use previously-cached element index if available\n\t\t\t\t\t\t\tif ( useCache ) {\n\t\t\t\t\t\t\t\t// ...in a gzip-friendly way\n\t\t\t\t\t\t\t\tnode = elem;\n\t\t\t\t\t\t\t\touterCache = node[ expando ] || (node[ expando ] = {});\n\n\t\t\t\t\t\t\t\t// Support: IE <9 only\n\t\t\t\t\t\t\t\t// Defend against cloned attroperties (jQuery gh-1709)\n\t\t\t\t\t\t\t\tuniqueCache = outerCache[ node.uniqueID ] ||\n\t\t\t\t\t\t\t\t\t(outerCache[ node.uniqueID ] = {});\n\n\t\t\t\t\t\t\t\tcache = uniqueCache[ type ] || [];\n\t\t\t\t\t\t\t\tnodeIndex = cache[ 0 ] === dirruns && cache[ 1 ];\n\t\t\t\t\t\t\t\tdiff = nodeIndex;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// xml :nth-child(...)\n\t\t\t\t\t\t\t// or :nth-last-child(...) or :nth(-last)?-of-type(...)\n\t\t\t\t\t\t\tif ( diff === false ) {\n\t\t\t\t\t\t\t\t// Use the same loop as above to seek `elem` from the start\n\t\t\t\t\t\t\t\twhile ( (node = ++nodeIndex && node && node[ dir ] ||\n\t\t\t\t\t\t\t\t\t(diff = nodeIndex = 0) || start.pop()) ) {\n\n\t\t\t\t\t\t\t\t\tif ( ( ofType ?\n\t\t\t\t\t\t\t\t\t\tnode.nodeName.toLowerCase() === name :\n\t\t\t\t\t\t\t\t\t\tnode.nodeType === 1 ) &&\n\t\t\t\t\t\t\t\t\t\t++diff ) {\n\n\t\t\t\t\t\t\t\t\t\t// Cache the index of each encountered element\n\t\t\t\t\t\t\t\t\t\tif ( useCache ) {\n\t\t\t\t\t\t\t\t\t\t\touterCache = node[ expando ] || (node[ expando ] = {});\n\n\t\t\t\t\t\t\t\t\t\t\t// Support: IE <9 only\n\t\t\t\t\t\t\t\t\t\t\t// Defend against cloned attroperties (jQuery gh-1709)\n\t\t\t\t\t\t\t\t\t\t\tuniqueCache = outerCache[ node.uniqueID ] ||\n\t\t\t\t\t\t\t\t\t\t\t\t(outerCache[ node.uniqueID ] = {});\n\n\t\t\t\t\t\t\t\t\t\t\tuniqueCache[ type ] = [ dirruns, diff ];\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tif ( node === elem ) {\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Incorporate the offset, then check against cycle size\n\t\t\t\t\t\tdiff -= last;\n\t\t\t\t\t\treturn diff === first || ( diff % first === 0 && diff / first >= 0 );\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t},\n\n\t\t\"PSEUDO\": function( pseudo, argument ) {\n\t\t\t// pseudo-class names are case-insensitive\n\t\t\t// http://www.w3.org/TR/selectors/#pseudo-classes\n\t\t\t// Prioritize by case sensitivity in case custom pseudos are added with uppercase letters\n\t\t\t// Remember that setFilters inherits from pseudos\n\t\t\tvar args,\n\t\t\t\tfn = Expr.pseudos[ pseudo ] || Expr.setFilters[ pseudo.toLowerCase() ] ||\n\t\t\t\t\tSizzle.error( \"unsupported pseudo: \" + pseudo );\n\n\t\t\t// The user may use createPseudo to indicate that\n\t\t\t// arguments are needed to create the filter function\n\t\t\t// just as Sizzle does\n\t\t\tif ( fn[ expando ] ) {\n\t\t\t\treturn fn( argument );\n\t\t\t}\n\n\t\t\t// But maintain support for old signatures\n\t\t\tif ( fn.length > 1 ) {\n\t\t\t\targs = [ pseudo, pseudo, \"\", argument ];\n\t\t\t\treturn Expr.setFilters.hasOwnProperty( pseudo.toLowerCase() ) ?\n\t\t\t\t\tmarkFunction(function( seed, matches ) {\n\t\t\t\t\t\tvar idx,\n\t\t\t\t\t\t\tmatched = fn( seed, argument ),\n\t\t\t\t\t\t\ti = matched.length;\n\t\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\t\tidx = indexOf( seed, matched[i] );\n\t\t\t\t\t\t\tseed[ idx ] = !( matches[ idx ] = matched[i] );\n\t\t\t\t\t\t}\n\t\t\t\t\t}) :\n\t\t\t\t\tfunction( elem ) {\n\t\t\t\t\t\treturn fn( elem, 0, args );\n\t\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn fn;\n\t\t}\n\t},\n\n\tpseudos: {\n\t\t// Potentially complex pseudos\n\t\t\"not\": markFunction(function( selector ) {\n\t\t\t// Trim the selector passed to compile\n\t\t\t// to avoid treating leading and trailing\n\t\t\t// spaces as combinators\n\t\t\tvar input = [],\n\t\t\t\tresults = [],\n\t\t\t\tmatcher = compile( selector.replace( rtrim, \"$1\" ) );\n\n\t\t\treturn matcher[ expando ] ?\n\t\t\t\tmarkFunction(function( seed, matches, context, xml ) {\n\t\t\t\t\tvar elem,\n\t\t\t\t\t\tunmatched = matcher( seed, null, xml, [] ),\n\t\t\t\t\t\ti = seed.length;\n\n\t\t\t\t\t// Match elements unmatched by `matcher`\n\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\tif ( (elem = unmatched[i]) ) {\n\t\t\t\t\t\t\tseed[i] = !(matches[i] = elem);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}) :\n\t\t\t\tfunction( elem, context, xml ) {\n\t\t\t\t\tinput[0] = elem;\n\t\t\t\t\tmatcher( input, null, xml, results );\n\t\t\t\t\t// Don't keep the element (issue #299)\n\t\t\t\t\tinput[0] = null;\n\t\t\t\t\treturn !results.pop();\n\t\t\t\t};\n\t\t}),\n\n\t\t\"has\": markFunction(function( selector ) {\n\t\t\treturn function( elem ) {\n\t\t\t\treturn Sizzle( selector, elem ).length > 0;\n\t\t\t};\n\t\t}),\n\n\t\t\"contains\": markFunction(function( text ) {\n\t\t\ttext = text.replace( runescape, funescape );\n\t\t\treturn function( elem ) {\n\t\t\t\treturn ( elem.textContent || elem.innerText || getText( elem ) ).indexOf( text ) > -1;\n\t\t\t};\n\t\t}),\n\n\t\t// \"Whether an element is represented by a :lang() selector\n\t\t// is based solely on the element's language value\n\t\t// being equal to the identifier C,\n\t\t// or beginning with the identifier C immediately followed by \"-\".\n\t\t// The matching of C against the element's language value is performed case-insensitively.\n\t\t// The identifier C does not have to be a valid language name.\"\n\t\t// http://www.w3.org/TR/selectors/#lang-pseudo\n\t\t\"lang\": markFunction( function( lang ) {\n\t\t\t// lang value must be a valid identifier\n\t\t\tif ( !ridentifier.test(lang || \"\") ) {\n\t\t\t\tSizzle.error( \"unsupported lang: \" + lang );\n\t\t\t}\n\t\t\tlang = lang.replace( runescape, funescape ).toLowerCase();\n\t\t\treturn function( elem ) {\n\t\t\t\tvar elemLang;\n\t\t\t\tdo {\n\t\t\t\t\tif ( (elemLang = documentIsHTML ?\n\t\t\t\t\t\telem.lang :\n\t\t\t\t\t\telem.getAttribute(\"xml:lang\") || elem.getAttribute(\"lang\")) ) {\n\n\t\t\t\t\t\telemLang = elemLang.toLowerCase();\n\t\t\t\t\t\treturn elemLang === lang || elemLang.indexOf( lang + \"-\" ) === 0;\n\t\t\t\t\t}\n\t\t\t\t} while ( (elem = elem.parentNode) && elem.nodeType === 1 );\n\t\t\t\treturn false;\n\t\t\t};\n\t\t}),\n\n\t\t// Miscellaneous\n\t\t\"target\": function( elem ) {\n\t\t\tvar hash = window.location && window.location.hash;\n\t\t\treturn hash && hash.slice( 1 ) === elem.id;\n\t\t},\n\n\t\t\"root\": function( elem ) {\n\t\t\treturn elem === docElem;\n\t\t},\n\n\t\t\"focus\": function( elem ) {\n\t\t\treturn elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);\n\t\t},\n\n\t\t// Boolean properties\n\t\t\"enabled\": createDisabledPseudo( false ),\n\t\t\"disabled\": createDisabledPseudo( true ),\n\n\t\t\"checked\": function( elem ) {\n\t\t\t// In CSS3, :checked should return both checked and selected elements\n\t\t\t// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked\n\t\t\tvar nodeName = elem.nodeName.toLowerCase();\n\t\t\treturn (nodeName === \"input\" && !!elem.checked) || (nodeName === \"option\" && !!elem.selected);\n\t\t},\n\n\t\t\"selected\": function( elem ) {\n\t\t\t// Accessing this property makes selected-by-default\n\t\t\t// options in Safari work properly\n\t\t\tif ( elem.parentNode ) {\n\t\t\t\telem.parentNode.selectedIndex;\n\t\t\t}\n\n\t\t\treturn elem.selected === true;\n\t\t},\n\n\t\t// Contents\n\t\t\"empty\": function( elem ) {\n\t\t\t// http://www.w3.org/TR/selectors/#empty-pseudo\n\t\t\t// :empty is negated by element (1) or content nodes (text: 3; cdata: 4; entity ref: 5),\n\t\t\t//   but not by others (comment: 8; processing instruction: 7; etc.)\n\t\t\t// nodeType < 6 works because attributes (2) do not appear as children\n\t\t\tfor ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {\n\t\t\t\tif ( elem.nodeType < 6 ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\n\t\t\"parent\": function( elem ) {\n\t\t\treturn !Expr.pseudos[\"empty\"]( elem );\n\t\t},\n\n\t\t// Element/input types\n\t\t\"header\": function( elem ) {\n\t\t\treturn rheader.test( elem.nodeName );\n\t\t},\n\n\t\t\"input\": function( elem ) {\n\t\t\treturn rinputs.test( elem.nodeName );\n\t\t},\n\n\t\t\"button\": function( elem ) {\n\t\t\tvar name = elem.nodeName.toLowerCase();\n\t\t\treturn name === \"input\" && elem.type === \"button\" || name === \"button\";\n\t\t},\n\n\t\t\"text\": function( elem ) {\n\t\t\tvar attr;\n\t\t\treturn elem.nodeName.toLowerCase() === \"input\" &&\n\t\t\t\telem.type === \"text\" &&\n\n\t\t\t\t// Support: IE<8\n\t\t\t\t// New HTML5 attribute values (e.g., \"search\") appear with elem.type === \"text\"\n\t\t\t\t( (attr = elem.getAttribute(\"type\")) == null || attr.toLowerCase() === \"text\" );\n\t\t},\n\n\t\t// Position-in-collection\n\t\t\"first\": createPositionalPseudo(function() {\n\t\t\treturn [ 0 ];\n\t\t}),\n\n\t\t\"last\": createPositionalPseudo(function( matchIndexes, length ) {\n\t\t\treturn [ length - 1 ];\n\t\t}),\n\n\t\t\"eq\": createPositionalPseudo(function( matchIndexes, length, argument ) {\n\t\t\treturn [ argument < 0 ? argument + length : argument ];\n\t\t}),\n\n\t\t\"even\": createPositionalPseudo(function( matchIndexes, length ) {\n\t\t\tvar i = 0;\n\t\t\tfor ( ; i < length; i += 2 ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t}),\n\n\t\t\"odd\": createPositionalPseudo(function( matchIndexes, length ) {\n\t\t\tvar i = 1;\n\t\t\tfor ( ; i < length; i += 2 ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t}),\n\n\t\t\"lt\": createPositionalPseudo(function( matchIndexes, length, argument ) {\n\t\t\tvar i = argument < 0 ? argument + length : argument;\n\t\t\tfor ( ; --i >= 0; ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t}),\n\n\t\t\"gt\": createPositionalPseudo(function( matchIndexes, length, argument ) {\n\t\t\tvar i = argument < 0 ? argument + length : argument;\n\t\t\tfor ( ; ++i < length; ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t})\n\t}\n};\n\nExpr.pseudos[\"nth\"] = Expr.pseudos[\"eq\"];\n\n// Add button/input type pseudos\nfor ( i in { radio: true, checkbox: true, file: true, password: true, image: true } ) {\n\tExpr.pseudos[ i ] = createInputPseudo( i );\n}\nfor ( i in { submit: true, reset: true } ) {\n\tExpr.pseudos[ i ] = createButtonPseudo( i );\n}\n\n// Easy API for creating new setFilters\nfunction setFilters() {}\nsetFilters.prototype = Expr.filters = Expr.pseudos;\nExpr.setFilters = new setFilters();\n\ntokenize = Sizzle.tokenize = function( selector, parseOnly ) {\n\tvar matched, match, tokens, type,\n\t\tsoFar, groups, preFilters,\n\t\tcached = tokenCache[ selector + \" \" ];\n\n\tif ( cached ) {\n\t\treturn parseOnly ? 0 : cached.slice( 0 );\n\t}\n\n\tsoFar = selector;\n\tgroups = [];\n\tpreFilters = Expr.preFilter;\n\n\twhile ( soFar ) {\n\n\t\t// Comma and first run\n\t\tif ( !matched || (match = rcomma.exec( soFar )) ) {\n\t\t\tif ( match ) {\n\t\t\t\t// Don't consume trailing commas as valid\n\t\t\t\tsoFar = soFar.slice( match[0].length ) || soFar;\n\t\t\t}\n\t\t\tgroups.push( (tokens = []) );\n\t\t}\n\n\t\tmatched = false;\n\n\t\t// Combinators\n\t\tif ( (match = rcombinators.exec( soFar )) ) {\n\t\t\tmatched = match.shift();\n\t\t\ttokens.push({\n\t\t\t\tvalue: matched,\n\t\t\t\t// Cast descendant combinators to space\n\t\t\t\ttype: match[0].replace( rtrim, \" \" )\n\t\t\t});\n\t\t\tsoFar = soFar.slice( matched.length );\n\t\t}\n\n\t\t// Filters\n\t\tfor ( type in Expr.filter ) {\n\t\t\tif ( (match = matchExpr[ type ].exec( soFar )) && (!preFilters[ type ] ||\n\t\t\t\t(match = preFilters[ type ]( match ))) ) {\n\t\t\t\tmatched = match.shift();\n\t\t\t\ttokens.push({\n\t\t\t\t\tvalue: matched,\n\t\t\t\t\ttype: type,\n\t\t\t\t\tmatches: match\n\t\t\t\t});\n\t\t\t\tsoFar = soFar.slice( matched.length );\n\t\t\t}\n\t\t}\n\n\t\tif ( !matched ) {\n\t\t\tbreak;\n\t\t}\n\t}\n\n\t// Return the length of the invalid excess\n\t// if we're just parsing\n\t// Otherwise, throw an error or return tokens\n\treturn parseOnly ?\n\t\tsoFar.length :\n\t\tsoFar ?\n\t\t\tSizzle.error( selector ) :\n\t\t\t// Cache the tokens\n\t\t\ttokenCache( selector, groups ).slice( 0 );\n};\n\nfunction toSelector( tokens ) {\n\tvar i = 0,\n\t\tlen = tokens.length,\n\t\tselector = \"\";\n\tfor ( ; i < len; i++ ) {\n\t\tselector += tokens[i].value;\n\t}\n\treturn selector;\n}\n\nfunction addCombinator( matcher, combinator, base ) {\n\tvar dir = combinator.dir,\n\t\tskip = combinator.next,\n\t\tkey = skip || dir,\n\t\tcheckNonElements = base && key === \"parentNode\",\n\t\tdoneName = done++;\n\n\treturn combinator.first ?\n\t\t// Check against closest ancestor/preceding element\n\t\tfunction( elem, context, xml ) {\n\t\t\twhile ( (elem = elem[ dir ]) ) {\n\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\treturn matcher( elem, context, xml );\n\t\t\t\t}\n\t\t\t}\n\t\t} :\n\n\t\t// Check against all ancestor/preceding elements\n\t\tfunction( elem, context, xml ) {\n\t\t\tvar oldCache, uniqueCache, outerCache,\n\t\t\t\tnewCache = [ dirruns, doneName ];\n\n\t\t\t// We can't set arbitrary data on XML nodes, so they don't benefit from combinator caching\n\t\t\tif ( xml ) {\n\t\t\t\twhile ( (elem = elem[ dir ]) ) {\n\t\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\t\tif ( matcher( elem, context, xml ) ) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\twhile ( (elem = elem[ dir ]) ) {\n\t\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\t\touterCache = elem[ expando ] || (elem[ expando ] = {});\n\n\t\t\t\t\t\t// Support: IE <9 only\n\t\t\t\t\t\t// Defend against cloned attroperties (jQuery gh-1709)\n\t\t\t\t\t\tuniqueCache = outerCache[ elem.uniqueID ] || (outerCache[ elem.uniqueID ] = {});\n\n\t\t\t\t\t\tif ( skip && skip === elem.nodeName.toLowerCase() ) {\n\t\t\t\t\t\t\telem = elem[ dir ] || elem;\n\t\t\t\t\t\t} else if ( (oldCache = uniqueCache[ key ]) &&\n\t\t\t\t\t\t\toldCache[ 0 ] === dirruns && oldCache[ 1 ] === doneName ) {\n\n\t\t\t\t\t\t\t// Assign to newCache so results back-propagate to previous elements\n\t\t\t\t\t\t\treturn (newCache[ 2 ] = oldCache[ 2 ]);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Reuse newcache so results back-propagate to previous elements\n\t\t\t\t\t\t\tuniqueCache[ key ] = newCache;\n\n\t\t\t\t\t\t\t// A match means we're done; a fail means we have to keep checking\n\t\t\t\t\t\t\tif ( (newCache[ 2 ] = matcher( elem, context, xml )) ) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n}\n\nfunction elementMatcher( matchers ) {\n\treturn matchers.length > 1 ?\n\t\tfunction( elem, context, xml ) {\n\t\t\tvar i = matchers.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( !matchers[i]( elem, context, xml ) ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t} :\n\t\tmatchers[0];\n}\n\nfunction multipleContexts( selector, contexts, results ) {\n\tvar i = 0,\n\t\tlen = contexts.length;\n\tfor ( ; i < len; i++ ) {\n\t\tSizzle( selector, contexts[i], results );\n\t}\n\treturn results;\n}\n\nfunction condense( unmatched, map, filter, context, xml ) {\n\tvar elem,\n\t\tnewUnmatched = [],\n\t\ti = 0,\n\t\tlen = unmatched.length,\n\t\tmapped = map != null;\n\n\tfor ( ; i < len; i++ ) {\n\t\tif ( (elem = unmatched[i]) ) {\n\t\t\tif ( !filter || filter( elem, context, xml ) ) {\n\t\t\t\tnewUnmatched.push( elem );\n\t\t\t\tif ( mapped ) {\n\t\t\t\t\tmap.push( i );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn newUnmatched;\n}\n\nfunction setMatcher( preFilter, selector, matcher, postFilter, postFinder, postSelector ) {\n\tif ( postFilter && !postFilter[ expando ] ) {\n\t\tpostFilter = setMatcher( postFilter );\n\t}\n\tif ( postFinder && !postFinder[ expando ] ) {\n\t\tpostFinder = setMatcher( postFinder, postSelector );\n\t}\n\treturn markFunction(function( seed, results, context, xml ) {\n\t\tvar temp, i, elem,\n\t\t\tpreMap = [],\n\t\t\tpostMap = [],\n\t\t\tpreexisting = results.length,\n\n\t\t\t// Get initial elements from seed or context\n\t\t\telems = seed || multipleContexts( selector || \"*\", context.nodeType ? [ context ] : context, [] ),\n\n\t\t\t// Prefilter to get matcher input, preserving a map for seed-results synchronization\n\t\t\tmatcherIn = preFilter && ( seed || !selector ) ?\n\t\t\t\tcondense( elems, preMap, preFilter, context, xml ) :\n\t\t\t\telems,\n\n\t\t\tmatcherOut = matcher ?\n\t\t\t\t// If we have a postFinder, or filtered seed, or non-seed postFilter or preexisting results,\n\t\t\t\tpostFinder || ( seed ? preFilter : preexisting || postFilter ) ?\n\n\t\t\t\t\t// ...intermediate processing is necessary\n\t\t\t\t\t[] :\n\n\t\t\t\t\t// ...otherwise use results directly\n\t\t\t\t\tresults :\n\t\t\t\tmatcherIn;\n\n\t\t// Find primary matches\n\t\tif ( matcher ) {\n\t\t\tmatcher( matcherIn, matcherOut, context, xml );\n\t\t}\n\n\t\t// Apply postFilter\n\t\tif ( postFilter ) {\n\t\t\ttemp = condense( matcherOut, postMap );\n\t\t\tpostFilter( temp, [], context, xml );\n\n\t\t\t// Un-match failing elements by moving them back to matcherIn\n\t\t\ti = temp.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( (elem = temp[i]) ) {\n\t\t\t\t\tmatcherOut[ postMap[i] ] = !(matcherIn[ postMap[i] ] = elem);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ( seed ) {\n\t\t\tif ( postFinder || preFilter ) {\n\t\t\t\tif ( postFinder ) {\n\t\t\t\t\t// Get the final matcherOut by condensing this intermediate into postFinder contexts\n\t\t\t\t\ttemp = [];\n\t\t\t\t\ti = matcherOut.length;\n\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\tif ( (elem = matcherOut[i]) ) {\n\t\t\t\t\t\t\t// Restore matcherIn since elem is not yet a final match\n\t\t\t\t\t\t\ttemp.push( (matcherIn[i] = elem) );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tpostFinder( null, (matcherOut = []), temp, xml );\n\t\t\t\t}\n\n\t\t\t\t// Move matched elements from seed to results to keep them synchronized\n\t\t\t\ti = matcherOut.length;\n\t\t\t\twhile ( i-- ) {\n\t\t\t\t\tif ( (elem = matcherOut[i]) &&\n\t\t\t\t\t\t(temp = postFinder ? indexOf( seed, elem ) : preMap[i]) > -1 ) {\n\n\t\t\t\t\t\tseed[temp] = !(results[temp] = elem);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t// Add elements to results, through postFinder if defined\n\t\t} else {\n\t\t\tmatcherOut = condense(\n\t\t\t\tmatcherOut === results ?\n\t\t\t\t\tmatcherOut.splice( preexisting, matcherOut.length ) :\n\t\t\t\t\tmatcherOut\n\t\t\t);\n\t\t\tif ( postFinder ) {\n\t\t\t\tpostFinder( null, results, matcherOut, xml );\n\t\t\t} else {\n\t\t\t\tpush.apply( results, matcherOut );\n\t\t\t}\n\t\t}\n\t});\n}\n\nfunction matcherFromTokens( tokens ) {\n\tvar checkContext, matcher, j,\n\t\tlen = tokens.length,\n\t\tleadingRelative = Expr.relative[ tokens[0].type ],\n\t\timplicitRelative = leadingRelative || Expr.relative[\" \"],\n\t\ti = leadingRelative ? 1 : 0,\n\n\t\t// The foundational matcher ensures that elements are reachable from top-level context(s)\n\t\tmatchContext = addCombinator( function( elem ) {\n\t\t\treturn elem === checkContext;\n\t\t}, implicitRelative, true ),\n\t\tmatchAnyContext = addCombinator( function( elem ) {\n\t\t\treturn indexOf( checkContext, elem ) > -1;\n\t\t}, implicitRelative, true ),\n\t\tmatchers = [ function( elem, context, xml ) {\n\t\t\tvar ret = ( !leadingRelative && ( xml || context !== outermostContext ) ) || (\n\t\t\t\t(checkContext = context).nodeType ?\n\t\t\t\t\tmatchContext( elem, context, xml ) :\n\t\t\t\t\tmatchAnyContext( elem, context, xml ) );\n\t\t\t// Avoid hanging onto element (issue #299)\n\t\t\tcheckContext = null;\n\t\t\treturn ret;\n\t\t} ];\n\n\tfor ( ; i < len; i++ ) {\n\t\tif ( (matcher = Expr.relative[ tokens[i].type ]) ) {\n\t\t\tmatchers = [ addCombinator(elementMatcher( matchers ), matcher) ];\n\t\t} else {\n\t\t\tmatcher = Expr.filter[ tokens[i].type ].apply( null, tokens[i].matches );\n\n\t\t\t// Return special upon seeing a positional matcher\n\t\t\tif ( matcher[ expando ] ) {\n\t\t\t\t// Find the next relative operator (if any) for proper handling\n\t\t\t\tj = ++i;\n\t\t\t\tfor ( ; j < len; j++ ) {\n\t\t\t\t\tif ( Expr.relative[ tokens[j].type ] ) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn setMatcher(\n\t\t\t\t\ti > 1 && elementMatcher( matchers ),\n\t\t\t\t\ti > 1 && toSelector(\n\t\t\t\t\t\t// If the preceding token was a descendant combinator, insert an implicit any-element `*`\n\t\t\t\t\t\ttokens.slice( 0, i - 1 ).concat({ value: tokens[ i - 2 ].type === \" \" ? \"*\" : \"\" })\n\t\t\t\t\t).replace( rtrim, \"$1\" ),\n\t\t\t\t\tmatcher,\n\t\t\t\t\ti < j && matcherFromTokens( tokens.slice( i, j ) ),\n\t\t\t\t\tj < len && matcherFromTokens( (tokens = tokens.slice( j )) ),\n\t\t\t\t\tj < len && toSelector( tokens )\n\t\t\t\t);\n\t\t\t}\n\t\t\tmatchers.push( matcher );\n\t\t}\n\t}\n\n\treturn elementMatcher( matchers );\n}\n\nfunction matcherFromGroupMatchers( elementMatchers, setMatchers ) {\n\tvar bySet = setMatchers.length > 0,\n\t\tbyElement = elementMatchers.length > 0,\n\t\tsuperMatcher = function( seed, context, xml, results, outermost ) {\n\t\t\tvar elem, j, matcher,\n\t\t\t\tmatchedCount = 0,\n\t\t\t\ti = \"0\",\n\t\t\t\tunmatched = seed && [],\n\t\t\t\tsetMatched = [],\n\t\t\t\tcontextBackup = outermostContext,\n\t\t\t\t// We must always have either seed elements or outermost context\n\t\t\t\telems = seed || byElement && Expr.find[\"TAG\"]( \"*\", outermost ),\n\t\t\t\t// Use integer dirruns iff this is the outermost matcher\n\t\t\t\tdirrunsUnique = (dirruns += contextBackup == null ? 1 : Math.random() || 0.1),\n\t\t\t\tlen = elems.length;\n\n\t\t\tif ( outermost ) {\n\t\t\t\toutermostContext = context === document || context || outermost;\n\t\t\t}\n\n\t\t\t// Add elements passing elementMatchers directly to results\n\t\t\t// Support: IE<9, Safari\n\t\t\t// Tolerate NodeList properties (IE: \"length\"; Safari: <number>) matching elements by id\n\t\t\tfor ( ; i !== len && (elem = elems[i]) != null; i++ ) {\n\t\t\t\tif ( byElement && elem ) {\n\t\t\t\t\tj = 0;\n\t\t\t\t\tif ( !context && elem.ownerDocument !== document ) {\n\t\t\t\t\t\tsetDocument( elem );\n\t\t\t\t\t\txml = !documentIsHTML;\n\t\t\t\t\t}\n\t\t\t\t\twhile ( (matcher = elementMatchers[j++]) ) {\n\t\t\t\t\t\tif ( matcher( elem, context || document, xml) ) {\n\t\t\t\t\t\t\tresults.push( elem );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif ( outermost ) {\n\t\t\t\t\t\tdirruns = dirrunsUnique;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Track unmatched elements for set filters\n\t\t\t\tif ( bySet ) {\n\t\t\t\t\t// They will have gone through all possible matchers\n\t\t\t\t\tif ( (elem = !matcher && elem) ) {\n\t\t\t\t\t\tmatchedCount--;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Lengthen the array for every element, matched or not\n\t\t\t\t\tif ( seed ) {\n\t\t\t\t\t\tunmatched.push( elem );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// `i` is now the count of elements visited above, and adding it to `matchedCount`\n\t\t\t// makes the latter nonnegative.\n\t\t\tmatchedCount += i;\n\n\t\t\t// Apply set filters to unmatched elements\n\t\t\t// NOTE: This can be skipped if there are no unmatched elements (i.e., `matchedCount`\n\t\t\t// equals `i`), unless we didn't visit _any_ elements in the above loop because we have\n\t\t\t// no element matchers and no seed.\n\t\t\t// Incrementing an initially-string \"0\" `i` allows `i` to remain a string only in that\n\t\t\t// case, which will result in a \"00\" `matchedCount` that differs from `i` but is also\n\t\t\t// numerically zero.\n\t\t\tif ( bySet && i !== matchedCount ) {\n\t\t\t\tj = 0;\n\t\t\t\twhile ( (matcher = setMatchers[j++]) ) {\n\t\t\t\t\tmatcher( unmatched, setMatched, context, xml );\n\t\t\t\t}\n\n\t\t\t\tif ( seed ) {\n\t\t\t\t\t// Reintegrate element matches to eliminate the need for sorting\n\t\t\t\t\tif ( matchedCount > 0 ) {\n\t\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\t\tif ( !(unmatched[i] || setMatched[i]) ) {\n\t\t\t\t\t\t\t\tsetMatched[i] = pop.call( results );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Discard index placeholder values to get only actual matches\n\t\t\t\t\tsetMatched = condense( setMatched );\n\t\t\t\t}\n\n\t\t\t\t// Add matches to results\n\t\t\t\tpush.apply( results, setMatched );\n\n\t\t\t\t// Seedless set matches succeeding multiple successful matchers stipulate sorting\n\t\t\t\tif ( outermost && !seed && setMatched.length > 0 &&\n\t\t\t\t\t( matchedCount + setMatchers.length ) > 1 ) {\n\n\t\t\t\t\tSizzle.uniqueSort( results );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Override manipulation of globals by nested matchers\n\t\t\tif ( outermost ) {\n\t\t\t\tdirruns = dirrunsUnique;\n\t\t\t\toutermostContext = contextBackup;\n\t\t\t}\n\n\t\t\treturn unmatched;\n\t\t};\n\n\treturn bySet ?\n\t\tmarkFunction( superMatcher ) :\n\t\tsuperMatcher;\n}\n\ncompile = Sizzle.compile = function( selector, match /* Internal Use Only */ ) {\n\tvar i,\n\t\tsetMatchers = [],\n\t\telementMatchers = [],\n\t\tcached = compilerCache[ selector + \" \" ];\n\n\tif ( !cached ) {\n\t\t// Generate a function of recursive functions that can be used to check each element\n\t\tif ( !match ) {\n\t\t\tmatch = tokenize( selector );\n\t\t}\n\t\ti = match.length;\n\t\twhile ( i-- ) {\n\t\t\tcached = matcherFromTokens( match[i] );\n\t\t\tif ( cached[ expando ] ) {\n\t\t\t\tsetMatchers.push( cached );\n\t\t\t} else {\n\t\t\t\telementMatchers.push( cached );\n\t\t\t}\n\t\t}\n\n\t\t// Cache the compiled function\n\t\tcached = compilerCache( selector, matcherFromGroupMatchers( elementMatchers, setMatchers ) );\n\n\t\t// Save selector and tokenization\n\t\tcached.selector = selector;\n\t}\n\treturn cached;\n};\n\n/**\n * A low-level selection function that works with Sizzle's compiled\n *  selector functions\n * @param {String|Function} selector A selector or a pre-compiled\n *  selector function built with Sizzle.compile\n * @param {Element} context\n * @param {Array} [results]\n * @param {Array} [seed] A set of elements to match against\n */\nselect = Sizzle.select = function( selector, context, results, seed ) {\n\tvar i, tokens, token, type, find,\n\t\tcompiled = typeof selector === \"function\" && selector,\n\t\tmatch = !seed && tokenize( (selector = compiled.selector || selector) );\n\n\tresults = results || [];\n\n\t// Try to minimize operations if there is only one selector in the list and no seed\n\t// (the latter of which guarantees us context)\n\tif ( match.length === 1 ) {\n\n\t\t// Reduce context if the leading compound selector is an ID\n\t\ttokens = match[0] = match[0].slice( 0 );\n\t\tif ( tokens.length > 2 && (token = tokens[0]).type === \"ID\" &&\n\t\t\t\tsupport.getById && context.nodeType === 9 && documentIsHTML &&\n\t\t\t\tExpr.relative[ tokens[1].type ] ) {\n\n\t\t\tcontext = ( Expr.find[\"ID\"]( token.matches[0].replace(runescape, funescape), context ) || [] )[0];\n\t\t\tif ( !context ) {\n\t\t\t\treturn results;\n\n\t\t\t// Precompiled matchers will still verify ancestry, so step up a level\n\t\t\t} else if ( compiled ) {\n\t\t\t\tcontext = context.parentNode;\n\t\t\t}\n\n\t\t\tselector = selector.slice( tokens.shift().value.length );\n\t\t}\n\n\t\t// Fetch a seed set for right-to-left matching\n\t\ti = matchExpr[\"needsContext\"].test( selector ) ? 0 : tokens.length;\n\t\twhile ( i-- ) {\n\t\t\ttoken = tokens[i];\n\n\t\t\t// Abort if we hit a combinator\n\t\t\tif ( Expr.relative[ (type = token.type) ] ) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif ( (find = Expr.find[ type ]) ) {\n\t\t\t\t// Search, expanding context for leading sibling combinators\n\t\t\t\tif ( (seed = find(\n\t\t\t\t\ttoken.matches[0].replace( runescape, funescape ),\n\t\t\t\t\trsibling.test( tokens[0].type ) && testContext( context.parentNode ) || context\n\t\t\t\t)) ) {\n\n\t\t\t\t\t// If seed is empty or no tokens remain, we can return early\n\t\t\t\t\ttokens.splice( i, 1 );\n\t\t\t\t\tselector = seed.length && toSelector( tokens );\n\t\t\t\t\tif ( !selector ) {\n\t\t\t\t\t\tpush.apply( results, seed );\n\t\t\t\t\t\treturn results;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Compile and execute a filtering function if one is not provided\n\t// Provide `match` to avoid retokenization if we modified the selector above\n\t( compiled || compile( selector, match ) )(\n\t\tseed,\n\t\tcontext,\n\t\t!documentIsHTML,\n\t\tresults,\n\t\t!context || rsibling.test( selector ) && testContext( context.parentNode ) || context\n\t);\n\treturn results;\n};\n\n// One-time assignments\n\n// Sort stability\nsupport.sortStable = expando.split(\"\").sort( sortOrder ).join(\"\") === expando;\n\n// Support: Chrome 14-35+\n// Always assume duplicates if they aren't passed to the comparison function\nsupport.detectDuplicates = !!hasDuplicate;\n\n// Initialize against the default document\nsetDocument();\n\n// Support: Webkit<537.32 - Safari 6.0.3/Chrome 25 (fixed in Chrome 27)\n// Detached nodes confoundingly follow *each other*\nsupport.sortDetached = assert(function( el ) {\n\t// Should return 1, but returns 4 (following)\n\treturn el.compareDocumentPosition( document.createElement(\"fieldset\") ) & 1;\n});\n\n// Support: IE<8\n// Prevent attribute/property \"interpolation\"\n// https://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx\nif ( !assert(function( el ) {\n\tel.innerHTML = \"<a href='#'></a>\";\n\treturn el.firstChild.getAttribute(\"href\") === \"#\" ;\n}) ) {\n\taddHandle( \"type|href|height|width\", function( elem, name, isXML ) {\n\t\tif ( !isXML ) {\n\t\t\treturn elem.getAttribute( name, name.toLowerCase() === \"type\" ? 1 : 2 );\n\t\t}\n\t});\n}\n\n// Support: IE<9\n// Use defaultValue in place of getAttribute(\"value\")\nif ( !support.attributes || !assert(function( el ) {\n\tel.innerHTML = \"<input/>\";\n\tel.firstChild.setAttribute( \"value\", \"\" );\n\treturn el.firstChild.getAttribute( \"value\" ) === \"\";\n}) ) {\n\taddHandle( \"value\", function( elem, name, isXML ) {\n\t\tif ( !isXML && elem.nodeName.toLowerCase() === \"input\" ) {\n\t\t\treturn elem.defaultValue;\n\t\t}\n\t});\n}\n\n// Support: IE<9\n// Use getAttributeNode to fetch booleans when getAttribute lies\nif ( !assert(function( el ) {\n\treturn el.getAttribute(\"disabled\") == null;\n}) ) {\n\taddHandle( booleans, function( elem, name, isXML ) {\n\t\tvar val;\n\t\tif ( !isXML ) {\n\t\t\treturn elem[ name ] === true ? name.toLowerCase() :\n\t\t\t\t\t(val = elem.getAttributeNode( name )) && val.specified ?\n\t\t\t\t\tval.value :\n\t\t\t\tnull;\n\t\t}\n\t});\n}\n\nreturn Sizzle;\n\n})( window );\n\n\n\njQuery.find = Sizzle;\njQuery.expr = Sizzle.selectors;\n\n// Deprecated\njQuery.expr[ \":\" ] = jQuery.expr.pseudos;\njQuery.uniqueSort = jQuery.unique = Sizzle.uniqueSort;\njQuery.text = Sizzle.getText;\njQuery.isXMLDoc = Sizzle.isXML;\njQuery.contains = Sizzle.contains;\njQuery.escapeSelector = Sizzle.escape;\n\n\n\n\nvar dir = function( elem, dir, until ) {\n\tvar matched = [],\n\t\ttruncate = until !== undefined;\n\n\twhile ( ( elem = elem[ dir ] ) && elem.nodeType !== 9 ) {\n\t\tif ( elem.nodeType === 1 ) {\n\t\t\tif ( truncate && jQuery( elem ).is( until ) ) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tmatched.push( elem );\n\t\t}\n\t}\n\treturn matched;\n};\n\n\nvar siblings = function( n, elem ) {\n\tvar matched = [];\n\n\tfor ( ; n; n = n.nextSibling ) {\n\t\tif ( n.nodeType === 1 && n !== elem ) {\n\t\t\tmatched.push( n );\n\t\t}\n\t}\n\n\treturn matched;\n};\n\n\nvar rneedsContext = jQuery.expr.match.needsContext;\n\nvar rsingleTag = ( /^<([a-z][^\\/\\0>:\\x20\\t\\r\\n\\f]*)[\\x20\\t\\r\\n\\f]*\\/?>(?:<\\/\\1>|)$/i );\n\n\n\nvar risSimple = /^.[^:#\\[\\.,]*$/;\n\n// Implement the identical functionality for filter and not\nfunction winnow( elements, qualifier, not ) {\n\tif ( jQuery.isFunction( qualifier ) ) {\n\t\treturn jQuery.grep( elements, function( elem, i ) {\n\t\t\treturn !!qualifier.call( elem, i, elem ) !== not;\n\t\t} );\n\n\t}\n\n\tif ( qualifier.nodeType ) {\n\t\treturn jQuery.grep( elements, function( elem ) {\n\t\t\treturn ( elem === qualifier ) !== not;\n\t\t} );\n\n\t}\n\n\tif ( typeof qualifier === \"string\" ) {\n\t\tif ( risSimple.test( qualifier ) ) {\n\t\t\treturn jQuery.filter( qualifier, elements, not );\n\t\t}\n\n\t\tqualifier = jQuery.filter( qualifier, elements );\n\t}\n\n\treturn jQuery.grep( elements, function( elem ) {\n\t\treturn ( indexOf.call( qualifier, elem ) > -1 ) !== not && elem.nodeType === 1;\n\t} );\n}\n\njQuery.filter = function( expr, elems, not ) {\n\tvar elem = elems[ 0 ];\n\n\tif ( not ) {\n\t\texpr = \":not(\" + expr + \")\";\n\t}\n\n\treturn elems.length === 1 && elem.nodeType === 1 ?\n\t\tjQuery.find.matchesSelector( elem, expr ) ? [ elem ] : [] :\n\t\tjQuery.find.matches( expr, jQuery.grep( elems, function( elem ) {\n\t\t\treturn elem.nodeType === 1;\n\t\t} ) );\n};\n\njQuery.fn.extend( {\n\tfind: function( selector ) {\n\t\tvar i, ret,\n\t\t\tlen = this.length,\n\t\t\tself = this;\n\n\t\tif ( typeof selector !== \"string\" ) {\n\t\t\treturn this.pushStack( jQuery( selector ).filter( function() {\n\t\t\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\t\t\tif ( jQuery.contains( self[ i ], this ) ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} ) );\n\t\t}\n\n\t\tret = this.pushStack( [] );\n\n\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\tjQuery.find( selector, self[ i ], ret );\n\t\t}\n\n\t\treturn len > 1 ? jQuery.uniqueSort( ret ) : ret;\n\t},\n\tfilter: function( selector ) {\n\t\treturn this.pushStack( winnow( this, selector || [], false ) );\n\t},\n\tnot: function( selector ) {\n\t\treturn this.pushStack( winnow( this, selector || [], true ) );\n\t},\n\tis: function( selector ) {\n\t\treturn !!winnow(\n\t\t\tthis,\n\n\t\t\t// If this is a positional/relative selector, check membership in the returned set\n\t\t\t// so $(\"p:first\").is(\"p:last\") won't return true for a doc with two \"p\".\n\t\t\ttypeof selector === \"string\" && rneedsContext.test( selector ) ?\n\t\t\t\tjQuery( selector ) :\n\t\t\t\tselector || [],\n\t\t\tfalse\n\t\t).length;\n\t}\n} );\n\n\n// Initialize a jQuery object\n\n\n// A central reference to the root jQuery(document)\nvar rootjQuery,\n\n\t// A simple way to check for HTML strings\n\t// Prioritize #id over <tag> to avoid XSS via location.hash (#9521)\n\t// Strict HTML recognition (#11290: must start with <)\n\t// Shortcut simple #id case for speed\n\trquickExpr = /^(?:\\s*(<[\\w\\W]+>)[^>]*|#([\\w-]+))$/,\n\n\tinit = jQuery.fn.init = function( selector, context, root ) {\n\t\tvar match, elem;\n\n\t\t// HANDLE: $(\"\"), $(null), $(undefined), $(false)\n\t\tif ( !selector ) {\n\t\t\treturn this;\n\t\t}\n\n\t\t// Method init() accepts an alternate rootjQuery\n\t\t// so migrate can support jQuery.sub (gh-2101)\n\t\troot = root || rootjQuery;\n\n\t\t// Handle HTML strings\n\t\tif ( typeof selector === \"string\" ) {\n\t\t\tif ( selector[ 0 ] === \"<\" &&\n\t\t\t\tselector[ selector.length - 1 ] === \">\" &&\n\t\t\t\tselector.length >= 3 ) {\n\n\t\t\t\t// Assume that strings that start and end with <> are HTML and skip the regex check\n\t\t\t\tmatch = [ null, selector, null ];\n\n\t\t\t} else {\n\t\t\t\tmatch = rquickExpr.exec( selector );\n\t\t\t}\n\n\t\t\t// Match html or make sure no context is specified for #id\n\t\t\tif ( match && ( match[ 1 ] || !context ) ) {\n\n\t\t\t\t// HANDLE: $(html) -> $(array)\n\t\t\t\tif ( match[ 1 ] ) {\n\t\t\t\t\tcontext = context instanceof jQuery ? context[ 0 ] : context;\n\n\t\t\t\t\t// Option to run scripts is true for back-compat\n\t\t\t\t\t// Intentionally let the error be thrown if parseHTML is not present\n\t\t\t\t\tjQuery.merge( this, jQuery.parseHTML(\n\t\t\t\t\t\tmatch[ 1 ],\n\t\t\t\t\t\tcontext && context.nodeType ? context.ownerDocument || context : document,\n\t\t\t\t\t\ttrue\n\t\t\t\t\t) );\n\n\t\t\t\t\t// HANDLE: $(html, props)\n\t\t\t\t\tif ( rsingleTag.test( match[ 1 ] ) && jQuery.isPlainObject( context ) ) {\n\t\t\t\t\t\tfor ( match in context ) {\n\n\t\t\t\t\t\t\t// Properties of context are called as methods if possible\n\t\t\t\t\t\t\tif ( jQuery.isFunction( this[ match ] ) ) {\n\t\t\t\t\t\t\t\tthis[ match ]( context[ match ] );\n\n\t\t\t\t\t\t\t// ...and otherwise set as attributes\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.attr( match, context[ match ] );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this;\n\n\t\t\t\t// HANDLE: $(#id)\n\t\t\t\t} else {\n\t\t\t\t\telem = document.getElementById( match[ 2 ] );\n\n\t\t\t\t\tif ( elem ) {\n\n\t\t\t\t\t\t// Inject the element directly into the jQuery object\n\t\t\t\t\t\tthis[ 0 ] = elem;\n\t\t\t\t\t\tthis.length = 1;\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\n\t\t\t// HANDLE: $(expr, $(...))\n\t\t\t} else if ( !context || context.jquery ) {\n\t\t\t\treturn ( context || root ).find( selector );\n\n\t\t\t// HANDLE: $(expr, context)\n\t\t\t// (which is just equivalent to: $(context).find(expr)\n\t\t\t} else {\n\t\t\t\treturn this.constructor( context ).find( selector );\n\t\t\t}\n\n\t\t// HANDLE: $(DOMElement)\n\t\t} else if ( selector.nodeType ) {\n\t\t\tthis[ 0 ] = selector;\n\t\t\tthis.length = 1;\n\t\t\treturn this;\n\n\t\t// HANDLE: $(function)\n\t\t// Shortcut for document ready\n\t\t} else if ( jQuery.isFunction( selector ) ) {\n\t\t\treturn root.ready !== undefined ?\n\t\t\t\troot.ready( selector ) :\n\n\t\t\t\t// Execute immediately if ready is not present\n\t\t\t\tselector( jQuery );\n\t\t}\n\n\t\treturn jQuery.makeArray( selector, this );\n\t};\n\n// Give the init function the jQuery prototype for later instantiation\ninit.prototype = jQuery.fn;\n\n// Initialize central reference\nrootjQuery = jQuery( document );\n\n\nvar rparentsprev = /^(?:parents|prev(?:Until|All))/,\n\n\t// Methods guaranteed to produce a unique set when starting from a unique set\n\tguaranteedUnique = {\n\t\tchildren: true,\n\t\tcontents: true,\n\t\tnext: true,\n\t\tprev: true\n\t};\n\njQuery.fn.extend( {\n\thas: function( target ) {\n\t\tvar targets = jQuery( target, this ),\n\t\t\tl = targets.length;\n\n\t\treturn this.filter( function() {\n\t\t\tvar i = 0;\n\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\tif ( jQuery.contains( this, targets[ i ] ) ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t},\n\n\tclosest: function( selectors, context ) {\n\t\tvar cur,\n\t\t\ti = 0,\n\t\t\tl = this.length,\n\t\t\tmatched = [],\n\t\t\ttargets = typeof selectors !== \"string\" && jQuery( selectors );\n\n\t\t// Positional selectors never match, since there's no _selection_ context\n\t\tif ( !rneedsContext.test( selectors ) ) {\n\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\tfor ( cur = this[ i ]; cur && cur !== context; cur = cur.parentNode ) {\n\n\t\t\t\t\t// Always skip document fragments\n\t\t\t\t\tif ( cur.nodeType < 11 && ( targets ?\n\t\t\t\t\t\ttargets.index( cur ) > -1 :\n\n\t\t\t\t\t\t// Don't pass non-elements to Sizzle\n\t\t\t\t\t\tcur.nodeType === 1 &&\n\t\t\t\t\t\t\tjQuery.find.matchesSelector( cur, selectors ) ) ) {\n\n\t\t\t\t\t\tmatched.push( cur );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this.pushStack( matched.length > 1 ? jQuery.uniqueSort( matched ) : matched );\n\t},\n\n\t// Determine the position of an element within the set\n\tindex: function( elem ) {\n\n\t\t// No argument, return index in parent\n\t\tif ( !elem ) {\n\t\t\treturn ( this[ 0 ] && this[ 0 ].parentNode ) ? this.first().prevAll().length : -1;\n\t\t}\n\n\t\t// Index in selector\n\t\tif ( typeof elem === \"string\" ) {\n\t\t\treturn indexOf.call( jQuery( elem ), this[ 0 ] );\n\t\t}\n\n\t\t// Locate the position of the desired element\n\t\treturn indexOf.call( this,\n\n\t\t\t// If it receives a jQuery object, the first element is used\n\t\t\telem.jquery ? elem[ 0 ] : elem\n\t\t);\n\t},\n\n\tadd: function( selector, context ) {\n\t\treturn this.pushStack(\n\t\t\tjQuery.uniqueSort(\n\t\t\t\tjQuery.merge( this.get(), jQuery( selector, context ) )\n\t\t\t)\n\t\t);\n\t},\n\n\taddBack: function( selector ) {\n\t\treturn this.add( selector == null ?\n\t\t\tthis.prevObject : this.prevObject.filter( selector )\n\t\t);\n\t}\n} );\n\nfunction sibling( cur, dir ) {\n\twhile ( ( cur = cur[ dir ] ) && cur.nodeType !== 1 ) {}\n\treturn cur;\n}\n\njQuery.each( {\n\tparent: function( elem ) {\n\t\tvar parent = elem.parentNode;\n\t\treturn parent && parent.nodeType !== 11 ? parent : null;\n\t},\n\tparents: function( elem ) {\n\t\treturn dir( elem, \"parentNode\" );\n\t},\n\tparentsUntil: function( elem, i, until ) {\n\t\treturn dir( elem, \"parentNode\", until );\n\t},\n\tnext: function( elem ) {\n\t\treturn sibling( elem, \"nextSibling\" );\n\t},\n\tprev: function( elem ) {\n\t\treturn sibling( elem, \"previousSibling\" );\n\t},\n\tnextAll: function( elem ) {\n\t\treturn dir( elem, \"nextSibling\" );\n\t},\n\tprevAll: function( elem ) {\n\t\treturn dir( elem, \"previousSibling\" );\n\t},\n\tnextUntil: function( elem, i, until ) {\n\t\treturn dir( elem, \"nextSibling\", until );\n\t},\n\tprevUntil: function( elem, i, until ) {\n\t\treturn dir( elem, \"previousSibling\", until );\n\t},\n\tsiblings: function( elem ) {\n\t\treturn siblings( ( elem.parentNode || {} ).firstChild, elem );\n\t},\n\tchildren: function( elem ) {\n\t\treturn siblings( elem.firstChild );\n\t},\n\tcontents: function( elem ) {\n\t\treturn elem.contentDocument || jQuery.merge( [], elem.childNodes );\n\t}\n}, function( name, fn ) {\n\tjQuery.fn[ name ] = function( until, selector ) {\n\t\tvar matched = jQuery.map( this, fn, until );\n\n\t\tif ( name.slice( -5 ) !== \"Until\" ) {\n\t\t\tselector = until;\n\t\t}\n\n\t\tif ( selector && typeof selector === \"string\" ) {\n\t\t\tmatched = jQuery.filter( selector, matched );\n\t\t}\n\n\t\tif ( this.length > 1 ) {\n\n\t\t\t// Remove duplicates\n\t\t\tif ( !guaranteedUnique[ name ] ) {\n\t\t\t\tjQuery.uniqueSort( matched );\n\t\t\t}\n\n\t\t\t// Reverse order for parents* and prev-derivatives\n\t\t\tif ( rparentsprev.test( name ) ) {\n\t\t\t\tmatched.reverse();\n\t\t\t}\n\t\t}\n\n\t\treturn this.pushStack( matched );\n\t};\n} );\nvar rnotwhite = ( /\\S+/g );\n\n\n\n// Convert String-formatted options into Object-formatted ones\nfunction createOptions( options ) {\n\tvar object = {};\n\tjQuery.each( options.match( rnotwhite ) || [], function( _, flag ) {\n\t\tobject[ flag ] = true;\n\t} );\n\treturn object;\n}\n\n/*\n * Create a callback list using the following parameters:\n *\n *\toptions: an optional list of space-separated options that will change how\n *\t\t\tthe callback list behaves or a more traditional option object\n *\n * By default a callback list will act like an event callback list and can be\n * \"fired\" multiple times.\n *\n * Possible options:\n *\n *\tonce:\t\t\twill ensure the callback list can only be fired once (like a Deferred)\n *\n *\tmemory:\t\t\twill keep track of previous values and will call any callback added\n *\t\t\t\t\tafter the list has been fired right away with the latest \"memorized\"\n *\t\t\t\t\tvalues (like a Deferred)\n *\n *\tunique:\t\t\twill ensure a callback can only be added once (no duplicate in the list)\n *\n *\tstopOnFalse:\tinterrupt callings when a callback returns false\n *\n */\njQuery.Callbacks = function( options ) {\n\n\t// Convert options from String-formatted to Object-formatted if needed\n\t// (we check in cache first)\n\toptions = typeof options === \"string\" ?\n\t\tcreateOptions( options ) :\n\t\tjQuery.extend( {}, options );\n\n\tvar // Flag to know if list is currently firing\n\t\tfiring,\n\n\t\t// Last fire value for non-forgettable lists\n\t\tmemory,\n\n\t\t// Flag to know if list was already fired\n\t\tfired,\n\n\t\t// Flag to prevent firing\n\t\tlocked,\n\n\t\t// Actual callback list\n\t\tlist = [],\n\n\t\t// Queue of execution data for repeatable lists\n\t\tqueue = [],\n\n\t\t// Index of currently firing callback (modified by add/remove as needed)\n\t\tfiringIndex = -1,\n\n\t\t// Fire callbacks\n\t\tfire = function() {\n\n\t\t\t// Enforce single-firing\n\t\t\tlocked = options.once;\n\n\t\t\t// Execute callbacks for all pending executions,\n\t\t\t// respecting firingIndex overrides and runtime changes\n\t\t\tfired = firing = true;\n\t\t\tfor ( ; queue.length; firingIndex = -1 ) {\n\t\t\t\tmemory = queue.shift();\n\t\t\t\twhile ( ++firingIndex < list.length ) {\n\n\t\t\t\t\t// Run callback and check for early termination\n\t\t\t\t\tif ( list[ firingIndex ].apply( memory[ 0 ], memory[ 1 ] ) === false &&\n\t\t\t\t\t\toptions.stopOnFalse ) {\n\n\t\t\t\t\t\t// Jump to end and forget the data so .add doesn't re-fire\n\t\t\t\t\t\tfiringIndex = list.length;\n\t\t\t\t\t\tmemory = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Forget the data if we're done with it\n\t\t\tif ( !options.memory ) {\n\t\t\t\tmemory = false;\n\t\t\t}\n\n\t\t\tfiring = false;\n\n\t\t\t// Clean up if we're done firing for good\n\t\t\tif ( locked ) {\n\n\t\t\t\t// Keep an empty list if we have data for future add calls\n\t\t\t\tif ( memory ) {\n\t\t\t\t\tlist = [];\n\n\t\t\t\t// Otherwise, this object is spent\n\t\t\t\t} else {\n\t\t\t\t\tlist = \"\";\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t// Actual Callbacks object\n\t\tself = {\n\n\t\t\t// Add a callback or a collection of callbacks to the list\n\t\t\tadd: function() {\n\t\t\t\tif ( list ) {\n\n\t\t\t\t\t// If we have memory from a past run, we should fire after adding\n\t\t\t\t\tif ( memory && !firing ) {\n\t\t\t\t\t\tfiringIndex = list.length - 1;\n\t\t\t\t\t\tqueue.push( memory );\n\t\t\t\t\t}\n\n\t\t\t\t\t( function add( args ) {\n\t\t\t\t\t\tjQuery.each( args, function( _, arg ) {\n\t\t\t\t\t\t\tif ( jQuery.isFunction( arg ) ) {\n\t\t\t\t\t\t\t\tif ( !options.unique || !self.has( arg ) ) {\n\t\t\t\t\t\t\t\t\tlist.push( arg );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if ( arg && arg.length && jQuery.type( arg ) !== \"string\" ) {\n\n\t\t\t\t\t\t\t\t// Inspect recursively\n\t\t\t\t\t\t\t\tadd( arg );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\t\t\t\t\t} )( arguments );\n\n\t\t\t\t\tif ( memory && !firing ) {\n\t\t\t\t\t\tfire();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// Remove a callback from the list\n\t\t\tremove: function() {\n\t\t\t\tjQuery.each( arguments, function( _, arg ) {\n\t\t\t\t\tvar index;\n\t\t\t\t\twhile ( ( index = jQuery.inArray( arg, list, index ) ) > -1 ) {\n\t\t\t\t\t\tlist.splice( index, 1 );\n\n\t\t\t\t\t\t// Handle firing indexes\n\t\t\t\t\t\tif ( index <= firingIndex ) {\n\t\t\t\t\t\t\tfiringIndex--;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// Check if a given callback is in the list.\n\t\t\t// If no argument is given, return whether or not list has callbacks attached.\n\t\t\thas: function( fn ) {\n\t\t\t\treturn fn ?\n\t\t\t\t\tjQuery.inArray( fn, list ) > -1 :\n\t\t\t\t\tlist.length > 0;\n\t\t\t},\n\n\t\t\t// Remove all callbacks from the list\n\t\t\tempty: function() {\n\t\t\t\tif ( list ) {\n\t\t\t\t\tlist = [];\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// Disable .fire and .add\n\t\t\t// Abort any current/pending executions\n\t\t\t// Clear all callbacks and values\n\t\t\tdisable: function() {\n\t\t\t\tlocked = queue = [];\n\t\t\t\tlist = memory = \"\";\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\tdisabled: function() {\n\t\t\t\treturn !list;\n\t\t\t},\n\n\t\t\t// Disable .fire\n\t\t\t// Also disable .add unless we have memory (since it would have no effect)\n\t\t\t// Abort any pending executions\n\t\t\tlock: function() {\n\t\t\t\tlocked = queue = [];\n\t\t\t\tif ( !memory && !firing ) {\n\t\t\t\t\tlist = memory = \"\";\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\tlocked: function() {\n\t\t\t\treturn !!locked;\n\t\t\t},\n\n\t\t\t// Call all callbacks with the given context and arguments\n\t\t\tfireWith: function( context, args ) {\n\t\t\t\tif ( !locked ) {\n\t\t\t\t\targs = args || [];\n\t\t\t\t\targs = [ context, args.slice ? args.slice() : args ];\n\t\t\t\t\tqueue.push( args );\n\t\t\t\t\tif ( !firing ) {\n\t\t\t\t\t\tfire();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// Call all the callbacks with the given arguments\n\t\t\tfire: function() {\n\t\t\t\tself.fireWith( this, arguments );\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// To know if the callbacks have already been called at least once\n\t\t\tfired: function() {\n\t\t\t\treturn !!fired;\n\t\t\t}\n\t\t};\n\n\treturn self;\n};\n\n\nfunction Identity( v ) {\n\treturn v;\n}\nfunction Thrower( ex ) {\n\tthrow ex;\n}\n\nfunction adoptValue( value, resolve, reject ) {\n\tvar method;\n\n\ttry {\n\n\t\t// Check for promise aspect first to privilege synchronous behavior\n\t\tif ( value && jQuery.isFunction( ( method = value.promise ) ) ) {\n\t\t\tmethod.call( value ).done( resolve ).fail( reject );\n\n\t\t// Other thenables\n\t\t} else if ( value && jQuery.isFunction( ( method = value.then ) ) ) {\n\t\t\tmethod.call( value, resolve, reject );\n\n\t\t// Other non-thenables\n\t\t} else {\n\n\t\t\t// Support: Android 4.0 only\n\t\t\t// Strict mode functions invoked without .call/.apply get global-object context\n\t\t\tresolve.call( undefined, value );\n\t\t}\n\n\t// For Promises/A+, convert exceptions into rejections\n\t// Since jQuery.when doesn't unwrap thenables, we can skip the extra checks appearing in\n\t// Deferred#then to conditionally suppress rejection.\n\t} catch ( value ) {\n\n\t\t// Support: Android 4.0 only\n\t\t// Strict mode functions invoked without .call/.apply get global-object context\n\t\treject.call( undefined, value );\n\t}\n}\n\njQuery.extend( {\n\n\tDeferred: function( func ) {\n\t\tvar tuples = [\n\n\t\t\t\t// action, add listener, callbacks,\n\t\t\t\t// ... .then handlers, argument index, [final state]\n\t\t\t\t[ \"notify\", \"progress\", jQuery.Callbacks( \"memory\" ),\n\t\t\t\t\tjQuery.Callbacks( \"memory\" ), 2 ],\n\t\t\t\t[ \"resolve\", \"done\", jQuery.Callbacks( \"once memory\" ),\n\t\t\t\t\tjQuery.Callbacks( \"once memory\" ), 0, \"resolved\" ],\n\t\t\t\t[ \"reject\", \"fail\", jQuery.Callbacks( \"once memory\" ),\n\t\t\t\t\tjQuery.Callbacks( \"once memory\" ), 1, \"rejected\" ]\n\t\t\t],\n\t\t\tstate = \"pending\",\n\t\t\tpromise = {\n\t\t\t\tstate: function() {\n\t\t\t\t\treturn state;\n\t\t\t\t},\n\t\t\t\talways: function() {\n\t\t\t\t\tdeferred.done( arguments ).fail( arguments );\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\t\t\t\t\"catch\": function( fn ) {\n\t\t\t\t\treturn promise.then( null, fn );\n\t\t\t\t},\n\n\t\t\t\t// Keep pipe for back-compat\n\t\t\t\tpipe: function( /* fnDone, fnFail, fnProgress */ ) {\n\t\t\t\t\tvar fns = arguments;\n\n\t\t\t\t\treturn jQuery.Deferred( function( newDefer ) {\n\t\t\t\t\t\tjQuery.each( tuples, function( i, tuple ) {\n\n\t\t\t\t\t\t\t// Map tuples (progress, done, fail) to arguments (done, fail, progress)\n\t\t\t\t\t\t\tvar fn = jQuery.isFunction( fns[ tuple[ 4 ] ] ) && fns[ tuple[ 4 ] ];\n\n\t\t\t\t\t\t\t// deferred.progress(function() { bind to newDefer or newDefer.notify })\n\t\t\t\t\t\t\t// deferred.done(function() { bind to newDefer or newDefer.resolve })\n\t\t\t\t\t\t\t// deferred.fail(function() { bind to newDefer or newDefer.reject })\n\t\t\t\t\t\t\tdeferred[ tuple[ 1 ] ]( function() {\n\t\t\t\t\t\t\t\tvar returned = fn && fn.apply( this, arguments );\n\t\t\t\t\t\t\t\tif ( returned && jQuery.isFunction( returned.promise ) ) {\n\t\t\t\t\t\t\t\t\treturned.promise()\n\t\t\t\t\t\t\t\t\t\t.progress( newDefer.notify )\n\t\t\t\t\t\t\t\t\t\t.done( newDefer.resolve )\n\t\t\t\t\t\t\t\t\t\t.fail( newDefer.reject );\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tnewDefer[ tuple[ 0 ] + \"With\" ](\n\t\t\t\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\t\t\t\tfn ? [ returned ] : arguments\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} );\n\t\t\t\t\t\tfns = null;\n\t\t\t\t\t} ).promise();\n\t\t\t\t},\n\t\t\t\tthen: function( onFulfilled, onRejected, onProgress ) {\n\t\t\t\t\tvar maxDepth = 0;\n\t\t\t\t\tfunction resolve( depth, deferred, handler, special ) {\n\t\t\t\t\t\treturn function() {\n\t\t\t\t\t\t\tvar that = this,\n\t\t\t\t\t\t\t\targs = arguments,\n\t\t\t\t\t\t\t\tmightThrow = function() {\n\t\t\t\t\t\t\t\t\tvar returned, then;\n\n\t\t\t\t\t\t\t\t\t// Support: Promises/A+ section 2.3.3.3.3\n\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-59\n\t\t\t\t\t\t\t\t\t// Ignore double-resolution attempts\n\t\t\t\t\t\t\t\t\tif ( depth < maxDepth ) {\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturned = handler.apply( that, args );\n\n\t\t\t\t\t\t\t\t\t// Support: Promises/A+ section 2.3.1\n\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-48\n\t\t\t\t\t\t\t\t\tif ( returned === deferred.promise() ) {\n\t\t\t\t\t\t\t\t\t\tthrow new TypeError( \"Thenable self-resolution\" );\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t// Support: Promises/A+ sections 2.3.3.1, 3.5\n\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-54\n\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-75\n\t\t\t\t\t\t\t\t\t// Retrieve `then` only once\n\t\t\t\t\t\t\t\t\tthen = returned &&\n\n\t\t\t\t\t\t\t\t\t\t// Support: Promises/A+ section 2.3.4\n\t\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-64\n\t\t\t\t\t\t\t\t\t\t// Only check objects and functions for thenability\n\t\t\t\t\t\t\t\t\t\t( typeof returned === \"object\" ||\n\t\t\t\t\t\t\t\t\t\t\ttypeof returned === \"function\" ) &&\n\t\t\t\t\t\t\t\t\t\treturned.then;\n\n\t\t\t\t\t\t\t\t\t// Handle a returned thenable\n\t\t\t\t\t\t\t\t\tif ( jQuery.isFunction( then ) ) {\n\n\t\t\t\t\t\t\t\t\t\t// Special processors (notify) just wait for resolution\n\t\t\t\t\t\t\t\t\t\tif ( special ) {\n\t\t\t\t\t\t\t\t\t\t\tthen.call(\n\t\t\t\t\t\t\t\t\t\t\t\treturned,\n\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Identity, special ),\n\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Thrower, special )\n\t\t\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t\t\t// Normal processors (resolve) also hook into progress\n\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t// ...and disregard older resolution values\n\t\t\t\t\t\t\t\t\t\t\tmaxDepth++;\n\n\t\t\t\t\t\t\t\t\t\t\tthen.call(\n\t\t\t\t\t\t\t\t\t\t\t\treturned,\n\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Identity, special ),\n\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Thrower, special ),\n\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Identity,\n\t\t\t\t\t\t\t\t\t\t\t\t\tdeferred.notifyWith )\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t// Handle all other returned values\n\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t// Only substitute handlers pass on context\n\t\t\t\t\t\t\t\t\t\t// and multiple values (non-spec behavior)\n\t\t\t\t\t\t\t\t\t\tif ( handler !== Identity ) {\n\t\t\t\t\t\t\t\t\t\t\tthat = undefined;\n\t\t\t\t\t\t\t\t\t\t\targs = [ returned ];\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t// Process the value(s)\n\t\t\t\t\t\t\t\t\t\t// Default process is resolve\n\t\t\t\t\t\t\t\t\t\t( special || deferred.resolveWith )( that, args );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\t\t// Only normal processors (resolve) catch and reject exceptions\n\t\t\t\t\t\t\t\tprocess = special ?\n\t\t\t\t\t\t\t\t\tmightThrow :\n\t\t\t\t\t\t\t\t\tfunction() {\n\t\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\t\tmightThrow();\n\t\t\t\t\t\t\t\t\t\t} catch ( e ) {\n\n\t\t\t\t\t\t\t\t\t\t\tif ( jQuery.Deferred.exceptionHook ) {\n\t\t\t\t\t\t\t\t\t\t\t\tjQuery.Deferred.exceptionHook( e,\n\t\t\t\t\t\t\t\t\t\t\t\t\tprocess.stackTrace );\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t// Support: Promises/A+ section 2.3.3.3.4.1\n\t\t\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-61\n\t\t\t\t\t\t\t\t\t\t\t// Ignore post-resolution exceptions\n\t\t\t\t\t\t\t\t\t\t\tif ( depth + 1 >= maxDepth ) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t// Only substitute handlers pass on context\n\t\t\t\t\t\t\t\t\t\t\t\t// and multiple values (non-spec behavior)\n\t\t\t\t\t\t\t\t\t\t\t\tif ( handler !== Thrower ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tthat = undefined;\n\t\t\t\t\t\t\t\t\t\t\t\t\targs = [ e ];\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tdeferred.rejectWith( that, args );\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t// Support: Promises/A+ section 2.3.3.3.1\n\t\t\t\t\t\t\t// https://promisesaplus.com/#point-57\n\t\t\t\t\t\t\t// Re-resolve promises immediately to dodge false rejection from\n\t\t\t\t\t\t\t// subsequent errors\n\t\t\t\t\t\t\tif ( depth ) {\n\t\t\t\t\t\t\t\tprocess();\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t// Call an optional hook to record the stack, in case of exception\n\t\t\t\t\t\t\t\t// since it's otherwise lost when execution goes async\n\t\t\t\t\t\t\t\tif ( jQuery.Deferred.getStackHook ) {\n\t\t\t\t\t\t\t\t\tprocess.stackTrace = jQuery.Deferred.getStackHook();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\twindow.setTimeout( process );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\treturn jQuery.Deferred( function( newDefer ) {\n\n\t\t\t\t\t\t// progress_handlers.add( ... )\n\t\t\t\t\t\ttuples[ 0 ][ 3 ].add(\n\t\t\t\t\t\t\tresolve(\n\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\tnewDefer,\n\t\t\t\t\t\t\t\tjQuery.isFunction( onProgress ) ?\n\t\t\t\t\t\t\t\t\tonProgress :\n\t\t\t\t\t\t\t\t\tIdentity,\n\t\t\t\t\t\t\t\tnewDefer.notifyWith\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t// fulfilled_handlers.add( ... )\n\t\t\t\t\t\ttuples[ 1 ][ 3 ].add(\n\t\t\t\t\t\t\tresolve(\n\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\tnewDefer,\n\t\t\t\t\t\t\t\tjQuery.isFunction( onFulfilled ) ?\n\t\t\t\t\t\t\t\t\tonFulfilled :\n\t\t\t\t\t\t\t\t\tIdentity\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t// rejected_handlers.add( ... )\n\t\t\t\t\t\ttuples[ 2 ][ 3 ].add(\n\t\t\t\t\t\t\tresolve(\n\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\tnewDefer,\n\t\t\t\t\t\t\t\tjQuery.isFunction( onRejected ) ?\n\t\t\t\t\t\t\t\t\tonRejected :\n\t\t\t\t\t\t\t\t\tThrower\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\t\t\t\t\t} ).promise();\n\t\t\t\t},\n\n\t\t\t\t// Get a promise for this deferred\n\t\t\t\t// If obj is provided, the promise aspect is added to the object\n\t\t\t\tpromise: function( obj ) {\n\t\t\t\t\treturn obj != null ? jQuery.extend( obj, promise ) : promise;\n\t\t\t\t}\n\t\t\t},\n\t\t\tdeferred = {};\n\n\t\t// Add list-specific methods\n\t\tjQuery.each( tuples, function( i, tuple ) {\n\t\t\tvar list = tuple[ 2 ],\n\t\t\t\tstateString = tuple[ 5 ];\n\n\t\t\t// promise.progress = list.add\n\t\t\t// promise.done = list.add\n\t\t\t// promise.fail = list.add\n\t\t\tpromise[ tuple[ 1 ] ] = list.add;\n\n\t\t\t// Handle state\n\t\t\tif ( stateString ) {\n\t\t\t\tlist.add(\n\t\t\t\t\tfunction() {\n\n\t\t\t\t\t\t// state = \"resolved\" (i.e., fulfilled)\n\t\t\t\t\t\t// state = \"rejected\"\n\t\t\t\t\t\tstate = stateString;\n\t\t\t\t\t},\n\n\t\t\t\t\t// rejected_callbacks.disable\n\t\t\t\t\t// fulfilled_callbacks.disable\n\t\t\t\t\ttuples[ 3 - i ][ 2 ].disable,\n\n\t\t\t\t\t// progress_callbacks.lock\n\t\t\t\t\ttuples[ 0 ][ 2 ].lock\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// progress_handlers.fire\n\t\t\t// fulfilled_handlers.fire\n\t\t\t// rejected_handlers.fire\n\t\t\tlist.add( tuple[ 3 ].fire );\n\n\t\t\t// deferred.notify = function() { deferred.notifyWith(...) }\n\t\t\t// deferred.resolve = function() { deferred.resolveWith(...) }\n\t\t\t// deferred.reject = function() { deferred.rejectWith(...) }\n\t\t\tdeferred[ tuple[ 0 ] ] = function() {\n\t\t\t\tdeferred[ tuple[ 0 ] + \"With\" ]( this === deferred ? undefined : this, arguments );\n\t\t\t\treturn this;\n\t\t\t};\n\n\t\t\t// deferred.notifyWith = list.fireWith\n\t\t\t// deferred.resolveWith = list.fireWith\n\t\t\t// deferred.rejectWith = list.fireWith\n\t\t\tdeferred[ tuple[ 0 ] + \"With\" ] = list.fireWith;\n\t\t} );\n\n\t\t// Make the deferred a promise\n\t\tpromise.promise( deferred );\n\n\t\t// Call given func if any\n\t\tif ( func ) {\n\t\t\tfunc.call( deferred, deferred );\n\t\t}\n\n\t\t// All done!\n\t\treturn deferred;\n\t},\n\n\t// Deferred helper\n\twhen: function( singleValue ) {\n\t\tvar\n\n\t\t\t// count of uncompleted subordinates\n\t\t\tremaining = arguments.length,\n\n\t\t\t// count of unprocessed arguments\n\t\t\ti = remaining,\n\n\t\t\t// subordinate fulfillment data\n\t\t\tresolveContexts = Array( i ),\n\t\t\tresolveValues = slice.call( arguments ),\n\n\t\t\t// the master Deferred\n\t\t\tmaster = jQuery.Deferred(),\n\n\t\t\t// subordinate callback factory\n\t\t\tupdateFunc = function( i ) {\n\t\t\t\treturn function( value ) {\n\t\t\t\t\tresolveContexts[ i ] = this;\n\t\t\t\t\tresolveValues[ i ] = arguments.length > 1 ? slice.call( arguments ) : value;\n\t\t\t\t\tif ( !( --remaining ) ) {\n\t\t\t\t\t\tmaster.resolveWith( resolveContexts, resolveValues );\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t};\n\n\t\t// Single- and empty arguments are adopted like Promise.resolve\n\t\tif ( remaining <= 1 ) {\n\t\t\tadoptValue( singleValue, master.done( updateFunc( i ) ).resolve, master.reject );\n\n\t\t\t// Use .then() to unwrap secondary thenables (cf. gh-3000)\n\t\t\tif ( master.state() === \"pending\" ||\n\t\t\t\tjQuery.isFunction( resolveValues[ i ] && resolveValues[ i ].then ) ) {\n\n\t\t\t\treturn master.then();\n\t\t\t}\n\t\t}\n\n\t\t// Multiple arguments are aggregated like Promise.all array elements\n\t\twhile ( i-- ) {\n\t\t\tadoptValue( resolveValues[ i ], updateFunc( i ), master.reject );\n\t\t}\n\n\t\treturn master.promise();\n\t}\n} );\n\n\n// These usually indicate a programmer mistake during development,\n// warn about them ASAP rather than swallowing them by default.\nvar rerrorNames = /^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;\n\njQuery.Deferred.exceptionHook = function( error, stack ) {\n\n\t// Support: IE 8 - 9 only\n\t// Console exists when dev tools are open, which can happen at any time\n\tif ( window.console && window.console.warn && error && rerrorNames.test( error.name ) ) {\n\t\twindow.console.warn( \"jQuery.Deferred exception: \" + error.message, error.stack, stack );\n\t}\n};\n\n\n\n\njQuery.readyException = function( error ) {\n\twindow.setTimeout( function() {\n\t\tthrow error;\n\t} );\n};\n\n\n\n\n// The deferred used on DOM ready\nvar readyList = jQuery.Deferred();\n\njQuery.fn.ready = function( fn ) {\n\n\treadyList\n\t\t.then( fn )\n\n\t\t// Wrap jQuery.readyException in a function so that the lookup\n\t\t// happens at the time of error handling instead of callback\n\t\t// registration.\n\t\t.catch( function( error ) {\n\t\t\tjQuery.readyException( error );\n\t\t} );\n\n\treturn this;\n};\n\njQuery.extend( {\n\n\t// Is the DOM ready to be used? Set to true once it occurs.\n\tisReady: false,\n\n\t// A counter to track how many items to wait for before\n\t// the ready event fires. See #6781\n\treadyWait: 1,\n\n\t// Hold (or release) the ready event\n\tholdReady: function( hold ) {\n\t\tif ( hold ) {\n\t\t\tjQuery.readyWait++;\n\t\t} else {\n\t\t\tjQuery.ready( true );\n\t\t}\n\t},\n\n\t// Handle when the DOM is ready\n\tready: function( wait ) {\n\n\t\t// Abort if there are pending holds or we're already ready\n\t\tif ( wait === true ? --jQuery.readyWait : jQuery.isReady ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Remember that the DOM is ready\n\t\tjQuery.isReady = true;\n\n\t\t// If a normal DOM Ready event fired, decrement, and wait if need be\n\t\tif ( wait !== true && --jQuery.readyWait > 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If there are functions bound, to execute\n\t\treadyList.resolveWith( document, [ jQuery ] );\n\t}\n} );\n\njQuery.ready.then = readyList.then;\n\n// The ready event handler and self cleanup method\nfunction completed() {\n\tdocument.removeEventListener( \"DOMContentLoaded\", completed );\n\twindow.removeEventListener( \"load\", completed );\n\tjQuery.ready();\n}\n\n// Catch cases where $(document).ready() is called\n// after the browser event has already occurred.\n// Support: IE <=9 - 10 only\n// Older IE sometimes signals \"interactive\" too soon\nif ( document.readyState === \"complete\" ||\n\t( document.readyState !== \"loading\" && !document.documentElement.doScroll ) ) {\n\n\t// Handle it asynchronously to allow scripts the opportunity to delay ready\n\twindow.setTimeout( jQuery.ready );\n\n} else {\n\n\t// Use the handy event callback\n\tdocument.addEventListener( \"DOMContentLoaded\", completed );\n\n\t// A fallback to window.onload, that will always work\n\twindow.addEventListener( \"load\", completed );\n}\n\n\n\n\n// Multifunctional method to get and set values of a collection\n// The value/s can optionally be executed if it's a function\nvar access = function( elems, fn, key, value, chainable, emptyGet, raw ) {\n\tvar i = 0,\n\t\tlen = elems.length,\n\t\tbulk = key == null;\n\n\t// Sets many values\n\tif ( jQuery.type( key ) === \"object\" ) {\n\t\tchainable = true;\n\t\tfor ( i in key ) {\n\t\t\taccess( elems, fn, i, key[ i ], true, emptyGet, raw );\n\t\t}\n\n\t// Sets one value\n\t} else if ( value !== undefined ) {\n\t\tchainable = true;\n\n\t\tif ( !jQuery.isFunction( value ) ) {\n\t\t\traw = true;\n\t\t}\n\n\t\tif ( bulk ) {\n\n\t\t\t// Bulk operations run against the entire set\n\t\t\tif ( raw ) {\n\t\t\t\tfn.call( elems, value );\n\t\t\t\tfn = null;\n\n\t\t\t// ...except when executing function values\n\t\t\t} else {\n\t\t\t\tbulk = fn;\n\t\t\t\tfn = function( elem, key, value ) {\n\t\t\t\t\treturn bulk.call( jQuery( elem ), value );\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tif ( fn ) {\n\t\t\tfor ( ; i < len; i++ ) {\n\t\t\t\tfn(\n\t\t\t\t\telems[ i ], key, raw ?\n\t\t\t\t\tvalue :\n\t\t\t\t\tvalue.call( elems[ i ], i, fn( elems[ i ], key ) )\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn chainable ?\n\t\telems :\n\n\t\t// Gets\n\t\tbulk ?\n\t\t\tfn.call( elems ) :\n\t\t\tlen ? fn( elems[ 0 ], key ) : emptyGet;\n};\nvar acceptData = function( owner ) {\n\n\t// Accepts only:\n\t//  - Node\n\t//    - Node.ELEMENT_NODE\n\t//    - Node.DOCUMENT_NODE\n\t//  - Object\n\t//    - Any\n\treturn owner.nodeType === 1 || owner.nodeType === 9 || !( +owner.nodeType );\n};\n\n\n\n\nfunction Data() {\n\tthis.expando = jQuery.expando + Data.uid++;\n}\n\nData.uid = 1;\n\nData.prototype = {\n\n\tcache: function( owner ) {\n\n\t\t// Check if the owner object already has a cache\n\t\tvar value = owner[ this.expando ];\n\n\t\t// If not, create one\n\t\tif ( !value ) {\n\t\t\tvalue = {};\n\n\t\t\t// We can accept data for non-element nodes in modern browsers,\n\t\t\t// but we should not, see #8335.\n\t\t\t// Always return an empty object.\n\t\t\tif ( acceptData( owner ) ) {\n\n\t\t\t\t// If it is a node unlikely to be stringify-ed or looped over\n\t\t\t\t// use plain assignment\n\t\t\t\tif ( owner.nodeType ) {\n\t\t\t\t\towner[ this.expando ] = value;\n\n\t\t\t\t// Otherwise secure it in a non-enumerable property\n\t\t\t\t// configurable must be true to allow the property to be\n\t\t\t\t// deleted when data is removed\n\t\t\t\t} else {\n\t\t\t\t\tObject.defineProperty( owner, this.expando, {\n\t\t\t\t\t\tvalue: value,\n\t\t\t\t\t\tconfigurable: true\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn value;\n\t},\n\tset: function( owner, data, value ) {\n\t\tvar prop,\n\t\t\tcache = this.cache( owner );\n\n\t\t// Handle: [ owner, key, value ] args\n\t\t// Always use camelCase key (gh-2257)\n\t\tif ( typeof data === \"string\" ) {\n\t\t\tcache[ jQuery.camelCase( data ) ] = value;\n\n\t\t// Handle: [ owner, { properties } ] args\n\t\t} else {\n\n\t\t\t// Copy the properties one-by-one to the cache object\n\t\t\tfor ( prop in data ) {\n\t\t\t\tcache[ jQuery.camelCase( prop ) ] = data[ prop ];\n\t\t\t}\n\t\t}\n\t\treturn cache;\n\t},\n\tget: function( owner, key ) {\n\t\treturn key === undefined ?\n\t\t\tthis.cache( owner ) :\n\n\t\t\t// Always use camelCase key (gh-2257)\n\t\t\towner[ this.expando ] && owner[ this.expando ][ jQuery.camelCase( key ) ];\n\t},\n\taccess: function( owner, key, value ) {\n\n\t\t// In cases where either:\n\t\t//\n\t\t//   1. No key was specified\n\t\t//   2. A string key was specified, but no value provided\n\t\t//\n\t\t// Take the \"read\" path and allow the get method to determine\n\t\t// which value to return, respectively either:\n\t\t//\n\t\t//   1. The entire cache object\n\t\t//   2. The data stored at the key\n\t\t//\n\t\tif ( key === undefined ||\n\t\t\t\t( ( key && typeof key === \"string\" ) && value === undefined ) ) {\n\n\t\t\treturn this.get( owner, key );\n\t\t}\n\n\t\t// When the key is not a string, or both a key and value\n\t\t// are specified, set or extend (existing objects) with either:\n\t\t//\n\t\t//   1. An object of properties\n\t\t//   2. A key and value\n\t\t//\n\t\tthis.set( owner, key, value );\n\n\t\t// Since the \"set\" path can have two possible entry points\n\t\t// return the expected data based on which path was taken[*]\n\t\treturn value !== undefined ? value : key;\n\t},\n\tremove: function( owner, key ) {\n\t\tvar i,\n\t\t\tcache = owner[ this.expando ];\n\n\t\tif ( cache === undefined ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( key !== undefined ) {\n\n\t\t\t// Support array or space separated string of keys\n\t\t\tif ( jQuery.isArray( key ) ) {\n\n\t\t\t\t// If key is an array of keys...\n\t\t\t\t// We always set camelCase keys, so remove that.\n\t\t\t\tkey = key.map( jQuery.camelCase );\n\t\t\t} else {\n\t\t\t\tkey = jQuery.camelCase( key );\n\n\t\t\t\t// If a key with the spaces exists, use it.\n\t\t\t\t// Otherwise, create an array by matching non-whitespace\n\t\t\t\tkey = key in cache ?\n\t\t\t\t\t[ key ] :\n\t\t\t\t\t( key.match( rnotwhite ) || [] );\n\t\t\t}\n\n\t\t\ti = key.length;\n\n\t\t\twhile ( i-- ) {\n\t\t\t\tdelete cache[ key[ i ] ];\n\t\t\t}\n\t\t}\n\n\t\t// Remove the expando if there's no more data\n\t\tif ( key === undefined || jQuery.isEmptyObject( cache ) ) {\n\n\t\t\t// Support: Chrome <=35 - 45\n\t\t\t// Webkit & Blink performance suffers when deleting properties\n\t\t\t// from DOM nodes, so set to undefined instead\n\t\t\t// https://bugs.chromium.org/p/chromium/issues/detail?id=378607 (bug restricted)\n\t\t\tif ( owner.nodeType ) {\n\t\t\t\towner[ this.expando ] = undefined;\n\t\t\t} else {\n\t\t\t\tdelete owner[ this.expando ];\n\t\t\t}\n\t\t}\n\t},\n\thasData: function( owner ) {\n\t\tvar cache = owner[ this.expando ];\n\t\treturn cache !== undefined && !jQuery.isEmptyObject( cache );\n\t}\n};\nvar dataPriv = new Data();\n\nvar dataUser = new Data();\n\n\n\n//\tImplementation Summary\n//\n//\t1. Enforce API surface and semantic compatibility with 1.9.x branch\n//\t2. Improve the module's maintainability by reducing the storage\n//\t\tpaths to a single mechanism.\n//\t3. Use the same single mechanism to support \"private\" and \"user\" data.\n//\t4. _Never_ expose \"private\" data to user code (TODO: Drop _data, _removeData)\n//\t5. Avoid exposing implementation details on user objects (eg. expando properties)\n//\t6. Provide a clear path for implementation upgrade to WeakMap in 2014\n\nvar rbrace = /^(?:\\{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$/,\n\trmultiDash = /[A-Z]/g;\n\nfunction dataAttr( elem, key, data ) {\n\tvar name;\n\n\t// If nothing was found internally, try to fetch any\n\t// data from the HTML5 data-* attribute\n\tif ( data === undefined && elem.nodeType === 1 ) {\n\t\tname = \"data-\" + key.replace( rmultiDash, \"-$&\" ).toLowerCase();\n\t\tdata = elem.getAttribute( name );\n\n\t\tif ( typeof data === \"string\" ) {\n\t\t\ttry {\n\t\t\t\tdata = data === \"true\" ? true :\n\t\t\t\t\tdata === \"false\" ? false :\n\t\t\t\t\tdata === \"null\" ? null :\n\n\t\t\t\t\t// Only convert to a number if it doesn't change the string\n\t\t\t\t\t+data + \"\" === data ? +data :\n\t\t\t\t\trbrace.test( data ) ? JSON.parse( data ) :\n\t\t\t\t\tdata;\n\t\t\t} catch ( e ) {}\n\n\t\t\t// Make sure we set the data so it isn't changed later\n\t\t\tdataUser.set( elem, key, data );\n\t\t} else {\n\t\t\tdata = undefined;\n\t\t}\n\t}\n\treturn data;\n}\n\njQuery.extend( {\n\thasData: function( elem ) {\n\t\treturn dataUser.hasData( elem ) || dataPriv.hasData( elem );\n\t},\n\n\tdata: function( elem, name, data ) {\n\t\treturn dataUser.access( elem, name, data );\n\t},\n\n\tremoveData: function( elem, name ) {\n\t\tdataUser.remove( elem, name );\n\t},\n\n\t// TODO: Now that all calls to _data and _removeData have been replaced\n\t// with direct calls to dataPriv methods, these can be deprecated.\n\t_data: function( elem, name, data ) {\n\t\treturn dataPriv.access( elem, name, data );\n\t},\n\n\t_removeData: function( elem, name ) {\n\t\tdataPriv.remove( elem, name );\n\t}\n} );\n\njQuery.fn.extend( {\n\tdata: function( key, value ) {\n\t\tvar i, name, data,\n\t\t\telem = this[ 0 ],\n\t\t\tattrs = elem && elem.attributes;\n\n\t\t// Gets all values\n\t\tif ( key === undefined ) {\n\t\t\tif ( this.length ) {\n\t\t\t\tdata = dataUser.get( elem );\n\n\t\t\t\tif ( elem.nodeType === 1 && !dataPriv.get( elem, \"hasDataAttrs\" ) ) {\n\t\t\t\t\ti = attrs.length;\n\t\t\t\t\twhile ( i-- ) {\n\n\t\t\t\t\t\t// Support: IE 11 only\n\t\t\t\t\t\t// The attrs elements can be null (#14894)\n\t\t\t\t\t\tif ( attrs[ i ] ) {\n\t\t\t\t\t\t\tname = attrs[ i ].name;\n\t\t\t\t\t\t\tif ( name.indexOf( \"data-\" ) === 0 ) {\n\t\t\t\t\t\t\t\tname = jQuery.camelCase( name.slice( 5 ) );\n\t\t\t\t\t\t\t\tdataAttr( elem, name, data[ name ] );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tdataPriv.set( elem, \"hasDataAttrs\", true );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn data;\n\t\t}\n\n\t\t// Sets multiple values\n\t\tif ( typeof key === \"object\" ) {\n\t\t\treturn this.each( function() {\n\t\t\t\tdataUser.set( this, key );\n\t\t\t} );\n\t\t}\n\n\t\treturn access( this, function( value ) {\n\t\t\tvar data;\n\n\t\t\t// The calling jQuery object (element matches) is not empty\n\t\t\t// (and therefore has an element appears at this[ 0 ]) and the\n\t\t\t// `value` parameter was not undefined. An empty jQuery object\n\t\t\t// will result in `undefined` for elem = this[ 0 ] which will\n\t\t\t// throw an exception if an attempt to read a data cache is made.\n\t\t\tif ( elem && value === undefined ) {\n\n\t\t\t\t// Attempt to get data from the cache\n\t\t\t\t// The key will always be camelCased in Data\n\t\t\t\tdata = dataUser.get( elem, key );\n\t\t\t\tif ( data !== undefined ) {\n\t\t\t\t\treturn data;\n\t\t\t\t}\n\n\t\t\t\t// Attempt to \"discover\" the data in\n\t\t\t\t// HTML5 custom data-* attrs\n\t\t\t\tdata = dataAttr( elem, key );\n\t\t\t\tif ( data !== undefined ) {\n\t\t\t\t\treturn data;\n\t\t\t\t}\n\n\t\t\t\t// We tried really hard, but the data doesn't exist.\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Set the data...\n\t\t\tthis.each( function() {\n\n\t\t\t\t// We always store the camelCased key\n\t\t\t\tdataUser.set( this, key, value );\n\t\t\t} );\n\t\t}, null, value, arguments.length > 1, null, true );\n\t},\n\n\tremoveData: function( key ) {\n\t\treturn this.each( function() {\n\t\t\tdataUser.remove( this, key );\n\t\t} );\n\t}\n} );\n\n\njQuery.extend( {\n\tqueue: function( elem, type, data ) {\n\t\tvar queue;\n\n\t\tif ( elem ) {\n\t\t\ttype = ( type || \"fx\" ) + \"queue\";\n\t\t\tqueue = dataPriv.get( elem, type );\n\n\t\t\t// Speed up dequeue by getting out quickly if this is just a lookup\n\t\t\tif ( data ) {\n\t\t\t\tif ( !queue || jQuery.isArray( data ) ) {\n\t\t\t\t\tqueue = dataPriv.access( elem, type, jQuery.makeArray( data ) );\n\t\t\t\t} else {\n\t\t\t\t\tqueue.push( data );\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn queue || [];\n\t\t}\n\t},\n\n\tdequeue: function( elem, type ) {\n\t\ttype = type || \"fx\";\n\n\t\tvar queue = jQuery.queue( elem, type ),\n\t\t\tstartLength = queue.length,\n\t\t\tfn = queue.shift(),\n\t\t\thooks = jQuery._queueHooks( elem, type ),\n\t\t\tnext = function() {\n\t\t\t\tjQuery.dequeue( elem, type );\n\t\t\t};\n\n\t\t// If the fx queue is dequeued, always remove the progress sentinel\n\t\tif ( fn === \"inprogress\" ) {\n\t\t\tfn = queue.shift();\n\t\t\tstartLength--;\n\t\t}\n\n\t\tif ( fn ) {\n\n\t\t\t// Add a progress sentinel to prevent the fx queue from being\n\t\t\t// automatically dequeued\n\t\t\tif ( type === \"fx\" ) {\n\t\t\t\tqueue.unshift( \"inprogress\" );\n\t\t\t}\n\n\t\t\t// Clear up the last queue stop function\n\t\t\tdelete hooks.stop;\n\t\t\tfn.call( elem, next, hooks );\n\t\t}\n\n\t\tif ( !startLength && hooks ) {\n\t\t\thooks.empty.fire();\n\t\t}\n\t},\n\n\t// Not public - generate a queueHooks object, or return the current one\n\t_queueHooks: function( elem, type ) {\n\t\tvar key = type + \"queueHooks\";\n\t\treturn dataPriv.get( elem, key ) || dataPriv.access( elem, key, {\n\t\t\tempty: jQuery.Callbacks( \"once memory\" ).add( function() {\n\t\t\t\tdataPriv.remove( elem, [ type + \"queue\", key ] );\n\t\t\t} )\n\t\t} );\n\t}\n} );\n\njQuery.fn.extend( {\n\tqueue: function( type, data ) {\n\t\tvar setter = 2;\n\n\t\tif ( typeof type !== \"string\" ) {\n\t\t\tdata = type;\n\t\t\ttype = \"fx\";\n\t\t\tsetter--;\n\t\t}\n\n\t\tif ( arguments.length < setter ) {\n\t\t\treturn jQuery.queue( this[ 0 ], type );\n\t\t}\n\n\t\treturn data === undefined ?\n\t\t\tthis :\n\t\t\tthis.each( function() {\n\t\t\t\tvar queue = jQuery.queue( this, type, data );\n\n\t\t\t\t// Ensure a hooks for this queue\n\t\t\t\tjQuery._queueHooks( this, type );\n\n\t\t\t\tif ( type === \"fx\" && queue[ 0 ] !== \"inprogress\" ) {\n\t\t\t\t\tjQuery.dequeue( this, type );\n\t\t\t\t}\n\t\t\t} );\n\t},\n\tdequeue: function( type ) {\n\t\treturn this.each( function() {\n\t\t\tjQuery.dequeue( this, type );\n\t\t} );\n\t},\n\tclearQueue: function( type ) {\n\t\treturn this.queue( type || \"fx\", [] );\n\t},\n\n\t// Get a promise resolved when queues of a certain type\n\t// are emptied (fx is the type by default)\n\tpromise: function( type, obj ) {\n\t\tvar tmp,\n\t\t\tcount = 1,\n\t\t\tdefer = jQuery.Deferred(),\n\t\t\telements = this,\n\t\t\ti = this.length,\n\t\t\tresolve = function() {\n\t\t\t\tif ( !( --count ) ) {\n\t\t\t\t\tdefer.resolveWith( elements, [ elements ] );\n\t\t\t\t}\n\t\t\t};\n\n\t\tif ( typeof type !== \"string\" ) {\n\t\t\tobj = type;\n\t\t\ttype = undefined;\n\t\t}\n\t\ttype = type || \"fx\";\n\n\t\twhile ( i-- ) {\n\t\t\ttmp = dataPriv.get( elements[ i ], type + \"queueHooks\" );\n\t\t\tif ( tmp && tmp.empty ) {\n\t\t\t\tcount++;\n\t\t\t\ttmp.empty.add( resolve );\n\t\t\t}\n\t\t}\n\t\tresolve();\n\t\treturn defer.promise( obj );\n\t}\n} );\nvar pnum = ( /[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/ ).source;\n\nvar rcssNum = new RegExp( \"^(?:([+-])=|)(\" + pnum + \")([a-z%]*)$\", \"i\" );\n\n\nvar cssExpand = [ \"Top\", \"Right\", \"Bottom\", \"Left\" ];\n\nvar isHiddenWithinTree = function( elem, el ) {\n\n\t\t// isHiddenWithinTree might be called from jQuery#filter function;\n\t\t// in that case, element will be second argument\n\t\telem = el || elem;\n\n\t\t// Inline style trumps all\n\t\treturn elem.style.display === \"none\" ||\n\t\t\telem.style.display === \"\" &&\n\n\t\t\t// Otherwise, check computed style\n\t\t\t// Support: Firefox <=43 - 45\n\t\t\t// Disconnected elements can have computed display: none, so first confirm that elem is\n\t\t\t// in the document.\n\t\t\tjQuery.contains( elem.ownerDocument, elem ) &&\n\n\t\t\tjQuery.css( elem, \"display\" ) === \"none\";\n\t};\n\nvar swap = function( elem, options, callback, args ) {\n\tvar ret, name,\n\t\told = {};\n\n\t// Remember the old values, and insert the new ones\n\tfor ( name in options ) {\n\t\told[ name ] = elem.style[ name ];\n\t\telem.style[ name ] = options[ name ];\n\t}\n\n\tret = callback.apply( elem, args || [] );\n\n\t// Revert the old values\n\tfor ( name in options ) {\n\t\telem.style[ name ] = old[ name ];\n\t}\n\n\treturn ret;\n};\n\n\n\n\nfunction adjustCSS( elem, prop, valueParts, tween ) {\n\tvar adjusted,\n\t\tscale = 1,\n\t\tmaxIterations = 20,\n\t\tcurrentValue = tween ?\n\t\t\tfunction() {\n\t\t\t\treturn tween.cur();\n\t\t\t} :\n\t\t\tfunction() {\n\t\t\t\treturn jQuery.css( elem, prop, \"\" );\n\t\t\t},\n\t\tinitial = currentValue(),\n\t\tunit = valueParts && valueParts[ 3 ] || ( jQuery.cssNumber[ prop ] ? \"\" : \"px\" ),\n\n\t\t// Starting value computation is required for potential unit mismatches\n\t\tinitialInUnit = ( jQuery.cssNumber[ prop ] || unit !== \"px\" && +initial ) &&\n\t\t\trcssNum.exec( jQuery.css( elem, prop ) );\n\n\tif ( initialInUnit && initialInUnit[ 3 ] !== unit ) {\n\n\t\t// Trust units reported by jQuery.css\n\t\tunit = unit || initialInUnit[ 3 ];\n\n\t\t// Make sure we update the tween properties later on\n\t\tvalueParts = valueParts || [];\n\n\t\t// Iteratively approximate from a nonzero starting point\n\t\tinitialInUnit = +initial || 1;\n\n\t\tdo {\n\n\t\t\t// If previous iteration zeroed out, double until we get *something*.\n\t\t\t// Use string for doubling so we don't accidentally see scale as unchanged below\n\t\t\tscale = scale || \".5\";\n\n\t\t\t// Adjust and apply\n\t\t\tinitialInUnit = initialInUnit / scale;\n\t\t\tjQuery.style( elem, prop, initialInUnit + unit );\n\n\t\t// Update scale, tolerating zero or NaN from tween.cur()\n\t\t// Break the loop if scale is unchanged or perfect, or if we've just had enough.\n\t\t} while (\n\t\t\tscale !== ( scale = currentValue() / initial ) && scale !== 1 && --maxIterations\n\t\t);\n\t}\n\n\tif ( valueParts ) {\n\t\tinitialInUnit = +initialInUnit || +initial || 0;\n\n\t\t// Apply relative offset (+=/-=) if specified\n\t\tadjusted = valueParts[ 1 ] ?\n\t\t\tinitialInUnit + ( valueParts[ 1 ] + 1 ) * valueParts[ 2 ] :\n\t\t\t+valueParts[ 2 ];\n\t\tif ( tween ) {\n\t\t\ttween.unit = unit;\n\t\t\ttween.start = initialInUnit;\n\t\t\ttween.end = adjusted;\n\t\t}\n\t}\n\treturn adjusted;\n}\n\n\nvar defaultDisplayMap = {};\n\nfunction getDefaultDisplay( elem ) {\n\tvar temp,\n\t\tdoc = elem.ownerDocument,\n\t\tnodeName = elem.nodeName,\n\t\tdisplay = defaultDisplayMap[ nodeName ];\n\n\tif ( display ) {\n\t\treturn display;\n\t}\n\n\ttemp = doc.body.appendChild( doc.createElement( nodeName ) ),\n\tdisplay = jQuery.css( temp, \"display\" );\n\n\ttemp.parentNode.removeChild( temp );\n\n\tif ( display === \"none\" ) {\n\t\tdisplay = \"block\";\n\t}\n\tdefaultDisplayMap[ nodeName ] = display;\n\n\treturn display;\n}\n\nfunction showHide( elements, show ) {\n\tvar display, elem,\n\t\tvalues = [],\n\t\tindex = 0,\n\t\tlength = elements.length;\n\n\t// Determine new display value for elements that need to change\n\tfor ( ; index < length; index++ ) {\n\t\telem = elements[ index ];\n\t\tif ( !elem.style ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tdisplay = elem.style.display;\n\t\tif ( show ) {\n\n\t\t\t// Since we force visibility upon cascade-hidden elements, an immediate (and slow)\n\t\t\t// check is required in this first loop unless we have a nonempty display value (either\n\t\t\t// inline or about-to-be-restored)\n\t\t\tif ( display === \"none\" ) {\n\t\t\t\tvalues[ index ] = dataPriv.get( elem, \"display\" ) || null;\n\t\t\t\tif ( !values[ index ] ) {\n\t\t\t\t\telem.style.display = \"\";\n\t\t\t\t}\n\t\t\t}\n\t\t\tif ( elem.style.display === \"\" && isHiddenWithinTree( elem ) ) {\n\t\t\t\tvalues[ index ] = getDefaultDisplay( elem );\n\t\t\t}\n\t\t} else {\n\t\t\tif ( display !== \"none\" ) {\n\t\t\t\tvalues[ index ] = \"none\";\n\n\t\t\t\t// Remember what we're overwriting\n\t\t\t\tdataPriv.set( elem, \"display\", display );\n\t\t\t}\n\t\t}\n\t}\n\n\t// Set the display of the elements in a second loop to avoid constant reflow\n\tfor ( index = 0; index < length; index++ ) {\n\t\tif ( values[ index ] != null ) {\n\t\t\telements[ index ].style.display = values[ index ];\n\t\t}\n\t}\n\n\treturn elements;\n}\n\njQuery.fn.extend( {\n\tshow: function() {\n\t\treturn showHide( this, true );\n\t},\n\thide: function() {\n\t\treturn showHide( this );\n\t},\n\ttoggle: function( state ) {\n\t\tif ( typeof state === \"boolean\" ) {\n\t\t\treturn state ? this.show() : this.hide();\n\t\t}\n\n\t\treturn this.each( function() {\n\t\t\tif ( isHiddenWithinTree( this ) ) {\n\t\t\t\tjQuery( this ).show();\n\t\t\t} else {\n\t\t\t\tjQuery( this ).hide();\n\t\t\t}\n\t\t} );\n\t}\n} );\nvar rcheckableType = ( /^(?:checkbox|radio)$/i );\n\nvar rtagName = ( /<([a-z][^\\/\\0>\\x20\\t\\r\\n\\f]+)/i );\n\nvar rscriptType = ( /^$|\\/(?:java|ecma)script/i );\n\n\n\n// We have to close these tags to support XHTML (#13200)\nvar wrapMap = {\n\n\t// Support: IE <=9 only\n\toption: [ 1, \"<select multiple='multiple'>\", \"</select>\" ],\n\n\t// XHTML parsers do not magically insert elements in the\n\t// same way that tag soup parsers do. So we cannot shorten\n\t// this by omitting <tbody> or other required elements.\n\tthead: [ 1, \"<table>\", \"</table>\" ],\n\tcol: [ 2, \"<table><colgroup>\", \"</colgroup></table>\" ],\n\ttr: [ 2, \"<table><tbody>\", \"</tbody></table>\" ],\n\ttd: [ 3, \"<table><tbody><tr>\", \"</tr></tbody></table>\" ],\n\n\t_default: [ 0, \"\", \"\" ]\n};\n\n// Support: IE <=9 only\nwrapMap.optgroup = wrapMap.option;\n\nwrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;\nwrapMap.th = wrapMap.td;\n\n\nfunction getAll( context, tag ) {\n\n\t// Support: IE <=9 - 11 only\n\t// Use typeof to avoid zero-argument method invocation on host objects (#15151)\n\tvar ret = typeof context.getElementsByTagName !== \"undefined\" ?\n\t\t\tcontext.getElementsByTagName( tag || \"*\" ) :\n\t\t\ttypeof context.querySelectorAll !== \"undefined\" ?\n\t\t\t\tcontext.querySelectorAll( tag || \"*\" ) :\n\t\t\t[];\n\n\treturn tag === undefined || tag && jQuery.nodeName( context, tag ) ?\n\t\tjQuery.merge( [ context ], ret ) :\n\t\tret;\n}\n\n\n// Mark scripts as having already been evaluated\nfunction setGlobalEval( elems, refElements ) {\n\tvar i = 0,\n\t\tl = elems.length;\n\n\tfor ( ; i < l; i++ ) {\n\t\tdataPriv.set(\n\t\t\telems[ i ],\n\t\t\t\"globalEval\",\n\t\t\t!refElements || dataPriv.get( refElements[ i ], \"globalEval\" )\n\t\t);\n\t}\n}\n\n\nvar rhtml = /<|&#?\\w+;/;\n\nfunction buildFragment( elems, context, scripts, selection, ignored ) {\n\tvar elem, tmp, tag, wrap, contains, j,\n\t\tfragment = context.createDocumentFragment(),\n\t\tnodes = [],\n\t\ti = 0,\n\t\tl = elems.length;\n\n\tfor ( ; i < l; i++ ) {\n\t\telem = elems[ i ];\n\n\t\tif ( elem || elem === 0 ) {\n\n\t\t\t// Add nodes directly\n\t\t\tif ( jQuery.type( elem ) === \"object\" ) {\n\n\t\t\t\t// Support: Android <=4.0 only, PhantomJS 1 only\n\t\t\t\t// push.apply(_, arraylike) throws on ancient WebKit\n\t\t\t\tjQuery.merge( nodes, elem.nodeType ? [ elem ] : elem );\n\n\t\t\t// Convert non-html into a text node\n\t\t\t} else if ( !rhtml.test( elem ) ) {\n\t\t\t\tnodes.push( context.createTextNode( elem ) );\n\n\t\t\t// Convert html into DOM nodes\n\t\t\t} else {\n\t\t\t\ttmp = tmp || fragment.appendChild( context.createElement( \"div\" ) );\n\n\t\t\t\t// Deserialize a standard representation\n\t\t\t\ttag = ( rtagName.exec( elem ) || [ \"\", \"\" ] )[ 1 ].toLowerCase();\n\t\t\t\twrap = wrapMap[ tag ] || wrapMap._default;\n\t\t\t\ttmp.innerHTML = wrap[ 1 ] + jQuery.htmlPrefilter( elem ) + wrap[ 2 ];\n\n\t\t\t\t// Descend through wrappers to the right content\n\t\t\t\tj = wrap[ 0 ];\n\t\t\t\twhile ( j-- ) {\n\t\t\t\t\ttmp = tmp.lastChild;\n\t\t\t\t}\n\n\t\t\t\t// Support: Android <=4.0 only, PhantomJS 1 only\n\t\t\t\t// push.apply(_, arraylike) throws on ancient WebKit\n\t\t\t\tjQuery.merge( nodes, tmp.childNodes );\n\n\t\t\t\t// Remember the top-level container\n\t\t\t\ttmp = fragment.firstChild;\n\n\t\t\t\t// Ensure the created nodes are orphaned (#12392)\n\t\t\t\ttmp.textContent = \"\";\n\t\t\t}\n\t\t}\n\t}\n\n\t// Remove wrapper from fragment\n\tfragment.textContent = \"\";\n\n\ti = 0;\n\twhile ( ( elem = nodes[ i++ ] ) ) {\n\n\t\t// Skip elements already in the context collection (trac-4087)\n\t\tif ( selection && jQuery.inArray( elem, selection ) > -1 ) {\n\t\t\tif ( ignored ) {\n\t\t\t\tignored.push( elem );\n\t\t\t}\n\t\t\tcontinue;\n\t\t}\n\n\t\tcontains = jQuery.contains( elem.ownerDocument, elem );\n\n\t\t// Append to fragment\n\t\ttmp = getAll( fragment.appendChild( elem ), \"script\" );\n\n\t\t// Preserve script evaluation history\n\t\tif ( contains ) {\n\t\t\tsetGlobalEval( tmp );\n\t\t}\n\n\t\t// Capture executables\n\t\tif ( scripts ) {\n\t\t\tj = 0;\n\t\t\twhile ( ( elem = tmp[ j++ ] ) ) {\n\t\t\t\tif ( rscriptType.test( elem.type || \"\" ) ) {\n\t\t\t\t\tscripts.push( elem );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn fragment;\n}\n\n\n( function() {\n\tvar fragment = document.createDocumentFragment(),\n\t\tdiv = fragment.appendChild( document.createElement( \"div\" ) ),\n\t\tinput = document.createElement( \"input\" );\n\n\t// Support: Android 4.0 - 4.3 only\n\t// Check state lost if the name is set (#11217)\n\t// Support: Windows Web Apps (WWA)\n\t// `name` and `type` must use .setAttribute for WWA (#14901)\n\tinput.setAttribute( \"type\", \"radio\" );\n\tinput.setAttribute( \"checked\", \"checked\" );\n\tinput.setAttribute( \"name\", \"t\" );\n\n\tdiv.appendChild( input );\n\n\t// Support: Android <=4.1 only\n\t// Older WebKit doesn't clone checked state correctly in fragments\n\tsupport.checkClone = div.cloneNode( true ).cloneNode( true ).lastChild.checked;\n\n\t// Support: IE <=11 only\n\t// Make sure textarea (and checkbox) defaultValue is properly cloned\n\tdiv.innerHTML = \"<textarea>x</textarea>\";\n\tsupport.noCloneChecked = !!div.cloneNode( true ).lastChild.defaultValue;\n} )();\nvar documentElement = document.documentElement;\n\n\n\nvar\n\trkeyEvent = /^key/,\n\trmouseEvent = /^(?:mouse|pointer|contextmenu|drag|drop)|click/,\n\trtypenamespace = /^([^.]*)(?:\\.(.+)|)/;\n\nfunction returnTrue() {\n\treturn true;\n}\n\nfunction returnFalse() {\n\treturn false;\n}\n\n// Support: IE <=9 only\n// See #13393 for more info\nfunction safeActiveElement() {\n\ttry {\n\t\treturn document.activeElement;\n\t} catch ( err ) { }\n}\n\nfunction on( elem, types, selector, data, fn, one ) {\n\tvar origFn, type;\n\n\t// Types can be a map of types/handlers\n\tif ( typeof types === \"object\" ) {\n\n\t\t// ( types-Object, selector, data )\n\t\tif ( typeof selector !== \"string\" ) {\n\n\t\t\t// ( types-Object, data )\n\t\t\tdata = data || selector;\n\t\t\tselector = undefined;\n\t\t}\n\t\tfor ( type in types ) {\n\t\t\ton( elem, type, selector, data, types[ type ], one );\n\t\t}\n\t\treturn elem;\n\t}\n\n\tif ( data == null && fn == null ) {\n\n\t\t// ( types, fn )\n\t\tfn = selector;\n\t\tdata = selector = undefined;\n\t} else if ( fn == null ) {\n\t\tif ( typeof selector === \"string\" ) {\n\n\t\t\t// ( types, selector, fn )\n\t\t\tfn = data;\n\t\t\tdata = undefined;\n\t\t} else {\n\n\t\t\t// ( types, data, fn )\n\t\t\tfn = data;\n\t\t\tdata = selector;\n\t\t\tselector = undefined;\n\t\t}\n\t}\n\tif ( fn === false ) {\n\t\tfn = returnFalse;\n\t} else if ( !fn ) {\n\t\treturn elem;\n\t}\n\n\tif ( one === 1 ) {\n\t\torigFn = fn;\n\t\tfn = function( event ) {\n\n\t\t\t// Can use an empty set, since event contains the info\n\t\t\tjQuery().off( event );\n\t\t\treturn origFn.apply( this, arguments );\n\t\t};\n\n\t\t// Use same guid so caller can remove using origFn\n\t\tfn.guid = origFn.guid || ( origFn.guid = jQuery.guid++ );\n\t}\n\treturn elem.each( function() {\n\t\tjQuery.event.add( this, types, fn, data, selector );\n\t} );\n}\n\n/*\n * Helper functions for managing events -- not part of the public interface.\n * Props to Dean Edwards' addEvent library for many of the ideas.\n */\njQuery.event = {\n\n\tglobal: {},\n\n\tadd: function( elem, types, handler, data, selector ) {\n\n\t\tvar handleObjIn, eventHandle, tmp,\n\t\t\tevents, t, handleObj,\n\t\t\tspecial, handlers, type, namespaces, origType,\n\t\t\telemData = dataPriv.get( elem );\n\n\t\t// Don't attach events to noData or text/comment nodes (but allow plain objects)\n\t\tif ( !elemData ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Caller can pass in an object of custom data in lieu of the handler\n\t\tif ( handler.handler ) {\n\t\t\thandleObjIn = handler;\n\t\t\thandler = handleObjIn.handler;\n\t\t\tselector = handleObjIn.selector;\n\t\t}\n\n\t\t// Ensure that invalid selectors throw exceptions at attach time\n\t\t// Evaluate against documentElement in case elem is a non-element node (e.g., document)\n\t\tif ( selector ) {\n\t\t\tjQuery.find.matchesSelector( documentElement, selector );\n\t\t}\n\n\t\t// Make sure that the handler has a unique ID, used to find/remove it later\n\t\tif ( !handler.guid ) {\n\t\t\thandler.guid = jQuery.guid++;\n\t\t}\n\n\t\t// Init the element's event structure and main handler, if this is the first\n\t\tif ( !( events = elemData.events ) ) {\n\t\t\tevents = elemData.events = {};\n\t\t}\n\t\tif ( !( eventHandle = elemData.handle ) ) {\n\t\t\teventHandle = elemData.handle = function( e ) {\n\n\t\t\t\t// Discard the second event of a jQuery.event.trigger() and\n\t\t\t\t// when an event is called after a page has unloaded\n\t\t\t\treturn typeof jQuery !== \"undefined\" && jQuery.event.triggered !== e.type ?\n\t\t\t\t\tjQuery.event.dispatch.apply( elem, arguments ) : undefined;\n\t\t\t};\n\t\t}\n\n\t\t// Handle multiple events separated by a space\n\t\ttypes = ( types || \"\" ).match( rnotwhite ) || [ \"\" ];\n\t\tt = types.length;\n\t\twhile ( t-- ) {\n\t\t\ttmp = rtypenamespace.exec( types[ t ] ) || [];\n\t\t\ttype = origType = tmp[ 1 ];\n\t\t\tnamespaces = ( tmp[ 2 ] || \"\" ).split( \".\" ).sort();\n\n\t\t\t// There *must* be a type, no attaching namespace-only handlers\n\t\t\tif ( !type ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// If event changes its type, use the special event handlers for the changed type\n\t\t\tspecial = jQuery.event.special[ type ] || {};\n\n\t\t\t// If selector defined, determine special event api type, otherwise given type\n\t\t\ttype = ( selector ? special.delegateType : special.bindType ) || type;\n\n\t\t\t// Update special based on newly reset type\n\t\t\tspecial = jQuery.event.special[ type ] || {};\n\n\t\t\t// handleObj is passed to all event handlers\n\t\t\thandleObj = jQuery.extend( {\n\t\t\t\ttype: type,\n\t\t\t\torigType: origType,\n\t\t\t\tdata: data,\n\t\t\t\thandler: handler,\n\t\t\t\tguid: handler.guid,\n\t\t\t\tselector: selector,\n\t\t\t\tneedsContext: selector && jQuery.expr.match.needsContext.test( selector ),\n\t\t\t\tnamespace: namespaces.join( \".\" )\n\t\t\t}, handleObjIn );\n\n\t\t\t// Init the event handler queue if we're the first\n\t\t\tif ( !( handlers = events[ type ] ) ) {\n\t\t\t\thandlers = events[ type ] = [];\n\t\t\t\thandlers.delegateCount = 0;\n\n\t\t\t\t// Only use addEventListener if the special events handler returns false\n\t\t\t\tif ( !special.setup ||\n\t\t\t\t\tspecial.setup.call( elem, data, namespaces, eventHandle ) === false ) {\n\n\t\t\t\t\tif ( elem.addEventListener ) {\n\t\t\t\t\t\telem.addEventListener( type, eventHandle );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( special.add ) {\n\t\t\t\tspecial.add.call( elem, handleObj );\n\n\t\t\t\tif ( !handleObj.handler.guid ) {\n\t\t\t\t\thandleObj.handler.guid = handler.guid;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Add to the element's handler list, delegates in front\n\t\t\tif ( selector ) {\n\t\t\t\thandlers.splice( handlers.delegateCount++, 0, handleObj );\n\t\t\t} else {\n\t\t\t\thandlers.push( handleObj );\n\t\t\t}\n\n\t\t\t// Keep track of which events have ever been used, for event optimization\n\t\t\tjQuery.event.global[ type ] = true;\n\t\t}\n\n\t},\n\n\t// Detach an event or set of events from an element\n\tremove: function( elem, types, handler, selector, mappedTypes ) {\n\n\t\tvar j, origCount, tmp,\n\t\t\tevents, t, handleObj,\n\t\t\tspecial, handlers, type, namespaces, origType,\n\t\t\telemData = dataPriv.hasData( elem ) && dataPriv.get( elem );\n\n\t\tif ( !elemData || !( events = elemData.events ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Once for each type.namespace in types; type may be omitted\n\t\ttypes = ( types || \"\" ).match( rnotwhite ) || [ \"\" ];\n\t\tt = types.length;\n\t\twhile ( t-- ) {\n\t\t\ttmp = rtypenamespace.exec( types[ t ] ) || [];\n\t\t\ttype = origType = tmp[ 1 ];\n\t\t\tnamespaces = ( tmp[ 2 ] || \"\" ).split( \".\" ).sort();\n\n\t\t\t// Unbind all events (on this namespace, if provided) for the element\n\t\t\tif ( !type ) {\n\t\t\t\tfor ( type in events ) {\n\t\t\t\t\tjQuery.event.remove( elem, type + types[ t ], handler, selector, true );\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tspecial = jQuery.event.special[ type ] || {};\n\t\t\ttype = ( selector ? special.delegateType : special.bindType ) || type;\n\t\t\thandlers = events[ type ] || [];\n\t\t\ttmp = tmp[ 2 ] &&\n\t\t\t\tnew RegExp( \"(^|\\\\.)\" + namespaces.join( \"\\\\.(?:.*\\\\.|)\" ) + \"(\\\\.|$)\" );\n\n\t\t\t// Remove matching events\n\t\t\torigCount = j = handlers.length;\n\t\t\twhile ( j-- ) {\n\t\t\t\thandleObj = handlers[ j ];\n\n\t\t\t\tif ( ( mappedTypes || origType === handleObj.origType ) &&\n\t\t\t\t\t( !handler || handler.guid === handleObj.guid ) &&\n\t\t\t\t\t( !tmp || tmp.test( handleObj.namespace ) ) &&\n\t\t\t\t\t( !selector || selector === handleObj.selector ||\n\t\t\t\t\t\tselector === \"**\" && handleObj.selector ) ) {\n\t\t\t\t\thandlers.splice( j, 1 );\n\n\t\t\t\t\tif ( handleObj.selector ) {\n\t\t\t\t\t\thandlers.delegateCount--;\n\t\t\t\t\t}\n\t\t\t\t\tif ( special.remove ) {\n\t\t\t\t\t\tspecial.remove.call( elem, handleObj );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Remove generic event handler if we removed something and no more handlers exist\n\t\t\t// (avoids potential for endless recursion during removal of special event handlers)\n\t\t\tif ( origCount && !handlers.length ) {\n\t\t\t\tif ( !special.teardown ||\n\t\t\t\t\tspecial.teardown.call( elem, namespaces, elemData.handle ) === false ) {\n\n\t\t\t\t\tjQuery.removeEvent( elem, type, elemData.handle );\n\t\t\t\t}\n\n\t\t\t\tdelete events[ type ];\n\t\t\t}\n\t\t}\n\n\t\t// Remove data and the expando if it's no longer used\n\t\tif ( jQuery.isEmptyObject( events ) ) {\n\t\t\tdataPriv.remove( elem, \"handle events\" );\n\t\t}\n\t},\n\n\tdispatch: function( nativeEvent ) {\n\n\t\t// Make a writable jQuery.Event from the native event object\n\t\tvar event = jQuery.event.fix( nativeEvent );\n\n\t\tvar i, j, ret, matched, handleObj, handlerQueue,\n\t\t\targs = new Array( arguments.length ),\n\t\t\thandlers = ( dataPriv.get( this, \"events\" ) || {} )[ event.type ] || [],\n\t\t\tspecial = jQuery.event.special[ event.type ] || {};\n\n\t\t// Use the fix-ed jQuery.Event rather than the (read-only) native event\n\t\targs[ 0 ] = event;\n\n\t\tfor ( i = 1; i < arguments.length; i++ ) {\n\t\t\targs[ i ] = arguments[ i ];\n\t\t}\n\n\t\tevent.delegateTarget = this;\n\n\t\t// Call the preDispatch hook for the mapped type, and let it bail if desired\n\t\tif ( special.preDispatch && special.preDispatch.call( this, event ) === false ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Determine handlers\n\t\thandlerQueue = jQuery.event.handlers.call( this, event, handlers );\n\n\t\t// Run delegates first; they may want to stop propagation beneath us\n\t\ti = 0;\n\t\twhile ( ( matched = handlerQueue[ i++ ] ) && !event.isPropagationStopped() ) {\n\t\t\tevent.currentTarget = matched.elem;\n\n\t\t\tj = 0;\n\t\t\twhile ( ( handleObj = matched.handlers[ j++ ] ) &&\n\t\t\t\t!event.isImmediatePropagationStopped() ) {\n\n\t\t\t\t// Triggered event must either 1) have no namespace, or 2) have namespace(s)\n\t\t\t\t// a subset or equal to those in the bound event (both can have no namespace).\n\t\t\t\tif ( !event.rnamespace || event.rnamespace.test( handleObj.namespace ) ) {\n\n\t\t\t\t\tevent.handleObj = handleObj;\n\t\t\t\t\tevent.data = handleObj.data;\n\n\t\t\t\t\tret = ( ( jQuery.event.special[ handleObj.origType ] || {} ).handle ||\n\t\t\t\t\t\thandleObj.handler ).apply( matched.elem, args );\n\n\t\t\t\t\tif ( ret !== undefined ) {\n\t\t\t\t\t\tif ( ( event.result = ret ) === false ) {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Call the postDispatch hook for the mapped type\n\t\tif ( special.postDispatch ) {\n\t\t\tspecial.postDispatch.call( this, event );\n\t\t}\n\n\t\treturn event.result;\n\t},\n\n\thandlers: function( event, handlers ) {\n\t\tvar i, matches, sel, handleObj,\n\t\t\thandlerQueue = [],\n\t\t\tdelegateCount = handlers.delegateCount,\n\t\t\tcur = event.target;\n\n\t\t// Support: IE <=9\n\t\t// Find delegate handlers\n\t\t// Black-hole SVG <use> instance trees (#13180)\n\t\t//\n\t\t// Support: Firefox <=42\n\t\t// Avoid non-left-click in FF but don't block IE radio events (#3861, gh-2343)\n\t\tif ( delegateCount && cur.nodeType &&\n\t\t\t( event.type !== \"click\" || isNaN( event.button ) || event.button < 1 ) ) {\n\n\t\t\tfor ( ; cur !== this; cur = cur.parentNode || this ) {\n\n\t\t\t\t// Don't check non-elements (#13208)\n\t\t\t\t// Don't process clicks on disabled elements (#6911, #8165, #11382, #11764)\n\t\t\t\tif ( cur.nodeType === 1 && ( cur.disabled !== true || event.type !== \"click\" ) ) {\n\t\t\t\t\tmatches = [];\n\t\t\t\t\tfor ( i = 0; i < delegateCount; i++ ) {\n\t\t\t\t\t\thandleObj = handlers[ i ];\n\n\t\t\t\t\t\t// Don't conflict with Object.prototype properties (#13203)\n\t\t\t\t\t\tsel = handleObj.selector + \" \";\n\n\t\t\t\t\t\tif ( matches[ sel ] === undefined ) {\n\t\t\t\t\t\t\tmatches[ sel ] = handleObj.needsContext ?\n\t\t\t\t\t\t\t\tjQuery( sel, this ).index( cur ) > -1 :\n\t\t\t\t\t\t\t\tjQuery.find( sel, this, null, [ cur ] ).length;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( matches[ sel ] ) {\n\t\t\t\t\t\t\tmatches.push( handleObj );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif ( matches.length ) {\n\t\t\t\t\t\thandlerQueue.push( { elem: cur, handlers: matches } );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Add the remaining (directly-bound) handlers\n\t\tif ( delegateCount < handlers.length ) {\n\t\t\thandlerQueue.push( { elem: this, handlers: handlers.slice( delegateCount ) } );\n\t\t}\n\n\t\treturn handlerQueue;\n\t},\n\n\taddProp: function( name, hook ) {\n\t\tObject.defineProperty( jQuery.Event.prototype, name, {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true,\n\n\t\t\tget: jQuery.isFunction( hook ) ?\n\t\t\t\tfunction() {\n\t\t\t\t\tif ( this.originalEvent ) {\n\t\t\t\t\t\t\treturn hook( this.originalEvent );\n\t\t\t\t\t}\n\t\t\t\t} :\n\t\t\t\tfunction() {\n\t\t\t\t\tif ( this.originalEvent ) {\n\t\t\t\t\t\t\treturn this.originalEvent[ name ];\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\tset: function( value ) {\n\t\t\t\tObject.defineProperty( this, name, {\n\t\t\t\t\tenumerable: true,\n\t\t\t\t\tconfigurable: true,\n\t\t\t\t\twritable: true,\n\t\t\t\t\tvalue: value\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\t},\n\n\tfix: function( originalEvent ) {\n\t\treturn originalEvent[ jQuery.expando ] ?\n\t\t\toriginalEvent :\n\t\t\tnew jQuery.Event( originalEvent );\n\t},\n\n\tspecial: {\n\t\tload: {\n\n\t\t\t// Prevent triggered image.load events from bubbling to window.load\n\t\t\tnoBubble: true\n\t\t},\n\t\tfocus: {\n\n\t\t\t// Fire native event if possible so blur/focus sequence is correct\n\t\t\ttrigger: function() {\n\t\t\t\tif ( this !== safeActiveElement() && this.focus ) {\n\t\t\t\t\tthis.focus();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\t\t\tdelegateType: \"focusin\"\n\t\t},\n\t\tblur: {\n\t\t\ttrigger: function() {\n\t\t\t\tif ( this === safeActiveElement() && this.blur ) {\n\t\t\t\t\tthis.blur();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\t\t\tdelegateType: \"focusout\"\n\t\t},\n\t\tclick: {\n\n\t\t\t// For checkbox, fire native event so checked state will be right\n\t\t\ttrigger: function() {\n\t\t\t\tif ( this.type === \"checkbox\" && this.click && jQuery.nodeName( this, \"input\" ) ) {\n\t\t\t\t\tthis.click();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t// For cross-browser consistency, don't fire native .click() on links\n\t\t\t_default: function( event ) {\n\t\t\t\treturn jQuery.nodeName( event.target, \"a\" );\n\t\t\t}\n\t\t},\n\n\t\tbeforeunload: {\n\t\t\tpostDispatch: function( event ) {\n\n\t\t\t\t// Support: Firefox 20+\n\t\t\t\t// Firefox doesn't alert if the returnValue field is not set.\n\t\t\t\tif ( event.result !== undefined && event.originalEvent ) {\n\t\t\t\t\tevent.originalEvent.returnValue = event.result;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\njQuery.removeEvent = function( elem, type, handle ) {\n\n\t// This \"if\" is needed for plain objects\n\tif ( elem.removeEventListener ) {\n\t\telem.removeEventListener( type, handle );\n\t}\n};\n\njQuery.Event = function( src, props ) {\n\n\t// Allow instantiation without the 'new' keyword\n\tif ( !( this instanceof jQuery.Event ) ) {\n\t\treturn new jQuery.Event( src, props );\n\t}\n\n\t// Event object\n\tif ( src && src.type ) {\n\t\tthis.originalEvent = src;\n\t\tthis.type = src.type;\n\n\t\t// Events bubbling up the document may have been marked as prevented\n\t\t// by a handler lower down the tree; reflect the correct value.\n\t\tthis.isDefaultPrevented = src.defaultPrevented ||\n\t\t\t\tsrc.defaultPrevented === undefined &&\n\n\t\t\t\t// Support: Android <=2.3 only\n\t\t\t\tsrc.returnValue === false ?\n\t\t\treturnTrue :\n\t\t\treturnFalse;\n\n\t\t// Create target properties\n\t\t// Support: Safari <=6 - 7 only\n\t\t// Target should not be a text node (#504, #13143)\n\t\tthis.target = ( src.target && src.target.nodeType === 3 ) ?\n\t\t\tsrc.target.parentNode :\n\t\t\tsrc.target;\n\n\t\tthis.currentTarget = src.currentTarget;\n\t\tthis.relatedTarget = src.relatedTarget;\n\n\t// Event type\n\t} else {\n\t\tthis.type = src;\n\t}\n\n\t// Put explicitly provided properties onto the event object\n\tif ( props ) {\n\t\tjQuery.extend( this, props );\n\t}\n\n\t// Create a timestamp if incoming event doesn't have one\n\tthis.timeStamp = src && src.timeStamp || jQuery.now();\n\n\t// Mark it as fixed\n\tthis[ jQuery.expando ] = true;\n};\n\n// jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding\n// https://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html\njQuery.Event.prototype = {\n\tconstructor: jQuery.Event,\n\tisDefaultPrevented: returnFalse,\n\tisPropagationStopped: returnFalse,\n\tisImmediatePropagationStopped: returnFalse,\n\tisSimulated: false,\n\n\tpreventDefault: function() {\n\t\tvar e = this.originalEvent;\n\n\t\tthis.isDefaultPrevented = returnTrue;\n\n\t\tif ( e && !this.isSimulated ) {\n\t\t\te.preventDefault();\n\t\t}\n\t},\n\tstopPropagation: function() {\n\t\tvar e = this.originalEvent;\n\n\t\tthis.isPropagationStopped = returnTrue;\n\n\t\tif ( e && !this.isSimulated ) {\n\t\t\te.stopPropagation();\n\t\t}\n\t},\n\tstopImmediatePropagation: function() {\n\t\tvar e = this.originalEvent;\n\n\t\tthis.isImmediatePropagationStopped = returnTrue;\n\n\t\tif ( e && !this.isSimulated ) {\n\t\t\te.stopImmediatePropagation();\n\t\t}\n\n\t\tthis.stopPropagation();\n\t}\n};\n\n// Includes all common event props including KeyEvent and MouseEvent specific props\njQuery.each( {\n\taltKey: true,\n\tbubbles: true,\n\tcancelable: true,\n\tchangedTouches: true,\n\tctrlKey: true,\n\tdetail: true,\n\teventPhase: true,\n\tmetaKey: true,\n\tpageX: true,\n\tpageY: true,\n\tshiftKey: true,\n\tview: true,\n\t\"char\": true,\n\tcharCode: true,\n\tkey: true,\n\tkeyCode: true,\n\tbutton: true,\n\tbuttons: true,\n\tclientX: true,\n\tclientY: true,\n\toffsetX: true,\n\toffsetY: true,\n\tpointerId: true,\n\tpointerType: true,\n\tscreenX: true,\n\tscreenY: true,\n\ttargetTouches: true,\n\ttoElement: true,\n\ttouches: true,\n\n\twhich: function( event ) {\n\t\tvar button = event.button;\n\n\t\t// Add which for key events\n\t\tif ( event.which == null && rkeyEvent.test( event.type ) ) {\n\t\t\treturn event.charCode != null ? event.charCode : event.keyCode;\n\t\t}\n\n\t\t// Add which for click: 1 === left; 2 === middle; 3 === right\n\t\tif ( !event.which && button !== undefined && rmouseEvent.test( event.type ) ) {\n\t\t\treturn ( button & 1 ? 1 : ( button & 2 ? 3 : ( button & 4 ? 2 : 0 ) ) );\n\t\t}\n\n\t\treturn event.which;\n\t}\n}, jQuery.event.addProp );\n\n// Create mouseenter/leave events using mouseover/out and event-time checks\n// so that event delegation works in jQuery.\n// Do the same for pointerenter/pointerleave and pointerover/pointerout\n//\n// Support: Safari 7 only\n// Safari sends mouseenter too often; see:\n// https://bugs.chromium.org/p/chromium/issues/detail?id=470258\n// for the description of the bug (it existed in older Chrome versions as well).\njQuery.each( {\n\tmouseenter: \"mouseover\",\n\tmouseleave: \"mouseout\",\n\tpointerenter: \"pointerover\",\n\tpointerleave: \"pointerout\"\n}, function( orig, fix ) {\n\tjQuery.event.special[ orig ] = {\n\t\tdelegateType: fix,\n\t\tbindType: fix,\n\n\t\thandle: function( event ) {\n\t\t\tvar ret,\n\t\t\t\ttarget = this,\n\t\t\t\trelated = event.relatedTarget,\n\t\t\t\thandleObj = event.handleObj;\n\n\t\t\t// For mouseenter/leave call the handler if related is outside the target.\n\t\t\t// NB: No relatedTarget if the mouse left/entered the browser window\n\t\t\tif ( !related || ( related !== target && !jQuery.contains( target, related ) ) ) {\n\t\t\t\tevent.type = handleObj.origType;\n\t\t\t\tret = handleObj.handler.apply( this, arguments );\n\t\t\t\tevent.type = fix;\n\t\t\t}\n\t\t\treturn ret;\n\t\t}\n\t};\n} );\n\njQuery.fn.extend( {\n\n\ton: function( types, selector, data, fn ) {\n\t\treturn on( this, types, selector, data, fn );\n\t},\n\tone: function( types, selector, data, fn ) {\n\t\treturn on( this, types, selector, data, fn, 1 );\n\t},\n\toff: function( types, selector, fn ) {\n\t\tvar handleObj, type;\n\t\tif ( types && types.preventDefault && types.handleObj ) {\n\n\t\t\t// ( event )  dispatched jQuery.Event\n\t\t\thandleObj = types.handleObj;\n\t\t\tjQuery( types.delegateTarget ).off(\n\t\t\t\thandleObj.namespace ?\n\t\t\t\t\thandleObj.origType + \".\" + handleObj.namespace :\n\t\t\t\t\thandleObj.origType,\n\t\t\t\thandleObj.selector,\n\t\t\t\thandleObj.handler\n\t\t\t);\n\t\t\treturn this;\n\t\t}\n\t\tif ( typeof types === \"object\" ) {\n\n\t\t\t// ( types-object [, selector] )\n\t\t\tfor ( type in types ) {\n\t\t\t\tthis.off( type, selector, types[ type ] );\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\t\tif ( selector === false || typeof selector === \"function\" ) {\n\n\t\t\t// ( types [, fn] )\n\t\t\tfn = selector;\n\t\t\tselector = undefined;\n\t\t}\n\t\tif ( fn === false ) {\n\t\t\tfn = returnFalse;\n\t\t}\n\t\treturn this.each( function() {\n\t\t\tjQuery.event.remove( this, types, fn, selector );\n\t\t} );\n\t}\n} );\n\n\nvar\n\n\t/* eslint-disable max-len */\n\n\t// See https://github.com/eslint/eslint/issues/3229\n\trxhtmlTag = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\\/\\0>\\x20\\t\\r\\n\\f]*)[^>]*)\\/>/gi,\n\n\t/* eslint-enable */\n\n\t// Support: IE <=10 - 11, Edge 12 - 13\n\t// In IE/Edge using regex groups here causes severe slowdowns.\n\t// See https://connect.microsoft.com/IE/feedback/details/1736512/\n\trnoInnerhtml = /<script|<style|<link/i,\n\n\t// checked=\"checked\" or checked\n\trchecked = /checked\\s*(?:[^=]|=\\s*.checked.)/i,\n\trscriptTypeMasked = /^true\\/(.*)/,\n\trcleanScript = /^\\s*<!(?:\\[CDATA\\[|--)|(?:\\]\\]|--)>\\s*$/g;\n\nfunction manipulationTarget( elem, content ) {\n\tif ( jQuery.nodeName( elem, \"table\" ) &&\n\t\tjQuery.nodeName( content.nodeType !== 11 ? content : content.firstChild, \"tr\" ) ) {\n\n\t\treturn elem.getElementsByTagName( \"tbody\" )[ 0 ] || elem;\n\t}\n\n\treturn elem;\n}\n\n// Replace/restore the type attribute of script elements for safe DOM manipulation\nfunction disableScript( elem ) {\n\telem.type = ( elem.getAttribute( \"type\" ) !== null ) + \"/\" + elem.type;\n\treturn elem;\n}\nfunction restoreScript( elem ) {\n\tvar match = rscriptTypeMasked.exec( elem.type );\n\n\tif ( match ) {\n\t\telem.type = match[ 1 ];\n\t} else {\n\t\telem.removeAttribute( \"type\" );\n\t}\n\n\treturn elem;\n}\n\nfunction cloneCopyEvent( src, dest ) {\n\tvar i, l, type, pdataOld, pdataCur, udataOld, udataCur, events;\n\n\tif ( dest.nodeType !== 1 ) {\n\t\treturn;\n\t}\n\n\t// 1. Copy private data: events, handlers, etc.\n\tif ( dataPriv.hasData( src ) ) {\n\t\tpdataOld = dataPriv.access( src );\n\t\tpdataCur = dataPriv.set( dest, pdataOld );\n\t\tevents = pdataOld.events;\n\n\t\tif ( events ) {\n\t\t\tdelete pdataCur.handle;\n\t\t\tpdataCur.events = {};\n\n\t\t\tfor ( type in events ) {\n\t\t\t\tfor ( i = 0, l = events[ type ].length; i < l; i++ ) {\n\t\t\t\t\tjQuery.event.add( dest, type, events[ type ][ i ] );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// 2. Copy user data\n\tif ( dataUser.hasData( src ) ) {\n\t\tudataOld = dataUser.access( src );\n\t\tudataCur = jQuery.extend( {}, udataOld );\n\n\t\tdataUser.set( dest, udataCur );\n\t}\n}\n\n// Fix IE bugs, see support tests\nfunction fixInput( src, dest ) {\n\tvar nodeName = dest.nodeName.toLowerCase();\n\n\t// Fails to persist the checked state of a cloned checkbox or radio button.\n\tif ( nodeName === \"input\" && rcheckableType.test( src.type ) ) {\n\t\tdest.checked = src.checked;\n\n\t// Fails to return the selected option to the default selected state when cloning options\n\t} else if ( nodeName === \"input\" || nodeName === \"textarea\" ) {\n\t\tdest.defaultValue = src.defaultValue;\n\t}\n}\n\nfunction domManip( collection, args, callback, ignored ) {\n\n\t// Flatten any nested arrays\n\targs = concat.apply( [], args );\n\n\tvar fragment, first, scripts, hasScripts, node, doc,\n\t\ti = 0,\n\t\tl = collection.length,\n\t\tiNoClone = l - 1,\n\t\tvalue = args[ 0 ],\n\t\tisFunction = jQuery.isFunction( value );\n\n\t// We can't cloneNode fragments that contain checked, in WebKit\n\tif ( isFunction ||\n\t\t\t( l > 1 && typeof value === \"string\" &&\n\t\t\t\t!support.checkClone && rchecked.test( value ) ) ) {\n\t\treturn collection.each( function( index ) {\n\t\t\tvar self = collection.eq( index );\n\t\t\tif ( isFunction ) {\n\t\t\t\targs[ 0 ] = value.call( this, index, self.html() );\n\t\t\t}\n\t\t\tdomManip( self, args, callback, ignored );\n\t\t} );\n\t}\n\n\tif ( l ) {\n\t\tfragment = buildFragment( args, collection[ 0 ].ownerDocument, false, collection, ignored );\n\t\tfirst = fragment.firstChild;\n\n\t\tif ( fragment.childNodes.length === 1 ) {\n\t\t\tfragment = first;\n\t\t}\n\n\t\t// Require either new content or an interest in ignored elements to invoke the callback\n\t\tif ( first || ignored ) {\n\t\t\tscripts = jQuery.map( getAll( fragment, \"script\" ), disableScript );\n\t\t\thasScripts = scripts.length;\n\n\t\t\t// Use the original fragment for the last item\n\t\t\t// instead of the first because it can end up\n\t\t\t// being emptied incorrectly in certain situations (#8070).\n\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\tnode = fragment;\n\n\t\t\t\tif ( i !== iNoClone ) {\n\t\t\t\t\tnode = jQuery.clone( node, true, true );\n\n\t\t\t\t\t// Keep references to cloned scripts for later restoration\n\t\t\t\t\tif ( hasScripts ) {\n\n\t\t\t\t\t\t// Support: Android <=4.0 only, PhantomJS 1 only\n\t\t\t\t\t\t// push.apply(_, arraylike) throws on ancient WebKit\n\t\t\t\t\t\tjQuery.merge( scripts, getAll( node, \"script\" ) );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcallback.call( collection[ i ], node, i );\n\t\t\t}\n\n\t\t\tif ( hasScripts ) {\n\t\t\t\tdoc = scripts[ scripts.length - 1 ].ownerDocument;\n\n\t\t\t\t// Reenable scripts\n\t\t\t\tjQuery.map( scripts, restoreScript );\n\n\t\t\t\t// Evaluate executable scripts on first document insertion\n\t\t\t\tfor ( i = 0; i < hasScripts; i++ ) {\n\t\t\t\t\tnode = scripts[ i ];\n\t\t\t\t\tif ( rscriptType.test( node.type || \"\" ) &&\n\t\t\t\t\t\t!dataPriv.access( node, \"globalEval\" ) &&\n\t\t\t\t\t\tjQuery.contains( doc, node ) ) {\n\n\t\t\t\t\t\tif ( node.src ) {\n\n\t\t\t\t\t\t\t// Optional AJAX dependency, but won't run scripts if not present\n\t\t\t\t\t\t\tif ( jQuery._evalUrl ) {\n\t\t\t\t\t\t\t\tjQuery._evalUrl( node.src );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tDOMEval( node.textContent.replace( rcleanScript, \"\" ), doc );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn collection;\n}\n\nfunction remove( elem, selector, keepData ) {\n\tvar node,\n\t\tnodes = selector ? jQuery.filter( selector, elem ) : elem,\n\t\ti = 0;\n\n\tfor ( ; ( node = nodes[ i ] ) != null; i++ ) {\n\t\tif ( !keepData && node.nodeType === 1 ) {\n\t\t\tjQuery.cleanData( getAll( node ) );\n\t\t}\n\n\t\tif ( node.parentNode ) {\n\t\t\tif ( keepData && jQuery.contains( node.ownerDocument, node ) ) {\n\t\t\t\tsetGlobalEval( getAll( node, \"script\" ) );\n\t\t\t}\n\t\t\tnode.parentNode.removeChild( node );\n\t\t}\n\t}\n\n\treturn elem;\n}\n\njQuery.extend( {\n\thtmlPrefilter: function( html ) {\n\t\treturn html.replace( rxhtmlTag, \"<$1></$2>\" );\n\t},\n\n\tclone: function( elem, dataAndEvents, deepDataAndEvents ) {\n\t\tvar i, l, srcElements, destElements,\n\t\t\tclone = elem.cloneNode( true ),\n\t\t\tinPage = jQuery.contains( elem.ownerDocument, elem );\n\n\t\t// Fix IE cloning issues\n\t\tif ( !support.noCloneChecked && ( elem.nodeType === 1 || elem.nodeType === 11 ) &&\n\t\t\t\t!jQuery.isXMLDoc( elem ) ) {\n\n\t\t\t// We eschew Sizzle here for performance reasons: https://jsperf.com/getall-vs-sizzle/2\n\t\t\tdestElements = getAll( clone );\n\t\t\tsrcElements = getAll( elem );\n\n\t\t\tfor ( i = 0, l = srcElements.length; i < l; i++ ) {\n\t\t\t\tfixInput( srcElements[ i ], destElements[ i ] );\n\t\t\t}\n\t\t}\n\n\t\t// Copy the events from the original to the clone\n\t\tif ( dataAndEvents ) {\n\t\t\tif ( deepDataAndEvents ) {\n\t\t\t\tsrcElements = srcElements || getAll( elem );\n\t\t\t\tdestElements = destElements || getAll( clone );\n\n\t\t\t\tfor ( i = 0, l = srcElements.length; i < l; i++ ) {\n\t\t\t\t\tcloneCopyEvent( srcElements[ i ], destElements[ i ] );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcloneCopyEvent( elem, clone );\n\t\t\t}\n\t\t}\n\n\t\t// Preserve script evaluation history\n\t\tdestElements = getAll( clone, \"script\" );\n\t\tif ( destElements.length > 0 ) {\n\t\t\tsetGlobalEval( destElements, !inPage && getAll( elem, \"script\" ) );\n\t\t}\n\n\t\t// Return the cloned set\n\t\treturn clone;\n\t},\n\n\tcleanData: function( elems ) {\n\t\tvar data, elem, type,\n\t\t\tspecial = jQuery.event.special,\n\t\t\ti = 0;\n\n\t\tfor ( ; ( elem = elems[ i ] ) !== undefined; i++ ) {\n\t\t\tif ( acceptData( elem ) ) {\n\t\t\t\tif ( ( data = elem[ dataPriv.expando ] ) ) {\n\t\t\t\t\tif ( data.events ) {\n\t\t\t\t\t\tfor ( type in data.events ) {\n\t\t\t\t\t\t\tif ( special[ type ] ) {\n\t\t\t\t\t\t\t\tjQuery.event.remove( elem, type );\n\n\t\t\t\t\t\t\t// This is a shortcut to avoid jQuery.event.remove's overhead\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tjQuery.removeEvent( elem, type, data.handle );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Support: Chrome <=35 - 45+\n\t\t\t\t\t// Assign undefined instead of using delete, see Data#remove\n\t\t\t\t\telem[ dataPriv.expando ] = undefined;\n\t\t\t\t}\n\t\t\t\tif ( elem[ dataUser.expando ] ) {\n\n\t\t\t\t\t// Support: Chrome <=35 - 45+\n\t\t\t\t\t// Assign undefined instead of using delete, see Data#remove\n\t\t\t\t\telem[ dataUser.expando ] = undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n} );\n\njQuery.fn.extend( {\n\tdetach: function( selector ) {\n\t\treturn remove( this, selector, true );\n\t},\n\n\tremove: function( selector ) {\n\t\treturn remove( this, selector );\n\t},\n\n\ttext: function( value ) {\n\t\treturn access( this, function( value ) {\n\t\t\treturn value === undefined ?\n\t\t\t\tjQuery.text( this ) :\n\t\t\t\tthis.empty().each( function() {\n\t\t\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\n\t\t\t\t\t\tthis.textContent = value;\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t}, null, value, arguments.length );\n\t},\n\n\tappend: function() {\n\t\treturn domManip( this, arguments, function( elem ) {\n\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\n\t\t\t\tvar target = manipulationTarget( this, elem );\n\t\t\t\ttarget.appendChild( elem );\n\t\t\t}\n\t\t} );\n\t},\n\n\tprepend: function() {\n\t\treturn domManip( this, arguments, function( elem ) {\n\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\n\t\t\t\tvar target = manipulationTarget( this, elem );\n\t\t\t\ttarget.insertBefore( elem, target.firstChild );\n\t\t\t}\n\t\t} );\n\t},\n\n\tbefore: function() {\n\t\treturn domManip( this, arguments, function( elem ) {\n\t\t\tif ( this.parentNode ) {\n\t\t\t\tthis.parentNode.insertBefore( elem, this );\n\t\t\t}\n\t\t} );\n\t},\n\n\tafter: function() {\n\t\treturn domManip( this, arguments, function( elem ) {\n\t\t\tif ( this.parentNode ) {\n\t\t\t\tthis.parentNode.insertBefore( elem, this.nextSibling );\n\t\t\t}\n\t\t} );\n\t},\n\n\tempty: function() {\n\t\tvar elem,\n\t\t\ti = 0;\n\n\t\tfor ( ; ( elem = this[ i ] ) != null; i++ ) {\n\t\t\tif ( elem.nodeType === 1 ) {\n\n\t\t\t\t// Prevent memory leaks\n\t\t\t\tjQuery.cleanData( getAll( elem, false ) );\n\n\t\t\t\t// Remove any remaining nodes\n\t\t\t\telem.textContent = \"\";\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tclone: function( dataAndEvents, deepDataAndEvents ) {\n\t\tdataAndEvents = dataAndEvents == null ? false : dataAndEvents;\n\t\tdeepDataAndEvents = deepDataAndEvents == null ? dataAndEvents : deepDataAndEvents;\n\n\t\treturn this.map( function() {\n\t\t\treturn jQuery.clone( this, dataAndEvents, deepDataAndEvents );\n\t\t} );\n\t},\n\n\thtml: function( value ) {\n\t\treturn access( this, function( value ) {\n\t\t\tvar elem = this[ 0 ] || {},\n\t\t\t\ti = 0,\n\t\t\t\tl = this.length;\n\n\t\t\tif ( value === undefined && elem.nodeType === 1 ) {\n\t\t\t\treturn elem.innerHTML;\n\t\t\t}\n\n\t\t\t// See if we can take a shortcut and just use innerHTML\n\t\t\tif ( typeof value === \"string\" && !rnoInnerhtml.test( value ) &&\n\t\t\t\t!wrapMap[ ( rtagName.exec( value ) || [ \"\", \"\" ] )[ 1 ].toLowerCase() ] ) {\n\n\t\t\t\tvalue = jQuery.htmlPrefilter( value );\n\n\t\t\t\ttry {\n\t\t\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\t\t\telem = this[ i ] || {};\n\n\t\t\t\t\t\t// Remove element nodes and prevent memory leaks\n\t\t\t\t\t\tif ( elem.nodeType === 1 ) {\n\t\t\t\t\t\t\tjQuery.cleanData( getAll( elem, false ) );\n\t\t\t\t\t\t\telem.innerHTML = value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\telem = 0;\n\n\t\t\t\t// If using innerHTML throws an exception, use the fallback method\n\t\t\t\t} catch ( e ) {}\n\t\t\t}\n\n\t\t\tif ( elem ) {\n\t\t\t\tthis.empty().append( value );\n\t\t\t}\n\t\t}, null, value, arguments.length );\n\t},\n\n\treplaceWith: function() {\n\t\tvar ignored = [];\n\n\t\t// Make the changes, replacing each non-ignored context element with the new content\n\t\treturn domManip( this, arguments, function( elem ) {\n\t\t\tvar parent = this.parentNode;\n\n\t\t\tif ( jQuery.inArray( this, ignored ) < 0 ) {\n\t\t\t\tjQuery.cleanData( getAll( this ) );\n\t\t\t\tif ( parent ) {\n\t\t\t\t\tparent.replaceChild( elem, this );\n\t\t\t\t}\n\t\t\t}\n\n\t\t// Force callback invocation\n\t\t}, ignored );\n\t}\n} );\n\njQuery.each( {\n\tappendTo: \"append\",\n\tprependTo: \"prepend\",\n\tinsertBefore: \"before\",\n\tinsertAfter: \"after\",\n\treplaceAll: \"replaceWith\"\n}, function( name, original ) {\n\tjQuery.fn[ name ] = function( selector ) {\n\t\tvar elems,\n\t\t\tret = [],\n\t\t\tinsert = jQuery( selector ),\n\t\t\tlast = insert.length - 1,\n\t\t\ti = 0;\n\n\t\tfor ( ; i <= last; i++ ) {\n\t\t\telems = i === last ? this : this.clone( true );\n\t\t\tjQuery( insert[ i ] )[ original ]( elems );\n\n\t\t\t// Support: Android <=4.0 only, PhantomJS 1 only\n\t\t\t// .get() because push.apply(_, arraylike) throws on ancient WebKit\n\t\t\tpush.apply( ret, elems.get() );\n\t\t}\n\n\t\treturn this.pushStack( ret );\n\t};\n} );\nvar rmargin = ( /^margin/ );\n\nvar rnumnonpx = new RegExp( \"^(\" + pnum + \")(?!px)[a-z%]+$\", \"i\" );\n\nvar getStyles = function( elem ) {\n\n\t\t// Support: IE <=11 only, Firefox <=30 (#15098, #14150)\n\t\t// IE throws on elements created in popups\n\t\t// FF meanwhile throws on frame elements through \"defaultView.getComputedStyle\"\n\t\tvar view = elem.ownerDocument.defaultView;\n\n\t\tif ( !view || !view.opener ) {\n\t\t\tview = window;\n\t\t}\n\n\t\treturn view.getComputedStyle( elem );\n\t};\n\n\n\n( function() {\n\n\t// Executing both pixelPosition & boxSizingReliable tests require only one layout\n\t// so they're executed at the same time to save the second computation.\n\tfunction computeStyleTests() {\n\n\t\t// This is a singleton, we need to execute it only once\n\t\tif ( !div ) {\n\t\t\treturn;\n\t\t}\n\n\t\tdiv.style.cssText =\n\t\t\t\"box-sizing:border-box;\" +\n\t\t\t\"position:relative;display:block;\" +\n\t\t\t\"margin:auto;border:1px;padding:1px;\" +\n\t\t\t\"top:1%;width:50%\";\n\t\tdiv.innerHTML = \"\";\n\t\tdocumentElement.appendChild( container );\n\n\t\tvar divStyle = window.getComputedStyle( div );\n\t\tpixelPositionVal = divStyle.top !== \"1%\";\n\n\t\t// Support: Android 4.0 - 4.3 only, Firefox <=3 - 44\n\t\treliableMarginLeftVal = divStyle.marginLeft === \"2px\";\n\t\tboxSizingReliableVal = divStyle.width === \"4px\";\n\n\t\t// Support: Android 4.0 - 4.3 only\n\t\t// Some styles come back with percentage values, even though they shouldn't\n\t\tdiv.style.marginRight = \"50%\";\n\t\tpixelMarginRightVal = divStyle.marginRight === \"4px\";\n\n\t\tdocumentElement.removeChild( container );\n\n\t\t// Nullify the div so it wouldn't be stored in the memory and\n\t\t// it will also be a sign that checks already performed\n\t\tdiv = null;\n\t}\n\n\tvar pixelPositionVal, boxSizingReliableVal, pixelMarginRightVal, reliableMarginLeftVal,\n\t\tcontainer = document.createElement( \"div\" ),\n\t\tdiv = document.createElement( \"div\" );\n\n\t// Finish early in limited (non-browser) environments\n\tif ( !div.style ) {\n\t\treturn;\n\t}\n\n\t// Support: IE <=9 - 11 only\n\t// Style of cloned element affects source element cloned (#8908)\n\tdiv.style.backgroundClip = \"content-box\";\n\tdiv.cloneNode( true ).style.backgroundClip = \"\";\n\tsupport.clearCloneStyle = div.style.backgroundClip === \"content-box\";\n\n\tcontainer.style.cssText = \"border:0;width:8px;height:0;top:0;left:-9999px;\" +\n\t\t\"padding:0;margin-top:1px;position:absolute\";\n\tcontainer.appendChild( div );\n\n\tjQuery.extend( support, {\n\t\tpixelPosition: function() {\n\t\t\tcomputeStyleTests();\n\t\t\treturn pixelPositionVal;\n\t\t},\n\t\tboxSizingReliable: function() {\n\t\t\tcomputeStyleTests();\n\t\t\treturn boxSizingReliableVal;\n\t\t},\n\t\tpixelMarginRight: function() {\n\t\t\tcomputeStyleTests();\n\t\t\treturn pixelMarginRightVal;\n\t\t},\n\t\treliableMarginLeft: function() {\n\t\t\tcomputeStyleTests();\n\t\t\treturn reliableMarginLeftVal;\n\t\t}\n\t} );\n} )();\n\n\nfunction curCSS( elem, name, computed ) {\n\tvar width, minWidth, maxWidth, ret,\n\t\tstyle = elem.style;\n\n\tcomputed = computed || getStyles( elem );\n\n\t// Support: IE <=9 only\n\t// getPropertyValue is only needed for .css('filter') (#12537)\n\tif ( computed ) {\n\t\tret = computed.getPropertyValue( name ) || computed[ name ];\n\n\t\tif ( ret === \"\" && !jQuery.contains( elem.ownerDocument, elem ) ) {\n\t\t\tret = jQuery.style( elem, name );\n\t\t}\n\n\t\t// A tribute to the \"awesome hack by Dean Edwards\"\n\t\t// Android Browser returns percentage for some values,\n\t\t// but width seems to be reliably pixels.\n\t\t// This is against the CSSOM draft spec:\n\t\t// https://drafts.csswg.org/cssom/#resolved-values\n\t\tif ( !support.pixelMarginRight() && rnumnonpx.test( ret ) && rmargin.test( name ) ) {\n\n\t\t\t// Remember the original values\n\t\t\twidth = style.width;\n\t\t\tminWidth = style.minWidth;\n\t\t\tmaxWidth = style.maxWidth;\n\n\t\t\t// Put in the new values to get a computed value out\n\t\t\tstyle.minWidth = style.maxWidth = style.width = ret;\n\t\t\tret = computed.width;\n\n\t\t\t// Revert the changed values\n\t\t\tstyle.width = width;\n\t\t\tstyle.minWidth = minWidth;\n\t\t\tstyle.maxWidth = maxWidth;\n\t\t}\n\t}\n\n\treturn ret !== undefined ?\n\n\t\t// Support: IE <=9 - 11 only\n\t\t// IE returns zIndex value as an integer.\n\t\tret + \"\" :\n\t\tret;\n}\n\n\nfunction addGetHookIf( conditionFn, hookFn ) {\n\n\t// Define the hook, we'll check on the first run if it's really needed.\n\treturn {\n\t\tget: function() {\n\t\t\tif ( conditionFn() ) {\n\n\t\t\t\t// Hook not needed (or it's not possible to use it due\n\t\t\t\t// to missing dependency), remove it.\n\t\t\t\tdelete this.get;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Hook needed; redefine it so that the support test is not executed again.\n\t\t\treturn ( this.get = hookFn ).apply( this, arguments );\n\t\t}\n\t};\n}\n\n\nvar\n\n\t// Swappable if display is none or starts with table\n\t// except \"table\", \"table-cell\", or \"table-caption\"\n\t// See here for display values: https://developer.mozilla.org/en-US/docs/CSS/display\n\trdisplayswap = /^(none|table(?!-c[ea]).+)/,\n\tcssShow = { position: \"absolute\", visibility: \"hidden\", display: \"block\" },\n\tcssNormalTransform = {\n\t\tletterSpacing: \"0\",\n\t\tfontWeight: \"400\"\n\t},\n\n\tcssPrefixes = [ \"Webkit\", \"Moz\", \"ms\" ],\n\temptyStyle = document.createElement( \"div\" ).style;\n\n// Return a css property mapped to a potentially vendor prefixed property\nfunction vendorPropName( name ) {\n\n\t// Shortcut for names that are not vendor prefixed\n\tif ( name in emptyStyle ) {\n\t\treturn name;\n\t}\n\n\t// Check for vendor prefixed names\n\tvar capName = name[ 0 ].toUpperCase() + name.slice( 1 ),\n\t\ti = cssPrefixes.length;\n\n\twhile ( i-- ) {\n\t\tname = cssPrefixes[ i ] + capName;\n\t\tif ( name in emptyStyle ) {\n\t\t\treturn name;\n\t\t}\n\t}\n}\n\nfunction setPositiveNumber( elem, value, subtract ) {\n\n\t// Any relative (+/-) values have already been\n\t// normalized at this point\n\tvar matches = rcssNum.exec( value );\n\treturn matches ?\n\n\t\t// Guard against undefined \"subtract\", e.g., when used as in cssHooks\n\t\tMath.max( 0, matches[ 2 ] - ( subtract || 0 ) ) + ( matches[ 3 ] || \"px\" ) :\n\t\tvalue;\n}\n\nfunction augmentWidthOrHeight( elem, name, extra, isBorderBox, styles ) {\n\tvar i = extra === ( isBorderBox ? \"border\" : \"content\" ) ?\n\n\t\t// If we already have the right measurement, avoid augmentation\n\t\t4 :\n\n\t\t// Otherwise initialize for horizontal or vertical properties\n\t\tname === \"width\" ? 1 : 0,\n\n\t\tval = 0;\n\n\tfor ( ; i < 4; i += 2 ) {\n\n\t\t// Both box models exclude margin, so add it if we want it\n\t\tif ( extra === \"margin\" ) {\n\t\t\tval += jQuery.css( elem, extra + cssExpand[ i ], true, styles );\n\t\t}\n\n\t\tif ( isBorderBox ) {\n\n\t\t\t// border-box includes padding, so remove it if we want content\n\t\t\tif ( extra === \"content\" ) {\n\t\t\t\tval -= jQuery.css( elem, \"padding\" + cssExpand[ i ], true, styles );\n\t\t\t}\n\n\t\t\t// At this point, extra isn't border nor margin, so remove border\n\t\t\tif ( extra !== \"margin\" ) {\n\t\t\t\tval -= jQuery.css( elem, \"border\" + cssExpand[ i ] + \"Width\", true, styles );\n\t\t\t}\n\t\t} else {\n\n\t\t\t// At this point, extra isn't content, so add padding\n\t\t\tval += jQuery.css( elem, \"padding\" + cssExpand[ i ], true, styles );\n\n\t\t\t// At this point, extra isn't content nor padding, so add border\n\t\t\tif ( extra !== \"padding\" ) {\n\t\t\t\tval += jQuery.css( elem, \"border\" + cssExpand[ i ] + \"Width\", true, styles );\n\t\t\t}\n\t\t}\n\t}\n\n\treturn val;\n}\n\nfunction getWidthOrHeight( elem, name, extra ) {\n\n\t// Start with offset property, which is equivalent to the border-box value\n\tvar val,\n\t\tvalueIsBorderBox = true,\n\t\tstyles = getStyles( elem ),\n\t\tisBorderBox = jQuery.css( elem, \"boxSizing\", false, styles ) === \"border-box\";\n\n\t// Support: IE <=11 only\n\t// Running getBoundingClientRect on a disconnected node\n\t// in IE throws an error.\n\tif ( elem.getClientRects().length ) {\n\t\tval = elem.getBoundingClientRect()[ name ];\n\t}\n\n\t// Some non-html elements return undefined for offsetWidth, so check for null/undefined\n\t// svg - https://bugzilla.mozilla.org/show_bug.cgi?id=649285\n\t// MathML - https://bugzilla.mozilla.org/show_bug.cgi?id=491668\n\tif ( val <= 0 || val == null ) {\n\n\t\t// Fall back to computed then uncomputed css if necessary\n\t\tval = curCSS( elem, name, styles );\n\t\tif ( val < 0 || val == null ) {\n\t\t\tval = elem.style[ name ];\n\t\t}\n\n\t\t// Computed unit is not pixels. Stop here and return.\n\t\tif ( rnumnonpx.test( val ) ) {\n\t\t\treturn val;\n\t\t}\n\n\t\t// Check for style in case a browser which returns unreliable values\n\t\t// for getComputedStyle silently falls back to the reliable elem.style\n\t\tvalueIsBorderBox = isBorderBox &&\n\t\t\t( support.boxSizingReliable() || val === elem.style[ name ] );\n\n\t\t// Normalize \"\", auto, and prepare for extra\n\t\tval = parseFloat( val ) || 0;\n\t}\n\n\t// Use the active box-sizing model to add/subtract irrelevant styles\n\treturn ( val +\n\t\taugmentWidthOrHeight(\n\t\t\telem,\n\t\t\tname,\n\t\t\textra || ( isBorderBox ? \"border\" : \"content\" ),\n\t\t\tvalueIsBorderBox,\n\t\t\tstyles\n\t\t)\n\t) + \"px\";\n}\n\njQuery.extend( {\n\n\t// Add in style property hooks for overriding the default\n\t// behavior of getting and setting a style property\n\tcssHooks: {\n\t\topacity: {\n\t\t\tget: function( elem, computed ) {\n\t\t\t\tif ( computed ) {\n\n\t\t\t\t\t// We should always get a number back from opacity\n\t\t\t\t\tvar ret = curCSS( elem, \"opacity\" );\n\t\t\t\t\treturn ret === \"\" ? \"1\" : ret;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t// Don't automatically add \"px\" to these possibly-unitless properties\n\tcssNumber: {\n\t\t\"animationIterationCount\": true,\n\t\t\"columnCount\": true,\n\t\t\"fillOpacity\": true,\n\t\t\"flexGrow\": true,\n\t\t\"flexShrink\": true,\n\t\t\"fontWeight\": true,\n\t\t\"lineHeight\": true,\n\t\t\"opacity\": true,\n\t\t\"order\": true,\n\t\t\"orphans\": true,\n\t\t\"widows\": true,\n\t\t\"zIndex\": true,\n\t\t\"zoom\": true\n\t},\n\n\t// Add in properties whose names you wish to fix before\n\t// setting or getting the value\n\tcssProps: {\n\t\t\"float\": \"cssFloat\"\n\t},\n\n\t// Get and set the style property on a DOM Node\n\tstyle: function( elem, name, value, extra ) {\n\n\t\t// Don't set styles on text and comment nodes\n\t\tif ( !elem || elem.nodeType === 3 || elem.nodeType === 8 || !elem.style ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Make sure that we're working with the right name\n\t\tvar ret, type, hooks,\n\t\t\torigName = jQuery.camelCase( name ),\n\t\t\tstyle = elem.style;\n\n\t\tname = jQuery.cssProps[ origName ] ||\n\t\t\t( jQuery.cssProps[ origName ] = vendorPropName( origName ) || origName );\n\n\t\t// Gets hook for the prefixed version, then unprefixed version\n\t\thooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];\n\n\t\t// Check if we're setting a value\n\t\tif ( value !== undefined ) {\n\t\t\ttype = typeof value;\n\n\t\t\t// Convert \"+=\" or \"-=\" to relative numbers (#7345)\n\t\t\tif ( type === \"string\" && ( ret = rcssNum.exec( value ) ) && ret[ 1 ] ) {\n\t\t\t\tvalue = adjustCSS( elem, name, ret );\n\n\t\t\t\t// Fixes bug #9237\n\t\t\t\ttype = \"number\";\n\t\t\t}\n\n\t\t\t// Make sure that null and NaN values aren't set (#7116)\n\t\t\tif ( value == null || value !== value ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// If a number was passed in, add the unit (except for certain CSS properties)\n\t\t\tif ( type === \"number\" ) {\n\t\t\t\tvalue += ret && ret[ 3 ] || ( jQuery.cssNumber[ origName ] ? \"\" : \"px\" );\n\t\t\t}\n\n\t\t\t// background-* props affect original clone's values\n\t\t\tif ( !support.clearCloneStyle && value === \"\" && name.indexOf( \"background\" ) === 0 ) {\n\t\t\t\tstyle[ name ] = \"inherit\";\n\t\t\t}\n\n\t\t\t// If a hook was provided, use that value, otherwise just set the specified value\n\t\t\tif ( !hooks || !( \"set\" in hooks ) ||\n\t\t\t\t( value = hooks.set( elem, value, extra ) ) !== undefined ) {\n\n\t\t\t\tstyle[ name ] = value;\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// If a hook was provided get the non-computed value from there\n\t\t\tif ( hooks && \"get\" in hooks &&\n\t\t\t\t( ret = hooks.get( elem, false, extra ) ) !== undefined ) {\n\n\t\t\t\treturn ret;\n\t\t\t}\n\n\t\t\t// Otherwise just get the value from the style object\n\t\t\treturn style[ name ];\n\t\t}\n\t},\n\n\tcss: function( elem, name, extra, styles ) {\n\t\tvar val, num, hooks,\n\t\t\torigName = jQuery.camelCase( name );\n\n\t\t// Make sure that we're working with the right name\n\t\tname = jQuery.cssProps[ origName ] ||\n\t\t\t( jQuery.cssProps[ origName ] = vendorPropName( origName ) || origName );\n\n\t\t// Try prefixed name followed by the unprefixed name\n\t\thooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];\n\n\t\t// If a hook was provided get the computed value from there\n\t\tif ( hooks && \"get\" in hooks ) {\n\t\t\tval = hooks.get( elem, true, extra );\n\t\t}\n\n\t\t// Otherwise, if a way to get the computed value exists, use that\n\t\tif ( val === undefined ) {\n\t\t\tval = curCSS( elem, name, styles );\n\t\t}\n\n\t\t// Convert \"normal\" to computed value\n\t\tif ( val === \"normal\" && name in cssNormalTransform ) {\n\t\t\tval = cssNormalTransform[ name ];\n\t\t}\n\n\t\t// Make numeric if forced or a qualifier was provided and val looks numeric\n\t\tif ( extra === \"\" || extra ) {\n\t\t\tnum = parseFloat( val );\n\t\t\treturn extra === true || isFinite( num ) ? num || 0 : val;\n\t\t}\n\t\treturn val;\n\t}\n} );\n\njQuery.each( [ \"height\", \"width\" ], function( i, name ) {\n\tjQuery.cssHooks[ name ] = {\n\t\tget: function( elem, computed, extra ) {\n\t\t\tif ( computed ) {\n\n\t\t\t\t// Certain elements can have dimension info if we invisibly show them\n\t\t\t\t// but it must have a current display style that would benefit\n\t\t\t\treturn rdisplayswap.test( jQuery.css( elem, \"display\" ) ) &&\n\n\t\t\t\t\t// Support: Safari 8+\n\t\t\t\t\t// Table columns in Safari have non-zero offsetWidth & zero\n\t\t\t\t\t// getBoundingClientRect().width unless display is changed.\n\t\t\t\t\t// Support: IE <=11 only\n\t\t\t\t\t// Running getBoundingClientRect on a disconnected node\n\t\t\t\t\t// in IE throws an error.\n\t\t\t\t\t( !elem.getClientRects().length || !elem.getBoundingClientRect().width ) ?\n\t\t\t\t\t\tswap( elem, cssShow, function() {\n\t\t\t\t\t\t\treturn getWidthOrHeight( elem, name, extra );\n\t\t\t\t\t\t} ) :\n\t\t\t\t\t\tgetWidthOrHeight( elem, name, extra );\n\t\t\t}\n\t\t},\n\n\t\tset: function( elem, value, extra ) {\n\t\t\tvar matches,\n\t\t\t\tstyles = extra && getStyles( elem ),\n\t\t\t\tsubtract = extra && augmentWidthOrHeight(\n\t\t\t\t\telem,\n\t\t\t\t\tname,\n\t\t\t\t\textra,\n\t\t\t\t\tjQuery.css( elem, \"boxSizing\", false, styles ) === \"border-box\",\n\t\t\t\t\tstyles\n\t\t\t\t);\n\n\t\t\t// Convert to pixels if value adjustment is needed\n\t\t\tif ( subtract && ( matches = rcssNum.exec( value ) ) &&\n\t\t\t\t( matches[ 3 ] || \"px\" ) !== \"px\" ) {\n\n\t\t\t\telem.style[ name ] = value;\n\t\t\t\tvalue = jQuery.css( elem, name );\n\t\t\t}\n\n\t\t\treturn setPositiveNumber( elem, value, subtract );\n\t\t}\n\t};\n} );\n\njQuery.cssHooks.marginLeft = addGetHookIf( support.reliableMarginLeft,\n\tfunction( elem, computed ) {\n\t\tif ( computed ) {\n\t\t\treturn ( parseFloat( curCSS( elem, \"marginLeft\" ) ) ||\n\t\t\t\telem.getBoundingClientRect().left -\n\t\t\t\t\tswap( elem, { marginLeft: 0 }, function() {\n\t\t\t\t\t\treturn elem.getBoundingClientRect().left;\n\t\t\t\t\t} )\n\t\t\t\t) + \"px\";\n\t\t}\n\t}\n);\n\n// These hooks are used by animate to expand properties\njQuery.each( {\n\tmargin: \"\",\n\tpadding: \"\",\n\tborder: \"Width\"\n}, function( prefix, suffix ) {\n\tjQuery.cssHooks[ prefix + suffix ] = {\n\t\texpand: function( value ) {\n\t\t\tvar i = 0,\n\t\t\t\texpanded = {},\n\n\t\t\t\t// Assumes a single number if not a string\n\t\t\t\tparts = typeof value === \"string\" ? value.split( \" \" ) : [ value ];\n\n\t\t\tfor ( ; i < 4; i++ ) {\n\t\t\t\texpanded[ prefix + cssExpand[ i ] + suffix ] =\n\t\t\t\t\tparts[ i ] || parts[ i - 2 ] || parts[ 0 ];\n\t\t\t}\n\n\t\t\treturn expanded;\n\t\t}\n\t};\n\n\tif ( !rmargin.test( prefix ) ) {\n\t\tjQuery.cssHooks[ prefix + suffix ].set = setPositiveNumber;\n\t}\n} );\n\njQuery.fn.extend( {\n\tcss: function( name, value ) {\n\t\treturn access( this, function( elem, name, value ) {\n\t\t\tvar styles, len,\n\t\t\t\tmap = {},\n\t\t\t\ti = 0;\n\n\t\t\tif ( jQuery.isArray( name ) ) {\n\t\t\t\tstyles = getStyles( elem );\n\t\t\t\tlen = name.length;\n\n\t\t\t\tfor ( ; i < len; i++ ) {\n\t\t\t\t\tmap[ name[ i ] ] = jQuery.css( elem, name[ i ], false, styles );\n\t\t\t\t}\n\n\t\t\t\treturn map;\n\t\t\t}\n\n\t\t\treturn value !== undefined ?\n\t\t\t\tjQuery.style( elem, name, value ) :\n\t\t\t\tjQuery.css( elem, name );\n\t\t}, name, value, arguments.length > 1 );\n\t}\n} );\n\n\nfunction Tween( elem, options, prop, end, easing ) {\n\treturn new Tween.prototype.init( elem, options, prop, end, easing );\n}\njQuery.Tween = Tween;\n\nTween.prototype = {\n\tconstructor: Tween,\n\tinit: function( elem, options, prop, end, easing, unit ) {\n\t\tthis.elem = elem;\n\t\tthis.prop = prop;\n\t\tthis.easing = easing || jQuery.easing._default;\n\t\tthis.options = options;\n\t\tthis.start = this.now = this.cur();\n\t\tthis.end = end;\n\t\tthis.unit = unit || ( jQuery.cssNumber[ prop ] ? \"\" : \"px\" );\n\t},\n\tcur: function() {\n\t\tvar hooks = Tween.propHooks[ this.prop ];\n\n\t\treturn hooks && hooks.get ?\n\t\t\thooks.get( this ) :\n\t\t\tTween.propHooks._default.get( this );\n\t},\n\trun: function( percent ) {\n\t\tvar eased,\n\t\t\thooks = Tween.propHooks[ this.prop ];\n\n\t\tif ( this.options.duration ) {\n\t\t\tthis.pos = eased = jQuery.easing[ this.easing ](\n\t\t\t\tpercent, this.options.duration * percent, 0, 1, this.options.duration\n\t\t\t);\n\t\t} else {\n\t\t\tthis.pos = eased = percent;\n\t\t}\n\t\tthis.now = ( this.end - this.start ) * eased + this.start;\n\n\t\tif ( this.options.step ) {\n\t\t\tthis.options.step.call( this.elem, this.now, this );\n\t\t}\n\n\t\tif ( hooks && hooks.set ) {\n\t\t\thooks.set( this );\n\t\t} else {\n\t\t\tTween.propHooks._default.set( this );\n\t\t}\n\t\treturn this;\n\t}\n};\n\nTween.prototype.init.prototype = Tween.prototype;\n\nTween.propHooks = {\n\t_default: {\n\t\tget: function( tween ) {\n\t\t\tvar result;\n\n\t\t\t// Use a property on the element directly when it is not a DOM element,\n\t\t\t// or when there is no matching style property that exists.\n\t\t\tif ( tween.elem.nodeType !== 1 ||\n\t\t\t\ttween.elem[ tween.prop ] != null && tween.elem.style[ tween.prop ] == null ) {\n\t\t\t\treturn tween.elem[ tween.prop ];\n\t\t\t}\n\n\t\t\t// Passing an empty string as a 3rd parameter to .css will automatically\n\t\t\t// attempt a parseFloat and fallback to a string if the parse fails.\n\t\t\t// Simple values such as \"10px\" are parsed to Float;\n\t\t\t// complex values such as \"rotate(1rad)\" are returned as-is.\n\t\t\tresult = jQuery.css( tween.elem, tween.prop, \"\" );\n\n\t\t\t// Empty strings, null, undefined and \"auto\" are converted to 0.\n\t\t\treturn !result || result === \"auto\" ? 0 : result;\n\t\t},\n\t\tset: function( tween ) {\n\n\t\t\t// Use step hook for back compat.\n\t\t\t// Use cssHook if its there.\n\t\t\t// Use .style if available and use plain properties where available.\n\t\t\tif ( jQuery.fx.step[ tween.prop ] ) {\n\t\t\t\tjQuery.fx.step[ tween.prop ]( tween );\n\t\t\t} else if ( tween.elem.nodeType === 1 &&\n\t\t\t\t( tween.elem.style[ jQuery.cssProps[ tween.prop ] ] != null ||\n\t\t\t\t\tjQuery.cssHooks[ tween.prop ] ) ) {\n\t\t\t\tjQuery.style( tween.elem, tween.prop, tween.now + tween.unit );\n\t\t\t} else {\n\t\t\t\ttween.elem[ tween.prop ] = tween.now;\n\t\t\t}\n\t\t}\n\t}\n};\n\n// Support: IE <=9 only\n// Panic based approach to setting things on disconnected nodes\nTween.propHooks.scrollTop = Tween.propHooks.scrollLeft = {\n\tset: function( tween ) {\n\t\tif ( tween.elem.nodeType && tween.elem.parentNode ) {\n\t\t\ttween.elem[ tween.prop ] = tween.now;\n\t\t}\n\t}\n};\n\njQuery.easing = {\n\tlinear: function( p ) {\n\t\treturn p;\n\t},\n\tswing: function( p ) {\n\t\treturn 0.5 - Math.cos( p * Math.PI ) / 2;\n\t},\n\t_default: \"swing\"\n};\n\njQuery.fx = Tween.prototype.init;\n\n// Back compat <1.8 extension point\njQuery.fx.step = {};\n\n\n\n\nvar\n\tfxNow, timerId,\n\trfxtypes = /^(?:toggle|show|hide)$/,\n\trrun = /queueHooks$/;\n\nfunction raf() {\n\tif ( timerId ) {\n\t\twindow.requestAnimationFrame( raf );\n\t\tjQuery.fx.tick();\n\t}\n}\n\n// Animations created synchronously will run synchronously\nfunction createFxNow() {\n\twindow.setTimeout( function() {\n\t\tfxNow = undefined;\n\t} );\n\treturn ( fxNow = jQuery.now() );\n}\n\n// Generate parameters to create a standard animation\nfunction genFx( type, includeWidth ) {\n\tvar which,\n\t\ti = 0,\n\t\tattrs = { height: type };\n\n\t// If we include width, step value is 1 to do all cssExpand values,\n\t// otherwise step value is 2 to skip over Left and Right\n\tincludeWidth = includeWidth ? 1 : 0;\n\tfor ( ; i < 4; i += 2 - includeWidth ) {\n\t\twhich = cssExpand[ i ];\n\t\tattrs[ \"margin\" + which ] = attrs[ \"padding\" + which ] = type;\n\t}\n\n\tif ( includeWidth ) {\n\t\tattrs.opacity = attrs.width = type;\n\t}\n\n\treturn attrs;\n}\n\nfunction createTween( value, prop, animation ) {\n\tvar tween,\n\t\tcollection = ( Animation.tweeners[ prop ] || [] ).concat( Animation.tweeners[ \"*\" ] ),\n\t\tindex = 0,\n\t\tlength = collection.length;\n\tfor ( ; index < length; index++ ) {\n\t\tif ( ( tween = collection[ index ].call( animation, prop, value ) ) ) {\n\n\t\t\t// We're done with this property\n\t\t\treturn tween;\n\t\t}\n\t}\n}\n\nfunction defaultPrefilter( elem, props, opts ) {\n\tvar prop, value, toggle, hooks, oldfire, propTween, restoreDisplay, display,\n\t\tisBox = \"width\" in props || \"height\" in props,\n\t\tanim = this,\n\t\torig = {},\n\t\tstyle = elem.style,\n\t\thidden = elem.nodeType && isHiddenWithinTree( elem ),\n\t\tdataShow = dataPriv.get( elem, \"fxshow\" );\n\n\t// Queue-skipping animations hijack the fx hooks\n\tif ( !opts.queue ) {\n\t\thooks = jQuery._queueHooks( elem, \"fx\" );\n\t\tif ( hooks.unqueued == null ) {\n\t\t\thooks.unqueued = 0;\n\t\t\toldfire = hooks.empty.fire;\n\t\t\thooks.empty.fire = function() {\n\t\t\t\tif ( !hooks.unqueued ) {\n\t\t\t\t\toldfire();\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\thooks.unqueued++;\n\n\t\tanim.always( function() {\n\n\t\t\t// Ensure the complete handler is called before this completes\n\t\t\tanim.always( function() {\n\t\t\t\thooks.unqueued--;\n\t\t\t\tif ( !jQuery.queue( elem, \"fx\" ).length ) {\n\t\t\t\t\thooks.empty.fire();\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\t}\n\n\t// Detect show/hide animations\n\tfor ( prop in props ) {\n\t\tvalue = props[ prop ];\n\t\tif ( rfxtypes.test( value ) ) {\n\t\t\tdelete props[ prop ];\n\t\t\ttoggle = toggle || value === \"toggle\";\n\t\t\tif ( value === ( hidden ? \"hide\" : \"show\" ) ) {\n\n\t\t\t\t// Pretend to be hidden if this is a \"show\" and\n\t\t\t\t// there is still data from a stopped show/hide\n\t\t\t\tif ( value === \"show\" && dataShow && dataShow[ prop ] !== undefined ) {\n\t\t\t\t\thidden = true;\n\n\t\t\t\t// Ignore all other no-op show/hide data\n\t\t\t\t} else {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t\torig[ prop ] = dataShow && dataShow[ prop ] || jQuery.style( elem, prop );\n\t\t}\n\t}\n\n\t// Bail out if this is a no-op like .hide().hide()\n\tpropTween = !jQuery.isEmptyObject( props );\n\tif ( !propTween && jQuery.isEmptyObject( orig ) ) {\n\t\treturn;\n\t}\n\n\t// Restrict \"overflow\" and \"display\" styles during box animations\n\tif ( isBox && elem.nodeType === 1 ) {\n\n\t\t// Support: IE <=9 - 11, Edge 12 - 13\n\t\t// Record all 3 overflow attributes because IE does not infer the shorthand\n\t\t// from identically-valued overflowX and overflowY\n\t\topts.overflow = [ style.overflow, style.overflowX, style.overflowY ];\n\n\t\t// Identify a display type, preferring old show/hide data over the CSS cascade\n\t\trestoreDisplay = dataShow && dataShow.display;\n\t\tif ( restoreDisplay == null ) {\n\t\t\trestoreDisplay = dataPriv.get( elem, \"display\" );\n\t\t}\n\t\tdisplay = jQuery.css( elem, \"display\" );\n\t\tif ( display === \"none\" ) {\n\t\t\tif ( restoreDisplay ) {\n\t\t\t\tdisplay = restoreDisplay;\n\t\t\t} else {\n\n\t\t\t\t// Get nonempty value(s) by temporarily forcing visibility\n\t\t\t\tshowHide( [ elem ], true );\n\t\t\t\trestoreDisplay = elem.style.display || restoreDisplay;\n\t\t\t\tdisplay = jQuery.css( elem, \"display\" );\n\t\t\t\tshowHide( [ elem ] );\n\t\t\t}\n\t\t}\n\n\t\t// Animate inline elements as inline-block\n\t\tif ( display === \"inline\" || display === \"inline-block\" && restoreDisplay != null ) {\n\t\t\tif ( jQuery.css( elem, \"float\" ) === \"none\" ) {\n\n\t\t\t\t// Restore the original display value at the end of pure show/hide animations\n\t\t\t\tif ( !propTween ) {\n\t\t\t\t\tanim.done( function() {\n\t\t\t\t\t\tstyle.display = restoreDisplay;\n\t\t\t\t\t} );\n\t\t\t\t\tif ( restoreDisplay == null ) {\n\t\t\t\t\t\tdisplay = style.display;\n\t\t\t\t\t\trestoreDisplay = display === \"none\" ? \"\" : display;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tstyle.display = \"inline-block\";\n\t\t\t}\n\t\t}\n\t}\n\n\tif ( opts.overflow ) {\n\t\tstyle.overflow = \"hidden\";\n\t\tanim.always( function() {\n\t\t\tstyle.overflow = opts.overflow[ 0 ];\n\t\t\tstyle.overflowX = opts.overflow[ 1 ];\n\t\t\tstyle.overflowY = opts.overflow[ 2 ];\n\t\t} );\n\t}\n\n\t// Implement show/hide animations\n\tpropTween = false;\n\tfor ( prop in orig ) {\n\n\t\t// General show/hide setup for this element animation\n\t\tif ( !propTween ) {\n\t\t\tif ( dataShow ) {\n\t\t\t\tif ( \"hidden\" in dataShow ) {\n\t\t\t\t\thidden = dataShow.hidden;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdataShow = dataPriv.access( elem, \"fxshow\", { display: restoreDisplay } );\n\t\t\t}\n\n\t\t\t// Store hidden/visible for toggle so `.stop().toggle()` \"reverses\"\n\t\t\tif ( toggle ) {\n\t\t\t\tdataShow.hidden = !hidden;\n\t\t\t}\n\n\t\t\t// Show elements before animating them\n\t\t\tif ( hidden ) {\n\t\t\t\tshowHide( [ elem ], true );\n\t\t\t}\n\n\t\t\t/* eslint-disable no-loop-func */\n\n\t\t\tanim.done( function() {\n\n\t\t\t/* eslint-enable no-loop-func */\n\n\t\t\t\t// The final step of a \"hide\" animation is actually hiding the element\n\t\t\t\tif ( !hidden ) {\n\t\t\t\t\tshowHide( [ elem ] );\n\t\t\t\t}\n\t\t\t\tdataPriv.remove( elem, \"fxshow\" );\n\t\t\t\tfor ( prop in orig ) {\n\t\t\t\t\tjQuery.style( elem, prop, orig[ prop ] );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\t// Per-property setup\n\t\tpropTween = createTween( hidden ? dataShow[ prop ] : 0, prop, anim );\n\t\tif ( !( prop in dataShow ) ) {\n\t\t\tdataShow[ prop ] = propTween.start;\n\t\t\tif ( hidden ) {\n\t\t\t\tpropTween.end = propTween.start;\n\t\t\t\tpropTween.start = 0;\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction propFilter( props, specialEasing ) {\n\tvar index, name, easing, value, hooks;\n\n\t// camelCase, specialEasing and expand cssHook pass\n\tfor ( index in props ) {\n\t\tname = jQuery.camelCase( index );\n\t\teasing = specialEasing[ name ];\n\t\tvalue = props[ index ];\n\t\tif ( jQuery.isArray( value ) ) {\n\t\t\teasing = value[ 1 ];\n\t\t\tvalue = props[ index ] = value[ 0 ];\n\t\t}\n\n\t\tif ( index !== name ) {\n\t\t\tprops[ name ] = value;\n\t\t\tdelete props[ index ];\n\t\t}\n\n\t\thooks = jQuery.cssHooks[ name ];\n\t\tif ( hooks && \"expand\" in hooks ) {\n\t\t\tvalue = hooks.expand( value );\n\t\t\tdelete props[ name ];\n\n\t\t\t// Not quite $.extend, this won't overwrite existing keys.\n\t\t\t// Reusing 'index' because we have the correct \"name\"\n\t\t\tfor ( index in value ) {\n\t\t\t\tif ( !( index in props ) ) {\n\t\t\t\t\tprops[ index ] = value[ index ];\n\t\t\t\t\tspecialEasing[ index ] = easing;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tspecialEasing[ name ] = easing;\n\t\t}\n\t}\n}\n\nfunction Animation( elem, properties, options ) {\n\tvar result,\n\t\tstopped,\n\t\tindex = 0,\n\t\tlength = Animation.prefilters.length,\n\t\tdeferred = jQuery.Deferred().always( function() {\n\n\t\t\t// Don't match elem in the :animated selector\n\t\t\tdelete tick.elem;\n\t\t} ),\n\t\ttick = function() {\n\t\t\tif ( stopped ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar currentTime = fxNow || createFxNow(),\n\t\t\t\tremaining = Math.max( 0, animation.startTime + animation.duration - currentTime ),\n\n\t\t\t\t// Support: Android 2.3 only\n\t\t\t\t// Archaic crash bug won't allow us to use `1 - ( 0.5 || 0 )` (#12497)\n\t\t\t\ttemp = remaining / animation.duration || 0,\n\t\t\t\tpercent = 1 - temp,\n\t\t\t\tindex = 0,\n\t\t\t\tlength = animation.tweens.length;\n\n\t\t\tfor ( ; index < length; index++ ) {\n\t\t\t\tanimation.tweens[ index ].run( percent );\n\t\t\t}\n\n\t\t\tdeferred.notifyWith( elem, [ animation, percent, remaining ] );\n\n\t\t\tif ( percent < 1 && length ) {\n\t\t\t\treturn remaining;\n\t\t\t} else {\n\t\t\t\tdeferred.resolveWith( elem, [ animation ] );\n\t\t\t\treturn false;\n\t\t\t}\n\t\t},\n\t\tanimation = deferred.promise( {\n\t\t\telem: elem,\n\t\t\tprops: jQuery.extend( {}, properties ),\n\t\t\topts: jQuery.extend( true, {\n\t\t\t\tspecialEasing: {},\n\t\t\t\teasing: jQuery.easing._default\n\t\t\t}, options ),\n\t\t\toriginalProperties: properties,\n\t\t\toriginalOptions: options,\n\t\t\tstartTime: fxNow || createFxNow(),\n\t\t\tduration: options.duration,\n\t\t\ttweens: [],\n\t\t\tcreateTween: function( prop, end ) {\n\t\t\t\tvar tween = jQuery.Tween( elem, animation.opts, prop, end,\n\t\t\t\t\t\tanimation.opts.specialEasing[ prop ] || animation.opts.easing );\n\t\t\t\tanimation.tweens.push( tween );\n\t\t\t\treturn tween;\n\t\t\t},\n\t\t\tstop: function( gotoEnd ) {\n\t\t\t\tvar index = 0,\n\n\t\t\t\t\t// If we are going to the end, we want to run all the tweens\n\t\t\t\t\t// otherwise we skip this part\n\t\t\t\t\tlength = gotoEnd ? animation.tweens.length : 0;\n\t\t\t\tif ( stopped ) {\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t\tstopped = true;\n\t\t\t\tfor ( ; index < length; index++ ) {\n\t\t\t\t\tanimation.tweens[ index ].run( 1 );\n\t\t\t\t}\n\n\t\t\t\t// Resolve when we played the last frame; otherwise, reject\n\t\t\t\tif ( gotoEnd ) {\n\t\t\t\t\tdeferred.notifyWith( elem, [ animation, 1, 0 ] );\n\t\t\t\t\tdeferred.resolveWith( elem, [ animation, gotoEnd ] );\n\t\t\t\t} else {\n\t\t\t\t\tdeferred.rejectWith( elem, [ animation, gotoEnd ] );\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t}\n\t\t} ),\n\t\tprops = animation.props;\n\n\tpropFilter( props, animation.opts.specialEasing );\n\n\tfor ( ; index < length; index++ ) {\n\t\tresult = Animation.prefilters[ index ].call( animation, elem, props, animation.opts );\n\t\tif ( result ) {\n\t\t\tif ( jQuery.isFunction( result.stop ) ) {\n\t\t\t\tjQuery._queueHooks( animation.elem, animation.opts.queue ).stop =\n\t\t\t\t\tjQuery.proxy( result.stop, result );\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t}\n\n\tjQuery.map( props, createTween, animation );\n\n\tif ( jQuery.isFunction( animation.opts.start ) ) {\n\t\tanimation.opts.start.call( elem, animation );\n\t}\n\n\tjQuery.fx.timer(\n\t\tjQuery.extend( tick, {\n\t\t\telem: elem,\n\t\t\tanim: animation,\n\t\t\tqueue: animation.opts.queue\n\t\t} )\n\t);\n\n\t// attach callbacks from options\n\treturn animation.progress( animation.opts.progress )\n\t\t.done( animation.opts.done, animation.opts.complete )\n\t\t.fail( animation.opts.fail )\n\t\t.always( animation.opts.always );\n}\n\njQuery.Animation = jQuery.extend( Animation, {\n\n\ttweeners: {\n\t\t\"*\": [ function( prop, value ) {\n\t\t\tvar tween = this.createTween( prop, value );\n\t\t\tadjustCSS( tween.elem, prop, rcssNum.exec( value ), tween );\n\t\t\treturn tween;\n\t\t} ]\n\t},\n\n\ttweener: function( props, callback ) {\n\t\tif ( jQuery.isFunction( props ) ) {\n\t\t\tcallback = props;\n\t\t\tprops = [ \"*\" ];\n\t\t} else {\n\t\t\tprops = props.match( rnotwhite );\n\t\t}\n\n\t\tvar prop,\n\t\t\tindex = 0,\n\t\t\tlength = props.length;\n\n\t\tfor ( ; index < length; index++ ) {\n\t\t\tprop = props[ index ];\n\t\t\tAnimation.tweeners[ prop ] = Animation.tweeners[ prop ] || [];\n\t\t\tAnimation.tweeners[ prop ].unshift( callback );\n\t\t}\n\t},\n\n\tprefilters: [ defaultPrefilter ],\n\n\tprefilter: function( callback, prepend ) {\n\t\tif ( prepend ) {\n\t\t\tAnimation.prefilters.unshift( callback );\n\t\t} else {\n\t\t\tAnimation.prefilters.push( callback );\n\t\t}\n\t}\n} );\n\njQuery.speed = function( speed, easing, fn ) {\n\tvar opt = speed && typeof speed === \"object\" ? jQuery.extend( {}, speed ) : {\n\t\tcomplete: fn || !fn && easing ||\n\t\t\tjQuery.isFunction( speed ) && speed,\n\t\tduration: speed,\n\t\teasing: fn && easing || easing && !jQuery.isFunction( easing ) && easing\n\t};\n\n\t// Go to the end state if fx are off or if document is hidden\n\tif ( jQuery.fx.off || document.hidden ) {\n\t\topt.duration = 0;\n\n\t} else {\n\t\topt.duration = typeof opt.duration === \"number\" ?\n\t\t\topt.duration : opt.duration in jQuery.fx.speeds ?\n\t\t\t\tjQuery.fx.speeds[ opt.duration ] : jQuery.fx.speeds._default;\n\t}\n\n\t// Normalize opt.queue - true/undefined/null -> \"fx\"\n\tif ( opt.queue == null || opt.queue === true ) {\n\t\topt.queue = \"fx\";\n\t}\n\n\t// Queueing\n\topt.old = opt.complete;\n\n\topt.complete = function() {\n\t\tif ( jQuery.isFunction( opt.old ) ) {\n\t\t\topt.old.call( this );\n\t\t}\n\n\t\tif ( opt.queue ) {\n\t\t\tjQuery.dequeue( this, opt.queue );\n\t\t}\n\t};\n\n\treturn opt;\n};\n\njQuery.fn.extend( {\n\tfadeTo: function( speed, to, easing, callback ) {\n\n\t\t// Show any hidden elements after setting opacity to 0\n\t\treturn this.filter( isHiddenWithinTree ).css( \"opacity\", 0 ).show()\n\n\t\t\t// Animate to the value specified\n\t\t\t.end().animate( { opacity: to }, speed, easing, callback );\n\t},\n\tanimate: function( prop, speed, easing, callback ) {\n\t\tvar empty = jQuery.isEmptyObject( prop ),\n\t\t\toptall = jQuery.speed( speed, easing, callback ),\n\t\t\tdoAnimation = function() {\n\n\t\t\t\t// Operate on a copy of prop so per-property easing won't be lost\n\t\t\t\tvar anim = Animation( this, jQuery.extend( {}, prop ), optall );\n\n\t\t\t\t// Empty animations, or finishing resolves immediately\n\t\t\t\tif ( empty || dataPriv.get( this, \"finish\" ) ) {\n\t\t\t\t\tanim.stop( true );\n\t\t\t\t}\n\t\t\t};\n\t\t\tdoAnimation.finish = doAnimation;\n\n\t\treturn empty || optall.queue === false ?\n\t\t\tthis.each( doAnimation ) :\n\t\t\tthis.queue( optall.queue, doAnimation );\n\t},\n\tstop: function( type, clearQueue, gotoEnd ) {\n\t\tvar stopQueue = function( hooks ) {\n\t\t\tvar stop = hooks.stop;\n\t\t\tdelete hooks.stop;\n\t\t\tstop( gotoEnd );\n\t\t};\n\n\t\tif ( typeof type !== \"string\" ) {\n\t\t\tgotoEnd = clearQueue;\n\t\t\tclearQueue = type;\n\t\t\ttype = undefined;\n\t\t}\n\t\tif ( clearQueue && type !== false ) {\n\t\t\tthis.queue( type || \"fx\", [] );\n\t\t}\n\n\t\treturn this.each( function() {\n\t\t\tvar dequeue = true,\n\t\t\t\tindex = type != null && type + \"queueHooks\",\n\t\t\t\ttimers = jQuery.timers,\n\t\t\t\tdata = dataPriv.get( this );\n\n\t\t\tif ( index ) {\n\t\t\t\tif ( data[ index ] && data[ index ].stop ) {\n\t\t\t\t\tstopQueue( data[ index ] );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor ( index in data ) {\n\t\t\t\t\tif ( data[ index ] && data[ index ].stop && rrun.test( index ) ) {\n\t\t\t\t\t\tstopQueue( data[ index ] );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor ( index = timers.length; index--; ) {\n\t\t\t\tif ( timers[ index ].elem === this &&\n\t\t\t\t\t( type == null || timers[ index ].queue === type ) ) {\n\n\t\t\t\t\ttimers[ index ].anim.stop( gotoEnd );\n\t\t\t\t\tdequeue = false;\n\t\t\t\t\ttimers.splice( index, 1 );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Start the next in the queue if the last step wasn't forced.\n\t\t\t// Timers currently will call their complete callbacks, which\n\t\t\t// will dequeue but only if they were gotoEnd.\n\t\t\tif ( dequeue || !gotoEnd ) {\n\t\t\t\tjQuery.dequeue( this, type );\n\t\t\t}\n\t\t} );\n\t},\n\tfinish: function( type ) {\n\t\tif ( type !== false ) {\n\t\t\ttype = type || \"fx\";\n\t\t}\n\t\treturn this.each( function() {\n\t\t\tvar index,\n\t\t\t\tdata = dataPriv.get( this ),\n\t\t\t\tqueue = data[ type + \"queue\" ],\n\t\t\t\thooks = data[ type + \"queueHooks\" ],\n\t\t\t\ttimers = jQuery.timers,\n\t\t\t\tlength = queue ? queue.length : 0;\n\n\t\t\t// Enable finishing flag on private data\n\t\t\tdata.finish = true;\n\n\t\t\t// Empty the queue first\n\t\t\tjQuery.queue( this, type, [] );\n\n\t\t\tif ( hooks && hooks.stop ) {\n\t\t\t\thooks.stop.call( this, true );\n\t\t\t}\n\n\t\t\t// Look for any active animations, and finish them\n\t\t\tfor ( index = timers.length; index--; ) {\n\t\t\t\tif ( timers[ index ].elem === this && timers[ index ].queue === type ) {\n\t\t\t\t\ttimers[ index ].anim.stop( true );\n\t\t\t\t\ttimers.splice( index, 1 );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Look for any animations in the old queue and finish them\n\t\t\tfor ( index = 0; index < length; index++ ) {\n\t\t\t\tif ( queue[ index ] && queue[ index ].finish ) {\n\t\t\t\t\tqueue[ index ].finish.call( this );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Turn off finishing flag\n\t\t\tdelete data.finish;\n\t\t} );\n\t}\n} );\n\njQuery.each( [ \"toggle\", \"show\", \"hide\" ], function( i, name ) {\n\tvar cssFn = jQuery.fn[ name ];\n\tjQuery.fn[ name ] = function( speed, easing, callback ) {\n\t\treturn speed == null || typeof speed === \"boolean\" ?\n\t\t\tcssFn.apply( this, arguments ) :\n\t\t\tthis.animate( genFx( name, true ), speed, easing, callback );\n\t};\n} );\n\n// Generate shortcuts for custom animations\njQuery.each( {\n\tslideDown: genFx( \"show\" ),\n\tslideUp: genFx( \"hide\" ),\n\tslideToggle: genFx( \"toggle\" ),\n\tfadeIn: { opacity: \"show\" },\n\tfadeOut: { opacity: \"hide\" },\n\tfadeToggle: { opacity: \"toggle\" }\n}, function( name, props ) {\n\tjQuery.fn[ name ] = function( speed, easing, callback ) {\n\t\treturn this.animate( props, speed, easing, callback );\n\t};\n} );\n\njQuery.timers = [];\njQuery.fx.tick = function() {\n\tvar timer,\n\t\ti = 0,\n\t\ttimers = jQuery.timers;\n\n\tfxNow = jQuery.now();\n\n\tfor ( ; i < timers.length; i++ ) {\n\t\ttimer = timers[ i ];\n\n\t\t// Checks the timer has not already been removed\n\t\tif ( !timer() && timers[ i ] === timer ) {\n\t\t\ttimers.splice( i--, 1 );\n\t\t}\n\t}\n\n\tif ( !timers.length ) {\n\t\tjQuery.fx.stop();\n\t}\n\tfxNow = undefined;\n};\n\njQuery.fx.timer = function( timer ) {\n\tjQuery.timers.push( timer );\n\tif ( timer() ) {\n\t\tjQuery.fx.start();\n\t} else {\n\t\tjQuery.timers.pop();\n\t}\n};\n\njQuery.fx.interval = 13;\njQuery.fx.start = function() {\n\tif ( !timerId ) {\n\t\ttimerId = window.requestAnimationFrame ?\n\t\t\twindow.requestAnimationFrame( raf ) :\n\t\t\twindow.setInterval( jQuery.fx.tick, jQuery.fx.interval );\n\t}\n};\n\njQuery.fx.stop = function() {\n\tif ( window.cancelAnimationFrame ) {\n\t\twindow.cancelAnimationFrame( timerId );\n\t} else {\n\t\twindow.clearInterval( timerId );\n\t}\n\n\ttimerId = null;\n};\n\njQuery.fx.speeds = {\n\tslow: 600,\n\tfast: 200,\n\n\t// Default speed\n\t_default: 400\n};\n\n\n// Based off of the plugin by Clint Helfers, with permission.\n// https://web.archive.org/web/20100324014747/http://blindsignals.com/index.php/2009/07/jquery-delay/\njQuery.fn.delay = function( time, type ) {\n\ttime = jQuery.fx ? jQuery.fx.speeds[ time ] || time : time;\n\ttype = type || \"fx\";\n\n\treturn this.queue( type, function( next, hooks ) {\n\t\tvar timeout = window.setTimeout( next, time );\n\t\thooks.stop = function() {\n\t\t\twindow.clearTimeout( timeout );\n\t\t};\n\t} );\n};\n\n\n( function() {\n\tvar input = document.createElement( \"input\" ),\n\t\tselect = document.createElement( \"select\" ),\n\t\topt = select.appendChild( document.createElement( \"option\" ) );\n\n\tinput.type = \"checkbox\";\n\n\t// Support: Android <=4.3 only\n\t// Default value for a checkbox should be \"on\"\n\tsupport.checkOn = input.value !== \"\";\n\n\t// Support: IE <=11 only\n\t// Must access selectedIndex to make default options select\n\tsupport.optSelected = opt.selected;\n\n\t// Support: IE <=11 only\n\t// An input loses its value after becoming a radio\n\tinput = document.createElement( \"input\" );\n\tinput.value = \"t\";\n\tinput.type = \"radio\";\n\tsupport.radioValue = input.value === \"t\";\n} )();\n\n\nvar boolHook,\n\tattrHandle = jQuery.expr.attrHandle;\n\njQuery.fn.extend( {\n\tattr: function( name, value ) {\n\t\treturn access( this, jQuery.attr, name, value, arguments.length > 1 );\n\t},\n\n\tremoveAttr: function( name ) {\n\t\treturn this.each( function() {\n\t\t\tjQuery.removeAttr( this, name );\n\t\t} );\n\t}\n} );\n\njQuery.extend( {\n\tattr: function( elem, name, value ) {\n\t\tvar ret, hooks,\n\t\t\tnType = elem.nodeType;\n\n\t\t// Don't get/set attributes on text, comment and attribute nodes\n\t\tif ( nType === 3 || nType === 8 || nType === 2 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Fallback to prop when attributes are not supported\n\t\tif ( typeof elem.getAttribute === \"undefined\" ) {\n\t\t\treturn jQuery.prop( elem, name, value );\n\t\t}\n\n\t\t// Attribute hooks are determined by the lowercase version\n\t\t// Grab necessary hook if one is defined\n\t\tif ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {\n\t\t\thooks = jQuery.attrHooks[ name.toLowerCase() ] ||\n\t\t\t\t( jQuery.expr.match.bool.test( name ) ? boolHook : undefined );\n\t\t}\n\n\t\tif ( value !== undefined ) {\n\t\t\tif ( value === null ) {\n\t\t\t\tjQuery.removeAttr( elem, name );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( hooks && \"set\" in hooks &&\n\t\t\t\t( ret = hooks.set( elem, value, name ) ) !== undefined ) {\n\t\t\t\treturn ret;\n\t\t\t}\n\n\t\t\telem.setAttribute( name, value + \"\" );\n\t\t\treturn value;\n\t\t}\n\n\t\tif ( hooks && \"get\" in hooks && ( ret = hooks.get( elem, name ) ) !== null ) {\n\t\t\treturn ret;\n\t\t}\n\n\t\tret = jQuery.find.attr( elem, name );\n\n\t\t// Non-existent attributes return null, we normalize to undefined\n\t\treturn ret == null ? undefined : ret;\n\t},\n\n\tattrHooks: {\n\t\ttype: {\n\t\t\tset: function( elem, value ) {\n\t\t\t\tif ( !support.radioValue && value === \"radio\" &&\n\t\t\t\t\tjQuery.nodeName( elem, \"input\" ) ) {\n\t\t\t\t\tvar val = elem.value;\n\t\t\t\t\telem.setAttribute( \"type\", value );\n\t\t\t\t\tif ( val ) {\n\t\t\t\t\t\telem.value = val;\n\t\t\t\t\t}\n\t\t\t\t\treturn value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tremoveAttr: function( elem, value ) {\n\t\tvar name,\n\t\t\ti = 0,\n\t\t\tattrNames = value && value.match( rnotwhite );\n\n\t\tif ( attrNames && elem.nodeType === 1 ) {\n\t\t\twhile ( ( name = attrNames[ i++ ] ) ) {\n\t\t\t\telem.removeAttribute( name );\n\t\t\t}\n\t\t}\n\t}\n} );\n\n// Hooks for boolean attributes\nboolHook = {\n\tset: function( elem, value, name ) {\n\t\tif ( value === false ) {\n\n\t\t\t// Remove boolean attributes when set to false\n\t\t\tjQuery.removeAttr( elem, name );\n\t\t} else {\n\t\t\telem.setAttribute( name, name );\n\t\t}\n\t\treturn name;\n\t}\n};\n\njQuery.each( jQuery.expr.match.bool.source.match( /\\w+/g ), function( i, name ) {\n\tvar getter = attrHandle[ name ] || jQuery.find.attr;\n\n\tattrHandle[ name ] = function( elem, name, isXML ) {\n\t\tvar ret, handle,\n\t\t\tlowercaseName = name.toLowerCase();\n\n\t\tif ( !isXML ) {\n\n\t\t\t// Avoid an infinite loop by temporarily removing this function from the getter\n\t\t\thandle = attrHandle[ lowercaseName ];\n\t\t\tattrHandle[ lowercaseName ] = ret;\n\t\t\tret = getter( elem, name, isXML ) != null ?\n\t\t\t\tlowercaseName :\n\t\t\t\tnull;\n\t\t\tattrHandle[ lowercaseName ] = handle;\n\t\t}\n\t\treturn ret;\n\t};\n} );\n\n\n\n\nvar rfocusable = /^(?:input|select|textarea|button)$/i,\n\trclickable = /^(?:a|area)$/i;\n\njQuery.fn.extend( {\n\tprop: function( name, value ) {\n\t\treturn access( this, jQuery.prop, name, value, arguments.length > 1 );\n\t},\n\n\tremoveProp: function( name ) {\n\t\treturn this.each( function() {\n\t\t\tdelete this[ jQuery.propFix[ name ] || name ];\n\t\t} );\n\t}\n} );\n\njQuery.extend( {\n\tprop: function( elem, name, value ) {\n\t\tvar ret, hooks,\n\t\t\tnType = elem.nodeType;\n\n\t\t// Don't get/set properties on text, comment and attribute nodes\n\t\tif ( nType === 3 || nType === 8 || nType === 2 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {\n\n\t\t\t// Fix name and attach hooks\n\t\t\tname = jQuery.propFix[ name ] || name;\n\t\t\thooks = jQuery.propHooks[ name ];\n\t\t}\n\n\t\tif ( value !== undefined ) {\n\t\t\tif ( hooks && \"set\" in hooks &&\n\t\t\t\t( ret = hooks.set( elem, value, name ) ) !== undefined ) {\n\t\t\t\treturn ret;\n\t\t\t}\n\n\t\t\treturn ( elem[ name ] = value );\n\t\t}\n\n\t\tif ( hooks && \"get\" in hooks && ( ret = hooks.get( elem, name ) ) !== null ) {\n\t\t\treturn ret;\n\t\t}\n\n\t\treturn elem[ name ];\n\t},\n\n\tpropHooks: {\n\t\ttabIndex: {\n\t\t\tget: function( elem ) {\n\n\t\t\t\t// Support: IE <=9 - 11 only\n\t\t\t\t// elem.tabIndex doesn't always return the\n\t\t\t\t// correct value when it hasn't been explicitly set\n\t\t\t\t// https://web.archive.org/web/20141116233347/http://fluidproject.org/blog/2008/01/09/getting-setting-and-removing-tabindex-values-with-javascript/\n\t\t\t\t// Use proper attribute retrieval(#12072)\n\t\t\t\tvar tabindex = jQuery.find.attr( elem, \"tabindex\" );\n\n\t\t\t\treturn tabindex ?\n\t\t\t\t\tparseInt( tabindex, 10 ) :\n\t\t\t\t\trfocusable.test( elem.nodeName ) ||\n\t\t\t\t\t\trclickable.test( elem.nodeName ) && elem.href ?\n\t\t\t\t\t\t\t0 :\n\t\t\t\t\t\t\t-1;\n\t\t\t}\n\t\t}\n\t},\n\n\tpropFix: {\n\t\t\"for\": \"htmlFor\",\n\t\t\"class\": \"className\"\n\t}\n} );\n\n// Support: IE <=11 only\n// Accessing the selectedIndex property\n// forces the browser to respect setting selected\n// on the option\n// The getter ensures a default option is selected\n// when in an optgroup\nif ( !support.optSelected ) {\n\tjQuery.propHooks.selected = {\n\t\tget: function( elem ) {\n\t\t\tvar parent = elem.parentNode;\n\t\t\tif ( parent && parent.parentNode ) {\n\t\t\t\tparent.parentNode.selectedIndex;\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\tset: function( elem ) {\n\t\t\tvar parent = elem.parentNode;\n\t\t\tif ( parent ) {\n\t\t\t\tparent.selectedIndex;\n\n\t\t\t\tif ( parent.parentNode ) {\n\t\t\t\t\tparent.parentNode.selectedIndex;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}\n\njQuery.each( [\n\t\"tabIndex\",\n\t\"readOnly\",\n\t\"maxLength\",\n\t\"cellSpacing\",\n\t\"cellPadding\",\n\t\"rowSpan\",\n\t\"colSpan\",\n\t\"useMap\",\n\t\"frameBorder\",\n\t\"contentEditable\"\n], function() {\n\tjQuery.propFix[ this.toLowerCase() ] = this;\n} );\n\n\n\n\nvar rclass = /[\\t\\r\\n\\f]/g;\n\nfunction getClass( elem ) {\n\treturn elem.getAttribute && elem.getAttribute( \"class\" ) || \"\";\n}\n\njQuery.fn.extend( {\n\taddClass: function( value ) {\n\t\tvar classes, elem, cur, curValue, clazz, j, finalValue,\n\t\t\ti = 0;\n\n\t\tif ( jQuery.isFunction( value ) ) {\n\t\t\treturn this.each( function( j ) {\n\t\t\t\tjQuery( this ).addClass( value.call( this, j, getClass( this ) ) );\n\t\t\t} );\n\t\t}\n\n\t\tif ( typeof value === \"string\" && value ) {\n\t\t\tclasses = value.match( rnotwhite ) || [];\n\n\t\t\twhile ( ( elem = this[ i++ ] ) ) {\n\t\t\t\tcurValue = getClass( elem );\n\t\t\t\tcur = elem.nodeType === 1 &&\n\t\t\t\t\t( \" \" + curValue + \" \" ).replace( rclass, \" \" );\n\n\t\t\t\tif ( cur ) {\n\t\t\t\t\tj = 0;\n\t\t\t\t\twhile ( ( clazz = classes[ j++ ] ) ) {\n\t\t\t\t\t\tif ( cur.indexOf( \" \" + clazz + \" \" ) < 0 ) {\n\t\t\t\t\t\t\tcur += clazz + \" \";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Only assign if different to avoid unneeded rendering.\n\t\t\t\t\tfinalValue = jQuery.trim( cur );\n\t\t\t\t\tif ( curValue !== finalValue ) {\n\t\t\t\t\t\telem.setAttribute( \"class\", finalValue );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tremoveClass: function( value ) {\n\t\tvar classes, elem, cur, curValue, clazz, j, finalValue,\n\t\t\ti = 0;\n\n\t\tif ( jQuery.isFunction( value ) ) {\n\t\t\treturn this.each( function( j ) {\n\t\t\t\tjQuery( this ).removeClass( value.call( this, j, getClass( this ) ) );\n\t\t\t} );\n\t\t}\n\n\t\tif ( !arguments.length ) {\n\t\t\treturn this.attr( \"class\", \"\" );\n\t\t}\n\n\t\tif ( typeof value === \"string\" && value ) {\n\t\t\tclasses = value.match( rnotwhite ) || [];\n\n\t\t\twhile ( ( elem = this[ i++ ] ) ) {\n\t\t\t\tcurValue = getClass( elem );\n\n\t\t\t\t// This expression is here for better compressibility (see addClass)\n\t\t\t\tcur = elem.nodeType === 1 &&\n\t\t\t\t\t( \" \" + curValue + \" \" ).replace( rclass, \" \" );\n\n\t\t\t\tif ( cur ) {\n\t\t\t\t\tj = 0;\n\t\t\t\t\twhile ( ( clazz = classes[ j++ ] ) ) {\n\n\t\t\t\t\t\t// Remove *all* instances\n\t\t\t\t\t\twhile ( cur.indexOf( \" \" + clazz + \" \" ) > -1 ) {\n\t\t\t\t\t\t\tcur = cur.replace( \" \" + clazz + \" \", \" \" );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Only assign if different to avoid unneeded rendering.\n\t\t\t\t\tfinalValue = jQuery.trim( cur );\n\t\t\t\t\tif ( curValue !== finalValue ) {\n\t\t\t\t\t\telem.setAttribute( \"class\", finalValue );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\ttoggleClass: function( value, stateVal ) {\n\t\tvar type = typeof value;\n\n\t\tif ( typeof stateVal === \"boolean\" && type === \"string\" ) {\n\t\t\treturn stateVal ? this.addClass( value ) : this.removeClass( value );\n\t\t}\n\n\t\tif ( jQuery.isFunction( value ) ) {\n\t\t\treturn this.each( function( i ) {\n\t\t\t\tjQuery( this ).toggleClass(\n\t\t\t\t\tvalue.call( this, i, getClass( this ), stateVal ),\n\t\t\t\t\tstateVal\n\t\t\t\t);\n\t\t\t} );\n\t\t}\n\n\t\treturn this.each( function() {\n\t\t\tvar className, i, self, classNames;\n\n\t\t\tif ( type === \"string\" ) {\n\n\t\t\t\t// Toggle individual class names\n\t\t\t\ti = 0;\n\t\t\t\tself = jQuery( this );\n\t\t\t\tclassNames = value.match( rnotwhite ) || [];\n\n\t\t\t\twhile ( ( className = classNames[ i++ ] ) ) {\n\n\t\t\t\t\t// Check each className given, space separated list\n\t\t\t\t\tif ( self.hasClass( className ) ) {\n\t\t\t\t\t\tself.removeClass( className );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.addClass( className );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t// Toggle whole class name\n\t\t\t} else if ( value === undefined || type === \"boolean\" ) {\n\t\t\t\tclassName = getClass( this );\n\t\t\t\tif ( className ) {\n\n\t\t\t\t\t// Store className if set\n\t\t\t\t\tdataPriv.set( this, \"__className__\", className );\n\t\t\t\t}\n\n\t\t\t\t// If the element has a class name or if we're passed `false`,\n\t\t\t\t// then remove the whole classname (if there was one, the above saved it).\n\t\t\t\t// Otherwise bring back whatever was previously saved (if anything),\n\t\t\t\t// falling back to the empty string if nothing was stored.\n\t\t\t\tif ( this.setAttribute ) {\n\t\t\t\t\tthis.setAttribute( \"class\",\n\t\t\t\t\t\tclassName || value === false ?\n\t\t\t\t\t\t\"\" :\n\t\t\t\t\t\tdataPriv.get( this, \"__className__\" ) || \"\"\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t},\n\n\thasClass: function( selector ) {\n\t\tvar className, elem,\n\t\t\ti = 0;\n\n\t\tclassName = \" \" + selector + \" \";\n\t\twhile ( ( elem = this[ i++ ] ) ) {\n\t\t\tif ( elem.nodeType === 1 &&\n\t\t\t\t( \" \" + getClass( elem ) + \" \" ).replace( rclass, \" \" )\n\t\t\t\t\t.indexOf( className ) > -1\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n} );\n\n\n\n\nvar rreturn = /\\r/g,\n\trspaces = /[\\x20\\t\\r\\n\\f]+/g;\n\njQuery.fn.extend( {\n\tval: function( value ) {\n\t\tvar hooks, ret, isFunction,\n\t\t\telem = this[ 0 ];\n\n\t\tif ( !arguments.length ) {\n\t\t\tif ( elem ) {\n\t\t\t\thooks = jQuery.valHooks[ elem.type ] ||\n\t\t\t\t\tjQuery.valHooks[ elem.nodeName.toLowerCase() ];\n\n\t\t\t\tif ( hooks &&\n\t\t\t\t\t\"get\" in hooks &&\n\t\t\t\t\t( ret = hooks.get( elem, \"value\" ) ) !== undefined\n\t\t\t\t) {\n\t\t\t\t\treturn ret;\n\t\t\t\t}\n\n\t\t\t\tret = elem.value;\n\n\t\t\t\treturn typeof ret === \"string\" ?\n\n\t\t\t\t\t// Handle most common string cases\n\t\t\t\t\tret.replace( rreturn, \"\" ) :\n\n\t\t\t\t\t// Handle cases where value is null/undef or number\n\t\t\t\t\tret == null ? \"\" : ret;\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tisFunction = jQuery.isFunction( value );\n\n\t\treturn this.each( function( i ) {\n\t\t\tvar val;\n\n\t\t\tif ( this.nodeType !== 1 ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( isFunction ) {\n\t\t\t\tval = value.call( this, i, jQuery( this ).val() );\n\t\t\t} else {\n\t\t\t\tval = value;\n\t\t\t}\n\n\t\t\t// Treat null/undefined as \"\"; convert numbers to string\n\t\t\tif ( val == null ) {\n\t\t\t\tval = \"\";\n\n\t\t\t} else if ( typeof val === \"number\" ) {\n\t\t\t\tval += \"\";\n\n\t\t\t} else if ( jQuery.isArray( val ) ) {\n\t\t\t\tval = jQuery.map( val, function( value ) {\n\t\t\t\t\treturn value == null ? \"\" : value + \"\";\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\thooks = jQuery.valHooks[ this.type ] || jQuery.valHooks[ this.nodeName.toLowerCase() ];\n\n\t\t\t// If set returns undefined, fall back to normal setting\n\t\t\tif ( !hooks || !( \"set\" in hooks ) || hooks.set( this, val, \"value\" ) === undefined ) {\n\t\t\t\tthis.value = val;\n\t\t\t}\n\t\t} );\n\t}\n} );\n\njQuery.extend( {\n\tvalHooks: {\n\t\toption: {\n\t\t\tget: function( elem ) {\n\n\t\t\t\tvar val = jQuery.find.attr( elem, \"value\" );\n\t\t\t\treturn val != null ?\n\t\t\t\t\tval :\n\n\t\t\t\t\t// Support: IE <=10 - 11 only\n\t\t\t\t\t// option.text throws exceptions (#14686, #14858)\n\t\t\t\t\t// Strip and collapse whitespace\n\t\t\t\t\t// https://html.spec.whatwg.org/#strip-and-collapse-whitespace\n\t\t\t\t\tjQuery.trim( jQuery.text( elem ) ).replace( rspaces, \" \" );\n\t\t\t}\n\t\t},\n\t\tselect: {\n\t\t\tget: function( elem ) {\n\t\t\t\tvar value, option,\n\t\t\t\t\toptions = elem.options,\n\t\t\t\t\tindex = elem.selectedIndex,\n\t\t\t\t\tone = elem.type === \"select-one\",\n\t\t\t\t\tvalues = one ? null : [],\n\t\t\t\t\tmax = one ? index + 1 : options.length,\n\t\t\t\t\ti = index < 0 ?\n\t\t\t\t\t\tmax :\n\t\t\t\t\t\tone ? index : 0;\n\n\t\t\t\t// Loop through all the selected options\n\t\t\t\tfor ( ; i < max; i++ ) {\n\t\t\t\t\toption = options[ i ];\n\n\t\t\t\t\t// Support: IE <=9 only\n\t\t\t\t\t// IE8-9 doesn't update selected after form reset (#2551)\n\t\t\t\t\tif ( ( option.selected || i === index ) &&\n\n\t\t\t\t\t\t\t// Don't return options that are disabled or in a disabled optgroup\n\t\t\t\t\t\t\t!option.disabled &&\n\t\t\t\t\t\t\t( !option.parentNode.disabled ||\n\t\t\t\t\t\t\t\t!jQuery.nodeName( option.parentNode, \"optgroup\" ) ) ) {\n\n\t\t\t\t\t\t// Get the specific value for the option\n\t\t\t\t\t\tvalue = jQuery( option ).val();\n\n\t\t\t\t\t\t// We don't need an array for one selects\n\t\t\t\t\t\tif ( one ) {\n\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Multi-Selects return an array\n\t\t\t\t\t\tvalues.push( value );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn values;\n\t\t\t},\n\n\t\t\tset: function( elem, value ) {\n\t\t\t\tvar optionSet, option,\n\t\t\t\t\toptions = elem.options,\n\t\t\t\t\tvalues = jQuery.makeArray( value ),\n\t\t\t\t\ti = options.length;\n\n\t\t\t\twhile ( i-- ) {\n\t\t\t\t\toption = options[ i ];\n\n\t\t\t\t\t/* eslint-disable no-cond-assign */\n\n\t\t\t\t\tif ( option.selected =\n\t\t\t\t\t\tjQuery.inArray( jQuery.valHooks.option.get( option ), values ) > -1\n\t\t\t\t\t) {\n\t\t\t\t\t\toptionSet = true;\n\t\t\t\t\t}\n\n\t\t\t\t\t/* eslint-enable no-cond-assign */\n\t\t\t\t}\n\n\t\t\t\t// Force browsers to behave consistently when non-matching value is set\n\t\t\t\tif ( !optionSet ) {\n\t\t\t\t\telem.selectedIndex = -1;\n\t\t\t\t}\n\t\t\t\treturn values;\n\t\t\t}\n\t\t}\n\t}\n} );\n\n// Radios and checkboxes getter/setter\njQuery.each( [ \"radio\", \"checkbox\" ], function() {\n\tjQuery.valHooks[ this ] = {\n\t\tset: function( elem, value ) {\n\t\t\tif ( jQuery.isArray( value ) ) {\n\t\t\t\treturn ( elem.checked = jQuery.inArray( jQuery( elem ).val(), value ) > -1 );\n\t\t\t}\n\t\t}\n\t};\n\tif ( !support.checkOn ) {\n\t\tjQuery.valHooks[ this ].get = function( elem ) {\n\t\t\treturn elem.getAttribute( \"value\" ) === null ? \"on\" : elem.value;\n\t\t};\n\t}\n} );\n\n\n\n\n// Return jQuery for attributes-only inclusion\n\n\nvar rfocusMorph = /^(?:focusinfocus|focusoutblur)$/;\n\njQuery.extend( jQuery.event, {\n\n\ttrigger: function( event, data, elem, onlyHandlers ) {\n\n\t\tvar i, cur, tmp, bubbleType, ontype, handle, special,\n\t\t\teventPath = [ elem || document ],\n\t\t\ttype = hasOwn.call( event, \"type\" ) ? event.type : event,\n\t\t\tnamespaces = hasOwn.call( event, \"namespace\" ) ? event.namespace.split( \".\" ) : [];\n\n\t\tcur = tmp = elem = elem || document;\n\n\t\t// Don't do events on text and comment nodes\n\t\tif ( elem.nodeType === 3 || elem.nodeType === 8 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// focus/blur morphs to focusin/out; ensure we're not firing them right now\n\t\tif ( rfocusMorph.test( type + jQuery.event.triggered ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( type.indexOf( \".\" ) > -1 ) {\n\n\t\t\t// Namespaced trigger; create a regexp to match event type in handle()\n\t\t\tnamespaces = type.split( \".\" );\n\t\t\ttype = namespaces.shift();\n\t\t\tnamespaces.sort();\n\t\t}\n\t\tontype = type.indexOf( \":\" ) < 0 && \"on\" + type;\n\n\t\t// Caller can pass in a jQuery.Event object, Object, or just an event type string\n\t\tevent = event[ jQuery.expando ] ?\n\t\t\tevent :\n\t\t\tnew jQuery.Event( type, typeof event === \"object\" && event );\n\n\t\t// Trigger bitmask: & 1 for native handlers; & 2 for jQuery (always true)\n\t\tevent.isTrigger = onlyHandlers ? 2 : 3;\n\t\tevent.namespace = namespaces.join( \".\" );\n\t\tevent.rnamespace = event.namespace ?\n\t\t\tnew RegExp( \"(^|\\\\.)\" + namespaces.join( \"\\\\.(?:.*\\\\.|)\" ) + \"(\\\\.|$)\" ) :\n\t\t\tnull;\n\n\t\t// Clean up the event in case it is being reused\n\t\tevent.result = undefined;\n\t\tif ( !event.target ) {\n\t\t\tevent.target = elem;\n\t\t}\n\n\t\t// Clone any incoming data and prepend the event, creating the handler arg list\n\t\tdata = data == null ?\n\t\t\t[ event ] :\n\t\t\tjQuery.makeArray( data, [ event ] );\n\n\t\t// Allow special events to draw outside the lines\n\t\tspecial = jQuery.event.special[ type ] || {};\n\t\tif ( !onlyHandlers && special.trigger && special.trigger.apply( elem, data ) === false ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Determine event propagation path in advance, per W3C events spec (#9951)\n\t\t// Bubble up to document, then to window; watch for a global ownerDocument var (#9724)\n\t\tif ( !onlyHandlers && !special.noBubble && !jQuery.isWindow( elem ) ) {\n\n\t\t\tbubbleType = special.delegateType || type;\n\t\t\tif ( !rfocusMorph.test( bubbleType + type ) ) {\n\t\t\t\tcur = cur.parentNode;\n\t\t\t}\n\t\t\tfor ( ; cur; cur = cur.parentNode ) {\n\t\t\t\teventPath.push( cur );\n\t\t\t\ttmp = cur;\n\t\t\t}\n\n\t\t\t// Only add window if we got to document (e.g., not plain obj or detached DOM)\n\t\t\tif ( tmp === ( elem.ownerDocument || document ) ) {\n\t\t\t\teventPath.push( tmp.defaultView || tmp.parentWindow || window );\n\t\t\t}\n\t\t}\n\n\t\t// Fire handlers on the event path\n\t\ti = 0;\n\t\twhile ( ( cur = eventPath[ i++ ] ) && !event.isPropagationStopped() ) {\n\n\t\t\tevent.type = i > 1 ?\n\t\t\t\tbubbleType :\n\t\t\t\tspecial.bindType || type;\n\n\t\t\t// jQuery handler\n\t\t\thandle = ( dataPriv.get( cur, \"events\" ) || {} )[ event.type ] &&\n\t\t\t\tdataPriv.get( cur, \"handle\" );\n\t\t\tif ( handle ) {\n\t\t\t\thandle.apply( cur, data );\n\t\t\t}\n\n\t\t\t// Native handler\n\t\t\thandle = ontype && cur[ ontype ];\n\t\t\tif ( handle && handle.apply && acceptData( cur ) ) {\n\t\t\t\tevent.result = handle.apply( cur, data );\n\t\t\t\tif ( event.result === false ) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tevent.type = type;\n\n\t\t// If nobody prevented the default action, do it now\n\t\tif ( !onlyHandlers && !event.isDefaultPrevented() ) {\n\n\t\t\tif ( ( !special._default ||\n\t\t\t\tspecial._default.apply( eventPath.pop(), data ) === false ) &&\n\t\t\t\tacceptData( elem ) ) {\n\n\t\t\t\t// Call a native DOM method on the target with the same name as the event.\n\t\t\t\t// Don't do default actions on window, that's where global variables be (#6170)\n\t\t\t\tif ( ontype && jQuery.isFunction( elem[ type ] ) && !jQuery.isWindow( elem ) ) {\n\n\t\t\t\t\t// Don't re-trigger an onFOO event when we call its FOO() method\n\t\t\t\t\ttmp = elem[ ontype ];\n\n\t\t\t\t\tif ( tmp ) {\n\t\t\t\t\t\telem[ ontype ] = null;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Prevent re-triggering of the same event, since we already bubbled it above\n\t\t\t\t\tjQuery.event.triggered = type;\n\t\t\t\t\telem[ type ]();\n\t\t\t\t\tjQuery.event.triggered = undefined;\n\n\t\t\t\t\tif ( tmp ) {\n\t\t\t\t\t\telem[ ontype ] = tmp;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn event.result;\n\t},\n\n\t// Piggyback on a donor event to simulate a different one\n\t// Used only for `focus(in | out)` events\n\tsimulate: function( type, elem, event ) {\n\t\tvar e = jQuery.extend(\n\t\t\tnew jQuery.Event(),\n\t\t\tevent,\n\t\t\t{\n\t\t\t\ttype: type,\n\t\t\t\tisSimulated: true\n\t\t\t}\n\t\t);\n\n\t\tjQuery.event.trigger( e, null, elem );\n\t}\n\n} );\n\njQuery.fn.extend( {\n\n\ttrigger: function( type, data ) {\n\t\treturn this.each( function() {\n\t\t\tjQuery.event.trigger( type, data, this );\n\t\t} );\n\t},\n\ttriggerHandler: function( type, data ) {\n\t\tvar elem = this[ 0 ];\n\t\tif ( elem ) {\n\t\t\treturn jQuery.event.trigger( type, data, elem, true );\n\t\t}\n\t}\n} );\n\n\njQuery.each( ( \"blur focus focusin focusout resize scroll click dblclick \" +\n\t\"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave \" +\n\t\"change select submit keydown keypress keyup contextmenu\" ).split( \" \" ),\n\tfunction( i, name ) {\n\n\t// Handle event binding\n\tjQuery.fn[ name ] = function( data, fn ) {\n\t\treturn arguments.length > 0 ?\n\t\t\tthis.on( name, null, data, fn ) :\n\t\t\tthis.trigger( name );\n\t};\n} );\n\njQuery.fn.extend( {\n\thover: function( fnOver, fnOut ) {\n\t\treturn this.mouseenter( fnOver ).mouseleave( fnOut || fnOver );\n\t}\n} );\n\n\n\n\nsupport.focusin = \"onfocusin\" in window;\n\n\n// Support: Firefox <=44\n// Firefox doesn't have focus(in | out) events\n// Related ticket - https://bugzilla.mozilla.org/show_bug.cgi?id=687787\n//\n// Support: Chrome <=48 - 49, Safari <=9.0 - 9.1\n// focus(in | out) events fire after focus & blur events,\n// which is spec violation - http://www.w3.org/TR/DOM-Level-3-Events/#events-focusevent-event-order\n// Related ticket - https://bugs.chromium.org/p/chromium/issues/detail?id=449857\nif ( !support.focusin ) {\n\tjQuery.each( { focus: \"focusin\", blur: \"focusout\" }, function( orig, fix ) {\n\n\t\t// Attach a single capturing handler on the document while someone wants focusin/focusout\n\t\tvar handler = function( event ) {\n\t\t\tjQuery.event.simulate( fix, event.target, jQuery.event.fix( event ) );\n\t\t};\n\n\t\tjQuery.event.special[ fix ] = {\n\t\t\tsetup: function() {\n\t\t\t\tvar doc = this.ownerDocument || this,\n\t\t\t\t\tattaches = dataPriv.access( doc, fix );\n\n\t\t\t\tif ( !attaches ) {\n\t\t\t\t\tdoc.addEventListener( orig, handler, true );\n\t\t\t\t}\n\t\t\t\tdataPriv.access( doc, fix, ( attaches || 0 ) + 1 );\n\t\t\t},\n\t\t\tteardown: function() {\n\t\t\t\tvar doc = this.ownerDocument || this,\n\t\t\t\t\tattaches = dataPriv.access( doc, fix ) - 1;\n\n\t\t\t\tif ( !attaches ) {\n\t\t\t\t\tdoc.removeEventListener( orig, handler, true );\n\t\t\t\t\tdataPriv.remove( doc, fix );\n\n\t\t\t\t} else {\n\t\t\t\t\tdataPriv.access( doc, fix, attaches );\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t} );\n}\nvar location = window.location;\n\nvar nonce = jQuery.now();\n\nvar rquery = ( /\\?/ );\n\n\n\n// Cross-browser xml parsing\njQuery.parseXML = function( data ) {\n\tvar xml;\n\tif ( !data || typeof data !== \"string\" ) {\n\t\treturn null;\n\t}\n\n\t// Support: IE 9 - 11 only\n\t// IE throws on parseFromString with invalid input.\n\ttry {\n\t\txml = ( new window.DOMParser() ).parseFromString( data, \"text/xml\" );\n\t} catch ( e ) {\n\t\txml = undefined;\n\t}\n\n\tif ( !xml || xml.getElementsByTagName( \"parsererror\" ).length ) {\n\t\tjQuery.error( \"Invalid XML: \" + data );\n\t}\n\treturn xml;\n};\n\n\nvar\n\trbracket = /\\[\\]$/,\n\trCRLF = /\\r?\\n/g,\n\trsubmitterTypes = /^(?:submit|button|image|reset|file)$/i,\n\trsubmittable = /^(?:input|select|textarea|keygen)/i;\n\nfunction buildParams( prefix, obj, traditional, add ) {\n\tvar name;\n\n\tif ( jQuery.isArray( obj ) ) {\n\n\t\t// Serialize array item.\n\t\tjQuery.each( obj, function( i, v ) {\n\t\t\tif ( traditional || rbracket.test( prefix ) ) {\n\n\t\t\t\t// Treat each array item as a scalar.\n\t\t\t\tadd( prefix, v );\n\n\t\t\t} else {\n\n\t\t\t\t// Item is non-scalar (array or object), encode its numeric index.\n\t\t\t\tbuildParams(\n\t\t\t\t\tprefix + \"[\" + ( typeof v === \"object\" && v != null ? i : \"\" ) + \"]\",\n\t\t\t\t\tv,\n\t\t\t\t\ttraditional,\n\t\t\t\t\tadd\n\t\t\t\t);\n\t\t\t}\n\t\t} );\n\n\t} else if ( !traditional && jQuery.type( obj ) === \"object\" ) {\n\n\t\t// Serialize object item.\n\t\tfor ( name in obj ) {\n\t\t\tbuildParams( prefix + \"[\" + name + \"]\", obj[ name ], traditional, add );\n\t\t}\n\n\t} else {\n\n\t\t// Serialize scalar item.\n\t\tadd( prefix, obj );\n\t}\n}\n\n// Serialize an array of form elements or a set of\n// key/values into a query string\njQuery.param = function( a, traditional ) {\n\tvar prefix,\n\t\ts = [],\n\t\tadd = function( key, valueOrFunction ) {\n\n\t\t\t// If value is a function, invoke it and use its return value\n\t\t\tvar value = jQuery.isFunction( valueOrFunction ) ?\n\t\t\t\tvalueOrFunction() :\n\t\t\t\tvalueOrFunction;\n\n\t\t\ts[ s.length ] = encodeURIComponent( key ) + \"=\" +\n\t\t\t\tencodeURIComponent( value == null ? \"\" : value );\n\t\t};\n\n\t// If an array was passed in, assume that it is an array of form elements.\n\tif ( jQuery.isArray( a ) || ( a.jquery && !jQuery.isPlainObject( a ) ) ) {\n\n\t\t// Serialize the form elements\n\t\tjQuery.each( a, function() {\n\t\t\tadd( this.name, this.value );\n\t\t} );\n\n\t} else {\n\n\t\t// If traditional, encode the \"old\" way (the way 1.3.2 or older\n\t\t// did it), otherwise encode params recursively.\n\t\tfor ( prefix in a ) {\n\t\t\tbuildParams( prefix, a[ prefix ], traditional, add );\n\t\t}\n\t}\n\n\t// Return the resulting serialization\n\treturn s.join( \"&\" );\n};\n\njQuery.fn.extend( {\n\tserialize: function() {\n\t\treturn jQuery.param( this.serializeArray() );\n\t},\n\tserializeArray: function() {\n\t\treturn this.map( function() {\n\n\t\t\t// Can add propHook for \"elements\" to filter or add form elements\n\t\t\tvar elements = jQuery.prop( this, \"elements\" );\n\t\t\treturn elements ? jQuery.makeArray( elements ) : this;\n\t\t} )\n\t\t.filter( function() {\n\t\t\tvar type = this.type;\n\n\t\t\t// Use .is( \":disabled\" ) so that fieldset[disabled] works\n\t\t\treturn this.name && !jQuery( this ).is( \":disabled\" ) &&\n\t\t\t\trsubmittable.test( this.nodeName ) && !rsubmitterTypes.test( type ) &&\n\t\t\t\t( this.checked || !rcheckableType.test( type ) );\n\t\t} )\n\t\t.map( function( i, elem ) {\n\t\t\tvar val = jQuery( this ).val();\n\n\t\t\treturn val == null ?\n\t\t\t\tnull :\n\t\t\t\tjQuery.isArray( val ) ?\n\t\t\t\t\tjQuery.map( val, function( val ) {\n\t\t\t\t\t\treturn { name: elem.name, value: val.replace( rCRLF, \"\\r\\n\" ) };\n\t\t\t\t\t} ) :\n\t\t\t\t\t{ name: elem.name, value: val.replace( rCRLF, \"\\r\\n\" ) };\n\t\t} ).get();\n\t}\n} );\n\n\nvar\n\tr20 = /%20/g,\n\trhash = /#.*$/,\n\trts = /([?&])_=[^&]*/,\n\trheaders = /^(.*?):[ \\t]*([^\\r\\n]*)$/mg,\n\n\t// #7653, #8125, #8152: local protocol detection\n\trlocalProtocol = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,\n\trnoContent = /^(?:GET|HEAD)$/,\n\trprotocol = /^\\/\\//,\n\n\t/* Prefilters\n\t * 1) They are useful to introduce custom dataTypes (see ajax/jsonp.js for an example)\n\t * 2) These are called:\n\t *    - BEFORE asking for a transport\n\t *    - AFTER param serialization (s.data is a string if s.processData is true)\n\t * 3) key is the dataType\n\t * 4) the catchall symbol \"*\" can be used\n\t * 5) execution will start with transport dataType and THEN continue down to \"*\" if needed\n\t */\n\tprefilters = {},\n\n\t/* Transports bindings\n\t * 1) key is the dataType\n\t * 2) the catchall symbol \"*\" can be used\n\t * 3) selection will start with transport dataType and THEN go to \"*\" if needed\n\t */\n\ttransports = {},\n\n\t// Avoid comment-prolog char sequence (#10098); must appease lint and evade compression\n\tallTypes = \"*/\".concat( \"*\" ),\n\n\t// Anchor tag for parsing the document origin\n\toriginAnchor = document.createElement( \"a\" );\n\toriginAnchor.href = location.href;\n\n// Base \"constructor\" for jQuery.ajaxPrefilter and jQuery.ajaxTransport\nfunction addToPrefiltersOrTransports( structure ) {\n\n\t// dataTypeExpression is optional and defaults to \"*\"\n\treturn function( dataTypeExpression, func ) {\n\n\t\tif ( typeof dataTypeExpression !== \"string\" ) {\n\t\t\tfunc = dataTypeExpression;\n\t\t\tdataTypeExpression = \"*\";\n\t\t}\n\n\t\tvar dataType,\n\t\t\ti = 0,\n\t\t\tdataTypes = dataTypeExpression.toLowerCase().match( rnotwhite ) || [];\n\n\t\tif ( jQuery.isFunction( func ) ) {\n\n\t\t\t// For each dataType in the dataTypeExpression\n\t\t\twhile ( ( dataType = dataTypes[ i++ ] ) ) {\n\n\t\t\t\t// Prepend if requested\n\t\t\t\tif ( dataType[ 0 ] === \"+\" ) {\n\t\t\t\t\tdataType = dataType.slice( 1 ) || \"*\";\n\t\t\t\t\t( structure[ dataType ] = structure[ dataType ] || [] ).unshift( func );\n\n\t\t\t\t// Otherwise append\n\t\t\t\t} else {\n\t\t\t\t\t( structure[ dataType ] = structure[ dataType ] || [] ).push( func );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}\n\n// Base inspection function for prefilters and transports\nfunction inspectPrefiltersOrTransports( structure, options, originalOptions, jqXHR ) {\n\n\tvar inspected = {},\n\t\tseekingTransport = ( structure === transports );\n\n\tfunction inspect( dataType ) {\n\t\tvar selected;\n\t\tinspected[ dataType ] = true;\n\t\tjQuery.each( structure[ dataType ] || [], function( _, prefilterOrFactory ) {\n\t\t\tvar dataTypeOrTransport = prefilterOrFactory( options, originalOptions, jqXHR );\n\t\t\tif ( typeof dataTypeOrTransport === \"string\" &&\n\t\t\t\t!seekingTransport && !inspected[ dataTypeOrTransport ] ) {\n\n\t\t\t\toptions.dataTypes.unshift( dataTypeOrTransport );\n\t\t\t\tinspect( dataTypeOrTransport );\n\t\t\t\treturn false;\n\t\t\t} else if ( seekingTransport ) {\n\t\t\t\treturn !( selected = dataTypeOrTransport );\n\t\t\t}\n\t\t} );\n\t\treturn selected;\n\t}\n\n\treturn inspect( options.dataTypes[ 0 ] ) || !inspected[ \"*\" ] && inspect( \"*\" );\n}\n\n// A special extend for ajax options\n// that takes \"flat\" options (not to be deep extended)\n// Fixes #9887\nfunction ajaxExtend( target, src ) {\n\tvar key, deep,\n\t\tflatOptions = jQuery.ajaxSettings.flatOptions || {};\n\n\tfor ( key in src ) {\n\t\tif ( src[ key ] !== undefined ) {\n\t\t\t( flatOptions[ key ] ? target : ( deep || ( deep = {} ) ) )[ key ] = src[ key ];\n\t\t}\n\t}\n\tif ( deep ) {\n\t\tjQuery.extend( true, target, deep );\n\t}\n\n\treturn target;\n}\n\n/* Handles responses to an ajax request:\n * - finds the right dataType (mediates between content-type and expected dataType)\n * - returns the corresponding response\n */\nfunction ajaxHandleResponses( s, jqXHR, responses ) {\n\n\tvar ct, type, finalDataType, firstDataType,\n\t\tcontents = s.contents,\n\t\tdataTypes = s.dataTypes;\n\n\t// Remove auto dataType and get content-type in the process\n\twhile ( dataTypes[ 0 ] === \"*\" ) {\n\t\tdataTypes.shift();\n\t\tif ( ct === undefined ) {\n\t\t\tct = s.mimeType || jqXHR.getResponseHeader( \"Content-Type\" );\n\t\t}\n\t}\n\n\t// Check if we're dealing with a known content-type\n\tif ( ct ) {\n\t\tfor ( type in contents ) {\n\t\t\tif ( contents[ type ] && contents[ type ].test( ct ) ) {\n\t\t\t\tdataTypes.unshift( type );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Check to see if we have a response for the expected dataType\n\tif ( dataTypes[ 0 ] in responses ) {\n\t\tfinalDataType = dataTypes[ 0 ];\n\t} else {\n\n\t\t// Try convertible dataTypes\n\t\tfor ( type in responses ) {\n\t\t\tif ( !dataTypes[ 0 ] || s.converters[ type + \" \" + dataTypes[ 0 ] ] ) {\n\t\t\t\tfinalDataType = type;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif ( !firstDataType ) {\n\t\t\t\tfirstDataType = type;\n\t\t\t}\n\t\t}\n\n\t\t// Or just use first one\n\t\tfinalDataType = finalDataType || firstDataType;\n\t}\n\n\t// If we found a dataType\n\t// We add the dataType to the list if needed\n\t// and return the corresponding response\n\tif ( finalDataType ) {\n\t\tif ( finalDataType !== dataTypes[ 0 ] ) {\n\t\t\tdataTypes.unshift( finalDataType );\n\t\t}\n\t\treturn responses[ finalDataType ];\n\t}\n}\n\n/* Chain conversions given the request and the original response\n * Also sets the responseXXX fields on the jqXHR instance\n */\nfunction ajaxConvert( s, response, jqXHR, isSuccess ) {\n\tvar conv2, current, conv, tmp, prev,\n\t\tconverters = {},\n\n\t\t// Work with a copy of dataTypes in case we need to modify it for conversion\n\t\tdataTypes = s.dataTypes.slice();\n\n\t// Create converters map with lowercased keys\n\tif ( dataTypes[ 1 ] ) {\n\t\tfor ( conv in s.converters ) {\n\t\t\tconverters[ conv.toLowerCase() ] = s.converters[ conv ];\n\t\t}\n\t}\n\n\tcurrent = dataTypes.shift();\n\n\t// Convert to each sequential dataType\n\twhile ( current ) {\n\n\t\tif ( s.responseFields[ current ] ) {\n\t\t\tjqXHR[ s.responseFields[ current ] ] = response;\n\t\t}\n\n\t\t// Apply the dataFilter if provided\n\t\tif ( !prev && isSuccess && s.dataFilter ) {\n\t\t\tresponse = s.dataFilter( response, s.dataType );\n\t\t}\n\n\t\tprev = current;\n\t\tcurrent = dataTypes.shift();\n\n\t\tif ( current ) {\n\n\t\t\t// There's only work to do if current dataType is non-auto\n\t\t\tif ( current === \"*\" ) {\n\n\t\t\t\tcurrent = prev;\n\n\t\t\t// Convert response if prev dataType is non-auto and differs from current\n\t\t\t} else if ( prev !== \"*\" && prev !== current ) {\n\n\t\t\t\t// Seek a direct converter\n\t\t\t\tconv = converters[ prev + \" \" + current ] || converters[ \"* \" + current ];\n\n\t\t\t\t// If none found, seek a pair\n\t\t\t\tif ( !conv ) {\n\t\t\t\t\tfor ( conv2 in converters ) {\n\n\t\t\t\t\t\t// If conv2 outputs current\n\t\t\t\t\t\ttmp = conv2.split( \" \" );\n\t\t\t\t\t\tif ( tmp[ 1 ] === current ) {\n\n\t\t\t\t\t\t\t// If prev can be converted to accepted input\n\t\t\t\t\t\t\tconv = converters[ prev + \" \" + tmp[ 0 ] ] ||\n\t\t\t\t\t\t\t\tconverters[ \"* \" + tmp[ 0 ] ];\n\t\t\t\t\t\t\tif ( conv ) {\n\n\t\t\t\t\t\t\t\t// Condense equivalence converters\n\t\t\t\t\t\t\t\tif ( conv === true ) {\n\t\t\t\t\t\t\t\t\tconv = converters[ conv2 ];\n\n\t\t\t\t\t\t\t\t// Otherwise, insert the intermediate dataType\n\t\t\t\t\t\t\t\t} else if ( converters[ conv2 ] !== true ) {\n\t\t\t\t\t\t\t\t\tcurrent = tmp[ 0 ];\n\t\t\t\t\t\t\t\t\tdataTypes.unshift( tmp[ 1 ] );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Apply converter (if not an equivalence)\n\t\t\t\tif ( conv !== true ) {\n\n\t\t\t\t\t// Unless errors are allowed to bubble, catch and return them\n\t\t\t\t\tif ( conv && s.throws ) {\n\t\t\t\t\t\tresponse = conv( response );\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tresponse = conv( response );\n\t\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tstate: \"parsererror\",\n\t\t\t\t\t\t\t\terror: conv ? e : \"No conversion from \" + prev + \" to \" + current\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn { state: \"success\", data: response };\n}\n\njQuery.extend( {\n\n\t// Counter for holding the number of active queries\n\tactive: 0,\n\n\t// Last-Modified header cache for next request\n\tlastModified: {},\n\tetag: {},\n\n\tajaxSettings: {\n\t\turl: location.href,\n\t\ttype: \"GET\",\n\t\tisLocal: rlocalProtocol.test( location.protocol ),\n\t\tglobal: true,\n\t\tprocessData: true,\n\t\tasync: true,\n\t\tcontentType: \"application/x-www-form-urlencoded; charset=UTF-8\",\n\n\t\t/*\n\t\ttimeout: 0,\n\t\tdata: null,\n\t\tdataType: null,\n\t\tusername: null,\n\t\tpassword: null,\n\t\tcache: null,\n\t\tthrows: false,\n\t\ttraditional: false,\n\t\theaders: {},\n\t\t*/\n\n\t\taccepts: {\n\t\t\t\"*\": allTypes,\n\t\t\ttext: \"text/plain\",\n\t\t\thtml: \"text/html\",\n\t\t\txml: \"application/xml, text/xml\",\n\t\t\tjson: \"application/json, text/javascript\"\n\t\t},\n\n\t\tcontents: {\n\t\t\txml: /\\bxml\\b/,\n\t\t\thtml: /\\bhtml/,\n\t\t\tjson: /\\bjson\\b/\n\t\t},\n\n\t\tresponseFields: {\n\t\t\txml: \"responseXML\",\n\t\t\ttext: \"responseText\",\n\t\t\tjson: \"responseJSON\"\n\t\t},\n\n\t\t// Data converters\n\t\t// Keys separate source (or catchall \"*\") and destination types with a single space\n\t\tconverters: {\n\n\t\t\t// Convert anything to text\n\t\t\t\"* text\": String,\n\n\t\t\t// Text to html (true = no transformation)\n\t\t\t\"text html\": true,\n\n\t\t\t// Evaluate text as a json expression\n\t\t\t\"text json\": JSON.parse,\n\n\t\t\t// Parse text as xml\n\t\t\t\"text xml\": jQuery.parseXML\n\t\t},\n\n\t\t// For options that shouldn't be deep extended:\n\t\t// you can add your own custom options here if\n\t\t// and when you create one that shouldn't be\n\t\t// deep extended (see ajaxExtend)\n\t\tflatOptions: {\n\t\t\turl: true,\n\t\t\tcontext: true\n\t\t}\n\t},\n\n\t// Creates a full fledged settings object into target\n\t// with both ajaxSettings and settings fields.\n\t// If target is omitted, writes into ajaxSettings.\n\tajaxSetup: function( target, settings ) {\n\t\treturn settings ?\n\n\t\t\t// Building a settings object\n\t\t\tajaxExtend( ajaxExtend( target, jQuery.ajaxSettings ), settings ) :\n\n\t\t\t// Extending ajaxSettings\n\t\t\tajaxExtend( jQuery.ajaxSettings, target );\n\t},\n\n\tajaxPrefilter: addToPrefiltersOrTransports( prefilters ),\n\tajaxTransport: addToPrefiltersOrTransports( transports ),\n\n\t// Main method\n\tajax: function( url, options ) {\n\n\t\t// If url is an object, simulate pre-1.5 signature\n\t\tif ( typeof url === \"object\" ) {\n\t\t\toptions = url;\n\t\t\turl = undefined;\n\t\t}\n\n\t\t// Force options to be an object\n\t\toptions = options || {};\n\n\t\tvar transport,\n\n\t\t\t// URL without anti-cache param\n\t\t\tcacheURL,\n\n\t\t\t// Response headers\n\t\t\tresponseHeadersString,\n\t\t\tresponseHeaders,\n\n\t\t\t// timeout handle\n\t\t\ttimeoutTimer,\n\n\t\t\t// Url cleanup var\n\t\t\turlAnchor,\n\n\t\t\t// Request state (becomes false upon send and true upon completion)\n\t\t\tcompleted,\n\n\t\t\t// To know if global events are to be dispatched\n\t\t\tfireGlobals,\n\n\t\t\t// Loop variable\n\t\t\ti,\n\n\t\t\t// uncached part of the url\n\t\t\tuncached,\n\n\t\t\t// Create the final options object\n\t\t\ts = jQuery.ajaxSetup( {}, options ),\n\n\t\t\t// Callbacks context\n\t\t\tcallbackContext = s.context || s,\n\n\t\t\t// Context for global events is callbackContext if it is a DOM node or jQuery collection\n\t\t\tglobalEventContext = s.context &&\n\t\t\t\t( callbackContext.nodeType || callbackContext.jquery ) ?\n\t\t\t\t\tjQuery( callbackContext ) :\n\t\t\t\t\tjQuery.event,\n\n\t\t\t// Deferreds\n\t\t\tdeferred = jQuery.Deferred(),\n\t\t\tcompleteDeferred = jQuery.Callbacks( \"once memory\" ),\n\n\t\t\t// Status-dependent callbacks\n\t\t\tstatusCode = s.statusCode || {},\n\n\t\t\t// Headers (they are sent all at once)\n\t\t\trequestHeaders = {},\n\t\t\trequestHeadersNames = {},\n\n\t\t\t// Default abort message\n\t\t\tstrAbort = \"canceled\",\n\n\t\t\t// Fake xhr\n\t\t\tjqXHR = {\n\t\t\t\treadyState: 0,\n\n\t\t\t\t// Builds headers hashtable if needed\n\t\t\t\tgetResponseHeader: function( key ) {\n\t\t\t\t\tvar match;\n\t\t\t\t\tif ( completed ) {\n\t\t\t\t\t\tif ( !responseHeaders ) {\n\t\t\t\t\t\t\tresponseHeaders = {};\n\t\t\t\t\t\t\twhile ( ( match = rheaders.exec( responseHeadersString ) ) ) {\n\t\t\t\t\t\t\t\tresponseHeaders[ match[ 1 ].toLowerCase() ] = match[ 2 ];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmatch = responseHeaders[ key.toLowerCase() ];\n\t\t\t\t\t}\n\t\t\t\t\treturn match == null ? null : match;\n\t\t\t\t},\n\n\t\t\t\t// Raw string\n\t\t\t\tgetAllResponseHeaders: function() {\n\t\t\t\t\treturn completed ? responseHeadersString : null;\n\t\t\t\t},\n\n\t\t\t\t// Caches the header\n\t\t\t\tsetRequestHeader: function( name, value ) {\n\t\t\t\t\tif ( completed == null ) {\n\t\t\t\t\t\tname = requestHeadersNames[ name.toLowerCase() ] =\n\t\t\t\t\t\t\trequestHeadersNames[ name.toLowerCase() ] || name;\n\t\t\t\t\t\trequestHeaders[ name ] = value;\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\t// Overrides response content-type header\n\t\t\t\toverrideMimeType: function( type ) {\n\t\t\t\t\tif ( completed == null ) {\n\t\t\t\t\t\ts.mimeType = type;\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\t// Status-dependent callbacks\n\t\t\t\tstatusCode: function( map ) {\n\t\t\t\t\tvar code;\n\t\t\t\t\tif ( map ) {\n\t\t\t\t\t\tif ( completed ) {\n\n\t\t\t\t\t\t\t// Execute the appropriate callbacks\n\t\t\t\t\t\t\tjqXHR.always( map[ jqXHR.status ] );\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// Lazy-add the new callbacks in a way that preserves old ones\n\t\t\t\t\t\t\tfor ( code in map ) {\n\t\t\t\t\t\t\t\tstatusCode[ code ] = [ statusCode[ code ], map[ code ] ];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\t// Cancel the request\n\t\t\t\tabort: function( statusText ) {\n\t\t\t\t\tvar finalText = statusText || strAbort;\n\t\t\t\t\tif ( transport ) {\n\t\t\t\t\t\ttransport.abort( finalText );\n\t\t\t\t\t}\n\t\t\t\t\tdone( 0, finalText );\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t};\n\n\t\t// Attach deferreds\n\t\tdeferred.promise( jqXHR );\n\n\t\t// Add protocol if not provided (prefilters might expect it)\n\t\t// Handle falsy url in the settings object (#10093: consistency with old signature)\n\t\t// We also use the url parameter if available\n\t\ts.url = ( ( url || s.url || location.href ) + \"\" )\n\t\t\t.replace( rprotocol, location.protocol + \"//\" );\n\n\t\t// Alias method option to type as per ticket #12004\n\t\ts.type = options.method || options.type || s.method || s.type;\n\n\t\t// Extract dataTypes list\n\t\ts.dataTypes = ( s.dataType || \"*\" ).toLowerCase().match( rnotwhite ) || [ \"\" ];\n\n\t\t// A cross-domain request is in order when the origin doesn't match the current origin.\n\t\tif ( s.crossDomain == null ) {\n\t\t\turlAnchor = document.createElement( \"a\" );\n\n\t\t\t// Support: IE <=8 - 11, Edge 12 - 13\n\t\t\t// IE throws exception on accessing the href property if url is malformed,\n\t\t\t// e.g. http://example.com:80x/\n\t\t\ttry {\n\t\t\t\turlAnchor.href = s.url;\n\n\t\t\t\t// Support: IE <=8 - 11 only\n\t\t\t\t// Anchor's host property isn't correctly set when s.url is relative\n\t\t\t\turlAnchor.href = urlAnchor.href;\n\t\t\t\ts.crossDomain = originAnchor.protocol + \"//\" + originAnchor.host !==\n\t\t\t\t\turlAnchor.protocol + \"//\" + urlAnchor.host;\n\t\t\t} catch ( e ) {\n\n\t\t\t\t// If there is an error parsing the URL, assume it is crossDomain,\n\t\t\t\t// it can be rejected by the transport if it is invalid\n\t\t\t\ts.crossDomain = true;\n\t\t\t}\n\t\t}\n\n\t\t// Convert data if not already a string\n\t\tif ( s.data && s.processData && typeof s.data !== \"string\" ) {\n\t\t\ts.data = jQuery.param( s.data, s.traditional );\n\t\t}\n\n\t\t// Apply prefilters\n\t\tinspectPrefiltersOrTransports( prefilters, s, options, jqXHR );\n\n\t\t// If request was aborted inside a prefilter, stop there\n\t\tif ( completed ) {\n\t\t\treturn jqXHR;\n\t\t}\n\n\t\t// We can fire global events as of now if asked to\n\t\t// Don't fire events if jQuery.event is undefined in an AMD-usage scenario (#15118)\n\t\tfireGlobals = jQuery.event && s.global;\n\n\t\t// Watch for a new set of requests\n\t\tif ( fireGlobals && jQuery.active++ === 0 ) {\n\t\t\tjQuery.event.trigger( \"ajaxStart\" );\n\t\t}\n\n\t\t// Uppercase the type\n\t\ts.type = s.type.toUpperCase();\n\n\t\t// Determine if request has content\n\t\ts.hasContent = !rnoContent.test( s.type );\n\n\t\t// Save the URL in case we're toying with the If-Modified-Since\n\t\t// and/or If-None-Match header later on\n\t\t// Remove hash to simplify url manipulation\n\t\tcacheURL = s.url.replace( rhash, \"\" );\n\n\t\t// More options handling for requests with no content\n\t\tif ( !s.hasContent ) {\n\n\t\t\t// Remember the hash so we can put it back\n\t\t\tuncached = s.url.slice( cacheURL.length );\n\n\t\t\t// If data is available, append data to url\n\t\t\tif ( s.data ) {\n\t\t\t\tcacheURL += ( rquery.test( cacheURL ) ? \"&\" : \"?\" ) + s.data;\n\n\t\t\t\t// #9682: remove data so that it's not used in an eventual retry\n\t\t\t\tdelete s.data;\n\t\t\t}\n\n\t\t\t// Add anti-cache in uncached url if needed\n\t\t\tif ( s.cache === false ) {\n\t\t\t\tcacheURL = cacheURL.replace( rts, \"\" );\n\t\t\t\tuncached = ( rquery.test( cacheURL ) ? \"&\" : \"?\" ) + \"_=\" + ( nonce++ ) + uncached;\n\t\t\t}\n\n\t\t\t// Put hash and anti-cache on the URL that will be requested (gh-1732)\n\t\t\ts.url = cacheURL + uncached;\n\n\t\t// Change '%20' to '+' if this is encoded form body content (gh-2658)\n\t\t} else if ( s.data && s.processData &&\n\t\t\t( s.contentType || \"\" ).indexOf( \"application/x-www-form-urlencoded\" ) === 0 ) {\n\t\t\ts.data = s.data.replace( r20, \"+\" );\n\t\t}\n\n\t\t// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.\n\t\tif ( s.ifModified ) {\n\t\t\tif ( jQuery.lastModified[ cacheURL ] ) {\n\t\t\t\tjqXHR.setRequestHeader( \"If-Modified-Since\", jQuery.lastModified[ cacheURL ] );\n\t\t\t}\n\t\t\tif ( jQuery.etag[ cacheURL ] ) {\n\t\t\t\tjqXHR.setRequestHeader( \"If-None-Match\", jQuery.etag[ cacheURL ] );\n\t\t\t}\n\t\t}\n\n\t\t// Set the correct header, if data is being sent\n\t\tif ( s.data && s.hasContent && s.contentType !== false || options.contentType ) {\n\t\t\tjqXHR.setRequestHeader( \"Content-Type\", s.contentType );\n\t\t}\n\n\t\t// Set the Accepts header for the server, depending on the dataType\n\t\tjqXHR.setRequestHeader(\n\t\t\t\"Accept\",\n\t\t\ts.dataTypes[ 0 ] && s.accepts[ s.dataTypes[ 0 ] ] ?\n\t\t\t\ts.accepts[ s.dataTypes[ 0 ] ] +\n\t\t\t\t\t( s.dataTypes[ 0 ] !== \"*\" ? \", \" + allTypes + \"; q=0.01\" : \"\" ) :\n\t\t\t\ts.accepts[ \"*\" ]\n\t\t);\n\n\t\t// Check for headers option\n\t\tfor ( i in s.headers ) {\n\t\t\tjqXHR.setRequestHeader( i, s.headers[ i ] );\n\t\t}\n\n\t\t// Allow custom headers/mimetypes and early abort\n\t\tif ( s.beforeSend &&\n\t\t\t( s.beforeSend.call( callbackContext, jqXHR, s ) === false || completed ) ) {\n\n\t\t\t// Abort if not done already and return\n\t\t\treturn jqXHR.abort();\n\t\t}\n\n\t\t// Aborting is no longer a cancellation\n\t\tstrAbort = \"abort\";\n\n\t\t// Install callbacks on deferreds\n\t\tcompleteDeferred.add( s.complete );\n\t\tjqXHR.done( s.success );\n\t\tjqXHR.fail( s.error );\n\n\t\t// Get transport\n\t\ttransport = inspectPrefiltersOrTransports( transports, s, options, jqXHR );\n\n\t\t// If no transport, we auto-abort\n\t\tif ( !transport ) {\n\t\t\tdone( -1, \"No Transport\" );\n\t\t} else {\n\t\t\tjqXHR.readyState = 1;\n\n\t\t\t// Send global event\n\t\t\tif ( fireGlobals ) {\n\t\t\t\tglobalEventContext.trigger( \"ajaxSend\", [ jqXHR, s ] );\n\t\t\t}\n\n\t\t\t// If request was aborted inside ajaxSend, stop there\n\t\t\tif ( completed ) {\n\t\t\t\treturn jqXHR;\n\t\t\t}\n\n\t\t\t// Timeout\n\t\t\tif ( s.async && s.timeout > 0 ) {\n\t\t\t\ttimeoutTimer = window.setTimeout( function() {\n\t\t\t\t\tjqXHR.abort( \"timeout\" );\n\t\t\t\t}, s.timeout );\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tcompleted = false;\n\t\t\t\ttransport.send( requestHeaders, done );\n\t\t\t} catch ( e ) {\n\n\t\t\t\t// Rethrow post-completion exceptions\n\t\t\t\tif ( completed ) {\n\t\t\t\t\tthrow e;\n\t\t\t\t}\n\n\t\t\t\t// Propagate others as results\n\t\t\t\tdone( -1, e );\n\t\t\t}\n\t\t}\n\n\t\t// Callback for when everything is done\n\t\tfunction done( status, nativeStatusText, responses, headers ) {\n\t\t\tvar isSuccess, success, error, response, modified,\n\t\t\t\tstatusText = nativeStatusText;\n\n\t\t\t// Ignore repeat invocations\n\t\t\tif ( completed ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcompleted = true;\n\n\t\t\t// Clear timeout if it exists\n\t\t\tif ( timeoutTimer ) {\n\t\t\t\twindow.clearTimeout( timeoutTimer );\n\t\t\t}\n\n\t\t\t// Dereference transport for early garbage collection\n\t\t\t// (no matter how long the jqXHR object will be used)\n\t\t\ttransport = undefined;\n\n\t\t\t// Cache response headers\n\t\t\tresponseHeadersString = headers || \"\";\n\n\t\t\t// Set readyState\n\t\t\tjqXHR.readyState = status > 0 ? 4 : 0;\n\n\t\t\t// Determine if successful\n\t\t\tisSuccess = status >= 200 && status < 300 || status === 304;\n\n\t\t\t// Get response data\n\t\t\tif ( responses ) {\n\t\t\t\tresponse = ajaxHandleResponses( s, jqXHR, responses );\n\t\t\t}\n\n\t\t\t// Convert no matter what (that way responseXXX fields are always set)\n\t\t\tresponse = ajaxConvert( s, response, jqXHR, isSuccess );\n\n\t\t\t// If successful, handle type chaining\n\t\t\tif ( isSuccess ) {\n\n\t\t\t\t// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.\n\t\t\t\tif ( s.ifModified ) {\n\t\t\t\t\tmodified = jqXHR.getResponseHeader( \"Last-Modified\" );\n\t\t\t\t\tif ( modified ) {\n\t\t\t\t\t\tjQuery.lastModified[ cacheURL ] = modified;\n\t\t\t\t\t}\n\t\t\t\t\tmodified = jqXHR.getResponseHeader( \"etag\" );\n\t\t\t\t\tif ( modified ) {\n\t\t\t\t\t\tjQuery.etag[ cacheURL ] = modified;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// if no content\n\t\t\t\tif ( status === 204 || s.type === \"HEAD\" ) {\n\t\t\t\t\tstatusText = \"nocontent\";\n\n\t\t\t\t// if not modified\n\t\t\t\t} else if ( status === 304 ) {\n\t\t\t\t\tstatusText = \"notmodified\";\n\n\t\t\t\t// If we have data, let's convert it\n\t\t\t\t} else {\n\t\t\t\t\tstatusText = response.state;\n\t\t\t\t\tsuccess = response.data;\n\t\t\t\t\terror = response.error;\n\t\t\t\t\tisSuccess = !error;\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\t// Extract error from statusText and normalize for non-aborts\n\t\t\t\terror = statusText;\n\t\t\t\tif ( status || !statusText ) {\n\t\t\t\t\tstatusText = \"error\";\n\t\t\t\t\tif ( status < 0 ) {\n\t\t\t\t\t\tstatus = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Set data for the fake xhr object\n\t\t\tjqXHR.status = status;\n\t\t\tjqXHR.statusText = ( nativeStatusText || statusText ) + \"\";\n\n\t\t\t// Success/Error\n\t\t\tif ( isSuccess ) {\n\t\t\t\tdeferred.resolveWith( callbackContext, [ success, statusText, jqXHR ] );\n\t\t\t} else {\n\t\t\t\tdeferred.rejectWith( callbackContext, [ jqXHR, statusText, error ] );\n\t\t\t}\n\n\t\t\t// Status-dependent callbacks\n\t\t\tjqXHR.statusCode( statusCode );\n\t\t\tstatusCode = undefined;\n\n\t\t\tif ( fireGlobals ) {\n\t\t\t\tglobalEventContext.trigger( isSuccess ? \"ajaxSuccess\" : \"ajaxError\",\n\t\t\t\t\t[ jqXHR, s, isSuccess ? success : error ] );\n\t\t\t}\n\n\t\t\t// Complete\n\t\t\tcompleteDeferred.fireWith( callbackContext, [ jqXHR, statusText ] );\n\n\t\t\tif ( fireGlobals ) {\n\t\t\t\tglobalEventContext.trigger( \"ajaxComplete\", [ jqXHR, s ] );\n\n\t\t\t\t// Handle the global AJAX counter\n\t\t\t\tif ( !( --jQuery.active ) ) {\n\t\t\t\t\tjQuery.event.trigger( \"ajaxStop\" );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn jqXHR;\n\t},\n\n\tgetJSON: function( url, data, callback ) {\n\t\treturn jQuery.get( url, data, callback, \"json\" );\n\t},\n\n\tgetScript: function( url, callback ) {\n\t\treturn jQuery.get( url, undefined, callback, \"script\" );\n\t}\n} );\n\njQuery.each( [ \"get\", \"post\" ], function( i, method ) {\n\tjQuery[ method ] = function( url, data, callback, type ) {\n\n\t\t// Shift arguments if data argument was omitted\n\t\tif ( jQuery.isFunction( data ) ) {\n\t\t\ttype = type || callback;\n\t\t\tcallback = data;\n\t\t\tdata = undefined;\n\t\t}\n\n\t\t// The url can be an options object (which then must have .url)\n\t\treturn jQuery.ajax( jQuery.extend( {\n\t\t\turl: url,\n\t\t\ttype: method,\n\t\t\tdataType: type,\n\t\t\tdata: data,\n\t\t\tsuccess: callback\n\t\t}, jQuery.isPlainObject( url ) && url ) );\n\t};\n} );\n\n\njQuery._evalUrl = function( url ) {\n\treturn jQuery.ajax( {\n\t\turl: url,\n\n\t\t// Make this explicit, since user can override this through ajaxSetup (#11264)\n\t\ttype: \"GET\",\n\t\tdataType: \"script\",\n\t\tcache: true,\n\t\tasync: false,\n\t\tglobal: false,\n\t\t\"throws\": true\n\t} );\n};\n\n\njQuery.fn.extend( {\n\twrapAll: function( html ) {\n\t\tvar wrap;\n\n\t\tif ( this[ 0 ] ) {\n\t\t\tif ( jQuery.isFunction( html ) ) {\n\t\t\t\thtml = html.call( this[ 0 ] );\n\t\t\t}\n\n\t\t\t// The elements to wrap the target around\n\t\t\twrap = jQuery( html, this[ 0 ].ownerDocument ).eq( 0 ).clone( true );\n\n\t\t\tif ( this[ 0 ].parentNode ) {\n\t\t\t\twrap.insertBefore( this[ 0 ] );\n\t\t\t}\n\n\t\t\twrap.map( function() {\n\t\t\t\tvar elem = this;\n\n\t\t\t\twhile ( elem.firstElementChild ) {\n\t\t\t\t\telem = elem.firstElementChild;\n\t\t\t\t}\n\n\t\t\t\treturn elem;\n\t\t\t} ).append( this );\n\t\t}\n\n\t\treturn this;\n\t},\n\n\twrapInner: function( html ) {\n\t\tif ( jQuery.isFunction( html ) ) {\n\t\t\treturn this.each( function( i ) {\n\t\t\t\tjQuery( this ).wrapInner( html.call( this, i ) );\n\t\t\t} );\n\t\t}\n\n\t\treturn this.each( function() {\n\t\t\tvar self = jQuery( this ),\n\t\t\t\tcontents = self.contents();\n\n\t\t\tif ( contents.length ) {\n\t\t\t\tcontents.wrapAll( html );\n\n\t\t\t} else {\n\t\t\t\tself.append( html );\n\t\t\t}\n\t\t} );\n\t},\n\n\twrap: function( html ) {\n\t\tvar isFunction = jQuery.isFunction( html );\n\n\t\treturn this.each( function( i ) {\n\t\t\tjQuery( this ).wrapAll( isFunction ? html.call( this, i ) : html );\n\t\t} );\n\t},\n\n\tunwrap: function( selector ) {\n\t\tthis.parent( selector ).not( \"body\" ).each( function() {\n\t\t\tjQuery( this ).replaceWith( this.childNodes );\n\t\t} );\n\t\treturn this;\n\t}\n} );\n\n\njQuery.expr.pseudos.hidden = function( elem ) {\n\treturn !jQuery.expr.pseudos.visible( elem );\n};\njQuery.expr.pseudos.visible = function( elem ) {\n\treturn !!( elem.offsetWidth || elem.offsetHeight || elem.getClientRects().length );\n};\n\n\n\n\njQuery.ajaxSettings.xhr = function() {\n\ttry {\n\t\treturn new window.XMLHttpRequest();\n\t} catch ( e ) {}\n};\n\nvar xhrSuccessStatus = {\n\n\t\t// File protocol always yields status code 0, assume 200\n\t\t0: 200,\n\n\t\t// Support: IE <=9 only\n\t\t// #1450: sometimes IE returns 1223 when it should be 204\n\t\t1223: 204\n\t},\n\txhrSupported = jQuery.ajaxSettings.xhr();\n\nsupport.cors = !!xhrSupported && ( \"withCredentials\" in xhrSupported );\nsupport.ajax = xhrSupported = !!xhrSupported;\n\njQuery.ajaxTransport( function( options ) {\n\tvar callback, errorCallback;\n\n\t// Cross domain only allowed if supported through XMLHttpRequest\n\tif ( support.cors || xhrSupported && !options.crossDomain ) {\n\t\treturn {\n\t\t\tsend: function( headers, complete ) {\n\t\t\t\tvar i,\n\t\t\t\t\txhr = options.xhr();\n\n\t\t\t\txhr.open(\n\t\t\t\t\toptions.type,\n\t\t\t\t\toptions.url,\n\t\t\t\t\toptions.async,\n\t\t\t\t\toptions.username,\n\t\t\t\t\toptions.password\n\t\t\t\t);\n\n\t\t\t\t// Apply custom fields if provided\n\t\t\t\tif ( options.xhrFields ) {\n\t\t\t\t\tfor ( i in options.xhrFields ) {\n\t\t\t\t\t\txhr[ i ] = options.xhrFields[ i ];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Override mime type if needed\n\t\t\t\tif ( options.mimeType && xhr.overrideMimeType ) {\n\t\t\t\t\txhr.overrideMimeType( options.mimeType );\n\t\t\t\t}\n\n\t\t\t\t// X-Requested-With header\n\t\t\t\t// For cross-domain requests, seeing as conditions for a preflight are\n\t\t\t\t// akin to a jigsaw puzzle, we simply never set it to be sure.\n\t\t\t\t// (it can always be set on a per-request basis or even using ajaxSetup)\n\t\t\t\t// For same-domain requests, won't change header if already provided.\n\t\t\t\tif ( !options.crossDomain && !headers[ \"X-Requested-With\" ] ) {\n\t\t\t\t\theaders[ \"X-Requested-With\" ] = \"XMLHttpRequest\";\n\t\t\t\t}\n\n\t\t\t\t// Set headers\n\t\t\t\tfor ( i in headers ) {\n\t\t\t\t\txhr.setRequestHeader( i, headers[ i ] );\n\t\t\t\t}\n\n\t\t\t\t// Callback\n\t\t\t\tcallback = function( type ) {\n\t\t\t\t\treturn function() {\n\t\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\t\tcallback = errorCallback = xhr.onload =\n\t\t\t\t\t\t\t\txhr.onerror = xhr.onabort = xhr.onreadystatechange = null;\n\n\t\t\t\t\t\t\tif ( type === \"abort\" ) {\n\t\t\t\t\t\t\t\txhr.abort();\n\t\t\t\t\t\t\t} else if ( type === \"error\" ) {\n\n\t\t\t\t\t\t\t\t// Support: IE <=9 only\n\t\t\t\t\t\t\t\t// On a manual native abort, IE9 throws\n\t\t\t\t\t\t\t\t// errors on any property access that is not readyState\n\t\t\t\t\t\t\t\tif ( typeof xhr.status !== \"number\" ) {\n\t\t\t\t\t\t\t\t\tcomplete( 0, \"error\" );\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tcomplete(\n\n\t\t\t\t\t\t\t\t\t\t// File: protocol always yields status 0; see #8605, #14207\n\t\t\t\t\t\t\t\t\t\txhr.status,\n\t\t\t\t\t\t\t\t\t\txhr.statusText\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tcomplete(\n\t\t\t\t\t\t\t\t\txhrSuccessStatus[ xhr.status ] || xhr.status,\n\t\t\t\t\t\t\t\t\txhr.statusText,\n\n\t\t\t\t\t\t\t\t\t// Support: IE <=9 only\n\t\t\t\t\t\t\t\t\t// IE9 has no XHR2 but throws on binary (trac-11426)\n\t\t\t\t\t\t\t\t\t// For XHR2 non-text, let the caller handle it (gh-2498)\n\t\t\t\t\t\t\t\t\t( xhr.responseType || \"text\" ) !== \"text\"  ||\n\t\t\t\t\t\t\t\t\ttypeof xhr.responseText !== \"string\" ?\n\t\t\t\t\t\t\t\t\t\t{ binary: xhr.response } :\n\t\t\t\t\t\t\t\t\t\t{ text: xhr.responseText },\n\t\t\t\t\t\t\t\t\txhr.getAllResponseHeaders()\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t};\n\n\t\t\t\t// Listen to events\n\t\t\t\txhr.onload = callback();\n\t\t\t\terrorCallback = xhr.onerror = callback( \"error\" );\n\n\t\t\t\t// Support: IE 9 only\n\t\t\t\t// Use onreadystatechange to replace onabort\n\t\t\t\t// to handle uncaught aborts\n\t\t\t\tif ( xhr.onabort !== undefined ) {\n\t\t\t\t\txhr.onabort = errorCallback;\n\t\t\t\t} else {\n\t\t\t\t\txhr.onreadystatechange = function() {\n\n\t\t\t\t\t\t// Check readyState before timeout as it changes\n\t\t\t\t\t\tif ( xhr.readyState === 4 ) {\n\n\t\t\t\t\t\t\t// Allow onerror to be called first,\n\t\t\t\t\t\t\t// but that will not handle a native abort\n\t\t\t\t\t\t\t// Also, save errorCallback to a variable\n\t\t\t\t\t\t\t// as xhr.onerror cannot be accessed\n\t\t\t\t\t\t\twindow.setTimeout( function() {\n\t\t\t\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\t\t\t\terrorCallback();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\t// Create the abort callback\n\t\t\t\tcallback = callback( \"abort\" );\n\n\t\t\t\ttry {\n\n\t\t\t\t\t// Do send the request (this may raise an exception)\n\t\t\t\t\txhr.send( options.hasContent && options.data || null );\n\t\t\t\t} catch ( e ) {\n\n\t\t\t\t\t// #14683: Only rethrow if this hasn't been notified as an error yet\n\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\tthrow e;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tabort: function() {\n\t\t\t\tif ( callback ) {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n} );\n\n\n\n\n// Prevent auto-execution of scripts when no explicit dataType was provided (See gh-2432)\njQuery.ajaxPrefilter( function( s ) {\n\tif ( s.crossDomain ) {\n\t\ts.contents.script = false;\n\t}\n} );\n\n// Install script dataType\njQuery.ajaxSetup( {\n\taccepts: {\n\t\tscript: \"text/javascript, application/javascript, \" +\n\t\t\t\"application/ecmascript, application/x-ecmascript\"\n\t},\n\tcontents: {\n\t\tscript: /\\b(?:java|ecma)script\\b/\n\t},\n\tconverters: {\n\t\t\"text script\": function( text ) {\n\t\t\tjQuery.globalEval( text );\n\t\t\treturn text;\n\t\t}\n\t}\n} );\n\n// Handle cache's special case and crossDomain\njQuery.ajaxPrefilter( \"script\", function( s ) {\n\tif ( s.cache === undefined ) {\n\t\ts.cache = false;\n\t}\n\tif ( s.crossDomain ) {\n\t\ts.type = \"GET\";\n\t}\n} );\n\n// Bind script tag hack transport\njQuery.ajaxTransport( \"script\", function( s ) {\n\n\t// This transport only deals with cross domain requests\n\tif ( s.crossDomain ) {\n\t\tvar script, callback;\n\t\treturn {\n\t\t\tsend: function( _, complete ) {\n\t\t\t\tscript = jQuery( \"<script>\" ).prop( {\n\t\t\t\t\tcharset: s.scriptCharset,\n\t\t\t\t\tsrc: s.url\n\t\t\t\t} ).on(\n\t\t\t\t\t\"load error\",\n\t\t\t\t\tcallback = function( evt ) {\n\t\t\t\t\t\tscript.remove();\n\t\t\t\t\t\tcallback = null;\n\t\t\t\t\t\tif ( evt ) {\n\t\t\t\t\t\t\tcomplete( evt.type === \"error\" ? 404 : 200, evt.type );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\t// Use native DOM manipulation to avoid our domManip AJAX trickery\n\t\t\t\tdocument.head.appendChild( script[ 0 ] );\n\t\t\t},\n\t\t\tabort: function() {\n\t\t\t\tif ( callback ) {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n} );\n\n\n\n\nvar oldCallbacks = [],\n\trjsonp = /(=)\\?(?=&|$)|\\?\\?/;\n\n// Default jsonp settings\njQuery.ajaxSetup( {\n\tjsonp: \"callback\",\n\tjsonpCallback: function() {\n\t\tvar callback = oldCallbacks.pop() || ( jQuery.expando + \"_\" + ( nonce++ ) );\n\t\tthis[ callback ] = true;\n\t\treturn callback;\n\t}\n} );\n\n// Detect, normalize options and install callbacks for jsonp requests\njQuery.ajaxPrefilter( \"json jsonp\", function( s, originalSettings, jqXHR ) {\n\n\tvar callbackName, overwritten, responseContainer,\n\t\tjsonProp = s.jsonp !== false && ( rjsonp.test( s.url ) ?\n\t\t\t\"url\" :\n\t\t\ttypeof s.data === \"string\" &&\n\t\t\t\t( s.contentType || \"\" )\n\t\t\t\t\t.indexOf( \"application/x-www-form-urlencoded\" ) === 0 &&\n\t\t\t\trjsonp.test( s.data ) && \"data\"\n\t\t);\n\n\t// Handle iff the expected data type is \"jsonp\" or we have a parameter to set\n\tif ( jsonProp || s.dataTypes[ 0 ] === \"jsonp\" ) {\n\n\t\t// Get callback name, remembering preexisting value associated with it\n\t\tcallbackName = s.jsonpCallback = jQuery.isFunction( s.jsonpCallback ) ?\n\t\t\ts.jsonpCallback() :\n\t\t\ts.jsonpCallback;\n\n\t\t// Insert callback into url or form data\n\t\tif ( jsonProp ) {\n\t\t\ts[ jsonProp ] = s[ jsonProp ].replace( rjsonp, \"$1\" + callbackName );\n\t\t} else if ( s.jsonp !== false ) {\n\t\t\ts.url += ( rquery.test( s.url ) ? \"&\" : \"?\" ) + s.jsonp + \"=\" + callbackName;\n\t\t}\n\n\t\t// Use data converter to retrieve json after script execution\n\t\ts.converters[ \"script json\" ] = function() {\n\t\t\tif ( !responseContainer ) {\n\t\t\t\tjQuery.error( callbackName + \" was not called\" );\n\t\t\t}\n\t\t\treturn responseContainer[ 0 ];\n\t\t};\n\n\t\t// Force json dataType\n\t\ts.dataTypes[ 0 ] = \"json\";\n\n\t\t// Install callback\n\t\toverwritten = window[ callbackName ];\n\t\twindow[ callbackName ] = function() {\n\t\t\tresponseContainer = arguments;\n\t\t};\n\n\t\t// Clean-up function (fires after converters)\n\t\tjqXHR.always( function() {\n\n\t\t\t// If previous value didn't exist - remove it\n\t\t\tif ( overwritten === undefined ) {\n\t\t\t\tjQuery( window ).removeProp( callbackName );\n\n\t\t\t// Otherwise restore preexisting value\n\t\t\t} else {\n\t\t\t\twindow[ callbackName ] = overwritten;\n\t\t\t}\n\n\t\t\t// Save back as free\n\t\t\tif ( s[ callbackName ] ) {\n\n\t\t\t\t// Make sure that re-using the options doesn't screw things around\n\t\t\t\ts.jsonpCallback = originalSettings.jsonpCallback;\n\n\t\t\t\t// Save the callback name for future use\n\t\t\t\toldCallbacks.push( callbackName );\n\t\t\t}\n\n\t\t\t// Call if it was a function and we have a response\n\t\t\tif ( responseContainer && jQuery.isFunction( overwritten ) ) {\n\t\t\t\toverwritten( responseContainer[ 0 ] );\n\t\t\t}\n\n\t\t\tresponseContainer = overwritten = undefined;\n\t\t} );\n\n\t\t// Delegate to script\n\t\treturn \"script\";\n\t}\n} );\n\n\n\n\n// Support: Safari 8 only\n// In Safari 8 documents created via document.implementation.createHTMLDocument\n// collapse sibling forms: the second one becomes a child of the first one.\n// Because of that, this security measure has to be disabled in Safari 8.\n// https://bugs.webkit.org/show_bug.cgi?id=137337\nsupport.createHTMLDocument = ( function() {\n\tvar body = document.implementation.createHTMLDocument( \"\" ).body;\n\tbody.innerHTML = \"<form></form><form></form>\";\n\treturn body.childNodes.length === 2;\n} )();\n\n\n// Argument \"data\" should be string of html\n// context (optional): If specified, the fragment will be created in this context,\n// defaults to document\n// keepScripts (optional): If true, will include scripts passed in the html string\njQuery.parseHTML = function( data, context, keepScripts ) {\n\tif ( typeof data !== \"string\" ) {\n\t\treturn [];\n\t}\n\tif ( typeof context === \"boolean\" ) {\n\t\tkeepScripts = context;\n\t\tcontext = false;\n\t}\n\n\tvar base, parsed, scripts;\n\n\tif ( !context ) {\n\n\t\t// Stop scripts or inline event handlers from being executed immediately\n\t\t// by using document.implementation\n\t\tif ( support.createHTMLDocument ) {\n\t\t\tcontext = document.implementation.createHTMLDocument( \"\" );\n\n\t\t\t// Set the base href for the created document\n\t\t\t// so any parsed elements with URLs\n\t\t\t// are based on the document's URL (gh-2965)\n\t\t\tbase = context.createElement( \"base\" );\n\t\t\tbase.href = document.location.href;\n\t\t\tcontext.head.appendChild( base );\n\t\t} else {\n\t\t\tcontext = document;\n\t\t}\n\t}\n\n\tparsed = rsingleTag.exec( data );\n\tscripts = !keepScripts && [];\n\n\t// Single tag\n\tif ( parsed ) {\n\t\treturn [ context.createElement( parsed[ 1 ] ) ];\n\t}\n\n\tparsed = buildFragment( [ data ], context, scripts );\n\n\tif ( scripts && scripts.length ) {\n\t\tjQuery( scripts ).remove();\n\t}\n\n\treturn jQuery.merge( [], parsed.childNodes );\n};\n\n\n/**\n * Load a url into a page\n */\njQuery.fn.load = function( url, params, callback ) {\n\tvar selector, type, response,\n\t\tself = this,\n\t\toff = url.indexOf( \" \" );\n\n\tif ( off > -1 ) {\n\t\tselector = jQuery.trim( url.slice( off ) );\n\t\turl = url.slice( 0, off );\n\t}\n\n\t// If it's a function\n\tif ( jQuery.isFunction( params ) ) {\n\n\t\t// We assume that it's the callback\n\t\tcallback = params;\n\t\tparams = undefined;\n\n\t// Otherwise, build a param string\n\t} else if ( params && typeof params === \"object\" ) {\n\t\ttype = \"POST\";\n\t}\n\n\t// If we have elements to modify, make the request\n\tif ( self.length > 0 ) {\n\t\tjQuery.ajax( {\n\t\t\turl: url,\n\n\t\t\t// If \"type\" variable is undefined, then \"GET\" method will be used.\n\t\t\t// Make value of this field explicit since\n\t\t\t// user can override it through ajaxSetup method\n\t\t\ttype: type || \"GET\",\n\t\t\tdataType: \"html\",\n\t\t\tdata: params\n\t\t} ).done( function( responseText ) {\n\n\t\t\t// Save response for use in complete callback\n\t\t\tresponse = arguments;\n\n\t\t\tself.html( selector ?\n\n\t\t\t\t// If a selector was specified, locate the right elements in a dummy div\n\t\t\t\t// Exclude scripts to avoid IE 'Permission Denied' errors\n\t\t\t\tjQuery( \"<div>\" ).append( jQuery.parseHTML( responseText ) ).find( selector ) :\n\n\t\t\t\t// Otherwise use the full result\n\t\t\t\tresponseText );\n\n\t\t// If the request succeeds, this function gets \"data\", \"status\", \"jqXHR\"\n\t\t// but they are ignored because response was set above.\n\t\t// If it fails, this function gets \"jqXHR\", \"status\", \"error\"\n\t\t} ).always( callback && function( jqXHR, status ) {\n\t\t\tself.each( function() {\n\t\t\t\tcallback.apply( this, response || [ jqXHR.responseText, status, jqXHR ] );\n\t\t\t} );\n\t\t} );\n\t}\n\n\treturn this;\n};\n\n\n\n\n// Attach a bunch of functions for handling common AJAX events\njQuery.each( [\n\t\"ajaxStart\",\n\t\"ajaxStop\",\n\t\"ajaxComplete\",\n\t\"ajaxError\",\n\t\"ajaxSuccess\",\n\t\"ajaxSend\"\n], function( i, type ) {\n\tjQuery.fn[ type ] = function( fn ) {\n\t\treturn this.on( type, fn );\n\t};\n} );\n\n\n\n\njQuery.expr.pseudos.animated = function( elem ) {\n\treturn jQuery.grep( jQuery.timers, function( fn ) {\n\t\treturn elem === fn.elem;\n\t} ).length;\n};\n\n\n\n\n/**\n * Gets a window from an element\n */\nfunction getWindow( elem ) {\n\treturn jQuery.isWindow( elem ) ? elem : elem.nodeType === 9 && elem.defaultView;\n}\n\njQuery.offset = {\n\tsetOffset: function( elem, options, i ) {\n\t\tvar curPosition, curLeft, curCSSTop, curTop, curOffset, curCSSLeft, calculatePosition,\n\t\t\tposition = jQuery.css( elem, \"position\" ),\n\t\t\tcurElem = jQuery( elem ),\n\t\t\tprops = {};\n\n\t\t// Set position first, in-case top/left are set even on static elem\n\t\tif ( position === \"static\" ) {\n\t\t\telem.style.position = \"relative\";\n\t\t}\n\n\t\tcurOffset = curElem.offset();\n\t\tcurCSSTop = jQuery.css( elem, \"top\" );\n\t\tcurCSSLeft = jQuery.css( elem, \"left\" );\n\t\tcalculatePosition = ( position === \"absolute\" || position === \"fixed\" ) &&\n\t\t\t( curCSSTop + curCSSLeft ).indexOf( \"auto\" ) > -1;\n\n\t\t// Need to be able to calculate position if either\n\t\t// top or left is auto and position is either absolute or fixed\n\t\tif ( calculatePosition ) {\n\t\t\tcurPosition = curElem.position();\n\t\t\tcurTop = curPosition.top;\n\t\t\tcurLeft = curPosition.left;\n\n\t\t} else {\n\t\t\tcurTop = parseFloat( curCSSTop ) || 0;\n\t\t\tcurLeft = parseFloat( curCSSLeft ) || 0;\n\t\t}\n\n\t\tif ( jQuery.isFunction( options ) ) {\n\n\t\t\t// Use jQuery.extend here to allow modification of coordinates argument (gh-1848)\n\t\t\toptions = options.call( elem, i, jQuery.extend( {}, curOffset ) );\n\t\t}\n\n\t\tif ( options.top != null ) {\n\t\t\tprops.top = ( options.top - curOffset.top ) + curTop;\n\t\t}\n\t\tif ( options.left != null ) {\n\t\t\tprops.left = ( options.left - curOffset.left ) + curLeft;\n\t\t}\n\n\t\tif ( \"using\" in options ) {\n\t\t\toptions.using.call( elem, props );\n\n\t\t} else {\n\t\t\tcurElem.css( props );\n\t\t}\n\t}\n};\n\njQuery.fn.extend( {\n\toffset: function( options ) {\n\n\t\t// Preserve chaining for setter\n\t\tif ( arguments.length ) {\n\t\t\treturn options === undefined ?\n\t\t\t\tthis :\n\t\t\t\tthis.each( function( i ) {\n\t\t\t\t\tjQuery.offset.setOffset( this, options, i );\n\t\t\t\t} );\n\t\t}\n\n\t\tvar docElem, win, rect, doc,\n\t\t\telem = this[ 0 ];\n\n\t\tif ( !elem ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Support: IE <=11 only\n\t\t// Running getBoundingClientRect on a\n\t\t// disconnected node in IE throws an error\n\t\tif ( !elem.getClientRects().length ) {\n\t\t\treturn { top: 0, left: 0 };\n\t\t}\n\n\t\trect = elem.getBoundingClientRect();\n\n\t\t// Make sure element is not hidden (display: none)\n\t\tif ( rect.width || rect.height ) {\n\t\t\tdoc = elem.ownerDocument;\n\t\t\twin = getWindow( doc );\n\t\t\tdocElem = doc.documentElement;\n\n\t\t\treturn {\n\t\t\t\ttop: rect.top + win.pageYOffset - docElem.clientTop,\n\t\t\t\tleft: rect.left + win.pageXOffset - docElem.clientLeft\n\t\t\t};\n\t\t}\n\n\t\t// Return zeros for disconnected and hidden elements (gh-2310)\n\t\treturn rect;\n\t},\n\n\tposition: function() {\n\t\tif ( !this[ 0 ] ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar offsetParent, offset,\n\t\t\telem = this[ 0 ],\n\t\t\tparentOffset = { top: 0, left: 0 };\n\n\t\t// Fixed elements are offset from window (parentOffset = {top:0, left: 0},\n\t\t// because it is its only offset parent\n\t\tif ( jQuery.css( elem, \"position\" ) === \"fixed\" ) {\n\n\t\t\t// Assume getBoundingClientRect is there when computed position is fixed\n\t\t\toffset = elem.getBoundingClientRect();\n\n\t\t} else {\n\n\t\t\t// Get *real* offsetParent\n\t\t\toffsetParent = this.offsetParent();\n\n\t\t\t// Get correct offsets\n\t\t\toffset = this.offset();\n\t\t\tif ( !jQuery.nodeName( offsetParent[ 0 ], \"html\" ) ) {\n\t\t\t\tparentOffset = offsetParent.offset();\n\t\t\t}\n\n\t\t\t// Add offsetParent borders\n\t\t\tparentOffset = {\n\t\t\t\ttop: parentOffset.top + jQuery.css( offsetParent[ 0 ], \"borderTopWidth\", true ),\n\t\t\t\tleft: parentOffset.left + jQuery.css( offsetParent[ 0 ], \"borderLeftWidth\", true )\n\t\t\t};\n\t\t}\n\n\t\t// Subtract parent offsets and element margins\n\t\treturn {\n\t\t\ttop: offset.top - parentOffset.top - jQuery.css( elem, \"marginTop\", true ),\n\t\t\tleft: offset.left - parentOffset.left - jQuery.css( elem, \"marginLeft\", true )\n\t\t};\n\t},\n\n\t// This method will return documentElement in the following cases:\n\t// 1) For the element inside the iframe without offsetParent, this method will return\n\t//    documentElement of the parent window\n\t// 2) For the hidden or detached element\n\t// 3) For body or html element, i.e. in case of the html node - it will return itself\n\t//\n\t// but those exceptions were never presented as a real life use-cases\n\t// and might be considered as more preferable results.\n\t//\n\t// This logic, however, is not guaranteed and can change at any point in the future\n\toffsetParent: function() {\n\t\treturn this.map( function() {\n\t\t\tvar offsetParent = this.offsetParent;\n\n\t\t\twhile ( offsetParent && jQuery.css( offsetParent, \"position\" ) === \"static\" ) {\n\t\t\t\toffsetParent = offsetParent.offsetParent;\n\t\t\t}\n\n\t\t\treturn offsetParent || documentElement;\n\t\t} );\n\t}\n} );\n\n// Create scrollLeft and scrollTop methods\njQuery.each( { scrollLeft: \"pageXOffset\", scrollTop: \"pageYOffset\" }, function( method, prop ) {\n\tvar top = \"pageYOffset\" === prop;\n\n\tjQuery.fn[ method ] = function( val ) {\n\t\treturn access( this, function( elem, method, val ) {\n\t\t\tvar win = getWindow( elem );\n\n\t\t\tif ( val === undefined ) {\n\t\t\t\treturn win ? win[ prop ] : elem[ method ];\n\t\t\t}\n\n\t\t\tif ( win ) {\n\t\t\t\twin.scrollTo(\n\t\t\t\t\t!top ? val : win.pageXOffset,\n\t\t\t\t\ttop ? val : win.pageYOffset\n\t\t\t\t);\n\n\t\t\t} else {\n\t\t\t\telem[ method ] = val;\n\t\t\t}\n\t\t}, method, val, arguments.length );\n\t};\n} );\n\n// Support: Safari <=7 - 9.1, Chrome <=37 - 49\n// Add the top/left cssHooks using jQuery.fn.position\n// Webkit bug: https://bugs.webkit.org/show_bug.cgi?id=29084\n// Blink bug: https://bugs.chromium.org/p/chromium/issues/detail?id=589347\n// getComputedStyle returns percent when specified for top/left/bottom/right;\n// rather than make the css module depend on the offset module, just check for it here\njQuery.each( [ \"top\", \"left\" ], function( i, prop ) {\n\tjQuery.cssHooks[ prop ] = addGetHookIf( support.pixelPosition,\n\t\tfunction( elem, computed ) {\n\t\t\tif ( computed ) {\n\t\t\t\tcomputed = curCSS( elem, prop );\n\n\t\t\t\t// If curCSS returns percentage, fallback to offset\n\t\t\t\treturn rnumnonpx.test( computed ) ?\n\t\t\t\t\tjQuery( elem ).position()[ prop ] + \"px\" :\n\t\t\t\t\tcomputed;\n\t\t\t}\n\t\t}\n\t);\n} );\n\n\n// Create innerHeight, innerWidth, height, width, outerHeight and outerWidth methods\njQuery.each( { Height: \"height\", Width: \"width\" }, function( name, type ) {\n\tjQuery.each( { padding: \"inner\" + name, content: type, \"\": \"outer\" + name },\n\t\tfunction( defaultExtra, funcName ) {\n\n\t\t// Margin is only for outerHeight, outerWidth\n\t\tjQuery.fn[ funcName ] = function( margin, value ) {\n\t\t\tvar chainable = arguments.length && ( defaultExtra || typeof margin !== \"boolean\" ),\n\t\t\t\textra = defaultExtra || ( margin === true || value === true ? \"margin\" : \"border\" );\n\n\t\t\treturn access( this, function( elem, type, value ) {\n\t\t\t\tvar doc;\n\n\t\t\t\tif ( jQuery.isWindow( elem ) ) {\n\n\t\t\t\t\t// $( window ).outerWidth/Height return w/h including scrollbars (gh-1729)\n\t\t\t\t\treturn funcName.indexOf( \"outer\" ) === 0 ?\n\t\t\t\t\t\telem[ \"inner\" + name ] :\n\t\t\t\t\t\telem.document.documentElement[ \"client\" + name ];\n\t\t\t\t}\n\n\t\t\t\t// Get document width or height\n\t\t\t\tif ( elem.nodeType === 9 ) {\n\t\t\t\t\tdoc = elem.documentElement;\n\n\t\t\t\t\t// Either scroll[Width/Height] or offset[Width/Height] or client[Width/Height],\n\t\t\t\t\t// whichever is greatest\n\t\t\t\t\treturn Math.max(\n\t\t\t\t\t\telem.body[ \"scroll\" + name ], doc[ \"scroll\" + name ],\n\t\t\t\t\t\telem.body[ \"offset\" + name ], doc[ \"offset\" + name ],\n\t\t\t\t\t\tdoc[ \"client\" + name ]\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn value === undefined ?\n\n\t\t\t\t\t// Get width or height on the element, requesting but not forcing parseFloat\n\t\t\t\t\tjQuery.css( elem, type, extra ) :\n\n\t\t\t\t\t// Set width or height on the element\n\t\t\t\t\tjQuery.style( elem, type, value, extra );\n\t\t\t}, type, chainable ? margin : undefined, chainable );\n\t\t};\n\t} );\n} );\n\n\njQuery.fn.extend( {\n\n\tbind: function( types, data, fn ) {\n\t\treturn this.on( types, null, data, fn );\n\t},\n\tunbind: function( types, fn ) {\n\t\treturn this.off( types, null, fn );\n\t},\n\n\tdelegate: function( selector, types, data, fn ) {\n\t\treturn this.on( types, selector, data, fn );\n\t},\n\tundelegate: function( selector, types, fn ) {\n\n\t\t// ( namespace ) or ( selector, types [, fn] )\n\t\treturn arguments.length === 1 ?\n\t\t\tthis.off( selector, \"**\" ) :\n\t\t\tthis.off( types, selector || \"**\", fn );\n\t}\n} );\n\njQuery.parseJSON = JSON.parse;\n\n\n\n\n// Register as a named AMD module, since jQuery can be concatenated with other\n// files that may use define, but not via a proper concatenation script that\n// understands anonymous AMD modules. A named AMD is safest and most robust\n// way to register. Lowercase jquery is used because AMD module names are\n// derived from file names, and jQuery is normally delivered in a lowercase\n// file name. Do this after creating the global so that if an AMD module wants\n// to call noConflict to hide this version of jQuery, it will work.\n\n// Note that for maximum portability, libraries that are not jQuery should\n// declare themselves as anonymous modules, and avoid setting a global if an\n// AMD loader is present. jQuery is a special case. For more information, see\n// https://github.com/jrburke/requirejs/wiki/Updating-existing-libraries#wiki-anon\n\nif ( typeof define === \"function\" && define.amd ) {\n\tdefine( \"jquery\", [], function() {\n\t\treturn jQuery;\n\t} );\n}\n\n\n\n\n\nvar\n\n\t// Map over jQuery in case of overwrite\n\t_jQuery = window.jQuery,\n\n\t// Map over the $ in case of overwrite\n\t_$ = window.$;\n\njQuery.noConflict = function( deep ) {\n\tif ( window.$ === jQuery ) {\n\t\twindow.$ = _$;\n\t}\n\n\tif ( deep && window.jQuery === jQuery ) {\n\t\twindow.jQuery = _jQuery;\n\t}\n\n\treturn jQuery;\n};\n\n// Expose jQuery and $ identifiers, even in AMD\n// (#7102#comment:10, https://github.com/jquery/jquery/pull/557)\n// and CommonJS for browser emulators (#13566)\nif ( !noGlobal ) {\n\twindow.jQuery = window.$ = jQuery;\n}\n\n\nreturn jQuery;\n} );\n\n/*! jQuery UI - v1.12.0 - 2016-08-25\n* http://jqueryui.com\n* Includes: widget.js, position.js, form-reset-mixin.js, keycode.js, labels.js, unique-id.js, widgets/button.js, widgets/checkboxradio.js, widgets/controlgroup.js, widgets/menu.js, widgets/selectmenu.js, widgets/spinner.js\n* Copyright jQuery Foundation and other contributors; Licensed MIT */\n\n(function( factory ) {\n\tif ( typeof define === \"function\" && define.amd ) {\n\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine([ \"jquery\" ], factory );\n\t} else {\n\n\t\t// Browser globals\n\t\tfactory( jQuery );\n\t}\n}(function( $ ) {\n\n$.ui = $.ui || {};\n\nvar version = $.ui.version = \"1.12.0\";\n\n\n/*!\n * jQuery UI Widget 1.12.0\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: Widget\n//>>group: Core\n//>>description: Provides a factory for creating stateful widgets with a common API.\n//>>docs: http://api.jqueryui.com/jQuery.widget/\n//>>demos: http://jqueryui.com/widget/\n\n\n\nvar widgetUuid = 0;\nvar widgetSlice = Array.prototype.slice;\n\n$.cleanData = ( function( orig ) {\n\treturn function( elems ) {\n\t\tvar events, elem, i;\n\t\tfor ( i = 0; ( elem = elems[ i ] ) != null; i++ ) {\n\t\t\ttry {\n\n\t\t\t\t// Only trigger remove when necessary to save time\n\t\t\t\tevents = $._data( elem, \"events\" );\n\t\t\t\tif ( events && events.remove ) {\n\t\t\t\t\t$( elem ).triggerHandler( \"remove\" );\n\t\t\t\t}\n\n\t\t\t// Http://bugs.jquery.com/ticket/8235\n\t\t\t} catch ( e ) {}\n\t\t}\n\t\torig( elems );\n\t};\n} )( $.cleanData );\n\n$.widget = function( name, base, prototype ) {\n\tvar existingConstructor, constructor, basePrototype;\n\n\t// ProxiedPrototype allows the provided prototype to remain unmodified\n\t// so that it can be used as a mixin for multiple widgets (#8876)\n\tvar proxiedPrototype = {};\n\n\tvar namespace = name.split( \".\" )[ 0 ];\n\tname = name.split( \".\" )[ 1 ];\n\tvar fullName = namespace + \"-\" + name;\n\n\tif ( !prototype ) {\n\t\tprototype = base;\n\t\tbase = $.Widget;\n\t}\n\n\tif ( $.isArray( prototype ) ) {\n\t\tprototype = $.extend.apply( null, [ {} ].concat( prototype ) );\n\t}\n\n\t// Create selector for plugin\n\t$.expr[ \":\" ][ fullName.toLowerCase() ] = function( elem ) {\n\t\treturn !!$.data( elem, fullName );\n\t};\n\n\t$[ namespace ] = $[ namespace ] || {};\n\texistingConstructor = $[ namespace ][ name ];\n\tconstructor = $[ namespace ][ name ] = function( options, element ) {\n\n\t\t// Allow instantiation without \"new\" keyword\n\t\tif ( !this._createWidget ) {\n\t\t\treturn new constructor( options, element );\n\t\t}\n\n\t\t// Allow instantiation without initializing for simple inheritance\n\t\t// must use \"new\" keyword (the code above always passes args)\n\t\tif ( arguments.length ) {\n\t\t\tthis._createWidget( options, element );\n\t\t}\n\t};\n\n\t// Extend with the existing constructor to carry over any static properties\n\t$.extend( constructor, existingConstructor, {\n\t\tversion: prototype.version,\n\n\t\t// Copy the object used to create the prototype in case we need to\n\t\t// redefine the widget later\n\t\t_proto: $.extend( {}, prototype ),\n\n\t\t// Track widgets that inherit from this widget in case this widget is\n\t\t// redefined after a widget inherits from it\n\t\t_childConstructors: []\n\t} );\n\n\tbasePrototype = new base();\n\n\t// We need to make the options hash a property directly on the new instance\n\t// otherwise we'll modify the options hash on the prototype that we're\n\t// inheriting from\n\tbasePrototype.options = $.widget.extend( {}, basePrototype.options );\n\t$.each( prototype, function( prop, value ) {\n\t\tif ( !$.isFunction( value ) ) {\n\t\t\tproxiedPrototype[ prop ] = value;\n\t\t\treturn;\n\t\t}\n\t\tproxiedPrototype[ prop ] = ( function() {\n\t\t\tfunction _super() {\n\t\t\t\treturn base.prototype[ prop ].apply( this, arguments );\n\t\t\t}\n\n\t\t\tfunction _superApply( args ) {\n\t\t\t\treturn base.prototype[ prop ].apply( this, args );\n\t\t\t}\n\n\t\t\treturn function() {\n\t\t\t\tvar __super = this._super;\n\t\t\t\tvar __superApply = this._superApply;\n\t\t\t\tvar returnValue;\n\n\t\t\t\tthis._super = _super;\n\t\t\t\tthis._superApply = _superApply;\n\n\t\t\t\treturnValue = value.apply( this, arguments );\n\n\t\t\t\tthis._super = __super;\n\t\t\t\tthis._superApply = __superApply;\n\n\t\t\t\treturn returnValue;\n\t\t\t};\n\t\t} )();\n\t} );\n\tconstructor.prototype = $.widget.extend( basePrototype, {\n\n\t\t// TODO: remove support for widgetEventPrefix\n\t\t// always use the name + a colon as the prefix, e.g., draggable:start\n\t\t// don't prefix for widgets that aren't DOM-based\n\t\twidgetEventPrefix: existingConstructor ? ( basePrototype.widgetEventPrefix || name ) : name\n\t}, proxiedPrototype, {\n\t\tconstructor: constructor,\n\t\tnamespace: namespace,\n\t\twidgetName: name,\n\t\twidgetFullName: fullName\n\t} );\n\n\t// If this widget is being redefined then we need to find all widgets that\n\t// are inheriting from it and redefine all of them so that they inherit from\n\t// the new version of this widget. We're essentially trying to replace one\n\t// level in the prototype chain.\n\tif ( existingConstructor ) {\n\t\t$.each( existingConstructor._childConstructors, function( i, child ) {\n\t\t\tvar childPrototype = child.prototype;\n\n\t\t\t// Redefine the child widget using the same prototype that was\n\t\t\t// originally used, but inherit from the new version of the base\n\t\t\t$.widget( childPrototype.namespace + \".\" + childPrototype.widgetName, constructor,\n\t\t\t\tchild._proto );\n\t\t} );\n\n\t\t// Remove the list of existing child constructors from the old constructor\n\t\t// so the old child constructors can be garbage collected\n\t\tdelete existingConstructor._childConstructors;\n\t} else {\n\t\tbase._childConstructors.push( constructor );\n\t}\n\n\t$.widget.bridge( name, constructor );\n\n\treturn constructor;\n};\n\n$.widget.extend = function( target ) {\n\tvar input = widgetSlice.call( arguments, 1 );\n\tvar inputIndex = 0;\n\tvar inputLength = input.length;\n\tvar key;\n\tvar value;\n\n\tfor ( ; inputIndex < inputLength; inputIndex++ ) {\n\t\tfor ( key in input[ inputIndex ] ) {\n\t\t\tvalue = input[ inputIndex ][ key ];\n\t\t\tif ( input[ inputIndex ].hasOwnProperty( key ) && value !== undefined ) {\n\n\t\t\t\t// Clone objects\n\t\t\t\tif ( $.isPlainObject( value ) ) {\n\t\t\t\t\ttarget[ key ] = $.isPlainObject( target[ key ] ) ?\n\t\t\t\t\t\t$.widget.extend( {}, target[ key ], value ) :\n\n\t\t\t\t\t\t// Don't extend strings, arrays, etc. with objects\n\t\t\t\t\t\t$.widget.extend( {}, value );\n\n\t\t\t\t// Copy everything else by reference\n\t\t\t\t} else {\n\t\t\t\t\ttarget[ key ] = value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn target;\n};\n\n$.widget.bridge = function( name, object ) {\n\tvar fullName = object.prototype.widgetFullName || name;\n\t$.fn[ name ] = function( options ) {\n\t\tvar isMethodCall = typeof options === \"string\";\n\t\tvar args = widgetSlice.call( arguments, 1 );\n\t\tvar returnValue = this;\n\n\t\tif ( isMethodCall ) {\n\t\t\tthis.each( function() {\n\t\t\t\tvar methodValue;\n\t\t\t\tvar instance = $.data( this, fullName );\n\n\t\t\t\tif ( options === \"instance\" ) {\n\t\t\t\t\treturnValue = instance;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif ( !instance ) {\n\t\t\t\t\treturn $.error( \"cannot call methods on \" + name +\n\t\t\t\t\t\t\" prior to initialization; \" +\n\t\t\t\t\t\t\"attempted to call method '\" + options + \"'\" );\n\t\t\t\t}\n\n\t\t\t\tif ( !$.isFunction( instance[ options ] ) || options.charAt( 0 ) === \"_\" ) {\n\t\t\t\t\treturn $.error( \"no such method '\" + options + \"' for \" + name +\n\t\t\t\t\t\t\" widget instance\" );\n\t\t\t\t}\n\n\t\t\t\tmethodValue = instance[ options ].apply( instance, args );\n\n\t\t\t\tif ( methodValue !== instance && methodValue !== undefined ) {\n\t\t\t\t\treturnValue = methodValue && methodValue.jquery ?\n\t\t\t\t\t\treturnValue.pushStack( methodValue.get() ) :\n\t\t\t\t\t\tmethodValue;\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} );\n\t\t} else {\n\n\t\t\t// Allow multiple hashes to be passed on init\n\t\t\tif ( args.length ) {\n\t\t\t\toptions = $.widget.extend.apply( null, [ options ].concat( args ) );\n\t\t\t}\n\n\t\t\tthis.each( function() {\n\t\t\t\tvar instance = $.data( this, fullName );\n\t\t\t\tif ( instance ) {\n\t\t\t\t\tinstance.option( options || {} );\n\t\t\t\t\tif ( instance._init ) {\n\t\t\t\t\t\tinstance._init();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t$.data( this, fullName, new object( options, this ) );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\treturn returnValue;\n\t};\n};\n\n$.Widget = function( /* options, element */ ) {};\n$.Widget._childConstructors = [];\n\n$.Widget.prototype = {\n\twidgetName: \"widget\",\n\twidgetEventPrefix: \"\",\n\tdefaultElement: \"<div>\",\n\n\toptions: {\n\t\tclasses: {},\n\t\tdisabled: false,\n\n\t\t// Callbacks\n\t\tcreate: null\n\t},\n\n\t_createWidget: function( options, element ) {\n\t\telement = $( element || this.defaultElement || this )[ 0 ];\n\t\tthis.element = $( element );\n\t\tthis.uuid = widgetUuid++;\n\t\tthis.eventNamespace = \".\" + this.widgetName + this.uuid;\n\n\t\tthis.bindings = $();\n\t\tthis.hoverable = $();\n\t\tthis.focusable = $();\n\t\tthis.classesElementLookup = {};\n\n\t\tif ( element !== this ) {\n\t\t\t$.data( element, this.widgetFullName, this );\n\t\t\tthis._on( true, this.element, {\n\t\t\t\tremove: function( event ) {\n\t\t\t\t\tif ( event.target === element ) {\n\t\t\t\t\t\tthis.destroy();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t\tthis.document = $( element.style ?\n\n\t\t\t\t// Element within the document\n\t\t\t\telement.ownerDocument :\n\n\t\t\t\t// Element is window or document\n\t\t\t\telement.document || element );\n\t\t\tthis.window = $( this.document[ 0 ].defaultView || this.document[ 0 ].parentWindow );\n\t\t}\n\n\t\tthis.options = $.widget.extend( {},\n\t\t\tthis.options,\n\t\t\tthis._getCreateOptions(),\n\t\t\toptions );\n\n\t\tthis._create();\n\n\t\tif ( this.options.disabled ) {\n\t\t\tthis._setOptionDisabled( this.options.disabled );\n\t\t}\n\n\t\tthis._trigger( \"create\", null, this._getCreateEventData() );\n\t\tthis._init();\n\t},\n\n\t_getCreateOptions: function() {\n\t\treturn {};\n\t},\n\n\t_getCreateEventData: $.noop,\n\n\t_create: $.noop,\n\n\t_init: $.noop,\n\n\tdestroy: function() {\n\t\tvar that = this;\n\n\t\tthis._destroy();\n\t\t$.each( this.classesElementLookup, function( key, value ) {\n\t\t\tthat._removeClass( value, key );\n\t\t} );\n\n\t\t// We can probably remove the unbind calls in 2.0\n\t\t// all event bindings should go through this._on()\n\t\tthis.element\n\t\t\t.off( this.eventNamespace )\n\t\t\t.removeData( this.widgetFullName );\n\t\tthis.widget()\n\t\t\t.off( this.eventNamespace )\n\t\t\t.removeAttr( \"aria-disabled\" );\n\n\t\t// Clean up events and states\n\t\tthis.bindings.off( this.eventNamespace );\n\t},\n\n\t_destroy: $.noop,\n\n\twidget: function() {\n\t\treturn this.element;\n\t},\n\n\toption: function( key, value ) {\n\t\tvar options = key;\n\t\tvar parts;\n\t\tvar curOption;\n\t\tvar i;\n\n\t\tif ( arguments.length === 0 ) {\n\n\t\t\t// Don't return a reference to the internal hash\n\t\t\treturn $.widget.extend( {}, this.options );\n\t\t}\n\n\t\tif ( typeof key === \"string\" ) {\n\n\t\t\t// Handle nested keys, e.g., \"foo.bar\" => { foo: { bar: ___ } }\n\t\t\toptions = {};\n\t\t\tparts = key.split( \".\" );\n\t\t\tkey = parts.shift();\n\t\t\tif ( parts.length ) {\n\t\t\t\tcurOption = options[ key ] = $.widget.extend( {}, this.options[ key ] );\n\t\t\t\tfor ( i = 0; i < parts.length - 1; i++ ) {\n\t\t\t\t\tcurOption[ parts[ i ] ] = curOption[ parts[ i ] ] || {};\n\t\t\t\t\tcurOption = curOption[ parts[ i ] ];\n\t\t\t\t}\n\t\t\t\tkey = parts.pop();\n\t\t\t\tif ( arguments.length === 1 ) {\n\t\t\t\t\treturn curOption[ key ] === undefined ? null : curOption[ key ];\n\t\t\t\t}\n\t\t\t\tcurOption[ key ] = value;\n\t\t\t} else {\n\t\t\t\tif ( arguments.length === 1 ) {\n\t\t\t\t\treturn this.options[ key ] === undefined ? null : this.options[ key ];\n\t\t\t\t}\n\t\t\t\toptions[ key ] = value;\n\t\t\t}\n\t\t}\n\n\t\tthis._setOptions( options );\n\n\t\treturn this;\n\t},\n\n\t_setOptions: function( options ) {\n\t\tvar key;\n\n\t\tfor ( key in options ) {\n\t\t\tthis._setOption( key, options[ key ] );\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tif ( key === \"classes\" ) {\n\t\t\tthis._setOptionClasses( value );\n\t\t}\n\n\t\tthis.options[ key ] = value;\n\n\t\tif ( key === \"disabled\" ) {\n\t\t\tthis._setOptionDisabled( value );\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t_setOptionClasses: function( value ) {\n\t\tvar classKey, elements, currentElements;\n\n\t\tfor ( classKey in value ) {\n\t\t\tcurrentElements = this.classesElementLookup[ classKey ];\n\t\t\tif ( value[ classKey ] === this.options.classes[ classKey ] ||\n\t\t\t\t\t!currentElements ||\n\t\t\t\t\t!currentElements.length ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// We are doing this to create a new jQuery object because the _removeClass() call\n\t\t\t// on the next line is going to destroy the reference to the current elements being\n\t\t\t// tracked. We need to save a copy of this collection so that we can add the new classes\n\t\t\t// below.\n\t\t\telements = $( currentElements.get() );\n\t\t\tthis._removeClass( currentElements, classKey );\n\n\t\t\t// We don't use _addClass() here, because that uses this.options.classes\n\t\t\t// for generating the string of classes. We want to use the value passed in from\n\t\t\t// _setOption(), this is the new value of the classes option which was passed to\n\t\t\t// _setOption(). We pass this value directly to _classes().\n\t\t\telements.addClass( this._classes( {\n\t\t\t\telement: elements,\n\t\t\t\tkeys: classKey,\n\t\t\t\tclasses: value,\n\t\t\t\tadd: true\n\t\t\t} ) );\n\t\t}\n\t},\n\n\t_setOptionDisabled: function( value ) {\n\t\tthis._toggleClass( this.widget(), this.widgetFullName + \"-disabled\", null, !!value );\n\n\t\t// If the widget is becoming disabled, then nothing is interactive\n\t\tif ( value ) {\n\t\t\tthis._removeClass( this.hoverable, null, \"ui-state-hover\" );\n\t\t\tthis._removeClass( this.focusable, null, \"ui-state-focus\" );\n\t\t}\n\t},\n\n\tenable: function() {\n\t\treturn this._setOptions( { disabled: false } );\n\t},\n\n\tdisable: function() {\n\t\treturn this._setOptions( { disabled: true } );\n\t},\n\n\t_classes: function( options ) {\n\t\tvar full = [];\n\t\tvar that = this;\n\n\t\toptions = $.extend( {\n\t\t\telement: this.element,\n\t\t\tclasses: this.options.classes || {}\n\t\t}, options );\n\n\t\tfunction processClassString( classes, checkOption ) {\n\t\t\tvar current, i;\n\t\t\tfor ( i = 0; i < classes.length; i++ ) {\n\t\t\t\tcurrent = that.classesElementLookup[ classes[ i ] ] || $();\n\t\t\t\tif ( options.add ) {\n\t\t\t\t\tcurrent = $( $.unique( current.get().concat( options.element.get() ) ) );\n\t\t\t\t} else {\n\t\t\t\t\tcurrent = $( current.not( options.element ).get() );\n\t\t\t\t}\n\t\t\t\tthat.classesElementLookup[ classes[ i ] ] = current;\n\t\t\t\tfull.push( classes[ i ] );\n\t\t\t\tif ( checkOption && options.classes[ classes[ i ] ] ) {\n\t\t\t\t\tfull.push( options.classes[ classes[ i ] ] );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ( options.keys ) {\n\t\t\tprocessClassString( options.keys.match( /\\S+/g ) || [], true );\n\t\t}\n\t\tif ( options.extra ) {\n\t\t\tprocessClassString( options.extra.match( /\\S+/g ) || [] );\n\t\t}\n\n\t\treturn full.join( \" \" );\n\t},\n\n\t_removeClass: function( element, keys, extra ) {\n\t\treturn this._toggleClass( element, keys, extra, false );\n\t},\n\n\t_addClass: function( element, keys, extra ) {\n\t\treturn this._toggleClass( element, keys, extra, true );\n\t},\n\n\t_toggleClass: function( element, keys, extra, add ) {\n\t\tadd = ( typeof add === \"boolean\" ) ? add : extra;\n\t\tvar shift = ( typeof element === \"string\" || element === null ),\n\t\t\toptions = {\n\t\t\t\textra: shift ? keys : extra,\n\t\t\t\tkeys: shift ? element : keys,\n\t\t\t\telement: shift ? this.element : element,\n\t\t\t\tadd: add\n\t\t\t};\n\t\toptions.element.toggleClass( this._classes( options ), add );\n\t\treturn this;\n\t},\n\n\t_on: function( suppressDisabledCheck, element, handlers ) {\n\t\tvar delegateElement;\n\t\tvar instance = this;\n\n\t\t// No suppressDisabledCheck flag, shuffle arguments\n\t\tif ( typeof suppressDisabledCheck !== \"boolean\" ) {\n\t\t\thandlers = element;\n\t\t\telement = suppressDisabledCheck;\n\t\t\tsuppressDisabledCheck = false;\n\t\t}\n\n\t\t// No element argument, shuffle and use this.element\n\t\tif ( !handlers ) {\n\t\t\thandlers = element;\n\t\t\telement = this.element;\n\t\t\tdelegateElement = this.widget();\n\t\t} else {\n\t\t\telement = delegateElement = $( element );\n\t\t\tthis.bindings = this.bindings.add( element );\n\t\t}\n\n\t\t$.each( handlers, function( event, handler ) {\n\t\t\tfunction handlerProxy() {\n\n\t\t\t\t// Allow widgets to customize the disabled handling\n\t\t\t\t// - disabled as an array instead of boolean\n\t\t\t\t// - disabled class as method for disabling individual parts\n\t\t\t\tif ( !suppressDisabledCheck &&\n\t\t\t\t\t\t( instance.options.disabled === true ||\n\t\t\t\t\t\t$( this ).hasClass( \"ui-state-disabled\" ) ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\treturn ( typeof handler === \"string\" ? instance[ handler ] : handler )\n\t\t\t\t\t.apply( instance, arguments );\n\t\t\t}\n\n\t\t\t// Copy the guid so direct unbinding works\n\t\t\tif ( typeof handler !== \"string\" ) {\n\t\t\t\thandlerProxy.guid = handler.guid =\n\t\t\t\t\thandler.guid || handlerProxy.guid || $.guid++;\n\t\t\t}\n\n\t\t\tvar match = event.match( /^([\\w:-]*)\\s*(.*)$/ );\n\t\t\tvar eventName = match[ 1 ] + instance.eventNamespace;\n\t\t\tvar selector = match[ 2 ];\n\n\t\t\tif ( selector ) {\n\t\t\t\tdelegateElement.on( eventName, selector, handlerProxy );\n\t\t\t} else {\n\t\t\t\telement.on( eventName, handlerProxy );\n\t\t\t}\n\t\t} );\n\t},\n\n\t_off: function( element, eventName ) {\n\t\teventName = ( eventName || \"\" ).split( \" \" ).join( this.eventNamespace + \" \" ) +\n\t\t\tthis.eventNamespace;\n\t\telement.off( eventName ).off( eventName );\n\n\t\t// Clear the stack to avoid memory leaks (#10056)\n\t\tthis.bindings = $( this.bindings.not( element ).get() );\n\t\tthis.focusable = $( this.focusable.not( element ).get() );\n\t\tthis.hoverable = $( this.hoverable.not( element ).get() );\n\t},\n\n\t_delay: function( handler, delay ) {\n\t\tfunction handlerProxy() {\n\t\t\treturn ( typeof handler === \"string\" ? instance[ handler ] : handler )\n\t\t\t\t.apply( instance, arguments );\n\t\t}\n\t\tvar instance = this;\n\t\treturn setTimeout( handlerProxy, delay || 0 );\n\t},\n\n\t_hoverable: function( element ) {\n\t\tthis.hoverable = this.hoverable.add( element );\n\t\tthis._on( element, {\n\t\t\tmouseenter: function( event ) {\n\t\t\t\tthis._addClass( $( event.currentTarget ), null, \"ui-state-hover\" );\n\t\t\t},\n\t\t\tmouseleave: function( event ) {\n\t\t\t\tthis._removeClass( $( event.currentTarget ), null, \"ui-state-hover\" );\n\t\t\t}\n\t\t} );\n\t},\n\n\t_focusable: function( element ) {\n\t\tthis.focusable = this.focusable.add( element );\n\t\tthis._on( element, {\n\t\t\tfocusin: function( event ) {\n\t\t\t\tthis._addClass( $( event.currentTarget ), null, \"ui-state-focus\" );\n\t\t\t},\n\t\t\tfocusout: function( event ) {\n\t\t\t\tthis._removeClass( $( event.currentTarget ), null, \"ui-state-focus\" );\n\t\t\t}\n\t\t} );\n\t},\n\n\t_trigger: function( type, event, data ) {\n\t\tvar prop, orig;\n\t\tvar callback = this.options[ type ];\n\n\t\tdata = data || {};\n\t\tevent = $.Event( event );\n\t\tevent.type = ( type === this.widgetEventPrefix ?\n\t\t\ttype :\n\t\t\tthis.widgetEventPrefix + type ).toLowerCase();\n\n\t\t// The original event may come from any element\n\t\t// so we need to reset the target on the new event\n\t\tevent.target = this.element[ 0 ];\n\n\t\t// Copy original event properties over to the new event\n\t\torig = event.originalEvent;\n\t\tif ( orig ) {\n\t\t\tfor ( prop in orig ) {\n\t\t\t\tif ( !( prop in event ) ) {\n\t\t\t\t\tevent[ prop ] = orig[ prop ];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.element.trigger( event, data );\n\t\treturn !( $.isFunction( callback ) &&\n\t\t\tcallback.apply( this.element[ 0 ], [ event ].concat( data ) ) === false ||\n\t\t\tevent.isDefaultPrevented() );\n\t}\n};\n\n$.each( { show: \"fadeIn\", hide: \"fadeOut\" }, function( method, defaultEffect ) {\n\t$.Widget.prototype[ \"_\" + method ] = function( element, options, callback ) {\n\t\tif ( typeof options === \"string\" ) {\n\t\t\toptions = { effect: options };\n\t\t}\n\n\t\tvar hasOptions;\n\t\tvar effectName = !options ?\n\t\t\tmethod :\n\t\t\toptions === true || typeof options === \"number\" ?\n\t\t\t\tdefaultEffect :\n\t\t\t\toptions.effect || defaultEffect;\n\n\t\toptions = options || {};\n\t\tif ( typeof options === \"number\" ) {\n\t\t\toptions = { duration: options };\n\t\t}\n\n\t\thasOptions = !$.isEmptyObject( options );\n\t\toptions.complete = callback;\n\n\t\tif ( options.delay ) {\n\t\t\telement.delay( options.delay );\n\t\t}\n\n\t\tif ( hasOptions && $.effects && $.effects.effect[ effectName ] ) {\n\t\t\telement[ method ]( options );\n\t\t} else if ( effectName !== method && element[ effectName ] ) {\n\t\t\telement[ effectName ]( options.duration, options.easing, callback );\n\t\t} else {\n\t\t\telement.queue( function( next ) {\n\t\t\t\t$( this )[ method ]();\n\t\t\t\tif ( callback ) {\n\t\t\t\t\tcallback.call( element[ 0 ] );\n\t\t\t\t}\n\t\t\t\tnext();\n\t\t\t} );\n\t\t}\n\t};\n} );\n\nvar widget = $.widget;\n\n\n/*!\n * jQuery UI Position 1.12.0\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/position/\n */\n\n//>>label: Position\n//>>group: Core\n//>>description: Positions elements relative to other elements.\n//>>docs: http://api.jqueryui.com/position/\n//>>demos: http://jqueryui.com/position/\n\n\n( function() {\nvar cachedScrollbarWidth, supportsOffsetFractions,\n\tmax = Math.max,\n\tabs = Math.abs,\n\tround = Math.round,\n\trhorizontal = /left|center|right/,\n\trvertical = /top|center|bottom/,\n\troffset = /[\\+\\-]\\d+(\\.[\\d]+)?%?/,\n\trposition = /^\\w+/,\n\trpercent = /%$/,\n\t_position = $.fn.position;\n\n// Support: IE <=9 only\nsupportsOffsetFractions = function() {\n\tvar element = $( \"<div>\" )\n\t\t\t.css( \"position\", \"absolute\" )\n\t\t\t.appendTo( \"body\" )\n\t\t\t.offset( {\n\t\t\t\ttop: 1.5,\n\t\t\t\tleft: 1.5\n\t\t\t} ),\n\t\tsupport = element.offset().top === 1.5;\n\n\telement.remove();\n\n\tsupportsOffsetFractions = function() {\n\t\treturn support;\n\t};\n\n\treturn support;\n};\n\nfunction getOffsets( offsets, width, height ) {\n\treturn [\n\t\tparseFloat( offsets[ 0 ] ) * ( rpercent.test( offsets[ 0 ] ) ? width / 100 : 1 ),\n\t\tparseFloat( offsets[ 1 ] ) * ( rpercent.test( offsets[ 1 ] ) ? height / 100 : 1 )\n\t];\n}\n\nfunction parseCss( element, property ) {\n\treturn parseInt( $.css( element, property ), 10 ) || 0;\n}\n\nfunction getDimensions( elem ) {\n\tvar raw = elem[ 0 ];\n\tif ( raw.nodeType === 9 ) {\n\t\treturn {\n\t\t\twidth: elem.width(),\n\t\t\theight: elem.height(),\n\t\t\toffset: { top: 0, left: 0 }\n\t\t};\n\t}\n\tif ( $.isWindow( raw ) ) {\n\t\treturn {\n\t\t\twidth: elem.width(),\n\t\t\theight: elem.height(),\n\t\t\toffset: { top: elem.scrollTop(), left: elem.scrollLeft() }\n\t\t};\n\t}\n\tif ( raw.preventDefault ) {\n\t\treturn {\n\t\t\twidth: 0,\n\t\t\theight: 0,\n\t\t\toffset: { top: raw.pageY, left: raw.pageX }\n\t\t};\n\t}\n\treturn {\n\t\twidth: elem.outerWidth(),\n\t\theight: elem.outerHeight(),\n\t\toffset: elem.offset()\n\t};\n}\n\n$.position = {\n\tscrollbarWidth: function() {\n\t\tif ( cachedScrollbarWidth !== undefined ) {\n\t\t\treturn cachedScrollbarWidth;\n\t\t}\n\t\tvar w1, w2,\n\t\t\tdiv = $( \"<div \" +\n\t\t\t\t\"style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'>\" +\n\t\t\t\t\"<div style='height:100px;width:auto;'></div></div>\" ),\n\t\t\tinnerDiv = div.children()[ 0 ];\n\n\t\t$( \"body\" ).append( div );\n\t\tw1 = innerDiv.offsetWidth;\n\t\tdiv.css( \"overflow\", \"scroll\" );\n\n\t\tw2 = innerDiv.offsetWidth;\n\n\t\tif ( w1 === w2 ) {\n\t\t\tw2 = div[ 0 ].clientWidth;\n\t\t}\n\n\t\tdiv.remove();\n\n\t\treturn ( cachedScrollbarWidth = w1 - w2 );\n\t},\n\tgetScrollInfo: function( within ) {\n\t\tvar overflowX = within.isWindow || within.isDocument ? \"\" :\n\t\t\t\twithin.element.css( \"overflow-x\" ),\n\t\t\toverflowY = within.isWindow || within.isDocument ? \"\" :\n\t\t\t\twithin.element.css( \"overflow-y\" ),\n\t\t\thasOverflowX = overflowX === \"scroll\" ||\n\t\t\t\t( overflowX === \"auto\" && within.width < within.element[ 0 ].scrollWidth ),\n\t\t\thasOverflowY = overflowY === \"scroll\" ||\n\t\t\t\t( overflowY === \"auto\" && within.height < within.element[ 0 ].scrollHeight );\n\t\treturn {\n\t\t\twidth: hasOverflowY ? $.position.scrollbarWidth() : 0,\n\t\t\theight: hasOverflowX ? $.position.scrollbarWidth() : 0\n\t\t};\n\t},\n\tgetWithinInfo: function( element ) {\n\t\tvar withinElement = $( element || window ),\n\t\t\tisWindow = $.isWindow( withinElement[ 0 ] ),\n\t\t\tisDocument = !!withinElement[ 0 ] && withinElement[ 0 ].nodeType === 9,\n\t\t\thasOffset = !isWindow && !isDocument;\n\t\treturn {\n\t\t\telement: withinElement,\n\t\t\tisWindow: isWindow,\n\t\t\tisDocument: isDocument,\n\t\t\toffset: hasOffset ? $( element ).offset() : { left: 0, top: 0 },\n\t\t\tscrollLeft: withinElement.scrollLeft(),\n\t\t\tscrollTop: withinElement.scrollTop(),\n\t\t\twidth: withinElement.outerWidth(),\n\t\t\theight: withinElement.outerHeight()\n\t\t};\n\t}\n};\n\n$.fn.position = function( options ) {\n\tif ( !options || !options.of ) {\n\t\treturn _position.apply( this, arguments );\n\t}\n\n\t// Make a copy, we don't want to modify arguments\n\toptions = $.extend( {}, options );\n\n\tvar atOffset, targetWidth, targetHeight, targetOffset, basePosition, dimensions,\n\t\ttarget = $( options.of ),\n\t\twithin = $.position.getWithinInfo( options.within ),\n\t\tscrollInfo = $.position.getScrollInfo( within ),\n\t\tcollision = ( options.collision || \"flip\" ).split( \" \" ),\n\t\toffsets = {};\n\n\tdimensions = getDimensions( target );\n\tif ( target[ 0 ].preventDefault ) {\n\n\t\t// Force left top to allow flipping\n\t\toptions.at = \"left top\";\n\t}\n\ttargetWidth = dimensions.width;\n\ttargetHeight = dimensions.height;\n\ttargetOffset = dimensions.offset;\n\n\t// Clone to reuse original targetOffset later\n\tbasePosition = $.extend( {}, targetOffset );\n\n\t// Force my and at to have valid horizontal and vertical positions\n\t// if a value is missing or invalid, it will be converted to center\n\t$.each( [ \"my\", \"at\" ], function() {\n\t\tvar pos = ( options[ this ] || \"\" ).split( \" \" ),\n\t\t\thorizontalOffset,\n\t\t\tverticalOffset;\n\n\t\tif ( pos.length === 1 ) {\n\t\t\tpos = rhorizontal.test( pos[ 0 ] ) ?\n\t\t\t\tpos.concat( [ \"center\" ] ) :\n\t\t\t\trvertical.test( pos[ 0 ] ) ?\n\t\t\t\t\t[ \"center\" ].concat( pos ) :\n\t\t\t\t\t[ \"center\", \"center\" ];\n\t\t}\n\t\tpos[ 0 ] = rhorizontal.test( pos[ 0 ] ) ? pos[ 0 ] : \"center\";\n\t\tpos[ 1 ] = rvertical.test( pos[ 1 ] ) ? pos[ 1 ] : \"center\";\n\n\t\t// Calculate offsets\n\t\thorizontalOffset = roffset.exec( pos[ 0 ] );\n\t\tverticalOffset = roffset.exec( pos[ 1 ] );\n\t\toffsets[ this ] = [\n\t\t\thorizontalOffset ? horizontalOffset[ 0 ] : 0,\n\t\t\tverticalOffset ? verticalOffset[ 0 ] : 0\n\t\t];\n\n\t\t// Reduce to just the positions without the offsets\n\t\toptions[ this ] = [\n\t\t\trposition.exec( pos[ 0 ] )[ 0 ],\n\t\t\trposition.exec( pos[ 1 ] )[ 0 ]\n\t\t];\n\t} );\n\n\t// Normalize collision option\n\tif ( collision.length === 1 ) {\n\t\tcollision[ 1 ] = collision[ 0 ];\n\t}\n\n\tif ( options.at[ 0 ] === \"right\" ) {\n\t\tbasePosition.left += targetWidth;\n\t} else if ( options.at[ 0 ] === \"center\" ) {\n\t\tbasePosition.left += targetWidth / 2;\n\t}\n\n\tif ( options.at[ 1 ] === \"bottom\" ) {\n\t\tbasePosition.top += targetHeight;\n\t} else if ( options.at[ 1 ] === \"center\" ) {\n\t\tbasePosition.top += targetHeight / 2;\n\t}\n\n\tatOffset = getOffsets( offsets.at, targetWidth, targetHeight );\n\tbasePosition.left += atOffset[ 0 ];\n\tbasePosition.top += atOffset[ 1 ];\n\n\treturn this.each( function() {\n\t\tvar collisionPosition, using,\n\t\t\telem = $( this ),\n\t\t\telemWidth = elem.outerWidth(),\n\t\t\telemHeight = elem.outerHeight(),\n\t\t\tmarginLeft = parseCss( this, \"marginLeft\" ),\n\t\t\tmarginTop = parseCss( this, \"marginTop\" ),\n\t\t\tcollisionWidth = elemWidth + marginLeft + parseCss( this, \"marginRight\" ) +\n\t\t\t\tscrollInfo.width,\n\t\t\tcollisionHeight = elemHeight + marginTop + parseCss( this, \"marginBottom\" ) +\n\t\t\t\tscrollInfo.height,\n\t\t\tposition = $.extend( {}, basePosition ),\n\t\t\tmyOffset = getOffsets( offsets.my, elem.outerWidth(), elem.outerHeight() );\n\n\t\tif ( options.my[ 0 ] === \"right\" ) {\n\t\t\tposition.left -= elemWidth;\n\t\t} else if ( options.my[ 0 ] === \"center\" ) {\n\t\t\tposition.left -= elemWidth / 2;\n\t\t}\n\n\t\tif ( options.my[ 1 ] === \"bottom\" ) {\n\t\t\tposition.top -= elemHeight;\n\t\t} else if ( options.my[ 1 ] === \"center\" ) {\n\t\t\tposition.top -= elemHeight / 2;\n\t\t}\n\n\t\tposition.left += myOffset[ 0 ];\n\t\tposition.top += myOffset[ 1 ];\n\n\t\t// If the browser doesn't support fractions, then round for consistent results\n\t\tif ( !supportsOffsetFractions() ) {\n\t\t\tposition.left = round( position.left );\n\t\t\tposition.top = round( position.top );\n\t\t}\n\n\t\tcollisionPosition = {\n\t\t\tmarginLeft: marginLeft,\n\t\t\tmarginTop: marginTop\n\t\t};\n\n\t\t$.each( [ \"left\", \"top\" ], function( i, dir ) {\n\t\t\tif ( $.ui.position[ collision[ i ] ] ) {\n\t\t\t\t$.ui.position[ collision[ i ] ][ dir ]( position, {\n\t\t\t\t\ttargetWidth: targetWidth,\n\t\t\t\t\ttargetHeight: targetHeight,\n\t\t\t\t\telemWidth: elemWidth,\n\t\t\t\t\telemHeight: elemHeight,\n\t\t\t\t\tcollisionPosition: collisionPosition,\n\t\t\t\t\tcollisionWidth: collisionWidth,\n\t\t\t\t\tcollisionHeight: collisionHeight,\n\t\t\t\t\toffset: [ atOffset[ 0 ] + myOffset[ 0 ], atOffset [ 1 ] + myOffset[ 1 ] ],\n\t\t\t\t\tmy: options.my,\n\t\t\t\t\tat: options.at,\n\t\t\t\t\twithin: within,\n\t\t\t\t\telem: elem\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\n\t\tif ( options.using ) {\n\n\t\t\t// Adds feedback as second argument to using callback, if present\n\t\t\tusing = function( props ) {\n\t\t\t\tvar left = targetOffset.left - position.left,\n\t\t\t\t\tright = left + targetWidth - elemWidth,\n\t\t\t\t\ttop = targetOffset.top - position.top,\n\t\t\t\t\tbottom = top + targetHeight - elemHeight,\n\t\t\t\t\tfeedback = {\n\t\t\t\t\t\ttarget: {\n\t\t\t\t\t\t\telement: target,\n\t\t\t\t\t\t\tleft: targetOffset.left,\n\t\t\t\t\t\t\ttop: targetOffset.top,\n\t\t\t\t\t\t\twidth: targetWidth,\n\t\t\t\t\t\t\theight: targetHeight\n\t\t\t\t\t\t},\n\t\t\t\t\t\telement: {\n\t\t\t\t\t\t\telement: elem,\n\t\t\t\t\t\t\tleft: position.left,\n\t\t\t\t\t\t\ttop: position.top,\n\t\t\t\t\t\t\twidth: elemWidth,\n\t\t\t\t\t\t\theight: elemHeight\n\t\t\t\t\t\t},\n\t\t\t\t\t\thorizontal: right < 0 ? \"left\" : left > 0 ? \"right\" : \"center\",\n\t\t\t\t\t\tvertical: bottom < 0 ? \"top\" : top > 0 ? \"bottom\" : \"middle\"\n\t\t\t\t\t};\n\t\t\t\tif ( targetWidth < elemWidth && abs( left + right ) < targetWidth ) {\n\t\t\t\t\tfeedback.horizontal = \"center\";\n\t\t\t\t}\n\t\t\t\tif ( targetHeight < elemHeight && abs( top + bottom ) < targetHeight ) {\n\t\t\t\t\tfeedback.vertical = \"middle\";\n\t\t\t\t}\n\t\t\t\tif ( max( abs( left ), abs( right ) ) > max( abs( top ), abs( bottom ) ) ) {\n\t\t\t\t\tfeedback.important = \"horizontal\";\n\t\t\t\t} else {\n\t\t\t\t\tfeedback.important = \"vertical\";\n\t\t\t\t}\n\t\t\t\toptions.using.call( this, props, feedback );\n\t\t\t};\n\t\t}\n\n\t\telem.offset( $.extend( position, { using: using } ) );\n\t} );\n};\n\n$.ui.position = {\n\tfit: {\n\t\tleft: function( position, data ) {\n\t\t\tvar within = data.within,\n\t\t\t\twithinOffset = within.isWindow ? within.scrollLeft : within.offset.left,\n\t\t\t\touterWidth = within.width,\n\t\t\t\tcollisionPosLeft = position.left - data.collisionPosition.marginLeft,\n\t\t\t\toverLeft = withinOffset - collisionPosLeft,\n\t\t\t\toverRight = collisionPosLeft + data.collisionWidth - outerWidth - withinOffset,\n\t\t\t\tnewOverRight;\n\n\t\t\t// Element is wider than within\n\t\t\tif ( data.collisionWidth > outerWidth ) {\n\n\t\t\t\t// Element is initially over the left side of within\n\t\t\t\tif ( overLeft > 0 && overRight <= 0 ) {\n\t\t\t\t\tnewOverRight = position.left + overLeft + data.collisionWidth - outerWidth -\n\t\t\t\t\t\twithinOffset;\n\t\t\t\t\tposition.left += overLeft - newOverRight;\n\n\t\t\t\t// Element is initially over right side of within\n\t\t\t\t} else if ( overRight > 0 && overLeft <= 0 ) {\n\t\t\t\t\tposition.left = withinOffset;\n\n\t\t\t\t// Element is initially over both left and right sides of within\n\t\t\t\t} else {\n\t\t\t\t\tif ( overLeft > overRight ) {\n\t\t\t\t\t\tposition.left = withinOffset + outerWidth - data.collisionWidth;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tposition.left = withinOffset;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t// Too far left -> align with left edge\n\t\t\t} else if ( overLeft > 0 ) {\n\t\t\t\tposition.left += overLeft;\n\n\t\t\t// Too far right -> align with right edge\n\t\t\t} else if ( overRight > 0 ) {\n\t\t\t\tposition.left -= overRight;\n\n\t\t\t// Adjust based on position and margin\n\t\t\t} else {\n\t\t\t\tposition.left = max( position.left - collisionPosLeft, position.left );\n\t\t\t}\n\t\t},\n\t\ttop: function( position, data ) {\n\t\t\tvar within = data.within,\n\t\t\t\twithinOffset = within.isWindow ? within.scrollTop : within.offset.top,\n\t\t\t\touterHeight = data.within.height,\n\t\t\t\tcollisionPosTop = position.top - data.collisionPosition.marginTop,\n\t\t\t\toverTop = withinOffset - collisionPosTop,\n\t\t\t\toverBottom = collisionPosTop + data.collisionHeight - outerHeight - withinOffset,\n\t\t\t\tnewOverBottom;\n\n\t\t\t// Element is taller than within\n\t\t\tif ( data.collisionHeight > outerHeight ) {\n\n\t\t\t\t// Element is initially over the top of within\n\t\t\t\tif ( overTop > 0 && overBottom <= 0 ) {\n\t\t\t\t\tnewOverBottom = position.top + overTop + data.collisionHeight - outerHeight -\n\t\t\t\t\t\twithinOffset;\n\t\t\t\t\tposition.top += overTop - newOverBottom;\n\n\t\t\t\t// Element is initially over bottom of within\n\t\t\t\t} else if ( overBottom > 0 && overTop <= 0 ) {\n\t\t\t\t\tposition.top = withinOffset;\n\n\t\t\t\t// Element is initially over both top and bottom of within\n\t\t\t\t} else {\n\t\t\t\t\tif ( overTop > overBottom ) {\n\t\t\t\t\t\tposition.top = withinOffset + outerHeight - data.collisionHeight;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tposition.top = withinOffset;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t// Too far up -> align with top\n\t\t\t} else if ( overTop > 0 ) {\n\t\t\t\tposition.top += overTop;\n\n\t\t\t// Too far down -> align with bottom edge\n\t\t\t} else if ( overBottom > 0 ) {\n\t\t\t\tposition.top -= overBottom;\n\n\t\t\t// Adjust based on position and margin\n\t\t\t} else {\n\t\t\t\tposition.top = max( position.top - collisionPosTop, position.top );\n\t\t\t}\n\t\t}\n\t},\n\tflip: {\n\t\tleft: function( position, data ) {\n\t\t\tvar within = data.within,\n\t\t\t\twithinOffset = within.offset.left + within.scrollLeft,\n\t\t\t\touterWidth = within.width,\n\t\t\t\toffsetLeft = within.isWindow ? within.scrollLeft : within.offset.left,\n\t\t\t\tcollisionPosLeft = position.left - data.collisionPosition.marginLeft,\n\t\t\t\toverLeft = collisionPosLeft - offsetLeft,\n\t\t\t\toverRight = collisionPosLeft + data.collisionWidth - outerWidth - offsetLeft,\n\t\t\t\tmyOffset = data.my[ 0 ] === \"left\" ?\n\t\t\t\t\t-data.elemWidth :\n\t\t\t\t\tdata.my[ 0 ] === \"right\" ?\n\t\t\t\t\t\tdata.elemWidth :\n\t\t\t\t\t\t0,\n\t\t\t\tatOffset = data.at[ 0 ] === \"left\" ?\n\t\t\t\t\tdata.targetWidth :\n\t\t\t\t\tdata.at[ 0 ] === \"right\" ?\n\t\t\t\t\t\t-data.targetWidth :\n\t\t\t\t\t\t0,\n\t\t\t\toffset = -2 * data.offset[ 0 ],\n\t\t\t\tnewOverRight,\n\t\t\t\tnewOverLeft;\n\n\t\t\tif ( overLeft < 0 ) {\n\t\t\t\tnewOverRight = position.left + myOffset + atOffset + offset + data.collisionWidth -\n\t\t\t\t\touterWidth - withinOffset;\n\t\t\t\tif ( newOverRight < 0 || newOverRight < abs( overLeft ) ) {\n\t\t\t\t\tposition.left += myOffset + atOffset + offset;\n\t\t\t\t}\n\t\t\t} else if ( overRight > 0 ) {\n\t\t\t\tnewOverLeft = position.left - data.collisionPosition.marginLeft + myOffset +\n\t\t\t\t\tatOffset + offset - offsetLeft;\n\t\t\t\tif ( newOverLeft > 0 || abs( newOverLeft ) < overRight ) {\n\t\t\t\t\tposition.left += myOffset + atOffset + offset;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\ttop: function( position, data ) {\n\t\t\tvar within = data.within,\n\t\t\t\twithinOffset = within.offset.top + within.scrollTop,\n\t\t\t\touterHeight = within.height,\n\t\t\t\toffsetTop = within.isWindow ? within.scrollTop : within.offset.top,\n\t\t\t\tcollisionPosTop = position.top - data.collisionPosition.marginTop,\n\t\t\t\toverTop = collisionPosTop - offsetTop,\n\t\t\t\toverBottom = collisionPosTop + data.collisionHeight - outerHeight - offsetTop,\n\t\t\t\ttop = data.my[ 1 ] === \"top\",\n\t\t\t\tmyOffset = top ?\n\t\t\t\t\t-data.elemHeight :\n\t\t\t\t\tdata.my[ 1 ] === \"bottom\" ?\n\t\t\t\t\t\tdata.elemHeight :\n\t\t\t\t\t\t0,\n\t\t\t\tatOffset = data.at[ 1 ] === \"top\" ?\n\t\t\t\t\tdata.targetHeight :\n\t\t\t\t\tdata.at[ 1 ] === \"bottom\" ?\n\t\t\t\t\t\t-data.targetHeight :\n\t\t\t\t\t\t0,\n\t\t\t\toffset = -2 * data.offset[ 1 ],\n\t\t\t\tnewOverTop,\n\t\t\t\tnewOverBottom;\n\t\t\tif ( overTop < 0 ) {\n\t\t\t\tnewOverBottom = position.top + myOffset + atOffset + offset + data.collisionHeight -\n\t\t\t\t\touterHeight - withinOffset;\n\t\t\t\tif ( newOverBottom < 0 || newOverBottom < abs( overTop ) ) {\n\t\t\t\t\tposition.top += myOffset + atOffset + offset;\n\t\t\t\t}\n\t\t\t} else if ( overBottom > 0 ) {\n\t\t\t\tnewOverTop = position.top - data.collisionPosition.marginTop + myOffset + atOffset +\n\t\t\t\t\toffset - offsetTop;\n\t\t\t\tif ( newOverTop > 0 || abs( newOverTop ) < overBottom ) {\n\t\t\t\t\tposition.top += myOffset + atOffset + offset;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tflipfit: {\n\t\tleft: function() {\n\t\t\t$.ui.position.flip.left.apply( this, arguments );\n\t\t\t$.ui.position.fit.left.apply( this, arguments );\n\t\t},\n\t\ttop: function() {\n\t\t\t$.ui.position.flip.top.apply( this, arguments );\n\t\t\t$.ui.position.fit.top.apply( this, arguments );\n\t\t}\n\t}\n};\n\n} )();\n\nvar position = $.ui.position;\n\n\n\n\n// Support: IE8 Only\n// IE8 does not support the form attribute and when it is supplied. It overwrites the form prop\n// with a string, so we need to find the proper form.\nvar form = $.fn.form = function() {\n\treturn typeof this[ 0 ].form === \"string\" ? this.closest( \"form\" ) : $( this[ 0 ].form );\n};\n\n\n/*!\n * jQuery UI Form Reset Mixin 1.12.0\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: Form Reset Mixin\n//>>group: Core\n//>>description: Refresh input widgets when their form is reset\n//>>docs: http://api.jqueryui.com/form-reset-mixin/\n\n\n\nvar formResetMixin = $.ui.formResetMixin = {\n\t_formResetHandler: function() {\n\t\tvar form = $( this );\n\n\t\t// Wait for the form reset to actually happen before refreshing\n\t\tsetTimeout( function() {\n\t\t\tvar instances = form.data( \"ui-form-reset-instances\" );\n\t\t\t$.each( instances, function() {\n\t\t\t\tthis.refresh();\n\t\t\t} );\n\t\t} );\n\t},\n\n\t_bindFormResetHandler: function() {\n\t\tthis.form = this.element.form();\n\t\tif ( !this.form.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar instances = this.form.data( \"ui-form-reset-instances\" ) || [];\n\t\tif ( !instances.length ) {\n\n\t\t\t// We don't use _on() here because we use a single event handler per form\n\t\t\tthis.form.on( \"reset.ui-form-reset\", this._formResetHandler );\n\t\t}\n\t\tinstances.push( this );\n\t\tthis.form.data( \"ui-form-reset-instances\", instances );\n\t},\n\n\t_unbindFormResetHandler: function() {\n\t\tif ( !this.form.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar instances = this.form.data( \"ui-form-reset-instances\" );\n\t\tinstances.splice( $.inArray( this, instances ), 1 );\n\t\tif ( instances.length ) {\n\t\t\tthis.form.data( \"ui-form-reset-instances\", instances );\n\t\t} else {\n\t\t\tthis.form\n\t\t\t\t.removeData( \"ui-form-reset-instances\" )\n\t\t\t\t.off( \"reset.ui-form-reset\" );\n\t\t}\n\t}\n};\n\n\n/*!\n * jQuery UI Keycode 1.12.0\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: Keycode\n//>>group: Core\n//>>description: Provide keycodes as keynames\n//>>docs: http://api.jqueryui.com/jQuery.ui.keyCode/\n\n\nvar keycode = $.ui.keyCode = {\n\tBACKSPACE: 8,\n\tCOMMA: 188,\n\tDELETE: 46,\n\tDOWN: 40,\n\tEND: 35,\n\tENTER: 13,\n\tESCAPE: 27,\n\tHOME: 36,\n\tLEFT: 37,\n\tPAGE_DOWN: 34,\n\tPAGE_UP: 33,\n\tPERIOD: 190,\n\tRIGHT: 39,\n\tSPACE: 32,\n\tTAB: 9,\n\tUP: 38\n};\n\n\n\n\n// Internal use only\nvar escapeSelector = $.ui.escapeSelector = ( function() {\n\tvar selectorEscape = /([!\"#$%&'()*+,./:;<=>?@[\\]^`{|}~])/g;\n\treturn function( selector ) {\n\t\treturn selector.replace( selectorEscape, \"\\\\$1\" );\n\t};\n} )();\n\n\n/*!\n * jQuery UI Labels 1.12.0\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: labels\n//>>group: Core\n//>>description: Find all the labels associated with a given input\n//>>docs: http://api.jqueryui.com/labels/\n\n\n\nvar labels = $.fn.labels = function() {\n\tvar ancestor, selector, id, labels, ancestors;\n\n\t// Check control.labels first\n\tif ( this[ 0 ].labels && this[ 0 ].labels.length ) {\n\t\treturn this.pushStack( this[ 0 ].labels );\n\t}\n\n\t// Support: IE <= 11, FF <= 37, Android <= 2.3 only\n\t// Above browsers do not support control.labels. Everything below is to support them\n\t// as well as document fragments. control.labels does not work on document fragments\n\tlabels = this.eq( 0 ).parents( \"label\" );\n\n\t// Look for the label based on the id\n\tid = this.attr( \"id\" );\n\tif ( id ) {\n\n\t\t// We don't search against the document in case the element\n\t\t// is disconnected from the DOM\n\t\tancestor = this.eq( 0 ).parents().last();\n\n\t\t// Get a full set of top level ancestors\n\t\tancestors = ancestor.add( ancestor.length ? ancestor.siblings() : this.siblings() );\n\n\t\t// Create a selector for the label based on the id\n\t\tselector = \"label[for='\" + $.ui.escapeSelector( id ) + \"']\";\n\n\t\tlabels = labels.add( ancestors.find( selector ).addBack( selector ) );\n\n\t}\n\n\t// Return whatever we have found for labels\n\treturn this.pushStack( labels );\n};\n\n\n/*!\n * jQuery UI Unique ID 1.12.0\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: uniqueId\n//>>group: Core\n//>>description: Functions to generate and remove uniqueId's\n//>>docs: http://api.jqueryui.com/uniqueId/\n\n\n\nvar uniqueId = $.fn.extend( {\n\tuniqueId: ( function() {\n\t\tvar uuid = 0;\n\n\t\treturn function() {\n\t\t\treturn this.each( function() {\n\t\t\t\tif ( !this.id ) {\n\t\t\t\t\tthis.id = \"ui-id-\" + ( ++uuid );\n\t\t\t\t}\n\t\t\t} );\n\t\t};\n\t} )(),\n\n\tremoveUniqueId: function() {\n\t\treturn this.each( function() {\n\t\t\tif ( /^ui-id-\\d+$/.test( this.id ) ) {\n\t\t\t\t$( this ).removeAttr( \"id\" );\n\t\t\t}\n\t\t} );\n\t}\n} );\n\n\n/*!\n * jQuery UI Controlgroup 1.12.0\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: Controlgroup\n//>>group: Widgets\n//>>description: Visually groups form control widgets\n//>>docs: http://api.jqueryui.com/controlgroup/\n//>>demos: http://jqueryui.com/controlgroup/\n//>>css.structure: ../../themes/base/core.css\n//>>css.structure: ../../themes/base/controlgroup.css\n//>>css.theme: ../../themes/base/theme.css\n\n\nvar controlgroupCornerRegex = /ui-corner-([a-z]){2,6}/g;\n\nvar widgetsControlgroup = $.widget( \"ui.controlgroup\", {\n\tversion: \"1.12.0\",\n\tdefaultElement: \"<div>\",\n\toptions: {\n\t\tdirection: \"horizontal\",\n\t\tdisabled: null,\n\t\tonlyVisible: true,\n\t\titems: {\n\t\t\t\"button\": \"input[type=button], input[type=submit], input[type=reset], button, a\",\n\t\t\t\"controlgroupLabel\": \".ui-controlgroup-label\",\n\t\t\t\"checkboxradio\": \"input[type='checkbox'], input[type='radio']\",\n\t\t\t\"selectmenu\": \"select\",\n\t\t\t\"spinner\": \".ui-spinner-input\"\n\t\t}\n\t},\n\n\t_create: function() {\n\t\tthis._enhance();\n\t},\n\n\t// To support the enhanced option in jQuery Mobile, we isolate DOM manipulation\n\t_enhance: function() {\n\t\tthis.element.attr( \"role\", \"toolbar\" );\n\t\tthis.refresh();\n\t},\n\n\t_destroy: function() {\n\t\tthis._callChildMethod( \"destroy\" );\n\t\tthis.childWidgets.removeData( \"ui-controlgroup-data\" );\n\t\tthis.element.removeAttr( \"role\" );\n\t\tif ( this.options.items.controlgroupLabel ) {\n\t\t\tthis.element\n\t\t\t\t.find( this.options.items.controlgroupLabel )\n\t\t\t\t.find( \".ui-controlgroup-label-contents\" )\n\t\t\t\t.contents().unwrap();\n\t\t}\n\t},\n\n\t_initWidgets: function() {\n\t\tvar that = this,\n\t\t\tchildWidgets = [];\n\n\t\t// First we iterate over each of the items options\n\t\t$.each( this.options.items, function( widget, selector ) {\n\t\t\tvar labels;\n\t\t\tvar options = {};\n\n\t\t\t// Make sure the widget has a selector set\n\t\t\tif ( !selector ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( widget === \"controlgroupLabel\" ) {\n\t\t\t\tlabels = that.element.find( selector );\n\t\t\t\tlabels.each( function() {\n\t\t\t\t\tvar element = $( this );\n\n\t\t\t\t\tif ( element.children( \".ui-controlgroup-label-contents\" ).length ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\telement.contents()\n\t\t\t\t\t\t.wrapAll( \"<span class='ui-controlgroup-label-contents'></span>\" );\n\t\t\t\t} );\n\t\t\t\tthat._addClass( labels, null, \"ui-widget ui-widget-content ui-state-default\" );\n\t\t\t\tchildWidgets = childWidgets.concat( labels.get() );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Make sure the widget actually exists\n\t\t\tif ( !$.fn[ widget ] ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// We assume everything is in the middle to start because we can't determine\n\t\t\t// first / last elements until all enhancments are done.\n\t\t\tif ( that[ \"_\" + widget + \"Options\" ] ) {\n\t\t\t\toptions = that[ \"_\" + widget + \"Options\" ]( \"middle\" );\n\t\t\t}\n\n\t\t\t// Find instances of this widget inside controlgroup and init them\n\t\t\tthat.element\n\t\t\t\t.find( selector )\n\t\t\t\t.each( function() {\n\t\t\t\t\tvar element = $( this );\n\t\t\t\t\tvar instance = element[ widget ]( \"instance\" );\n\n\t\t\t\t\t// We need to clone the default options for this type of widget to avoid\n\t\t\t\t\t// polluting the variable options which has a wider scope than a single widget.\n\t\t\t\t\tvar instanceOptions = $.widget.extend( {}, options );\n\n\t\t\t\t\t// If the button is the child of a spinner ignore it\n\t\t\t\t\t// TODO: Find a more generic solution\n\t\t\t\t\tif ( widget === \"button\" && element.parent( \".ui-spinner\" ).length ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Create the widget if it doesn't exist\n\t\t\t\t\tif ( !instance ) {\n\t\t\t\t\t\tinstance = element[ widget ]()[ widget ]( \"instance\" );\n\t\t\t\t\t}\n\t\t\t\t\tif ( instance ) {\n\t\t\t\t\t\tinstanceOptions.classes =\n\t\t\t\t\t\t\tthat._resolveClassesValues( instanceOptions.classes, instance );\n\t\t\t\t\t}\n\t\t\t\t\telement[ widget ]( instanceOptions );\n\n\t\t\t\t\t// Store an instance of the controlgroup to be able to reference\n\t\t\t\t\t// from the outermost element for changing options and refresh\n\t\t\t\t\tvar widgetElement = element[ widget ]( \"widget\" );\n\t\t\t\t\t$.data( widgetElement[ 0 ], \"ui-controlgroup-data\",\n\t\t\t\t\t\tinstance ? instance : element[ widget ]( \"instance\" ) );\n\n\t\t\t\t\tchildWidgets.push( widgetElement[ 0 ] );\n\t\t\t\t} );\n\t\t} );\n\n\t\tthis.childWidgets = $( $.unique( childWidgets ) );\n\t\tthis._addClass( this.childWidgets, \"ui-controlgroup-item\" );\n\t},\n\n\t_callChildMethod: function( method ) {\n\t\tthis.childWidgets.each( function() {\n\t\t\tvar element = $( this ),\n\t\t\t\tdata = element.data( \"ui-controlgroup-data\" );\n\t\t\tif ( data && data[ method ] ) {\n\t\t\t\tdata[ method ]();\n\t\t\t}\n\t\t} );\n\t},\n\n\t_updateCornerClass: function( element, position ) {\n\t\tvar remove = \"ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all\";\n\t\tvar add = this._buildSimpleOptions( position, \"label\" ).classes.label;\n\n\t\tthis._removeClass( element, null, remove );\n\t\tthis._addClass( element, null, add );\n\t},\n\n\t_buildSimpleOptions: function( position, key ) {\n\t\tvar direction = this.options.direction === \"vertical\";\n\t\tvar result = {\n\t\t\tclasses: {}\n\t\t};\n\t\tresult.classes[ key ] = {\n\t\t\t\"middle\": \"\",\n\t\t\t\"first\": \"ui-corner-\" + ( direction ? \"top\" : \"left\" ),\n\t\t\t\"last\": \"ui-corner-\" + ( direction ? \"bottom\" : \"right\" ),\n\t\t\t\"only\": \"ui-corner-all\"\n\t\t}[ position ];\n\n\t\treturn result;\n\t},\n\n\t_spinnerOptions: function( position ) {\n\t\tvar options = this._buildSimpleOptions( position, \"ui-spinner\" );\n\n\t\toptions.classes[ \"ui-spinner-up\" ] = \"\";\n\t\toptions.classes[ \"ui-spinner-down\" ] = \"\";\n\n\t\treturn options;\n\t},\n\n\t_buttonOptions: function( position ) {\n\t\treturn this._buildSimpleOptions( position, \"ui-button\" );\n\t},\n\n\t_checkboxradioOptions: function( position ) {\n\t\treturn this._buildSimpleOptions( position, \"ui-checkboxradio-label\" );\n\t},\n\n\t_selectmenuOptions: function( position ) {\n\t\tvar direction = this.options.direction === \"vertical\";\n\t\treturn {\n\t\t\twidth: direction ? \"auto\" : false,\n\t\t\tclasses: {\n\t\t\t\tmiddle: {\n\t\t\t\t\t\"ui-selectmenu-button-open\": \"\",\n\t\t\t\t\t\"ui-selectmenu-button-closed\": \"\"\n\t\t\t\t},\n\t\t\t\tfirst: {\n\t\t\t\t\t\"ui-selectmenu-button-open\": \"ui-corner-\" + ( direction ? \"top\" : \"tl\" ),\n\t\t\t\t\t\"ui-selectmenu-button-closed\": \"ui-corner-\" + ( direction ? \"top\" : \"left\" )\n\t\t\t\t},\n\t\t\t\tlast: {\n\t\t\t\t\t\"ui-selectmenu-button-open\": direction ? \"\" : \"ui-corner-tr\",\n\t\t\t\t\t\"ui-selectmenu-button-closed\": \"ui-corner-\" + ( direction ? \"bottom\" : \"right\" )\n\t\t\t\t},\n\t\t\t\tonly: {\n\t\t\t\t\t\"ui-selectmenu-button-open\": \"ui-corner-top\",\n\t\t\t\t\t\"ui-selectmenu-button-closed\": \"ui-corner-all\"\n\t\t\t\t}\n\n\t\t\t}[ position ]\n\t\t};\n\t},\n\n\t_resolveClassesValues: function( classes, instance ) {\n\t\tvar result = {};\n\t\t$.each( classes, function( key ) {\n\t\t\tvar current = instance.options.classes[ key ] || \"\";\n\t\t\tcurrent = current.replace( controlgroupCornerRegex, \"\" ).trim();\n\t\t\tresult[ key ] = ( current + \" \" + classes[ key ] ).replace( /\\s+/g, \" \" );\n\t\t} );\n\t\treturn result;\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tif ( key === \"direction\" ) {\n\t\t\tthis._removeClass( \"ui-controlgroup-\" + this.options.direction );\n\t\t}\n\n\t\tthis._super( key, value );\n\t\tif ( key === \"disabled\" ) {\n\t\t\tthis._callChildMethod( value ? \"disable\" : \"enable\" );\n\t\t\treturn;\n\t\t}\n\n\t\tthis.refresh();\n\t},\n\n\trefresh: function() {\n\t\tvar children,\n\t\t\tthat = this;\n\n\t\tthis._addClass( \"ui-controlgroup ui-controlgroup-\" + this.options.direction );\n\n\t\tif ( this.options.direction === \"horizontal\" ) {\n\t\t\tthis._addClass( null, \"ui-helper-clearfix\" );\n\t\t}\n\t\tthis._initWidgets();\n\n\t\tchildren = this.childWidgets;\n\n\t\t// We filter here because we need to track all childWidgets not just the visible ones\n\t\tif ( this.options.onlyVisible ) {\n\t\t\tchildren = children.filter( \":visible\" );\n\t\t}\n\n\t\tif ( children.length ) {\n\n\t\t\t// We do this last because we need to make sure all enhancment is done\n\t\t\t// before determining first and last\n\t\t\t$.each( [ \"first\", \"last\" ], function( index, value ) {\n\t\t\t\tvar instance = children[ value ]().data( \"ui-controlgroup-data\" );\n\n\t\t\t\tif ( instance && that[ \"_\" + instance.widgetName + \"Options\" ] ) {\n\t\t\t\t\tvar options = that[ \"_\" + instance.widgetName + \"Options\" ](\n\t\t\t\t\t\tchildren.length === 1 ? \"only\" : value\n\t\t\t\t\t);\n\t\t\t\t\toptions.classes = that._resolveClassesValues( options.classes, instance );\n\t\t\t\t\tinstance.element[ instance.widgetName ]( options );\n\t\t\t\t} else {\n\t\t\t\t\tthat._updateCornerClass( children[ value ](), value );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t// Finally call the refresh method on each of the child widgets.\n\t\t\tthis._callChildMethod( \"refresh\" );\n\t\t}\n\t}\n} );\n\n/*!\n * jQuery UI Checkboxradio 1.12.0\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: Checkboxradio\n//>>group: Widgets\n//>>description: Enhances a form with multiple themeable checkboxes or radio buttons.\n//>>docs: http://api.jqueryui.com/checkboxradio/\n//>>demos: http://jqueryui.com/checkboxradio/\n//>>css.structure: ../../themes/base/core.css\n//>>css.structure: ../../themes/base/button.css\n//>>css.structure: ../../themes/base/checkboxradio.css\n//>>css.theme: ../../themes/base/theme.css\n\n\n\n$.widget( \"ui.checkboxradio\", [ $.ui.formResetMixin, {\n\tversion: \"1.12.0\",\n\toptions: {\n\t\tdisabled: null,\n\t\tlabel: null,\n\t\ticon: true,\n\t\tclasses: {\n\t\t\t\"ui-checkboxradio-label\": \"ui-corner-all\",\n\t\t\t\"ui-checkboxradio-icon\": \"ui-corner-all\"\n\t\t}\n\t},\n\n\t_getCreateOptions: function() {\n\t\tvar disabled, labels;\n\t\tvar that = this;\n\t\tvar options = this._super() || {};\n\n\t\t// We read the type here, because it makes more sense to throw a element type error first,\n\t\t// rather then the error for lack of a label. Often if its the wrong type, it\n\t\t// won't have a label (e.g. calling on a div, btn, etc)\n\t\tthis._readType();\n\n\t\tlabels = this.element.labels();\n\n\t\t// If there are multiple labels, use the last one\n\t\tthis.label = $( labels[ labels.length - 1 ] );\n\t\tif ( !this.label.length ) {\n\t\t\t$.error( \"No label found for checkboxradio widget\" );\n\t\t}\n\n\t\tthis.originalLabel = \"\";\n\n\t\t// We need to get the label text but this may also need to make sure it does not contain the\n\t\t// input itself.\n\t\tthis.label.contents().not( this.element ).each( function() {\n\n\t\t\t// The label contents could be text, html, or a mix. We concat each element to get a\n\t\t\t// string representation of the label, without the input as part of it.\n\t\t\tthat.originalLabel += this.nodeType === 3 ? $( this ).text() : this.outerHTML;\n\t\t} );\n\n\t\t// Set the label option if we found label text\n\t\tif ( this.originalLabel ) {\n\t\t\toptions.label = this.originalLabel;\n\t\t}\n\n\t\tdisabled = this.element[ 0 ].disabled;\n\t\tif ( disabled != null ) {\n\t\t\toptions.disabled = disabled;\n\t\t}\n\t\treturn options;\n\t},\n\n\t_create: function() {\n\t\tvar checked = this.element[ 0 ].checked;\n\n\t\tthis._bindFormResetHandler();\n\n\t\tif ( this.options.disabled == null ) {\n\t\t\tthis.options.disabled = this.element[ 0 ].disabled;\n\t\t}\n\n\t\tthis._setOption( \"disabled\", this.options.disabled );\n\t\tthis._addClass( \"ui-checkboxradio\", \"ui-helper-hidden-accessible\" );\n\t\tthis._addClass( this.label, \"ui-checkboxradio-label\", \"ui-button ui-widget\" );\n\n\t\tif ( this.type === \"radio\" ) {\n\t\t\tthis._addClass( this.label, \"ui-checkboxradio-radio-label\" );\n\t\t}\n\n\t\tif ( this.options.label && this.options.label !== this.originalLabel ) {\n\t\t\tthis._updateLabel();\n\t\t} else if ( this.originalLabel ) {\n\t\t\tthis.options.label = this.originalLabel;\n\t\t}\n\n\t\tthis._enhance();\n\n\t\tif ( checked ) {\n\t\t\tthis._addClass( this.label, \"ui-checkboxradio-checked\", \"ui-state-active\" );\n\t\t\tif ( this.icon ) {\n\t\t\t\tthis._addClass( this.icon, null, \"ui-state-hover\" );\n\t\t\t}\n\t\t}\n\n\t\tthis._on( {\n\t\t\tchange: \"_toggleClasses\",\n\t\t\tfocus: function() {\n\t\t\t\tthis._addClass( this.label, null, \"ui-state-focus ui-visual-focus\" );\n\t\t\t},\n\t\t\tblur: function() {\n\t\t\t\tthis._removeClass( this.label, null, \"ui-state-focus ui-visual-focus\" );\n\t\t\t}\n\t\t} );\n\t},\n\n\t_readType: function() {\n\t\tvar nodeName = this.element[ 0 ].nodeName.toLowerCase();\n\t\tthis.type = this.element[ 0 ].type;\n\t\tif ( nodeName !== \"input\" || !/radio|checkbox/.test( this.type ) ) {\n\t\t\t$.error( \"Can't create checkboxradio on element.nodeName=\" + nodeName +\n\t\t\t\t\" and element.type=\" + this.type );\n\t\t}\n\t},\n\n\t// Support jQuery Mobile enhanced option\n\t_enhance: function() {\n\t\tthis._updateIcon( this.element[ 0 ].checked );\n\t},\n\n\twidget: function() {\n\t\treturn this.label;\n\t},\n\n\t_getRadioGroup: function() {\n\t\tvar group;\n\t\tvar name = this.element[ 0 ].name;\n\t\tvar nameSelector = \"input[name='\" + $.ui.escapeSelector( name ) + \"']\";\n\n\t\tif ( !name ) {\n\t\t\treturn $( [] );\n\t\t}\n\n\t\tif ( this.form.length ) {\n\t\t\tgroup = $( this.form[ 0 ].elements ).filter( nameSelector );\n\t\t} else {\n\n\t\t\t// Not inside a form, check all inputs that also are not inside a form\n\t\t\tgroup = $( nameSelector ).filter( function() {\n\t\t\t\treturn $( this ).form().length === 0;\n\t\t\t} );\n\t\t}\n\n\t\treturn group.not( this.element );\n\t},\n\n\t_toggleClasses: function() {\n\t\tvar checked = this.element[ 0 ].checked;\n\t\tthis._toggleClass( this.label, \"ui-checkboxradio-checked\", \"ui-state-active\", checked );\n\n\t\tif ( this.options.icon && this.type === \"checkbox\" ) {\n\t\t\tthis._toggleClass( this.icon, null, \"ui-icon-check ui-state-checked\", checked )\n\t\t\t\t._toggleClass( this.icon, null, \"ui-icon-blank\", !checked );\n\t\t}\n\n\t\tif ( this.type === \"radio\" ) {\n\t\t\tthis._getRadioGroup()\n\t\t\t\t.each( function() {\n\t\t\t\t\tvar instance = $( this ).checkboxradio( \"instance\" );\n\n\t\t\t\t\tif ( instance ) {\n\t\t\t\t\t\tinstance._removeClass( instance.label,\n\t\t\t\t\t\t\t\"ui-checkboxradio-checked\", \"ui-state-active\" );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t}\n\t},\n\n\t_destroy: function() {\n\t\tthis._unbindFormResetHandler();\n\n\t\tif ( this.icon ) {\n\t\t\tthis.icon.remove();\n\t\t\tthis.iconSpace.remove();\n\t\t}\n\t},\n\n\t_setOption: function( key, value ) {\n\n\t\t// We don't allow the value to be set to nothing\n\t\tif ( key === \"label\" && !value ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._super( key, value );\n\n\t\tif ( key === \"disabled\" ) {\n\t\t\tthis._toggleClass( this.label, null, \"ui-state-disabled\", value );\n\t\t\tthis.element[ 0 ].disabled = value;\n\n\t\t\t// Don't refresh when setting disabled\n\t\t\treturn;\n\t\t}\n\t\tthis.refresh();\n\t},\n\n\t_updateIcon: function( checked ) {\n\t\tvar toAdd = \"ui-icon ui-icon-background \";\n\n\t\tif ( this.options.icon ) {\n\t\t\tif ( !this.icon ) {\n\t\t\t\tthis.icon = $( \"<span>\" );\n\t\t\t\tthis.iconSpace = $( \"<span> </span>\" );\n\t\t\t\tthis._addClass( this.iconSpace, \"ui-checkboxradio-icon-space\" );\n\t\t\t}\n\n\t\t\tif ( this.type === \"checkbox\" ) {\n\t\t\t\ttoAdd += checked ? \"ui-icon-check ui-state-checked\" : \"ui-icon-blank\";\n\t\t\t\tthis._removeClass( this.icon, null, checked ? \"ui-icon-blank\" : \"ui-icon-check\" );\n\t\t\t} else {\n\t\t\t\ttoAdd += \"ui-icon-blank\";\n\t\t\t}\n\t\t\tthis._addClass( this.icon, \"ui-checkboxradio-icon\", toAdd );\n\t\t\tif ( !checked ) {\n\t\t\t\tthis._removeClass( this.icon, null, \"ui-icon-check ui-state-checked\" );\n\t\t\t}\n\t\t\tthis.icon.prependTo( this.label ).after( this.iconSpace );\n\t\t} else if ( this.icon !== undefined ) {\n\t\t\tthis.icon.remove();\n\t\t\tthis.iconSpace.remove();\n\t\t\tdelete this.icon;\n\t\t}\n\t},\n\n\t_updateLabel: function() {\n\n\t\t// Remove the contents of the label ( minus the icon, icon space, and input )\n\t\tthis.label.contents().not( this.element.add( this.icon ).add( this.iconSpace ) ).remove();\n\t\tthis.label.append( this.options.label );\n\t},\n\n\trefresh: function() {\n\t\tvar checked = this.element[ 0 ].checked,\n\t\t\tisDisabled = this.element[ 0 ].disabled;\n\n\t\tthis._updateIcon( checked );\n\t\tthis._toggleClass( this.label, \"ui-checkboxradio-checked\", \"ui-state-active\", checked );\n\t\tif ( this.options.label !== null ) {\n\t\t\tthis._updateLabel();\n\t\t}\n\n\t\tif ( isDisabled !== this.options.disabled ) {\n\t\t\tthis._setOptions( { \"disabled\": isDisabled } );\n\t\t}\n\t}\n\n} ] );\n\nvar widgetsCheckboxradio = $.ui.checkboxradio;\n\n\n/*!\n * jQuery UI Button 1.12.0\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: Button\n//>>group: Widgets\n//>>description: Enhances a form with themeable buttons.\n//>>docs: http://api.jqueryui.com/button/\n//>>demos: http://jqueryui.com/button/\n//>>css.structure: ../../themes/base/core.css\n//>>css.structure: ../../themes/base/button.css\n//>>css.theme: ../../themes/base/theme.css\n\n\n\n$.widget( \"ui.button\", {\n\tversion: \"1.12.0\",\n\tdefaultElement: \"<button>\",\n\toptions: {\n\t\tclasses: {\n\t\t\t\"ui-button\": \"ui-corner-all\"\n\t\t},\n\t\tdisabled: null,\n\t\ticon: null,\n\t\ticonPosition: \"beginning\",\n\t\tlabel: null,\n\t\tshowLabel: true\n\t},\n\n\t_getCreateOptions: function() {\n\t\tvar disabled,\n\n\t\t\t// This is to support cases like in jQuery Mobile where the base widget does have\n\t\t\t// an implementation of _getCreateOptions\n\t\t\toptions = this._super() || {};\n\n\t\tthis.isInput = this.element.is( \"input\" );\n\n\t\tdisabled = this.element[ 0 ].disabled;\n\t\tif ( disabled != null ) {\n\t\t\toptions.disabled = disabled;\n\t\t}\n\n\t\tthis.originalLabel = this.isInput ? this.element.val() : this.element.html();\n\t\tif ( this.originalLabel ) {\n\t\t\toptions.label = this.originalLabel;\n\t\t}\n\n\t\treturn options;\n\t},\n\n\t_create: function() {\n\t\tif ( !this.option.showLabel & !this.options.icon ) {\n\t\t\tthis.options.showLabel = true;\n\t\t}\n\n\t\t// We have to check the option again here even though we did in _getCreateOptions,\n\t\t// because null may have been passed on init which would override what was set in\n\t\t// _getCreateOptions\n\t\tif ( this.options.disabled == null ) {\n\t\t\tthis.options.disabled = this.element[ 0 ].disabled || false;\n\t\t}\n\n\t\tthis.hasTitle = !!this.element.attr( \"title\" );\n\n\t\t// Check to see if the label needs to be set or if its already correct\n\t\tif ( this.options.label && this.options.label !== this.originalLabel ) {\n\t\t\tif ( this.isInput ) {\n\t\t\t\tthis.element.val( this.options.label );\n\t\t\t} else {\n\t\t\t\tthis.element.html( this.options.label );\n\t\t\t}\n\t\t}\n\t\tthis._addClass( \"ui-button\", \"ui-widget\" );\n\t\tthis._setOption( \"disabled\", this.options.disabled );\n\t\tthis._enhance();\n\n\t\tif ( this.element.is( \"a\" ) ) {\n\t\t\tthis._on( {\n\t\t\t\t\"keyup\": function( event ) {\n\t\t\t\t\tif ( event.keyCode === $.ui.keyCode.SPACE ) {\n\t\t\t\t\t\tevent.preventDefault();\n\n\t\t\t\t\t\t// Support: PhantomJS <= 1.9, IE 8 Only\n\t\t\t\t\t\t// If a native click is available use it so we actually cause navigation\n\t\t\t\t\t\t// otherwise just trigger a click event\n\t\t\t\t\t\tif ( this.element[ 0 ].click ) {\n\t\t\t\t\t\t\tthis.element[ 0 ].click();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.element.trigger( \"click\" );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t},\n\n\t_enhance: function() {\n\t\tif ( !this.element.is( \"button\" ) ) {\n\t\t\tthis.element.attr( \"role\", \"button\" );\n\t\t}\n\n\t\tif ( this.options.icon ) {\n\t\t\tthis._updateIcon( \"icon\", this.options.icon );\n\t\t\tthis._updateTooltip();\n\t\t}\n\t},\n\n\t_updateTooltip: function() {\n\t\tthis.title = this.element.attr( \"title\" );\n\n\t\tif ( !this.options.showLabel && !this.title ) {\n\t\t\tthis.element.attr( \"title\", this.options.label );\n\t\t}\n\t},\n\n\t_updateIcon: function( option, value ) {\n\t\tvar icon = option !== \"iconPosition\",\n\t\t\tposition = icon ? this.options.iconPosition : value,\n\t\t\tdisplayBlock = position === \"top\" || position === \"bottom\";\n\n\t\t// Create icon\n\t\tif ( !this.icon ) {\n\t\t\tthis.icon = $( \"<span>\" );\n\n\t\t\tthis._addClass( this.icon, \"ui-button-icon\", \"ui-icon\" );\n\n\t\t\tif ( !this.options.showLabel ) {\n\t\t\t\tthis._addClass( \"ui-button-icon-only\" );\n\t\t\t}\n\t\t} else if ( icon ) {\n\n\t\t\t// If we are updating the icon remove the old icon class\n\t\t\tthis._removeClass( this.icon, null, this.options.icon );\n\t\t}\n\n\t\t// If we are updating the icon add the new icon class\n\t\tif ( icon ) {\n\t\t\tthis._addClass( this.icon, null, value );\n\t\t}\n\n\t\tthis._attachIcon( position );\n\n\t\t// If the icon is on top or bottom we need to add the ui-widget-icon-block class and remove\n\t\t// the iconSpace if there is one.\n\t\tif ( displayBlock ) {\n\t\t\tthis._addClass( this.icon, null, \"ui-widget-icon-block\" );\n\t\t\tif ( this.iconSpace ) {\n\t\t\t\tthis.iconSpace.remove();\n\t\t\t}\n\t\t} else {\n\n\t\t\t// Position is beginning or end so remove the ui-widget-icon-block class and add the\n\t\t\t// space if it does not exist\n\t\t\tif ( !this.iconSpace ) {\n\t\t\t\tthis.iconSpace = $( \"<span> </span>\" );\n\t\t\t\tthis._addClass( this.iconSpace, \"ui-button-icon-space\" );\n\t\t\t}\n\t\t\tthis._removeClass( this.icon, null, \"ui-wiget-icon-block\" );\n\t\t\tthis._attachIconSpace( position );\n\t\t}\n\t},\n\n\t_destroy: function() {\n\t\tthis.element.removeAttr( \"role\" );\n\n\t\tif ( this.icon ) {\n\t\t\tthis.icon.remove();\n\t\t}\n\t\tif ( this.iconSpace ) {\n\t\t\tthis.iconSpace.remove();\n\t\t}\n\t\tif ( !this.hasTitle ) {\n\t\t\tthis.element.removeAttr( \"title\" );\n\t\t}\n\t},\n\n\t_attachIconSpace: function( iconPosition ) {\n\t\tthis.icon[ /^(?:end|bottom)/.test( iconPosition ) ? \"before\" : \"after\" ]( this.iconSpace );\n\t},\n\n\t_attachIcon: function( iconPosition ) {\n\t\tthis.element[ /^(?:end|bottom)/.test( iconPosition ) ? \"append\" : \"prepend\" ]( this.icon );\n\t},\n\n\t_setOptions: function( options ) {\n\t\tvar newShowLabel = options.showLabel === undefined ?\n\t\t\t\tthis.options.showLabel :\n\t\t\t\toptions.showLabel,\n\t\t\tnewIcon = options.icon === undefined ? this.options.icon : options.icon;\n\n\t\tif ( !newShowLabel && !newIcon ) {\n\t\t\toptions.showLabel = true;\n\t\t}\n\t\tthis._super( options );\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tif ( key === \"icon\" ) {\n\t\t\tif ( value ) {\n\t\t\t\tthis._updateIcon( key, value );\n\t\t\t} else if ( this.icon ) {\n\t\t\t\tthis.icon.remove();\n\t\t\t\tif ( this.iconSpace ) {\n\t\t\t\t\tthis.iconSpace.remove();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ( key === \"iconPosition\" ) {\n\t\t\tthis._updateIcon( key, value );\n\t\t}\n\n\t\t// Make sure we can't end up with a button that has neither text nor icon\n\t\tif ( key === \"showLabel\" ) {\n\t\t\t\tthis._toggleClass( \"ui-button-icon-only\", null, !value );\n\t\t\t\tthis._updateTooltip();\n\t\t}\n\n\t\tif ( key === \"label\" ) {\n\t\t\tif ( this.isInput ) {\n\t\t\t\tthis.element.val( value );\n\t\t\t} else {\n\n\t\t\t\t// If there is an icon, append it, else nothing then append the value\n\t\t\t\t// this avoids removal of the icon when setting label text\n\t\t\t\tthis.element.html( value );\n\t\t\t\tif ( this.icon ) {\n\t\t\t\t\tthis._attachIcon( this.options.iconPosition );\n\t\t\t\t\tthis._attachIconSpace( this.options.iconPosition );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._super( key, value );\n\n\t\tif ( key === \"disabled\" ) {\n\t\t\tthis._toggleClass( null, \"ui-state-disabled\", value );\n\t\t\tthis.element[ 0 ].disabled = value;\n\t\t\tif ( value ) {\n\t\t\t\tthis.element.blur();\n\t\t\t}\n\t\t}\n\t},\n\n\trefresh: function() {\n\n\t\t// Make sure to only check disabled if its an element that supports this otherwise\n\t\t// check for the disabled class to determine state\n\t\tvar isDisabled = this.element.is( \"input, button\" ) ?\n\t\t\tthis.element[ 0 ].disabled : this.element.hasClass( \"ui-button-disabled\" );\n\n\t\tif ( isDisabled !== this.options.disabled ) {\n\t\t\tthis._setOptions( { disabled: isDisabled } );\n\t\t}\n\n\t\tthis._updateTooltip();\n\t}\n} );\n\n// DEPRECATED\nif ( $.uiBackCompat !== false ) {\n\n\t// Text and Icons options\n\t$.widget( \"ui.button\", $.ui.button, {\n\t\toptions: {\n\t\t\ttext: true,\n\t\t\ticons: {\n\t\t\t\tprimary: null,\n\t\t\t\tsecondary: null\n\t\t\t}\n\t\t},\n\n\t\t_create: function() {\n\t\t\tif ( this.options.showLabel && !this.options.text ) {\n\t\t\t\tthis.options.showLabel = this.options.text;\n\t\t\t}\n\t\t\tif ( !this.options.showLabel && this.options.text ) {\n\t\t\t\tthis.options.text = this.options.showLabel;\n\t\t\t}\n\t\t\tif ( !this.options.icon && ( this.options.icons.primary ||\n\t\t\t\t\tthis.options.icons.secondary ) ) {\n\t\t\t\tif ( this.options.icons.primary ) {\n\t\t\t\t\tthis.options.icon = this.options.icons.primary;\n\t\t\t\t} else {\n\t\t\t\t\tthis.options.icon = this.options.icons.secondary;\n\t\t\t\t\tthis.options.iconPosition = \"end\";\n\t\t\t\t}\n\t\t\t} else if ( this.options.icon ) {\n\t\t\t\tthis.options.icons.primary = this.options.icon;\n\t\t\t}\n\t\t\tthis._super();\n\t\t},\n\n\t\t_setOption: function( key, value ) {\n\t\t\tif ( key === \"text\" ) {\n\t\t\t\tthis._super( \"showLabel\", value );\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif ( key === \"showLabel\" ) {\n\t\t\t\tthis.options.text = value;\n\t\t\t}\n\t\t\tif ( key === \"icon\" ) {\n\t\t\t\tthis.options.icons.primary = value;\n\t\t\t}\n\t\t\tif ( key === \"icons\" ) {\n\t\t\t\tif ( value.primary ) {\n\t\t\t\t\tthis._super( \"icon\", value.primary );\n\t\t\t\t\tthis._super( \"iconPosition\", \"beginning\" );\n\t\t\t\t} else if ( value.secondary ) {\n\t\t\t\t\tthis._super( \"icon\", value.secondary );\n\t\t\t\t\tthis._super( \"iconPosition\", \"end\" );\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._superApply( arguments );\n\t\t}\n\t} );\n\n\t$.fn.button = ( function( orig ) {\n\t\treturn function() {\n\t\t\tif ( !this.length || ( this.length && this[ 0 ].tagName !== \"INPUT\" ) ||\n\t\t\t\t\t( this.length && this[ 0 ].tagName === \"INPUT\" && (\n\t\t\t\t\t\tthis.attr( \"type\" ) !== \"checkbox\" && this.attr( \"type\" ) !== \"radio\"\n\t\t\t\t\t) ) ) {\n\t\t\t\treturn orig.apply( this, arguments );\n\t\t\t}\n\t\t\tif ( !$.ui.checkboxradio ) {\n\t\t\t\t$.error( \"Checkboxradio widget missing\" );\n\t\t\t}\n\t\t\tif ( arguments.length === 0 ) {\n\t\t\t\treturn this.checkboxradio( {\n\t\t\t\t\t\"icon\": false\n\t\t\t\t} );\n\t\t\t}\n\t\t\treturn this.checkboxradio.apply( this, arguments );\n\t\t};\n\t} )( $.fn.button );\n\n\t$.fn.buttonset = function() {\n\t\tif ( !$.ui.controlgroup ) {\n\t\t\t$.error( \"Controlgroup widget missing\" );\n\t\t}\n\t\tif ( arguments[ 0 ] === \"option\" && arguments[ 1 ] === \"items\" && arguments[ 2 ] ) {\n\t\t\treturn this.controlgroup.apply( this,\n\t\t\t\t[ arguments[ 0 ], \"items.button\", arguments[ 2 ] ] );\n\t\t}\n\t\tif ( arguments[ 0 ] === \"option\" && arguments[ 1 ] === \"items\" ) {\n\t\t\treturn this.controlgroup.apply( this, [ arguments[ 0 ], \"items.button\" ] );\n\t\t}\n\t\tif ( typeof arguments[ 0 ] === \"object\" && arguments[ 0 ].items ) {\n\t\t\targuments[ 0 ].items = {\n\t\t\t\tbutton: arguments[ 0 ].items\n\t\t\t};\n\t\t}\n\t\treturn this.controlgroup.apply( this, arguments );\n\t};\n}\n\nvar widgetsButton = $.ui.button;\n\n\n\nvar safeActiveElement = $.ui.safeActiveElement = function( document ) {\n\tvar activeElement;\n\n\t// Support: IE 9 only\n\t// IE9 throws an \"Unspecified error\" accessing document.activeElement from an <iframe>\n\ttry {\n\t\tactiveElement = document.activeElement;\n\t} catch ( error ) {\n\t\tactiveElement = document.body;\n\t}\n\n\t// Support: IE 9 - 11 only\n\t// IE may return null instead of an element\n\t// Interestingly, this only seems to occur when NOT in an iframe\n\tif ( !activeElement ) {\n\t\tactiveElement = document.body;\n\t}\n\n\t// Support: IE 11 only\n\t// IE11 returns a seemingly empty object in some cases when accessing\n\t// document.activeElement from an <iframe>\n\tif ( !activeElement.nodeName ) {\n\t\tactiveElement = document.body;\n\t}\n\n\treturn activeElement;\n};\n\n\n/*!\n * jQuery UI Menu 1.12.0\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: Menu\n//>>group: Widgets\n//>>description: Creates nestable menus.\n//>>docs: http://api.jqueryui.com/menu/\n//>>demos: http://jqueryui.com/menu/\n//>>css.structure: ../../themes/base/core.css\n//>>css.structure: ../../themes/base/menu.css\n//>>css.theme: ../../themes/base/theme.css\n\n\n\nvar widgetsMenu = $.widget( \"ui.menu\", {\n\tversion: \"1.12.0\",\n\tdefaultElement: \"<ul>\",\n\tdelay: 300,\n\toptions: {\n\t\ticons: {\n\t\t\tsubmenu: \"ui-icon-caret-1-e\"\n\t\t},\n\t\titems: \"> *\",\n\t\tmenus: \"ul\",\n\t\tposition: {\n\t\t\tmy: \"left top\",\n\t\t\tat: \"right top\"\n\t\t},\n\t\trole: \"menu\",\n\n\t\t// Callbacks\n\t\tblur: null,\n\t\tfocus: null,\n\t\tselect: null\n\t},\n\n\t_create: function() {\n\t\tthis.activeMenu = this.element;\n\n\t\t// Flag used to prevent firing of the click handler\n\t\t// as the event bubbles up through nested menus\n\t\tthis.mouseHandled = false;\n\t\tthis.element\n\t\t\t.uniqueId()\n\t\t\t.attr( {\n\t\t\t\trole: this.options.role,\n\t\t\t\ttabIndex: 0\n\t\t\t} );\n\n\t\tthis._addClass( \"ui-menu\", \"ui-widget ui-widget-content\" );\n\t\tthis._on( {\n\n\t\t\t// Prevent focus from sticking to links inside menu after clicking\n\t\t\t// them (focus should always stay on UL during navigation).\n\t\t\t\"mousedown .ui-menu-item\": function( event ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t},\n\t\t\t\"click .ui-menu-item\": function( event ) {\n\t\t\t\tvar target = $( event.target );\n\t\t\t\tvar active = $( $.ui.safeActiveElement( this.document[ 0 ] ) );\n\t\t\t\tif ( !this.mouseHandled && target.not( \".ui-state-disabled\" ).length ) {\n\t\t\t\t\tthis.select( event );\n\n\t\t\t\t\t// Only set the mouseHandled flag if the event will bubble, see #9469.\n\t\t\t\t\tif ( !event.isPropagationStopped() ) {\n\t\t\t\t\t\tthis.mouseHandled = true;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Open submenu on click\n\t\t\t\t\tif ( target.has( \".ui-menu\" ).length ) {\n\t\t\t\t\t\tthis.expand( event );\n\t\t\t\t\t} else if ( !this.element.is( \":focus\" ) &&\n\t\t\t\t\t\t\tactive.closest( \".ui-menu\" ).length ) {\n\n\t\t\t\t\t\t// Redirect focus to the menu\n\t\t\t\t\t\tthis.element.trigger( \"focus\", [ true ] );\n\n\t\t\t\t\t\t// If the active item is on the top level, let it stay active.\n\t\t\t\t\t\t// Otherwise, blur the active item since it is no longer visible.\n\t\t\t\t\t\tif ( this.active && this.active.parents( \".ui-menu\" ).length === 1 ) {\n\t\t\t\t\t\t\tclearTimeout( this.timer );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t\"mouseenter .ui-menu-item\": function( event ) {\n\n\t\t\t\t// Ignore mouse events while typeahead is active, see #10458.\n\t\t\t\t// Prevents focusing the wrong item when typeahead causes a scroll while the mouse\n\t\t\t\t// is over an item in the menu\n\t\t\t\tif ( this.previousFilter ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar actualTarget = $( event.target ).closest( \".ui-menu-item\" ),\n\t\t\t\t\ttarget = $( event.currentTarget );\n\n\t\t\t\t// Ignore bubbled events on parent items, see #11641\n\t\t\t\tif ( actualTarget[ 0 ] !== target[ 0 ] ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Remove ui-state-active class from siblings of the newly focused menu item\n\t\t\t\t// to avoid a jump caused by adjacent elements both having a class with a border\n\t\t\t\tthis._removeClass( target.siblings().children( \".ui-state-active\" ),\n\t\t\t\t\tnull, \"ui-state-active\" );\n\t\t\t\tthis.focus( event, target );\n\t\t\t},\n\t\t\tmouseleave: \"collapseAll\",\n\t\t\t\"mouseleave .ui-menu\": \"collapseAll\",\n\t\t\tfocus: function( event, keepActiveItem ) {\n\n\t\t\t\t// If there's already an active item, keep it active\n\t\t\t\t// If not, activate the first item\n\t\t\t\tvar item = this.active || this.element.find( this.options.items ).eq( 0 );\n\n\t\t\t\tif ( !keepActiveItem ) {\n\t\t\t\t\tthis.focus( event, item );\n\t\t\t\t}\n\t\t\t},\n\t\t\tblur: function( event ) {\n\t\t\t\tthis._delay( function() {\n\t\t\t\t\tvar notContained = !$.contains(\n\t\t\t\t\t\tthis.element[ 0 ],\n\t\t\t\t\t\t$.ui.safeActiveElement( this.document[ 0 ] )\n\t\t\t\t\t);\n\t\t\t\t\tif ( notContained ) {\n\t\t\t\t\t\tthis.collapseAll( event );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t},\n\t\t\tkeydown: \"_keydown\"\n\t\t} );\n\n\t\tthis.refresh();\n\n\t\t// Clicks outside of a menu collapse any open menus\n\t\tthis._on( this.document, {\n\t\t\tclick: function( event ) {\n\t\t\t\tif ( this._closeOnDocumentClick( event ) ) {\n\t\t\t\t\tthis.collapseAll( event );\n\t\t\t\t}\n\n\t\t\t\t// Reset the mouseHandled flag\n\t\t\t\tthis.mouseHandled = false;\n\t\t\t}\n\t\t} );\n\t},\n\n\t_destroy: function() {\n\t\tvar items = this.element.find( \".ui-menu-item\" )\n\t\t\t\t.removeAttr( \"role aria-disabled\" ),\n\t\t\tsubmenus = items.children( \".ui-menu-item-wrapper\" )\n\t\t\t\t.removeUniqueId()\n\t\t\t\t.removeAttr( \"tabIndex role aria-haspopup\" );\n\n\t\t// Destroy (sub)menus\n\t\tthis.element\n\t\t\t.removeAttr( \"aria-activedescendant\" )\n\t\t\t.find( \".ui-menu\" ).addBack()\n\t\t\t\t.removeAttr( \"role aria-labelledby aria-expanded aria-hidden aria-disabled \" +\n\t\t\t\t\t\"tabIndex\" )\n\t\t\t\t.removeUniqueId()\n\t\t\t\t.show();\n\n\t\tsubmenus.children().each( function() {\n\t\t\tvar elem = $( this );\n\t\t\tif ( elem.data( \"ui-menu-submenu-caret\" ) ) {\n\t\t\t\telem.remove();\n\t\t\t}\n\t\t} );\n\t},\n\n\t_keydown: function( event ) {\n\t\tvar match, prev, character, skip,\n\t\t\tpreventDefault = true;\n\n\t\tswitch ( event.keyCode ) {\n\t\tcase $.ui.keyCode.PAGE_UP:\n\t\t\tthis.previousPage( event );\n\t\t\tbreak;\n\t\tcase $.ui.keyCode.PAGE_DOWN:\n\t\t\tthis.nextPage( event );\n\t\t\tbreak;\n\t\tcase $.ui.keyCode.HOME:\n\t\t\tthis._move( \"first\", \"first\", event );\n\t\t\tbreak;\n\t\tcase $.ui.keyCode.END:\n\t\t\tthis._move( \"last\", \"last\", event );\n\t\t\tbreak;\n\t\tcase $.ui.keyCode.UP:\n\t\t\tthis.previous( event );\n\t\t\tbreak;\n\t\tcase $.ui.keyCode.DOWN:\n\t\t\tthis.next( event );\n\t\t\tbreak;\n\t\tcase $.ui.keyCode.LEFT:\n\t\t\tthis.collapse( event );\n\t\t\tbreak;\n\t\tcase $.ui.keyCode.RIGHT:\n\t\t\tif ( this.active && !this.active.is( \".ui-state-disabled\" ) ) {\n\t\t\t\tthis.expand( event );\n\t\t\t}\n\t\t\tbreak;\n\t\tcase $.ui.keyCode.ENTER:\n\t\tcase $.ui.keyCode.SPACE:\n\t\t\tthis._activate( event );\n\t\t\tbreak;\n\t\tcase $.ui.keyCode.ESCAPE:\n\t\t\tthis.collapse( event );\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tpreventDefault = false;\n\t\t\tprev = this.previousFilter || \"\";\n\t\t\tcharacter = String.fromCharCode( event.keyCode );\n\t\t\tskip = false;\n\n\t\t\tclearTimeout( this.filterTimer );\n\n\t\t\tif ( character === prev ) {\n\t\t\t\tskip = true;\n\t\t\t} else {\n\t\t\t\tcharacter = prev + character;\n\t\t\t}\n\n\t\t\tmatch = this._filterMenuItems( character );\n\t\t\tmatch = skip && match.index( this.active.next() ) !== -1 ?\n\t\t\t\tthis.active.nextAll( \".ui-menu-item\" ) :\n\t\t\t\tmatch;\n\n\t\t\t// If no matches on the current filter, reset to the last character pressed\n\t\t\t// to move down the menu to the first item that starts with that character\n\t\t\tif ( !match.length ) {\n\t\t\t\tcharacter = String.fromCharCode( event.keyCode );\n\t\t\t\tmatch = this._filterMenuItems( character );\n\t\t\t}\n\n\t\t\tif ( match.length ) {\n\t\t\t\tthis.focus( event, match );\n\t\t\t\tthis.previousFilter = character;\n\t\t\t\tthis.filterTimer = this._delay( function() {\n\t\t\t\t\tdelete this.previousFilter;\n\t\t\t\t}, 1000 );\n\t\t\t} else {\n\t\t\t\tdelete this.previousFilter;\n\t\t\t}\n\t\t}\n\n\t\tif ( preventDefault ) {\n\t\t\tevent.preventDefault();\n\t\t}\n\t},\n\n\t_activate: function( event ) {\n\t\tif ( this.active && !this.active.is( \".ui-state-disabled\" ) ) {\n\t\t\tif ( this.active.children( \"[aria-haspopup='true']\" ).length ) {\n\t\t\t\tthis.expand( event );\n\t\t\t} else {\n\t\t\t\tthis.select( event );\n\t\t\t}\n\t\t}\n\t},\n\n\trefresh: function() {\n\t\tvar menus, items, newSubmenus, newItems, newWrappers,\n\t\t\tthat = this,\n\t\t\ticon = this.options.icons.submenu,\n\t\t\tsubmenus = this.element.find( this.options.menus );\n\n\t\tthis._toggleClass( \"ui-menu-icons\", null, !!this.element.find( \".ui-icon\" ).length );\n\n\t\t// Initialize nested menus\n\t\tnewSubmenus = submenus.filter( \":not(.ui-menu)\" )\n\t\t\t.hide()\n\t\t\t.attr( {\n\t\t\t\trole: this.options.role,\n\t\t\t\t\"aria-hidden\": \"true\",\n\t\t\t\t\"aria-expanded\": \"false\"\n\t\t\t} )\n\t\t\t.each( function() {\n\t\t\t\tvar menu = $( this ),\n\t\t\t\t\titem = menu.prev(),\n\t\t\t\t\tsubmenuCaret = $( \"<span>\" ).data( \"ui-menu-submenu-caret\", true );\n\n\t\t\t\tthat._addClass( submenuCaret, \"ui-menu-icon\", \"ui-icon \" + icon );\n\t\t\t\titem\n\t\t\t\t\t.attr( \"aria-haspopup\", \"true\" )\n\t\t\t\t\t.prepend( submenuCaret );\n\t\t\t\tmenu.attr( \"aria-labelledby\", item.attr( \"id\" ) );\n\t\t\t} );\n\n\t\tthis._addClass( newSubmenus, \"ui-menu\", \"ui-widget ui-widget-content ui-front\" );\n\n\t\tmenus = submenus.add( this.element );\n\t\titems = menus.find( this.options.items );\n\n\t\t// Initialize menu-items containing spaces and/or dashes only as dividers\n\t\titems.not( \".ui-menu-item\" ).each( function() {\n\t\t\tvar item = $( this );\n\t\t\tif ( that._isDivider( item ) ) {\n\t\t\t\tthat._addClass( item, \"ui-menu-divider\", \"ui-widget-content\" );\n\t\t\t}\n\t\t} );\n\n\t\t// Don't refresh list items that are already adapted\n\t\tnewItems = items.not( \".ui-menu-item, .ui-menu-divider\" );\n\t\tnewWrappers = newItems.children()\n\t\t\t.not( \".ui-menu\" )\n\t\t\t\t.uniqueId()\n\t\t\t\t.attr( {\n\t\t\t\t\ttabIndex: -1,\n\t\t\t\t\trole: this._itemRole()\n\t\t\t\t} );\n\t\tthis._addClass( newItems, \"ui-menu-item\" )\n\t\t\t._addClass( newWrappers, \"ui-menu-item-wrapper\" );\n\n\t\t// Add aria-disabled attribute to any disabled menu item\n\t\titems.filter( \".ui-state-disabled\" ).attr( \"aria-disabled\", \"true\" );\n\n\t\t// If the active item has been removed, blur the menu\n\t\tif ( this.active && !$.contains( this.element[ 0 ], this.active[ 0 ] ) ) {\n\t\t\tthis.blur();\n\t\t}\n\t},\n\n\t_itemRole: function() {\n\t\treturn {\n\t\t\tmenu: \"menuitem\",\n\t\t\tlistbox: \"option\"\n\t\t}[ this.options.role ];\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tif ( key === \"icons\" ) {\n\t\t\tvar icons = this.element.find( \".ui-menu-icon\" );\n\t\t\tthis._removeClass( icons, null, this.options.icons.submenu )\n\t\t\t\t._addClass( icons, null, value.submenu );\n\t\t}\n\t\tthis._super( key, value );\n\t},\n\n\t_setOptionDisabled: function( value ) {\n\t\tthis._super( value );\n\n\t\tthis.element.attr( \"aria-disabled\", String( value ) );\n\t\tthis._toggleClass( null, \"ui-state-disabled\", !!value );\n\t},\n\n\tfocus: function( event, item ) {\n\t\tvar nested, focused, activeParent;\n\t\tthis.blur( event, event && event.type === \"focus\" );\n\n\t\tthis._scrollIntoView( item );\n\n\t\tthis.active = item.first();\n\n\t\tfocused = this.active.children( \".ui-menu-item-wrapper\" );\n\t\tthis._addClass( focused, null, \"ui-state-active\" );\n\n\t\t// Only update aria-activedescendant if there's a role\n\t\t// otherwise we assume focus is managed elsewhere\n\t\tif ( this.options.role ) {\n\t\t\tthis.element.attr( \"aria-activedescendant\", focused.attr( \"id\" ) );\n\t\t}\n\n\t\t// Highlight active parent menu item, if any\n\t\tactiveParent = this.active\n\t\t\t.parent()\n\t\t\t\t.closest( \".ui-menu-item\" )\n\t\t\t\t\t.children( \".ui-menu-item-wrapper\" );\n\t\tthis._addClass( activeParent, null, \"ui-state-active\" );\n\n\t\tif ( event && event.type === \"keydown\" ) {\n\t\t\tthis._close();\n\t\t} else {\n\t\t\tthis.timer = this._delay( function() {\n\t\t\t\tthis._close();\n\t\t\t}, this.delay );\n\t\t}\n\n\t\tnested = item.children( \".ui-menu\" );\n\t\tif ( nested.length && event && ( /^mouse/.test( event.type ) ) ) {\n\t\t\tthis._startOpening( nested );\n\t\t}\n\t\tthis.activeMenu = item.parent();\n\n\t\tthis._trigger( \"focus\", event, { item: item } );\n\t},\n\n\t_scrollIntoView: function( item ) {\n\t\tvar borderTop, paddingTop, offset, scroll, elementHeight, itemHeight;\n\t\tif ( this._hasScroll() ) {\n\t\t\tborderTop = parseFloat( $.css( this.activeMenu[ 0 ], \"borderTopWidth\" ) ) || 0;\n\t\t\tpaddingTop = parseFloat( $.css( this.activeMenu[ 0 ], \"paddingTop\" ) ) || 0;\n\t\t\toffset = item.offset().top - this.activeMenu.offset().top - borderTop - paddingTop;\n\t\t\tscroll = this.activeMenu.scrollTop();\n\t\t\telementHeight = this.activeMenu.height();\n\t\t\titemHeight = item.outerHeight();\n\n\t\t\tif ( offset < 0 ) {\n\t\t\t\tthis.activeMenu.scrollTop( scroll + offset );\n\t\t\t} else if ( offset + itemHeight > elementHeight ) {\n\t\t\t\tthis.activeMenu.scrollTop( scroll + offset - elementHeight + itemHeight );\n\t\t\t}\n\t\t}\n\t},\n\n\tblur: function( event, fromFocus ) {\n\t\tif ( !fromFocus ) {\n\t\t\tclearTimeout( this.timer );\n\t\t}\n\n\t\tif ( !this.active ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._removeClass( this.active.children( \".ui-menu-item-wrapper\" ),\n\t\t\tnull, \"ui-state-active\" );\n\n\t\tthis._trigger( \"blur\", event, { item: this.active } );\n\t\tthis.active = null;\n\t},\n\n\t_startOpening: function( submenu ) {\n\t\tclearTimeout( this.timer );\n\n\t\t// Don't open if already open fixes a Firefox bug that caused a .5 pixel\n\t\t// shift in the submenu position when mousing over the caret icon\n\t\tif ( submenu.attr( \"aria-hidden\" ) !== \"true\" ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.timer = this._delay( function() {\n\t\t\tthis._close();\n\t\t\tthis._open( submenu );\n\t\t}, this.delay );\n\t},\n\n\t_open: function( submenu ) {\n\t\tvar position = $.extend( {\n\t\t\tof: this.active\n\t\t}, this.options.position );\n\n\t\tclearTimeout( this.timer );\n\t\tthis.element.find( \".ui-menu\" ).not( submenu.parents( \".ui-menu\" ) )\n\t\t\t.hide()\n\t\t\t.attr( \"aria-hidden\", \"true\" );\n\n\t\tsubmenu\n\t\t\t.show()\n\t\t\t.removeAttr( \"aria-hidden\" )\n\t\t\t.attr( \"aria-expanded\", \"true\" )\n\t\t\t.position( position );\n\t},\n\n\tcollapseAll: function( event, all ) {\n\t\tclearTimeout( this.timer );\n\t\tthis.timer = this._delay( function() {\n\n\t\t\t// If we were passed an event, look for the submenu that contains the event\n\t\t\tvar currentMenu = all ? this.element :\n\t\t\t\t$( event && event.target ).closest( this.element.find( \".ui-menu\" ) );\n\n\t\t\t// If we found no valid submenu ancestor, use the main menu to close all\n\t\t\t// sub menus anyway\n\t\t\tif ( !currentMenu.length ) {\n\t\t\t\tcurrentMenu = this.element;\n\t\t\t}\n\n\t\t\tthis._close( currentMenu );\n\n\t\t\tthis.blur( event );\n\n\t\t\t// Work around active item staying active after menu is blurred\n\t\t\tthis._removeClass( currentMenu.find( \".ui-state-active\" ), null, \"ui-state-active\" );\n\n\t\t\tthis.activeMenu = currentMenu;\n\t\t}, this.delay );\n\t},\n\n\t// With no arguments, closes the currently active menu - if nothing is active\n\t// it closes all menus.  If passed an argument, it will search for menus BELOW\n\t_close: function( startMenu ) {\n\t\tif ( !startMenu ) {\n\t\t\tstartMenu = this.active ? this.active.parent() : this.element;\n\t\t}\n\n\t\tstartMenu.find( \".ui-menu\" )\n\t\t\t.hide()\n\t\t\t.attr( \"aria-hidden\", \"true\" )\n\t\t\t.attr( \"aria-expanded\", \"false\" );\n\t},\n\n\t_closeOnDocumentClick: function( event ) {\n\t\treturn !$( event.target ).closest( \".ui-menu\" ).length;\n\t},\n\n\t_isDivider: function( item ) {\n\n\t\t// Match hyphen, em dash, en dash\n\t\treturn !/[^\\-\\u2014\\u2013\\s]/.test( item.text() );\n\t},\n\n\tcollapse: function( event ) {\n\t\tvar newItem = this.active &&\n\t\t\tthis.active.parent().closest( \".ui-menu-item\", this.element );\n\t\tif ( newItem && newItem.length ) {\n\t\t\tthis._close();\n\t\t\tthis.focus( event, newItem );\n\t\t}\n\t},\n\n\texpand: function( event ) {\n\t\tvar newItem = this.active &&\n\t\t\tthis.active\n\t\t\t\t.children( \".ui-menu \" )\n\t\t\t\t\t.find( this.options.items )\n\t\t\t\t\t\t.first();\n\n\t\tif ( newItem && newItem.length ) {\n\t\t\tthis._open( newItem.parent() );\n\n\t\t\t// Delay so Firefox will not hide activedescendant change in expanding submenu from AT\n\t\t\tthis._delay( function() {\n\t\t\t\tthis.focus( event, newItem );\n\t\t\t} );\n\t\t}\n\t},\n\n\tnext: function( event ) {\n\t\tthis._move( \"next\", \"first\", event );\n\t},\n\n\tprevious: function( event ) {\n\t\tthis._move( \"prev\", \"last\", event );\n\t},\n\n\tisFirstItem: function() {\n\t\treturn this.active && !this.active.prevAll( \".ui-menu-item\" ).length;\n\t},\n\n\tisLastItem: function() {\n\t\treturn this.active && !this.active.nextAll( \".ui-menu-item\" ).length;\n\t},\n\n\t_move: function( direction, filter, event ) {\n\t\tvar next;\n\t\tif ( this.active ) {\n\t\t\tif ( direction === \"first\" || direction === \"last\" ) {\n\t\t\t\tnext = this.active\n\t\t\t\t\t[ direction === \"first\" ? \"prevAll\" : \"nextAll\" ]( \".ui-menu-item\" )\n\t\t\t\t\t.eq( -1 );\n\t\t\t} else {\n\t\t\t\tnext = this.active\n\t\t\t\t\t[ direction + \"All\" ]( \".ui-menu-item\" )\n\t\t\t\t\t.eq( 0 );\n\t\t\t}\n\t\t}\n\t\tif ( !next || !next.length || !this.active ) {\n\t\t\tnext = this.activeMenu.find( this.options.items )[ filter ]();\n\t\t}\n\n\t\tthis.focus( event, next );\n\t},\n\n\tnextPage: function( event ) {\n\t\tvar item, base, height;\n\n\t\tif ( !this.active ) {\n\t\t\tthis.next( event );\n\t\t\treturn;\n\t\t}\n\t\tif ( this.isLastItem() ) {\n\t\t\treturn;\n\t\t}\n\t\tif ( this._hasScroll() ) {\n\t\t\tbase = this.active.offset().top;\n\t\t\theight = this.element.height();\n\t\t\tthis.active.nextAll( \".ui-menu-item\" ).each( function() {\n\t\t\t\titem = $( this );\n\t\t\t\treturn item.offset().top - base - height < 0;\n\t\t\t} );\n\n\t\t\tthis.focus( event, item );\n\t\t} else {\n\t\t\tthis.focus( event, this.activeMenu.find( this.options.items )\n\t\t\t\t[ !this.active ? \"first\" : \"last\" ]() );\n\t\t}\n\t},\n\n\tpreviousPage: function( event ) {\n\t\tvar item, base, height;\n\t\tif ( !this.active ) {\n\t\t\tthis.next( event );\n\t\t\treturn;\n\t\t}\n\t\tif ( this.isFirstItem() ) {\n\t\t\treturn;\n\t\t}\n\t\tif ( this._hasScroll() ) {\n\t\t\tbase = this.active.offset().top;\n\t\t\theight = this.element.height();\n\t\t\tthis.active.prevAll( \".ui-menu-item\" ).each( function() {\n\t\t\t\titem = $( this );\n\t\t\t\treturn item.offset().top - base + height > 0;\n\t\t\t} );\n\n\t\t\tthis.focus( event, item );\n\t\t} else {\n\t\t\tthis.focus( event, this.activeMenu.find( this.options.items ).first() );\n\t\t}\n\t},\n\n\t_hasScroll: function() {\n\t\treturn this.element.outerHeight() < this.element.prop( \"scrollHeight\" );\n\t},\n\n\tselect: function( event ) {\n\n\t\t// TODO: It should never be possible to not have an active item at this\n\t\t// point, but the tests don't trigger mouseenter before click.\n\t\tthis.active = this.active || $( event.target ).closest( \".ui-menu-item\" );\n\t\tvar ui = { item: this.active };\n\t\tif ( !this.active.has( \".ui-menu\" ).length ) {\n\t\t\tthis.collapseAll( event, true );\n\t\t}\n\t\tthis._trigger( \"select\", event, ui );\n\t},\n\n\t_filterMenuItems: function( character ) {\n\t\tvar escapedCharacter = character.replace( /[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]/g, \"\\\\$&\" ),\n\t\t\tregex = new RegExp( \"^\" + escapedCharacter, \"i\" );\n\n\t\treturn this.activeMenu\n\t\t\t.find( this.options.items )\n\n\t\t\t\t// Only match on items, not dividers or other content (#10571)\n\t\t\t\t.filter( \".ui-menu-item\" )\n\t\t\t\t\t.filter( function() {\n\t\t\t\t\t\treturn regex.test(\n\t\t\t\t\t\t\t$.trim( $( this ).children( \".ui-menu-item-wrapper\" ).text() ) );\n\t\t\t\t\t} );\n\t}\n} );\n\n\n/*!\n * jQuery UI Selectmenu 1.12.0\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: Selectmenu\n//>>group: Widgets\n// jscs:disable maximumLineLength\n//>>description: Duplicates and extends the functionality of a native HTML select element, allowing it to be customizable in behavior and appearance far beyond the limitations of a native select.\n// jscs:enable maximumLineLength\n//>>docs: http://api.jqueryui.com/selectmenu/\n//>>demos: http://jqueryui.com/selectmenu/\n//>>css.structure: ../../themes/base/core.css\n//>>css.structure: ../../themes/base/selectmenu.css, ../../themes/base/button.css\n//>>css.theme: ../../themes/base/theme.css\n\n\n\nvar widgetsSelectmenu = $.widget( \"ui.selectmenu\", [ $.ui.formResetMixin, {\n\tversion: \"1.12.0\",\n\tdefaultElement: \"<select>\",\n\toptions: {\n\t\tappendTo: null,\n\t\tclasses: {\n\t\t\t\"ui-selectmenu-button-open\": \"ui-corner-top\",\n\t\t\t\"ui-selectmenu-button-closed\": \"ui-corner-all\"\n\t\t},\n\t\tdisabled: null,\n\t\ticons: {\n\t\t\tbutton: \"ui-icon-triangle-1-s\"\n\t\t},\n\t\tposition: {\n\t\t\tmy: \"left top\",\n\t\t\tat: \"left bottom\",\n\t\t\tcollision: \"none\"\n\t\t},\n\t\twidth: false,\n\n\t\t// Callbacks\n\t\tchange: null,\n\t\tclose: null,\n\t\tfocus: null,\n\t\topen: null,\n\t\tselect: null\n\t},\n\n\t_create: function() {\n\t\tvar selectmenuId = this.element.uniqueId().attr( \"id\" );\n\t\tthis.ids = {\n\t\t\telement: selectmenuId,\n\t\t\tbutton: selectmenuId + \"-button\",\n\t\t\tmenu: selectmenuId + \"-menu\"\n\t\t};\n\n\t\tthis._drawButton();\n\t\tthis._drawMenu();\n\t\tthis._bindFormResetHandler();\n\n\t\tthis._rendered = false;\n\t\tthis.menuItems = $();\n\t},\n\n\t_drawButton: function() {\n\t\tvar icon,\n\t\t\tthat = this,\n\t\t\titem = this._parseOption(\n\t\t\t\tthis.element.find( \"option:selected\" ),\n\t\t\t\tthis.element[ 0 ].selectedIndex\n\t\t\t);\n\n\t\t// Associate existing label with the new button\n\t\tthis.labels = this.element.labels().attr( \"for\", this.ids.button );\n\t\tthis._on( this.labels, {\n\t\t\tclick: function( event ) {\n\t\t\t\tthis.button.focus();\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t} );\n\n\t\t// Hide original select element\n\t\tthis.element.hide();\n\n\t\t// Create button\n\t\tthis.button = $( \"<span>\", {\n\t\t\ttabindex: this.options.disabled ? -1 : 0,\n\t\t\tid: this.ids.button,\n\t\t\trole: \"combobox\",\n\t\t\t\"aria-expanded\": \"false\",\n\t\t\t\"aria-autocomplete\": \"list\",\n\t\t\t\"aria-owns\": this.ids.menu,\n\t\t\t\"aria-haspopup\": \"true\",\n\t\t\ttitle: this.element.attr( \"title\" )\n\t\t} )\n\t\t\t.insertAfter( this.element );\n\n\t\tthis._addClass( this.button, \"ui-selectmenu-button ui-selectmenu-button-closed\",\n\t\t\t\"ui-button ui-widget\" );\n\n\t\ticon = $( \"<span>\" ).appendTo( this.button );\n\t\tthis._addClass( icon, \"ui-selectmenu-icon\", \"ui-icon \" + this.options.icons.button );\n\t\tthis.buttonItem = this._renderButtonItem( item )\n\t\t\t.appendTo( this.button );\n\n\t\tif ( this.options.width !== false ) {\n\t\t\tthis._resizeButton();\n\t\t}\n\n\t\tthis._on( this.button, this._buttonEvents );\n\t\tthis.button.one( \"focusin\", function() {\n\n\t\t\t// Delay rendering the menu items until the button receives focus.\n\t\t\t// The menu may have already been rendered via a programmatic open.\n\t\t\tif ( !that._rendered ) {\n\t\t\t\tthat._refreshMenu();\n\t\t\t}\n\t\t} );\n\t},\n\n\t_drawMenu: function() {\n\t\tvar that = this;\n\n\t\t// Create menu\n\t\tthis.menu = $( \"<ul>\", {\n\t\t\t\"aria-hidden\": \"true\",\n\t\t\t\"aria-labelledby\": this.ids.button,\n\t\t\tid: this.ids.menu\n\t\t} );\n\n\t\t// Wrap menu\n\t\tthis.menuWrap = $( \"<div>\" ).append( this.menu );\n\t\tthis._addClass( this.menuWrap, \"ui-selectmenu-menu\", \"ui-front\" );\n\t\tthis.menuWrap.appendTo( this._appendTo() );\n\n\t\t// Initialize menu widget\n\t\tthis.menuInstance = this.menu\n\t\t\t.menu( {\n\t\t\t\tclasses: {\n\t\t\t\t\t\"ui-menu\": \"ui-corner-bottom\"\n\t\t\t\t},\n\t\t\t\trole: \"listbox\",\n\t\t\t\tselect: function( event, ui ) {\n\t\t\t\t\tevent.preventDefault();\n\n\t\t\t\t\t// Support: IE8\n\t\t\t\t\t// If the item was selected via a click, the text selection\n\t\t\t\t\t// will be destroyed in IE\n\t\t\t\t\tthat._setSelection();\n\n\t\t\t\t\tthat._select( ui.item.data( \"ui-selectmenu-item\" ), event );\n\t\t\t\t},\n\t\t\t\tfocus: function( event, ui ) {\n\t\t\t\t\tvar item = ui.item.data( \"ui-selectmenu-item\" );\n\n\t\t\t\t\t// Prevent inital focus from firing and check if its a newly focused item\n\t\t\t\t\tif ( that.focusIndex != null && item.index !== that.focusIndex ) {\n\t\t\t\t\t\tthat._trigger( \"focus\", event, { item: item } );\n\t\t\t\t\t\tif ( !that.isOpen ) {\n\t\t\t\t\t\t\tthat._select( item, event );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthat.focusIndex = item.index;\n\n\t\t\t\t\tthat.button.attr( \"aria-activedescendant\",\n\t\t\t\t\t\tthat.menuItems.eq( item.index ).attr( \"id\" ) );\n\t\t\t\t}\n\t\t\t} )\n\t\t\t.menu( \"instance\" );\n\n\t\t// Don't close the menu on mouseleave\n\t\tthis.menuInstance._off( this.menu, \"mouseleave\" );\n\n\t\t// Cancel the menu's collapseAll on document click\n\t\tthis.menuInstance._closeOnDocumentClick = function() {\n\t\t\treturn false;\n\t\t};\n\n\t\t// Selects often contain empty items, but never contain dividers\n\t\tthis.menuInstance._isDivider = function() {\n\t\t\treturn false;\n\t\t};\n\t},\n\n\trefresh: function() {\n\t\tthis._refreshMenu();\n\t\tthis.buttonItem.replaceWith(\n\t\t\tthis.buttonItem = this._renderButtonItem(\n\n\t\t\t\t// Fall back to an empty object in case there are no options\n\t\t\t\tthis._getSelectedItem().data( \"ui-selectmenu-item\" ) || {}\n\t\t\t)\n\t\t);\n\t\tif ( this.options.width === null ) {\n\t\t\tthis._resizeButton();\n\t\t}\n\t},\n\n\t_refreshMenu: function() {\n\t\tvar item,\n\t\t\toptions = this.element.find( \"option\" );\n\n\t\tthis.menu.empty();\n\n\t\tthis._parseOptions( options );\n\t\tthis._renderMenu( this.menu, this.items );\n\n\t\tthis.menuInstance.refresh();\n\t\tthis.menuItems = this.menu.find( \"li\" )\n\t\t\t.not( \".ui-selectmenu-optgroup\" )\n\t\t\t\t.find( \".ui-menu-item-wrapper\" );\n\n\t\tthis._rendered = true;\n\n\t\tif ( !options.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\titem = this._getSelectedItem();\n\n\t\t// Update the menu to have the correct item focused\n\t\tthis.menuInstance.focus( null, item );\n\t\tthis._setAria( item.data( \"ui-selectmenu-item\" ) );\n\n\t\t// Set disabled state\n\t\tthis._setOption( \"disabled\", this.element.prop( \"disabled\" ) );\n\t},\n\n\topen: function( event ) {\n\t\tif ( this.options.disabled ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If this is the first time the menu is being opened, render the items\n\t\tif ( !this._rendered ) {\n\t\t\tthis._refreshMenu();\n\t\t} else {\n\n\t\t\t// Menu clears focus on close, reset focus to selected item\n\t\t\tthis._removeClass( this.menu.find( \".ui-state-active\" ), null, \"ui-state-active\" );\n\t\t\tthis.menuInstance.focus( null, this._getSelectedItem() );\n\t\t}\n\n\t\t// If there are no options, don't open the menu\n\t\tif ( !this.menuItems.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.isOpen = true;\n\t\tthis._toggleAttr();\n\t\tthis._resizeMenu();\n\t\tthis._position();\n\n\t\tthis._on( this.document, this._documentClick );\n\n\t\tthis._trigger( \"open\", event );\n\t},\n\n\t_position: function() {\n\t\tthis.menuWrap.position( $.extend( { of: this.button }, this.options.position ) );\n\t},\n\n\tclose: function( event ) {\n\t\tif ( !this.isOpen ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.isOpen = false;\n\t\tthis._toggleAttr();\n\n\t\tthis.range = null;\n\t\tthis._off( this.document );\n\n\t\tthis._trigger( \"close\", event );\n\t},\n\n\twidget: function() {\n\t\treturn this.button;\n\t},\n\n\tmenuWidget: function() {\n\t\treturn this.menu;\n\t},\n\n\t_renderButtonItem: function( item ) {\n\t\tvar buttonItem = $( \"<span>\" );\n\n\t\tthis._setText( buttonItem, item.label );\n\t\tthis._addClass( buttonItem, \"ui-selectmenu-text\" );\n\n\t\treturn buttonItem;\n\t},\n\n\t_renderMenu: function( ul, items ) {\n\t\tvar that = this,\n\t\t\tcurrentOptgroup = \"\";\n\n\t\t$.each( items, function( index, item ) {\n\t\t\tvar li;\n\n\t\t\tif ( item.optgroup !== currentOptgroup ) {\n\t\t\t\tli = $( \"<li>\", {\n\t\t\t\t\ttext: item.optgroup\n\t\t\t\t} );\n\t\t\t\tthat._addClass( li, \"ui-selectmenu-optgroup\", \"ui-menu-divider\" +\n\t\t\t\t\t( item.element.parent( \"optgroup\" ).prop( \"disabled\" ) ?\n\t\t\t\t\t\t\" ui-state-disabled\" :\n\t\t\t\t\t\t\"\" ) );\n\n\t\t\t\tli.appendTo( ul );\n\n\t\t\t\tcurrentOptgroup = item.optgroup;\n\t\t\t}\n\n\t\t\tthat._renderItemData( ul, item );\n\t\t} );\n\t},\n\n\t_renderItemData: function( ul, item ) {\n\t\treturn this._renderItem( ul, item ).data( \"ui-selectmenu-item\", item );\n\t},\n\n\t_renderItem: function( ul, item ) {\n\t\tvar li = $( \"<li>\" ),\n\t\t\twrapper = $( \"<div>\", {\n\t\t\t\ttitle: item.element.attr( \"title\" )\n\t\t\t} );\n\n\t\tif ( item.disabled ) {\n\t\t\tthis._addClass( li, null, \"ui-state-disabled\" );\n\t\t}\n\t\tthis._setText( wrapper, item.label );\n\n\t\treturn li.append( wrapper ).appendTo( ul );\n\t},\n\n\t_setText: function( element, value ) {\n\t\tif ( value ) {\n\t\t\telement.text( value );\n\t\t} else {\n\t\t\telement.html( \"&#160;\" );\n\t\t}\n\t},\n\n\t_move: function( direction, event ) {\n\t\tvar item, next,\n\t\t\tfilter = \".ui-menu-item\";\n\n\t\tif ( this.isOpen ) {\n\t\t\titem = this.menuItems.eq( this.focusIndex ).parent( \"li\" );\n\t\t} else {\n\t\t\titem = this.menuItems.eq( this.element[ 0 ].selectedIndex ).parent( \"li\" );\n\t\t\tfilter += \":not(.ui-state-disabled)\";\n\t\t}\n\n\t\tif ( direction === \"first\" || direction === \"last\" ) {\n\t\t\tnext = item[ direction === \"first\" ? \"prevAll\" : \"nextAll\" ]( filter ).eq( -1 );\n\t\t} else {\n\t\t\tnext = item[ direction + \"All\" ]( filter ).eq( 0 );\n\t\t}\n\n\t\tif ( next.length ) {\n\t\t\tthis.menuInstance.focus( event, next );\n\t\t}\n\t},\n\n\t_getSelectedItem: function() {\n\t\treturn this.menuItems.eq( this.element[ 0 ].selectedIndex ).parent( \"li\" );\n\t},\n\n\t_toggle: function( event ) {\n\t\tthis[ this.isOpen ? \"close\" : \"open\" ]( event );\n\t},\n\n\t_setSelection: function() {\n\t\tvar selection;\n\n\t\tif ( !this.range ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( window.getSelection ) {\n\t\t\tselection = window.getSelection();\n\t\t\tselection.removeAllRanges();\n\t\t\tselection.addRange( this.range );\n\n\t\t// Support: IE8\n\t\t} else {\n\t\t\tthis.range.select();\n\t\t}\n\n\t\t// Support: IE\n\t\t// Setting the text selection kills the button focus in IE, but\n\t\t// restoring the focus doesn't kill the selection.\n\t\tthis.button.focus();\n\t},\n\n\t_documentClick: {\n\t\tmousedown: function( event ) {\n\t\t\tif ( !this.isOpen ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( !$( event.target ).closest( \".ui-selectmenu-menu, #\" +\n\t\t\t\t\t$.ui.escapeSelector( this.ids.button ) ).length ) {\n\t\t\t\tthis.close( event );\n\t\t\t}\n\t\t}\n\t},\n\n\t_buttonEvents: {\n\n\t\t// Prevent text selection from being reset when interacting with the selectmenu (#10144)\n\t\tmousedown: function() {\n\t\t\tvar selection;\n\n\t\t\tif ( window.getSelection ) {\n\t\t\t\tselection = window.getSelection();\n\t\t\t\tif ( selection.rangeCount ) {\n\t\t\t\t\tthis.range = selection.getRangeAt( 0 );\n\t\t\t\t}\n\n\t\t\t// Support: IE8\n\t\t\t} else {\n\t\t\t\tthis.range = document.selection.createRange();\n\t\t\t}\n\t\t},\n\n\t\tclick: function( event ) {\n\t\t\tthis._setSelection();\n\t\t\tthis._toggle( event );\n\t\t},\n\n\t\tkeydown: function( event ) {\n\t\t\tvar preventDefault = true;\n\t\t\tswitch ( event.keyCode ) {\n\t\t\tcase $.ui.keyCode.TAB:\n\t\t\tcase $.ui.keyCode.ESCAPE:\n\t\t\t\tthis.close( event );\n\t\t\t\tpreventDefault = false;\n\t\t\t\tbreak;\n\t\t\tcase $.ui.keyCode.ENTER:\n\t\t\t\tif ( this.isOpen ) {\n\t\t\t\t\tthis._selectFocusedItem( event );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase $.ui.keyCode.UP:\n\t\t\t\tif ( event.altKey ) {\n\t\t\t\t\tthis._toggle( event );\n\t\t\t\t} else {\n\t\t\t\t\tthis._move( \"prev\", event );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase $.ui.keyCode.DOWN:\n\t\t\t\tif ( event.altKey ) {\n\t\t\t\t\tthis._toggle( event );\n\t\t\t\t} else {\n\t\t\t\t\tthis._move( \"next\", event );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase $.ui.keyCode.SPACE:\n\t\t\t\tif ( this.isOpen ) {\n\t\t\t\t\tthis._selectFocusedItem( event );\n\t\t\t\t} else {\n\t\t\t\t\tthis._toggle( event );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase $.ui.keyCode.LEFT:\n\t\t\t\tthis._move( \"prev\", event );\n\t\t\t\tbreak;\n\t\t\tcase $.ui.keyCode.RIGHT:\n\t\t\t\tthis._move( \"next\", event );\n\t\t\t\tbreak;\n\t\t\tcase $.ui.keyCode.HOME:\n\t\t\tcase $.ui.keyCode.PAGE_UP:\n\t\t\t\tthis._move( \"first\", event );\n\t\t\t\tbreak;\n\t\t\tcase $.ui.keyCode.END:\n\t\t\tcase $.ui.keyCode.PAGE_DOWN:\n\t\t\t\tthis._move( \"last\", event );\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.menu.trigger( event );\n\t\t\t\tpreventDefault = false;\n\t\t\t}\n\n\t\t\tif ( preventDefault ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t}\n\t},\n\n\t_selectFocusedItem: function( event ) {\n\t\tvar item = this.menuItems.eq( this.focusIndex ).parent( \"li\" );\n\t\tif ( !item.hasClass( \"ui-state-disabled\" ) ) {\n\t\t\tthis._select( item.data( \"ui-selectmenu-item\" ), event );\n\t\t}\n\t},\n\n\t_select: function( item, event ) {\n\t\tvar oldIndex = this.element[ 0 ].selectedIndex;\n\n\t\t// Change native select element\n\t\tthis.element[ 0 ].selectedIndex = item.index;\n\t\tthis.buttonItem.replaceWith( this.buttonItem = this._renderButtonItem( item ) );\n\t\tthis._setAria( item );\n\t\tthis._trigger( \"select\", event, { item: item } );\n\n\t\tif ( item.index !== oldIndex ) {\n\t\t\tthis._trigger( \"change\", event, { item: item } );\n\t\t}\n\n\t\tthis.close( event );\n\t},\n\n\t_setAria: function( item ) {\n\t\tvar id = this.menuItems.eq( item.index ).attr( \"id\" );\n\n\t\tthis.button.attr( {\n\t\t\t\"aria-labelledby\": id,\n\t\t\t\"aria-activedescendant\": id\n\t\t} );\n\t\tthis.menu.attr( \"aria-activedescendant\", id );\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tif ( key === \"icons\" ) {\n\t\t\tvar icon = this.button.find( \"span.ui-icon\" );\n\t\t\tthis._removeClass( icon, null, this.options.icons.button )\n\t\t\t\t._addClass( icon, null, value.button );\n\t\t}\n\n\t\tthis._super( key, value );\n\n\t\tif ( key === \"appendTo\" ) {\n\t\t\tthis.menuWrap.appendTo( this._appendTo() );\n\t\t}\n\n\t\tif ( key === \"width\" ) {\n\t\t\tthis._resizeButton();\n\t\t}\n\t},\n\n\t_setOptionDisabled: function( value ) {\n\t\tthis._super( value );\n\n\t\tthis.menuInstance.option( \"disabled\", value );\n\t\tthis.button.attr( \"aria-disabled\", value );\n\t\tthis._toggleClass( this.button, null, \"ui-state-disabled\", value );\n\n\t\tthis.element.prop( \"disabled\", value );\n\t\tif ( value ) {\n\t\t\tthis.button.attr( \"tabindex\", -1 );\n\t\t\tthis.close();\n\t\t} else {\n\t\t\tthis.button.attr( \"tabindex\", 0 );\n\t\t}\n\t},\n\n\t_appendTo: function() {\n\t\tvar element = this.options.appendTo;\n\n\t\tif ( element ) {\n\t\t\telement = element.jquery || element.nodeType ?\n\t\t\t\t$( element ) :\n\t\t\t\tthis.document.find( element ).eq( 0 );\n\t\t}\n\n\t\tif ( !element || !element[ 0 ] ) {\n\t\t\telement = this.element.closest( \".ui-front, dialog\" );\n\t\t}\n\n\t\tif ( !element.length ) {\n\t\t\telement = this.document[ 0 ].body;\n\t\t}\n\n\t\treturn element;\n\t},\n\n\t_toggleAttr: function() {\n\t\tthis.button.attr( \"aria-expanded\", this.isOpen );\n\n\t\t// We can't use two _toggleClass() calls here, because we need to make sure\n\t\t// we always remove classes first and add them second, otherwise if both classes have the\n\t\t// same theme class, it will be removed after we add it.\n\t\tthis._removeClass( this.button, \"ui-selectmenu-button-\" +\n\t\t\t( this.isOpen ? \"closed\" : \"open\" ) )\n\t\t\t._addClass( this.button, \"ui-selectmenu-button-\" +\n\t\t\t\t( this.isOpen ? \"open\" : \"closed\" ) )\n\t\t\t._toggleClass( this.menuWrap, \"ui-selectmenu-open\", null, this.isOpen );\n\n\t\tthis.menu.attr( \"aria-hidden\", !this.isOpen );\n\t},\n\n\t_resizeButton: function() {\n\t\tvar width = this.options.width;\n\n\t\t// For `width: false`, just remove inline style and stop\n\t\tif ( width === false ) {\n\t\t\tthis.button.css( \"width\", \"\" );\n\t\t\treturn;\n\t\t}\n\n\t\t// For `width: null`, match the width of the original element\n\t\tif ( width === null ) {\n\t\t\twidth = this.element.show().outerWidth();\n\t\t\tthis.element.hide();\n\t\t}\n\n\t\tthis.button.outerWidth( width );\n\t},\n\n\t_resizeMenu: function() {\n\t\tthis.menu.outerWidth( Math.max(\n\t\t\tthis.button.outerWidth(),\n\n\t\t\t// Support: IE10\n\t\t\t// IE10 wraps long text (possibly a rounding bug)\n\t\t\t// so we add 1px to avoid the wrapping\n\t\t\tthis.menu.width( \"\" ).outerWidth() + 1\n\t\t) );\n\t},\n\n\t_getCreateOptions: function() {\n\t\tvar options = this._super();\n\n\t\toptions.disabled = this.element.prop( \"disabled\" );\n\n\t\treturn options;\n\t},\n\n\t_parseOptions: function( options ) {\n\t\tvar that = this,\n\t\t\tdata = [];\n\t\toptions.each( function( index, item ) {\n\t\t\tdata.push( that._parseOption( $( item ), index ) );\n\t\t} );\n\t\tthis.items = data;\n\t},\n\n\t_parseOption: function( option, index ) {\n\t\tvar optgroup = option.parent( \"optgroup\" );\n\n\t\treturn {\n\t\t\telement: option,\n\t\t\tindex: index,\n\t\t\tvalue: option.val(),\n\t\t\tlabel: option.text(),\n\t\t\toptgroup: optgroup.attr( \"label\" ) || \"\",\n\t\t\tdisabled: optgroup.prop( \"disabled\" ) || option.prop( \"disabled\" )\n\t\t};\n\t},\n\n\t_destroy: function() {\n\t\tthis._unbindFormResetHandler();\n\t\tthis.menuWrap.remove();\n\t\tthis.button.remove();\n\t\tthis.element.show();\n\t\tthis.element.removeUniqueId();\n\t\tthis.labels.attr( \"for\", this.ids.element );\n\t}\n} ] );\n\n\n/*!\n * jQuery UI Spinner 1.12.0\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: Spinner\n//>>group: Widgets\n//>>description: Displays buttons to easily input numbers via the keyboard or mouse.\n//>>docs: http://api.jqueryui.com/spinner/\n//>>demos: http://jqueryui.com/spinner/\n//>>css.structure: ../../themes/base/core.css\n//>>css.structure: ../../themes/base/spinner.css\n//>>css.theme: ../../themes/base/theme.css\n\n\n\nfunction spinnerModifer( fn ) {\n\treturn function() {\n\t\tvar previous = this.element.val();\n\t\tfn.apply( this, arguments );\n\t\tthis._refresh();\n\t\tif ( previous !== this.element.val() ) {\n\t\t\tthis._trigger( \"change\" );\n\t\t}\n\t};\n}\n\n$.widget( \"ui.spinner\", {\n\tversion: \"1.12.0\",\n\tdefaultElement: \"<input>\",\n\twidgetEventPrefix: \"spin\",\n\toptions: {\n\t\tclasses: {\n\t\t\t\"ui-spinner\": \"ui-corner-all\",\n\t\t\t\"ui-spinner-down\": \"ui-corner-br\",\n\t\t\t\"ui-spinner-up\": \"ui-corner-tr\"\n\t\t},\n\t\tculture: null,\n\t\ticons: {\n\t\t\tdown: \"ui-icon-triangle-1-s\",\n\t\t\tup: \"ui-icon-triangle-1-n\"\n\t\t},\n\t\tincremental: true,\n\t\tmax: null,\n\t\tmin: null,\n\t\tnumberFormat: null,\n\t\tpage: 10,\n\t\tstep: 1,\n\n\t\tchange: null,\n\t\tspin: null,\n\t\tstart: null,\n\t\tstop: null\n\t},\n\n\t_create: function() {\n\n\t\t// handle string values that need to be parsed\n\t\tthis._setOption( \"max\", this.options.max );\n\t\tthis._setOption( \"min\", this.options.min );\n\t\tthis._setOption( \"step\", this.options.step );\n\n\t\t// Only format if there is a value, prevents the field from being marked\n\t\t// as invalid in Firefox, see #9573.\n\t\tif ( this.value() !== \"\" ) {\n\n\t\t\t// Format the value, but don't constrain.\n\t\t\tthis._value( this.element.val(), true );\n\t\t}\n\n\t\tthis._draw();\n\t\tthis._on( this._events );\n\t\tthis._refresh();\n\n\t\t// Turning off autocomplete prevents the browser from remembering the\n\t\t// value when navigating through history, so we re-enable autocomplete\n\t\t// if the page is unloaded before the widget is destroyed. #7790\n\t\tthis._on( this.window, {\n\t\t\tbeforeunload: function() {\n\t\t\t\tthis.element.removeAttr( \"autocomplete\" );\n\t\t\t}\n\t\t} );\n\t},\n\n\t_getCreateOptions: function() {\n\t\tvar options = this._super();\n\t\tvar element = this.element;\n\n\t\t$.each( [ \"min\", \"max\", \"step\" ], function( i, option ) {\n\t\t\tvar value = element.attr( option );\n\t\t\tif ( value != null && value.length ) {\n\t\t\t\toptions[ option ] = value;\n\t\t\t}\n\t\t} );\n\n\t\treturn options;\n\t},\n\n\t_events: {\n\t\tkeydown: function( event ) {\n\t\t\tif ( this._start( event ) && this._keydown( event ) ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t},\n\t\tkeyup: \"_stop\",\n\t\tfocus: function() {\n\t\t\tthis.previous = this.element.val();\n\t\t},\n\t\tblur: function( event ) {\n\t\t\tif ( this.cancelBlur ) {\n\t\t\t\tdelete this.cancelBlur;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._stop();\n\t\t\tthis._refresh();\n\t\t\tif ( this.previous !== this.element.val() ) {\n\t\t\t\tthis._trigger( \"change\", event );\n\t\t\t}\n\t\t},\n\t\tmousewheel: function( event, delta ) {\n\t\t\tif ( !delta ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif ( !this.spinning && !this._start( event ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tthis._spin( ( delta > 0 ? 1 : -1 ) * this.options.step, event );\n\t\t\tclearTimeout( this.mousewheelTimer );\n\t\t\tthis.mousewheelTimer = this._delay( function() {\n\t\t\t\tif ( this.spinning ) {\n\t\t\t\t\tthis._stop( event );\n\t\t\t\t}\n\t\t\t}, 100 );\n\t\t\tevent.preventDefault();\n\t\t},\n\t\t\"mousedown .ui-spinner-button\": function( event ) {\n\t\t\tvar previous;\n\n\t\t\t// We never want the buttons to have focus; whenever the user is\n\t\t\t// interacting with the spinner, the focus should be on the input.\n\t\t\t// If the input is focused then this.previous is properly set from\n\t\t\t// when the input first received focus. If the input is not focused\n\t\t\t// then we need to set this.previous based on the value before spinning.\n\t\t\tprevious = this.element[ 0 ] === $.ui.safeActiveElement( this.document[ 0 ] ) ?\n\t\t\t\tthis.previous : this.element.val();\n\t\t\tfunction checkFocus() {\n\t\t\t\tvar isActive = this.element[ 0 ] === $.ui.safeActiveElement( this.document[ 0 ] );\n\t\t\t\tif ( !isActive ) {\n\t\t\t\t\tthis.element.trigger( \"focus\" );\n\t\t\t\t\tthis.previous = previous;\n\n\t\t\t\t\t// support: IE\n\t\t\t\t\t// IE sets focus asynchronously, so we need to check if focus\n\t\t\t\t\t// moved off of the input because the user clicked on the button.\n\t\t\t\t\tthis._delay( function() {\n\t\t\t\t\t\tthis.previous = previous;\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Ensure focus is on (or stays on) the text field\n\t\t\tevent.preventDefault();\n\t\t\tcheckFocus.call( this );\n\n\t\t\t// Support: IE\n\t\t\t// IE doesn't prevent moving focus even with event.preventDefault()\n\t\t\t// so we set a flag to know when we should ignore the blur event\n\t\t\t// and check (again) if focus moved off of the input.\n\t\t\tthis.cancelBlur = true;\n\t\t\tthis._delay( function() {\n\t\t\t\tdelete this.cancelBlur;\n\t\t\t\tcheckFocus.call( this );\n\t\t\t} );\n\n\t\t\tif ( this._start( event ) === false ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._repeat( null, $( event.currentTarget )\n\t\t\t\t.hasClass( \"ui-spinner-up\" ) ? 1 : -1, event );\n\t\t},\n\t\t\"mouseup .ui-spinner-button\": \"_stop\",\n\t\t\"mouseenter .ui-spinner-button\": function( event ) {\n\n\t\t\t// button will add ui-state-active if mouse was down while mouseleave and kept down\n\t\t\tif ( !$( event.currentTarget ).hasClass( \"ui-state-active\" ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( this._start( event ) === false ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis._repeat( null, $( event.currentTarget )\n\t\t\t\t.hasClass( \"ui-spinner-up\" ) ? 1 : -1, event );\n\t\t},\n\n\t\t// TODO: do we really want to consider this a stop?\n\t\t// shouldn't we just stop the repeater and wait until mouseup before\n\t\t// we trigger the stop event?\n\t\t\"mouseleave .ui-spinner-button\": \"_stop\"\n\t},\n\n\t// Support mobile enhanced option and make backcompat more sane\n\t_enhance: function() {\n\t\tthis.uiSpinner = this.element\n\t\t\t.attr( \"autocomplete\", \"off\" )\n\t\t\t.wrap( \"<span>\" )\n\t\t\t.parent()\n\n\t\t\t\t// Add buttons\n\t\t\t\t.append(\n\t\t\t\t\t\"<a></a><a></a>\"\n\t\t\t\t);\n\t},\n\n\t_draw: function() {\n\t\tthis._enhance();\n\n\t\tthis._addClass( this.uiSpinner, \"ui-spinner\", \"ui-widget ui-widget-content\" );\n\t\tthis._addClass( \"ui-spinner-input\" );\n\n\t\tthis.element.attr( \"role\", \"spinbutton\" );\n\n\t\t// Button bindings\n\t\tthis.buttons = this.uiSpinner.children( \"a\" )\n\t\t\t.attr( \"tabIndex\", -1 )\n\t\t\t.attr( \"aria-hidden\", true )\n\t\t\t.button( {\n\t\t\t\tclasses: {\n\t\t\t\t\t\"ui-button\": \"\"\n\t\t\t\t}\n\t\t\t} );\n\n\t\t// TODO: Right now button does not support classes this is already updated in button PR\n\t\tthis._removeClass( this.buttons, \"ui-corner-all\" );\n\n\t\tthis._addClass( this.buttons.first(), \"ui-spinner-button ui-spinner-up\" );\n\t\tthis._addClass( this.buttons.last(), \"ui-spinner-button ui-spinner-down\" );\n\t\tthis.buttons.first().button( {\n\t\t\t\"icon\": this.options.icons.up,\n\t\t\t\"showLabel\": false\n\t\t} );\n\t\tthis.buttons.last().button( {\n\t\t\t\"icon\": this.options.icons.down,\n\t\t\t\"showLabel\": false\n\t\t} );\n\n\t\t// IE 6 doesn't understand height: 50% for the buttons\n\t\t// unless the wrapper has an explicit height\n\t\tif ( this.buttons.height() > Math.ceil( this.uiSpinner.height() * 0.5 ) &&\n\t\t\t\tthis.uiSpinner.height() > 0 ) {\n\t\t\tthis.uiSpinner.height( this.uiSpinner.height() );\n\t\t}\n\t},\n\n\t_keydown: function( event ) {\n\t\tvar options = this.options,\n\t\t\tkeyCode = $.ui.keyCode;\n\n\t\tswitch ( event.keyCode ) {\n\t\tcase keyCode.UP:\n\t\t\tthis._repeat( null, 1, event );\n\t\t\treturn true;\n\t\tcase keyCode.DOWN:\n\t\t\tthis._repeat( null, -1, event );\n\t\t\treturn true;\n\t\tcase keyCode.PAGE_UP:\n\t\t\tthis._repeat( null, options.page, event );\n\t\t\treturn true;\n\t\tcase keyCode.PAGE_DOWN:\n\t\t\tthis._repeat( null, -options.page, event );\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t_start: function( event ) {\n\t\tif ( !this.spinning && this._trigger( \"start\", event ) === false ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( !this.counter ) {\n\t\t\tthis.counter = 1;\n\t\t}\n\t\tthis.spinning = true;\n\t\treturn true;\n\t},\n\n\t_repeat: function( i, steps, event ) {\n\t\ti = i || 500;\n\n\t\tclearTimeout( this.timer );\n\t\tthis.timer = this._delay( function() {\n\t\t\tthis._repeat( 40, steps, event );\n\t\t}, i );\n\n\t\tthis._spin( steps * this.options.step, event );\n\t},\n\n\t_spin: function( step, event ) {\n\t\tvar value = this.value() || 0;\n\n\t\tif ( !this.counter ) {\n\t\t\tthis.counter = 1;\n\t\t}\n\n\t\tvalue = this._adjustValue( value + step * this._increment( this.counter ) );\n\n\t\tif ( !this.spinning || this._trigger( \"spin\", event, { value: value } ) !== false ) {\n\t\t\tthis._value( value );\n\t\t\tthis.counter++;\n\t\t}\n\t},\n\n\t_increment: function( i ) {\n\t\tvar incremental = this.options.incremental;\n\n\t\tif ( incremental ) {\n\t\t\treturn $.isFunction( incremental ) ?\n\t\t\t\tincremental( i ) :\n\t\t\t\tMath.floor( i * i * i / 50000 - i * i / 500 + 17 * i / 200 + 1 );\n\t\t}\n\n\t\treturn 1;\n\t},\n\n\t_precision: function() {\n\t\tvar precision = this._precisionOf( this.options.step );\n\t\tif ( this.options.min !== null ) {\n\t\t\tprecision = Math.max( precision, this._precisionOf( this.options.min ) );\n\t\t}\n\t\treturn precision;\n\t},\n\n\t_precisionOf: function( num ) {\n\t\tvar str = num.toString(),\n\t\t\tdecimal = str.indexOf( \".\" );\n\t\treturn decimal === -1 ? 0 : str.length - decimal - 1;\n\t},\n\n\t_adjustValue: function( value ) {\n\t\tvar base, aboveMin,\n\t\t\toptions = this.options;\n\n\t\t// Make sure we're at a valid step\n\t\t// - find out where we are relative to the base (min or 0)\n\t\tbase = options.min !== null ? options.min : 0;\n\t\taboveMin = value - base;\n\n\t\t// - round to the nearest step\n\t\taboveMin = Math.round( aboveMin / options.step ) * options.step;\n\n\t\t// - rounding is based on 0, so adjust back to our base\n\t\tvalue = base + aboveMin;\n\n\t\t// Fix precision from bad JS floating point math\n\t\tvalue = parseFloat( value.toFixed( this._precision() ) );\n\n\t\t// Clamp the value\n\t\tif ( options.max !== null && value > options.max ) {\n\t\t\treturn options.max;\n\t\t}\n\t\tif ( options.min !== null && value < options.min ) {\n\t\t\treturn options.min;\n\t\t}\n\n\t\treturn value;\n\t},\n\n\t_stop: function( event ) {\n\t\tif ( !this.spinning ) {\n\t\t\treturn;\n\t\t}\n\n\t\tclearTimeout( this.timer );\n\t\tclearTimeout( this.mousewheelTimer );\n\t\tthis.counter = 0;\n\t\tthis.spinning = false;\n\t\tthis._trigger( \"stop\", event );\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tvar prevValue, first, last;\n\n\t\tif ( key === \"culture\" || key === \"numberFormat\" ) {\n\t\t\tprevValue = this._parse( this.element.val() );\n\t\t\tthis.options[ key ] = value;\n\t\t\tthis.element.val( this._format( prevValue ) );\n\t\t\treturn;\n\t\t}\n\n\t\tif ( key === \"max\" || key === \"min\" || key === \"step\" ) {\n\t\t\tif ( typeof value === \"string\" ) {\n\t\t\t\tvalue = this._parse( value );\n\t\t\t}\n\t\t}\n\t\tif ( key === \"icons\" ) {\n\t\t\tfirst = this.buttons.first().find( \".ui-icon\" );\n\t\t\tthis._removeClass( first, null, this.options.icons.up );\n\t\t\tthis._addClass( first, null, value.up );\n\t\t\tlast = this.buttons.last().find( \".ui-icon\" );\n\t\t\tthis._removeClass( last, null, this.options.icons.down );\n\t\t\tthis._addClass( last, null, value.down );\n\t\t}\n\n\t\tthis._super( key, value );\n\t},\n\n\t_setOptionDisabled: function( value ) {\n\t\tthis._super( value );\n\n\t\tthis._toggleClass( this.uiSpinner, null, \"ui-state-disabled\", !!value );\n\t\tthis.element.prop( \"disabled\", !!value );\n\t\tthis.buttons.button( value ? \"disable\" : \"enable\" );\n\t},\n\n\t_setOptions: spinnerModifer( function( options ) {\n\t\tthis._super( options );\n\t} ),\n\n\t_parse: function( val ) {\n\t\tif ( typeof val === \"string\" && val !== \"\" ) {\n\t\t\tval = window.Globalize && this.options.numberFormat ?\n\t\t\t\tGlobalize.parseFloat( val, 10, this.options.culture ) : +val;\n\t\t}\n\t\treturn val === \"\" || isNaN( val ) ? null : val;\n\t},\n\n\t_format: function( value ) {\n\t\tif ( value === \"\" ) {\n\t\t\treturn \"\";\n\t\t}\n\t\treturn window.Globalize && this.options.numberFormat ?\n\t\t\tGlobalize.format( value, this.options.numberFormat, this.options.culture ) :\n\t\t\tvalue;\n\t},\n\n\t_refresh: function() {\n\t\tthis.element.attr( {\n\t\t\t\"aria-valuemin\": this.options.min,\n\t\t\t\"aria-valuemax\": this.options.max,\n\n\t\t\t// TODO: what should we do with values that can't be parsed?\n\t\t\t\"aria-valuenow\": this._parse( this.element.val() )\n\t\t} );\n\t},\n\n\tisValid: function() {\n\t\tvar value = this.value();\n\n\t\t// Null is invalid\n\t\tif ( value === null ) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// If value gets adjusted, it's invalid\n\t\treturn value === this._adjustValue( value );\n\t},\n\n\t// Update the value without triggering change\n\t_value: function( value, allowAny ) {\n\t\tvar parsed;\n\t\tif ( value !== \"\" ) {\n\t\t\tparsed = this._parse( value );\n\t\t\tif ( parsed !== null ) {\n\t\t\t\tif ( !allowAny ) {\n\t\t\t\t\tparsed = this._adjustValue( parsed );\n\t\t\t\t}\n\t\t\t\tvalue = this._format( parsed );\n\t\t\t}\n\t\t}\n\t\tthis.element.val( value );\n\t\tthis._refresh();\n\t},\n\n\t_destroy: function() {\n\t\tthis.element\n\t\t\t.prop( \"disabled\", false )\n\t\t\t.removeAttr( \"autocomplete role aria-valuemin aria-valuemax aria-valuenow\" );\n\n\t\tthis.uiSpinner.replaceWith( this.element );\n\t},\n\n\tstepUp: spinnerModifer( function( steps ) {\n\t\tthis._stepUp( steps );\n\t} ),\n\t_stepUp: function( steps ) {\n\t\tif ( this._start() ) {\n\t\t\tthis._spin( ( steps || 1 ) * this.options.step );\n\t\t\tthis._stop();\n\t\t}\n\t},\n\n\tstepDown: spinnerModifer( function( steps ) {\n\t\tthis._stepDown( steps );\n\t} ),\n\t_stepDown: function( steps ) {\n\t\tif ( this._start() ) {\n\t\t\tthis._spin( ( steps || 1 ) * -this.options.step );\n\t\t\tthis._stop();\n\t\t}\n\t},\n\n\tpageUp: spinnerModifer( function( pages ) {\n\t\tthis._stepUp( ( pages || 1 ) * this.options.page );\n\t} ),\n\n\tpageDown: spinnerModifer( function( pages ) {\n\t\tthis._stepDown( ( pages || 1 ) * this.options.page );\n\t} ),\n\n\tvalue: function( newVal ) {\n\t\tif ( !arguments.length ) {\n\t\t\treturn this._parse( this.element.val() );\n\t\t}\n\t\tspinnerModifer( this._value ).call( this, newVal );\n\t},\n\n\twidget: function() {\n\t\treturn this.uiSpinner;\n\t}\n} );\n\n// DEPRECATED\n// TODO: switch return back to widget declaration at top of file when this is removed\nif ( $.uiBackCompat !== false ) {\n\n\t// Backcompat for spinner html extension points\n\t$.widget( \"ui.spinner\", $.ui.spinner, {\n\t\t_enhance: function() {\n\t\t\tthis.uiSpinner = this.element\n\t\t\t\t.attr( \"autocomplete\", \"off\" )\n\t\t\t\t.wrap( this._uiSpinnerHtml() )\n\t\t\t\t.parent()\n\n\t\t\t\t\t// Add buttons\n\t\t\t\t\t.append( this._buttonHtml() );\n\t\t},\n\t\t_uiSpinnerHtml: function() {\n\t\t\treturn \"<span>\";\n\t\t},\n\n\t\t_buttonHtml: function() {\n\t\t\treturn \"<a></a><a></a>\";\n\t\t}\n\t} );\n}\n\nvar widgetsSpinner = $.ui.spinner;\n\n\n\n\n}));\nimport {d3scaleLinear} from \"d3-scale\";\nimport {d3geoTransform} from \"d3-geo\";\nimport {d3geoPath} from \"d3-geo\";\nimport {d3select} from \"d3-selection\";\n\nconsole.log('$', $);\nconsole.log('OpenLayers', OpenLayers);\n\n    var IMG_DIR = \"images/\",\n        map_data_path = \"data.json\",\n        map_data,\n        map_tile_path = \"/media/images/map/687/\",\n        map_w = 16384,\n        map_h = 16384,\n        map_x_boundaries = [-8475.58617377, 9327.49124559],\n        map_y_boundaries = [9028.52473332, -8836.61406266],\n        zoomify = new OpenLayers.Layer.Zoomify( \"Zoomify\", map_tile_path, new OpenLayers.Size( map_w, map_h ) ),\n        scale = Math.abs(map_x_boundaries[1] - map_x_boundaries[0])/map_w,\n        map = new OpenLayers.Map(\"map\", {\n            theme: null,\n            maxExtent: new OpenLayers.Bounds(0, 0, map_w, map_h),\n            numZoomLevels: 5,\n            maxResolution: Math.pow(2, 5-1 ),\n            units: \"m\",\n            controls: [\n                new OpenLayers.Control.Navigation(),\n                new OpenLayers.Control.Zoom({\n                    zoomInId: \"zoom-in\",\n                    zoomOutId: \"zoom-out\"\n                })\n            ]\n        }),\n        baseLayers = [\n            new OpenLayers.Layer.TMS(\"Default\", map_tile_path, {\n                type: \"jpg\",\n                getURL: getMyURL('default')\n            }),\n            new OpenLayers.Layer.TMS(\"Desert\", map_tile_path, {\n                type: \"jpg\",\n                getURL: getMyURL('desert')\n            }),\n            new OpenLayers.Layer.TMS(\"Immortal Gardens\", map_tile_path, {\n                type: \"jpg\",\n                getURL: getMyURL('immortalgardens')\n            })\n        ],\n        layerSwitcher = new OpenLayers.Control.LayerSwitcher({\n            ascending: false\n        }),\n        renderer = OpenLayers.Util.getParameters(window.location.href).renderer,\n        drawControls,\n        defaultHandlerOptions = {\n            regularpolygon: {\n                snapAngle: 15,\n                sides: 4,\n                radius: 1000\n            }\n        },\n        defaultStyles = {\n            brush: {\n                strokeWidth: 50,\n                strokeColor: '#ff0000',\n                strokeOpacity: 1,\n                pointRadius: 1,\n                fillColor: '#ff0000'\n            },\n            icon: {\n                externalGraphic: \"\",\n                graphicHeight: 512,\n                graphicOpacity: 1\n            },\n            line: {\n                strokeWidth: 25,\n                strokeColor: '#00ff00',\n                strokeOpacity: 1,\n                pointRadius: 1,\n                fillColor: '#00ff00'\n            },\n            polygon: {\n                strokeWidth: 10,\n                strokeColor: '#0000ff',\n                strokeOpacity: 1,\n                pointRadius: 1,\n                fillColor: '#ff00ff',\n                fillOpacity: 0.5\n            },\n            regularpolygon: {\n                strokeWidth: 20,\n                strokeColor: '#00ffff',\n                strokeOpacity: 1,\n                pointRadius: 1,\n                fillColor: '#aa00ff',\n                fillOpacity: 1\n            },\n            modify: {\n                strokeWidth: 2,\n                strokeColor: '#ff0000',\n                strokeOpacity: 1,\n                pointRadius: 50,\n                fillColor: '#ff0000',\n                graphicName: \"cross\"\n            },\n            selectfeature: {\n                strokeWidth: 2,\n                strokeColor: '#ff0000',\n                strokeOpacity: 1,\n                pointRadius: 50,\n                fillColor: '#ff0000',\n                graphicName: \"cross\"\n            },\n            measure: {\n                strokeWidth: 2,\n                strokeColor: '#ff0000',\n                strokeOpacity: 1,\n                pointRadius: 50,\n                fillColor: '#ff0000',\n                graphicName: \"cross\"\n            }\n        },\n        activeTool,\n        strokeTools = ['brush', 'line', 'polygon', 'regularpolygon'];\n\n    /***********************************\n     * QUERY STRING FUNCTIONS *\n     ***********************************/\n\n    var trim = (function() {\n        \"use strict\";\n\n        function escapeRegex(string) {\n            return string.replace(/[\\[\\](){}?*+\\^$\\\\.|\\-]/g, \"\\\\$&\");\n        }\n\n        return function trim(str, characters, flags) {\n            flags = flags || \"g\";\n            if (typeof str !== \"string\" || typeof characters !== \"string\" || typeof flags !== \"string\") {\n                throw new TypeError(\"argument must be string\");\n            }\n\n            if (!/^[gi]*$/.test(flags)) {\n                throw new TypeError(\"Invalid flags supplied '\" + flags.match(new RegExp(\"[^gi]*\")) + \"'\");\n            }\n\n            characters = escapeRegex(characters);\n\n            return str.replace(new RegExp(\"^[\" + characters + \"]+|[\" + characters + \"]+$\", flags), '');\n        };\n    }());\n\n    function getParameterByName(name) {\n        name = name.replace(/[\\[]/, \"\\\\[\").replace(/[\\]]/, \"\\\\]\");\n        var regex = new RegExp(\"[\\\\?&]\" + name + \"=([^&#]*)\"),\n            results = regex.exec(location.search);\n        return results == null ? \"\" : decodeURIComponent(results[1].replace(/\\+/g, \" \"));\n    }\n\n    function setQueryString(key, value) {\n        history.pushState(null, \"\", updateQueryString(key, value));\n    }\n\n    function addQueryStringValue(key, value) {\n        console.log('addQueryStringValue', key, value);\n        var qs = getParameterByName(key);\n        qs = trim(trim(qs, ' ;') + ';' + value, ' ;');\n        history.pushState(null, \"\", updateQueryString(key, qs));\n    }\n\n    function removeQueryStringValue(key, value) {\n        console.log('removeQueryStringValue', key, value);\n        var qs = getParameterByName(key);\n        qs = trim(trim(qs, ' ;').replace(value, '').replace(/;;/g, ''), ' ;');\n        history.pushState(null, \"\", updateQueryString(key, qs != '' ? qs : null));\n    }\n\n    function updateQueryString(key, value, url) {\n        if (!url) url = window.location.href;\n        var re = new RegExp(\"([?&])\" + key + \"=.*?(&|#|$)(.*)\", \"gi\"),\n            hash;\n\n        if (re.test(url)) {\n            if (typeof value !== 'undefined' && value !== null)\n                return url.replace(re, '$1' + key + \"=\" + value + '$2$3');\n            else {\n                hash = url.split('#');\n                url = hash[0].replace(re, '$1$3').replace(/(&|\\?)$/, '');\n                if (typeof hash[1] !== 'undefined' && hash[1] !== null)\n                    url += '#' + hash[1];\n                return url;\n            }\n        } else {\n            if (typeof value !== 'undefined' && value !== null) {\n                var separator = url.indexOf('?') !== -1 ? '&' : '?';\n                hash = url.split('#');\n                url = hash[0] + separator + key + '=' + value;\n                if (typeof hash[1] !== 'undefined' && hash[1] !== null)\n                    url += '#' + hash[1];\n                return url;\n            } else {\n                return url;\n            }\n        }\n    }\n\n    /***********************************\n     * COORDINATE CONVERSION FUNCTIONS *\n     ***********************************/\n\n    function getTileRadius(r) {\n        return parseInt(Math.floor(r / 64));\n    }\n\n    function lerp(minVal, maxVal, pos_r) {\n        return pos_r * (maxVal - minVal) + minVal;\n    }\n\n    function reverseLerp(minVal, maxVal, pos) {\n        return (pos - minVal) / (maxVal - minVal);\n    }\n\n    function latLonToWorld(x, y) {\n        var x_r = lerp(map_x_boundaries[0], map_x_boundaries[1], x / map_w),\n            y_r = lerp(map_y_boundaries[0], map_y_boundaries[1], (map_h - y) / map_h);\n\n        return {\n            x: x_r,\n            y: y_r\n        };\n    }\n\n    function worldToLatLon(x_r, y_r) {\n        var x = reverseLerp(map_x_boundaries[0], map_x_boundaries[1], x_r) * map_w,\n            y = map_h - reverseLerp(map_y_boundaries[0], map_y_boundaries[1], y_r) * map_h;\n\n        return {\n            x: x,\n            y: y\n        };\n    }\n\n    function getScaledRadius(r) {\n        return r / (map_x_boundaries[1] - map_x_boundaries[0]) * map_w\n    }\n\n    function calculateDistance(order, units, measure) {\n        if (order == 1) {\n            if (units == \"km\") {\n                return measure * scale * 1000;\n            } else {\n                return measure * scale;\n            }\n        } else {\n            return measure * scale;\n        }\n    }\n\n    /**************\n     * UI WIDGETS *\n     **************/\n\n    function formatDegree(value) {\n        return value + '�';\n    }\n    \n    $.widget( \"ui.degreespinner\", $.ui.spinner, {\n        _format: formatDegree,\n        _parse: function(value) { return parseFloat(value); }\n    });\n\n    function formatPercent(value) {\n        return value + '%';\n    }\n    \n    $.widget( \"ui.percentspinner\", $.ui.spinner, {\n        _format: formatPercent,\n        _parse: function(value) { return parseFloat(value); }\n    });\n    \n    $.widget(\"custom.iconselectmenu\", $.ui.selectmenu, {\n        _renderItem: function(ul, item) {\n            var li = $(\"<li>\"),\n                wrapper = $(\"<div>\");\n\n            if (item.disabled) {\n                li.addClass(\"ui-state-disabled\");\n            }\n\n            $(\"<div>\", {\n                    \"class\": 'selectmenu-label',\n                    text: item.label\n                })\n                .appendTo(wrapper);\n                \n            $(\"<div>\", {\n                    style: item.element.attr(\"data-style\"),\n                    \"class\": \"selectmenu-icon \" + item.element.attr(\"data-class\")\n                })\n                .appendTo(wrapper);\n\n            return li.append(wrapper).appendTo(ul);\n        }\n    });\n    \n    /********************\n     * CONTROL HANDLERS *\n     ********************/\n\n    function toggleModifyControl() {\n        console.log(this.value);\n        drawControls.modify.mode = OpenLayers.Control.ModifyFeature.RESHAPE;\n        switch (this.value) {\n            case 'reshape':\n                drawControls.modify.mode = OpenLayers.Control.ModifyFeature.RESHAPE;\n            break;\n            case 'rotate':\n                drawControls.modify.mode = OpenLayers.Control.ModifyFeature.ROTATE;\n            break;\n            case 'scale':\n                drawControls.modify.mode |= OpenLayers.Control.ModifyFeature.RESIZE;\n                drawControls.modify.mode &= ~OpenLayers.Control.ModifyFeature.RESHAPE;\n            break;\n            case 'skew':\n                drawControls.modify.mode |= OpenLayers.Control.ModifyFeature.RESIZE;\n            break;\n            case 'drag':\n                drawControls.modify.mode = OpenLayers.Control.ModifyFeature.DRAG;\n            break;\n        }\n        console.log('drawControls.modify', drawControls.modify);\n        var feature = drawControls.modify.feature;\n        if (feature) {\n            drawControls.modify.unselectFeature(feature);\n            drawControls.modify.selectFeature(feature);\n        }\n    }\n    \n    function toggleControl() {\n        var control;\n        var tools = Object.keys(defaultStyles);\n        $('#toolbar').hide();\n        for (var key in drawControls) {\n            control = drawControls[key];\n            console.log(this.value, key, this.checked);\n            if (this.value == key && this.checked) {\n                control.activate();\n                map.updateSize();\n                console.log(key);\n                if (tools.indexOf(key) != -1) {\n                    $('#toolbar').show();\n                    updateTools(key);\n                    if (key == 'modify') {\n                        //vectors.events.register(\"beforefeaturemodified\", drawControls[key], onFeatureModified);\n                        vectors.events.register(\"afterfeaturemodified\", drawControls[key], onFeatureModified);\n                    }\n                    else {\n                        vectors.events.register(\"sketchcomplete\", drawControls[key], onSketchCompletedHandlers[key]);\n                    }\n                }\n            } else {\n                control.deactivate();\n                if (tools.indexOf(key) != -1) {\n                    if (key == 'modify') {\n                        //vectors.events.unregister(\"beforefeaturemodified\", drawControls[key], onFeatureModified);\n                        vectors.events.unregister(\"afterfeaturemodified\", drawControls[key], onFeatureModified);\n                    }\n                    else {\n                        vectors.events.unregister(\"sketchcomplete\", drawControls[key], onSketchCompletedHandlers[key]);\n                    }\n                }\n            }\n        }\n        if (this.value === \"draw\") {\n            $('#toolbar').show();\n            var selectedTool = document.querySelector('input[name=\"tool-radio\"]:checked');\n            if (!selectedTool) {\n                selectedTool = document.querySelector('input[name=\"tool-radio\"]');\n                selectedTool.checked = true;\n                updateTools(selectedTool.value);\n            }\n            toggleControl.call(selectedTool);\n        }\n    }\n    \n    function updateTools(value) {\n        console.log(\"updateTools\", value);\n        activeTool = value;\n        $(\".tool-radiobutton\").checkboxradio(\"refresh\");\n        $('.tool-setting').hide();\n        $('.' + value + '-tool-group').css('display', 'inline-block');\n    }\n\n    // creates url for tiles. OpenLayers TMS Layer getURL property is set to this\n    function getMyURL(baseLayer) {\n        return function(bounds) {\n            //console.log('getMyURL', baseLayer);\n            var res = this.map.getResolution(),\n                x = Math.round((bounds.left - this.maxExtent.left) / (res * this.tileSize.w)),\n                y = Math.round((this.maxExtent.top - bounds.top) / (res * this.tileSize.h)),\n                z = map.getZoom(),\n                path = z + \"/tile_\" + x + \"_\" + y + \".\" + this.type,\n                url = this.url;\n\n            if (url instanceof Array) {\n                url = this.selectUrl(path, url)\n            }\n            return url + baseLayer + '/' + path\n        }\n    }\n\n    // Initialize map settings based on query string values\n    function parseQueryString() {\n        var id = getParameterByName('id');\n        if (id) {\n            $.get('save/' + id + '.json', function (data) {\n                console.log(data);\n                var parser = new OpenLayers.Format.GeoJSON()\n                vectors.addFeatures(parser.read(data));\n            });\n            map.zoomTo(parseInt(zoom));\n        }\n        \n        var zoom = getParameterByName('zoom');\n        if (zoom) {\n            map.zoomTo(parseInt(zoom));\n        }\n        var worldX = getParameterByName('x');\n        var worldY = getParameterByName('y');\n        if (worldX && worldY) {\n            var lonlat = worldToLatLon(worldX, worldY);\n            map.setCenter(new OpenLayers.LonLat(lonlat.x, lonlat.y), undefined, false, false);\n        }\n        \n        var baseLayerName = getParameterByName('BaseLayer');\n        if (baseLayerName) {\n            for (var i = 0; i < baseLayers.length; i++) {\n                var layer = baseLayers[i];\n                var layerName = layer.name.replace(/ /g, '');\n                if (baseLayerName === layerName) {\n                    map.setBaseLayer(layer);\n                    break;\n                }\n            }\n        }\n    }\n\n    /******************\n     * STROKE UI INIT *\n     ******************/\n\n    strokeTools.forEach(function (key) {\n        initStrokeWidth(key);\n        initStrokeOpacity(key);\n        initStrokeColor(key);\n    });\n    initStrokeOpacity('polygon', true);\n    initStrokeColor('polygon', true);\n    initStrokeOpacity('regularpolygon', true);\n    initStrokeColor('regularpolygon', true);\n    initDegreeSpinner('regularpolygon', 'snap-angle', 'snapAngle');\n    initSpinner('regularpolygon', 'side-count', 'sides', {\n        min: 3,\n        step: 1\n    });\n    initSpinner('regularpolygon', 'radius', 'radius', {\n        min: 1,\n        step: 1\n    });\n    \n    $('#regularpolygon-snap').checkboxradio({icon: false}).change(function () {\n        var key = 'regularpolygon';\n        var prop = 'snapAngle';\n        var v;\n        if (this.checked) {\n            v = $(this).data('snapAngle');\n            $('#regularpolygon-snap-angle').degreespinner( \"enable\" );\n        }\n        else {\n            v = null;\n            $(this).data('snapAngle', defaultHandlerOptions[key][prop])\n            defaultHandlerOptions[key][prop] = null;\n            $('#regularpolygon-snap-angle').degreespinner( \"disable\" );\n        }\n        defaultHandlerOptions[key][prop] = v;\n        updateHandlerOption(key, prop, v);\n    }).data('snapAngle', defaultHandlerOptions.regularpolygon.snapAngle);\n    \n    $('#regularpolygon-fixed-radius').checkboxradio({icon: false}).change(function () {\n        var key = 'regularpolygon';\n        var prop = 'radius';\n        var v;\n        if (this.checked) {\n            v = $(this).data('radius');\n            $('#regularpolygon-radius').spinner( \"enable\" );\n            $('#regularpolygon-irregular').prop('checked', false).checkboxradio( \"refresh\" );\n            updateHandlerOption('regularpolygon', 'irregular', false);\n        }\n        else {\n            v = null;\n            $(this).data('radius', defaultHandlerOptions[key][prop])\n            defaultHandlerOptions[key][prop] = null;\n            $('#regularpolygon-radius').spinner( \"disable\" );\n        }\n        defaultHandlerOptions[key][prop] = v;\n        updateHandlerOption(key, prop, v);\n    }).data('radius', defaultHandlerOptions.regularpolygon.radius);\n    \n    $('#regularpolygon-irregular').checkboxradio({icon: false}).change(function () {\n        var key = 'regularpolygon';\n        var prop = 'irregular';\n        var v = this.checked;\n        if (this.checked) {\n            $('#regularpolygon-fixed-radius').prop('checked', false).checkboxradio( \"refresh\" );\n            $('#regularpolygon-radius').spinner( \"disable\" );\n        }\n        else {\n            \n        }\n        /*if (this.checked) {\n            v = $(this).data('snapAngle');\n            $('#regularpolygon-snap-angle').degreespinner( \"enable\" );\n        }\n        else {\n            v = null;\n            $(this).data('snapAngle', defaultHandlerOptions[key][prop])\n            defaultHandlerOptions[key][prop] = null;\n            $('#regularpolygon-snap-angle').degreespinner( \"disable\" );\n        }\n        defaultHandlerOptions[key][prop] = v;*/\n        updateHandlerOption(key, prop, v);\n    });\n    \n    // stroke width spinner\n    function initStrokeWidth(key) {\n        $('#' + key + '-stroke-width').spinner({\n            min: 1,\n            step: 1,\n            change: function (event, ui) {\n                var v = parseInt(this.value);\n                if (isNaN(v)) {\n                    v = parseInt(defaultStyles[key].strokeWidth);\n                }\n                else {\n                    defaultStyles[key].strokeWidth = v;\n                }\n                $(this).val(v);\n            },\n            stop: function (event, ui) {\n                var v = parseInt(this.value);\n                if (!isNaN(v)) {\n                    defaultStyles[key].strokeWidth = v;\n                }\n            }\n        }).val(defaultStyles[key].strokeWidth);\n    }\n    \n    // stroke opacity spinner\n    function initStrokeOpacity(key, isFill) {\n        var target = isFill ? 'fill' : 'stroke';\n        var strokeOpacityPreview = document.querySelector('#' + key + '-' + target + '-opacity-icon .opacity-preview-icon');\n        $('#' + key + '-' + target + '-opacity').percentspinner({\n            min: 0,\n            max: 100,\n            step: 1,\n            change: function (event, ui) {\n                var v = parseInt(this.value);\n                if (isNaN(v)) {\n                    v = parseInt(defaultStyles[key][target + 'Opacity'] * 100);\n                }\n                else {\n                    defaultStyles[key][target + 'Opacity'] = v/100;\n                    strokeOpacityPreview.style.opacity = defaultStyles[key][target + 'Opacity'];\n                }\n                $(this).val(formatPercent(v));\n            },\n            spin: function(event, ui) {\n                strokeOpacityPreview.style.opacity = ui.value/100;\n            },\n            stop: function (event, ui) {\n                var v = parseInt(this.value);\n                if (!isNaN(v)) {\n                    defaultStyles[key][target + 'Opacity'] = v/100;\n                    strokeOpacityPreview.style.opacity = defaultStyles[key][target + 'Opacity'];\n                }\n            }\n        }).val(formatPercent(defaultStyles[key][target + 'Opacity']*100));\n    }\n    \n    // stroke color picker\n    function initStrokeColor(key, isFill) {\n        var target = isFill ? 'fill' : 'stroke';\n        var colorPreview = document.getElementById(key + '-' + target + '-color-preview');\n        var colorPicker = new CP(document.getElementById(key + '-' + target + '-color-picker'));\n        colorPicker.set(defaultStyles[key][target + 'Color']);\n        colorPicker.on(\"enter\", function() {\n            var color = '#' + this._HSV2HEX(this.set());\n            colorPreview.title = color;\n            colorPreview.style.backgroundColor = color;\n        });\n        colorPicker.on(\"change\", function(color) {\n            this.target.value = '#' + color;\n            colorPreview.style.backgroundColor = '#' + color;\n            defaultStyles[key][target + 'Color'] = '#' + color;\n        });\n        colorPicker.on(\"exit\", function() {\n            this.target.value = colorPreview.title;\n        });\n        $(colorPreview).click(function () {\n            if (!colorPicker.visible) {\n                colorPicker.enter();\n            }\n        });\n        \n        var closeButton = document.createElement('button');\n        closeButton.innerHTML = 'Close';\n        closeButton.className = 'color-picker-close tool-button';\n        closeButton.addEventListener(\"click\", function() {\n            colorPicker.exit();\n        }, false);\n        colorPicker.picker.appendChild(closeButton);\n    }\n    \n    function initDegreeSpinner(key, name, prop) {\n        $('#' + key + '-' + name).degreespinner({\n            min: 0,\n            max: 360,\n            step: 1,\n            change: function (event, ui) {\n                var v = parseInt(this.value);\n                if (isNaN(v)) {\n                    v = parseInt(defaultHandlerOptions[key][prop]);\n                }\n                else {\n                    defaultHandlerOptions[key][prop] = v;\n                    updateHandlerOption(key, prop, v);\n                }\n                $(this).val(formatDegree(v));\n            },\n            stop: function (event, ui) {\n                var v = parseInt(this.value);\n                if (!isNaN(v)) {\n                    defaultHandlerOptions[key][prop] = v;\n                    updateHandlerOption(key, prop, v);\n                }\n            }\n        }).val(formatDegree(defaultHandlerOptions[key][prop]));\n    }\n    \n    function initSpinner(key, name, prop, options, spinnerType, formatFunction) {\n        var spinnerType = spinnerType || 'spinner';\n        var formatFunction = formatFunction || identity;\n        $('#' + key + '-' + name)[spinnerType](OpenLayers.Util.extend({\n            change: function (event, ui) {\n                var v = parseInt(this.value);\n                if (isNaN(v)) {\n                    v = parseInt(defaultHandlerOptions[key][prop]);\n                }\n                else {\n                    defaultHandlerOptions[key][prop] = v;\n                    updateHandlerOption(key, prop, v);\n                }\n                $(this).val(formatFunction(v));\n            },\n            stop: function (event, ui) {\n                var v = parseInt(this.value);\n                if (!isNaN(v)) {\n                    defaultHandlerOptions[key][prop] = v;\n                    updateHandlerOption(key, prop, v);\n                }\n            }\n        }, options)).val(formatFunction(defaultHandlerOptions[key][prop]));\n    }\n    \n    function identity(v) { return v };\n    \n    function updateHandlerOption(key, prop, value) {\n        var option = {};\n        option[prop] = value;\n        drawControls[key].handler.setOptions(option);\n    }\n    \n    /****************\n     * ICON UI INIT *\n     ****************/\n     \n     // marker size spinner\n    $('#marker-size').spinner({\n        min: 32,\n        step: 32,\n        change: function (event, ui) {\n            var v = parseInt(this.value);\n            if (isNaN(v)) {\n                v = parseInt(defaultStyles.icon.graphicHeight);\n            }\n            else {\n                defaultStyles.icon.graphicHeight = v;\n            }\n            $(this).val(v);\n        },\n        stop: function (event, ui) {\n            var v = parseInt(this.value);\n            if (!isNaN(v)) {\n                defaultStyles.icon.graphicHeight = v;\n            }\n        }\n    }).val(defaultStyles.icon.graphicHeight);\n    \n    // marker opacity spinner\n    var markerOpacityPreview = document.querySelector('#marker-opacity-icon .opacity-preview-icon');\n    $('#marker-opacity').percentspinner({\n        min: 0,\n        max: 100,\n        step: 1,\n        change: function (event, ui) {\n            var v = parseInt(this.value);\n            if (isNaN(v)) {\n                v = parseInt(defaultStyles.icon.graphicOpacity * 100);\n            }\n            else {\n                defaultStyles.icon.graphicOpacity = v/100;\n                markerOpacityPreview.style.opacity = defaultStyles.icon.graphicOpacity;\n            }\n            $(this).val(formatPercent(v));\n        },\n        spin: function(event, ui) {\n            markerOpacityPreview.style.opacity = ui.value/100;\n        },\n        stop: function (event, ui) {\n            var v = parseInt(this.value);\n            if (!isNaN(v)) {\n                defaultStyles.icon.graphicOpacity = v/100;\n                markerOpacityPreview.style.opacity = defaultStyles.icon.graphicOpacity;\n            }\n        }\n    }).val(formatPercent(defaultStyles.icon.graphicOpacity*100));\n    \n    // icon select dropdown\n    $.getJSON(\"sprite_manifest.json\", function (data) {\n        var img_root = '/media/images/miniheroes/';\n        for (var i = 0; i < data.heroes.length; i++) {\n            var $option = $('<option value=\"' + img_root + data.heroes[i].file + '\">').text(data.heroes[i].name).attr(\"data-class\", 'miniheroes-sprite-' + data.heroes[i].id);\n            $('#marker-image-dropdown').append($option);\n        }\n        for (var i = 0; i < data.other.length; i++) {\n            var $option = $('<option value=\"' + img_root + data.other[i].file + '\">').text(data.other[i].name).attr(\"data-class\", 'miniheroes-sprite' + data.other[i].id);\n            $('#marker-image-dropdown').append($option);\n        }\n        \n        $( \"#marker-image-dropdown\" ).iconselectmenu({\n            change: function( event, ui ) {\n                console.log('change', event, ui);\n                defaultStyles.icon.externalGraphic = ui.item.value;\n            }\n        });\n        \n        defaultStyles.icon.externalGraphic = $('#marker-image-dropdown > option')[0].value;\n    });\n    \n    /********************\n     * INITITIALIZATION *\n     ********************/\n     \n    // listen to key presses\n    OpenLayers.Event.observe(document, \"keydown\", function(evt) {\n        var handled = false;\n        console.log(evt.keyCode);\n        switch (evt.keyCode) {\n            case 90: // z\n                if (evt.metaKey || evt.ctrlKey) {\n                    console.log(vectors.features);\n                    drawUndo();\n                    handled = true;\n                }\n                break;\n            case 89: // y\n                if (evt.metaKey || evt.ctrlKey) {\n                    drawRedo();\n                    handled = true;\n                }\n                break;\n            case 27: // esc\n                handled = true;\n                break;\n            case 46: // esc\n                if (activeTool == 'modify') modifyDeleteFeature();\n                break;\n        }\n        if (handled) {\n            OpenLayers.Event.stop(evt);\n        }\n    });\n    \n    OpenLayers.ImgPath = IMG_DIR;\n    \n    // Start setting up the map, adding controls and layers\n    baseLayers.forEach(function(layer) {\n        map.addLayer(layer);\n    });\n    \n    function getStyle(key) {\n        return OpenLayers.Util.applyDefaults({}, defaultStyles[key]);\n    }\n    \n    function createStrokeStyleContext(key) {\n        return {\n            getPointRadius: function(feature) {\n                return (feature.attributes.style ? feature.attributes.style.pointRadius : getStyle(key).pointRadius) / map.getResolution();\n            },\n            getStrokeWidth: function(feature) {\n                return (feature.attributes.style ? feature.attributes.style.strokeWidth : getStyle(key).strokeWidth) / map.getResolution();\n            },\n            getStrokeColor: function(feature) {\n                return feature.attributes.style ? feature.attributes.style.strokeColor : getStyle(key).strokeColor;\n            },\n            getStrokeOpacity: function(feature) {\n                return feature.attributes.style ? feature.attributes.style.strokeOpacity : getStyle(key).strokeOpacity;\n            }\n        }\n    }\n    \n    function createFillStyleContext(key) {\n        return {\n            getFillColor: function(feature) {\n                return feature.attributes.style ? feature.attributes.style.fillColor : getStyle(key).fillColor;\n            },\n            getFillOpacity: function(feature) {\n                return feature.attributes.style ? feature.attributes.style.fillOpacity : getStyle(key).fillOpacity;\n            }\n        }\n    }\n    \n    // Returns style property stored in feature attribute or get current default style property\n    var styleContexts = {\n        brush: createStrokeStyleContext('brush'),\n        line: createStrokeStyleContext('line'),\n        polygon: OpenLayers.Util.extend(createStrokeStyleContext('polygon'), createFillStyleContext('polygon')),\n        regularpolygon: OpenLayers.Util.extend(createStrokeStyleContext('regularpolygon'), createFillStyleContext('regularpolygon')),\n        icon: {\n            getGraphicHeight: function(feature) {\n                return (feature.attributes.style ? feature.attributes.style.graphicHeight : getStyle('icon').graphicHeight) / map.getResolution();\n            },\n            getGraphicOpacity: function(feature) {\n                return feature.attributes.style ? feature.attributes.style.graphicOpacity : getStyle('icon').graphicOpacity;\n            },\n            getGraphicYOffset: function(feature) {\n                var externalGraphic = getStyle('icon').externalGraphic\n                if (externalGraphic.indexOf('ward_sentry') == -1 && externalGraphic.indexOf('ward_observer') == -1) {\n                    return -getStyle('icon').graphicHeight / map.getResolution() / 2;\n                }\n                else {\n                    return -getStyle('icon').graphicHeight / map.getResolution();\n                }\n            },\n            getExternalGraphic: function(feature) {\n                return feature.attributes.style ? feature.attributes.style.externalGraphic : getStyle('icon').externalGraphic;\n            }\n        },\n        modify: OpenLayers.Util.extend(createStrokeStyleContext('modify'), {\n            getGraphicName: function(feature) {\n                console.log('getGraphicName modify', feature.attributes.style ? feature.attributes.style.graphicName : getStyle('modify').graphicName);\n                return feature.attributes.style ? feature.attributes.style.graphicName : getStyle('modify').graphicName;\n            },\n            getExternalGraphic: function(feature) {\n                return \"\";\n            }\n        })\n    }\n    \n    var styleTemplates = {\n        brush: {\n            pointRadius: \"${getPointRadius}\",\n            strokeWidth: \"${getStrokeWidth}\",\n            strokeColor: \"${getStrokeColor}\",\n            strokeOpacity: \"${getStrokeOpacity}\"\n        },\n        line: {\n            pointRadius: \"${getPointRadius}\",\n            strokeWidth: \"${getStrokeWidth}\",\n            strokeColor: \"${getStrokeColor}\",\n            strokeOpacity: \"${getStrokeOpacity}\"\n        },\n        polygon: {\n            pointRadius: \"${getPointRadius}\",\n            strokeWidth: \"${getStrokeWidth}\",\n            strokeColor: \"${getStrokeColor}\",\n            strokeOpacity: \"${getStrokeOpacity}\",\n            fillColor: \"${getFillColor}\",\n            fillOpacity: \"${getFillOpacity}\"\n        },\n        regularpolygon: {\n            pointRadius: \"${getPointRadius}\",\n            strokeWidth: \"${getStrokeWidth}\",\n            strokeColor: \"${getStrokeColor}\",\n            strokeOpacity: \"${getStrokeOpacity}\",\n            fillColor: \"${getFillColor}\",\n            fillOpacity: \"${getFillOpacity}\"\n        },\n        icon: {\n            graphicOpacity: \"${getGraphicOpacity}\",\n            externalGraphic: \"${getExternalGraphic}\",\n            graphicYOffset: \"${getGraphicYOffset}\",\n            graphicHeight: \"${getGraphicHeight}\"\n        },\n        modify: {\n            pointRadius: \"${getPointRadius}\",\n            strokeWidth: \"${getStrokeWidth}\",\n            strokeColor: \"${getStrokeColor}\",\n            strokeOpacity: \"${getStrokeOpacity}\",\n            externalGraphic: \"${getExternalGraphic}\",\n            graphicName: \"${getGraphicName}\"\n        }\n    }\n\n    // Collection of all style objects\n    var styles = {\n        select: OpenLayers.Feature.Vector.style.select,\n        virtual: {\n            strokeColor: \"#ee9900\",\n            fillColor: \"#ee9900\",\n            strokeOpacity: 0.3,\n            strokeWidth: 2,\n            pointRadius: 8,\n            fillOpacity: 0.3,\n            graphicName: \"circle\"\n        },\n        vertex: new OpenLayers.Style(OpenLayers.Util.applyDefaults({\n            strokeWidth: 2,\n            pointRadius: 8,\n            graphicName: \"circle\",\n            externalGraphic: \"\"\n        }, OpenLayers.Feature.Vector.style['default']), {extendDefault: false})\n    };\n    \n    // Styles used by control temporary layers\n    for (k in defaultStyles) {\n        if (defaultStyles.hasOwnProperty(k)) {\n            styles[k] = new OpenLayers.Style(styleTemplates[k], {context: styleContexts[k]});\n        }\n    }\n    var zIndexCounter = 0;\n    // Custom default style returns feature attribute style values first with fallback to active tool value\n    styles['default'] = new OpenLayers.Style({\n        pointRadius: \"${getPointRadius}\",\n        strokeWidth: \"${getStrokeWidth}\",\n        strokeColor: \"${getStrokeColor}\",\n        strokeOpacity: \"${getStrokeOpacity}\",\n        fillColor: \"${getFillColor}\",\n        fillOpacity: \"${getFillOpacity}\",\n        graphicOpacity: \"${getGraphicOpacity}\",\n        externalGraphic: \"${getExternalGraphic}\",\n        graphicYOffset: \"${getGraphicYOffset}\",\n        graphicHeight: \"${getGraphicHeight}\",\n        graphicName: \"${getGraphicName}\",\n        graphicZIndex: \"${getGraphicZIndex}\"\n    },\n    {\n        extendDefault: true,\n        context: {\n            getPointRadius: function (feature) {\n                return (feature.attributes.style ? feature.attributes.style.pointRadius : getStyle(activeTool).pointRadius) / map.getResolution();\n            },\n            getStrokeWidth: function (feature) {\n                return (feature.attributes.style ? feature.attributes.style.strokeWidth : getStyle(activeTool).strokeWidth) / map.getResolution();\n            },\n            getStrokeColor: function (feature) {\n                return feature.attributes.style ? feature.attributes.style.strokeColor : getStyle(activeTool).strokeColor;\n            },\n            getStrokeOpacity: function (feature) {\n                return feature.attributes.style ? feature.attributes.style.strokeOpacity : getStyle(activeTool).strokeOpacity;\n            },\n            getFillColor: function (feature) {\n                return feature.attributes.style ? feature.attributes.style.fillColor : getStyle(activeTool).fillColor;\n            },\n            getFillOpacity: function (feature) {\n                return feature.attributes.style ? feature.attributes.style.fillOpacity : getStyle(activeTool).fillOpacity;\n            },\n            getGraphicHeight: function (feature) {\n                if (feature.attributes.style) {\n                    return feature.attributes.style.graphicHeight / map.getResolution();\n                }\n                else if (getStyle(activeTool).graphicHeight) {\n                    return getStyle(activeTool).graphicHeight / map.getResolution();\n                }\n                else {\n                    return OpenLayers.Feature.Vector.style['default'].graphicHeight;\n                }\n                return (feature.attributes.style ? feature.attributes.style.graphicHeight : getStyle(activeTool).graphicHeight) / map.getResolution();\n            },\n            getGraphicOpacity: function (feature) {\n                return feature.attributes.style ? feature.attributes.style.graphicOpacity : getStyle(activeTool).graphicOpacity;\n            },\n            getGraphicYOffset: function (feature) {\n                if (feature.attributes.style) {\n                    var externalGraphic = feature.attributes.style.externalGraphic;\n                    var graphicHeight = feature.attributes.style.graphicHeight;\n                }\n                else if (getStyle(activeTool).getGraphicYOffset) {\n                    var externalGraphic = getStyle(activeTool).externalGraphic;\n                    var graphicHeight = getStyle(activeTool).graphicHeight;\n                }\n                else {\n                    return OpenLayers.Feature.Vector.style['default'].getGraphicYOffset;\n                }\n                if (!externalGraphic || !graphicHeight) return OpenLayers.Feature.Vector.style['default'].getGraphicYOffset;\n                \n                if (externalGraphic.indexOf('ward_sentry') == -1 && externalGraphic.indexOf('ward_observer') == -1) {\n                    return -graphicHeight / map.getResolution() / 2;\n                }\n                else {\n                    return -graphicHeight / map.getResolution();\n                }\n            },\n            getExternalGraphic: function (feature) {\n                if (feature.attributes.style) {\n                    return feature.attributes.style.externalGraphic;\n                }\n                else if (getStyle(activeTool).externalGraphic) {\n                    return getStyle(activeTool).externalGraphic;\n                }\n                else {\n                    return OpenLayers.Feature.Vector.style['default'].externalGraphic;\n                }\n                return feature.attributes.style ? feature.attributes.style.externalGraphic : getStyle(activeTool).externalGraphic;\n            },\n            getGraphicName: function (feature) {\n                if (feature.attributes.style) {\n                    return feature.attributes.style.graphicName;\n                }\n                else if (getStyle(activeTool).graphicName) {\n                    return getStyle(activeTool).graphicName;\n                }\n                else {\n                    return OpenLayers.Feature.Vector.style['default'].graphicName;\n                }\n                return feature.attributes.style ? feature.attributes.style.graphicName : getStyle(activeTool).graphicName;\n            },\n            getGraphicZIndex: function (feature) {\n                console.log(\"graphicZIndex\", feature);\n                if (feature.attributes.hasOwnProperty('zIndex')) {\n                    console.log(\"graphicZIndex feature.attributes\", feature.attributes.zIndex);\n                    return feature.attributes.zIndex;\n                }\n                feature.attributes.zIndex = ++zIndexCounter;\n                console.log(\"graphicZIndex new feature.attributes\", feature.attributes.zIndex);\n                return feature.attributes.zIndex;\n            }\n        }\n    });\n    renderer = renderer ? [renderer] : OpenLayers.Layer.Vector.prototype.renderers;\n    var vectors = new OpenLayers.Layer.Vector(\"Canvas\", {\n        styleMap: new OpenLayers.StyleMap({\n            'default': styles['default'],\n            select: styles.select,\n            vertex: styles.vertex\n        }),\n        rendererOptions: { zIndexing: true },\n        renderers: [\"Canvas\"]//renderer //[\"Canvas\"]\n    });\n    map.addLayer(vectors);\n    \n    // X/Y coordinate update control\n    var coordinateControl = new OpenLayers.Control.MousePosition();\n    coordinateControl.formatOutput = function (lonlat) {\n        var worldXY = latLonToWorld(lonlat.lon, lonlat.lat);\n        return worldXY.x.toFixed(0) + ', ' + worldXY.y.toFixed(0);\n    };\n    map.addControl(coordinateControl);\n    \n    map.addControl(new OpenLayers.Control.TouchNavigation({\n        dragPanOptions: {\n            enableKinetic: true\n        }\n    }));\n    map.addControl(new OpenLayers.Control.KeyboardDefaults());\n    \n    layerSwitcher.onButtonClick = (function (fn) {\n        return function (evt) {\n            var button = evt.buttonElement;\n            if (button === this.maximizeDiv) {\n                $('.olControlLayerSwitcher').removeClass(\"minimized\");\n                if (isSmallScreen()) {\n                    minimizeControlList();\n                }\n            }\n            return fn.apply(this, arguments);\n        }\n    })(layerSwitcher.onButtonClick);\n    layerSwitcher.minimizeControl = function (e) {\n        $('.olControlLayerSwitcher').addClass(\"minimized\");\n        this.showControls(true);\n\n        if (e != null) {\n            OpenLayers.Event.stop(e);\n        }\n    }\n    layerSwitcher.loadContents = function () {\n        // layers list div\n        this.layersDiv = document.createElement(\"div\");\n        this.layersDiv.id = this.id + \"_layersDiv\";\n        OpenLayers.Element.addClass(this.layersDiv, \"layersDiv\");\n\n        this.baseLbl = document.createElement(\"div\");\n        this.baseLbl.innerHTML = OpenLayers.i18n(\"Base Layer\");\n        OpenLayers.Element.addClass(this.baseLbl, \"baseLbl\");\n\n        this.baseLayersDiv = document.createElement(\"div\");\n        OpenLayers.Element.addClass(this.baseLayersDiv, \"baseLayersDiv\");\n\n        this.dataLbl = document.createElement(\"div\");\n        this.dataLbl.innerHTML = OpenLayers.i18n(\"Overlays\");\n        OpenLayers.Element.addClass(this.dataLbl, \"dataLbl\");\n\n        this.dataLayersDiv = document.createElement(\"div\");\n        OpenLayers.Element.addClass(this.dataLayersDiv, \"dataLayersDiv\");\n\n        if (this.ascending) {\n            this.layersDiv.appendChild(this.baseLbl);\n            this.layersDiv.appendChild(this.baseLayersDiv);\n            this.layersDiv.appendChild(this.dataLbl);\n            this.layersDiv.appendChild(this.dataLayersDiv);\n        } else {\n            this.layersDiv.appendChild(this.dataLbl);\n            this.layersDiv.appendChild(this.dataLayersDiv);\n            this.layersDiv.appendChild(this.baseLbl);\n            this.layersDiv.appendChild(this.baseLayersDiv);\n        }\n\n        this.div.appendChild(this.layersDiv);\n\n        // maximize button div\n        this.maximizeDiv = OpenLayers.Util.createAlphaImageDiv(\n                                    \"OpenLayers_Control_MaximizeDiv\",\n                                    null,\n                                    null,\n                                    null,\n                                    \"initial\");\n        OpenLayers.Element.addClass(this.maximizeDiv, \"maximizeDiv olButton\");\n        this.maximizeDiv.style.display = \"none\";\n\n        this.div.appendChild(this.maximizeDiv);\n\n        // minimize button div\n        this.minimizeDiv = OpenLayers.Util.createAlphaImageDiv(\n                                    \"OpenLayers_Control_MinimizeDiv\",\n                                    null,\n                                    null,\n                                    null,\n                                    \"initial\");\n        OpenLayers.Element.addClass(this.minimizeDiv, \"minimizeDiv olButton\");\n        this.minimizeDiv.style.display = \"none\";\n\n        this.maximizeDiv.innerHTML;\n        this.minimizeDiv.innerHTML = '&times;';\n        $(this.maximizeDiv).empty().append($('<i class=\"fa fa-bars\">'));\n        this.div.appendChild(this.minimizeDiv);\n    }\n    map.addControl(layerSwitcher);\n    layerSwitcher.maximizeControl();\n    if (!map.getCenter()) {\n        map.zoomToMaxExtent();\n    }\n\n    // Controls configuration\n    drawControls = {\n        brush: new OpenLayers.Control.DrawFeature(vectors, OpenLayers.Handler.Path,\n        {\n            handlerOptions: {\n                freehand: true,\n                layerOptions: {\n                    styleMap: new OpenLayers.StyleMap(styles.brush)\n                }\n            }\n        }),\n        icon: new OpenLayers.Control.DrawFeature(vectors, OpenLayers.Handler.Point,\n        {\n            handlerOptions: {\n                layerOptions: {\n                    styleMap: new OpenLayers.StyleMap(styles.icon)\n                }\n            }\n        }),\n        line: new OpenLayers.Control.DrawFeature(vectors, OpenLayers.Handler.Path,\n        {\n            handlerOptions: {\n                freehand: false,\n                layerOptions: {\n                    styleMap: new OpenLayers.StyleMap(styles.line)\n                }\n            }\n        }),\n        polygon: new OpenLayers.Control.DrawFeature(vectors, OpenLayers.Handler.Polygon,\n        {\n            handlerOptions: {\n                layerOptions: {\n                    styleMap: new OpenLayers.StyleMap(styles.polygon)\n                }\n            }\n        }),\n        regularpolygon: new OpenLayers.Control.DrawFeature(vectors, OpenLayers.Handler.RegularPolygon,\n        {\n            handlerOptions: OpenLayers.Util.extend(defaultHandlerOptions.regularpolygon, {\n                layerOptions: {\n                    styleMap: new OpenLayers.StyleMap(styles.regularpolygon)\n                }\n            })\n        }),\n        modify: new OpenLayers.Control.ModifyFeature(vectors, {vertexRenderIntent: \"vertex\", virtualStyle: styles.virtual}),\n        selectfeature: new OpenLayers.Control.SelectFeature(vectors),\n        measure: new OpenLayers.Control.Measure(OpenLayers.Handler.Path, {persist: true, immediate: true})\n    };\n    \n    $('#measure-cancel').click(function () {\n        drawControls.measure.cancel();\n        $('#measure-distance').val(\"\");\n    });\n    drawControls.measure.events.register(\"measurepartial\", drawControls.measure, handleMeasurements);\n    drawControls.measure.events.register(\"measure\", drawControls.measure, handleMeasurements);\n    \n    function handleMeasurements(event) {\n        console.log('handleMeasurements', event);\n        var geometry = event.geometry;\n        var units = event.units;\n        var order = event.order;\n        var measure = event.measure;\n        var element = document.getElementById('output');\n        var out = \"\";\n        if(order == 1) {\n            out += measure.toFixed(3) + \" \" + units;\n        } else {\n            out += measure.toFixed(3) + \" \" + units + \"<sup>2</\" + \"sup>\";\n        }\n        $('#measure-distance').val(out);\n    }\n    \n    function createSketchCompletedHandler(key) {\n        return function (event) {\n            console.log('createSketchCompletedHandler', key);\n            //event.feature.attributes.renderIntent = key;\n            //event.feature.renderIntent = key;\n            event.feature.attributes.style = getStyle(key);\n        }\n    }\n    \n    var onSketchCompletedHandlers = {\n        brush: createSketchCompletedHandler('brush'),\n        icon: createSketchCompletedHandler('icon'),\n        line: createSketchCompletedHandler('line'),\n        polygon: createSketchCompletedHandler('polygon'),\n        regularpolygon: createSketchCompletedHandler('regularpolygon')\n    }\n\n    // Modifying feature resets renderIntent to 'default'. Reset it to stored renderIntent and redraw feature.\n    function onFeatureModified(event) {\n        console.log('onFeatureModified', OpenLayers.Util.extend({}, event.feature), event.modified);\n        //event.feature.renderIntent = event.feature.attributes.renderIntent;\n        //event.feature.layer.drawFeature(event.feature);\n    }\n\n    // Add controls to map\n    for (var key in drawControls) {\n        map.addControl(drawControls[key]);\n    }\n            \n    var historyControl = new OpenLayers.Control.UndoRedo([vectors]);\n    map.addControl(historyControl);\n    \n    var measureControl = new OpenLayers.Control.Measure(OpenLayers.Handler.Path);\n    map.addControl(measureControl);\n    vectors.events.register(\"featureselected\", drawControls.selectfeature, function (event) {\n        console.log(\"featureselected\", event);\n        if (event.feature.geometry.CLASS_NAME.indexOf('LineString') > -1) {\n            console.log('distance', measureControl.getBestLength(event.feature.geometry));\n        }\n        else {\n            console.log('area', measureControl.getBestArea(event.feature.geometry));\n        }\n    });\n    \n    // map position/zoom tracking querystring update\n    map.events.register(\"zoomend\", map, function(){\n        setQueryString('zoom', map.zoom);\n    });\n    map.events.register(\"moveend\", map, function(){\n        var worldXY = latLonToWorld(map.center.lon, map.center.lat);\n        setQueryString('x', worldXY.x.toFixed(0));\n        setQueryString('y', worldXY.y.toFixed(0));\n    });\n\n    // Show/hide controls panel\n    document.getElementById(\"controls-max\").addEventListener(\"click\", function(e) {\n        $('#controls-container').removeClass('minimized');\n        if (isSmallScreen()) {\n            layerSwitcher.minimizeControl();\n        }\n        if (e) e.preventDefault();\n    }, false);\n    function minimizeControlList(e) {\n        $('#controls-container').addClass('minimized');\n        if (e) e.preventDefault();\n    }\n    document.getElementById(\"controls-min\").addEventListener(\"click\", minimizeControlList, false);\n    \n    // Check screen size\n    function isSmallScreen() {\n        return ((window.innerWidth > 0) ? window.innerWidth : screen.width) <= 768;\n    }\n    // Initially hide controls if screen is small\n    if (isSmallScreen()) {\n        minimizeControlList.call(document.getElementById(\"controls-min\"));\n        layerSwitcher.minimizeControl();\n    }\n\n    // Set up panel radio button toggle handlers\n    //document.getElementById('noneToggle').addEventListener('click', toggleControl, false);\n    //document.getElementById('drawToggle').addEventListener('click', toggleControl, false);\n    \n    // tool switcher ui initialize\n    $(\".tool-radiobutton\").checkboxradio({\n        icon: false\n    }).change(toggleControl);\n    $(\"#map-tools\").controlgroup({direction: \"vertical\"});\n    \n    $(\".modify-tool-radiobutton\").checkboxradio({\n        icon: false\n    }).change(toggleModifyControl);\n    $(\".tool-radiogroup\").controlgroup();\n    \n    // undo/redo logic\n    vectors.redoStack = [];\n    function drawUndo() {\n        console.log('undo');\n        /*if (vectors.features.length) {\n            var feature = vectors.features.pop();\n            vectors.removeFeatures([feature]);\n            vectors.redoStack.push(feature);\n        }*/\n        historyControl.undo();\n    }\n    function drawRedo() {\n        /*if (vectors.redoStack.length) {\n            var feature = vectors.redoStack.pop();\n            vectors.addFeatures([feature]);\n        }*/\n        historyControl.redo();\n    }\n    \n    // undo/redo ui listen\n    $('#draw-undo').click(drawUndo);\n    $('#draw-redo').click(drawRedo);\n    \n    $('#modify-delete').click(modifyDeleteFeature);\n    \n    function modifyDeleteFeature() {\n        var feature = drawControls.modify.feature;\n        if (feature) {\n            drawControls.modify.unselectFeature(feature);\n            vectors.removeFeatures([feature]);\n        }\n    }\n    \n    // save drawing\n    $('#save').click(function () {\n        var parser = new OpenLayers.Format.GeoJSON()\n        var serialized = parser.write(vectors.features);\n        $.ajax({\n            type: \"POST\",\n            url: \"save.php\",\n            data: {'data': serialized},\n            dataType: \"json\",\n            success: function (data){\n                var saveLink = [location.protocol, '//', location.host, location.pathname].join('') + '?id=' + data.file;\n                console.log(saveLink);\n            },\n            failure: function (errMsg) {\n                alert(\"Save request failed.\");\n            }\n        });\n    });\n    \n    // start jquery ui tooltips\n    $( document ).tooltip();\n    \n    parseQueryString();\n    \n    $('.controls-container').show();\n    \n    var EXPORT = (function () {\n        var width = 1024,\n            height = 1024;\n\n        var x = d3scaleLinear()\n            .range([0, width]);\n\n        var y = d3scaleLinear()\n            .range([0, height]);\n\n        var projection = d3geoTransform({\n            point: function(px, py) {\n                //console.log('px py', px, py, x(px), y(py));\n                this.stream.point(x(px), height - y(py));\n            }\n        });\n\n        var path = d3geoPath()\n            .projection(projection);\n\n        var svg = d3select(\"body\").append(\"svg\")\n            .attr(\"id\", \"export-svg\")\n            .attr(\"width\", width)\n            .attr(\"height\", height);\n\n        var stylePropMap = {\n            fillColor: 'fill',\n            fillOpacity: 'fill-opacity',\n            strokeColor: 'stroke',\n            strokeWidth: 'stroke-width',\n            strokeOpacity: 'stroke-opacity',\n            graphicOpacity: 'opacity'\n        }\n\n        var imagesToLoad;\n        \n        function setStyle(d) {\n            console.log(d.geometry.type);\n            for (var p in stylePropMap) {\n                if (d.properties.style[p]) {\n                    console.log(p);\n                    var val = d.properties.style[p];\n                    if (p == 'strokeWidth') {\n                        val = x(val);\n                    }\n                    if (p == 'fillColor' && d.geometry.type == 'LineString') val = 'none';\n                    d3select(this).style(stylePropMap[p], val);\n                }\n                else if (p == 'fillColor') {\n                    console.log('fillColor none', d.geometry.type);\n                    d3select(this).style(stylePropMap[p], \"none\");\n                }\n                else {\n                    //console.log(p);\n                }\n            }\n            if (d.properties.style.externalGraphic) {\n                console.log('imagesToLoad', imagesToLoad);\n                var val = d.properties.style.externalGraphic;\n                console.log('externalGraphic', val);\n                var self = this;\n                d3select(this).attr(\"xlink:href\", val)\n                    .attr('x', x(d.geometry.coordinates[0]) - x(d.properties.style.graphicHeight) / 2)\n                    .attr('y', height - y(d.geometry.coordinates[1]) - x(d.properties.style.graphicHeight) / 2)\n                    .attr('width', x(d.properties.style.graphicHeight))\n                    .attr('height', x(d.properties.style.graphicHeight));\n                imagesToLoad++;\n                getImageBase64(val, function (data) {\n                    d3select(self)\n                        .attr(\"href\", \"data:image/png;base64,\" + data); // replace link by data URI\n                    imagesToLoad--;\n                    imageLoadFinished();\n                })\n            }\n        }\n        \n        function imageLoadFinished(callback) {\n            if (imagesToLoad == 0) {\n                download_png();\n            }\n        }\n\n        function featureFilter(e) {\n            return function(d) {\n                console.log(d.geometry.type);\n                return d.geometry.type == e;\n            }\n        }\n        \n        function createSVG(data) {\n            console.log(data);\n            \n            // add index of element as zIndex so they can be ordered properly later\n            data.features.forEach(function (d, i) {\n                d.zIndex = i;\n                console.log(d);\n            });\n            \n            var yExtent = [0, 16384],\n                xExtent = [0, 16384];\n            x.domain(xExtent);\n            y.domain(yExtent);\n\n            // background element\n            var baseLayerName = map.baseLayer.name.replace(/ /g, '').toLowerCase();\n            console.log(baseLayerName);\n            var background = map_tile_path + baseLayerName + \"/dotamap\" + (baseLayerName == 'default' ? '' : baseLayerName) + \"5_25.jpg\";\n            svg.append(\"image\")\n                .attr(\"class\", \"background\")\n                .attr(\"xlink:href\", background)\n                .attr('width', width)\n                .attr('height', height);\n            imagesToLoad = 1;\n            getImageBase64(background, function (data) {\n                d3select(\".background\")\n                    .attr(\"href\", \"data:image/png;base64,\" + data); // replace link by data URI\n                imagesToLoad--;\n                imageLoadFinished();\n            })\n                    \n            svg.selectAll(\"g\").data(data.features.filter(featureFilter('Polygon'))).enter().append(\"path\")\n                .attr(\"class\", \"node\")\n                .attr(\"d\", path)\n                .each(setStyle);\n\n            svg.selectAll(\"g\").data(data.features.filter(featureFilter('LineString'))).enter().append(\"path\")\n                .attr(\"class\", \"node\")\n                .attr(\"d\", path)\n                .each(setStyle);\n\n            svg.selectAll(\"g\").data(data.features.filter(featureFilter('Point'))).enter().append(\"image\")\n                .attr(\"class\", \"node\")\n                .attr(\"d\", path)\n                .each(setStyle);\n                \n            // sort by zIndex\n            svg.selectAll(\".node\").sort(function (a, b) {\n                console.log(a, b);\n                if (a.zIndex > b.zIndex) return 1;\n                if (a.zIndex < b.zIndex) return -1;\n                return 0;\n            });\n        }\n        \n        function converterEngine(input) { // fn BLOB => Binary => Base64 ?\n            var uInt8Array = new Uint8Array(input),\n                i = uInt8Array.length;\n            var biStr = []; //new Array(i);\n            while (i--) {\n                biStr[i] = String.fromCharCode(uInt8Array[i]);\n            }\n            var base64 = window.btoa(biStr.join(''));\n            //console.log(\"2. base64 produced >>> \" + base64); // print-check conversion result\n            return base64;\n        }\n\n        function getImageBase64(url, callback) {\n            // 1. Loading file from url:\n            var xhr = new XMLHttpRequest(url);\n            xhr.open('GET', url, true); // url is the url of a PNG image.\n            xhr.responseType = 'arraybuffer';\n            xhr.callback = callback;\n            xhr.onload = function (e) {\n                if (this.status == 200) { // 2. When loaded, do:\n                    //console.log(\"1:Loaded response >>> \" + this.response); // print-check xhr response \n                    var imgBase64 = converterEngine(this.response); // convert BLOB to base64\n                    this.callback(imgBase64); //execute callback function with data\n                }\n            };\n            xhr.send();\n        }\n        \n        function download_png () {\n            var contents = d3select(\"svg\")\n                .attr(\"version\", 1.1)\n                .attr(\"xmlns\", \"http://www.w3.org/2000/svg\")\n                .node().outerHTML;\n            var src = 'data:image/svg+xml;utf8,' + contents;\n            \n            var canvas = document.createElement('canvas');\n            canvas.width = width;\n            canvas.height = height;\n            var context = canvas.getContext(\"2d\");\n\n            var image = new Image;\n            image.src = src;\n            image.onload = function() {\n                context.drawImage(image, 0, 0, width, height);\n                downloadCanvas(canvas);\n            };\n        }\n\n        function dataURLtoBlob(dataurl) {\n            var arr = dataurl.split(','), mime = arr[0].match(/:(.*?);/)[1],\n                bstr = atob(arr[1]), n = bstr.length, u8arr = new Uint8Array(n);\n            while(n--){\n                u8arr[n] = bstr.charCodeAt(n);\n            }\n            return new Blob([u8arr], {type:mime});\n        }\n\n        function downloadCanvas(_canvasObject) {\n            var link = document.createElement(\"a\");\n            var imgData = _canvasObject.toDataURL({format: 'png', multiplier: 4});\n            var strDataURI = imgData.substr(22, imgData.length);\n            var blob = dataURLtoBlob(imgData);\n            var objurl = URL.createObjectURL(blob);\n\n            link.download = \"image.png\";\n\n            link.href = objurl;\n\n            link.click();\n        }\n        \n        function doExport() {\n            var parser = new OpenLayers.Format.GeoJSON()\n            var data = JSON.parse(parser.write(vectors.features));\n            console.log(data, vectors.features);\n            createSVG(data, download_png);\n        }\n        \n        $(\"#export\").click(doExport);\n    })();","// https://d3js.org/d3-array/ Version 1.0.1. Copyright 2016 Mike Bostock.\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (factory((global.d3 = global.d3 || {})));\n}(this, function (exports) { 'use strict';\n\n  function ascending(a, b) {\n    return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n  }\n\n  function bisector(compare) {\n    if (compare.length === 1) compare = ascendingComparator(compare);\n    return {\n      left: function(a, x, lo, hi) {\n        if (lo == null) lo = 0;\n        if (hi == null) hi = a.length;\n        while (lo < hi) {\n          var mid = lo + hi >>> 1;\n          if (compare(a[mid], x) < 0) lo = mid + 1;\n          else hi = mid;\n        }\n        return lo;\n      },\n      right: function(a, x, lo, hi) {\n        if (lo == null) lo = 0;\n        if (hi == null) hi = a.length;\n        while (lo < hi) {\n          var mid = lo + hi >>> 1;\n          if (compare(a[mid], x) > 0) hi = mid;\n          else lo = mid + 1;\n        }\n        return lo;\n      }\n    };\n  }\n\n  function ascendingComparator(f) {\n    return function(d, x) {\n      return ascending(f(d), x);\n    };\n  }\n\n  var ascendingBisect = bisector(ascending);\n  var bisectRight = ascendingBisect.right;\n  var bisectLeft = ascendingBisect.left;\n\n  function descending(a, b) {\n    return b < a ? -1 : b > a ? 1 : b >= a ? 0 : NaN;\n  }\n\n  function number(x) {\n    return x === null ? NaN : +x;\n  }\n\n  function variance(array, f) {\n    var n = array.length,\n        m = 0,\n        a,\n        d,\n        s = 0,\n        i = -1,\n        j = 0;\n\n    if (f == null) {\n      while (++i < n) {\n        if (!isNaN(a = number(array[i]))) {\n          d = a - m;\n          m += d / ++j;\n          s += d * (a - m);\n        }\n      }\n    }\n\n    else {\n      while (++i < n) {\n        if (!isNaN(a = number(f(array[i], i, array)))) {\n          d = a - m;\n          m += d / ++j;\n          s += d * (a - m);\n        }\n      }\n    }\n\n    if (j > 1) return s / (j - 1);\n  }\n\n  function deviation(array, f) {\n    var v = variance(array, f);\n    return v ? Math.sqrt(v) : v;\n  }\n\n  function extent(array, f) {\n    var i = -1,\n        n = array.length,\n        a,\n        b,\n        c;\n\n    if (f == null) {\n      while (++i < n) if ((b = array[i]) != null && b >= b) { a = c = b; break; }\n      while (++i < n) if ((b = array[i]) != null) {\n        if (a > b) a = b;\n        if (c < b) c = b;\n      }\n    }\n\n    else {\n      while (++i < n) if ((b = f(array[i], i, array)) != null && b >= b) { a = c = b; break; }\n      while (++i < n) if ((b = f(array[i], i, array)) != null) {\n        if (a > b) a = b;\n        if (c < b) c = b;\n      }\n    }\n\n    return [a, c];\n  }\n\n  var array = Array.prototype;\n\n  var slice = array.slice;\n  var map = array.map;\n\n  function constant(x) {\n    return function() {\n      return x;\n    };\n  }\n\n  function identity(x) {\n    return x;\n  }\n\n  function range(start, stop, step) {\n    start = +start, stop = +stop, step = (n = arguments.length) < 2 ? (stop = start, start = 0, 1) : n < 3 ? 1 : +step;\n\n    var i = -1,\n        n = Math.max(0, Math.ceil((stop - start) / step)) | 0,\n        range = new Array(n);\n\n    while (++i < n) {\n      range[i] = start + i * step;\n    }\n\n    return range;\n  }\n\n  var e10 = Math.sqrt(50);\n  var e5 = Math.sqrt(10);\n  var e2 = Math.sqrt(2);\n  function ticks(start, stop, count) {\n    var step = tickStep(start, stop, count);\n    return range(\n      Math.ceil(start / step) * step,\n      Math.floor(stop / step) * step + step / 2, // inclusive\n      step\n    );\n  }\n\n  function tickStep(start, stop, count) {\n    var step0 = Math.abs(stop - start) / Math.max(0, count),\n        step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n        error = step0 / step1;\n    if (error >= e10) step1 *= 10;\n    else if (error >= e5) step1 *= 5;\n    else if (error >= e2) step1 *= 2;\n    return stop < start ? -step1 : step1;\n  }\n\n  function sturges(values) {\n    return Math.ceil(Math.log(values.length) / Math.LN2) + 1;\n  }\n\n  function histogram() {\n    var value = identity,\n        domain = extent,\n        threshold = sturges;\n\n    function histogram(data) {\n      var i,\n          n = data.length,\n          x,\n          values = new Array(n);\n\n      for (i = 0; i < n; ++i) {\n        values[i] = value(data[i], i, data);\n      }\n\n      var xz = domain(values),\n          x0 = xz[0],\n          x1 = xz[1],\n          tz = threshold(values, x0, x1);\n\n      // Convert number of thresholds into uniform thresholds.\n      if (!Array.isArray(tz)) tz = ticks(x0, x1, tz);\n\n      // Remove any thresholds outside the domain.\n      var m = tz.length;\n      while (tz[0] <= x0) tz.shift(), --m;\n      while (tz[m - 1] >= x1) tz.pop(), --m;\n\n      var bins = new Array(m + 1),\n          bin;\n\n      // Initialize bins.\n      for (i = 0; i <= m; ++i) {\n        bin = bins[i] = [];\n        bin.x0 = i > 0 ? tz[i - 1] : x0;\n        bin.x1 = i < m ? tz[i] : x1;\n      }\n\n      // Assign data to bins by value, ignoring any outside the domain.\n      for (i = 0; i < n; ++i) {\n        x = values[i];\n        if (x0 <= x && x <= x1) {\n          bins[bisectRight(tz, x, 0, m)].push(data[i]);\n        }\n      }\n\n      return bins;\n    }\n\n    histogram.value = function(_) {\n      return arguments.length ? (value = typeof _ === \"function\" ? _ : constant(_), histogram) : value;\n    };\n\n    histogram.domain = function(_) {\n      return arguments.length ? (domain = typeof _ === \"function\" ? _ : constant([_[0], _[1]]), histogram) : domain;\n    };\n\n    histogram.thresholds = function(_) {\n      return arguments.length ? (threshold = typeof _ === \"function\" ? _ : Array.isArray(_) ? constant(slice.call(_)) : constant(_), histogram) : threshold;\n    };\n\n    return histogram;\n  }\n\n  function quantile(array, p, f) {\n    if (f == null) f = number;\n    if (!(n = array.length)) return;\n    if ((p = +p) <= 0 || n < 2) return +f(array[0], 0, array);\n    if (p >= 1) return +f(array[n - 1], n - 1, array);\n    var n,\n        h = (n - 1) * p,\n        i = Math.floor(h),\n        a = +f(array[i], i, array),\n        b = +f(array[i + 1], i + 1, array);\n    return a + (b - a) * (h - i);\n  }\n\n  function freedmanDiaconis(values, min, max) {\n    values = map.call(values, number).sort(ascending);\n    return Math.ceil((max - min) / (2 * (quantile(values, 0.75) - quantile(values, 0.25)) * Math.pow(values.length, -1 / 3)));\n  }\n\n  function scott(values, min, max) {\n    return Math.ceil((max - min) / (3.5 * deviation(values) * Math.pow(values.length, -1 / 3)));\n  }\n\n  function max(array, f) {\n    var i = -1,\n        n = array.length,\n        a,\n        b;\n\n    if (f == null) {\n      while (++i < n) if ((b = array[i]) != null && b >= b) { a = b; break; }\n      while (++i < n) if ((b = array[i]) != null && b > a) a = b;\n    }\n\n    else {\n      while (++i < n) if ((b = f(array[i], i, array)) != null && b >= b) { a = b; break; }\n      while (++i < n) if ((b = f(array[i], i, array)) != null && b > a) a = b;\n    }\n\n    return a;\n  }\n\n  function mean(array, f) {\n    var s = 0,\n        n = array.length,\n        a,\n        i = -1,\n        j = n;\n\n    if (f == null) {\n      while (++i < n) if (!isNaN(a = number(array[i]))) s += a; else --j;\n    }\n\n    else {\n      while (++i < n) if (!isNaN(a = number(f(array[i], i, array)))) s += a; else --j;\n    }\n\n    if (j) return s / j;\n  }\n\n  function median(array, f) {\n    var numbers = [],\n        n = array.length,\n        a,\n        i = -1;\n\n    if (f == null) {\n      while (++i < n) if (!isNaN(a = number(array[i]))) numbers.push(a);\n    }\n\n    else {\n      while (++i < n) if (!isNaN(a = number(f(array[i], i, array)))) numbers.push(a);\n    }\n\n    return quantile(numbers.sort(ascending), 0.5);\n  }\n\n  function merge(arrays) {\n    var n = arrays.length,\n        m,\n        i = -1,\n        j = 0,\n        merged,\n        array;\n\n    while (++i < n) j += arrays[i].length;\n    merged = new Array(j);\n\n    while (--n >= 0) {\n      array = arrays[n];\n      m = array.length;\n      while (--m >= 0) {\n        merged[--j] = array[m];\n      }\n    }\n\n    return merged;\n  }\n\n  function min(array, f) {\n    var i = -1,\n        n = array.length,\n        a,\n        b;\n\n    if (f == null) {\n      while (++i < n) if ((b = array[i]) != null && b >= b) { a = b; break; }\n      while (++i < n) if ((b = array[i]) != null && a > b) a = b;\n    }\n\n    else {\n      while (++i < n) if ((b = f(array[i], i, array)) != null && b >= b) { a = b; break; }\n      while (++i < n) if ((b = f(array[i], i, array)) != null && a > b) a = b;\n    }\n\n    return a;\n  }\n\n  function pairs(array) {\n    var i = 0, n = array.length - 1, p = array[0], pairs = new Array(n < 0 ? 0 : n);\n    while (i < n) pairs[i] = [p, p = array[++i]];\n    return pairs;\n  }\n\n  function permute(array, indexes) {\n    var i = indexes.length, permutes = new Array(i);\n    while (i--) permutes[i] = array[indexes[i]];\n    return permutes;\n  }\n\n  function scan(array, compare) {\n    if (!(n = array.length)) return;\n    var i = 0,\n        n,\n        j = 0,\n        xi,\n        xj = array[j];\n\n    if (!compare) compare = ascending;\n\n    while (++i < n) if (compare(xi = array[i], xj) < 0 || compare(xj, xj) !== 0) xj = xi, j = i;\n\n    if (compare(xj, xj) === 0) return j;\n  }\n\n  function shuffle(array, i0, i1) {\n    var m = (i1 == null ? array.length : i1) - (i0 = i0 == null ? 0 : +i0),\n        t,\n        i;\n\n    while (m) {\n      i = Math.random() * m-- | 0;\n      t = array[m + i0];\n      array[m + i0] = array[i + i0];\n      array[i + i0] = t;\n    }\n\n    return array;\n  }\n\n  function sum(array, f) {\n    var s = 0,\n        n = array.length,\n        a,\n        i = -1;\n\n    if (f == null) {\n      while (++i < n) if (a = +array[i]) s += a; // Note: zero and null are equivalent.\n    }\n\n    else {\n      while (++i < n) if (a = +f(array[i], i, array)) s += a;\n    }\n\n    return s;\n  }\n\n  function transpose(matrix) {\n    if (!(n = matrix.length)) return [];\n    for (var i = -1, m = min(matrix, length), transpose = new Array(m); ++i < m;) {\n      for (var j = -1, n, row = transpose[i] = new Array(n); ++j < n;) {\n        row[j] = matrix[j][i];\n      }\n    }\n    return transpose;\n  }\n\n  function length(d) {\n    return d.length;\n  }\n\n  function zip() {\n    return transpose(arguments);\n  }\n\n  exports.bisect = bisectRight;\n  exports.bisectRight = bisectRight;\n  exports.bisectLeft = bisectLeft;\n  exports.ascending = ascending;\n  exports.bisector = bisector;\n  exports.descending = descending;\n  exports.deviation = deviation;\n  exports.extent = extent;\n  exports.histogram = histogram;\n  exports.thresholdFreedmanDiaconis = freedmanDiaconis;\n  exports.thresholdScott = scott;\n  exports.thresholdSturges = sturges;\n  exports.max = max;\n  exports.mean = mean;\n  exports.median = median;\n  exports.merge = merge;\n  exports.min = min;\n  exports.pairs = pairs;\n  exports.permute = permute;\n  exports.quantile = quantile;\n  exports.range = range;\n  exports.scan = scan;\n  exports.shuffle = shuffle;\n  exports.sum = sum;\n  exports.ticks = ticks;\n  exports.tickStep = tickStep;\n  exports.transpose = transpose;\n  exports.variance = variance;\n  exports.zip = zip;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n}));","// https://d3js.org/d3-collection/ Version 1.0.1. Copyright 2016 Mike Bostock.\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (factory((global.d3 = global.d3 || {})));\n}(this, function (exports) { 'use strict';\n\n  var prefix = \"$\";\n\n  function Map() {}\n\n  Map.prototype = map.prototype = {\n    constructor: Map,\n    has: function(key) {\n      return (prefix + key) in this;\n    },\n    get: function(key) {\n      return this[prefix + key];\n    },\n    set: function(key, value) {\n      this[prefix + key] = value;\n      return this;\n    },\n    remove: function(key) {\n      var property = prefix + key;\n      return property in this && delete this[property];\n    },\n    clear: function() {\n      for (var property in this) if (property[0] === prefix) delete this[property];\n    },\n    keys: function() {\n      var keys = [];\n      for (var property in this) if (property[0] === prefix) keys.push(property.slice(1));\n      return keys;\n    },\n    values: function() {\n      var values = [];\n      for (var property in this) if (property[0] === prefix) values.push(this[property]);\n      return values;\n    },\n    entries: function() {\n      var entries = [];\n      for (var property in this) if (property[0] === prefix) entries.push({key: property.slice(1), value: this[property]});\n      return entries;\n    },\n    size: function() {\n      var size = 0;\n      for (var property in this) if (property[0] === prefix) ++size;\n      return size;\n    },\n    empty: function() {\n      for (var property in this) if (property[0] === prefix) return false;\n      return true;\n    },\n    each: function(f) {\n      for (var property in this) if (property[0] === prefix) f(this[property], property.slice(1), this);\n    }\n  };\n\n  function map(object, f) {\n    var map = new Map;\n\n    // Copy constructor.\n    if (object instanceof Map) object.each(function(value, key) { map.set(key, value); });\n\n    // Index array by numeric index or specified key function.\n    else if (Array.isArray(object)) {\n      var i = -1,\n          n = object.length,\n          o;\n\n      if (f == null) while (++i < n) map.set(i, object[i]);\n      else while (++i < n) map.set(f(o = object[i], i, object), o);\n    }\n\n    // Convert object to map.\n    else if (object) for (var key in object) map.set(key, object[key]);\n\n    return map;\n  }\n\n  function nest() {\n    var keys = [],\n        sortKeys = [],\n        sortValues,\n        rollup,\n        nest;\n\n    function apply(array, depth, createResult, setResult) {\n      if (depth >= keys.length) return rollup != null\n          ? rollup(array) : (sortValues != null\n          ? array.sort(sortValues)\n          : array);\n\n      var i = -1,\n          n = array.length,\n          key = keys[depth++],\n          keyValue,\n          value,\n          valuesByKey = map(),\n          values,\n          result = createResult();\n\n      while (++i < n) {\n        if (values = valuesByKey.get(keyValue = key(value = array[i]) + \"\")) {\n          values.push(value);\n        } else {\n          valuesByKey.set(keyValue, [value]);\n        }\n      }\n\n      valuesByKey.each(function(values, key) {\n        setResult(result, key, apply(values, depth, createResult, setResult));\n      });\n\n      return result;\n    }\n\n    function entries(map, depth) {\n      if (++depth > keys.length) return map;\n      var array, sortKey = sortKeys[depth - 1];\n      if (rollup != null && depth >= keys.length) array = map.entries();\n      else array = [], map.each(function(v, k) { array.push({key: k, values: entries(v, depth)}); });\n      return sortKey != null ? array.sort(function(a, b) { return sortKey(a.key, b.key); }) : array;\n    }\n\n    return nest = {\n      object: function(array) { return apply(array, 0, createObject, setObject); },\n      map: function(array) { return apply(array, 0, createMap, setMap); },\n      entries: function(array) { return entries(apply(array, 0, createMap, setMap), 0); },\n      key: function(d) { keys.push(d); return nest; },\n      sortKeys: function(order) { sortKeys[keys.length - 1] = order; return nest; },\n      sortValues: function(order) { sortValues = order; return nest; },\n      rollup: function(f) { rollup = f; return nest; }\n    };\n  }\n\n  function createObject() {\n    return {};\n  }\n\n  function setObject(object, key, value) {\n    object[key] = value;\n  }\n\n  function createMap() {\n    return map();\n  }\n\n  function setMap(map, key, value) {\n    map.set(key, value);\n  }\n\n  function Set() {}\n\n  var proto = map.prototype;\n\n  Set.prototype = set.prototype = {\n    constructor: Set,\n    has: proto.has,\n    add: function(value) {\n      value += \"\";\n      this[prefix + value] = value;\n      return this;\n    },\n    remove: proto.remove,\n    clear: proto.clear,\n    values: proto.keys,\n    size: proto.size,\n    empty: proto.empty,\n    each: proto.each\n  };\n\n  function set(object, f) {\n    var set = new Set;\n\n    // Copy constructor.\n    if (object instanceof Set) object.each(function(value) { set.add(value); });\n\n    // Otherwise, assume it’s an array.\n    else if (object) {\n      var i = -1, n = object.length;\n      if (f == null) while (++i < n) set.add(object[i]);\n      else while (++i < n) set.add(f(object[i], i, object));\n    }\n\n    return set;\n  }\n\n  function keys(map) {\n    var keys = [];\n    for (var key in map) keys.push(key);\n    return keys;\n  }\n\n  function values(map) {\n    var values = [];\n    for (var key in map) values.push(map[key]);\n    return values;\n  }\n\n  function entries(map) {\n    var entries = [];\n    for (var key in map) entries.push({key: key, value: map[key]});\n    return entries;\n  }\n\n  exports.nest = nest;\n  exports.set = set;\n  exports.map = map;\n  exports.keys = keys;\n  exports.values = values;\n  exports.entries = entries;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n}));","// https://d3js.org/d3-color/ Version 1.0.1. Copyright 2016 Mike Bostock.\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (factory((global.d3 = global.d3 || {})));\n}(this, function (exports) { 'use strict';\n\n  function define(constructor, factory, prototype) {\n    constructor.prototype = factory.prototype = prototype;\n    prototype.constructor = constructor;\n  }\n\n  function extend(parent, definition) {\n    var prototype = Object.create(parent.prototype);\n    for (var key in definition) prototype[key] = definition[key];\n    return prototype;\n  }\n\n  function Color() {}\n\n  var darker = 0.7;\n  var brighter = 1 / darker;\n\n  var reHex3 = /^#([0-9a-f]{3})$/;\n  var reHex6 = /^#([0-9a-f]{6})$/;\n  var reRgbInteger = /^rgb\\(\\s*([-+]?\\d+)\\s*,\\s*([-+]?\\d+)\\s*,\\s*([-+]?\\d+)\\s*\\)$/;\n  var reRgbPercent = /^rgb\\(\\s*([-+]?\\d+(?:\\.\\d+)?)%\\s*,\\s*([-+]?\\d+(?:\\.\\d+)?)%\\s*,\\s*([-+]?\\d+(?:\\.\\d+)?)%\\s*\\)$/;\n  var reRgbaInteger = /^rgba\\(\\s*([-+]?\\d+)\\s*,\\s*([-+]?\\d+)\\s*,\\s*([-+]?\\d+)\\s*,\\s*([-+]?\\d+(?:\\.\\d+)?)\\s*\\)$/;\n  var reRgbaPercent = /^rgba\\(\\s*([-+]?\\d+(?:\\.\\d+)?)%\\s*,\\s*([-+]?\\d+(?:\\.\\d+)?)%\\s*,\\s*([-+]?\\d+(?:\\.\\d+)?)%\\s*,\\s*([-+]?\\d+(?:\\.\\d+)?)\\s*\\)$/;\n  var reHslPercent = /^hsl\\(\\s*([-+]?\\d+(?:\\.\\d+)?)\\s*,\\s*([-+]?\\d+(?:\\.\\d+)?)%\\s*,\\s*([-+]?\\d+(?:\\.\\d+)?)%\\s*\\)$/;\n  var reHslaPercent = /^hsla\\(\\s*([-+]?\\d+(?:\\.\\d+)?)\\s*,\\s*([-+]?\\d+(?:\\.\\d+)?)%\\s*,\\s*([-+]?\\d+(?:\\.\\d+)?)%\\s*,\\s*([-+]?\\d+(?:\\.\\d+)?)\\s*\\)$/;\n  var named = {\n    aliceblue: 0xf0f8ff,\n    antiquewhite: 0xfaebd7,\n    aqua: 0x00ffff,\n    aquamarine: 0x7fffd4,\n    azure: 0xf0ffff,\n    beige: 0xf5f5dc,\n    bisque: 0xffe4c4,\n    black: 0x000000,\n    blanchedalmond: 0xffebcd,\n    blue: 0x0000ff,\n    blueviolet: 0x8a2be2,\n    brown: 0xa52a2a,\n    burlywood: 0xdeb887,\n    cadetblue: 0x5f9ea0,\n    chartreuse: 0x7fff00,\n    chocolate: 0xd2691e,\n    coral: 0xff7f50,\n    cornflowerblue: 0x6495ed,\n    cornsilk: 0xfff8dc,\n    crimson: 0xdc143c,\n    cyan: 0x00ffff,\n    darkblue: 0x00008b,\n    darkcyan: 0x008b8b,\n    darkgoldenrod: 0xb8860b,\n    darkgray: 0xa9a9a9,\n    darkgreen: 0x006400,\n    darkgrey: 0xa9a9a9,\n    darkkhaki: 0xbdb76b,\n    darkmagenta: 0x8b008b,\n    darkolivegreen: 0x556b2f,\n    darkorange: 0xff8c00,\n    darkorchid: 0x9932cc,\n    darkred: 0x8b0000,\n    darksalmon: 0xe9967a,\n    darkseagreen: 0x8fbc8f,\n    darkslateblue: 0x483d8b,\n    darkslategray: 0x2f4f4f,\n    darkslategrey: 0x2f4f4f,\n    darkturquoise: 0x00ced1,\n    darkviolet: 0x9400d3,\n    deeppink: 0xff1493,\n    deepskyblue: 0x00bfff,\n    dimgray: 0x696969,\n    dimgrey: 0x696969,\n    dodgerblue: 0x1e90ff,\n    firebrick: 0xb22222,\n    floralwhite: 0xfffaf0,\n    forestgreen: 0x228b22,\n    fuchsia: 0xff00ff,\n    gainsboro: 0xdcdcdc,\n    ghostwhite: 0xf8f8ff,\n    gold: 0xffd700,\n    goldenrod: 0xdaa520,\n    gray: 0x808080,\n    green: 0x008000,\n    greenyellow: 0xadff2f,\n    grey: 0x808080,\n    honeydew: 0xf0fff0,\n    hotpink: 0xff69b4,\n    indianred: 0xcd5c5c,\n    indigo: 0x4b0082,\n    ivory: 0xfffff0,\n    khaki: 0xf0e68c,\n    lavender: 0xe6e6fa,\n    lavenderblush: 0xfff0f5,\n    lawngreen: 0x7cfc00,\n    lemonchiffon: 0xfffacd,\n    lightblue: 0xadd8e6,\n    lightcoral: 0xf08080,\n    lightcyan: 0xe0ffff,\n    lightgoldenrodyellow: 0xfafad2,\n    lightgray: 0xd3d3d3,\n    lightgreen: 0x90ee90,\n    lightgrey: 0xd3d3d3,\n    lightpink: 0xffb6c1,\n    lightsalmon: 0xffa07a,\n    lightseagreen: 0x20b2aa,\n    lightskyblue: 0x87cefa,\n    lightslategray: 0x778899,\n    lightslategrey: 0x778899,\n    lightsteelblue: 0xb0c4de,\n    lightyellow: 0xffffe0,\n    lime: 0x00ff00,\n    limegreen: 0x32cd32,\n    linen: 0xfaf0e6,\n    magenta: 0xff00ff,\n    maroon: 0x800000,\n    mediumaquamarine: 0x66cdaa,\n    mediumblue: 0x0000cd,\n    mediumorchid: 0xba55d3,\n    mediumpurple: 0x9370db,\n    mediumseagreen: 0x3cb371,\n    mediumslateblue: 0x7b68ee,\n    mediumspringgreen: 0x00fa9a,\n    mediumturquoise: 0x48d1cc,\n    mediumvioletred: 0xc71585,\n    midnightblue: 0x191970,\n    mintcream: 0xf5fffa,\n    mistyrose: 0xffe4e1,\n    moccasin: 0xffe4b5,\n    navajowhite: 0xffdead,\n    navy: 0x000080,\n    oldlace: 0xfdf5e6,\n    olive: 0x808000,\n    olivedrab: 0x6b8e23,\n    orange: 0xffa500,\n    orangered: 0xff4500,\n    orchid: 0xda70d6,\n    palegoldenrod: 0xeee8aa,\n    palegreen: 0x98fb98,\n    paleturquoise: 0xafeeee,\n    palevioletred: 0xdb7093,\n    papayawhip: 0xffefd5,\n    peachpuff: 0xffdab9,\n    peru: 0xcd853f,\n    pink: 0xffc0cb,\n    plum: 0xdda0dd,\n    powderblue: 0xb0e0e6,\n    purple: 0x800080,\n    rebeccapurple: 0x663399,\n    red: 0xff0000,\n    rosybrown: 0xbc8f8f,\n    royalblue: 0x4169e1,\n    saddlebrown: 0x8b4513,\n    salmon: 0xfa8072,\n    sandybrown: 0xf4a460,\n    seagreen: 0x2e8b57,\n    seashell: 0xfff5ee,\n    sienna: 0xa0522d,\n    silver: 0xc0c0c0,\n    skyblue: 0x87ceeb,\n    slateblue: 0x6a5acd,\n    slategray: 0x708090,\n    slategrey: 0x708090,\n    snow: 0xfffafa,\n    springgreen: 0x00ff7f,\n    steelblue: 0x4682b4,\n    tan: 0xd2b48c,\n    teal: 0x008080,\n    thistle: 0xd8bfd8,\n    tomato: 0xff6347,\n    turquoise: 0x40e0d0,\n    violet: 0xee82ee,\n    wheat: 0xf5deb3,\n    white: 0xffffff,\n    whitesmoke: 0xf5f5f5,\n    yellow: 0xffff00,\n    yellowgreen: 0x9acd32\n  };\n\n  define(Color, color, {\n    displayable: function() {\n      return this.rgb().displayable();\n    },\n    toString: function() {\n      return this.rgb() + \"\";\n    }\n  });\n\n  function color(format) {\n    var m;\n    format = (format + \"\").trim().toLowerCase();\n    return (m = reHex3.exec(format)) ? (m = parseInt(m[1], 16), new Rgb((m >> 8 & 0xf) | (m >> 4 & 0x0f0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1)) // #f00\n        : (m = reHex6.exec(format)) ? rgbn(parseInt(m[1], 16)) // #ff0000\n        : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n        : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n        : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n        : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n        : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n        : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n        : named.hasOwnProperty(format) ? rgbn(named[format])\n        : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n        : null;\n  }\n\n  function rgbn(n) {\n    return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n  }\n\n  function rgba(r, g, b, a) {\n    if (a <= 0) r = g = b = NaN;\n    return new Rgb(r, g, b, a);\n  }\n\n  function rgbConvert(o) {\n    if (!(o instanceof Color)) o = color(o);\n    if (!o) return new Rgb;\n    o = o.rgb();\n    return new Rgb(o.r, o.g, o.b, o.opacity);\n  }\n\n  function rgb(r, g, b, opacity) {\n    return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n  }\n\n  function Rgb(r, g, b, opacity) {\n    this.r = +r;\n    this.g = +g;\n    this.b = +b;\n    this.opacity = +opacity;\n  }\n\n  define(Rgb, rgb, extend(Color, {\n    brighter: function(k) {\n      k = k == null ? brighter : Math.pow(brighter, k);\n      return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n    },\n    darker: function(k) {\n      k = k == null ? darker : Math.pow(darker, k);\n      return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n    },\n    rgb: function() {\n      return this;\n    },\n    displayable: function() {\n      return (0 <= this.r && this.r <= 255)\n          && (0 <= this.g && this.g <= 255)\n          && (0 <= this.b && this.b <= 255)\n          && (0 <= this.opacity && this.opacity <= 1);\n    },\n    toString: function() {\n      var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n      return (a === 1 ? \"rgb(\" : \"rgba(\")\n          + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n          + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n          + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n          + (a === 1 ? \")\" : \", \" + a + \")\");\n    }\n  }));\n\n  function hsla(h, s, l, a) {\n    if (a <= 0) h = s = l = NaN;\n    else if (l <= 0 || l >= 1) h = s = NaN;\n    else if (s <= 0) h = NaN;\n    return new Hsl(h, s, l, a);\n  }\n\n  function hslConvert(o) {\n    if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n    if (!(o instanceof Color)) o = color(o);\n    if (!o) return new Hsl;\n    if (o instanceof Hsl) return o;\n    o = o.rgb();\n    var r = o.r / 255,\n        g = o.g / 255,\n        b = o.b / 255,\n        min = Math.min(r, g, b),\n        max = Math.max(r, g, b),\n        h = NaN,\n        s = max - min,\n        l = (max + min) / 2;\n    if (s) {\n      if (r === max) h = (g - b) / s + (g < b) * 6;\n      else if (g === max) h = (b - r) / s + 2;\n      else h = (r - g) / s + 4;\n      s /= l < 0.5 ? max + min : 2 - max - min;\n      h *= 60;\n    } else {\n      s = l > 0 && l < 1 ? 0 : h;\n    }\n    return new Hsl(h, s, l, o.opacity);\n  }\n\n  function hsl(h, s, l, opacity) {\n    return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n  }\n\n  function Hsl(h, s, l, opacity) {\n    this.h = +h;\n    this.s = +s;\n    this.l = +l;\n    this.opacity = +opacity;\n  }\n\n  define(Hsl, hsl, extend(Color, {\n    brighter: function(k) {\n      k = k == null ? brighter : Math.pow(brighter, k);\n      return new Hsl(this.h, this.s, this.l * k, this.opacity);\n    },\n    darker: function(k) {\n      k = k == null ? darker : Math.pow(darker, k);\n      return new Hsl(this.h, this.s, this.l * k, this.opacity);\n    },\n    rgb: function() {\n      var h = this.h % 360 + (this.h < 0) * 360,\n          s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n          l = this.l,\n          m2 = l + (l < 0.5 ? l : 1 - l) * s,\n          m1 = 2 * l - m2;\n      return new Rgb(\n        hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n        hsl2rgb(h, m1, m2),\n        hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n        this.opacity\n      );\n    },\n    displayable: function() {\n      return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n          && (0 <= this.l && this.l <= 1)\n          && (0 <= this.opacity && this.opacity <= 1);\n    }\n  }));\n\n  /* From FvD 13.37, CSS Color Module Level 3 */\n  function hsl2rgb(h, m1, m2) {\n    return (h < 60 ? m1 + (m2 - m1) * h / 60\n        : h < 180 ? m2\n        : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n        : m1) * 255;\n  }\n\n  var deg2rad = Math.PI / 180;\n  var rad2deg = 180 / Math.PI;\n\n  var Kn = 18;\n  var Xn = 0.950470;\n  var Yn = 1;\n  var Zn = 1.088830;\n  var t0 = 4 / 29;\n  var t1 = 6 / 29;\n  var t2 = 3 * t1 * t1;\n  var t3 = t1 * t1 * t1;\n  function labConvert(o) {\n    if (o instanceof Lab) return new Lab(o.l, o.a, o.b, o.opacity);\n    if (o instanceof Hcl) {\n      var h = o.h * deg2rad;\n      return new Lab(o.l, Math.cos(h) * o.c, Math.sin(h) * o.c, o.opacity);\n    }\n    if (!(o instanceof Rgb)) o = rgbConvert(o);\n    var b = rgb2xyz(o.r),\n        a = rgb2xyz(o.g),\n        l = rgb2xyz(o.b),\n        x = xyz2lab((0.4124564 * b + 0.3575761 * a + 0.1804375 * l) / Xn),\n        y = xyz2lab((0.2126729 * b + 0.7151522 * a + 0.0721750 * l) / Yn),\n        z = xyz2lab((0.0193339 * b + 0.1191920 * a + 0.9503041 * l) / Zn);\n    return new Lab(116 * y - 16, 500 * (x - y), 200 * (y - z), o.opacity);\n  }\n\n  function lab(l, a, b, opacity) {\n    return arguments.length === 1 ? labConvert(l) : new Lab(l, a, b, opacity == null ? 1 : opacity);\n  }\n\n  function Lab(l, a, b, opacity) {\n    this.l = +l;\n    this.a = +a;\n    this.b = +b;\n    this.opacity = +opacity;\n  }\n\n  define(Lab, lab, extend(Color, {\n    brighter: function(k) {\n      return new Lab(this.l + Kn * (k == null ? 1 : k), this.a, this.b, this.opacity);\n    },\n    darker: function(k) {\n      return new Lab(this.l - Kn * (k == null ? 1 : k), this.a, this.b, this.opacity);\n    },\n    rgb: function() {\n      var y = (this.l + 16) / 116,\n          x = isNaN(this.a) ? y : y + this.a / 500,\n          z = isNaN(this.b) ? y : y - this.b / 200;\n      y = Yn * lab2xyz(y);\n      x = Xn * lab2xyz(x);\n      z = Zn * lab2xyz(z);\n      return new Rgb(\n        xyz2rgb( 3.2404542 * x - 1.5371385 * y - 0.4985314 * z), // D65 -> sRGB\n        xyz2rgb(-0.9692660 * x + 1.8760108 * y + 0.0415560 * z),\n        xyz2rgb( 0.0556434 * x - 0.2040259 * y + 1.0572252 * z),\n        this.opacity\n      );\n    }\n  }));\n\n  function xyz2lab(t) {\n    return t > t3 ? Math.pow(t, 1 / 3) : t / t2 + t0;\n  }\n\n  function lab2xyz(t) {\n    return t > t1 ? t * t * t : t2 * (t - t0);\n  }\n\n  function xyz2rgb(x) {\n    return 255 * (x <= 0.0031308 ? 12.92 * x : 1.055 * Math.pow(x, 1 / 2.4) - 0.055);\n  }\n\n  function rgb2xyz(x) {\n    return (x /= 255) <= 0.04045 ? x / 12.92 : Math.pow((x + 0.055) / 1.055, 2.4);\n  }\n\n  function hclConvert(o) {\n    if (o instanceof Hcl) return new Hcl(o.h, o.c, o.l, o.opacity);\n    if (!(o instanceof Lab)) o = labConvert(o);\n    var h = Math.atan2(o.b, o.a) * rad2deg;\n    return new Hcl(h < 0 ? h + 360 : h, Math.sqrt(o.a * o.a + o.b * o.b), o.l, o.opacity);\n  }\n\n  function hcl(h, c, l, opacity) {\n    return arguments.length === 1 ? hclConvert(h) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n  }\n\n  function Hcl(h, c, l, opacity) {\n    this.h = +h;\n    this.c = +c;\n    this.l = +l;\n    this.opacity = +opacity;\n  }\n\n  define(Hcl, hcl, extend(Color, {\n    brighter: function(k) {\n      return new Hcl(this.h, this.c, this.l + Kn * (k == null ? 1 : k), this.opacity);\n    },\n    darker: function(k) {\n      return new Hcl(this.h, this.c, this.l - Kn * (k == null ? 1 : k), this.opacity);\n    },\n    rgb: function() {\n      return labConvert(this).rgb();\n    }\n  }));\n\n  var A = -0.14861;\n  var B = +1.78277;\n  var C = -0.29227;\n  var D = -0.90649;\n  var E = +1.97294;\n  var ED = E * D;\n  var EB = E * B;\n  var BC_DA = B * C - D * A;\n  function cubehelixConvert(o) {\n    if (o instanceof Cubehelix) return new Cubehelix(o.h, o.s, o.l, o.opacity);\n    if (!(o instanceof Rgb)) o = rgbConvert(o);\n    var r = o.r / 255,\n        g = o.g / 255,\n        b = o.b / 255,\n        l = (BC_DA * b + ED * r - EB * g) / (BC_DA + ED - EB),\n        bl = b - l,\n        k = (E * (g - l) - C * bl) / D,\n        s = Math.sqrt(k * k + bl * bl) / (E * l * (1 - l)), // NaN if l=0 or l=1\n        h = s ? Math.atan2(k, bl) * rad2deg - 120 : NaN;\n    return new Cubehelix(h < 0 ? h + 360 : h, s, l, o.opacity);\n  }\n\n  function cubehelix(h, s, l, opacity) {\n    return arguments.length === 1 ? cubehelixConvert(h) : new Cubehelix(h, s, l, opacity == null ? 1 : opacity);\n  }\n\n  function Cubehelix(h, s, l, opacity) {\n    this.h = +h;\n    this.s = +s;\n    this.l = +l;\n    this.opacity = +opacity;\n  }\n\n  define(Cubehelix, cubehelix, extend(Color, {\n    brighter: function(k) {\n      k = k == null ? brighter : Math.pow(brighter, k);\n      return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n    },\n    darker: function(k) {\n      k = k == null ? darker : Math.pow(darker, k);\n      return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n    },\n    rgb: function() {\n      var h = isNaN(this.h) ? 0 : (this.h + 120) * deg2rad,\n          l = +this.l,\n          a = isNaN(this.s) ? 0 : this.s * l * (1 - l),\n          cosh = Math.cos(h),\n          sinh = Math.sin(h);\n      return new Rgb(\n        255 * (l + a * (A * cosh + B * sinh)),\n        255 * (l + a * (C * cosh + D * sinh)),\n        255 * (l + a * (E * cosh)),\n        this.opacity\n      );\n    }\n  }));\n\n  exports.color = color;\n  exports.rgb = rgb;\n  exports.hsl = hsl;\n  exports.lab = lab;\n  exports.hcl = hcl;\n  exports.cubehelix = cubehelix;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n}));","// https://d3js.org/d3-format/ Version 1.0.2. Copyright 2016 Mike Bostock.\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (factory((global.d3 = global.d3 || {})));\n}(this, function (exports) { 'use strict';\n\n  // Computes the decimal coefficient and exponent of the specified number x with\n  // significant digits p, where x is positive and p is in [1, 21] or undefined.\n  // For example, formatDecimal(1.23) returns [\"123\", 0].\n  function formatDecimal(x, p) {\n    if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, ±Infinity\n    var i, coefficient = x.slice(0, i);\n\n    // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n    // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n    return [\n      coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n      +x.slice(i + 1)\n    ];\n  }\n\n  function exponent(x) {\n    return x = formatDecimal(Math.abs(x)), x ? x[1] : NaN;\n  }\n\n  function formatGroup(grouping, thousands) {\n    return function(value, width) {\n      var i = value.length,\n          t = [],\n          j = 0,\n          g = grouping[0],\n          length = 0;\n\n      while (i > 0 && g > 0) {\n        if (length + g + 1 > width) g = Math.max(1, width - length);\n        t.push(value.substring(i -= g, i + g));\n        if ((length += g + 1) > width) break;\n        g = grouping[j = (j + 1) % grouping.length];\n      }\n\n      return t.reverse().join(thousands);\n    };\n  }\n\n  function formatDefault(x, p) {\n    x = x.toPrecision(p);\n\n    out: for (var n = x.length, i = 1, i0 = -1, i1; i < n; ++i) {\n      switch (x[i]) {\n        case \".\": i0 = i1 = i; break;\n        case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n        case \"e\": break out;\n        default: if (i0 > 0) i0 = 0; break;\n      }\n    }\n\n    return i0 > 0 ? x.slice(0, i0) + x.slice(i1 + 1) : x;\n  }\n\n  var prefixExponent;\n\n  function formatPrefixAuto(x, p) {\n    var d = formatDecimal(x, p);\n    if (!d) return x + \"\";\n    var coefficient = d[0],\n        exponent = d[1],\n        i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n        n = coefficient.length;\n    return i === n ? coefficient\n        : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n        : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n        : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimal(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n  }\n\n  function formatRounded(x, p) {\n    var d = formatDecimal(x, p);\n    if (!d) return x + \"\";\n    var coefficient = d[0],\n        exponent = d[1];\n    return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n        : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n        : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n  }\n\n  var formatTypes = {\n    \"\": formatDefault,\n    \"%\": function(x, p) { return (x * 100).toFixed(p); },\n    \"b\": function(x) { return Math.round(x).toString(2); },\n    \"c\": function(x) { return x + \"\"; },\n    \"d\": function(x) { return Math.round(x).toString(10); },\n    \"e\": function(x, p) { return x.toExponential(p); },\n    \"f\": function(x, p) { return x.toFixed(p); },\n    \"g\": function(x, p) { return x.toPrecision(p); },\n    \"o\": function(x) { return Math.round(x).toString(8); },\n    \"p\": function(x, p) { return formatRounded(x * 100, p); },\n    \"r\": formatRounded,\n    \"s\": formatPrefixAuto,\n    \"X\": function(x) { return Math.round(x).toString(16).toUpperCase(); },\n    \"x\": function(x) { return Math.round(x).toString(16); }\n  };\n\n  // [[fill]align][sign][symbol][0][width][,][.precision][type]\n  var re = /^(?:(.)?([<>=^]))?([+\\-\\( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?([a-z%])?$/i;\n\n  function formatSpecifier(specifier) {\n    return new FormatSpecifier(specifier);\n  }\n\n  function FormatSpecifier(specifier) {\n    if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n\n    var match,\n        fill = match[1] || \" \",\n        align = match[2] || \">\",\n        sign = match[3] || \"-\",\n        symbol = match[4] || \"\",\n        zero = !!match[5],\n        width = match[6] && +match[6],\n        comma = !!match[7],\n        precision = match[8] && +match[8].slice(1),\n        type = match[9] || \"\";\n\n    // The \"n\" type is an alias for \",g\".\n    if (type === \"n\") comma = true, type = \"g\";\n\n    // Map invalid types to the default format.\n    else if (!formatTypes[type]) type = \"\";\n\n    // If zero fill is specified, padding goes after sign and before digits.\n    if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n    this.fill = fill;\n    this.align = align;\n    this.sign = sign;\n    this.symbol = symbol;\n    this.zero = zero;\n    this.width = width;\n    this.comma = comma;\n    this.precision = precision;\n    this.type = type;\n  }\n\n  FormatSpecifier.prototype.toString = function() {\n    return this.fill\n        + this.align\n        + this.sign\n        + this.symbol\n        + (this.zero ? \"0\" : \"\")\n        + (this.width == null ? \"\" : Math.max(1, this.width | 0))\n        + (this.comma ? \",\" : \"\")\n        + (this.precision == null ? \"\" : \".\" + Math.max(0, this.precision | 0))\n        + this.type;\n  };\n\n  var prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"µ\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\n  function identity(x) {\n    return x;\n  }\n\n  function formatLocale(locale) {\n    var group = locale.grouping && locale.thousands ? formatGroup(locale.grouping, locale.thousands) : identity,\n        currency = locale.currency,\n        decimal = locale.decimal;\n\n    function newFormat(specifier) {\n      specifier = formatSpecifier(specifier);\n\n      var fill = specifier.fill,\n          align = specifier.align,\n          sign = specifier.sign,\n          symbol = specifier.symbol,\n          zero = specifier.zero,\n          width = specifier.width,\n          comma = specifier.comma,\n          precision = specifier.precision,\n          type = specifier.type;\n\n      // Compute the prefix and suffix.\n      // For SI-prefix, the suffix is lazily computed.\n      var prefix = symbol === \"$\" ? currency[0] : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n          suffix = symbol === \"$\" ? currency[1] : /[%p]/.test(type) ? \"%\" : \"\";\n\n      // What format function should we use?\n      // Is this an integer type?\n      // Can this type generate exponential notation?\n      var formatType = formatTypes[type],\n          maybeSuffix = !type || /[defgprs%]/.test(type);\n\n      // Set the default precision if not specified,\n      // or clamp the specified precision to the supported range.\n      // For significant precision, it must be in [1, 21].\n      // For fixed precision, it must be in [0, 20].\n      precision = precision == null ? (type ? 6 : 12)\n          : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n          : Math.max(0, Math.min(20, precision));\n\n      function format(value) {\n        var valuePrefix = prefix,\n            valueSuffix = suffix,\n            i, n, c;\n\n        if (type === \"c\") {\n          valueSuffix = formatType(value) + valueSuffix;\n          value = \"\";\n        } else {\n          value = +value;\n\n          // Convert negative to positive, and compute the prefix.\n          // Note that -0 is not less than 0, but 1 / -0 is!\n          var valueNegative = (value < 0 || 1 / value < 0) && (value *= -1, true);\n\n          // Perform the initial formatting.\n          value = formatType(value, precision);\n\n          // If the original value was negative, it may be rounded to zero during\n          // formatting; treat this as (positive) zero.\n          if (valueNegative) {\n            i = -1, n = value.length;\n            valueNegative = false;\n            while (++i < n) {\n              if (c = value.charCodeAt(i), (48 < c && c < 58)\n                  || (type === \"x\" && 96 < c && c < 103)\n                  || (type === \"X\" && 64 < c && c < 71)) {\n                valueNegative = true;\n                break;\n              }\n            }\n          }\n\n          // Compute the prefix and suffix.\n          valuePrefix = (valueNegative ? (sign === \"(\" ? sign : \"-\") : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n          valueSuffix = valueSuffix + (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n          // Break the formatted value into the integer “value” part that can be\n          // grouped, and fractional or exponential “suffix” part that is not.\n          if (maybeSuffix) {\n            i = -1, n = value.length;\n            while (++i < n) {\n              if (c = value.charCodeAt(i), 48 > c || c > 57) {\n                valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n                value = value.slice(0, i);\n                break;\n              }\n            }\n          }\n        }\n\n        // If the fill character is not \"0\", grouping is applied before padding.\n        if (comma && !zero) value = group(value, Infinity);\n\n        // Compute the padding.\n        var length = valuePrefix.length + value.length + valueSuffix.length,\n            padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n        // If the fill character is \"0\", grouping is applied after padding.\n        if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n        // Reconstruct the final output based on the desired alignment.\n        switch (align) {\n          case \"<\": return valuePrefix + value + valueSuffix + padding;\n          case \"=\": return valuePrefix + padding + value + valueSuffix;\n          case \"^\": return padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length);\n        }\n        return padding + valuePrefix + value + valueSuffix;\n      }\n\n      format.toString = function() {\n        return specifier + \"\";\n      };\n\n      return format;\n    }\n\n    function formatPrefix(specifier, value) {\n      var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n          e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n          k = Math.pow(10, -e),\n          prefix = prefixes[8 + e / 3];\n      return function(value) {\n        return f(k * value) + prefix;\n      };\n    }\n\n    return {\n      format: newFormat,\n      formatPrefix: formatPrefix\n    };\n  }\n\n  var locale;\n  defaultLocale({\n    decimal: \".\",\n    thousands: \",\",\n    grouping: [3],\n    currency: [\"$\", \"\"]\n  });\n\n  function defaultLocale(definition) {\n    locale = formatLocale(definition);\n    exports.format = locale.format;\n    exports.formatPrefix = locale.formatPrefix;\n    return locale;\n  }\n\n  function precisionFixed(step) {\n    return Math.max(0, -exponent(Math.abs(step)));\n  }\n\n  function precisionPrefix(step, value) {\n    return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));\n  }\n\n  function precisionRound(step, max) {\n    step = Math.abs(step), max = Math.abs(max) - step;\n    return Math.max(0, exponent(max) - exponent(step)) + 1;\n  }\n\n  exports.formatDefaultLocale = defaultLocale;\n  exports.formatLocale = formatLocale;\n  exports.formatSpecifier = formatSpecifier;\n  exports.precisionFixed = precisionFixed;\n  exports.precisionPrefix = precisionPrefix;\n  exports.precisionRound = precisionRound;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n}));","// https://d3js.org/d3-geo/ Version 1.2.4. Copyright 2016 Mike Bostock.\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('d3-array')) :\n  typeof define === 'function' && define.amd ? define(['exports', 'd3-array'], factory) :\n  (factory((global.d3 = global.d3 || {}),global.d3));\n}(this, (function (exports,d3Array) { 'use strict';\n\n// Adds floating point numbers with twice the normal precision.\n// Reference: J. R. Shewchuk, Adaptive Precision Floating-Point Arithmetic and\n// Fast Robust Geometric Predicates, Discrete & Computational Geometry 18(3)\n// 305–363 (1997).\n// Code adapted from GeographicLib by Charles F. F. Karney,\n// http://geographiclib.sourceforge.net/\n\nfunction adder() {\n  return new Adder;\n}\n\nfunction Adder() {\n  this.reset();\n}\n\nAdder.prototype = {\n  constructor: Adder,\n  reset: function() {\n    this.s = // rounded value\n    this.t = 0; // exact error\n  },\n  add: function(y) {\n    add(temp, y, this.t);\n    add(this, temp.s, this.s);\n    if (this.s) this.t += temp.t;\n    else this.s = temp.t;\n  },\n  valueOf: function() {\n    return this.s;\n  }\n};\n\nvar temp = new Adder;\n\nfunction add(adder, a, b) {\n  var x = adder.s = a + b,\n      bv = x - a,\n      av = x - bv;\n  adder.t = (a - av) + (b - bv);\n}\n\nvar epsilon = 1e-6;\nvar epsilon2 = 1e-12;\nvar pi = Math.PI;\nvar halfPi = pi / 2;\nvar quarterPi = pi / 4;\nvar tau = pi * 2;\n\nvar degrees = 180 / pi;\nvar radians = pi / 180;\n\nvar abs = Math.abs;\nvar atan = Math.atan;\nvar atan2 = Math.atan2;\nvar cos = Math.cos;\nvar ceil = Math.ceil;\nvar exp = Math.exp;\nvar log = Math.log;\nvar pow = Math.pow;\nvar sin = Math.sin;\nvar sign = Math.sign || function(x) { return x > 0 ? 1 : x < 0 ? -1 : 0; };\nvar sqrt = Math.sqrt;\nvar tan = Math.tan;\n\nfunction acos(x) {\n  return x > 1 ? 0 : x < -1 ? pi : Math.acos(x);\n}\n\nfunction asin(x) {\n  return x > 1 ? halfPi : x < -1 ? -halfPi : Math.asin(x);\n}\n\nfunction haversin(x) {\n  return (x = sin(x / 2)) * x;\n}\n\nfunction noop() {}\n\nfunction streamGeometry(geometry, stream) {\n  if (geometry && streamGeometryType.hasOwnProperty(geometry.type)) {\n    streamGeometryType[geometry.type](geometry, stream);\n  }\n}\n\nvar streamObjectType = {\n  Feature: function(feature, stream) {\n    streamGeometry(feature.geometry, stream);\n  },\n  FeatureCollection: function(object, stream) {\n    var features = object.features, i = -1, n = features.length;\n    while (++i < n) streamGeometry(features[i].geometry, stream);\n  }\n};\n\nvar streamGeometryType = {\n  Sphere: function(object, stream) {\n    stream.sphere();\n  },\n  Point: function(object, stream) {\n    object = object.coordinates;\n    stream.point(object[0], object[1], object[2]);\n  },\n  MultiPoint: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) object = coordinates[i], stream.point(object[0], object[1], object[2]);\n  },\n  LineString: function(object, stream) {\n    streamLine(object.coordinates, stream, 0);\n  },\n  MultiLineString: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) streamLine(coordinates[i], stream, 0);\n  },\n  Polygon: function(object, stream) {\n    streamPolygon(object.coordinates, stream);\n  },\n  MultiPolygon: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) streamPolygon(coordinates[i], stream);\n  },\n  GeometryCollection: function(object, stream) {\n    var geometries = object.geometries, i = -1, n = geometries.length;\n    while (++i < n) streamGeometry(geometries[i], stream);\n  }\n};\n\nfunction streamLine(coordinates, stream, closed) {\n  var i = -1, n = coordinates.length - closed, coordinate;\n  stream.lineStart();\n  while (++i < n) coordinate = coordinates[i], stream.point(coordinate[0], coordinate[1], coordinate[2]);\n  stream.lineEnd();\n}\n\nfunction streamPolygon(coordinates, stream) {\n  var i = -1, n = coordinates.length;\n  stream.polygonStart();\n  while (++i < n) streamLine(coordinates[i], stream, 1);\n  stream.polygonEnd();\n}\n\nfunction geoStream(object, stream) {\n  if (object && streamObjectType.hasOwnProperty(object.type)) {\n    streamObjectType[object.type](object, stream);\n  } else {\n    streamGeometry(object, stream);\n  }\n}\n\nvar areaRingSum = adder();\n\nvar areaSum = adder();\nvar lambda00;\nvar phi00;\nvar lambda0;\nvar cosPhi0;\nvar sinPhi0;\nvar areaStream = {\n  point: noop,\n  lineStart: noop,\n  lineEnd: noop,\n  polygonStart: function() {\n    areaRingSum.reset();\n    areaStream.lineStart = areaRingStart;\n    areaStream.lineEnd = areaRingEnd;\n  },\n  polygonEnd: function() {\n    var areaRing = +areaRingSum;\n    areaSum.add(areaRing < 0 ? tau + areaRing : areaRing);\n    this.lineStart = this.lineEnd = this.point = noop;\n  },\n  sphere: function() {\n    areaSum.add(tau);\n  }\n};\n\nfunction areaRingStart() {\n  areaStream.point = areaPointFirst;\n}\n\nfunction areaRingEnd() {\n  areaPoint(lambda00, phi00);\n}\n\nfunction areaPointFirst(lambda, phi) {\n  areaStream.point = areaPoint;\n  lambda00 = lambda, phi00 = phi;\n  lambda *= radians, phi *= radians;\n  lambda0 = lambda, cosPhi0 = cos(phi = phi / 2 + quarterPi), sinPhi0 = sin(phi);\n}\n\nfunction areaPoint(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  phi = phi / 2 + quarterPi; // half the angular distance from south pole\n\n  // Spherical excess E for a spherical triangle with vertices: south pole,\n  // previous point, current point.  Uses a formula derived from Cagnoli’s\n  // theorem.  See Todhunter, Spherical Trig. (1871), Sec. 103, Eq. (2).\n  var dLambda = lambda - lambda0,\n      sdLambda = dLambda >= 0 ? 1 : -1,\n      adLambda = sdLambda * dLambda,\n      cosPhi = cos(phi),\n      sinPhi = sin(phi),\n      k = sinPhi0 * sinPhi,\n      u = cosPhi0 * cosPhi + k * cos(adLambda),\n      v = k * sdLambda * sin(adLambda);\n  areaRingSum.add(atan2(v, u));\n\n  // Advance the previous points.\n  lambda0 = lambda, cosPhi0 = cosPhi, sinPhi0 = sinPhi;\n}\n\nfunction area(object) {\n  areaSum.reset();\n  geoStream(object, areaStream);\n  return areaSum * 2;\n}\n\nfunction spherical(cartesian) {\n  return [atan2(cartesian[1], cartesian[0]), asin(cartesian[2])];\n}\n\nfunction cartesian(spherical) {\n  var lambda = spherical[0], phi = spherical[1], cosPhi = cos(phi);\n  return [cosPhi * cos(lambda), cosPhi * sin(lambda), sin(phi)];\n}\n\nfunction cartesianDot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n\nfunction cartesianCross(a, b) {\n  return [a[1] * b[2] - a[2] * b[1], a[2] * b[0] - a[0] * b[2], a[0] * b[1] - a[1] * b[0]];\n}\n\n// TODO return a\nfunction cartesianAddInPlace(a, b) {\n  a[0] += b[0], a[1] += b[1], a[2] += b[2];\n}\n\nfunction cartesianScale(vector, k) {\n  return [vector[0] * k, vector[1] * k, vector[2] * k];\n}\n\n// TODO return d\nfunction cartesianNormalizeInPlace(d) {\n  var l = sqrt(d[0] * d[0] + d[1] * d[1] + d[2] * d[2]);\n  d[0] /= l, d[1] /= l, d[2] /= l;\n}\n\nvar lambda0$1;\nvar phi0;\nvar lambda1;\nvar phi1;\nvar lambda2;\nvar lambda00$1;\nvar phi00$1;\nvar p0;\nvar deltaSum = adder();\nvar ranges;\nvar range$1;\nvar boundsStream = {\n  point: boundsPoint,\n  lineStart: boundsLineStart,\n  lineEnd: boundsLineEnd,\n  polygonStart: function() {\n    boundsStream.point = boundsRingPoint;\n    boundsStream.lineStart = boundsRingStart;\n    boundsStream.lineEnd = boundsRingEnd;\n    deltaSum.reset();\n    areaStream.polygonStart();\n  },\n  polygonEnd: function() {\n    areaStream.polygonEnd();\n    boundsStream.point = boundsPoint;\n    boundsStream.lineStart = boundsLineStart;\n    boundsStream.lineEnd = boundsLineEnd;\n    if (areaRingSum < 0) lambda0$1 = -(lambda1 = 180), phi0 = -(phi1 = 90);\n    else if (deltaSum > epsilon) phi1 = 90;\n    else if (deltaSum < -epsilon) phi0 = -90;\n    range$1[0] = lambda0$1, range$1[1] = lambda1;\n  }\n};\n\nfunction boundsPoint(lambda, phi) {\n  ranges.push(range$1 = [lambda0$1 = lambda, lambda1 = lambda]);\n  if (phi < phi0) phi0 = phi;\n  if (phi > phi1) phi1 = phi;\n}\n\nfunction linePoint(lambda, phi) {\n  var p = cartesian([lambda * radians, phi * radians]);\n  if (p0) {\n    var normal = cartesianCross(p0, p),\n        equatorial = [normal[1], -normal[0], 0],\n        inflection = cartesianCross(equatorial, normal);\n    cartesianNormalizeInPlace(inflection);\n    inflection = spherical(inflection);\n    var delta = lambda - lambda2,\n        sign = delta > 0 ? 1 : -1,\n        lambdai = inflection[0] * degrees * sign,\n        phii,\n        antimeridian = abs(delta) > 180;\n    if (antimeridian ^ (sign * lambda2 < lambdai && lambdai < sign * lambda)) {\n      phii = inflection[1] * degrees;\n      if (phii > phi1) phi1 = phii;\n    } else if (lambdai = (lambdai + 360) % 360 - 180, antimeridian ^ (sign * lambda2 < lambdai && lambdai < sign * lambda)) {\n      phii = -inflection[1] * degrees;\n      if (phii < phi0) phi0 = phii;\n    } else {\n      if (phi < phi0) phi0 = phi;\n      if (phi > phi1) phi1 = phi;\n    }\n    if (antimeridian) {\n      if (lambda < lambda2) {\n        if (angle(lambda0$1, lambda) > angle(lambda0$1, lambda1)) lambda1 = lambda;\n      } else {\n        if (angle(lambda, lambda1) > angle(lambda0$1, lambda1)) lambda0$1 = lambda;\n      }\n    } else {\n      if (lambda1 >= lambda0$1) {\n        if (lambda < lambda0$1) lambda0$1 = lambda;\n        if (lambda > lambda1) lambda1 = lambda;\n      } else {\n        if (lambda > lambda2) {\n          if (angle(lambda0$1, lambda) > angle(lambda0$1, lambda1)) lambda1 = lambda;\n        } else {\n          if (angle(lambda, lambda1) > angle(lambda0$1, lambda1)) lambda0$1 = lambda;\n        }\n      }\n    }\n  } else {\n    boundsPoint(lambda, phi);\n  }\n  p0 = p, lambda2 = lambda;\n}\n\nfunction boundsLineStart() {\n  boundsStream.point = linePoint;\n}\n\nfunction boundsLineEnd() {\n  range$1[0] = lambda0$1, range$1[1] = lambda1;\n  boundsStream.point = boundsPoint;\n  p0 = null;\n}\n\nfunction boundsRingPoint(lambda, phi) {\n  if (p0) {\n    var delta = lambda - lambda2;\n    deltaSum.add(abs(delta) > 180 ? delta + (delta > 0 ? 360 : -360) : delta);\n  } else {\n    lambda00$1 = lambda, phi00$1 = phi;\n  }\n  areaStream.point(lambda, phi);\n  linePoint(lambda, phi);\n}\n\nfunction boundsRingStart() {\n  areaStream.lineStart();\n}\n\nfunction boundsRingEnd() {\n  boundsRingPoint(lambda00$1, phi00$1);\n  areaStream.lineEnd();\n  if (abs(deltaSum) > epsilon) lambda0$1 = -(lambda1 = 180);\n  range$1[0] = lambda0$1, range$1[1] = lambda1;\n  p0 = null;\n}\n\n// Finds the left-right distance between two longitudes.\n// This is almost the same as (lambda1 - lambda0 + 360°) % 360°, except that we want\n// the distance between ±180° to be 360°.\nfunction angle(lambda0, lambda1) {\n  return (lambda1 -= lambda0) < 0 ? lambda1 + 360 : lambda1;\n}\n\nfunction rangeCompare(a, b) {\n  return a[0] - b[0];\n}\n\nfunction rangeContains(range, x) {\n  return range[0] <= range[1] ? range[0] <= x && x <= range[1] : x < range[0] || range[1] < x;\n}\n\nfunction bounds(feature) {\n  var i, n, a, b, merged, deltaMax, delta;\n\n  phi1 = lambda1 = -(lambda0$1 = phi0 = Infinity);\n  ranges = [];\n  geoStream(feature, boundsStream);\n\n  // First, sort ranges by their minimum longitudes.\n  if (n = ranges.length) {\n    ranges.sort(rangeCompare);\n\n    // Then, merge any ranges that overlap.\n    for (i = 1, a = ranges[0], merged = [a]; i < n; ++i) {\n      b = ranges[i];\n      if (rangeContains(a, b[0]) || rangeContains(a, b[1])) {\n        if (angle(a[0], b[1]) > angle(a[0], a[1])) a[1] = b[1];\n        if (angle(b[0], a[1]) > angle(a[0], a[1])) a[0] = b[0];\n      } else {\n        merged.push(a = b);\n      }\n    }\n\n    // Finally, find the largest gap between the merged ranges.\n    // The final bounding box will be the inverse of this gap.\n    for (deltaMax = -Infinity, n = merged.length - 1, i = 0, a = merged[n]; i <= n; a = b, ++i) {\n      b = merged[i];\n      if ((delta = angle(a[1], b[0])) > deltaMax) deltaMax = delta, lambda0$1 = b[0], lambda1 = a[1];\n    }\n  }\n\n  ranges = range$1 = null;\n\n  return lambda0$1 === Infinity || phi0 === Infinity\n      ? [[NaN, NaN], [NaN, NaN]]\n      : [[lambda0$1, phi0], [lambda1, phi1]];\n}\n\nvar W0;\nvar W1;\nvar X0;\nvar Y0;\nvar Z0;\nvar X1;\nvar Y1;\nvar Z1;\nvar X2;\nvar Y2;\nvar Z2;\nvar lambda00$2;\nvar phi00$2;\nvar x0;\nvar y0;\nvar z0;\n// previous point\n\nvar centroidStream = {\n  sphere: noop,\n  point: centroidPoint,\n  lineStart: centroidLineStart,\n  lineEnd: centroidLineEnd,\n  polygonStart: function() {\n    centroidStream.lineStart = centroidRingStart;\n    centroidStream.lineEnd = centroidRingEnd;\n  },\n  polygonEnd: function() {\n    centroidStream.lineStart = centroidLineStart;\n    centroidStream.lineEnd = centroidLineEnd;\n  }\n};\n\n// Arithmetic mean of Cartesian vectors.\nfunction centroidPoint(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  var cosPhi = cos(phi);\n  centroidPointCartesian(cosPhi * cos(lambda), cosPhi * sin(lambda), sin(phi));\n}\n\nfunction centroidPointCartesian(x, y, z) {\n  ++W0;\n  X0 += (x - X0) / W0;\n  Y0 += (y - Y0) / W0;\n  Z0 += (z - Z0) / W0;\n}\n\nfunction centroidLineStart() {\n  centroidStream.point = centroidLinePointFirst;\n}\n\nfunction centroidLinePointFirst(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  var cosPhi = cos(phi);\n  x0 = cosPhi * cos(lambda);\n  y0 = cosPhi * sin(lambda);\n  z0 = sin(phi);\n  centroidStream.point = centroidLinePoint;\n  centroidPointCartesian(x0, y0, z0);\n}\n\nfunction centroidLinePoint(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  var cosPhi = cos(phi),\n      x = cosPhi * cos(lambda),\n      y = cosPhi * sin(lambda),\n      z = sin(phi),\n      w = atan2(sqrt((w = y0 * z - z0 * y) * w + (w = z0 * x - x0 * z) * w + (w = x0 * y - y0 * x) * w), x0 * x + y0 * y + z0 * z);\n  W1 += w;\n  X1 += w * (x0 + (x0 = x));\n  Y1 += w * (y0 + (y0 = y));\n  Z1 += w * (z0 + (z0 = z));\n  centroidPointCartesian(x0, y0, z0);\n}\n\nfunction centroidLineEnd() {\n  centroidStream.point = centroidPoint;\n}\n\n// See J. E. Brock, The Inertia Tensor for a Spherical Triangle,\n// J. Applied Mechanics 42, 239 (1975).\nfunction centroidRingStart() {\n  centroidStream.point = centroidRingPointFirst;\n}\n\nfunction centroidRingEnd() {\n  centroidRingPoint(lambda00$2, phi00$2);\n  centroidStream.point = centroidPoint;\n}\n\nfunction centroidRingPointFirst(lambda, phi) {\n  lambda00$2 = lambda, phi00$2 = phi;\n  lambda *= radians, phi *= radians;\n  centroidStream.point = centroidRingPoint;\n  var cosPhi = cos(phi);\n  x0 = cosPhi * cos(lambda);\n  y0 = cosPhi * sin(lambda);\n  z0 = sin(phi);\n  centroidPointCartesian(x0, y0, z0);\n}\n\nfunction centroidRingPoint(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  var cosPhi = cos(phi),\n      x = cosPhi * cos(lambda),\n      y = cosPhi * sin(lambda),\n      z = sin(phi),\n      cx = y0 * z - z0 * y,\n      cy = z0 * x - x0 * z,\n      cz = x0 * y - y0 * x,\n      m = sqrt(cx * cx + cy * cy + cz * cz),\n      u = x0 * x + y0 * y + z0 * z,\n      v = m && -acos(u) / m, // area weight\n      w = atan2(m, u); // line weight\n  X2 += v * cx;\n  Y2 += v * cy;\n  Z2 += v * cz;\n  W1 += w;\n  X1 += w * (x0 + (x0 = x));\n  Y1 += w * (y0 + (y0 = y));\n  Z1 += w * (z0 + (z0 = z));\n  centroidPointCartesian(x0, y0, z0);\n}\n\nfunction centroid(object) {\n  W0 = W1 =\n  X0 = Y0 = Z0 =\n  X1 = Y1 = Z1 =\n  X2 = Y2 = Z2 = 0;\n  geoStream(object, centroidStream);\n\n  var x = X2,\n      y = Y2,\n      z = Z2,\n      m = x * x + y * y + z * z;\n\n  // If the area-weighted ccentroid is undefined, fall back to length-weighted ccentroid.\n  if (m < epsilon2) {\n    x = X1, y = Y1, z = Z1;\n    // If the feature has zero length, fall back to arithmetic mean of point vectors.\n    if (W1 < epsilon) x = X0, y = Y0, z = Z0;\n    m = x * x + y * y + z * z;\n    // If the feature still has an undefined ccentroid, then return.\n    if (m < epsilon2) return [NaN, NaN];\n  }\n\n  return [atan2(y, x) * degrees, asin(z / sqrt(m)) * degrees];\n}\n\nfunction constant(x) {\n  return function() {\n    return x;\n  };\n}\n\nfunction compose(a, b) {\n\n  function compose(x, y) {\n    return x = a(x, y), b(x[0], x[1]);\n  }\n\n  if (a.invert && b.invert) compose.invert = function(x, y) {\n    return x = b.invert(x, y), x && a.invert(x[0], x[1]);\n  };\n\n  return compose;\n}\n\nfunction rotationIdentity(lambda, phi) {\n  return [lambda > pi ? lambda - tau : lambda < -pi ? lambda + tau : lambda, phi];\n}\n\nrotationIdentity.invert = rotationIdentity;\n\nfunction rotateRadians(deltaLambda, deltaPhi, deltaGamma) {\n  return (deltaLambda %= tau) ? (deltaPhi || deltaGamma ? compose(rotationLambda(deltaLambda), rotationPhiGamma(deltaPhi, deltaGamma))\n    : rotationLambda(deltaLambda))\n    : (deltaPhi || deltaGamma ? rotationPhiGamma(deltaPhi, deltaGamma)\n    : rotationIdentity);\n}\n\nfunction forwardRotationLambda(deltaLambda) {\n  return function(lambda, phi) {\n    return lambda += deltaLambda, [lambda > pi ? lambda - tau : lambda < -pi ? lambda + tau : lambda, phi];\n  };\n}\n\nfunction rotationLambda(deltaLambda) {\n  var rotation = forwardRotationLambda(deltaLambda);\n  rotation.invert = forwardRotationLambda(-deltaLambda);\n  return rotation;\n}\n\nfunction rotationPhiGamma(deltaPhi, deltaGamma) {\n  var cosDeltaPhi = cos(deltaPhi),\n      sinDeltaPhi = sin(deltaPhi),\n      cosDeltaGamma = cos(deltaGamma),\n      sinDeltaGamma = sin(deltaGamma);\n\n  function rotation(lambda, phi) {\n    var cosPhi = cos(phi),\n        x = cos(lambda) * cosPhi,\n        y = sin(lambda) * cosPhi,\n        z = sin(phi),\n        k = z * cosDeltaPhi + x * sinDeltaPhi;\n    return [\n      atan2(y * cosDeltaGamma - k * sinDeltaGamma, x * cosDeltaPhi - z * sinDeltaPhi),\n      asin(k * cosDeltaGamma + y * sinDeltaGamma)\n    ];\n  }\n\n  rotation.invert = function(lambda, phi) {\n    var cosPhi = cos(phi),\n        x = cos(lambda) * cosPhi,\n        y = sin(lambda) * cosPhi,\n        z = sin(phi),\n        k = z * cosDeltaGamma - y * sinDeltaGamma;\n    return [\n      atan2(y * cosDeltaGamma + z * sinDeltaGamma, x * cosDeltaPhi + k * sinDeltaPhi),\n      asin(k * cosDeltaPhi - x * sinDeltaPhi)\n    ];\n  };\n\n  return rotation;\n}\n\nfunction rotation(rotate) {\n  rotate = rotateRadians(rotate[0] * radians, rotate[1] * radians, rotate.length > 2 ? rotate[2] * radians : 0);\n\n  function forward(coordinates) {\n    coordinates = rotate(coordinates[0] * radians, coordinates[1] * radians);\n    return coordinates[0] *= degrees, coordinates[1] *= degrees, coordinates;\n  }\n\n  forward.invert = function(coordinates) {\n    coordinates = rotate.invert(coordinates[0] * radians, coordinates[1] * radians);\n    return coordinates[0] *= degrees, coordinates[1] *= degrees, coordinates;\n  };\n\n  return forward;\n}\n\n// Generates a circle centered at [0°, 0°], with a given radius and precision.\nfunction circleStream(stream, radius, delta, direction, t0, t1) {\n  if (!delta) return;\n  var cosRadius = cos(radius),\n      sinRadius = sin(radius),\n      step = direction * delta;\n  if (t0 == null) {\n    t0 = radius + direction * tau;\n    t1 = radius - step / 2;\n  } else {\n    t0 = circleRadius(cosRadius, t0);\n    t1 = circleRadius(cosRadius, t1);\n    if (direction > 0 ? t0 < t1 : t0 > t1) t0 += direction * tau;\n  }\n  for (var point, t = t0; direction > 0 ? t > t1 : t < t1; t -= step) {\n    point = spherical([cosRadius, -sinRadius * cos(t), -sinRadius * sin(t)]);\n    stream.point(point[0], point[1]);\n  }\n}\n\n// Returns the signed angle of a cartesian point relative to [cosRadius, 0, 0].\nfunction circleRadius(cosRadius, point) {\n  point = cartesian(point), point[0] -= cosRadius;\n  cartesianNormalizeInPlace(point);\n  var radius = acos(-point[1]);\n  return ((-point[2] < 0 ? -radius : radius) + tau - epsilon) % tau;\n}\n\nfunction circle() {\n  var center = constant([0, 0]),\n      radius = constant(90),\n      precision = constant(6),\n      ring,\n      rotate,\n      stream = {point: point};\n\n  function point(x, y) {\n    ring.push(x = rotate(x, y));\n    x[0] *= degrees, x[1] *= degrees;\n  }\n\n  function circle() {\n    var c = center.apply(this, arguments),\n        r = radius.apply(this, arguments) * radians,\n        p = precision.apply(this, arguments) * radians;\n    ring = [];\n    rotate = rotateRadians(-c[0] * radians, -c[1] * radians, 0).invert;\n    circleStream(stream, r, p, 1);\n    c = {type: \"Polygon\", coordinates: [ring]};\n    ring = rotate = null;\n    return c;\n  }\n\n  circle.center = function(_) {\n    return arguments.length ? (center = typeof _ === \"function\" ? _ : constant([+_[0], +_[1]]), circle) : center;\n  };\n\n  circle.radius = function(_) {\n    return arguments.length ? (radius = typeof _ === \"function\" ? _ : constant(+_), circle) : radius;\n  };\n\n  circle.precision = function(_) {\n    return arguments.length ? (precision = typeof _ === \"function\" ? _ : constant(+_), circle) : precision;\n  };\n\n  return circle;\n}\n\nfunction clipBuffer() {\n  var lines = [],\n      line;\n  return {\n    point: function(x, y) {\n      line.push([x, y]);\n    },\n    lineStart: function() {\n      lines.push(line = []);\n    },\n    lineEnd: noop,\n    rejoin: function() {\n      if (lines.length > 1) lines.push(lines.pop().concat(lines.shift()));\n    },\n    result: function() {\n      var result = lines;\n      lines = [];\n      line = null;\n      return result;\n    }\n  };\n}\n\nfunction clipLine(a, b, x0, y0, x1, y1) {\n  var ax = a[0],\n      ay = a[1],\n      bx = b[0],\n      by = b[1],\n      t0 = 0,\n      t1 = 1,\n      dx = bx - ax,\n      dy = by - ay,\n      r;\n\n  r = x0 - ax;\n  if (!dx && r > 0) return;\n  r /= dx;\n  if (dx < 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  } else if (dx > 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  }\n\n  r = x1 - ax;\n  if (!dx && r < 0) return;\n  r /= dx;\n  if (dx < 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  } else if (dx > 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  }\n\n  r = y0 - ay;\n  if (!dy && r > 0) return;\n  r /= dy;\n  if (dy < 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  } else if (dy > 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  }\n\n  r = y1 - ay;\n  if (!dy && r < 0) return;\n  r /= dy;\n  if (dy < 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  } else if (dy > 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  }\n\n  if (t0 > 0) a[0] = ax + t0 * dx, a[1] = ay + t0 * dy;\n  if (t1 < 1) b[0] = ax + t1 * dx, b[1] = ay + t1 * dy;\n  return true;\n}\n\nfunction pointEqual(a, b) {\n  return abs(a[0] - b[0]) < epsilon && abs(a[1] - b[1]) < epsilon;\n}\n\nfunction Intersection(point, points, other, entry) {\n  this.x = point;\n  this.z = points;\n  this.o = other; // another intersection\n  this.e = entry; // is an entry?\n  this.v = false; // visited\n  this.n = this.p = null; // next & previous\n}\n\n// A generalized polygon clipping algorithm: given a polygon that has been cut\n// into its visible line segments, and rejoins the segments by interpolating\n// along the clip edge.\nfunction clipPolygon(segments, compareIntersection, startInside, interpolate, stream) {\n  var subject = [],\n      clip = [],\n      i,\n      n;\n\n  segments.forEach(function(segment) {\n    if ((n = segment.length - 1) <= 0) return;\n    var n, p0 = segment[0], p1 = segment[n], x;\n\n    // If the first and last points of a segment are coincident, then treat as a\n    // closed ring. TODO if all rings are closed, then the winding order of the\n    // exterior ring should be checked.\n    if (pointEqual(p0, p1)) {\n      stream.lineStart();\n      for (i = 0; i < n; ++i) stream.point((p0 = segment[i])[0], p0[1]);\n      stream.lineEnd();\n      return;\n    }\n\n    subject.push(x = new Intersection(p0, segment, null, true));\n    clip.push(x.o = new Intersection(p0, null, x, false));\n    subject.push(x = new Intersection(p1, segment, null, false));\n    clip.push(x.o = new Intersection(p1, null, x, true));\n  });\n\n  if (!subject.length) return;\n\n  clip.sort(compareIntersection);\n  link(subject);\n  link(clip);\n\n  for (i = 0, n = clip.length; i < n; ++i) {\n    clip[i].e = startInside = !startInside;\n  }\n\n  var start = subject[0],\n      points,\n      point;\n\n  while (1) {\n    // Find first unvisited intersection.\n    var current = start,\n        isSubject = true;\n    while (current.v) if ((current = current.n) === start) return;\n    points = current.z;\n    stream.lineStart();\n    do {\n      current.v = current.o.v = true;\n      if (current.e) {\n        if (isSubject) {\n          for (i = 0, n = points.length; i < n; ++i) stream.point((point = points[i])[0], point[1]);\n        } else {\n          interpolate(current.x, current.n.x, 1, stream);\n        }\n        current = current.n;\n      } else {\n        if (isSubject) {\n          points = current.p.z;\n          for (i = points.length - 1; i >= 0; --i) stream.point((point = points[i])[0], point[1]);\n        } else {\n          interpolate(current.x, current.p.x, -1, stream);\n        }\n        current = current.p;\n      }\n      current = current.o;\n      points = current.z;\n      isSubject = !isSubject;\n    } while (!current.v);\n    stream.lineEnd();\n  }\n}\n\nfunction link(array) {\n  if (!(n = array.length)) return;\n  var n,\n      i = 0,\n      a = array[0],\n      b;\n  while (++i < n) {\n    a.n = b = array[i];\n    b.p = a;\n    a = b;\n  }\n  a.n = b = array[0];\n  b.p = a;\n}\n\nvar clipMax = 1e9;\nvar clipMin = -clipMax;\n// TODO Use d3-polygon’s polygonContains here for the ring check?\n// TODO Eliminate duplicate buffering in clipBuffer and polygon.push?\n\nfunction clipExtent(x0, y0, x1, y1) {\n\n  function visible(x, y) {\n    return x0 <= x && x <= x1 && y0 <= y && y <= y1;\n  }\n\n  function interpolate(from, to, direction, stream) {\n    var a = 0, a1 = 0;\n    if (from == null\n        || (a = corner(from, direction)) !== (a1 = corner(to, direction))\n        || comparePoint(from, to) < 0 ^ direction > 0) {\n      do stream.point(a === 0 || a === 3 ? x0 : x1, a > 1 ? y1 : y0);\n      while ((a = (a + direction + 4) % 4) !== a1);\n    } else {\n      stream.point(to[0], to[1]);\n    }\n  }\n\n  function corner(p, direction) {\n    return abs(p[0] - x0) < epsilon ? direction > 0 ? 0 : 3\n        : abs(p[0] - x1) < epsilon ? direction > 0 ? 2 : 1\n        : abs(p[1] - y0) < epsilon ? direction > 0 ? 1 : 0\n        : direction > 0 ? 3 : 2; // abs(p[1] - y1) < epsilon\n  }\n\n  function compareIntersection(a, b) {\n    return comparePoint(a.x, b.x);\n  }\n\n  function comparePoint(a, b) {\n    var ca = corner(a, 1),\n        cb = corner(b, 1);\n    return ca !== cb ? ca - cb\n        : ca === 0 ? b[1] - a[1]\n        : ca === 1 ? a[0] - b[0]\n        : ca === 2 ? a[1] - b[1]\n        : b[0] - a[0];\n  }\n\n  return function(stream) {\n    var activeStream = stream,\n        bufferStream = clipBuffer(),\n        segments,\n        polygon,\n        ring,\n        x__, y__, v__, // first point\n        x_, y_, v_, // previous point\n        first,\n        clean;\n\n    var clipStream = {\n      point: point,\n      lineStart: lineStart,\n      lineEnd: lineEnd,\n      polygonStart: polygonStart,\n      polygonEnd: polygonEnd\n    };\n\n    function point(x, y) {\n      if (visible(x, y)) activeStream.point(x, y);\n    }\n\n    function polygonInside() {\n      var winding = 0;\n\n      for (var i = 0, n = polygon.length; i < n; ++i) {\n        for (var ring = polygon[i], j = 1, m = ring.length, point = ring[0], a0, a1, b0 = point[0], b1 = point[1]; j < m; ++j) {\n          a0 = b0, a1 = b1, point = ring[j], b0 = point[0], b1 = point[1];\n          if (a1 <= y1) { if (b1 > y1 && (b0 - a0) * (y1 - a1) > (b1 - a1) * (x0 - a0)) ++winding; }\n          else { if (b1 <= y1 && (b0 - a0) * (y1 - a1) < (b1 - a1) * (x0 - a0)) --winding; }\n        }\n      }\n\n      return winding;\n    }\n\n    // Buffer geometry within a polygon and then clip it en masse.\n    function polygonStart() {\n      activeStream = bufferStream, segments = [], polygon = [], clean = true;\n    }\n\n    function polygonEnd() {\n      var startInside = polygonInside(),\n          cleanInside = clean && startInside,\n          visible = (segments = d3Array.merge(segments)).length;\n      if (cleanInside || visible) {\n        stream.polygonStart();\n        if (cleanInside) {\n          stream.lineStart();\n          interpolate(null, null, 1, stream);\n          stream.lineEnd();\n        }\n        if (visible) {\n          clipPolygon(segments, compareIntersection, startInside, interpolate, stream);\n        }\n        stream.polygonEnd();\n      }\n      activeStream = stream, segments = polygon = ring = null;\n    }\n\n    function lineStart() {\n      clipStream.point = linePoint;\n      if (polygon) polygon.push(ring = []);\n      first = true;\n      v_ = false;\n      x_ = y_ = NaN;\n    }\n\n    // TODO rather than special-case polygons, simply handle them separately.\n    // Ideally, coincident intersection points should be jittered to avoid\n    // clipping issues.\n    function lineEnd() {\n      if (segments) {\n        linePoint(x__, y__);\n        if (v__ && v_) bufferStream.rejoin();\n        segments.push(bufferStream.result());\n      }\n      clipStream.point = point;\n      if (v_) activeStream.lineEnd();\n    }\n\n    function linePoint(x, y) {\n      var v = visible(x, y);\n      if (polygon) ring.push([x, y]);\n      if (first) {\n        x__ = x, y__ = y, v__ = v;\n        first = false;\n        if (v) {\n          activeStream.lineStart();\n          activeStream.point(x, y);\n        }\n      } else {\n        if (v && v_) activeStream.point(x, y);\n        else {\n          var a = [x_ = Math.max(clipMin, Math.min(clipMax, x_)), y_ = Math.max(clipMin, Math.min(clipMax, y_))],\n              b = [x = Math.max(clipMin, Math.min(clipMax, x)), y = Math.max(clipMin, Math.min(clipMax, y))];\n          if (clipLine(a, b, x0, y0, x1, y1)) {\n            if (!v_) {\n              activeStream.lineStart();\n              activeStream.point(a[0], a[1]);\n            }\n            activeStream.point(b[0], b[1]);\n            if (!v) activeStream.lineEnd();\n            clean = false;\n          } else if (v) {\n            activeStream.lineStart();\n            activeStream.point(x, y);\n            clean = false;\n          }\n        }\n      }\n      x_ = x, y_ = y, v_ = v;\n    }\n\n    return clipStream;\n  };\n}\n\nfunction extent() {\n  var x0 = 0,\n      y0 = 0,\n      x1 = 960,\n      y1 = 500,\n      cache,\n      cacheStream,\n      clip;\n\n  return clip = {\n    stream: function(stream) {\n      return cache && cacheStream === stream ? cache : cache = clipExtent(x0, y0, x1, y1)(cacheStream = stream);\n    },\n    extent: function(_) {\n      return arguments.length ? (x0 = +_[0][0], y0 = +_[0][1], x1 = +_[1][0], y1 = +_[1][1], cache = cacheStream = null, clip) : [[x0, y0], [x1, y1]];\n    }\n  };\n}\n\nvar lengthSum = adder();\nvar lambda0$2;\nvar sinPhi0$1;\nvar cosPhi0$1;\nvar lengthStream = {\n  sphere: noop,\n  point: noop,\n  lineStart: lengthLineStart,\n  lineEnd: noop,\n  polygonStart: noop,\n  polygonEnd: noop\n};\n\nfunction lengthLineStart() {\n  lengthStream.point = lengthPointFirst;\n  lengthStream.lineEnd = lengthLineEnd;\n}\n\nfunction lengthLineEnd() {\n  lengthStream.point = lengthStream.lineEnd = noop;\n}\n\nfunction lengthPointFirst(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  lambda0$2 = lambda, sinPhi0$1 = sin(phi), cosPhi0$1 = cos(phi);\n  lengthStream.point = lengthPoint;\n}\n\nfunction lengthPoint(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  var sinPhi = sin(phi),\n      cosPhi = cos(phi),\n      delta = abs(lambda - lambda0$2),\n      cosDelta = cos(delta),\n      sinDelta = sin(delta),\n      x = cosPhi * sinDelta,\n      y = cosPhi0$1 * sinPhi - sinPhi0$1 * cosPhi * cosDelta,\n      z = sinPhi0$1 * sinPhi + cosPhi0$1 * cosPhi * cosDelta;\n  lengthSum.add(atan2(sqrt(x * x + y * y), z));\n  lambda0$2 = lambda, sinPhi0$1 = sinPhi, cosPhi0$1 = cosPhi;\n}\n\nfunction length(object) {\n  lengthSum.reset();\n  geoStream(object, lengthStream);\n  return +lengthSum;\n}\n\nvar coordinates = [null, null];\nvar object = {type: \"LineString\", coordinates: coordinates};\nfunction distance(a, b) {\n  coordinates[0] = a;\n  coordinates[1] = b;\n  return length(object);\n}\n\nfunction graticuleX(y0, y1, dy) {\n  var y = d3Array.range(y0, y1 - epsilon, dy).concat(y1);\n  return function(x) { return y.map(function(y) { return [x, y]; }); };\n}\n\nfunction graticuleY(x0, x1, dx) {\n  var x = d3Array.range(x0, x1 - epsilon, dx).concat(x1);\n  return function(y) { return x.map(function(x) { return [x, y]; }); };\n}\n\nfunction graticule() {\n  var x1, x0, X1, X0,\n      y1, y0, Y1, Y0,\n      dx = 10, dy = dx, DX = 90, DY = 360,\n      x, y, X, Y,\n      precision = 2.5;\n\n  function graticule() {\n    return {type: \"MultiLineString\", coordinates: lines()};\n  }\n\n  function lines() {\n    return d3Array.range(ceil(X0 / DX) * DX, X1, DX).map(X)\n        .concat(d3Array.range(ceil(Y0 / DY) * DY, Y1, DY).map(Y))\n        .concat(d3Array.range(ceil(x0 / dx) * dx, x1, dx).filter(function(x) { return abs(x % DX) > epsilon; }).map(x))\n        .concat(d3Array.range(ceil(y0 / dy) * dy, y1, dy).filter(function(y) { return abs(y % DY) > epsilon; }).map(y));\n  }\n\n  graticule.lines = function() {\n    return lines().map(function(coordinates) { return {type: \"LineString\", coordinates: coordinates}; });\n  };\n\n  graticule.outline = function() {\n    return {\n      type: \"Polygon\",\n      coordinates: [\n        X(X0).concat(\n        Y(Y1).slice(1),\n        X(X1).reverse().slice(1),\n        Y(Y0).reverse().slice(1))\n      ]\n    };\n  };\n\n  graticule.extent = function(_) {\n    if (!arguments.length) return graticule.extentMinor();\n    return graticule.extentMajor(_).extentMinor(_);\n  };\n\n  graticule.extentMajor = function(_) {\n    if (!arguments.length) return [[X0, Y0], [X1, Y1]];\n    X0 = +_[0][0], X1 = +_[1][0];\n    Y0 = +_[0][1], Y1 = +_[1][1];\n    if (X0 > X1) _ = X0, X0 = X1, X1 = _;\n    if (Y0 > Y1) _ = Y0, Y0 = Y1, Y1 = _;\n    return graticule.precision(precision);\n  };\n\n  graticule.extentMinor = function(_) {\n    if (!arguments.length) return [[x0, y0], [x1, y1]];\n    x0 = +_[0][0], x1 = +_[1][0];\n    y0 = +_[0][1], y1 = +_[1][1];\n    if (x0 > x1) _ = x0, x0 = x1, x1 = _;\n    if (y0 > y1) _ = y0, y0 = y1, y1 = _;\n    return graticule.precision(precision);\n  };\n\n  graticule.step = function(_) {\n    if (!arguments.length) return graticule.stepMinor();\n    return graticule.stepMajor(_).stepMinor(_);\n  };\n\n  graticule.stepMajor = function(_) {\n    if (!arguments.length) return [DX, DY];\n    DX = +_[0], DY = +_[1];\n    return graticule;\n  };\n\n  graticule.stepMinor = function(_) {\n    if (!arguments.length) return [dx, dy];\n    dx = +_[0], dy = +_[1];\n    return graticule;\n  };\n\n  graticule.precision = function(_) {\n    if (!arguments.length) return precision;\n    precision = +_;\n    x = graticuleX(y0, y1, 90);\n    y = graticuleY(x0, x1, precision);\n    X = graticuleX(Y0, Y1, 90);\n    Y = graticuleY(X0, X1, precision);\n    return graticule;\n  };\n\n  return graticule\n      .extentMajor([[-180, -90 + epsilon], [180, 90 - epsilon]])\n      .extentMinor([[-180, -80 - epsilon], [180, 80 + epsilon]]);\n}\n\nfunction interpolate(a, b) {\n  var x0 = a[0] * radians,\n      y0 = a[1] * radians,\n      x1 = b[0] * radians,\n      y1 = b[1] * radians,\n      cy0 = cos(y0),\n      sy0 = sin(y0),\n      cy1 = cos(y1),\n      sy1 = sin(y1),\n      kx0 = cy0 * cos(x0),\n      ky0 = cy0 * sin(x0),\n      kx1 = cy1 * cos(x1),\n      ky1 = cy1 * sin(x1),\n      d = 2 * asin(sqrt(haversin(y1 - y0) + cy0 * cy1 * haversin(x1 - x0))),\n      k = sin(d);\n\n  var interpolate = d ? function(t) {\n    var B = sin(t *= d) / k,\n        A = sin(d - t) / k,\n        x = A * kx0 + B * kx1,\n        y = A * ky0 + B * ky1,\n        z = A * sy0 + B * sy1;\n    return [\n      atan2(y, x) * degrees,\n      atan2(z, sqrt(x * x + y * y)) * degrees\n    ];\n  } : function() {\n    return [x0 * degrees, y0 * degrees];\n  };\n\n  interpolate.distance = d;\n\n  return interpolate;\n}\n\nfunction identity(x) {\n  return x;\n}\n\nvar areaSum$1 = adder();\nvar areaRingSum$1 = adder();\nvar x00;\nvar y00;\nvar x0$1;\nvar y0$1;\nvar areaStream$1 = {\n  point: noop,\n  lineStart: noop,\n  lineEnd: noop,\n  polygonStart: function() {\n    areaStream$1.lineStart = areaRingStart$1;\n    areaStream$1.lineEnd = areaRingEnd$1;\n  },\n  polygonEnd: function() {\n    areaStream$1.lineStart = areaStream$1.lineEnd = areaStream$1.point = noop;\n    areaSum$1.add(abs(areaRingSum$1));\n    areaRingSum$1.reset();\n  },\n  result: function() {\n    var area = areaSum$1 / 2;\n    areaSum$1.reset();\n    return area;\n  }\n};\n\nfunction areaRingStart$1() {\n  areaStream$1.point = areaPointFirst$1;\n}\n\nfunction areaPointFirst$1(x, y) {\n  areaStream$1.point = areaPoint$1;\n  x00 = x0$1 = x, y00 = y0$1 = y;\n}\n\nfunction areaPoint$1(x, y) {\n  areaRingSum$1.add(y0$1 * x - x0$1 * y);\n  x0$1 = x, y0$1 = y;\n}\n\nfunction areaRingEnd$1() {\n  areaPoint$1(x00, y00);\n}\n\nvar x0$2 = Infinity;\nvar y0$2 = x0$2;\nvar x1 = -x0$2;\nvar y1 = x1;\nvar boundsStream$1 = {\n  point: boundsPoint$1,\n  lineStart: noop,\n  lineEnd: noop,\n  polygonStart: noop,\n  polygonEnd: noop,\n  result: function() {\n    var bounds = [[x0$2, y0$2], [x1, y1]];\n    x1 = y1 = -(y0$2 = x0$2 = Infinity);\n    return bounds;\n  }\n};\n\nfunction boundsPoint$1(x, y) {\n  if (x < x0$2) x0$2 = x;\n  if (x > x1) x1 = x;\n  if (y < y0$2) y0$2 = y;\n  if (y > y1) y1 = y;\n}\n\nvar X0$1 = 0;\nvar Y0$1 = 0;\nvar Z0$1 = 0;\nvar X1$1 = 0;\nvar Y1$1 = 0;\nvar Z1$1 = 0;\nvar X2$1 = 0;\nvar Y2$1 = 0;\nvar Z2$1 = 0;\nvar x00$1;\nvar y00$1;\nvar x0$3;\nvar y0$3;\nvar centroidStream$1 = {\n  point: centroidPoint$1,\n  lineStart: centroidLineStart$1,\n  lineEnd: centroidLineEnd$1,\n  polygonStart: function() {\n    centroidStream$1.lineStart = centroidRingStart$1;\n    centroidStream$1.lineEnd = centroidRingEnd$1;\n  },\n  polygonEnd: function() {\n    centroidStream$1.point = centroidPoint$1;\n    centroidStream$1.lineStart = centroidLineStart$1;\n    centroidStream$1.lineEnd = centroidLineEnd$1;\n  },\n  result: function() {\n    var centroid = Z2$1 ? [X2$1 / Z2$1, Y2$1 / Z2$1]\n        : Z1$1 ? [X1$1 / Z1$1, Y1$1 / Z1$1]\n        : Z0$1 ? [X0$1 / Z0$1, Y0$1 / Z0$1]\n        : [NaN, NaN];\n    X0$1 = Y0$1 = Z0$1 =\n    X1$1 = Y1$1 = Z1$1 =\n    X2$1 = Y2$1 = Z2$1 = 0;\n    return centroid;\n  }\n};\n\nfunction centroidPoint$1(x, y) {\n  X0$1 += x;\n  Y0$1 += y;\n  ++Z0$1;\n}\n\nfunction centroidLineStart$1() {\n  centroidStream$1.point = centroidPointFirstLine;\n}\n\nfunction centroidPointFirstLine(x, y) {\n  centroidStream$1.point = centroidPointLine;\n  centroidPoint$1(x0$3 = x, y0$3 = y);\n}\n\nfunction centroidPointLine(x, y) {\n  var dx = x - x0$3, dy = y - y0$3, z = sqrt(dx * dx + dy * dy);\n  X1$1 += z * (x0$3 + x) / 2;\n  Y1$1 += z * (y0$3 + y) / 2;\n  Z1$1 += z;\n  centroidPoint$1(x0$3 = x, y0$3 = y);\n}\n\nfunction centroidLineEnd$1() {\n  centroidStream$1.point = centroidPoint$1;\n}\n\nfunction centroidRingStart$1() {\n  centroidStream$1.point = centroidPointFirstRing;\n}\n\nfunction centroidRingEnd$1() {\n  centroidPointRing(x00$1, y00$1);\n}\n\nfunction centroidPointFirstRing(x, y) {\n  centroidStream$1.point = centroidPointRing;\n  centroidPoint$1(x00$1 = x0$3 = x, y00$1 = y0$3 = y);\n}\n\nfunction centroidPointRing(x, y) {\n  var dx = x - x0$3,\n      dy = y - y0$3,\n      z = sqrt(dx * dx + dy * dy);\n\n  X1$1 += z * (x0$3 + x) / 2;\n  Y1$1 += z * (y0$3 + y) / 2;\n  Z1$1 += z;\n\n  z = y0$3 * x - x0$3 * y;\n  X2$1 += z * (x0$3 + x);\n  Y2$1 += z * (y0$3 + y);\n  Z2$1 += z * 3;\n  centroidPoint$1(x0$3 = x, y0$3 = y);\n}\n\nfunction PathContext(context) {\n  this._context = context;\n}\n\nPathContext.prototype = {\n  _radius: 4.5,\n  pointRadius: function(_) {\n    return this._radius = _, this;\n  },\n  polygonStart: function() {\n    this._line = 0;\n  },\n  polygonEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line === 0) this._context.closePath();\n    this._point = NaN;\n  },\n  point: function(x, y) {\n    switch (this._point) {\n      case 0: {\n        this._context.moveTo(x, y);\n        this._point = 1;\n        break;\n      }\n      case 1: {\n        this._context.lineTo(x, y);\n        break;\n      }\n      default: {\n        this._context.moveTo(x + this._radius, y);\n        this._context.arc(x, y, this._radius, 0, tau);\n        break;\n      }\n    }\n  },\n  result: noop\n};\n\nfunction PathString() {\n  this._string = [];\n}\n\nPathString.prototype = {\n  _circle: circle$1(4.5),\n  pointRadius: function(_) {\n    return this._circle = circle$1(_), this;\n  },\n  polygonStart: function() {\n    this._line = 0;\n  },\n  polygonEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line === 0) this._string.push(\"Z\");\n    this._point = NaN;\n  },\n  point: function(x, y) {\n    switch (this._point) {\n      case 0: {\n        this._string.push(\"M\", x, \",\", y);\n        this._point = 1;\n        break;\n      }\n      case 1: {\n        this._string.push(\"L\", x, \",\", y);\n        break;\n      }\n      default: {\n        this._string.push(\"M\", x, \",\", y, this._circle);\n        break;\n      }\n    }\n  },\n  result: function() {\n    if (this._string.length) {\n      var result = this._string.join(\"\");\n      this._string = [];\n      return result;\n    }\n  }\n};\n\nfunction circle$1(radius) {\n  return \"m0,\" + radius\n      + \"a\" + radius + \",\" + radius + \" 0 1,1 0,\" + -2 * radius\n      + \"a\" + radius + \",\" + radius + \" 0 1,1 0,\" + 2 * radius\n      + \"z\";\n}\n\nfunction index() {\n  var pointRadius = 4.5,\n      projection,\n      projectionStream,\n      context,\n      contextStream;\n\n  function path(object) {\n    if (object) {\n      if (typeof pointRadius === \"function\") contextStream.pointRadius(+pointRadius.apply(this, arguments));\n      geoStream(object, projectionStream(contextStream));\n    }\n    return contextStream.result();\n  }\n\n  path.area = function(object) {\n    geoStream(object, projectionStream(areaStream$1));\n    return areaStream$1.result();\n  };\n\n  path.bounds = function(object) {\n    geoStream(object, projectionStream(boundsStream$1));\n    return boundsStream$1.result();\n  };\n\n  path.centroid = function(object) {\n    geoStream(object, projectionStream(centroidStream$1));\n    return centroidStream$1.result();\n  };\n\n  path.projection = function(_) {\n    return arguments.length ? (projectionStream = (projection = _) == null ? identity : _.stream, path) : projection;\n  };\n\n  path.context = function(_) {\n    if (!arguments.length) return context;\n    contextStream = (context = _) == null ? new PathString : new PathContext(_);\n    if (typeof pointRadius !== \"function\") contextStream.pointRadius(pointRadius);\n    return path;\n  };\n\n  path.pointRadius = function(_) {\n    if (!arguments.length) return pointRadius;\n    pointRadius = typeof _ === \"function\" ? _ : (contextStream.pointRadius(+_), +_);\n    return path;\n  };\n\n  return path.projection(null).context(null);\n}\n\nvar sum = adder();\n\nfunction polygonContains(polygon, point) {\n  var lambda = point[0],\n      phi = point[1],\n      normal = [sin(lambda), -cos(lambda), 0],\n      angle = 0,\n      winding = 0;\n\n  sum.reset();\n\n  for (var i = 0, n = polygon.length; i < n; ++i) {\n    if (!(m = (ring = polygon[i]).length)) continue;\n    var ring,\n        m,\n        point0 = ring[m - 1],\n        lambda0 = point0[0],\n        phi0 = point0[1] / 2 + quarterPi,\n        sinPhi0 = sin(phi0),\n        cosPhi0 = cos(phi0);\n\n    for (var j = 0; j < m; ++j, lambda0 = lambda1, sinPhi0 = sinPhi1, cosPhi0 = cosPhi1, point0 = point1) {\n      var point1 = ring[j],\n          lambda1 = point1[0],\n          phi1 = point1[1] / 2 + quarterPi,\n          sinPhi1 = sin(phi1),\n          cosPhi1 = cos(phi1),\n          delta = lambda1 - lambda0,\n          sign = delta >= 0 ? 1 : -1,\n          absDelta = sign * delta,\n          antimeridian = absDelta > pi,\n          k = sinPhi0 * sinPhi1;\n\n      sum.add(atan2(k * sign * sin(absDelta), cosPhi0 * cosPhi1 + k * cos(absDelta)));\n      angle += antimeridian ? delta + sign * tau : delta;\n\n      // Are the longitudes either side of the point’s meridian (lambda),\n      // and are the latitudes smaller than the parallel (phi)?\n      if (antimeridian ^ lambda0 >= lambda ^ lambda1 >= lambda) {\n        var arc = cartesianCross(cartesian(point0), cartesian(point1));\n        cartesianNormalizeInPlace(arc);\n        var intersection = cartesianCross(normal, arc);\n        cartesianNormalizeInPlace(intersection);\n        var phiArc = (antimeridian ^ delta >= 0 ? -1 : 1) * asin(intersection[2]);\n        if (phi > phiArc || phi === phiArc && (arc[0] || arc[1])) {\n          winding += antimeridian ^ delta >= 0 ? 1 : -1;\n        }\n      }\n    }\n  }\n\n  // First, determine whether the South pole is inside or outside:\n  //\n  // It is inside if:\n  // * the polygon winds around it in a clockwise direction.\n  // * the polygon does not (cumulatively) wind around it, but has a negative\n  //   (counter-clockwise) area.\n  //\n  // Second, count the (signed) number of times a segment crosses a lambda\n  // from the point to the South pole.  If it is zero, then the point is the\n  // same side as the South pole.\n\n  return (angle < -epsilon || angle < epsilon && sum < -epsilon) ^ (winding & 1);\n}\n\nfunction clip(pointVisible, clipLine, interpolate, start) {\n  return function(rotate, sink) {\n    var line = clipLine(sink),\n        rotatedStart = rotate.invert(start[0], start[1]),\n        ringBuffer = clipBuffer(),\n        ringSink = clipLine(ringBuffer),\n        polygonStarted = false,\n        polygon,\n        segments,\n        ring;\n\n    var clip = {\n      point: point,\n      lineStart: lineStart,\n      lineEnd: lineEnd,\n      polygonStart: function() {\n        clip.point = pointRing;\n        clip.lineStart = ringStart;\n        clip.lineEnd = ringEnd;\n        segments = [];\n        polygon = [];\n      },\n      polygonEnd: function() {\n        clip.point = point;\n        clip.lineStart = lineStart;\n        clip.lineEnd = lineEnd;\n        segments = d3Array.merge(segments);\n        var startInside = polygonContains(polygon, rotatedStart);\n        if (segments.length) {\n          if (!polygonStarted) sink.polygonStart(), polygonStarted = true;\n          clipPolygon(segments, compareIntersection, startInside, interpolate, sink);\n        } else if (startInside) {\n          if (!polygonStarted) sink.polygonStart(), polygonStarted = true;\n          sink.lineStart();\n          interpolate(null, null, 1, sink);\n          sink.lineEnd();\n        }\n        if (polygonStarted) sink.polygonEnd(), polygonStarted = false;\n        segments = polygon = null;\n      },\n      sphere: function() {\n        sink.polygonStart();\n        sink.lineStart();\n        interpolate(null, null, 1, sink);\n        sink.lineEnd();\n        sink.polygonEnd();\n      }\n    };\n\n    function point(lambda, phi) {\n      var point = rotate(lambda, phi);\n      if (pointVisible(lambda = point[0], phi = point[1])) sink.point(lambda, phi);\n    }\n\n    function pointLine(lambda, phi) {\n      var point = rotate(lambda, phi);\n      line.point(point[0], point[1]);\n    }\n\n    function lineStart() {\n      clip.point = pointLine;\n      line.lineStart();\n    }\n\n    function lineEnd() {\n      clip.point = point;\n      line.lineEnd();\n    }\n\n    function pointRing(lambda, phi) {\n      ring.push([lambda, phi]);\n      var point = rotate(lambda, phi);\n      ringSink.point(point[0], point[1]);\n    }\n\n    function ringStart() {\n      ringSink.lineStart();\n      ring = [];\n    }\n\n    function ringEnd() {\n      pointRing(ring[0][0], ring[0][1]);\n      ringSink.lineEnd();\n\n      var clean = ringSink.clean(),\n          ringSegments = ringBuffer.result(),\n          i, n = ringSegments.length, m,\n          segment,\n          point;\n\n      ring.pop();\n      polygon.push(ring);\n      ring = null;\n\n      if (!n) return;\n\n      // No intersections.\n      if (clean & 1) {\n        segment = ringSegments[0];\n        if ((m = segment.length - 1) > 0) {\n          if (!polygonStarted) sink.polygonStart(), polygonStarted = true;\n          sink.lineStart();\n          for (i = 0; i < m; ++i) sink.point((point = segment[i])[0], point[1]);\n          sink.lineEnd();\n        }\n        return;\n      }\n\n      // Rejoin connected segments.\n      // TODO reuse ringBuffer.rejoin()?\n      if (n > 1 && clean & 2) ringSegments.push(ringSegments.pop().concat(ringSegments.shift()));\n\n      segments.push(ringSegments.filter(validSegment));\n    }\n\n    return clip;\n  };\n}\n\nfunction validSegment(segment) {\n  return segment.length > 1;\n}\n\n// Intersections are sorted along the clip edge. For both antimeridian cutting\n// and circle clipping, the same comparison is used.\nfunction compareIntersection(a, b) {\n  return ((a = a.x)[0] < 0 ? a[1] - halfPi - epsilon : halfPi - a[1])\n       - ((b = b.x)[0] < 0 ? b[1] - halfPi - epsilon : halfPi - b[1]);\n}\n\nvar clipAntimeridian = clip(\n  function() { return true; },\n  clipAntimeridianLine,\n  clipAntimeridianInterpolate,\n  [-pi, -halfPi]\n);\n\n// Takes a line and cuts into visible segments. Return values: 0 - there were\n// intersections or the line was empty; 1 - no intersections; 2 - there were\n// intersections, and the first and last segments should be rejoined.\nfunction clipAntimeridianLine(stream) {\n  var lambda0 = NaN,\n      phi0 = NaN,\n      sign0 = NaN,\n      clean; // no intersections\n\n  return {\n    lineStart: function() {\n      stream.lineStart();\n      clean = 1;\n    },\n    point: function(lambda1, phi1) {\n      var sign1 = lambda1 > 0 ? pi : -pi,\n          delta = abs(lambda1 - lambda0);\n      if (abs(delta - pi) < epsilon) { // line crosses a pole\n        stream.point(lambda0, phi0 = (phi0 + phi1) / 2 > 0 ? halfPi : -halfPi);\n        stream.point(sign0, phi0);\n        stream.lineEnd();\n        stream.lineStart();\n        stream.point(sign1, phi0);\n        stream.point(lambda1, phi0);\n        clean = 0;\n      } else if (sign0 !== sign1 && delta >= pi) { // line crosses antimeridian\n        if (abs(lambda0 - sign0) < epsilon) lambda0 -= sign0 * epsilon; // handle degeneracies\n        if (abs(lambda1 - sign1) < epsilon) lambda1 -= sign1 * epsilon;\n        phi0 = clipAntimeridianIntersect(lambda0, phi0, lambda1, phi1);\n        stream.point(sign0, phi0);\n        stream.lineEnd();\n        stream.lineStart();\n        stream.point(sign1, phi0);\n        clean = 0;\n      }\n      stream.point(lambda0 = lambda1, phi0 = phi1);\n      sign0 = sign1;\n    },\n    lineEnd: function() {\n      stream.lineEnd();\n      lambda0 = phi0 = NaN;\n    },\n    clean: function() {\n      return 2 - clean; // if intersections, rejoin first and last segments\n    }\n  };\n}\n\nfunction clipAntimeridianIntersect(lambda0, phi0, lambda1, phi1) {\n  var cosPhi0,\n      cosPhi1,\n      sinLambda0Lambda1 = sin(lambda0 - lambda1);\n  return abs(sinLambda0Lambda1) > epsilon\n      ? atan((sin(phi0) * (cosPhi1 = cos(phi1)) * sin(lambda1)\n          - sin(phi1) * (cosPhi0 = cos(phi0)) * sin(lambda0))\n          / (cosPhi0 * cosPhi1 * sinLambda0Lambda1))\n      : (phi0 + phi1) / 2;\n}\n\nfunction clipAntimeridianInterpolate(from, to, direction, stream) {\n  var phi;\n  if (from == null) {\n    phi = direction * halfPi;\n    stream.point(-pi, phi);\n    stream.point(0, phi);\n    stream.point(pi, phi);\n    stream.point(pi, 0);\n    stream.point(pi, -phi);\n    stream.point(0, -phi);\n    stream.point(-pi, -phi);\n    stream.point(-pi, 0);\n    stream.point(-pi, phi);\n  } else if (abs(from[0] - to[0]) > epsilon) {\n    var lambda = from[0] < to[0] ? pi : -pi;\n    phi = direction * lambda / 2;\n    stream.point(-lambda, phi);\n    stream.point(0, phi);\n    stream.point(lambda, phi);\n  } else {\n    stream.point(to[0], to[1]);\n  }\n}\n\nfunction clipCircle(radius, delta) {\n  var cr = cos(radius),\n      smallRadius = cr > 0,\n      notHemisphere = abs(cr) > epsilon; // TODO optimise for this common case\n\n  function interpolate(from, to, direction, stream) {\n    circleStream(stream, radius, delta, direction, from, to);\n  }\n\n  function visible(lambda, phi) {\n    return cos(lambda) * cos(phi) > cr;\n  }\n\n  // Takes a line and cuts into visible segments. Return values used for polygon\n  // clipping: 0 - there were intersections or the line was empty; 1 - no\n  // intersections 2 - there were intersections, and the first and last segments\n  // should be rejoined.\n  function clipLine(stream) {\n    var point0, // previous point\n        c0, // code for previous point\n        v0, // visibility of previous point\n        v00, // visibility of first point\n        clean; // no intersections\n    return {\n      lineStart: function() {\n        v00 = v0 = false;\n        clean = 1;\n      },\n      point: function(lambda, phi) {\n        var point1 = [lambda, phi],\n            point2,\n            v = visible(lambda, phi),\n            c = smallRadius\n              ? v ? 0 : code(lambda, phi)\n              : v ? code(lambda + (lambda < 0 ? pi : -pi), phi) : 0;\n        if (!point0 && (v00 = v0 = v)) stream.lineStart();\n        // Handle degeneracies.\n        // TODO ignore if not clipping polygons.\n        if (v !== v0) {\n          point2 = intersect(point0, point1);\n          if (pointEqual(point0, point2) || pointEqual(point1, point2)) {\n            point1[0] += epsilon;\n            point1[1] += epsilon;\n            v = visible(point1[0], point1[1]);\n          }\n        }\n        if (v !== v0) {\n          clean = 0;\n          if (v) {\n            // outside going in\n            stream.lineStart();\n            point2 = intersect(point1, point0);\n            stream.point(point2[0], point2[1]);\n          } else {\n            // inside going out\n            point2 = intersect(point0, point1);\n            stream.point(point2[0], point2[1]);\n            stream.lineEnd();\n          }\n          point0 = point2;\n        } else if (notHemisphere && point0 && smallRadius ^ v) {\n          var t;\n          // If the codes for two points are different, or are both zero,\n          // and there this segment intersects with the small circle.\n          if (!(c & c0) && (t = intersect(point1, point0, true))) {\n            clean = 0;\n            if (smallRadius) {\n              stream.lineStart();\n              stream.point(t[0][0], t[0][1]);\n              stream.point(t[1][0], t[1][1]);\n              stream.lineEnd();\n            } else {\n              stream.point(t[1][0], t[1][1]);\n              stream.lineEnd();\n              stream.lineStart();\n              stream.point(t[0][0], t[0][1]);\n            }\n          }\n        }\n        if (v && (!point0 || !pointEqual(point0, point1))) {\n          stream.point(point1[0], point1[1]);\n        }\n        point0 = point1, v0 = v, c0 = c;\n      },\n      lineEnd: function() {\n        if (v0) stream.lineEnd();\n        point0 = null;\n      },\n      // Rejoin first and last segments if there were intersections and the first\n      // and last points were visible.\n      clean: function() {\n        return clean | ((v00 && v0) << 1);\n      }\n    };\n  }\n\n  // Intersects the great circle between a and b with the clip circle.\n  function intersect(a, b, two) {\n    var pa = cartesian(a),\n        pb = cartesian(b);\n\n    // We have two planes, n1.p = d1 and n2.p = d2.\n    // Find intersection line p(t) = c1 n1 + c2 n2 + t (n1 ⨯ n2).\n    var n1 = [1, 0, 0], // normal\n        n2 = cartesianCross(pa, pb),\n        n2n2 = cartesianDot(n2, n2),\n        n1n2 = n2[0], // cartesianDot(n1, n2),\n        determinant = n2n2 - n1n2 * n1n2;\n\n    // Two polar points.\n    if (!determinant) return !two && a;\n\n    var c1 =  cr * n2n2 / determinant,\n        c2 = -cr * n1n2 / determinant,\n        n1xn2 = cartesianCross(n1, n2),\n        A = cartesianScale(n1, c1),\n        B = cartesianScale(n2, c2);\n    cartesianAddInPlace(A, B);\n\n    // Solve |p(t)|^2 = 1.\n    var u = n1xn2,\n        w = cartesianDot(A, u),\n        uu = cartesianDot(u, u),\n        t2 = w * w - uu * (cartesianDot(A, A) - 1);\n\n    if (t2 < 0) return;\n\n    var t = sqrt(t2),\n        q = cartesianScale(u, (-w - t) / uu);\n    cartesianAddInPlace(q, A);\n    q = spherical(q);\n\n    if (!two) return q;\n\n    // Two intersection points.\n    var lambda0 = a[0],\n        lambda1 = b[0],\n        phi0 = a[1],\n        phi1 = b[1],\n        z;\n\n    if (lambda1 < lambda0) z = lambda0, lambda0 = lambda1, lambda1 = z;\n\n    var delta = lambda1 - lambda0,\n        polar = abs(delta - pi) < epsilon,\n        meridian = polar || delta < epsilon;\n\n    if (!polar && phi1 < phi0) z = phi0, phi0 = phi1, phi1 = z;\n\n    // Check that the first point is between a and b.\n    if (meridian\n        ? polar\n          ? phi0 + phi1 > 0 ^ q[1] < (abs(q[0] - lambda0) < epsilon ? phi0 : phi1)\n          : phi0 <= q[1] && q[1] <= phi1\n        : delta > pi ^ (lambda0 <= q[0] && q[0] <= lambda1)) {\n      var q1 = cartesianScale(u, (-w + t) / uu);\n      cartesianAddInPlace(q1, A);\n      return [q, spherical(q1)];\n    }\n  }\n\n  // Generates a 4-bit vector representing the location of a point relative to\n  // the small circle's bounding box.\n  function code(lambda, phi) {\n    var r = smallRadius ? radius : pi - radius,\n        code = 0;\n    if (lambda < -r) code |= 1; // left\n    else if (lambda > r) code |= 2; // right\n    if (phi < -r) code |= 4; // below\n    else if (phi > r) code |= 8; // above\n    return code;\n  }\n\n  return clip(visible, clipLine, interpolate, smallRadius ? [0, -radius] : [-pi, radius - pi]);\n}\n\nfunction transform(prototype) {\n  return {\n    stream: transform$1(prototype)\n  };\n}\n\nfunction transform$1(prototype) {\n  function T() {}\n  var p = T.prototype = Object.create(Transform.prototype);\n  for (var k in prototype) p[k] = prototype[k];\n  return function(stream) {\n    var t = new T;\n    t.stream = stream;\n    return t;\n  };\n}\n\nfunction Transform() {}\n\nTransform.prototype = {\n  point: function(x, y) { this.stream.point(x, y); },\n  sphere: function() { this.stream.sphere(); },\n  lineStart: function() { this.stream.lineStart(); },\n  lineEnd: function() { this.stream.lineEnd(); },\n  polygonStart: function() { this.stream.polygonStart(); },\n  polygonEnd: function() { this.stream.polygonEnd(); }\n};\n\nfunction fit(project, extent, object) {\n  var w = extent[1][0] - extent[0][0],\n      h = extent[1][1] - extent[0][1],\n      clip = project.clipExtent && project.clipExtent();\n\n  project\n      .scale(150)\n      .translate([0, 0]);\n\n  if (clip != null) project.clipExtent(null);\n\n  geoStream(object, project.stream(boundsStream$1));\n\n  var b = boundsStream$1.result(),\n      k = Math.min(w / (b[1][0] - b[0][0]), h / (b[1][1] - b[0][1])),\n      x = +extent[0][0] + (w - k * (b[1][0] + b[0][0])) / 2,\n      y = +extent[0][1] + (h - k * (b[1][1] + b[0][1])) / 2;\n\n  if (clip != null) project.clipExtent(clip);\n\n  return project\n      .scale(k * 150)\n      .translate([x, y]);\n}\n\nfunction fitSize(project) {\n  return function(size, object) {\n    return fit(project, [[0, 0], size], object);\n  };\n}\n\nfunction fitExtent(project) {\n  return function(extent, object) {\n    return fit(project, extent, object);\n  };\n}\n\nvar maxDepth = 16;\nvar cosMinDistance = cos(30 * radians);\n// cos(minimum angular distance)\n\nfunction resample(project, delta2) {\n  return +delta2 ? resample$1(project, delta2) : resampleNone(project);\n}\n\nfunction resampleNone(project) {\n  return transform$1({\n    point: function(x, y) {\n      x = project(x, y);\n      this.stream.point(x[0], x[1]);\n    }\n  });\n}\n\nfunction resample$1(project, delta2) {\n\n  function resampleLineTo(x0, y0, lambda0, a0, b0, c0, x1, y1, lambda1, a1, b1, c1, depth, stream) {\n    var dx = x1 - x0,\n        dy = y1 - y0,\n        d2 = dx * dx + dy * dy;\n    if (d2 > 4 * delta2 && depth--) {\n      var a = a0 + a1,\n          b = b0 + b1,\n          c = c0 + c1,\n          m = sqrt(a * a + b * b + c * c),\n          phi2 = asin(c /= m),\n          lambda2 = abs(abs(c) - 1) < epsilon || abs(lambda0 - lambda1) < epsilon ? (lambda0 + lambda1) / 2 : atan2(b, a),\n          p = project(lambda2, phi2),\n          x2 = p[0],\n          y2 = p[1],\n          dx2 = x2 - x0,\n          dy2 = y2 - y0,\n          dz = dy * dx2 - dx * dy2;\n      if (dz * dz / d2 > delta2 // perpendicular projected distance\n          || abs((dx * dx2 + dy * dy2) / d2 - 0.5) > 0.3 // midpoint close to an end\n          || a0 * a1 + b0 * b1 + c0 * c1 < cosMinDistance) { // angular distance\n        resampleLineTo(x0, y0, lambda0, a0, b0, c0, x2, y2, lambda2, a /= m, b /= m, c, depth, stream);\n        stream.point(x2, y2);\n        resampleLineTo(x2, y2, lambda2, a, b, c, x1, y1, lambda1, a1, b1, c1, depth, stream);\n      }\n    }\n  }\n  return function(stream) {\n    var lambda00, x00, y00, a00, b00, c00, // first point\n        lambda0, x0, y0, a0, b0, c0; // previous point\n\n    var resampleStream = {\n      point: point,\n      lineStart: lineStart,\n      lineEnd: lineEnd,\n      polygonStart: function() { stream.polygonStart(); resampleStream.lineStart = ringStart; },\n      polygonEnd: function() { stream.polygonEnd(); resampleStream.lineStart = lineStart; }\n    };\n\n    function point(x, y) {\n      x = project(x, y);\n      stream.point(x[0], x[1]);\n    }\n\n    function lineStart() {\n      x0 = NaN;\n      resampleStream.point = linePoint;\n      stream.lineStart();\n    }\n\n    function linePoint(lambda, phi) {\n      var c = cartesian([lambda, phi]), p = project(lambda, phi);\n      resampleLineTo(x0, y0, lambda0, a0, b0, c0, x0 = p[0], y0 = p[1], lambda0 = lambda, a0 = c[0], b0 = c[1], c0 = c[2], maxDepth, stream);\n      stream.point(x0, y0);\n    }\n\n    function lineEnd() {\n      resampleStream.point = point;\n      stream.lineEnd();\n    }\n\n    function ringStart() {\n      lineStart();\n      resampleStream.point = ringPoint;\n      resampleStream.lineEnd = ringEnd;\n    }\n\n    function ringPoint(lambda, phi) {\n      linePoint(lambda00 = lambda, phi), x00 = x0, y00 = y0, a00 = a0, b00 = b0, c00 = c0;\n      resampleStream.point = linePoint;\n    }\n\n    function ringEnd() {\n      resampleLineTo(x0, y0, lambda0, a0, b0, c0, x00, y00, lambda00, a00, b00, c00, maxDepth, stream);\n      resampleStream.lineEnd = lineEnd;\n      lineEnd();\n    }\n\n    return resampleStream;\n  };\n}\n\nvar transformRadians = transform$1({\n  point: function(x, y) {\n    this.stream.point(x * radians, y * radians);\n  }\n});\n\nfunction projection(project) {\n  return projectionMutator(function() { return project; })();\n}\n\nfunction projectionMutator(projectAt) {\n  var project,\n      k = 150, // scale\n      x = 480, y = 250, // translate\n      dx, dy, lambda = 0, phi = 0, // center\n      deltaLambda = 0, deltaPhi = 0, deltaGamma = 0, rotate, projectRotate, // rotate\n      theta = null, preclip = clipAntimeridian, // clip angle\n      x0 = null, y0, x1, y1, postclip = identity, // clip extent\n      delta2 = 0.5, projectResample = resample(projectTransform, delta2), // precision\n      cache,\n      cacheStream;\n\n  function projection(point) {\n    point = projectRotate(point[0] * radians, point[1] * radians);\n    return [point[0] * k + dx, dy - point[1] * k];\n  }\n\n  function invert(point) {\n    point = projectRotate.invert((point[0] - dx) / k, (dy - point[1]) / k);\n    return point && [point[0] * degrees, point[1] * degrees];\n  }\n\n  function projectTransform(x, y) {\n    return x = project(x, y), [x[0] * k + dx, dy - x[1] * k];\n  }\n\n  projection.stream = function(stream) {\n    return cache && cacheStream === stream ? cache : cache = transformRadians(preclip(rotate, projectResample(postclip(cacheStream = stream))));\n  };\n\n  projection.clipAngle = function(_) {\n    return arguments.length ? (preclip = +_ ? clipCircle(theta = _ * radians, 6 * radians) : (theta = null, clipAntimeridian), reset()) : theta * degrees;\n  };\n\n  projection.clipExtent = function(_) {\n    return arguments.length ? (postclip = _ == null ? (x0 = y0 = x1 = y1 = null, identity) : clipExtent(x0 = +_[0][0], y0 = +_[0][1], x1 = +_[1][0], y1 = +_[1][1]), reset()) : x0 == null ? null : [[x0, y0], [x1, y1]];\n  };\n\n  projection.scale = function(_) {\n    return arguments.length ? (k = +_, recenter()) : k;\n  };\n\n  projection.translate = function(_) {\n    return arguments.length ? (x = +_[0], y = +_[1], recenter()) : [x, y];\n  };\n\n  projection.center = function(_) {\n    return arguments.length ? (lambda = _[0] % 360 * radians, phi = _[1] % 360 * radians, recenter()) : [lambda * degrees, phi * degrees];\n  };\n\n  projection.rotate = function(_) {\n    return arguments.length ? (deltaLambda = _[0] % 360 * radians, deltaPhi = _[1] % 360 * radians, deltaGamma = _.length > 2 ? _[2] % 360 * radians : 0, recenter()) : [deltaLambda * degrees, deltaPhi * degrees, deltaGamma * degrees];\n  };\n\n  projection.precision = function(_) {\n    return arguments.length ? (projectResample = resample(projectTransform, delta2 = _ * _), reset()) : sqrt(delta2);\n  };\n\n  projection.fitExtent = fitExtent(projection);\n\n  projection.fitSize = fitSize(projection);\n\n  function recenter() {\n    projectRotate = compose(rotate = rotateRadians(deltaLambda, deltaPhi, deltaGamma), project);\n    var center = project(lambda, phi);\n    dx = x - center[0] * k;\n    dy = y + center[1] * k;\n    return reset();\n  }\n\n  function reset() {\n    cache = cacheStream = null;\n    return projection;\n  }\n\n  return function() {\n    project = projectAt.apply(this, arguments);\n    projection.invert = project.invert && invert;\n    return recenter();\n  };\n}\n\nfunction conicProjection(projectAt) {\n  var phi0 = 0,\n      phi1 = pi / 3,\n      m = projectionMutator(projectAt),\n      p = m(phi0, phi1);\n\n  p.parallels = function(_) {\n    return arguments.length ? m(phi0 = _[0] * radians, phi1 = _[1] * radians) : [phi0 * degrees, phi1 * degrees];\n  };\n\n  return p;\n}\n\nfunction conicEqualAreaRaw(y0, y1) {\n  var sy0 = sin(y0),\n      n = (sy0 + sin(y1)) / 2,\n      c = 1 + sy0 * (2 * n - sy0),\n      r0 = sqrt(c) / n;\n\n  function project(x, y) {\n    var r = sqrt(c - 2 * n * sin(y)) / n;\n    return [r * sin(x *= n), r0 - r * cos(x)];\n  }\n\n  project.invert = function(x, y) {\n    var r0y = r0 - y;\n    return [atan2(x, r0y) / n, asin((c - (x * x + r0y * r0y) * n * n) / (2 * n))];\n  };\n\n  return project;\n}\n\nfunction conicEqualArea() {\n  return conicProjection(conicEqualAreaRaw)\n      .scale(155.424)\n      .center([0, 33.6442]);\n}\n\nfunction albers() {\n  return conicEqualArea()\n      .parallels([29.5, 45.5])\n      .scale(1070)\n      .translate([480, 250])\n      .rotate([96, 0])\n      .center([-0.6, 38.7]);\n}\n\n// The projections must have mutually exclusive clip regions on the sphere,\n// as this will avoid emitting interleaving lines and polygons.\nfunction multiplex(streams) {\n  var n = streams.length;\n  return {\n    point: function(x, y) { var i = -1; while (++i < n) streams[i].point(x, y); },\n    sphere: function() { var i = -1; while (++i < n) streams[i].sphere(); },\n    lineStart: function() { var i = -1; while (++i < n) streams[i].lineStart(); },\n    lineEnd: function() { var i = -1; while (++i < n) streams[i].lineEnd(); },\n    polygonStart: function() { var i = -1; while (++i < n) streams[i].polygonStart(); },\n    polygonEnd: function() { var i = -1; while (++i < n) streams[i].polygonEnd(); }\n  };\n}\n\n// A composite projection for the United States, configured by default for\n// 960×500. The projection also works quite well at 960×600 if you change the\n// scale to 1285 and adjust the translate accordingly. The set of standard\n// parallels for each region comes from USGS, which is published here:\n// http://egsc.usgs.gov/isb/pubs/MapProjections/projections.html#albers\nfunction albersUsa() {\n  var cache,\n      cacheStream,\n      lower48 = albers(), lower48Point,\n      alaska = conicEqualArea().rotate([154, 0]).center([-2, 58.5]).parallels([55, 65]), alaskaPoint, // EPSG:3338\n      hawaii = conicEqualArea().rotate([157, 0]).center([-3, 19.9]).parallels([8, 18]), hawaiiPoint, // ESRI:102007\n      point, pointStream = {point: function(x, y) { point = [x, y]; }};\n\n  function albersUsa(coordinates) {\n    var x = coordinates[0], y = coordinates[1];\n    return point = null,\n        (lower48Point.point(x, y), point)\n        || (alaskaPoint.point(x, y), point)\n        || (hawaiiPoint.point(x, y), point);\n  }\n\n  albersUsa.invert = function(coordinates) {\n    var k = lower48.scale(),\n        t = lower48.translate(),\n        x = (coordinates[0] - t[0]) / k,\n        y = (coordinates[1] - t[1]) / k;\n    return (y >= 0.120 && y < 0.234 && x >= -0.425 && x < -0.214 ? alaska\n        : y >= 0.166 && y < 0.234 && x >= -0.214 && x < -0.115 ? hawaii\n        : lower48).invert(coordinates);\n  };\n\n  albersUsa.stream = function(stream) {\n    return cache && cacheStream === stream ? cache : cache = multiplex([lower48.stream(cacheStream = stream), alaska.stream(stream), hawaii.stream(stream)]);\n  };\n\n  albersUsa.precision = function(_) {\n    if (!arguments.length) return lower48.precision();\n    lower48.precision(_), alaska.precision(_), hawaii.precision(_);\n    return albersUsa;\n  };\n\n  albersUsa.scale = function(_) {\n    if (!arguments.length) return lower48.scale();\n    lower48.scale(_), alaska.scale(_ * 0.35), hawaii.scale(_);\n    return albersUsa.translate(lower48.translate());\n  };\n\n  albersUsa.translate = function(_) {\n    if (!arguments.length) return lower48.translate();\n    var k = lower48.scale(), x = +_[0], y = +_[1];\n\n    lower48Point = lower48\n        .translate(_)\n        .clipExtent([[x - 0.455 * k, y - 0.238 * k], [x + 0.455 * k, y + 0.238 * k]])\n        .stream(pointStream);\n\n    alaskaPoint = alaska\n        .translate([x - 0.307 * k, y + 0.201 * k])\n        .clipExtent([[x - 0.425 * k + epsilon, y + 0.120 * k + epsilon], [x - 0.214 * k - epsilon, y + 0.234 * k - epsilon]])\n        .stream(pointStream);\n\n    hawaiiPoint = hawaii\n        .translate([x - 0.205 * k, y + 0.212 * k])\n        .clipExtent([[x - 0.214 * k + epsilon, y + 0.166 * k + epsilon], [x - 0.115 * k - epsilon, y + 0.234 * k - epsilon]])\n        .stream(pointStream);\n\n    return albersUsa;\n  };\n\n  albersUsa.fitExtent = fitExtent(albersUsa);\n\n  albersUsa.fitSize = fitSize(albersUsa);\n\n  return albersUsa.scale(1070);\n}\n\nfunction azimuthalRaw(scale) {\n  return function(x, y) {\n    var cx = cos(x),\n        cy = cos(y),\n        k = scale(cx * cy);\n    return [\n      k * cy * sin(x),\n      k * sin(y)\n    ];\n  }\n}\n\nfunction azimuthalInvert(angle) {\n  return function(x, y) {\n    var z = sqrt(x * x + y * y),\n        c = angle(z),\n        sc = sin(c),\n        cc = cos(c);\n    return [\n      atan2(x * sc, z * cc),\n      asin(z && y * sc / z)\n    ];\n  }\n}\n\nvar azimuthalEqualAreaRaw = azimuthalRaw(function(cxcy) {\n  return sqrt(2 / (1 + cxcy));\n});\n\nazimuthalEqualAreaRaw.invert = azimuthalInvert(function(z) {\n  return 2 * asin(z / 2);\n});\n\nfunction azimuthalEqualArea() {\n  return projection(azimuthalEqualAreaRaw)\n      .scale(124.75)\n      .clipAngle(180 - 1e-3);\n}\n\nvar azimuthalEquidistantRaw = azimuthalRaw(function(c) {\n  return (c = acos(c)) && c / sin(c);\n});\n\nazimuthalEquidistantRaw.invert = azimuthalInvert(function(z) {\n  return z;\n});\n\nfunction azimuthalEquidistant() {\n  return projection(azimuthalEquidistantRaw)\n      .scale(79.4188)\n      .clipAngle(180 - 1e-3);\n}\n\nfunction mercatorRaw(lambda, phi) {\n  return [lambda, log(tan((halfPi + phi) / 2))];\n}\n\nmercatorRaw.invert = function(x, y) {\n  return [x, 2 * atan(exp(y)) - halfPi];\n};\n\nfunction mercator() {\n  return mercatorProjection(mercatorRaw)\n      .scale(961 / tau);\n}\n\nfunction mercatorProjection(project) {\n  var m = projection(project),\n      scale = m.scale,\n      translate = m.translate,\n      clipExtent = m.clipExtent,\n      clipAuto;\n\n  m.scale = function(_) {\n    return arguments.length ? (scale(_), clipAuto && m.clipExtent(null), m) : scale();\n  };\n\n  m.translate = function(_) {\n    return arguments.length ? (translate(_), clipAuto && m.clipExtent(null), m) : translate();\n  };\n\n  m.clipExtent = function(_) {\n    if (!arguments.length) return clipAuto ? null : clipExtent();\n    if (clipAuto = _ == null) {\n      var k = pi * scale(),\n          t = translate();\n      _ = [[t[0] - k, t[1] - k], [t[0] + k, t[1] + k]];\n    }\n    clipExtent(_);\n    return m;\n  };\n\n  return m.clipExtent(null);\n}\n\nfunction tany(y) {\n  return tan((halfPi + y) / 2);\n}\n\nfunction conicConformalRaw(y0, y1) {\n  var cy0 = cos(y0),\n      n = y0 === y1 ? sin(y0) : log(cy0 / cos(y1)) / log(tany(y1) / tany(y0)),\n      f = cy0 * pow(tany(y0), n) / n;\n\n  if (!n) return mercatorRaw;\n\n  function project(x, y) {\n    if (f > 0) { if (y < -halfPi + epsilon) y = -halfPi + epsilon; }\n    else { if (y > halfPi - epsilon) y = halfPi - epsilon; }\n    var r = f / pow(tany(y), n);\n    return [r * sin(n * x), f - r * cos(n * x)];\n  }\n\n  project.invert = function(x, y) {\n    var fy = f - y, r = sign(n) * sqrt(x * x + fy * fy);\n    return [atan2(x, fy) / n, 2 * atan(pow(f / r, 1 / n)) - halfPi];\n  };\n\n  return project;\n}\n\nfunction conicConformal() {\n  return conicProjection(conicConformalRaw)\n      .scale(109.5)\n      .parallels([30, 30]);\n}\n\nfunction equirectangularRaw(lambda, phi) {\n  return [lambda, phi];\n}\n\nequirectangularRaw.invert = equirectangularRaw;\n\nfunction equirectangular() {\n  return projection(equirectangularRaw)\n      .scale(152.63);\n}\n\nfunction conicEquidistantRaw(y0, y1) {\n  var cy0 = cos(y0),\n      n = y0 === y1 ? sin(y0) : (cy0 - cos(y1)) / (y1 - y0),\n      g = cy0 / n + y0;\n\n  if (abs(n) < epsilon) return equirectangularRaw;\n\n  function project(x, y) {\n    var gy = g - y, nx = n * x;\n    return [gy * sin(nx), g - gy * cos(nx)];\n  }\n\n  project.invert = function(x, y) {\n    var gy = g - y;\n    return [atan2(x, gy) / n, g - sign(n) * sqrt(x * x + gy * gy)];\n  };\n\n  return project;\n}\n\nfunction conicEquidistant() {\n  return conicProjection(conicEquidistantRaw)\n      .scale(131.154)\n      .center([0, 13.9389]);\n}\n\nfunction gnomonicRaw(x, y) {\n  var cy = cos(y), k = cos(x) * cy;\n  return [cy * sin(x) / k, sin(y) / k];\n}\n\ngnomonicRaw.invert = azimuthalInvert(atan);\n\nfunction gnomonic() {\n  return projection(gnomonicRaw)\n      .scale(144.049)\n      .clipAngle(60);\n}\n\nfunction orthographicRaw(x, y) {\n  return [cos(y) * sin(x), sin(y)];\n}\n\northographicRaw.invert = azimuthalInvert(asin);\n\nfunction orthographic() {\n  return projection(orthographicRaw)\n      .scale(249.5)\n      .clipAngle(90 + epsilon);\n}\n\nfunction stereographicRaw(x, y) {\n  var cy = cos(y), k = 1 + cos(x) * cy;\n  return [cy * sin(x) / k, sin(y) / k];\n}\n\nstereographicRaw.invert = azimuthalInvert(function(z) {\n  return 2 * atan(z);\n});\n\nfunction stereographic() {\n  return projection(stereographicRaw)\n      .scale(250)\n      .clipAngle(142);\n}\n\nfunction transverseMercatorRaw(lambda, phi) {\n  return [log(tan((halfPi + phi) / 2)), -lambda];\n}\n\ntransverseMercatorRaw.invert = function(x, y) {\n  return [-y, 2 * atan(exp(x)) - halfPi];\n};\n\nfunction transverseMercator() {\n  var m = mercatorProjection(transverseMercatorRaw),\n      center = m.center,\n      rotate = m.rotate;\n\n  m.center = function(_) {\n    return arguments.length ? center([-_[1], _[0]]) : (_ = center(), [_[1], -_[0]]);\n  };\n\n  m.rotate = function(_) {\n    return arguments.length ? rotate([_[0], _[1], _.length > 2 ? _[2] + 90 : 90]) : (_ = rotate(), [_[0], _[1], _[2] - 90]);\n  };\n\n  return rotate([0, 0, 90])\n      .scale(159.155);\n}\n\nexports.geoArea = area;\nexports.geoBounds = bounds;\nexports.geoCentroid = centroid;\nexports.geoCircle = circle;\nexports.geoClipExtent = extent;\nexports.geoDistance = distance;\nexports.geoGraticule = graticule;\nexports.geoInterpolate = interpolate;\nexports.geoLength = length;\nexports.geoPath = index;\nexports.geoAlbers = albers;\nexports.geoAlbersUsa = albersUsa;\nexports.geoAzimuthalEqualArea = azimuthalEqualArea;\nexports.geoAzimuthalEqualAreaRaw = azimuthalEqualAreaRaw;\nexports.geoAzimuthalEquidistant = azimuthalEquidistant;\nexports.geoAzimuthalEquidistantRaw = azimuthalEquidistantRaw;\nexports.geoConicConformal = conicConformal;\nexports.geoConicConformalRaw = conicConformalRaw;\nexports.geoConicEqualArea = conicEqualArea;\nexports.geoConicEqualAreaRaw = conicEqualAreaRaw;\nexports.geoConicEquidistant = conicEquidistant;\nexports.geoConicEquidistantRaw = conicEquidistantRaw;\nexports.geoEquirectangular = equirectangular;\nexports.geoEquirectangularRaw = equirectangularRaw;\nexports.geoGnomonic = gnomonic;\nexports.geoGnomonicRaw = gnomonicRaw;\nexports.geoProjection = projection;\nexports.geoProjectionMutator = projectionMutator;\nexports.geoMercator = mercator;\nexports.geoMercatorRaw = mercatorRaw;\nexports.geoOrthographic = orthographic;\nexports.geoOrthographicRaw = orthographicRaw;\nexports.geoStereographic = stereographic;\nexports.geoStereographicRaw = stereographicRaw;\nexports.geoTransverseMercator = transverseMercator;\nexports.geoTransverseMercatorRaw = transverseMercatorRaw;\nexports.geoRotation = rotation;\nexports.geoStream = geoStream;\nexports.geoTransform = transform;\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n})));","// https://d3js.org/d3-interpolate/ Version 1.1.1. Copyright 2016 Mike Bostock.\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('d3-color')) :\n  typeof define === 'function' && define.amd ? define(['exports', 'd3-color'], factory) :\n  (factory((global.d3 = global.d3 || {}),global.d3));\n}(this, function (exports,d3Color) { 'use strict';\n\n  function basis(t1, v0, v1, v2, v3) {\n    var t2 = t1 * t1, t3 = t2 * t1;\n    return ((1 - 3 * t1 + 3 * t2 - t3) * v0\n        + (4 - 6 * t2 + 3 * t3) * v1\n        + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2\n        + t3 * v3) / 6;\n  }\n\n  function basis$1(values) {\n    var n = values.length - 1;\n    return function(t) {\n      var i = t <= 0 ? (t = 0) : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n),\n          v1 = values[i],\n          v2 = values[i + 1],\n          v0 = i > 0 ? values[i - 1] : 2 * v1 - v2,\n          v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;\n      return basis((t - i / n) * n, v0, v1, v2, v3);\n    };\n  }\n\n  function basisClosed(values) {\n    var n = values.length;\n    return function(t) {\n      var i = Math.floor(((t %= 1) < 0 ? ++t : t) * n),\n          v0 = values[(i + n - 1) % n],\n          v1 = values[i % n],\n          v2 = values[(i + 1) % n],\n          v3 = values[(i + 2) % n];\n      return basis((t - i / n) * n, v0, v1, v2, v3);\n    };\n  }\n\n  function constant(x) {\n    return function() {\n      return x;\n    };\n  }\n\n  function linear(a, d) {\n    return function(t) {\n      return a + t * d;\n    };\n  }\n\n  function exponential(a, b, y) {\n    return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n      return Math.pow(a + t * b, y);\n    };\n  }\n\n  function hue(a, b) {\n    var d = b - a;\n    return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n  }\n\n  function gamma(y) {\n    return (y = +y) === 1 ? nogamma : function(a, b) {\n      return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n    };\n  }\n\n  function nogamma(a, b) {\n    var d = b - a;\n    return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n  }\n\n  var rgb$1 = (function rgbGamma(y) {\n    var color = gamma(y);\n\n    function rgb(start, end) {\n      var r = color((start = d3Color.rgb(start)).r, (end = d3Color.rgb(end)).r),\n          g = color(start.g, end.g),\n          b = color(start.b, end.b),\n          opacity = color(start.opacity, end.opacity);\n      return function(t) {\n        start.r = r(t);\n        start.g = g(t);\n        start.b = b(t);\n        start.opacity = opacity(t);\n        return start + \"\";\n      };\n    }\n\n    rgb.gamma = rgbGamma;\n\n    return rgb;\n  })(1);\n\n  function rgbSpline(spline) {\n    return function(colors) {\n      var n = colors.length,\n          r = new Array(n),\n          g = new Array(n),\n          b = new Array(n),\n          i, color;\n      for (i = 0; i < n; ++i) {\n        color = d3Color.rgb(colors[i]);\n        r[i] = color.r || 0;\n        g[i] = color.g || 0;\n        b[i] = color.b || 0;\n      }\n      r = spline(r);\n      g = spline(g);\n      b = spline(b);\n      color.opacity = 1;\n      return function(t) {\n        color.r = r(t);\n        color.g = g(t);\n        color.b = b(t);\n        return color + \"\";\n      };\n    };\n  }\n\n  var rgbBasis = rgbSpline(basis$1);\n  var rgbBasisClosed = rgbSpline(basisClosed);\n\n  function array(a, b) {\n    var nb = b ? b.length : 0,\n        na = a ? Math.min(nb, a.length) : 0,\n        x = new Array(nb),\n        c = new Array(nb),\n        i;\n\n    for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n    for (; i < nb; ++i) c[i] = b[i];\n\n    return function(t) {\n      for (i = 0; i < na; ++i) c[i] = x[i](t);\n      return c;\n    };\n  }\n\n  function date(a, b) {\n    var d = new Date;\n    return a = +a, b -= a, function(t) {\n      return d.setTime(a + b * t), d;\n    };\n  }\n\n  function number(a, b) {\n    return a = +a, b -= a, function(t) {\n      return a + b * t;\n    };\n  }\n\n  function object(a, b) {\n    var i = {},\n        c = {},\n        k;\n\n    if (a === null || typeof a !== \"object\") a = {};\n    if (b === null || typeof b !== \"object\") b = {};\n\n    for (k in b) {\n      if (k in a) {\n        i[k] = value(a[k], b[k]);\n      } else {\n        c[k] = b[k];\n      }\n    }\n\n    return function(t) {\n      for (k in i) c[k] = i[k](t);\n      return c;\n    };\n  }\n\n  var reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g;\n  var reB = new RegExp(reA.source, \"g\");\n  function zero(b) {\n    return function() {\n      return b;\n    };\n  }\n\n  function one(b) {\n    return function(t) {\n      return b(t) + \"\";\n    };\n  }\n\n  function string(a, b) {\n    var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n        am, // current match in a\n        bm, // current match in b\n        bs, // string preceding current number in b, if any\n        i = -1, // index in s\n        s = [], // string constants and placeholders\n        q = []; // number interpolators\n\n    // Coerce inputs to strings.\n    a = a + \"\", b = b + \"\";\n\n    // Interpolate pairs of numbers in a & b.\n    while ((am = reA.exec(a))\n        && (bm = reB.exec(b))) {\n      if ((bs = bm.index) > bi) { // a string precedes the next number in b\n        bs = b.slice(bi, bs);\n        if (s[i]) s[i] += bs; // coalesce with previous string\n        else s[++i] = bs;\n      }\n      if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n        if (s[i]) s[i] += bm; // coalesce with previous string\n        else s[++i] = bm;\n      } else { // interpolate non-matching numbers\n        s[++i] = null;\n        q.push({i: i, x: number(am, bm)});\n      }\n      bi = reB.lastIndex;\n    }\n\n    // Add remains of b.\n    if (bi < b.length) {\n      bs = b.slice(bi);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n\n    // Special optimization for only a single match.\n    // Otherwise, interpolate each of the numbers and rejoin the string.\n    return s.length < 2 ? (q[0]\n        ? one(q[0].x)\n        : zero(b))\n        : (b = q.length, function(t) {\n            for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n            return s.join(\"\");\n          });\n  }\n\n  function value(a, b) {\n    var t = typeof b, c;\n    return b == null || t === \"boolean\" ? constant(b)\n        : (t === \"number\" ? number\n        : t === \"string\" ? ((c = d3Color.color(b)) ? (b = c, rgb$1) : string)\n        : b instanceof d3Color.color ? rgb$1\n        : b instanceof Date ? date\n        : Array.isArray(b) ? array\n        : isNaN(b) ? object\n        : number)(a, b);\n  }\n\n  function round(a, b) {\n    return a = +a, b -= a, function(t) {\n      return Math.round(a + b * t);\n    };\n  }\n\n  var degrees = 180 / Math.PI;\n\n  var identity = {\n    translateX: 0,\n    translateY: 0,\n    rotate: 0,\n    skewX: 0,\n    scaleX: 1,\n    scaleY: 1\n  };\n\n  function decompose(a, b, c, d, e, f) {\n    var scaleX, scaleY, skewX;\n    if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n    if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n    if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n    if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n    return {\n      translateX: e,\n      translateY: f,\n      rotate: Math.atan2(b, a) * degrees,\n      skewX: Math.atan(skewX) * degrees,\n      scaleX: scaleX,\n      scaleY: scaleY\n    };\n  }\n\n  var cssNode;\n  var cssRoot;\n  var cssView;\n  var svgNode;\n  function parseCss(value) {\n    if (value === \"none\") return identity;\n    if (!cssNode) cssNode = document.createElement(\"DIV\"), cssRoot = document.documentElement, cssView = document.defaultView;\n    cssNode.style.transform = value;\n    value = cssView.getComputedStyle(cssRoot.appendChild(cssNode), null).getPropertyValue(\"transform\");\n    cssRoot.removeChild(cssNode);\n    value = value.slice(7, -1).split(\",\");\n    return decompose(+value[0], +value[1], +value[2], +value[3], +value[4], +value[5]);\n  }\n\n  function parseSvg(value) {\n    if (value == null) return identity;\n    if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n    svgNode.setAttribute(\"transform\", value);\n    if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\n    value = value.matrix;\n    return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n  }\n\n  function interpolateTransform(parse, pxComma, pxParen, degParen) {\n\n    function pop(s) {\n      return s.length ? s.pop() + \" \" : \"\";\n    }\n\n    function translate(xa, ya, xb, yb, s, q) {\n      if (xa !== xb || ya !== yb) {\n        var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n        q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n      } else if (xb || yb) {\n        s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n      }\n    }\n\n    function rotate(a, b, s, q) {\n      if (a !== b) {\n        if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\n        q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: number(a, b)});\n      } else if (b) {\n        s.push(pop(s) + \"rotate(\" + b + degParen);\n      }\n    }\n\n    function skewX(a, b, s, q) {\n      if (a !== b) {\n        q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: number(a, b)});\n      } else if (b) {\n        s.push(pop(s) + \"skewX(\" + b + degParen);\n      }\n    }\n\n    function scale(xa, ya, xb, yb, s, q) {\n      if (xa !== xb || ya !== yb) {\n        var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n        q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n      } else if (xb !== 1 || yb !== 1) {\n        s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n      }\n    }\n\n    return function(a, b) {\n      var s = [], // string constants and placeholders\n          q = []; // number interpolators\n      a = parse(a), b = parse(b);\n      translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n      rotate(a.rotate, b.rotate, s, q);\n      skewX(a.skewX, b.skewX, s, q);\n      scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n      a = b = null; // gc\n      return function(t) {\n        var i = -1, n = q.length, o;\n        while (++i < n) s[(o = q[i]).i] = o.x(t);\n        return s.join(\"\");\n      };\n    };\n  }\n\n  var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\n  var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");\n\n  var rho = Math.SQRT2;\n  var rho2 = 2;\n  var rho4 = 4;\n  var epsilon2 = 1e-12;\n  function cosh(x) {\n    return ((x = Math.exp(x)) + 1 / x) / 2;\n  }\n\n  function sinh(x) {\n    return ((x = Math.exp(x)) - 1 / x) / 2;\n  }\n\n  function tanh(x) {\n    return ((x = Math.exp(2 * x)) - 1) / (x + 1);\n  }\n\n  // p0 = [ux0, uy0, w0]\n  // p1 = [ux1, uy1, w1]\n  function zoom(p0, p1) {\n    var ux0 = p0[0], uy0 = p0[1], w0 = p0[2],\n        ux1 = p1[0], uy1 = p1[1], w1 = p1[2],\n        dx = ux1 - ux0,\n        dy = uy1 - uy0,\n        d2 = dx * dx + dy * dy,\n        i,\n        S;\n\n    // Special case for u0 ≅ u1.\n    if (d2 < epsilon2) {\n      S = Math.log(w1 / w0) / rho;\n      i = function(t) {\n        return [\n          ux0 + t * dx,\n          uy0 + t * dy,\n          w0 * Math.exp(rho * t * S)\n        ];\n      }\n    }\n\n    // General case.\n    else {\n      var d1 = Math.sqrt(d2),\n          b0 = (w1 * w1 - w0 * w0 + rho4 * d2) / (2 * w0 * rho2 * d1),\n          b1 = (w1 * w1 - w0 * w0 - rho4 * d2) / (2 * w1 * rho2 * d1),\n          r0 = Math.log(Math.sqrt(b0 * b0 + 1) - b0),\n          r1 = Math.log(Math.sqrt(b1 * b1 + 1) - b1);\n      S = (r1 - r0) / rho;\n      i = function(t) {\n        var s = t * S,\n            coshr0 = cosh(r0),\n            u = w0 / (rho2 * d1) * (coshr0 * tanh(rho * s + r0) - sinh(r0));\n        return [\n          ux0 + u * dx,\n          uy0 + u * dy,\n          w0 * coshr0 / cosh(rho * s + r0)\n        ];\n      }\n    }\n\n    i.duration = S * 1000;\n\n    return i;\n  }\n\n  function hsl$1(hue) {\n    return function(start, end) {\n      var h = hue((start = d3Color.hsl(start)).h, (end = d3Color.hsl(end)).h),\n          s = nogamma(start.s, end.s),\n          l = nogamma(start.l, end.l),\n          opacity = nogamma(start.opacity, end.opacity);\n      return function(t) {\n        start.h = h(t);\n        start.s = s(t);\n        start.l = l(t);\n        start.opacity = opacity(t);\n        return start + \"\";\n      };\n    }\n  }\n\n  var hsl$2 = hsl$1(hue);\n  var hslLong = hsl$1(nogamma);\n\n  function lab$1(start, end) {\n    var l = nogamma((start = d3Color.lab(start)).l, (end = d3Color.lab(end)).l),\n        a = nogamma(start.a, end.a),\n        b = nogamma(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.l = l(t);\n      start.a = a(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  function hcl$1(hue) {\n    return function(start, end) {\n      var h = hue((start = d3Color.hcl(start)).h, (end = d3Color.hcl(end)).h),\n          c = nogamma(start.c, end.c),\n          l = nogamma(start.l, end.l),\n          opacity = nogamma(start.opacity, end.opacity);\n      return function(t) {\n        start.h = h(t);\n        start.c = c(t);\n        start.l = l(t);\n        start.opacity = opacity(t);\n        return start + \"\";\n      };\n    }\n  }\n\n  var hcl$2 = hcl$1(hue);\n  var hclLong = hcl$1(nogamma);\n\n  function cubehelix$1(hue) {\n    return (function cubehelixGamma(y) {\n      y = +y;\n\n      function cubehelix(start, end) {\n        var h = hue((start = d3Color.cubehelix(start)).h, (end = d3Color.cubehelix(end)).h),\n            s = nogamma(start.s, end.s),\n            l = nogamma(start.l, end.l),\n            opacity = nogamma(start.opacity, end.opacity);\n        return function(t) {\n          start.h = h(t);\n          start.s = s(t);\n          start.l = l(Math.pow(t, y));\n          start.opacity = opacity(t);\n          return start + \"\";\n        };\n      }\n\n      cubehelix.gamma = cubehelixGamma;\n\n      return cubehelix;\n    })(1);\n  }\n\n  var cubehelix$2 = cubehelix$1(hue);\n  var cubehelixLong = cubehelix$1(nogamma);\n\n  function quantize(interpolator, n) {\n    var samples = new Array(n);\n    for (var i = 0; i < n; ++i) samples[i] = interpolator(i / (n - 1));\n    return samples;\n  }\n\n  exports.interpolate = value;\n  exports.interpolateArray = array;\n  exports.interpolateBasis = basis$1;\n  exports.interpolateBasisClosed = basisClosed;\n  exports.interpolateDate = date;\n  exports.interpolateNumber = number;\n  exports.interpolateObject = object;\n  exports.interpolateRound = round;\n  exports.interpolateString = string;\n  exports.interpolateTransformCss = interpolateTransformCss;\n  exports.interpolateTransformSvg = interpolateTransformSvg;\n  exports.interpolateZoom = zoom;\n  exports.interpolateRgb = rgb$1;\n  exports.interpolateRgbBasis = rgbBasis;\n  exports.interpolateRgbBasisClosed = rgbBasisClosed;\n  exports.interpolateHsl = hsl$2;\n  exports.interpolateHslLong = hslLong;\n  exports.interpolateLab = lab$1;\n  exports.interpolateHcl = hcl$2;\n  exports.interpolateHclLong = hclLong;\n  exports.interpolateCubehelix = cubehelix$2;\n  exports.interpolateCubehelixLong = cubehelixLong;\n  exports.quantize = quantize;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n}));","// https://d3js.org/d3-scale/ Version 1.0.3. Copyright 2016 Mike Bostock.\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('d3-array'), require('d3-collection'), require('d3-interpolate'), require('d3-format'), require('d3-time'), require('d3-time-format'), require('d3-color')) :\n  typeof define === 'function' && define.amd ? define(['exports', 'd3-array', 'd3-collection', 'd3-interpolate', 'd3-format', 'd3-time', 'd3-time-format', 'd3-color'], factory) :\n  (factory((global.d3 = global.d3 || {}),global.d3,global.d3,global.d3,global.d3,global.d3,global.d3,global.d3));\n}(this, function (exports,d3Array,d3Collection,d3Interpolate,d3Format,d3Time,d3TimeFormat,d3Color) { 'use strict';\n\n  var array = Array.prototype;\n\n  var map$1 = array.map;\n  var slice = array.slice;\n\n  var implicit = {name: \"implicit\"};\n\n  function ordinal(range) {\n    var index = d3Collection.map(),\n        domain = [],\n        unknown = implicit;\n\n    range = range == null ? [] : slice.call(range);\n\n    function scale(d) {\n      var key = d + \"\", i = index.get(key);\n      if (!i) {\n        if (unknown !== implicit) return unknown;\n        index.set(key, i = domain.push(d));\n      }\n      return range[(i - 1) % range.length];\n    }\n\n    scale.domain = function(_) {\n      if (!arguments.length) return domain.slice();\n      domain = [], index = d3Collection.map();\n      var i = -1, n = _.length, d, key;\n      while (++i < n) if (!index.has(key = (d = _[i]) + \"\")) index.set(key, domain.push(d));\n      return scale;\n    };\n\n    scale.range = function(_) {\n      return arguments.length ? (range = slice.call(_), scale) : range.slice();\n    };\n\n    scale.unknown = function(_) {\n      return arguments.length ? (unknown = _, scale) : unknown;\n    };\n\n    scale.copy = function() {\n      return ordinal()\n          .domain(domain)\n          .range(range)\n          .unknown(unknown);\n    };\n\n    return scale;\n  }\n\n  function band() {\n    var scale = ordinal().unknown(undefined),\n        domain = scale.domain,\n        ordinalRange = scale.range,\n        range = [0, 1],\n        step,\n        bandwidth,\n        round = false,\n        paddingInner = 0,\n        paddingOuter = 0,\n        align = 0.5;\n\n    delete scale.unknown;\n\n    function rescale() {\n      var n = domain().length,\n          reverse = range[1] < range[0],\n          start = range[reverse - 0],\n          stop = range[1 - reverse];\n      step = (stop - start) / Math.max(1, n - paddingInner + paddingOuter * 2);\n      if (round) step = Math.floor(step);\n      start += (stop - start - step * (n - paddingInner)) * align;\n      bandwidth = step * (1 - paddingInner);\n      if (round) start = Math.round(start), bandwidth = Math.round(bandwidth);\n      var values = d3Array.range(n).map(function(i) { return start + step * i; });\n      return ordinalRange(reverse ? values.reverse() : values);\n    }\n\n    scale.domain = function(_) {\n      return arguments.length ? (domain(_), rescale()) : domain();\n    };\n\n    scale.range = function(_) {\n      return arguments.length ? (range = [+_[0], +_[1]], rescale()) : range.slice();\n    };\n\n    scale.rangeRound = function(_) {\n      return range = [+_[0], +_[1]], round = true, rescale();\n    };\n\n    scale.bandwidth = function() {\n      return bandwidth;\n    };\n\n    scale.step = function() {\n      return step;\n    };\n\n    scale.round = function(_) {\n      return arguments.length ? (round = !!_, rescale()) : round;\n    };\n\n    scale.padding = function(_) {\n      return arguments.length ? (paddingInner = paddingOuter = Math.max(0, Math.min(1, _)), rescale()) : paddingInner;\n    };\n\n    scale.paddingInner = function(_) {\n      return arguments.length ? (paddingInner = Math.max(0, Math.min(1, _)), rescale()) : paddingInner;\n    };\n\n    scale.paddingOuter = function(_) {\n      return arguments.length ? (paddingOuter = Math.max(0, Math.min(1, _)), rescale()) : paddingOuter;\n    };\n\n    scale.align = function(_) {\n      return arguments.length ? (align = Math.max(0, Math.min(1, _)), rescale()) : align;\n    };\n\n    scale.copy = function() {\n      return band()\n          .domain(domain())\n          .range(range)\n          .round(round)\n          .paddingInner(paddingInner)\n          .paddingOuter(paddingOuter)\n          .align(align);\n    };\n\n    return rescale();\n  }\n\n  function pointish(scale) {\n    var copy = scale.copy;\n\n    scale.padding = scale.paddingOuter;\n    delete scale.paddingInner;\n    delete scale.paddingOuter;\n\n    scale.copy = function() {\n      return pointish(copy());\n    };\n\n    return scale;\n  }\n\n  function point() {\n    return pointish(band().paddingInner(1));\n  }\n\n  function constant(x) {\n    return function() {\n      return x;\n    };\n  }\n\n  function number(x) {\n    return +x;\n  }\n\n  var unit = [0, 1];\n\n  function deinterpolate(a, b) {\n    return (b -= (a = +a))\n        ? function(x) { return (x - a) / b; }\n        : constant(b);\n  }\n\n  function deinterpolateClamp(deinterpolate) {\n    return function(a, b) {\n      var d = deinterpolate(a = +a, b = +b);\n      return function(x) { return x <= a ? 0 : x >= b ? 1 : d(x); };\n    };\n  }\n\n  function reinterpolateClamp(reinterpolate) {\n    return function(a, b) {\n      var r = reinterpolate(a = +a, b = +b);\n      return function(t) { return t <= 0 ? a : t >= 1 ? b : r(t); };\n    };\n  }\n\n  function bimap(domain, range, deinterpolate, reinterpolate) {\n    var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];\n    if (d1 < d0) d0 = deinterpolate(d1, d0), r0 = reinterpolate(r1, r0);\n    else d0 = deinterpolate(d0, d1), r0 = reinterpolate(r0, r1);\n    return function(x) { return r0(d0(x)); };\n  }\n\n  function polymap(domain, range, deinterpolate, reinterpolate) {\n    var j = Math.min(domain.length, range.length) - 1,\n        d = new Array(j),\n        r = new Array(j),\n        i = -1;\n\n    // Reverse descending domains.\n    if (domain[j] < domain[0]) {\n      domain = domain.slice().reverse();\n      range = range.slice().reverse();\n    }\n\n    while (++i < j) {\n      d[i] = deinterpolate(domain[i], domain[i + 1]);\n      r[i] = reinterpolate(range[i], range[i + 1]);\n    }\n\n    return function(x) {\n      var i = d3Array.bisect(domain, x, 1, j) - 1;\n      return r[i](d[i](x));\n    };\n  }\n\n  function copy(source, target) {\n    return target\n        .domain(source.domain())\n        .range(source.range())\n        .interpolate(source.interpolate())\n        .clamp(source.clamp());\n  }\n\n  // deinterpolate(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].\n  // reinterpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding domain value x in [a,b].\n  function continuous(deinterpolate$$, reinterpolate) {\n    var domain = unit,\n        range = unit,\n        interpolate = d3Interpolate.interpolate,\n        clamp = false,\n        piecewise,\n        output,\n        input;\n\n    function rescale() {\n      piecewise = Math.min(domain.length, range.length) > 2 ? polymap : bimap;\n      output = input = null;\n      return scale;\n    }\n\n    function scale(x) {\n      return (output || (output = piecewise(domain, range, clamp ? deinterpolateClamp(deinterpolate$$) : deinterpolate$$, interpolate)))(+x);\n    }\n\n    scale.invert = function(y) {\n      return (input || (input = piecewise(range, domain, deinterpolate, clamp ? reinterpolateClamp(reinterpolate) : reinterpolate)))(+y);\n    };\n\n    scale.domain = function(_) {\n      return arguments.length ? (domain = map$1.call(_, number), rescale()) : domain.slice();\n    };\n\n    scale.range = function(_) {\n      return arguments.length ? (range = slice.call(_), rescale()) : range.slice();\n    };\n\n    scale.rangeRound = function(_) {\n      return range = slice.call(_), interpolate = d3Interpolate.interpolateRound, rescale();\n    };\n\n    scale.clamp = function(_) {\n      return arguments.length ? (clamp = !!_, rescale()) : clamp;\n    };\n\n    scale.interpolate = function(_) {\n      return arguments.length ? (interpolate = _, rescale()) : interpolate;\n    };\n\n    return rescale();\n  }\n\n  function tickFormat(domain, count, specifier) {\n    var start = domain[0],\n        stop = domain[domain.length - 1],\n        step = d3Array.tickStep(start, stop, count == null ? 10 : count),\n        precision;\n    specifier = d3Format.formatSpecifier(specifier == null ? \",f\" : specifier);\n    switch (specifier.type) {\n      case \"s\": {\n        var value = Math.max(Math.abs(start), Math.abs(stop));\n        if (specifier.precision == null && !isNaN(precision = d3Format.precisionPrefix(step, value))) specifier.precision = precision;\n        return d3Format.formatPrefix(specifier, value);\n      }\n      case \"\":\n      case \"e\":\n      case \"g\":\n      case \"p\":\n      case \"r\": {\n        if (specifier.precision == null && !isNaN(precision = d3Format.precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === \"e\");\n        break;\n      }\n      case \"f\":\n      case \"%\": {\n        if (specifier.precision == null && !isNaN(precision = d3Format.precisionFixed(step))) specifier.precision = precision - (specifier.type === \"%\") * 2;\n        break;\n      }\n    }\n    return d3Format.format(specifier);\n  }\n\n  function linearish(scale) {\n    var domain = scale.domain;\n\n    scale.ticks = function(count) {\n      var d = domain();\n      return d3Array.ticks(d[0], d[d.length - 1], count == null ? 10 : count);\n    };\n\n    scale.tickFormat = function(count, specifier) {\n      return tickFormat(domain(), count, specifier);\n    };\n\n    scale.nice = function(count) {\n      var d = domain(),\n          i = d.length - 1,\n          n = count == null ? 10 : count,\n          start = d[0],\n          stop = d[i],\n          step = d3Array.tickStep(start, stop, n);\n\n      if (step) {\n        step = d3Array.tickStep(Math.floor(start / step) * step, Math.ceil(stop / step) * step, n);\n        d[0] = Math.floor(start / step) * step;\n        d[i] = Math.ceil(stop / step) * step;\n        domain(d);\n      }\n\n      return scale;\n    };\n\n    return scale;\n  }\n\n  function linear() {\n    var scale = continuous(deinterpolate, d3Interpolate.interpolateNumber);\n\n    scale.copy = function() {\n      return copy(scale, linear());\n    };\n\n    return linearish(scale);\n  }\n\n  function identity() {\n    var domain = [0, 1];\n\n    function scale(x) {\n      return +x;\n    }\n\n    scale.invert = scale;\n\n    scale.domain = scale.range = function(_) {\n      return arguments.length ? (domain = map$1.call(_, number), scale) : domain.slice();\n    };\n\n    scale.copy = function() {\n      return identity().domain(domain);\n    };\n\n    return linearish(scale);\n  }\n\n  function nice(domain, interval) {\n    domain = domain.slice();\n\n    var i0 = 0,\n        i1 = domain.length - 1,\n        x0 = domain[i0],\n        x1 = domain[i1],\n        t;\n\n    if (x1 < x0) {\n      t = i0, i0 = i1, i1 = t;\n      t = x0, x0 = x1, x1 = t;\n    }\n\n    domain[i0] = interval.floor(x0);\n    domain[i1] = interval.ceil(x1);\n    return domain;\n  }\n\n  function deinterpolate$1(a, b) {\n    return (b = Math.log(b / a))\n        ? function(x) { return Math.log(x / a) / b; }\n        : constant(b);\n  }\n\n  function reinterpolate(a, b) {\n    return a < 0\n        ? function(t) { return -Math.pow(-b, t) * Math.pow(-a, 1 - t); }\n        : function(t) { return Math.pow(b, t) * Math.pow(a, 1 - t); };\n  }\n\n  function pow10(x) {\n    return isFinite(x) ? +(\"1e\" + x) : x < 0 ? 0 : x;\n  }\n\n  function powp(base) {\n    return base === 10 ? pow10\n        : base === Math.E ? Math.exp\n        : function(x) { return Math.pow(base, x); };\n  }\n\n  function logp(base) {\n    return base === Math.E ? Math.log\n        : base === 10 && Math.log10\n        || base === 2 && Math.log2\n        || (base = Math.log(base), function(x) { return Math.log(x) / base; });\n  }\n\n  function reflect(f) {\n    return function(x) {\n      return -f(-x);\n    };\n  }\n\n  function log() {\n    var scale = continuous(deinterpolate$1, reinterpolate).domain([1, 10]),\n        domain = scale.domain,\n        base = 10,\n        logs = logp(10),\n        pows = powp(10);\n\n    function rescale() {\n      logs = logp(base), pows = powp(base);\n      if (domain()[0] < 0) logs = reflect(logs), pows = reflect(pows);\n      return scale;\n    }\n\n    scale.base = function(_) {\n      return arguments.length ? (base = +_, rescale()) : base;\n    };\n\n    scale.domain = function(_) {\n      return arguments.length ? (domain(_), rescale()) : domain();\n    };\n\n    scale.ticks = function(count) {\n      var d = domain(),\n          u = d[0],\n          v = d[d.length - 1],\n          r;\n\n      if (r = v < u) i = u, u = v, v = i;\n\n      var i = logs(u),\n          j = logs(v),\n          p,\n          k,\n          t,\n          n = count == null ? 10 : +count,\n          z = [];\n\n      if (!(base % 1) && j - i < n) {\n        i = Math.round(i) - 1, j = Math.round(j) + 1;\n        if (u > 0) for (; i < j; ++i) {\n          for (k = 1, p = pows(i); k < base; ++k) {\n            t = p * k;\n            if (t < u) continue;\n            if (t > v) break;\n            z.push(t);\n          }\n        } else for (; i < j; ++i) {\n          for (k = base - 1, p = pows(i); k >= 1; --k) {\n            t = p * k;\n            if (t < u) continue;\n            if (t > v) break;\n            z.push(t);\n          }\n        }\n      } else {\n        z = d3Array.ticks(i, j, Math.min(j - i, n)).map(pows);\n      }\n\n      return r ? z.reverse() : z;\n    };\n\n    scale.tickFormat = function(count, specifier) {\n      if (specifier == null) specifier = base === 10 ? \".0e\" : \",\";\n      if (typeof specifier !== \"function\") specifier = d3Format.format(specifier);\n      if (count === Infinity) return specifier;\n      if (count == null) count = 10;\n      var k = Math.max(1, base * count / scale.ticks().length); // TODO fast estimate?\n      return function(d) {\n        var i = d / pows(Math.round(logs(d)));\n        if (i * base < base - 0.5) i *= base;\n        return i <= k ? specifier(d) : \"\";\n      };\n    };\n\n    scale.nice = function() {\n      return domain(nice(domain(), {\n        floor: function(x) { return pows(Math.floor(logs(x))); },\n        ceil: function(x) { return pows(Math.ceil(logs(x))); }\n      }));\n    };\n\n    scale.copy = function() {\n      return copy(scale, log().base(base));\n    };\n\n    return scale;\n  }\n\n  function raise(x, exponent) {\n    return x < 0 ? -Math.pow(-x, exponent) : Math.pow(x, exponent);\n  }\n\n  function pow() {\n    var exponent = 1,\n        scale = continuous(deinterpolate, reinterpolate),\n        domain = scale.domain;\n\n    function deinterpolate(a, b) {\n      return (b = raise(b, exponent) - (a = raise(a, exponent)))\n          ? function(x) { return (raise(x, exponent) - a) / b; }\n          : constant(b);\n    }\n\n    function reinterpolate(a, b) {\n      b = raise(b, exponent) - (a = raise(a, exponent));\n      return function(t) { return raise(a + b * t, 1 / exponent); };\n    }\n\n    scale.exponent = function(_) {\n      return arguments.length ? (exponent = +_, domain(domain())) : exponent;\n    };\n\n    scale.copy = function() {\n      return copy(scale, pow().exponent(exponent));\n    };\n\n    return linearish(scale);\n  }\n\n  function sqrt() {\n    return pow().exponent(0.5);\n  }\n\n  function quantile$1() {\n    var domain = [],\n        range = [],\n        thresholds = [];\n\n    function rescale() {\n      var i = 0, n = Math.max(1, range.length);\n      thresholds = new Array(n - 1);\n      while (++i < n) thresholds[i - 1] = d3Array.quantile(domain, i / n);\n      return scale;\n    }\n\n    function scale(x) {\n      if (!isNaN(x = +x)) return range[d3Array.bisect(thresholds, x)];\n    }\n\n    scale.invertExtent = function(y) {\n      var i = range.indexOf(y);\n      return i < 0 ? [NaN, NaN] : [\n        i > 0 ? thresholds[i - 1] : domain[0],\n        i < thresholds.length ? thresholds[i] : domain[domain.length - 1]\n      ];\n    };\n\n    scale.domain = function(_) {\n      if (!arguments.length) return domain.slice();\n      domain = [];\n      for (var i = 0, n = _.length, d; i < n; ++i) if (d = _[i], d != null && !isNaN(d = +d)) domain.push(d);\n      domain.sort(d3Array.ascending);\n      return rescale();\n    };\n\n    scale.range = function(_) {\n      return arguments.length ? (range = slice.call(_), rescale()) : range.slice();\n    };\n\n    scale.quantiles = function() {\n      return thresholds.slice();\n    };\n\n    scale.copy = function() {\n      return quantile$1()\n          .domain(domain)\n          .range(range);\n    };\n\n    return scale;\n  }\n\n  function quantize() {\n    var x0 = 0,\n        x1 = 1,\n        n = 1,\n        domain = [0.5],\n        range = [0, 1];\n\n    function scale(x) {\n      if (x <= x) return range[d3Array.bisect(domain, x, 0, n)];\n    }\n\n    function rescale() {\n      var i = -1;\n      domain = new Array(n);\n      while (++i < n) domain[i] = ((i + 1) * x1 - (i - n) * x0) / (n + 1);\n      return scale;\n    }\n\n    scale.domain = function(_) {\n      return arguments.length ? (x0 = +_[0], x1 = +_[1], rescale()) : [x0, x1];\n    };\n\n    scale.range = function(_) {\n      return arguments.length ? (n = (range = slice.call(_)).length - 1, rescale()) : range.slice();\n    };\n\n    scale.invertExtent = function(y) {\n      var i = range.indexOf(y);\n      return i < 0 ? [NaN, NaN]\n          : i < 1 ? [x0, domain[0]]\n          : i >= n ? [domain[n - 1], x1]\n          : [domain[i - 1], domain[i]];\n    };\n\n    scale.copy = function() {\n      return quantize()\n          .domain([x0, x1])\n          .range(range);\n    };\n\n    return linearish(scale);\n  }\n\n  function threshold() {\n    var domain = [0.5],\n        range = [0, 1],\n        n = 1;\n\n    function scale(x) {\n      if (x <= x) return range[d3Array.bisect(domain, x, 0, n)];\n    }\n\n    scale.domain = function(_) {\n      return arguments.length ? (domain = slice.call(_), n = Math.min(domain.length, range.length - 1), scale) : domain.slice();\n    };\n\n    scale.range = function(_) {\n      return arguments.length ? (range = slice.call(_), n = Math.min(domain.length, range.length - 1), scale) : range.slice();\n    };\n\n    scale.invertExtent = function(y) {\n      var i = range.indexOf(y);\n      return [domain[i - 1], domain[i]];\n    };\n\n    scale.copy = function() {\n      return threshold()\n          .domain(domain)\n          .range(range);\n    };\n\n    return scale;\n  }\n\n  var durationSecond = 1000;\n  var durationMinute = durationSecond * 60;\n  var durationHour = durationMinute * 60;\n  var durationDay = durationHour * 24;\n  var durationWeek = durationDay * 7;\n  var durationMonth = durationDay * 30;\n  var durationYear = durationDay * 365;\n  function date(t) {\n    return new Date(t);\n  }\n\n  function number$1(t) {\n    return t instanceof Date ? +t : +new Date(+t);\n  }\n\n  function calendar(year, month, week, day, hour, minute, second, millisecond, format) {\n    var scale = continuous(deinterpolate, d3Interpolate.interpolateNumber),\n        invert = scale.invert,\n        domain = scale.domain;\n\n    var formatMillisecond = format(\".%L\"),\n        formatSecond = format(\":%S\"),\n        formatMinute = format(\"%I:%M\"),\n        formatHour = format(\"%I %p\"),\n        formatDay = format(\"%a %d\"),\n        formatWeek = format(\"%b %d\"),\n        formatMonth = format(\"%B\"),\n        formatYear = format(\"%Y\");\n\n    var tickIntervals = [\n      [second,  1,      durationSecond],\n      [second,  5,  5 * durationSecond],\n      [second, 15, 15 * durationSecond],\n      [second, 30, 30 * durationSecond],\n      [minute,  1,      durationMinute],\n      [minute,  5,  5 * durationMinute],\n      [minute, 15, 15 * durationMinute],\n      [minute, 30, 30 * durationMinute],\n      [  hour,  1,      durationHour  ],\n      [  hour,  3,  3 * durationHour  ],\n      [  hour,  6,  6 * durationHour  ],\n      [  hour, 12, 12 * durationHour  ],\n      [   day,  1,      durationDay   ],\n      [   day,  2,  2 * durationDay   ],\n      [  week,  1,      durationWeek  ],\n      [ month,  1,      durationMonth ],\n      [ month,  3,  3 * durationMonth ],\n      [  year,  1,      durationYear  ]\n    ];\n\n    function tickFormat(date) {\n      return (second(date) < date ? formatMillisecond\n          : minute(date) < date ? formatSecond\n          : hour(date) < date ? formatMinute\n          : day(date) < date ? formatHour\n          : month(date) < date ? (week(date) < date ? formatDay : formatWeek)\n          : year(date) < date ? formatMonth\n          : formatYear)(date);\n    }\n\n    function tickInterval(interval, start, stop, step) {\n      if (interval == null) interval = 10;\n\n      // If a desired tick count is specified, pick a reasonable tick interval\n      // based on the extent of the domain and a rough estimate of tick size.\n      // Otherwise, assume interval is already a time interval and use it.\n      if (typeof interval === \"number\") {\n        var target = Math.abs(stop - start) / interval,\n            i = d3Array.bisector(function(i) { return i[2]; }).right(tickIntervals, target);\n        if (i === tickIntervals.length) {\n          step = d3Array.tickStep(start / durationYear, stop / durationYear, interval);\n          interval = year;\n        } else if (i) {\n          i = tickIntervals[target / tickIntervals[i - 1][2] < tickIntervals[i][2] / target ? i - 1 : i];\n          step = i[1];\n          interval = i[0];\n        } else {\n          step = d3Array.tickStep(start, stop, interval);\n          interval = millisecond;\n        }\n      }\n\n      return step == null ? interval : interval.every(step);\n    }\n\n    scale.invert = function(y) {\n      return new Date(invert(y));\n    };\n\n    scale.domain = function(_) {\n      return arguments.length ? domain(map$1.call(_, number$1)) : domain().map(date);\n    };\n\n    scale.ticks = function(interval, step) {\n      var d = domain(),\n          t0 = d[0],\n          t1 = d[d.length - 1],\n          r = t1 < t0,\n          t;\n      if (r) t = t0, t0 = t1, t1 = t;\n      t = tickInterval(interval, t0, t1, step);\n      t = t ? t.range(t0, t1 + 1) : []; // inclusive stop\n      return r ? t.reverse() : t;\n    };\n\n    scale.tickFormat = function(count, specifier) {\n      return specifier == null ? tickFormat : format(specifier);\n    };\n\n    scale.nice = function(interval, step) {\n      var d = domain();\n      return (interval = tickInterval(interval, d[0], d[d.length - 1], step))\n          ? domain(nice(d, interval))\n          : scale;\n    };\n\n    scale.copy = function() {\n      return copy(scale, calendar(year, month, week, day, hour, minute, second, millisecond, format));\n    };\n\n    return scale;\n  }\n\n  function time() {\n    return calendar(d3Time.timeYear, d3Time.timeMonth, d3Time.timeWeek, d3Time.timeDay, d3Time.timeHour, d3Time.timeMinute, d3Time.timeSecond, d3Time.timeMillisecond, d3TimeFormat.timeFormat).domain([new Date(2000, 0, 1), new Date(2000, 0, 2)]);\n  }\n\n  function utcTime() {\n    return calendar(d3Time.utcYear, d3Time.utcMonth, d3Time.utcWeek, d3Time.utcDay, d3Time.utcHour, d3Time.utcMinute, d3Time.utcSecond, d3Time.utcMillisecond, d3TimeFormat.utcFormat).domain([Date.UTC(2000, 0, 1), Date.UTC(2000, 0, 2)]);\n  }\n\n  function colors(s) {\n    return s.match(/.{6}/g).map(function(x) {\n      return \"#\" + x;\n    });\n  }\n\n  var category10 = colors(\"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf\");\n\n  var category20b = colors(\"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6\");\n\n  var category20c = colors(\"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9\");\n\n  var category20 = colors(\"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5\");\n\n  var cubehelix$1 = d3Interpolate.interpolateCubehelixLong(d3Color.cubehelix(300, 0.5, 0.0), d3Color.cubehelix(-240, 0.5, 1.0));\n\n  var warm = d3Interpolate.interpolateCubehelixLong(d3Color.cubehelix(-100, 0.75, 0.35), d3Color.cubehelix(80, 1.50, 0.8));\n\n  var cool = d3Interpolate.interpolateCubehelixLong(d3Color.cubehelix(260, 0.75, 0.35), d3Color.cubehelix(80, 1.50, 0.8));\n\n  var rainbow = d3Color.cubehelix();\n\n  function rainbow$1(t) {\n    if (t < 0 || t > 1) t -= Math.floor(t);\n    var ts = Math.abs(t - 0.5);\n    rainbow.h = 360 * t - 100;\n    rainbow.s = 1.5 - 1.5 * ts;\n    rainbow.l = 0.8 - 0.9 * ts;\n    return rainbow + \"\";\n  }\n\n  function ramp(range) {\n    var n = range.length;\n    return function(t) {\n      return range[Math.max(0, Math.min(n - 1, Math.floor(t * n)))];\n    };\n  }\n\n  var viridis = ramp(colors(\"44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725\"));\n\n  var magma = ramp(colors(\"00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf\"));\n\n  var inferno = ramp(colors(\"00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4\"));\n\n  var plasma = ramp(colors(\"0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921\"));\n\n  function sequential(interpolator) {\n    var x0 = 0,\n        x1 = 1,\n        clamp = false;\n\n    function scale(x) {\n      var t = (x - x0) / (x1 - x0);\n      return interpolator(clamp ? Math.max(0, Math.min(1, t)) : t);\n    }\n\n    scale.domain = function(_) {\n      return arguments.length ? (x0 = +_[0], x1 = +_[1], scale) : [x0, x1];\n    };\n\n    scale.clamp = function(_) {\n      return arguments.length ? (clamp = !!_, scale) : clamp;\n    };\n\n    scale.interpolator = function(_) {\n      return arguments.length ? (interpolator = _, scale) : interpolator;\n    };\n\n    scale.copy = function() {\n      return sequential(interpolator).domain([x0, x1]).clamp(clamp);\n    };\n\n    return linearish(scale);\n  }\n\n  exports.scaleBand = band;\n  exports.scalePoint = point;\n  exports.scaleIdentity = identity;\n  exports.scaleLinear = linear;\n  exports.scaleLog = log;\n  exports.scaleOrdinal = ordinal;\n  exports.scaleImplicit = implicit;\n  exports.scalePow = pow;\n  exports.scaleSqrt = sqrt;\n  exports.scaleQuantile = quantile$1;\n  exports.scaleQuantize = quantize;\n  exports.scaleThreshold = threshold;\n  exports.scaleTime = time;\n  exports.scaleUtc = utcTime;\n  exports.schemeCategory10 = category10;\n  exports.schemeCategory20b = category20b;\n  exports.schemeCategory20c = category20c;\n  exports.schemeCategory20 = category20;\n  exports.interpolateCubehelixDefault = cubehelix$1;\n  exports.interpolateRainbow = rainbow$1;\n  exports.interpolateWarm = warm;\n  exports.interpolateCool = cool;\n  exports.interpolateViridis = viridis;\n  exports.interpolateMagma = magma;\n  exports.interpolateInferno = inferno;\n  exports.interpolatePlasma = plasma;\n  exports.scaleSequential = sequential;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n}));","// https://d3js.org/d3-selection/ Version 1.0.2. Copyright 2016 Mike Bostock.\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (factory((global.d3 = global.d3 || {})));\n}(this, function (exports) { 'use strict';\n\n  var xhtml = \"http://www.w3.org/1999/xhtml\";\n\n  var namespaces = {\n    svg: \"http://www.w3.org/2000/svg\",\n    xhtml: xhtml,\n    xlink: \"http://www.w3.org/1999/xlink\",\n    xml: \"http://www.w3.org/XML/1998/namespace\",\n    xmlns: \"http://www.w3.org/2000/xmlns/\"\n  };\n\n  function namespace(name) {\n    var prefix = name += \"\", i = prefix.indexOf(\":\");\n    if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n    return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name;\n  }\n\n  function creatorInherit(name) {\n    return function() {\n      var document = this.ownerDocument,\n          uri = this.namespaceURI;\n      return uri === xhtml && document.documentElement.namespaceURI === xhtml\n          ? document.createElement(name)\n          : document.createElementNS(uri, name);\n    };\n  }\n\n  function creatorFixed(fullname) {\n    return function() {\n      return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n    };\n  }\n\n  function creator(name) {\n    var fullname = namespace(name);\n    return (fullname.local\n        ? creatorFixed\n        : creatorInherit)(fullname);\n  }\n\n  var nextId = 0;\n\n  function local() {\n    return new Local;\n  }\n\n  function Local() {\n    this._ = \"@\" + (++nextId).toString(36);\n  }\n\n  Local.prototype = local.prototype = {\n    constructor: Local,\n    get: function(node) {\n      var id = this._;\n      while (!(id in node)) if (!(node = node.parentNode)) return;\n      return node[id];\n    },\n    set: function(node, value) {\n      return node[this._] = value;\n    },\n    remove: function(node) {\n      return this._ in node && delete node[this._];\n    },\n    toString: function() {\n      return this._;\n    }\n  };\n\n  var matcher = function(selector) {\n    return function() {\n      return this.matches(selector);\n    };\n  };\n\n  if (typeof document !== \"undefined\") {\n    var element = document.documentElement;\n    if (!element.matches) {\n      var vendorMatches = element.webkitMatchesSelector\n          || element.msMatchesSelector\n          || element.mozMatchesSelector\n          || element.oMatchesSelector;\n      matcher = function(selector) {\n        return function() {\n          return vendorMatches.call(this, selector);\n        };\n      };\n    }\n  }\n\n  var matcher$1 = matcher;\n\n  var filterEvents = {};\n\n  exports.event = null;\n\n  if (typeof document !== \"undefined\") {\n    var element$1 = document.documentElement;\n    if (!(\"onmouseenter\" in element$1)) {\n      filterEvents = {mouseenter: \"mouseover\", mouseleave: \"mouseout\"};\n    }\n  }\n\n  function filterContextListener(listener, index, group) {\n    listener = contextListener(listener, index, group);\n    return function(event) {\n      var related = event.relatedTarget;\n      if (!related || (related !== this && !(related.compareDocumentPosition(this) & 8))) {\n        listener.call(this, event);\n      }\n    };\n  }\n\n  function contextListener(listener, index, group) {\n    return function(event1) {\n      var event0 = exports.event; // Events can be reentrant (e.g., focus).\n      exports.event = event1;\n      try {\n        listener.call(this, this.__data__, index, group);\n      } finally {\n        exports.event = event0;\n      }\n    };\n  }\n\n  function parseTypenames(typenames) {\n    return typenames.trim().split(/^|\\s+/).map(function(t) {\n      var name = \"\", i = t.indexOf(\".\");\n      if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n      return {type: t, name: name};\n    });\n  }\n\n  function onRemove(typename) {\n    return function() {\n      var on = this.__on;\n      if (!on) return;\n      for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n        if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n          this.removeEventListener(o.type, o.listener, o.capture);\n        } else {\n          on[++i] = o;\n        }\n      }\n      if (++i) on.length = i;\n      else delete this.__on;\n    };\n  }\n\n  function onAdd(typename, value, capture) {\n    var wrap = filterEvents.hasOwnProperty(typename.type) ? filterContextListener : contextListener;\n    return function(d, i, group) {\n      var on = this.__on, o, listener = wrap(value, i, group);\n      if (on) for (var j = 0, m = on.length; j < m; ++j) {\n        if ((o = on[j]).type === typename.type && o.name === typename.name) {\n          this.removeEventListener(o.type, o.listener, o.capture);\n          this.addEventListener(o.type, o.listener = listener, o.capture = capture);\n          o.value = value;\n          return;\n        }\n      }\n      this.addEventListener(typename.type, listener, capture);\n      o = {type: typename.type, name: typename.name, value: value, listener: listener, capture: capture};\n      if (!on) this.__on = [o];\n      else on.push(o);\n    };\n  }\n\n  function selection_on(typename, value, capture) {\n    var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n    if (arguments.length < 2) {\n      var on = this.node().__on;\n      if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n        for (i = 0, o = on[j]; i < n; ++i) {\n          if ((t = typenames[i]).type === o.type && t.name === o.name) {\n            return o.value;\n          }\n        }\n      }\n      return;\n    }\n\n    on = value ? onAdd : onRemove;\n    if (capture == null) capture = false;\n    for (i = 0; i < n; ++i) this.each(on(typenames[i], value, capture));\n    return this;\n  }\n\n  function customEvent(event1, listener, that, args) {\n    var event0 = exports.event;\n    event1.sourceEvent = exports.event;\n    exports.event = event1;\n    try {\n      return listener.apply(that, args);\n    } finally {\n      exports.event = event0;\n    }\n  }\n\n  function sourceEvent() {\n    var current = exports.event, source;\n    while (source = current.sourceEvent) current = source;\n    return current;\n  }\n\n  function point(node, event) {\n    var svg = node.ownerSVGElement || node;\n\n    if (svg.createSVGPoint) {\n      var point = svg.createSVGPoint();\n      point.x = event.clientX, point.y = event.clientY;\n      point = point.matrixTransform(node.getScreenCTM().inverse());\n      return [point.x, point.y];\n    }\n\n    var rect = node.getBoundingClientRect();\n    return [event.clientX - rect.left - node.clientLeft, event.clientY - rect.top - node.clientTop];\n  }\n\n  function mouse(node) {\n    var event = sourceEvent();\n    if (event.changedTouches) event = event.changedTouches[0];\n    return point(node, event);\n  }\n\n  function none() {}\n\n  function selector(selector) {\n    return selector == null ? none : function() {\n      return this.querySelector(selector);\n    };\n  }\n\n  function selection_select(select) {\n    if (typeof select !== \"function\") select = selector(select);\n\n    for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n      for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n        if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n          if (\"__data__\" in node) subnode.__data__ = node.__data__;\n          subgroup[i] = subnode;\n        }\n      }\n    }\n\n    return new Selection(subgroups, this._parents);\n  }\n\n  function empty() {\n    return [];\n  }\n\n  function selectorAll(selector) {\n    return selector == null ? empty : function() {\n      return this.querySelectorAll(selector);\n    };\n  }\n\n  function selection_selectAll(select) {\n    if (typeof select !== \"function\") select = selectorAll(select);\n\n    for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n      for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n        if (node = group[i]) {\n          subgroups.push(select.call(node, node.__data__, i, group));\n          parents.push(node);\n        }\n      }\n    }\n\n    return new Selection(subgroups, parents);\n  }\n\n  function selection_filter(match) {\n    if (typeof match !== \"function\") match = matcher$1(match);\n\n    for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n      for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n        if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n          subgroup.push(node);\n        }\n      }\n    }\n\n    return new Selection(subgroups, this._parents);\n  }\n\n  function sparse(update) {\n    return new Array(update.length);\n  }\n\n  function selection_enter() {\n    return new Selection(this._enter || this._groups.map(sparse), this._parents);\n  }\n\n  function EnterNode(parent, datum) {\n    this.ownerDocument = parent.ownerDocument;\n    this.namespaceURI = parent.namespaceURI;\n    this._next = null;\n    this._parent = parent;\n    this.__data__ = datum;\n  }\n\n  EnterNode.prototype = {\n    constructor: EnterNode,\n    appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n    insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n    querySelector: function(selector) { return this._parent.querySelector(selector); },\n    querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n  };\n\n  function constant(x) {\n    return function() {\n      return x;\n    };\n  }\n\n  var keyPrefix = \"$\"; // Protect against keys like “__proto__”.\n\n  function bindIndex(parent, group, enter, update, exit, data) {\n    var i = 0,\n        node,\n        groupLength = group.length,\n        dataLength = data.length;\n\n    // Put any non-null nodes that fit into update.\n    // Put any null nodes into enter.\n    // Put any remaining data into enter.\n    for (; i < dataLength; ++i) {\n      if (node = group[i]) {\n        node.__data__ = data[i];\n        update[i] = node;\n      } else {\n        enter[i] = new EnterNode(parent, data[i]);\n      }\n    }\n\n    // Put any non-null nodes that don’t fit into exit.\n    for (; i < groupLength; ++i) {\n      if (node = group[i]) {\n        exit[i] = node;\n      }\n    }\n  }\n\n  function bindKey(parent, group, enter, update, exit, data, key) {\n    var i,\n        node,\n        nodeByKeyValue = {},\n        groupLength = group.length,\n        dataLength = data.length,\n        keyValues = new Array(groupLength),\n        keyValue;\n\n    // Compute the key for each node.\n    // If multiple nodes have the same key, the duplicates are added to exit.\n    for (i = 0; i < groupLength; ++i) {\n      if (node = group[i]) {\n        keyValues[i] = keyValue = keyPrefix + key.call(node, node.__data__, i, group);\n        if (keyValue in nodeByKeyValue) {\n          exit[i] = node;\n        } else {\n          nodeByKeyValue[keyValue] = node;\n        }\n      }\n    }\n\n    // Compute the key for each datum.\n    // If there a node associated with this key, join and add it to update.\n    // If there is not (or the key is a duplicate), add it to enter.\n    for (i = 0; i < dataLength; ++i) {\n      keyValue = keyPrefix + key.call(parent, data[i], i, data);\n      if (node = nodeByKeyValue[keyValue]) {\n        update[i] = node;\n        node.__data__ = data[i];\n        nodeByKeyValue[keyValue] = null;\n      } else {\n        enter[i] = new EnterNode(parent, data[i]);\n      }\n    }\n\n    // Add any remaining nodes that were not bound to data to exit.\n    for (i = 0; i < groupLength; ++i) {\n      if ((node = group[i]) && (nodeByKeyValue[keyValues[i]] === node)) {\n        exit[i] = node;\n      }\n    }\n  }\n\n  function selection_data(value, key) {\n    if (!value) {\n      data = new Array(this.size()), j = -1;\n      this.each(function(d) { data[++j] = d; });\n      return data;\n    }\n\n    var bind = key ? bindKey : bindIndex,\n        parents = this._parents,\n        groups = this._groups;\n\n    if (typeof value !== \"function\") value = constant(value);\n\n    for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n      var parent = parents[j],\n          group = groups[j],\n          groupLength = group.length,\n          data = value.call(parent, parent && parent.__data__, j, parents),\n          dataLength = data.length,\n          enterGroup = enter[j] = new Array(dataLength),\n          updateGroup = update[j] = new Array(dataLength),\n          exitGroup = exit[j] = new Array(groupLength);\n\n      bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n      // Now connect the enter nodes to their following update node, such that\n      // appendChild can insert the materialized enter node before this node,\n      // rather than at the end of the parent node.\n      for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n        if (previous = enterGroup[i0]) {\n          if (i0 >= i1) i1 = i0 + 1;\n          while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n          previous._next = next || null;\n        }\n      }\n    }\n\n    update = new Selection(update, parents);\n    update._enter = enter;\n    update._exit = exit;\n    return update;\n  }\n\n  function selection_exit() {\n    return new Selection(this._exit || this._groups.map(sparse), this._parents);\n  }\n\n  function selection_merge(selection) {\n\n    for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n      for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n        if (node = group0[i] || group1[i]) {\n          merge[i] = node;\n        }\n      }\n    }\n\n    for (; j < m0; ++j) {\n      merges[j] = groups0[j];\n    }\n\n    return new Selection(merges, this._parents);\n  }\n\n  function selection_order() {\n\n    for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n      for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n        if (node = group[i]) {\n          if (next && next !== node.nextSibling) next.parentNode.insertBefore(node, next);\n          next = node;\n        }\n      }\n    }\n\n    return this;\n  }\n\n  function selection_sort(compare) {\n    if (!compare) compare = ascending;\n\n    function compareNode(a, b) {\n      return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n    }\n\n    for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n      for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n        if (node = group[i]) {\n          sortgroup[i] = node;\n        }\n      }\n      sortgroup.sort(compareNode);\n    }\n\n    return new Selection(sortgroups, this._parents).order();\n  }\n\n  function ascending(a, b) {\n    return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n  }\n\n  function selection_call() {\n    var callback = arguments[0];\n    arguments[0] = this;\n    callback.apply(null, arguments);\n    return this;\n  }\n\n  function selection_nodes() {\n    var nodes = new Array(this.size()), i = -1;\n    this.each(function() { nodes[++i] = this; });\n    return nodes;\n  }\n\n  function selection_node() {\n\n    for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n      for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n        var node = group[i];\n        if (node) return node;\n      }\n    }\n\n    return null;\n  }\n\n  function selection_size() {\n    var size = 0;\n    this.each(function() { ++size; });\n    return size;\n  }\n\n  function selection_empty() {\n    return !this.node();\n  }\n\n  function selection_each(callback) {\n\n    for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n      for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n        if (node = group[i]) callback.call(node, node.__data__, i, group);\n      }\n    }\n\n    return this;\n  }\n\n  function attrRemove(name) {\n    return function() {\n      this.removeAttribute(name);\n    };\n  }\n\n  function attrRemoveNS(fullname) {\n    return function() {\n      this.removeAttributeNS(fullname.space, fullname.local);\n    };\n  }\n\n  function attrConstant(name, value) {\n    return function() {\n      this.setAttribute(name, value);\n    };\n  }\n\n  function attrConstantNS(fullname, value) {\n    return function() {\n      this.setAttributeNS(fullname.space, fullname.local, value);\n    };\n  }\n\n  function attrFunction(name, value) {\n    return function() {\n      var v = value.apply(this, arguments);\n      if (v == null) this.removeAttribute(name);\n      else this.setAttribute(name, v);\n    };\n  }\n\n  function attrFunctionNS(fullname, value) {\n    return function() {\n      var v = value.apply(this, arguments);\n      if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n      else this.setAttributeNS(fullname.space, fullname.local, v);\n    };\n  }\n\n  function selection_attr(name, value) {\n    var fullname = namespace(name);\n\n    if (arguments.length < 2) {\n      var node = this.node();\n      return fullname.local\n          ? node.getAttributeNS(fullname.space, fullname.local)\n          : node.getAttribute(fullname);\n    }\n\n    return this.each((value == null\n        ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n        ? (fullname.local ? attrFunctionNS : attrFunction)\n        : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n  }\n\n  function defaultView(node) {\n    return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n        || (node.document && node) // node is a Window\n        || node.defaultView; // node is a Document\n  }\n\n  function styleRemove(name) {\n    return function() {\n      this.style.removeProperty(name);\n    };\n  }\n\n  function styleConstant(name, value, priority) {\n    return function() {\n      this.style.setProperty(name, value, priority);\n    };\n  }\n\n  function styleFunction(name, value, priority) {\n    return function() {\n      var v = value.apply(this, arguments);\n      if (v == null) this.style.removeProperty(name);\n      else this.style.setProperty(name, v, priority);\n    };\n  }\n\n  function selection_style(name, value, priority) {\n    var node;\n    return arguments.length > 1\n        ? this.each((value == null\n              ? styleRemove : typeof value === \"function\"\n              ? styleFunction\n              : styleConstant)(name, value, priority == null ? \"\" : priority))\n        : defaultView(node = this.node())\n            .getComputedStyle(node, null)\n            .getPropertyValue(name);\n  }\n\n  function propertyRemove(name) {\n    return function() {\n      delete this[name];\n    };\n  }\n\n  function propertyConstant(name, value) {\n    return function() {\n      this[name] = value;\n    };\n  }\n\n  function propertyFunction(name, value) {\n    return function() {\n      var v = value.apply(this, arguments);\n      if (v == null) delete this[name];\n      else this[name] = v;\n    };\n  }\n\n  function selection_property(name, value) {\n    return arguments.length > 1\n        ? this.each((value == null\n            ? propertyRemove : typeof value === \"function\"\n            ? propertyFunction\n            : propertyConstant)(name, value))\n        : this.node()[name];\n  }\n\n  function classArray(string) {\n    return string.trim().split(/^|\\s+/);\n  }\n\n  function classList(node) {\n    return node.classList || new ClassList(node);\n  }\n\n  function ClassList(node) {\n    this._node = node;\n    this._names = classArray(node.getAttribute(\"class\") || \"\");\n  }\n\n  ClassList.prototype = {\n    add: function(name) {\n      var i = this._names.indexOf(name);\n      if (i < 0) {\n        this._names.push(name);\n        this._node.setAttribute(\"class\", this._names.join(\" \"));\n      }\n    },\n    remove: function(name) {\n      var i = this._names.indexOf(name);\n      if (i >= 0) {\n        this._names.splice(i, 1);\n        this._node.setAttribute(\"class\", this._names.join(\" \"));\n      }\n    },\n    contains: function(name) {\n      return this._names.indexOf(name) >= 0;\n    }\n  };\n\n  function classedAdd(node, names) {\n    var list = classList(node), i = -1, n = names.length;\n    while (++i < n) list.add(names[i]);\n  }\n\n  function classedRemove(node, names) {\n    var list = classList(node), i = -1, n = names.length;\n    while (++i < n) list.remove(names[i]);\n  }\n\n  function classedTrue(names) {\n    return function() {\n      classedAdd(this, names);\n    };\n  }\n\n  function classedFalse(names) {\n    return function() {\n      classedRemove(this, names);\n    };\n  }\n\n  function classedFunction(names, value) {\n    return function() {\n      (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n    };\n  }\n\n  function selection_classed(name, value) {\n    var names = classArray(name + \"\");\n\n    if (arguments.length < 2) {\n      var list = classList(this.node()), i = -1, n = names.length;\n      while (++i < n) if (!list.contains(names[i])) return false;\n      return true;\n    }\n\n    return this.each((typeof value === \"function\"\n        ? classedFunction : value\n        ? classedTrue\n        : classedFalse)(names, value));\n  }\n\n  function textRemove() {\n    this.textContent = \"\";\n  }\n\n  function textConstant(value) {\n    return function() {\n      this.textContent = value;\n    };\n  }\n\n  function textFunction(value) {\n    return function() {\n      var v = value.apply(this, arguments);\n      this.textContent = v == null ? \"\" : v;\n    };\n  }\n\n  function selection_text(value) {\n    return arguments.length\n        ? this.each(value == null\n            ? textRemove : (typeof value === \"function\"\n            ? textFunction\n            : textConstant)(value))\n        : this.node().textContent;\n  }\n\n  function htmlRemove() {\n    this.innerHTML = \"\";\n  }\n\n  function htmlConstant(value) {\n    return function() {\n      this.innerHTML = value;\n    };\n  }\n\n  function htmlFunction(value) {\n    return function() {\n      var v = value.apply(this, arguments);\n      this.innerHTML = v == null ? \"\" : v;\n    };\n  }\n\n  function selection_html(value) {\n    return arguments.length\n        ? this.each(value == null\n            ? htmlRemove : (typeof value === \"function\"\n            ? htmlFunction\n            : htmlConstant)(value))\n        : this.node().innerHTML;\n  }\n\n  function raise() {\n    if (this.nextSibling) this.parentNode.appendChild(this);\n  }\n\n  function selection_raise() {\n    return this.each(raise);\n  }\n\n  function lower() {\n    if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n  }\n\n  function selection_lower() {\n    return this.each(lower);\n  }\n\n  function selection_append(name) {\n    var create = typeof name === \"function\" ? name : creator(name);\n    return this.select(function() {\n      return this.appendChild(create.apply(this, arguments));\n    });\n  }\n\n  function constantNull() {\n    return null;\n  }\n\n  function selection_insert(name, before) {\n    var create = typeof name === \"function\" ? name : creator(name),\n        select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n    return this.select(function() {\n      return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n    });\n  }\n\n  function remove() {\n    var parent = this.parentNode;\n    if (parent) parent.removeChild(this);\n  }\n\n  function selection_remove() {\n    return this.each(remove);\n  }\n\n  function selection_datum(value) {\n    return arguments.length\n        ? this.property(\"__data__\", value)\n        : this.node().__data__;\n  }\n\n  function dispatchEvent(node, type, params) {\n    var window = defaultView(node),\n        event = window.CustomEvent;\n\n    if (event) {\n      event = new event(type, params);\n    } else {\n      event = window.document.createEvent(\"Event\");\n      if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n      else event.initEvent(type, false, false);\n    }\n\n    node.dispatchEvent(event);\n  }\n\n  function dispatchConstant(type, params) {\n    return function() {\n      return dispatchEvent(this, type, params);\n    };\n  }\n\n  function dispatchFunction(type, params) {\n    return function() {\n      return dispatchEvent(this, type, params.apply(this, arguments));\n    };\n  }\n\n  function selection_dispatch(type, params) {\n    return this.each((typeof params === \"function\"\n        ? dispatchFunction\n        : dispatchConstant)(type, params));\n  }\n\n  var root = [null];\n\n  function Selection(groups, parents) {\n    this._groups = groups;\n    this._parents = parents;\n  }\n\n  function selection() {\n    return new Selection([[document.documentElement]], root);\n  }\n\n  Selection.prototype = selection.prototype = {\n    constructor: Selection,\n    select: selection_select,\n    selectAll: selection_selectAll,\n    filter: selection_filter,\n    data: selection_data,\n    enter: selection_enter,\n    exit: selection_exit,\n    merge: selection_merge,\n    order: selection_order,\n    sort: selection_sort,\n    call: selection_call,\n    nodes: selection_nodes,\n    node: selection_node,\n    size: selection_size,\n    empty: selection_empty,\n    each: selection_each,\n    attr: selection_attr,\n    style: selection_style,\n    property: selection_property,\n    classed: selection_classed,\n    text: selection_text,\n    html: selection_html,\n    raise: selection_raise,\n    lower: selection_lower,\n    append: selection_append,\n    insert: selection_insert,\n    remove: selection_remove,\n    datum: selection_datum,\n    on: selection_on,\n    dispatch: selection_dispatch\n  };\n\n  function select(selector) {\n    return typeof selector === \"string\"\n        ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n        : new Selection([[selector]], root);\n  }\n\n  function selectAll(selector) {\n    return typeof selector === \"string\"\n        ? new Selection([document.querySelectorAll(selector)], [document.documentElement])\n        : new Selection([selector == null ? [] : selector], root);\n  }\n\n  function touch(node, touches, identifier) {\n    if (arguments.length < 3) identifier = touches, touches = sourceEvent().changedTouches;\n\n    for (var i = 0, n = touches ? touches.length : 0, touch; i < n; ++i) {\n      if ((touch = touches[i]).identifier === identifier) {\n        return point(node, touch);\n      }\n    }\n\n    return null;\n  }\n\n  function touches(node, touches) {\n    if (touches == null) touches = sourceEvent().touches;\n\n    for (var i = 0, n = touches ? touches.length : 0, points = new Array(n); i < n; ++i) {\n      points[i] = point(node, touches[i]);\n    }\n\n    return points;\n  }\n\n  exports.creator = creator;\n  exports.local = local;\n  exports.matcher = matcher$1;\n  exports.mouse = mouse;\n  exports.namespace = namespace;\n  exports.namespaces = namespaces;\n  exports.select = select;\n  exports.selectAll = selectAll;\n  exports.selection = selection;\n  exports.selector = selector;\n  exports.selectorAll = selectorAll;\n  exports.touch = touch;\n  exports.touches = touches;\n  exports.window = defaultView;\n  exports.customEvent = customEvent;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n}));","// https://d3js.org/d3-time-format/ Version 2.0.2. Copyright 2016 Mike Bostock.\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('d3-time')) :\n  typeof define === 'function' && define.amd ? define(['exports', 'd3-time'], factory) :\n  (factory((global.d3 = global.d3 || {}),global.d3));\n}(this, function (exports,d3Time) { 'use strict';\n\n  function localDate(d) {\n    if (0 <= d.y && d.y < 100) {\n      var date = new Date(-1, d.m, d.d, d.H, d.M, d.S, d.L);\n      date.setFullYear(d.y);\n      return date;\n    }\n    return new Date(d.y, d.m, d.d, d.H, d.M, d.S, d.L);\n  }\n\n  function utcDate(d) {\n    if (0 <= d.y && d.y < 100) {\n      var date = new Date(Date.UTC(-1, d.m, d.d, d.H, d.M, d.S, d.L));\n      date.setUTCFullYear(d.y);\n      return date;\n    }\n    return new Date(Date.UTC(d.y, d.m, d.d, d.H, d.M, d.S, d.L));\n  }\n\n  function newYear(y) {\n    return {y: y, m: 0, d: 1, H: 0, M: 0, S: 0, L: 0};\n  }\n\n  function formatLocale(locale) {\n    var locale_dateTime = locale.dateTime,\n        locale_date = locale.date,\n        locale_time = locale.time,\n        locale_periods = locale.periods,\n        locale_weekdays = locale.days,\n        locale_shortWeekdays = locale.shortDays,\n        locale_months = locale.months,\n        locale_shortMonths = locale.shortMonths;\n\n    var periodRe = formatRe(locale_periods),\n        periodLookup = formatLookup(locale_periods),\n        weekdayRe = formatRe(locale_weekdays),\n        weekdayLookup = formatLookup(locale_weekdays),\n        shortWeekdayRe = formatRe(locale_shortWeekdays),\n        shortWeekdayLookup = formatLookup(locale_shortWeekdays),\n        monthRe = formatRe(locale_months),\n        monthLookup = formatLookup(locale_months),\n        shortMonthRe = formatRe(locale_shortMonths),\n        shortMonthLookup = formatLookup(locale_shortMonths);\n\n    var formats = {\n      \"a\": formatShortWeekday,\n      \"A\": formatWeekday,\n      \"b\": formatShortMonth,\n      \"B\": formatMonth,\n      \"c\": null,\n      \"d\": formatDayOfMonth,\n      \"e\": formatDayOfMonth,\n      \"H\": formatHour24,\n      \"I\": formatHour12,\n      \"j\": formatDayOfYear,\n      \"L\": formatMilliseconds,\n      \"m\": formatMonthNumber,\n      \"M\": formatMinutes,\n      \"p\": formatPeriod,\n      \"S\": formatSeconds,\n      \"U\": formatWeekNumberSunday,\n      \"w\": formatWeekdayNumber,\n      \"W\": formatWeekNumberMonday,\n      \"x\": null,\n      \"X\": null,\n      \"y\": formatYear,\n      \"Y\": formatFullYear,\n      \"Z\": formatZone,\n      \"%\": formatLiteralPercent\n    };\n\n    var utcFormats = {\n      \"a\": formatUTCShortWeekday,\n      \"A\": formatUTCWeekday,\n      \"b\": formatUTCShortMonth,\n      \"B\": formatUTCMonth,\n      \"c\": null,\n      \"d\": formatUTCDayOfMonth,\n      \"e\": formatUTCDayOfMonth,\n      \"H\": formatUTCHour24,\n      \"I\": formatUTCHour12,\n      \"j\": formatUTCDayOfYear,\n      \"L\": formatUTCMilliseconds,\n      \"m\": formatUTCMonthNumber,\n      \"M\": formatUTCMinutes,\n      \"p\": formatUTCPeriod,\n      \"S\": formatUTCSeconds,\n      \"U\": formatUTCWeekNumberSunday,\n      \"w\": formatUTCWeekdayNumber,\n      \"W\": formatUTCWeekNumberMonday,\n      \"x\": null,\n      \"X\": null,\n      \"y\": formatUTCYear,\n      \"Y\": formatUTCFullYear,\n      \"Z\": formatUTCZone,\n      \"%\": formatLiteralPercent\n    };\n\n    var parses = {\n      \"a\": parseShortWeekday,\n      \"A\": parseWeekday,\n      \"b\": parseShortMonth,\n      \"B\": parseMonth,\n      \"c\": parseLocaleDateTime,\n      \"d\": parseDayOfMonth,\n      \"e\": parseDayOfMonth,\n      \"H\": parseHour24,\n      \"I\": parseHour24,\n      \"j\": parseDayOfYear,\n      \"L\": parseMilliseconds,\n      \"m\": parseMonthNumber,\n      \"M\": parseMinutes,\n      \"p\": parsePeriod,\n      \"S\": parseSeconds,\n      \"U\": parseWeekNumberSunday,\n      \"w\": parseWeekdayNumber,\n      \"W\": parseWeekNumberMonday,\n      \"x\": parseLocaleDate,\n      \"X\": parseLocaleTime,\n      \"y\": parseYear,\n      \"Y\": parseFullYear,\n      \"Z\": parseZone,\n      \"%\": parseLiteralPercent\n    };\n\n    // These recursive directive definitions must be deferred.\n    formats.x = newFormat(locale_date, formats);\n    formats.X = newFormat(locale_time, formats);\n    formats.c = newFormat(locale_dateTime, formats);\n    utcFormats.x = newFormat(locale_date, utcFormats);\n    utcFormats.X = newFormat(locale_time, utcFormats);\n    utcFormats.c = newFormat(locale_dateTime, utcFormats);\n\n    function newFormat(specifier, formats) {\n      return function(date) {\n        var string = [],\n            i = -1,\n            j = 0,\n            n = specifier.length,\n            c,\n            pad,\n            format;\n\n        if (!(date instanceof Date)) date = new Date(+date);\n\n        while (++i < n) {\n          if (specifier.charCodeAt(i) === 37) {\n            string.push(specifier.slice(j, i));\n            if ((pad = pads[c = specifier.charAt(++i)]) != null) c = specifier.charAt(++i);\n            else pad = c === \"e\" ? \" \" : \"0\";\n            if (format = formats[c]) c = format(date, pad);\n            string.push(c);\n            j = i + 1;\n          }\n        }\n\n        string.push(specifier.slice(j, i));\n        return string.join(\"\");\n      };\n    }\n\n    function newParse(specifier, newDate) {\n      return function(string) {\n        var d = newYear(1900),\n            i = parseSpecifier(d, specifier, string += \"\", 0);\n        if (i != string.length) return null;\n\n        // The am-pm flag is 0 for AM, and 1 for PM.\n        if (\"p\" in d) d.H = d.H % 12 + d.p * 12;\n\n        // Convert day-of-week and week-of-year to day-of-year.\n        if (\"W\" in d || \"U\" in d) {\n          if (!(\"w\" in d)) d.w = \"W\" in d ? 1 : 0;\n          var day = \"Z\" in d ? utcDate(newYear(d.y)).getUTCDay() : newDate(newYear(d.y)).getDay();\n          d.m = 0;\n          d.d = \"W\" in d ? (d.w + 6) % 7 + d.W * 7 - (day + 5) % 7 : d.w + d.U * 7 - (day + 6) % 7;\n        }\n\n        // If a time zone is specified, all fields are interpreted as UTC and then\n        // offset according to the specified time zone.\n        if (\"Z\" in d) {\n          d.H += d.Z / 100 | 0;\n          d.M += d.Z % 100;\n          return utcDate(d);\n        }\n\n        // Otherwise, all fields are in local time.\n        return newDate(d);\n      };\n    }\n\n    function parseSpecifier(d, specifier, string, j) {\n      var i = 0,\n          n = specifier.length,\n          m = string.length,\n          c,\n          parse;\n\n      while (i < n) {\n        if (j >= m) return -1;\n        c = specifier.charCodeAt(i++);\n        if (c === 37) {\n          c = specifier.charAt(i++);\n          parse = parses[c in pads ? specifier.charAt(i++) : c];\n          if (!parse || ((j = parse(d, string, j)) < 0)) return -1;\n        } else if (c != string.charCodeAt(j++)) {\n          return -1;\n        }\n      }\n\n      return j;\n    }\n\n    function parsePeriod(d, string, i) {\n      var n = periodRe.exec(string.slice(i));\n      return n ? (d.p = periodLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n    }\n\n    function parseShortWeekday(d, string, i) {\n      var n = shortWeekdayRe.exec(string.slice(i));\n      return n ? (d.w = shortWeekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n    }\n\n    function parseWeekday(d, string, i) {\n      var n = weekdayRe.exec(string.slice(i));\n      return n ? (d.w = weekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n    }\n\n    function parseShortMonth(d, string, i) {\n      var n = shortMonthRe.exec(string.slice(i));\n      return n ? (d.m = shortMonthLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n    }\n\n    function parseMonth(d, string, i) {\n      var n = monthRe.exec(string.slice(i));\n      return n ? (d.m = monthLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n    }\n\n    function parseLocaleDateTime(d, string, i) {\n      return parseSpecifier(d, locale_dateTime, string, i);\n    }\n\n    function parseLocaleDate(d, string, i) {\n      return parseSpecifier(d, locale_date, string, i);\n    }\n\n    function parseLocaleTime(d, string, i) {\n      return parseSpecifier(d, locale_time, string, i);\n    }\n\n    function formatShortWeekday(d) {\n      return locale_shortWeekdays[d.getDay()];\n    }\n\n    function formatWeekday(d) {\n      return locale_weekdays[d.getDay()];\n    }\n\n    function formatShortMonth(d) {\n      return locale_shortMonths[d.getMonth()];\n    }\n\n    function formatMonth(d) {\n      return locale_months[d.getMonth()];\n    }\n\n    function formatPeriod(d) {\n      return locale_periods[+(d.getHours() >= 12)];\n    }\n\n    function formatUTCShortWeekday(d) {\n      return locale_shortWeekdays[d.getUTCDay()];\n    }\n\n    function formatUTCWeekday(d) {\n      return locale_weekdays[d.getUTCDay()];\n    }\n\n    function formatUTCShortMonth(d) {\n      return locale_shortMonths[d.getUTCMonth()];\n    }\n\n    function formatUTCMonth(d) {\n      return locale_months[d.getUTCMonth()];\n    }\n\n    function formatUTCPeriod(d) {\n      return locale_periods[+(d.getUTCHours() >= 12)];\n    }\n\n    return {\n      format: function(specifier) {\n        var f = newFormat(specifier += \"\", formats);\n        f.toString = function() { return specifier; };\n        return f;\n      },\n      parse: function(specifier) {\n        var p = newParse(specifier += \"\", localDate);\n        p.toString = function() { return specifier; };\n        return p;\n      },\n      utcFormat: function(specifier) {\n        var f = newFormat(specifier += \"\", utcFormats);\n        f.toString = function() { return specifier; };\n        return f;\n      },\n      utcParse: function(specifier) {\n        var p = newParse(specifier, utcDate);\n        p.toString = function() { return specifier; };\n        return p;\n      }\n    };\n  }\n\n  var pads = {\"-\": \"\", \"_\": \" \", \"0\": \"0\"};\n  var numberRe = /^\\s*\\d+/;\n  var percentRe = /^%/;\n  var requoteRe = /[\\\\\\^\\$\\*\\+\\?\\|\\[\\]\\(\\)\\.\\{\\}]/g;\n  function pad(value, fill, width) {\n    var sign = value < 0 ? \"-\" : \"\",\n        string = (sign ? -value : value) + \"\",\n        length = string.length;\n    return sign + (length < width ? new Array(width - length + 1).join(fill) + string : string);\n  }\n\n  function requote(s) {\n    return s.replace(requoteRe, \"\\\\$&\");\n  }\n\n  function formatRe(names) {\n    return new RegExp(\"^(?:\" + names.map(requote).join(\"|\") + \")\", \"i\");\n  }\n\n  function formatLookup(names) {\n    var map = {}, i = -1, n = names.length;\n    while (++i < n) map[names[i].toLowerCase()] = i;\n    return map;\n  }\n\n  function parseWeekdayNumber(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 1));\n    return n ? (d.w = +n[0], i + n[0].length) : -1;\n  }\n\n  function parseWeekNumberSunday(d, string, i) {\n    var n = numberRe.exec(string.slice(i));\n    return n ? (d.U = +n[0], i + n[0].length) : -1;\n  }\n\n  function parseWeekNumberMonday(d, string, i) {\n    var n = numberRe.exec(string.slice(i));\n    return n ? (d.W = +n[0], i + n[0].length) : -1;\n  }\n\n  function parseFullYear(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 4));\n    return n ? (d.y = +n[0], i + n[0].length) : -1;\n  }\n\n  function parseYear(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 2));\n    return n ? (d.y = +n[0] + (+n[0] > 68 ? 1900 : 2000), i + n[0].length) : -1;\n  }\n\n  function parseZone(d, string, i) {\n    var n = /^(Z)|([+-]\\d\\d)(?:\\:?(\\d\\d))?/.exec(string.slice(i, i + 6));\n    return n ? (d.Z = n[1] ? 0 : -(n[2] + (n[3] || \"00\")), i + n[0].length) : -1;\n  }\n\n  function parseMonthNumber(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 2));\n    return n ? (d.m = n[0] - 1, i + n[0].length) : -1;\n  }\n\n  function parseDayOfMonth(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 2));\n    return n ? (d.d = +n[0], i + n[0].length) : -1;\n  }\n\n  function parseDayOfYear(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 3));\n    return n ? (d.m = 0, d.d = +n[0], i + n[0].length) : -1;\n  }\n\n  function parseHour24(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 2));\n    return n ? (d.H = +n[0], i + n[0].length) : -1;\n  }\n\n  function parseMinutes(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 2));\n    return n ? (d.M = +n[0], i + n[0].length) : -1;\n  }\n\n  function parseSeconds(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 2));\n    return n ? (d.S = +n[0], i + n[0].length) : -1;\n  }\n\n  function parseMilliseconds(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 3));\n    return n ? (d.L = +n[0], i + n[0].length) : -1;\n  }\n\n  function parseLiteralPercent(d, string, i) {\n    var n = percentRe.exec(string.slice(i, i + 1));\n    return n ? i + n[0].length : -1;\n  }\n\n  function formatDayOfMonth(d, p) {\n    return pad(d.getDate(), p, 2);\n  }\n\n  function formatHour24(d, p) {\n    return pad(d.getHours(), p, 2);\n  }\n\n  function formatHour12(d, p) {\n    return pad(d.getHours() % 12 || 12, p, 2);\n  }\n\n  function formatDayOfYear(d, p) {\n    return pad(1 + d3Time.timeDay.count(d3Time.timeYear(d), d), p, 3);\n  }\n\n  function formatMilliseconds(d, p) {\n    return pad(d.getMilliseconds(), p, 3);\n  }\n\n  function formatMonthNumber(d, p) {\n    return pad(d.getMonth() + 1, p, 2);\n  }\n\n  function formatMinutes(d, p) {\n    return pad(d.getMinutes(), p, 2);\n  }\n\n  function formatSeconds(d, p) {\n    return pad(d.getSeconds(), p, 2);\n  }\n\n  function formatWeekNumberSunday(d, p) {\n    return pad(d3Time.timeSunday.count(d3Time.timeYear(d), d), p, 2);\n  }\n\n  function formatWeekdayNumber(d) {\n    return d.getDay();\n  }\n\n  function formatWeekNumberMonday(d, p) {\n    return pad(d3Time.timeMonday.count(d3Time.timeYear(d), d), p, 2);\n  }\n\n  function formatYear(d, p) {\n    return pad(d.getFullYear() % 100, p, 2);\n  }\n\n  function formatFullYear(d, p) {\n    return pad(d.getFullYear() % 10000, p, 4);\n  }\n\n  function formatZone(d) {\n    var z = d.getTimezoneOffset();\n    return (z > 0 ? \"-\" : (z *= -1, \"+\"))\n        + pad(z / 60 | 0, \"0\", 2)\n        + pad(z % 60, \"0\", 2);\n  }\n\n  function formatUTCDayOfMonth(d, p) {\n    return pad(d.getUTCDate(), p, 2);\n  }\n\n  function formatUTCHour24(d, p) {\n    return pad(d.getUTCHours(), p, 2);\n  }\n\n  function formatUTCHour12(d, p) {\n    return pad(d.getUTCHours() % 12 || 12, p, 2);\n  }\n\n  function formatUTCDayOfYear(d, p) {\n    return pad(1 + d3Time.utcDay.count(d3Time.utcYear(d), d), p, 3);\n  }\n\n  function formatUTCMilliseconds(d, p) {\n    return pad(d.getUTCMilliseconds(), p, 3);\n  }\n\n  function formatUTCMonthNumber(d, p) {\n    return pad(d.getUTCMonth() + 1, p, 2);\n  }\n\n  function formatUTCMinutes(d, p) {\n    return pad(d.getUTCMinutes(), p, 2);\n  }\n\n  function formatUTCSeconds(d, p) {\n    return pad(d.getUTCSeconds(), p, 2);\n  }\n\n  function formatUTCWeekNumberSunday(d, p) {\n    return pad(d3Time.utcSunday.count(d3Time.utcYear(d), d), p, 2);\n  }\n\n  function formatUTCWeekdayNumber(d) {\n    return d.getUTCDay();\n  }\n\n  function formatUTCWeekNumberMonday(d, p) {\n    return pad(d3Time.utcMonday.count(d3Time.utcYear(d), d), p, 2);\n  }\n\n  function formatUTCYear(d, p) {\n    return pad(d.getUTCFullYear() % 100, p, 2);\n  }\n\n  function formatUTCFullYear(d, p) {\n    return pad(d.getUTCFullYear() % 10000, p, 4);\n  }\n\n  function formatUTCZone() {\n    return \"+0000\";\n  }\n\n  function formatLiteralPercent() {\n    return \"%\";\n  }\n\n  var locale;\n  defaultLocale({\n    dateTime: \"%x, %X\",\n    date: \"%-m/%-d/%Y\",\n    time: \"%-I:%M:%S %p\",\n    periods: [\"AM\", \"PM\"],\n    days: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\n    shortDays: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n    months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n    shortMonths: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\n  });\n\n  function defaultLocale(definition) {\n    locale = formatLocale(definition);\n    exports.timeFormat = locale.format;\n    exports.timeParse = locale.parse;\n    exports.utcFormat = locale.utcFormat;\n    exports.utcParse = locale.utcParse;\n    return locale;\n  }\n\n  var isoSpecifier = \"%Y-%m-%dT%H:%M:%S.%LZ\";\n\n  function formatIsoNative(date) {\n    return date.toISOString();\n  }\n\n  var formatIso = Date.prototype.toISOString\n      ? formatIsoNative\n      : exports.utcFormat(isoSpecifier);\n\n  function parseIsoNative(string) {\n    var date = new Date(string);\n    return isNaN(date) ? null : date;\n  }\n\n  var parseIso = +new Date(\"2000-01-01T00:00:00.000Z\")\n      ? parseIsoNative\n      : exports.utcParse(isoSpecifier);\n\n  exports.timeFormatDefaultLocale = defaultLocale;\n  exports.timeFormatLocale = formatLocale;\n  exports.isoFormat = formatIso;\n  exports.isoParse = parseIso;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n}));","// https://d3js.org/d3-time/ Version 1.0.2. Copyright 2016 Mike Bostock.\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (factory((global.d3 = global.d3 || {})));\n}(this, function (exports) { 'use strict';\n\n  var t0 = new Date;\n  var t1 = new Date;\n  function newInterval(floori, offseti, count, field) {\n\n    function interval(date) {\n      return floori(date = new Date(+date)), date;\n    }\n\n    interval.floor = interval;\n\n    interval.ceil = function(date) {\n      return floori(date = new Date(date - 1)), offseti(date, 1), floori(date), date;\n    };\n\n    interval.round = function(date) {\n      var d0 = interval(date),\n          d1 = interval.ceil(date);\n      return date - d0 < d1 - date ? d0 : d1;\n    };\n\n    interval.offset = function(date, step) {\n      return offseti(date = new Date(+date), step == null ? 1 : Math.floor(step)), date;\n    };\n\n    interval.range = function(start, stop, step) {\n      var range = [];\n      start = interval.ceil(start);\n      step = step == null ? 1 : Math.floor(step);\n      if (!(start < stop) || !(step > 0)) return range; // also handles Invalid Date\n      do range.push(new Date(+start)); while (offseti(start, step), floori(start), start < stop)\n      return range;\n    };\n\n    interval.filter = function(test) {\n      return newInterval(function(date) {\n        while (floori(date), !test(date)) date.setTime(date - 1);\n      }, function(date, step) {\n        while (--step >= 0) while (offseti(date, 1), !test(date));\n      });\n    };\n\n    if (count) {\n      interval.count = function(start, end) {\n        t0.setTime(+start), t1.setTime(+end);\n        floori(t0), floori(t1);\n        return Math.floor(count(t0, t1));\n      };\n\n      interval.every = function(step) {\n        step = Math.floor(step);\n        return !isFinite(step) || !(step > 0) ? null\n            : !(step > 1) ? interval\n            : interval.filter(field\n                ? function(d) { return field(d) % step === 0; }\n                : function(d) { return interval.count(0, d) % step === 0; });\n      };\n    }\n\n    return interval;\n  }\n\n  var millisecond = newInterval(function() {\n    // noop\n  }, function(date, step) {\n    date.setTime(+date + step);\n  }, function(start, end) {\n    return end - start;\n  });\n\n  // An optimized implementation for this simple case.\n  millisecond.every = function(k) {\n    k = Math.floor(k);\n    if (!isFinite(k) || !(k > 0)) return null;\n    if (!(k > 1)) return millisecond;\n    return newInterval(function(date) {\n      date.setTime(Math.floor(date / k) * k);\n    }, function(date, step) {\n      date.setTime(+date + step * k);\n    }, function(start, end) {\n      return (end - start) / k;\n    });\n  };\n\n  var milliseconds = millisecond.range;\n\n  var durationSecond = 1e3;\n  var durationMinute = 6e4;\n  var durationHour = 36e5;\n  var durationDay = 864e5;\n  var durationWeek = 6048e5;\n\n  var second = newInterval(function(date) {\n    date.setTime(Math.floor(date / durationSecond) * durationSecond);\n  }, function(date, step) {\n    date.setTime(+date + step * durationSecond);\n  }, function(start, end) {\n    return (end - start) / durationSecond;\n  }, function(date) {\n    return date.getUTCSeconds();\n  });\n\n  var seconds = second.range;\n\n  var minute = newInterval(function(date) {\n    date.setTime(Math.floor(date / durationMinute) * durationMinute);\n  }, function(date, step) {\n    date.setTime(+date + step * durationMinute);\n  }, function(start, end) {\n    return (end - start) / durationMinute;\n  }, function(date) {\n    return date.getMinutes();\n  });\n\n  var minutes = minute.range;\n\n  var hour = newInterval(function(date) {\n    var offset = date.getTimezoneOffset() * durationMinute % durationHour;\n    if (offset < 0) offset += durationHour;\n    date.setTime(Math.floor((+date - offset) / durationHour) * durationHour + offset);\n  }, function(date, step) {\n    date.setTime(+date + step * durationHour);\n  }, function(start, end) {\n    return (end - start) / durationHour;\n  }, function(date) {\n    return date.getHours();\n  });\n\n  var hours = hour.range;\n\n  var day = newInterval(function(date) {\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setDate(date.getDate() + step);\n  }, function(start, end) {\n    return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationDay;\n  }, function(date) {\n    return date.getDate() - 1;\n  });\n\n  var days = day.range;\n\n  function weekday(i) {\n    return newInterval(function(date) {\n      date.setDate(date.getDate() - (date.getDay() + 7 - i) % 7);\n      date.setHours(0, 0, 0, 0);\n    }, function(date, step) {\n      date.setDate(date.getDate() + step * 7);\n    }, function(start, end) {\n      return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationWeek;\n    });\n  }\n\n  var sunday = weekday(0);\n  var monday = weekday(1);\n  var tuesday = weekday(2);\n  var wednesday = weekday(3);\n  var thursday = weekday(4);\n  var friday = weekday(5);\n  var saturday = weekday(6);\n\n  var sundays = sunday.range;\n  var mondays = monday.range;\n  var tuesdays = tuesday.range;\n  var wednesdays = wednesday.range;\n  var thursdays = thursday.range;\n  var fridays = friday.range;\n  var saturdays = saturday.range;\n\n  var month = newInterval(function(date) {\n    date.setDate(1);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setMonth(date.getMonth() + step);\n  }, function(start, end) {\n    return end.getMonth() - start.getMonth() + (end.getFullYear() - start.getFullYear()) * 12;\n  }, function(date) {\n    return date.getMonth();\n  });\n\n  var months = month.range;\n\n  var year = newInterval(function(date) {\n    date.setMonth(0, 1);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setFullYear(date.getFullYear() + step);\n  }, function(start, end) {\n    return end.getFullYear() - start.getFullYear();\n  }, function(date) {\n    return date.getFullYear();\n  });\n\n  // An optimized implementation for this simple case.\n  year.every = function(k) {\n    return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : newInterval(function(date) {\n      date.setFullYear(Math.floor(date.getFullYear() / k) * k);\n      date.setMonth(0, 1);\n      date.setHours(0, 0, 0, 0);\n    }, function(date, step) {\n      date.setFullYear(date.getFullYear() + step * k);\n    });\n  };\n\n  var years = year.range;\n\n  var utcMinute = newInterval(function(date) {\n    date.setUTCSeconds(0, 0);\n  }, function(date, step) {\n    date.setTime(+date + step * durationMinute);\n  }, function(start, end) {\n    return (end - start) / durationMinute;\n  }, function(date) {\n    return date.getUTCMinutes();\n  });\n\n  var utcMinutes = utcMinute.range;\n\n  var utcHour = newInterval(function(date) {\n    date.setUTCMinutes(0, 0, 0);\n  }, function(date, step) {\n    date.setTime(+date + step * durationHour);\n  }, function(start, end) {\n    return (end - start) / durationHour;\n  }, function(date) {\n    return date.getUTCHours();\n  });\n\n  var utcHours = utcHour.range;\n\n  var utcDay = newInterval(function(date) {\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCDate(date.getUTCDate() + step);\n  }, function(start, end) {\n    return (end - start) / durationDay;\n  }, function(date) {\n    return date.getUTCDate() - 1;\n  });\n\n  var utcDays = utcDay.range;\n\n  function utcWeekday(i) {\n    return newInterval(function(date) {\n      date.setUTCDate(date.getUTCDate() - (date.getUTCDay() + 7 - i) % 7);\n      date.setUTCHours(0, 0, 0, 0);\n    }, function(date, step) {\n      date.setUTCDate(date.getUTCDate() + step * 7);\n    }, function(start, end) {\n      return (end - start) / durationWeek;\n    });\n  }\n\n  var utcSunday = utcWeekday(0);\n  var utcMonday = utcWeekday(1);\n  var utcTuesday = utcWeekday(2);\n  var utcWednesday = utcWeekday(3);\n  var utcThursday = utcWeekday(4);\n  var utcFriday = utcWeekday(5);\n  var utcSaturday = utcWeekday(6);\n\n  var utcSundays = utcSunday.range;\n  var utcMondays = utcMonday.range;\n  var utcTuesdays = utcTuesday.range;\n  var utcWednesdays = utcWednesday.range;\n  var utcThursdays = utcThursday.range;\n  var utcFridays = utcFriday.range;\n  var utcSaturdays = utcSaturday.range;\n\n  var utcMonth = newInterval(function(date) {\n    date.setUTCDate(1);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCMonth(date.getUTCMonth() + step);\n  }, function(start, end) {\n    return end.getUTCMonth() - start.getUTCMonth() + (end.getUTCFullYear() - start.getUTCFullYear()) * 12;\n  }, function(date) {\n    return date.getUTCMonth();\n  });\n\n  var utcMonths = utcMonth.range;\n\n  var utcYear = newInterval(function(date) {\n    date.setUTCMonth(0, 1);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCFullYear(date.getUTCFullYear() + step);\n  }, function(start, end) {\n    return end.getUTCFullYear() - start.getUTCFullYear();\n  }, function(date) {\n    return date.getUTCFullYear();\n  });\n\n  // An optimized implementation for this simple case.\n  utcYear.every = function(k) {\n    return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : newInterval(function(date) {\n      date.setUTCFullYear(Math.floor(date.getUTCFullYear() / k) * k);\n      date.setUTCMonth(0, 1);\n      date.setUTCHours(0, 0, 0, 0);\n    }, function(date, step) {\n      date.setUTCFullYear(date.getUTCFullYear() + step * k);\n    });\n  };\n\n  var utcYears = utcYear.range;\n\n  exports.timeInterval = newInterval;\n  exports.timeMillisecond = millisecond;\n  exports.timeMilliseconds = milliseconds;\n  exports.utcMillisecond = millisecond;\n  exports.utcMilliseconds = milliseconds;\n  exports.timeSecond = second;\n  exports.timeSeconds = seconds;\n  exports.utcSecond = second;\n  exports.utcSeconds = seconds;\n  exports.timeMinute = minute;\n  exports.timeMinutes = minutes;\n  exports.timeHour = hour;\n  exports.timeHours = hours;\n  exports.timeDay = day;\n  exports.timeDays = days;\n  exports.timeWeek = sunday;\n  exports.timeWeeks = sundays;\n  exports.timeSunday = sunday;\n  exports.timeSundays = sundays;\n  exports.timeMonday = monday;\n  exports.timeMondays = mondays;\n  exports.timeTuesday = tuesday;\n  exports.timeTuesdays = tuesdays;\n  exports.timeWednesday = wednesday;\n  exports.timeWednesdays = wednesdays;\n  exports.timeThursday = thursday;\n  exports.timeThursdays = thursdays;\n  exports.timeFriday = friday;\n  exports.timeFridays = fridays;\n  exports.timeSaturday = saturday;\n  exports.timeSaturdays = saturdays;\n  exports.timeMonth = month;\n  exports.timeMonths = months;\n  exports.timeYear = year;\n  exports.timeYears = years;\n  exports.utcMinute = utcMinute;\n  exports.utcMinutes = utcMinutes;\n  exports.utcHour = utcHour;\n  exports.utcHours = utcHours;\n  exports.utcDay = utcDay;\n  exports.utcDays = utcDays;\n  exports.utcWeek = utcSunday;\n  exports.utcWeeks = utcSundays;\n  exports.utcSunday = utcSunday;\n  exports.utcSundays = utcSundays;\n  exports.utcMonday = utcMonday;\n  exports.utcMondays = utcMondays;\n  exports.utcTuesday = utcTuesday;\n  exports.utcTuesdays = utcTuesdays;\n  exports.utcWednesday = utcWednesday;\n  exports.utcWednesdays = utcWednesdays;\n  exports.utcThursday = utcThursday;\n  exports.utcThursdays = utcThursdays;\n  exports.utcFriday = utcFriday;\n  exports.utcFridays = utcFridays;\n  exports.utcSaturday = utcSaturday;\n  exports.utcSaturdays = utcSaturdays;\n  exports.utcMonth = utcMonth;\n  exports.utcMonths = utcMonths;\n  exports.utcYear = utcYear;\n  exports.utcYears = utcYears;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n}));"]}