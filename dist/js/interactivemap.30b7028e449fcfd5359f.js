!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){switch(Se.modify.mode=B.default.Control.ModifyFeature.RESHAPE,this.value){case"reshape":Se.modify.mode=B.default.Control.ModifyFeature.RESHAPE;break;case"rotate":Se.modify.mode=B.default.Control.ModifyFeature.ROTATE;break;case"scale":Se.modify.mode|=B.default.Control.ModifyFeature.RESIZE,Se.modify.mode&=~B.default.Control.ModifyFeature.RESHAPE;break;case"skew":Se.modify.mode|=B.default.Control.ModifyFeature.RESIZE;break;case"drag":Se.modify.mode=B.default.Control.ModifyFeature.DRAG}var e=Se.modify.feature;e&&(Se.modify.unselectFeature(e),Se.modify.selectFeature(e))}function s(){var e,t=Object.keys(fe);(0,P.default)("#toolbar").hide();for(var n in Se)e=Se[n],this.value==n&&this.checked?(e.activate(),he.updateSize(),t.indexOf(n)!=-1&&((0,P.default)("#toolbar").show(),o(n))):(e.deactivate(),t.indexOf(n)!=-1);"modify"==this.value&&Ce.selectedFeatures.length&&Se.modify.selectFeature(Ce.selectedFeatures[0])}function o(e){k=e,(0,P.default)(".tool-radiobutton").checkboxradio("refresh"),(0,P.default)(".tool-setting").hide(),(0,P.default)("."+e+"-tool-group").css("display","inline-block")}function a(e){return function(t){var n=this.map.getResolution(),i=Math.round((t.left-this.maxExtent.left)/(n*this.tileSize.w)),r=Math.round((this.maxExtent.top-t.top)/(n*this.tileSize.h)),s=he.getZoom(),o=s+"/tile_"+i+"_"+r+"."+this.type,a=this.url;return a instanceof Array&&(a=this.selectUrl(o,a)),a+e+"/"+o}}function l(){var e=(0,W.getParameterByName)("id");e&&(P.default.get("save/"+e+".json",function(e){var t=new B.default.Format.GeoJSON;Ce.addFeatures(t.read(e))}),he.zoomTo(parseInt(t)));var t=(0,W.getParameterByName)("zoom");t&&he.zoomTo(parseInt(t));var n=(0,W.getParameterByName)("x"),i=(0,W.getParameterByName)("y");if(n&&i){var r=ue(n,i);he.setCenter(new B.default.LonLat(r.x,r.y),void 0,!1,!1)}var s=(0,W.getParameterByName)("BaseLayer");if(s)for(var o=0;o<ce.length;o++){var a=ce[o],l=a.name.replace(/ /g,"");if(s===l){he.setBaseLayer(a);break}}}function u(e){(0,P.default)("#"+e+"-stroke-width").spinner({min:1,step:1,change:function(t,n){var i=parseInt(this.value);isNaN(i)?i=parseInt(fe[e].strokeWidth):fe[e].strokeWidth=i,(0,P.default)(this).val(i)},stop:function(t,n){var i=parseInt(this.value);isNaN(i)||(fe[e].strokeWidth=i)}}).val(fe[e].strokeWidth)}function h(e,t){var n=t?"fill":"stroke",i=document.querySelector("#"+e+"-"+n+"-opacity-icon .opacity-preview-icon");(0,P.default)("#"+e+"-"+n+"-opacity").percentspinner({min:0,max:100,step:1,change:function(t,r){var s=parseInt(this.value);isNaN(s)?s=parseInt(100*fe[e][n+"Opacity"]):(fe[e][n+"Opacity"]=s/100,i.style.opacity=fe[e][n+"Opacity"]),(0,P.default)(this).val((0,Y.formatPercent)(s))},spin:function(e,t){i.style.opacity=t.value/100},stop:function(t,r){var s=parseInt(this.value);isNaN(s)||(fe[e][n+"Opacity"]=s/100,i.style.opacity=fe[e][n+"Opacity"])}}).val((0,Y.formatPercent)(100*fe[e][n+"Opacity"]))}function c(e,t){var n=t?"fill":"stroke",i=document.getElementById(e+"-"+n+"-color-preview"),r=new U.default(document.getElementById(e+"-"+n+"-color-picker"));r.set(fe[e][n+"Color"]),r.on("enter",function(){var e="#"+this._HSV2HEX(this.set());i.title=e,i.style.backgroundColor=e}),r.on("change",function(t){this.target.value="#"+t,i.style.backgroundColor="#"+t,fe[e][n+"Color"]="#"+t}),r.on("exit",function(){this.target.value=i.title}),(0,P.default)(i).click(function(){r.visible||r.enter()});var s=document.createElement("button");s.innerHTML="Close",s.className="color-picker-close tool-button",s.addEventListener("click",function(){r.exit()},!1),r.picker.appendChild(s)}function p(e,t,n){(0,P.default)("#"+e+"-"+t).degreespinner({min:0,max:360,step:1,change:function(t,i){var r=parseInt(this.value);isNaN(r)?r=parseInt(de[e][n]):(de[e][n]=r,y(e,n,r)),(0,P.default)(this).val((0,Y.formatDegree)(r))},stop:function(t,i){var r=parseInt(this.value);isNaN(r)||(de[e][n]=r,y(e,n,r))}}).val((0,Y.formatDegree)(de[e][n]))}function d(e,t,n,i,r,s){var r=r||"spinner",s=s||f;(0,P.default)("#"+e+"-"+t)[r](B.default.Util.extend({change:function(t,i){var r=parseInt(this.value);isNaN(r)?r=parseInt(de[e][n]):(de[e][n]=r,y(e,n,r)),(0,P.default)(this).val(s(r))},stop:function(t,i){var r=parseInt(this.value);isNaN(r)||(de[e][n]=r,y(e,n,r))}},i)).val(s(de[e][n]))}function f(e){return e}function y(e,t,n){var i={};i[t]=n,Se[e].handler.setOptions(i)}function m(e){return B.default.Util.applyDefaults({},fe[e])}function g(e){return{getPointRadius:function(t){return(t.attributes.style?t.attributes.style.pointRadius:m(e).pointRadius)/he.getResolution()},getStrokeWidth:function(t){return(t.attributes.style?t.attributes.style.strokeWidth:m(e).strokeWidth)/he.getResolution()},getStrokeColor:function(t){return t.attributes.style?t.attributes.style.strokeColor:m(e).strokeColor},getStrokeOpacity:function(t){return t.attributes.style?t.attributes.style.strokeOpacity:m(e).strokeOpacity}}}function v(e){return{getFillColor:function(t){return t.attributes.style?t.attributes.style.fillColor:m(e).fillColor},getFillOpacity:function(t){return t.attributes.style?t.attributes.style.fillOpacity:m(e).fillOpacity}}}function L(e){b(document.getElementById("measure-distance"),e.order,e.units,e.measure)}function b(e,t,n,i){var r=(0,q.calculateDistance)(ae,t,n,i),s="";s+=1==t?r.toFixed(0)+" units":r.toFixed(0)+" units<sup>2</sup>",e.value=s}function O(e){return function(t){Se[e].active&&(t.feature.attributes.style=m(e))}}function x(e){document.getElementById("draw-undo").disabled=!1,document.getElementById("draw-redo").disabled=!1}function w(e){document.getElementById("draw-undo").disabled=!0,document.getElementById("draw-redo").disabled=!0}function C(e){(0,P.default)("#controls-container").addClass("minimized"),e&&e.preventDefault()}function E(){return(window.innerWidth>0?window.innerWidth:screen.width)<=768}function S(){Se.selectfeature.unselectAll(),ke.undo()}function _(){Se.selectfeature.unselectAll(),ke.redo()}function T(){var e=Se.modify.feature;e&&(Se.modify.unselectFeature(e),Ce.removeFeatures([e]))}var k,M=n(1),P=i(M),N=n(2),D=(i(N),n(27)),I=(i(D),n(28)),A=(i(I),n(7)),R=(i(A),n(4)),F=(i(R),n(30)),z=(i(F),n(31)),U=i(z),H=n(32),B=i(H),j=n(33),G=i(j),W=n(34),q=n(35),V=n(36),X=i(V),Y=n(37),Z=n(38),$=i(Z),K=n(49),Q=i(K),J=n(50),ee=i(J),te="images/",ne="/media/images/map/687/",ie=16384,re=16384,se=[-8475.58617377,9327.49124559],oe=[9028.52473332,-8836.61406266],ae=Math.abs(se[1]-se[0])/ie,le=q.latLonToWorld.bind(null,se,oe,ie,re),ue=q.worldToLatLon.bind(null,se,oe,ie,re),he=new B.default.Map("map",{theme:null,maxExtent:new B.default.Bounds(0,0,ie,re),numZoomLevels:5,maxResolution:Math.pow(2,4),units:"m",controls:[new B.default.Control.Navigation,new B.default.Control.Zoom({zoomInId:"zoom-in",zoomOutId:"zoom-out"})]}),ce=[new B.default.Layer.TMS("Default",ne,{type:"jpg",getURL:a("default")}),new B.default.Layer.TMS("Desert",ne,{type:"jpg",getURL:a("desert")}),new B.default.Layer.TMS("Immortal Gardens",ne,{type:"jpg",getURL:a("immortalgardens")})],pe=new X.default({ascending:!1},function(e){var t=e.buttonElement;t===this.maximizeDiv&&(B.default.Element.removeClass(this.div,"minimized"),E()&&C())}),de={regularpolygon:{snapAngle:15,sides:4,radius:1e3}},fe={brush:{strokeWidth:50,strokeColor:"#ff0000",strokeOpacity:1,pointRadius:1,fillColor:"#ff0000"},icon:{externalGraphic:"",graphicHeight:512,graphicOpacity:1},line:{strokeWidth:25,strokeColor:"#00ff00",strokeOpacity:1,pointRadius:1,fillColor:"#00ff00"},polygon:{strokeWidth:10,strokeColor:"#0000ff",strokeOpacity:1,pointRadius:1,fillColor:"#ff00ff",fillOpacity:.5},regularpolygon:{strokeWidth:20,strokeColor:"#00ffff",strokeOpacity:1,pointRadius:1,fillColor:"#aa00ff",fillOpacity:1},modify:{strokeWidth:2,strokeColor:"#ff0000",strokeOpacity:1,pointRadius:50,fillColor:"#ff0000",graphicName:"cross"},selectfeature:{strokeWidth:2,strokeColor:"#ff0000",strokeOpacity:1,pointRadius:50,fillColor:"#ff0000",graphicName:"cross"},measure:{strokeWidth:2,strokeColor:"#ff0000",strokeOpacity:1,pointRadius:50,fillColor:"#ff0000",graphicName:"cross"}},ye=["brush","line","polygon","regularpolygon"],me=B.default.Util.getParameters(window.location.href).renderer,ge="save.php";ye.forEach(function(e){u(e),h(e),c(e)}),h("polygon",!0),c("polygon",!0),h("regularpolygon",!0),c("regularpolygon",!0),p("regularpolygon","snap-angle","snapAngle"),d("regularpolygon","side-count","sides",{min:3,step:1}),d("regularpolygon","radius","radius",{min:1,step:1}),(0,P.default)("#regularpolygon-snap").checkboxradio({icon:!1}).change(function(){var e,t="regularpolygon",n="snapAngle";this.checked?(e=(0,P.default)(this).data("snapAngle"),(0,P.default)("#regularpolygon-snap-angle").degreespinner("enable")):(e=null,(0,P.default)(this).data("snapAngle",de[t][n]),de[t][n]=null,(0,P.default)("#regularpolygon-snap-angle").degreespinner("disable")),de[t][n]=e,y(t,n,e)}).data("snapAngle",de.regularpolygon.snapAngle),(0,P.default)("#regularpolygon-fixed-radius").checkboxradio({icon:!1}).change(function(){var e,t="regularpolygon",n="radius";this.checked?(e=(0,P.default)(this).data("radius"),(0,P.default)("#regularpolygon-radius").spinner("enable"),(0,P.default)("#regularpolygon-irregular").prop("checked",!1).checkboxradio("refresh"),y("regularpolygon","irregular",!1)):(e=null,(0,P.default)(this).data("radius",de[t][n]),de[t][n]=null,(0,P.default)("#regularpolygon-radius").spinner("disable")),de[t][n]=e,y(t,n,e)}).data("radius",de.regularpolygon.radius),(0,P.default)("#regularpolygon-irregular").checkboxradio({icon:!1}).change(function(){var e="regularpolygon",t="irregular",n=this.checked;this.checked&&((0,P.default)("#regularpolygon-fixed-radius").prop("checked",!1).checkboxradio("refresh"),(0,P.default)("#regularpolygon-radius").spinner("disable")),y(e,t,n)}),(0,P.default)("#marker-size").spinner({min:32,step:32,change:function(e,t){var n=parseInt(this.value);isNaN(n)?n=parseInt(fe.icon.graphicHeight):fe.icon.graphicHeight=n,(0,P.default)(this).val(n)},stop:function(e,t){var n=parseInt(this.value);isNaN(n)||(fe.icon.graphicHeight=n)}}).val(fe.icon.graphicHeight);var ve=document.querySelector("#marker-opacity-icon .opacity-preview-icon");(0,P.default)("#marker-opacity").percentspinner({min:0,max:100,step:1,change:function(e,t){var n=parseInt(this.value);isNaN(n)?n=parseInt(100*fe.icon.graphicOpacity):(fe.icon.graphicOpacity=n/100,ve.style.opacity=fe.icon.graphicOpacity),(0,P.default)(this).val((0,Y.formatPercent)(n))},spin:function(e,t){ve.style.opacity=t.value/100},stop:function(e,t){var n=parseInt(this.value);isNaN(n)||(fe.icon.graphicOpacity=n/100,ve.style.opacity=fe.icon.graphicOpacity)}}).val((0,Y.formatPercent)(100*fe.icon.graphicOpacity)),P.default.getJSON("sprite_manifest.json",function(e){function t(e,t){var n=(0,P.default)("<div>").addClass("selectmenu-icon "+e);n.click(function(){fe.icon.externalGraphic=t,(0,P.default)("#marker-image-dropdown").val(t).iconselectmenu("refresh")}),s.prepend(n)}for(var n="/media/images/miniheroes/",i=0;i<e.heroes.length;i++){var r=(0,P.default)('<option value="'+n+e.heroes[i].file+'">').text(e.heroes[i].name).attr("data-class","miniheroes-sprite-"+e.heroes[i].id);(0,P.default)("#marker-image-dropdown").append(r)}for(var i=0;i<e.other.length;i++){var r=(0,P.default)('<option value="'+n+e.other[i].file+'">').text(e.other[i].name).attr("data-class","miniheroes-sprite-"+e.other[i].id);(0,P.default)("#marker-image-dropdown").append(r)}var s=(0,P.default)("#marker-list");(0,P.default)("#marker-image-dropdown").iconselectmenu({change:function(e,n){fe.icon.externalGraphic=n.item.value;var i=n.item.element.attr("data-class"),r=!1;if(s.children().each(function(e){if((0,P.default)(this).hasClass(i))return(0,P.default)(this).prependTo("#marker-list"),r=!0,!1}),!r){t(i,n.item.value);for(var o=s.children().length;o>10;)(0,P.default)("div:last-child",s).remove(),o--}}}),fe.icon.externalGraphic=(0,P.default)("#marker-image-dropdown > option")[0].value,t((0,P.default)("#marker-image-dropdown > option").attr("data-class"),fe.icon.externalGraphic)}),B.default.Event.observe(document,"keydown",function(e){var t=!1;switch(e.keyCode){case 90:(e.metaKey||e.ctrlKey)&&(S(),t=!0);break;case 89:(e.metaKey||e.ctrlKey)&&(_(),t=!0);break;case 27:t=!0;break;case 46:"modify"==k&&T()}t&&B.default.Event.stop(e)}),B.default.ImgPath=te,ce.forEach(function(e){he.addLayer(e)});var Le={brush:g("brush"),line:g("line"),polygon:B.default.Util.extend(g("polygon"),v("polygon")),regularpolygon:B.default.Util.extend(g("regularpolygon"),v("regularpolygon")),icon:{getGraphicHeight:function(e){return(e.attributes.style?e.attributes.style.graphicHeight:m("icon").graphicHeight)/he.getResolution()},getGraphicOpacity:function(e){return e.attributes.style?e.attributes.style.graphicOpacity:m("icon").graphicOpacity},getGraphicYOffset:function(e){var t=m("icon").externalGraphic;return t.indexOf("ward_sentry")==-1&&t.indexOf("ward_observer")==-1?-m("icon").graphicHeight/he.getResolution()/2:-m("icon").graphicHeight/he.getResolution()},getExternalGraphic:function(e){return e.attributes.style?e.attributes.style.externalGraphic:m("icon").externalGraphic}},modify:B.default.Util.extend(g("modify"),{getGraphicName:function(e){return e.attributes.style?e.attributes.style.graphicName:m("modify").graphicName},getExternalGraphic:function(e){return""}})},be={brush:{pointRadius:"${getPointRadius}",strokeWidth:"${getStrokeWidth}",strokeColor:"${getStrokeColor}",strokeOpacity:"${getStrokeOpacity}"},line:{pointRadius:"${getPointRadius}",strokeWidth:"${getStrokeWidth}",strokeColor:"${getStrokeColor}",strokeOpacity:"${getStrokeOpacity}"},polygon:{pointRadius:"${getPointRadius}",strokeWidth:"${getStrokeWidth}",strokeColor:"${getStrokeColor}",strokeOpacity:"${getStrokeOpacity}",fillColor:"${getFillColor}",fillOpacity:"${getFillOpacity}"},regularpolygon:{pointRadius:"${getPointRadius}",strokeWidth:"${getStrokeWidth}",strokeColor:"${getStrokeColor}",strokeOpacity:"${getStrokeOpacity}",fillColor:"${getFillColor}",fillOpacity:"${getFillOpacity}"},icon:{graphicOpacity:"${getGraphicOpacity}",externalGraphic:"${getExternalGraphic}",graphicYOffset:"${getGraphicYOffset}",graphicHeight:"${getGraphicHeight}"},modify:{pointRadius:"${getPointRadius}",strokeWidth:"${getStrokeWidth}",strokeColor:"${getStrokeColor}",strokeOpacity:"${getStrokeOpacity}",externalGraphic:"${getExternalGraphic}",graphicName:"${getGraphicName}"}},Oe={select:B.default.Feature.Vector.style.select,virtual:{strokeColor:"#ee9900",fillColor:"#ee9900",strokeOpacity:.3,strokeWidth:2,pointRadius:8,fillOpacity:.3,graphicName:"circle"},vertex:new B.default.Style(B.default.Util.applyDefaults({strokeWidth:2,pointRadius:8,graphicName:"circle",externalGraphic:""},B.default.Feature.Vector.style.default),{extendDefault:!1})};for(var xe in fe)fe.hasOwnProperty(xe)&&(Oe[xe]=new B.default.Style(be[xe],{context:Le[xe]}));var we=0;Oe.default=new B.default.Style({pointRadius:"${getPointRadius}",strokeWidth:"${getStrokeWidth}",strokeColor:"${getStrokeColor}",strokeOpacity:"${getStrokeOpacity}",fillColor:"${getFillColor}",fillOpacity:"${getFillOpacity}",graphicOpacity:"${getGraphicOpacity}",externalGraphic:"${getExternalGraphic}",graphicYOffset:"${getGraphicYOffset}",graphicHeight:"${getGraphicHeight}",graphicName:"${getGraphicName}",graphicZIndex:"${getGraphicZIndex}"},{extendDefault:!0,context:{getPointRadius:function(e){return(e.attributes.style?e.attributes.style.pointRadius:m(k).pointRadius)/he.getResolution()},getStrokeWidth:function(e){return(e.attributes.style?e.attributes.style.strokeWidth:m(k).strokeWidth)/he.getResolution()},getStrokeColor:function(e){return e.attributes.style?e.attributes.style.strokeColor:m(k).strokeColor},getStrokeOpacity:function(e){return e.attributes.style?e.attributes.style.strokeOpacity:m(k).strokeOpacity},getFillColor:function(e){return e.attributes.style?e.attributes.style.fillColor:m(k).fillColor},getFillOpacity:function(e){return e.attributes.style?e.attributes.style.fillOpacity:m(k).fillOpacity},getGraphicHeight:function(e){return e.attributes.style?e.attributes.style.graphicHeight/he.getResolution():m(k).graphicHeight?m(k).graphicHeight/he.getResolution():B.default.Feature.Vector.style.default.graphicHeight},getGraphicOpacity:function(e){return e.attributes.style?e.attributes.style.graphicOpacity:m(k).graphicOpacity},getGraphicYOffset:function(e){if(e.attributes.style)var t=e.attributes.style.externalGraphic,n=e.attributes.style.graphicHeight;else{if(!m(k).getGraphicYOffset)return B.default.Feature.Vector.style.default.getGraphicYOffset;var t=m(k).externalGraphic,n=m(k).graphicHeight}return t&&n?t.indexOf("ward_sentry")==-1&&t.indexOf("ward_observer")==-1?-n/he.getResolution()/2:-n/he.getResolution():B.default.Feature.Vector.style.default.getGraphicYOffset},getExternalGraphic:function(e){return e.attributes.style?e.attributes.style.externalGraphic:m(k).externalGraphic?m(k).externalGraphic:B.default.Feature.Vector.style.default.externalGraphic},getGraphicName:function(e){return e.attributes.style?e.attributes.style.graphicName:m(k).graphicName?m(k).graphicName:B.default.Feature.Vector.style.default.graphicName},getGraphicZIndex:function(e){return e.attributes.hasOwnProperty("zIndex")?e.attributes.zIndex:(e.attributes.zIndex=++we,e.attributes.zIndex)}}}),me=me?[me]:B.default.Layer.Vector.prototype.renderers;var Ce=new B.default.Layer.Vector("Canvas",{styleMap:new B.default.StyleMap({default:Oe.default,select:Oe.select,vertex:Oe.vertex}),rendererOptions:{zIndexing:!0},renderers:["Canvas"]});he.addLayer(Ce);var Ee=new B.default.Control.MousePosition;Ee.formatOutput=function(e){var t=le(e.lon,e.lat);return t.x.toFixed(0)+", "+t.y.toFixed(0)},he.addControl(Ee),he.addControl(new B.default.Control.TouchNavigation({dragPanOptions:{enableKinetic:!0}})),he.addControl(new B.default.Control.KeyboardDefaults),he.addControl(pe),pe.maximizeControl(),he.getCenter()||he.zoomToMaxExtent();var Se={brush:new B.default.Control.DrawFeature(Ce,B.default.Handler.Path,{handlerOptions:{freehand:!0,layerOptions:{styleMap:new B.default.StyleMap(Oe.brush)}}}),icon:new B.default.Control.DrawFeature(Ce,B.default.Handler.Point,{handlerOptions:{layerOptions:{styleMap:new B.default.StyleMap(Oe.icon)}}}),line:new B.default.Control.DrawFeature(Ce,B.default.Handler.Path,{handlerOptions:{freehand:!1,layerOptions:{styleMap:new B.default.StyleMap(Oe.line)}}}),polygon:new B.default.Control.DrawFeature(Ce,B.default.Handler.Polygon,{handlerOptions:{layerOptions:{styleMap:new B.default.StyleMap(Oe.polygon)}}}),regularpolygon:new B.default.Control.DrawFeature(Ce,B.default.Handler.RegularPolygon,{handlerOptions:B.default.Util.extend(de.regularpolygon,{layerOptions:{styleMap:new B.default.StyleMap(Oe.regularpolygon)}})}),modify:new B.default.Control.ModifyFeature(Ce,{vertexRenderIntent:"vertex",virtualStyle:Oe.virtual}),selectfeature:new B.default.Control.SelectFeature(Ce),measure:new B.default.Control.Measure(B.default.Handler.Path,{persist:!0,immediate:!0})};(0,P.default)("#measure-cancel").click(function(){Se.measure.cancel(),(0,P.default)("#measure-distance").val("")}),Se.measure.events.register("measurepartial",Se.measure,L),Se.measure.events.register("measure",Se.measure,L);var _e={brush:O("brush"),icon:O("icon"),line:O("line"),polygon:O("polygon"),regularpolygon:O("regularpolygon")};for(var Te in Se)he.addControl(Se[Te]),"modify"==Te?(Ce.events.register("beforefeaturemodified",Se[Te],w),Ce.events.register("afterfeaturemodified",Se[Te],x)):Ce.events.register("sketchcomplete",Se[Te],_e[Te]);var ke=new G.default([Ce]);he.addControl(ke);var Me=new $.default(he,Ce,document.getElementById("export"),ne);he.addControl(Me);var Pe=new Q.default(he,Ce,document.getElementById("share"),ne);he.addControl(Pe);var Ne=new ee.default(he,Ce,document.getElementById("save"),ge);he.addControl(Ne);var De=new B.default.Control.Measure(B.default.Handler.Path);he.addControl(De),Ce.events.register("featureselected",Se.selectfeature,function(e){if(e.feature.geometry.CLASS_NAME.indexOf("LineString")>-1){var t=De.getBestLength(e.feature.geometry);b(document.getElementById("selectfeature-distance"),1,t[1],t[0])}}),he.events.register("zoomend",he,function(){(0,W.setQueryString)("zoom",he.zoom)}),he.events.register("moveend",he,function(){var e=le(he.center.lon,he.center.lat);(0,W.setQueryString)("x",e.x.toFixed(0)),(0,W.setQueryString)("y",e.y.toFixed(0))}),document.getElementById("controls-max").addEventListener("click",function(e){(0,P.default)("#controls-container").removeClass("minimized"),E()&&pe.minimizeControl(),e&&e.preventDefault()},!1),document.getElementById("controls-min").addEventListener("click",C,!1),E()&&(C.call(document.getElementById("controls-min")),pe.minimizeControl()),(0,P.default)(".tool-radiobutton").checkboxradio({icon:!1}).change(s),(0,P.default)("#map-tools").controlgroup({direction:"vertical"}),(0,P.default)(".modify-tool-radiobutton").checkboxradio({icon:!1}).change(r),(0,P.default)(".tool-radiogroup").controlgroup(),Ce.redoStack=[],(0,P.default)("#draw-undo").click(S),(0,P.default)("#draw-redo").click(_),(0,P.default)("#modify-delete").click(T),(0,P.default)(document).tooltip(),l(),(0,P.default)(".controls-container").show(),(0,P.default)(".link-modal").dialog({autoOpen:!1,modal:!0,width:"auto",buttons:{Ok:function(){(0,P.default)(this).dialog("close")}}})},function(e,t,n){var i,r;/*!
	 * jQuery JavaScript Library v3.1.1
	 * https://jquery.com/
	 *
	 * Includes Sizzle.js
	 * https://sizzlejs.com/
	 *
	 * Copyright jQuery Foundation and other contributors
	 * Released under the MIT license
	 * https://jquery.org/license
	 *
	 * Date: 2016-09-22T22:30Z
	 */
!function(t,n){"use strict";"object"==typeof e&&"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,function(n,s){"use strict";function o(e,t){t=t||se;var n=t.createElement("script");n.text=e,t.head.appendChild(n).parentNode.removeChild(n)}function a(e){var t=!!e&&"length"in e&&e.length,n=ve.type(e);return"function"!==n&&!ve.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function l(e,t,n){return ve.isFunction(t)?ve.grep(e,function(e,i){return!!t.call(e,i,e)!==n}):t.nodeType?ve.grep(e,function(e){return e===t!==n}):"string"!=typeof t?ve.grep(e,function(e){return he.call(t,e)>-1!==n}):Te.test(t)?ve.filter(t,e,n):(t=ve.filter(t,e),ve.grep(e,function(e){return he.call(t,e)>-1!==n&&1===e.nodeType}))}function u(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function h(e){var t={};return ve.each(e.match(Ie)||[],function(e,n){t[n]=!0}),t}function c(e){return e}function p(e){throw e}function d(e,t,n){var i;try{e&&ve.isFunction(i=e.promise)?i.call(e).done(t).fail(n):e&&ve.isFunction(i=e.then)?i.call(e,t,n):t.call(void 0,e)}catch(e){n.call(void 0,e)}}function f(){se.removeEventListener("DOMContentLoaded",f),n.removeEventListener("load",f),ve.ready()}function y(){this.expando=ve.expando+y.uid++}function m(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:Be.test(e)?JSON.parse(e):e)}function g(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(je,"-$&").toLowerCase(),n=e.getAttribute(i),"string"==typeof n){try{n=m(n)}catch(e){}He.set(e,t,n)}else n=void 0;return n}function v(e,t,n,i){var r,s=1,o=20,a=i?function(){return i.cur()}:function(){return ve.css(e,t,"")},l=a(),u=n&&n[3]||(ve.cssNumber[t]?"":"px"),h=(ve.cssNumber[t]||"px"!==u&&+l)&&We.exec(ve.css(e,t));if(h&&h[3]!==u){u=u||h[3],n=n||[],h=+l||1;do s=s||".5",h/=s,ve.style(e,t,h+u);while(s!==(s=a()/l)&&1!==s&&--o)}return n&&(h=+h||+l||0,r=n[1]?h+(n[1]+1)*n[2]:+n[2],i&&(i.unit=u,i.start=h,i.end=r)),r}function L(e){var t,n=e.ownerDocument,i=e.nodeName,r=Ye[i];return r?r:(t=n.body.appendChild(n.createElement(i)),r=ve.css(t,"display"),t.parentNode.removeChild(t),"none"===r&&(r="block"),Ye[i]=r,r)}function b(e,t){for(var n,i,r=[],s=0,o=e.length;s<o;s++)i=e[s],i.style&&(n=i.style.display,t?("none"===n&&(r[s]=Ue.get(i,"display")||null,r[s]||(i.style.display="")),""===i.style.display&&Ve(i)&&(r[s]=L(i))):"none"!==n&&(r[s]="none",Ue.set(i,"display",n)));for(s=0;s<o;s++)null!=r[s]&&(e[s].style.display=r[s]);return e}function O(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&ve.nodeName(e,t)?ve.merge([e],n):n}function x(e,t){for(var n=0,i=e.length;n<i;n++)Ue.set(e[n],"globalEval",!t||Ue.get(t[n],"globalEval"))}function w(e,t,n,i,r){for(var s,o,a,l,u,h,c=t.createDocumentFragment(),p=[],d=0,f=e.length;d<f;d++)if(s=e[d],s||0===s)if("object"===ve.type(s))ve.merge(p,s.nodeType?[s]:s);else if(Je.test(s)){for(o=o||c.appendChild(t.createElement("div")),a=($e.exec(s)||["",""])[1].toLowerCase(),l=Qe[a]||Qe._default,o.innerHTML=l[1]+ve.htmlPrefilter(s)+l[2],h=l[0];h--;)o=o.lastChild;ve.merge(p,o.childNodes),o=c.firstChild,o.textContent=""}else p.push(t.createTextNode(s));for(c.textContent="",d=0;s=p[d++];)if(i&&ve.inArray(s,i)>-1)r&&r.push(s);else if(u=ve.contains(s.ownerDocument,s),o=O(c.appendChild(s),"script"),u&&x(o),n)for(h=0;s=o[h++];)Ke.test(s.type||"")&&n.push(s);return c}function C(){return!0}function E(){return!1}function S(){try{return se.activeElement}catch(e){}}function _(e,t,n,i,r,s){var o,a;if("object"==typeof t){"string"!=typeof n&&(i=i||n,n=void 0);for(a in t)_(e,a,n,i,t[a],s);return e}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),r===!1)r=E;else if(!r)return e;return 1===s&&(o=r,r=function(e){return ve().off(e),o.apply(this,arguments)},r.guid=o.guid||(o.guid=ve.guid++)),e.each(function(){ve.event.add(this,t,r,i,n)})}function T(e,t){return ve.nodeName(e,"table")&&ve.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e:e}function k(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function M(e){var t=at.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function P(e,t){var n,i,r,s,o,a,l,u;if(1===t.nodeType){if(Ue.hasData(e)&&(s=Ue.access(e),o=Ue.set(t,s),u=s.events)){delete o.handle,o.events={};for(r in u)for(n=0,i=u[r].length;n<i;n++)ve.event.add(t,r,u[r][n])}He.hasData(e)&&(a=He.access(e),l=ve.extend({},a),He.set(t,l))}}function N(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Ze.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function D(e,t,n,i){t=le.apply([],t);var r,s,a,l,u,h,c=0,p=e.length,d=p-1,f=t[0],y=ve.isFunction(f);if(y||p>1&&"string"==typeof f&&!me.checkClone&&ot.test(f))return e.each(function(r){var s=e.eq(r);y&&(t[0]=f.call(this,r,s.html())),D(s,t,n,i)});if(p&&(r=w(t,e[0].ownerDocument,!1,e,i),s=r.firstChild,1===r.childNodes.length&&(r=s),s||i)){for(a=ve.map(O(r,"script"),k),l=a.length;c<p;c++)u=r,c!==d&&(u=ve.clone(u,!0,!0),l&&ve.merge(a,O(u,"script"))),n.call(e[c],u,c);if(l)for(h=a[a.length-1].ownerDocument,ve.map(a,M),c=0;c<l;c++)u=a[c],Ke.test(u.type||"")&&!Ue.access(u,"globalEval")&&ve.contains(h,u)&&(u.src?ve._evalUrl&&ve._evalUrl(u.src):o(u.textContent.replace(lt,""),h))}return e}function I(e,t,n){for(var i,r=t?ve.filter(t,e):e,s=0;null!=(i=r[s]);s++)n||1!==i.nodeType||ve.cleanData(O(i)),i.parentNode&&(n&&ve.contains(i.ownerDocument,i)&&x(O(i,"script")),i.parentNode.removeChild(i));return e}function A(e,t,n){var i,r,s,o,a=e.style;return n=n||ct(e),n&&(o=n.getPropertyValue(t)||n[t],""!==o||ve.contains(e.ownerDocument,e)||(o=ve.style(e,t)),!me.pixelMarginRight()&&ht.test(o)&&ut.test(t)&&(i=a.width,r=a.minWidth,s=a.maxWidth,a.minWidth=a.maxWidth=a.width=o,o=n.width,a.width=i,a.minWidth=r,a.maxWidth=s)),void 0!==o?o+"":o}function R(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function F(e){if(e in mt)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=yt.length;n--;)if(e=yt[n]+t,e in mt)return e}function z(e,t,n){var i=We.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function U(e,t,n,i,r){var s,o=0;for(s=n===(i?"border":"content")?4:"width"===t?1:0;s<4;s+=2)"margin"===n&&(o+=ve.css(e,n+qe[s],!0,r)),i?("content"===n&&(o-=ve.css(e,"padding"+qe[s],!0,r)),"margin"!==n&&(o-=ve.css(e,"border"+qe[s]+"Width",!0,r))):(o+=ve.css(e,"padding"+qe[s],!0,r),"padding"!==n&&(o+=ve.css(e,"border"+qe[s]+"Width",!0,r)));return o}function H(e,t,n){var i,r=!0,s=ct(e),o="border-box"===ve.css(e,"boxSizing",!1,s);if(e.getClientRects().length&&(i=e.getBoundingClientRect()[t]),i<=0||null==i){if(i=A(e,t,s),(i<0||null==i)&&(i=e.style[t]),ht.test(i))return i;r=o&&(me.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+U(e,t,n||(o?"border":"content"),r,s)+"px"}function B(e,t,n,i,r){return new B.prototype.init(e,t,n,i,r)}function j(){vt&&(n.requestAnimationFrame(j),ve.fx.tick())}function G(){return n.setTimeout(function(){gt=void 0}),gt=ve.now()}function W(e,t){var n,i=0,r={height:e};for(t=t?1:0;i<4;i+=2-t)n=qe[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function q(e,t,n){for(var i,r=(Y.tweeners[t]||[]).concat(Y.tweeners["*"]),s=0,o=r.length;s<o;s++)if(i=r[s].call(n,t,e))return i}function V(e,t,n){var i,r,s,o,a,l,u,h,c="width"in t||"height"in t,p=this,d={},f=e.style,y=e.nodeType&&Ve(e),m=Ue.get(e,"fxshow");n.queue||(o=ve._queueHooks(e,"fx"),null==o.unqueued&&(o.unqueued=0,a=o.empty.fire,o.empty.fire=function(){o.unqueued||a()}),o.unqueued++,p.always(function(){p.always(function(){o.unqueued--,ve.queue(e,"fx").length||o.empty.fire()})}));for(i in t)if(r=t[i],Lt.test(r)){if(delete t[i],s=s||"toggle"===r,r===(y?"hide":"show")){if("show"!==r||!m||void 0===m[i])continue;y=!0}d[i]=m&&m[i]||ve.style(e,i)}if(l=!ve.isEmptyObject(t),l||!ve.isEmptyObject(d)){c&&1===e.nodeType&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],u=m&&m.display,null==u&&(u=Ue.get(e,"display")),h=ve.css(e,"display"),"none"===h&&(u?h=u:(b([e],!0),u=e.style.display||u,h=ve.css(e,"display"),b([e]))),("inline"===h||"inline-block"===h&&null!=u)&&"none"===ve.css(e,"float")&&(l||(p.done(function(){f.display=u}),null==u&&(h=f.display,u="none"===h?"":h)),f.display="inline-block")),n.overflow&&(f.overflow="hidden",p.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]})),l=!1;for(i in d)l||(m?"hidden"in m&&(y=m.hidden):m=Ue.access(e,"fxshow",{display:u}),s&&(m.hidden=!y),y&&b([e],!0),p.done(function(){y||b([e]),Ue.remove(e,"fxshow");for(i in d)ve.style(e,i,d[i])})),l=q(y?m[i]:0,i,p),i in m||(m[i]=l.start,y&&(l.end=l.start,l.start=0))}}function X(e,t){var n,i,r,s,o;for(n in e)if(i=ve.camelCase(n),r=t[i],s=e[n],ve.isArray(s)&&(r=s[1],s=e[n]=s[0]),n!==i&&(e[i]=s,delete e[n]),o=ve.cssHooks[i],o&&"expand"in o){s=o.expand(s),delete e[i];for(n in s)n in e||(e[n]=s[n],t[n]=r)}else t[i]=r}function Y(e,t,n){var i,r,s=0,o=Y.prefilters.length,a=ve.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=gt||G(),n=Math.max(0,u.startTime+u.duration-t),i=n/u.duration||0,s=1-i,o=0,l=u.tweens.length;o<l;o++)u.tweens[o].run(s);return a.notifyWith(e,[u,s,n]),s<1&&l?n:(a.resolveWith(e,[u]),!1)},u=a.promise({elem:e,props:ve.extend({},t),opts:ve.extend(!0,{specialEasing:{},easing:ve.easing._default},n),originalProperties:t,originalOptions:n,startTime:gt||G(),duration:n.duration,tweens:[],createTween:function(t,n){var i=ve.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(i),i},stop:function(t){var n=0,i=t?u.tweens.length:0;if(r)return this;for(r=!0;n<i;n++)u.tweens[n].run(1);return t?(a.notifyWith(e,[u,1,0]),a.resolveWith(e,[u,t])):a.rejectWith(e,[u,t]),this}}),h=u.props;for(X(h,u.opts.specialEasing);s<o;s++)if(i=Y.prefilters[s].call(u,e,h,u.opts))return ve.isFunction(i.stop)&&(ve._queueHooks(u.elem,u.opts.queue).stop=ve.proxy(i.stop,i)),i;return ve.map(h,q,u),ve.isFunction(u.opts.start)&&u.opts.start.call(e,u),ve.fx.timer(ve.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function Z(e){var t=e.match(Ie)||[];return t.join(" ")}function $(e){return e.getAttribute&&e.getAttribute("class")||""}function K(e,t,n,i){var r;if(ve.isArray(t))ve.each(t,function(t,r){n||Mt.test(e)?i(e,r):K(e+"["+("object"==typeof r&&null!=r?t:"")+"]",r,n,i)});else if(n||"object"!==ve.type(t))i(e,t);else for(r in t)K(e+"["+r+"]",t[r],n,i)}function Q(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,s=t.toLowerCase().match(Ie)||[];if(ve.isFunction(n))for(;i=s[r++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function J(e,t,n,i){function r(a){var l;return s[a]=!0,ve.each(e[a]||[],function(e,a){var u=a(t,n,i);return"string"!=typeof u||o||s[u]?o?!(l=u):void 0:(t.dataTypes.unshift(u),r(u),!1)}),l}var s={},o=e===jt;return r(t.dataTypes[0])||!s["*"]&&r("*")}function ee(e,t){var n,i,r=ve.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((r[n]?e:i||(i={}))[n]=t[n]);return i&&ve.extend(!0,e,i),e}function te(e,t,n){for(var i,r,s,o,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(r in a)if(a[r]&&a[r].test(i)){l.unshift(r);break}if(l[0]in n)s=l[0];else{for(r in n){if(!l[0]||e.converters[r+" "+l[0]]){s=r;break}o||(o=r)}s=s||o}if(s)return s!==l[0]&&l.unshift(s),n[s]}function ne(e,t,n,i){var r,s,o,a,l,u={},h=e.dataTypes.slice();if(h[1])for(o in e.converters)u[o.toLowerCase()]=e.converters[o];for(s=h.shift();s;)if(e.responseFields[s]&&(n[e.responseFields[s]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=s,s=h.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(o=u[l+" "+s]||u["* "+s],!o)for(r in u)if(a=r.split(" "),a[1]===s&&(o=u[l+" "+a[0]]||u["* "+a[0]])){o===!0?o=u[r]:u[r]!==!0&&(s=a[0],h.unshift(a[1]));break}if(o!==!0)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+l+" to "+s}}}return{state:"success",data:t}}function ie(e){return ve.isWindow(e)?e:9===e.nodeType&&e.defaultView}var re=[],se=n.document,oe=Object.getPrototypeOf,ae=re.slice,le=re.concat,ue=re.push,he=re.indexOf,ce={},pe=ce.toString,de=ce.hasOwnProperty,fe=de.toString,ye=fe.call(Object),me={},ge="3.1.1",ve=function(e,t){return new ve.fn.init(e,t)},Le=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,be=/^-ms-/,Oe=/-([a-z])/g,xe=function(e,t){return t.toUpperCase()};ve.fn=ve.prototype={jquery:ge,constructor:ve,length:0,toArray:function(){return ae.call(this)},get:function(e){return null==e?ae.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=ve.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return ve.each(this,e)},map:function(e){return this.pushStack(ve.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(ae.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:ue,sort:re.sort,splice:re.splice},ve.extend=ve.fn.extend=function(){var e,t,n,i,r,s,o=arguments[0]||{},a=1,l=arguments.length,u=!1;for("boolean"==typeof o&&(u=o,o=arguments[a]||{},a++),"object"==typeof o||ve.isFunction(o)||(o={}),a===l&&(o=this,a--);a<l;a++)if(null!=(e=arguments[a]))for(t in e)n=o[t],i=e[t],o!==i&&(u&&i&&(ve.isPlainObject(i)||(r=ve.isArray(i)))?(r?(r=!1,s=n&&ve.isArray(n)?n:[]):s=n&&ve.isPlainObject(n)?n:{},o[t]=ve.extend(u,s,i)):void 0!==i&&(o[t]=i));return o},ve.extend({expando:"jQuery"+(ge+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===ve.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=ve.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==pe.call(e))&&(!(t=oe(e))||(n=de.call(t,"constructor")&&t.constructor,"function"==typeof n&&fe.call(n)===ye))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?ce[pe.call(e)]||"object":typeof e},globalEval:function(e){o(e)},camelCase:function(e){return e.replace(be,"ms-").replace(Oe,xe)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var n,i=0;if(a(e))for(n=e.length;i<n&&t.call(e[i],i,e[i])!==!1;i++);else for(i in e)if(t.call(e[i],i,e[i])===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(Le,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(a(Object(e))?ve.merge(n,"string"==typeof e?[e]:e):ue.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:he.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;i<n;i++)e[r++]=t[i];return e.length=r,e},grep:function(e,t,n){for(var i,r=[],s=0,o=e.length,a=!n;s<o;s++)i=!t(e[s],s),i!==a&&r.push(e[s]);return r},map:function(e,t,n){var i,r,s=0,o=[];if(a(e))for(i=e.length;s<i;s++)r=t(e[s],s,n),null!=r&&o.push(r);else for(s in e)r=t(e[s],s,n),null!=r&&o.push(r);return le.apply([],o)},guid:1,proxy:function(e,t){var n,i,r;if("string"==typeof t&&(n=e[t],t=e,e=n),ve.isFunction(e))return i=ae.call(arguments,2),r=function(){return e.apply(t||this,i.concat(ae.call(arguments)))},r.guid=e.guid=e.guid||ve.guid++,r},now:Date.now,support:me}),"function"==typeof Symbol&&(ve.fn[Symbol.iterator]=re[Symbol.iterator]),ve.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){ce["[object "+t+"]"]=t.toLowerCase()});var we=/*!
	 * Sizzle CSS Selector Engine v2.3.3
	 * https://sizzlejs.com/
	 *
	 * Copyright jQuery Foundation and other contributors
	 * Released under the MIT license
	 * http://jquery.org/license
	 *
	 * Date: 2016-08-08
	 */
function(e){function t(e,t,n,i){var r,s,o,a,l,u,h,p=t&&t.ownerDocument,f=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==f&&9!==f&&11!==f)return n;if(!i&&((t?t.ownerDocument||t:B)!==D&&N(t),t=t||D,A)){if(11!==f&&(l=ge.exec(e)))if(r=l[1]){if(9===f){if(!(o=t.getElementById(r)))return n;if(o.id===r)return n.push(o),n}else if(p&&(o=p.getElementById(r))&&U(t,o)&&o.id===r)return n.push(o),n}else{if(l[2])return Q.apply(n,t.getElementsByTagName(e)),n;if((r=l[3])&&x.getElementsByClassName&&t.getElementsByClassName)return Q.apply(n,t.getElementsByClassName(r)),n}if(x.qsa&&!V[e+" "]&&(!R||!R.test(e))){if(1!==f)p=t,h=e;else if("object"!==t.nodeName.toLowerCase()){for((a=t.getAttribute("id"))?a=a.replace(Oe,xe):t.setAttribute("id",a=H),u=S(e),s=u.length;s--;)u[s]="#"+a+" "+d(u[s]);h=u.join(","),p=ve.test(e)&&c(t.parentNode)||t}if(h)try{return Q.apply(n,p.querySelectorAll(h)),n}catch(e){}finally{a===H&&t.removeAttribute("id")}}}return T(e.replace(ae,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>w.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[H]=!0,e}function r(e){var t=D.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function s(e,t){for(var n=e.split("|"),i=n.length;i--;)w.attrHandle[n[i]]=t}function o(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function a(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function u(e){return function(t){return"form"in t?t.parentNode&&t.disabled===!1?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&Ce(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function h(e){return i(function(t){return t=+t,i(function(n,i){for(var r,s=e([],n.length,t),o=s.length;o--;)n[r=s[o]]&&(n[r]=!(i[r]=n[r]))})})}function c(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function p(){}function d(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function f(e,t,n){var i=t.dir,r=t.next,s=r||i,o=n&&"parentNode"===s,a=G++;return t.first?function(t,n,r){for(;t=t[i];)if(1===t.nodeType||o)return e(t,n,r);return!1}:function(t,n,l){var u,h,c,p=[j,a];if(l){for(;t=t[i];)if((1===t.nodeType||o)&&e(t,n,l))return!0}else for(;t=t[i];)if(1===t.nodeType||o)if(c=t[H]||(t[H]={}),h=c[t.uniqueID]||(c[t.uniqueID]={}),r&&r===t.nodeName.toLowerCase())t=t[i]||t;else{if((u=h[s])&&u[0]===j&&u[1]===a)return p[2]=u[2];if(h[s]=p,p[2]=e(t,n,l))return!0}return!1}}function y(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function m(e,n,i){for(var r=0,s=n.length;r<s;r++)t(e,n[r],i);return i}function g(e,t,n,i,r){for(var s,o=[],a=0,l=e.length,u=null!=t;a<l;a++)(s=e[a])&&(n&&!n(s,i,r)||(o.push(s),u&&t.push(a)));return o}function v(e,t,n,r,s,o){return r&&!r[H]&&(r=v(r)),s&&!s[H]&&(s=v(s,o)),i(function(i,o,a,l){var u,h,c,p=[],d=[],f=o.length,y=i||m(t||"*",a.nodeType?[a]:a,[]),v=!e||!i&&t?y:g(y,p,e,a,l),L=n?s||(i?e:f||r)?[]:o:v;if(n&&n(v,L,a,l),r)for(u=g(L,d),r(u,[],a,l),h=u.length;h--;)(c=u[h])&&(L[d[h]]=!(v[d[h]]=c));if(i){if(s||e){if(s){for(u=[],h=L.length;h--;)(c=L[h])&&u.push(v[h]=c);s(null,L=[],u,l)}for(h=L.length;h--;)(c=L[h])&&(u=s?ee(i,c):p[h])>-1&&(i[u]=!(o[u]=c))}}else L=g(L===o?L.splice(f,L.length):L),s?s(null,o,L,l):Q.apply(o,L)})}function L(e){for(var t,n,i,r=e.length,s=w.relative[e[0].type],o=s||w.relative[" "],a=s?1:0,l=f(function(e){return e===t},o,!0),u=f(function(e){return ee(t,e)>-1},o,!0),h=[function(e,n,i){var r=!s&&(i||n!==k)||((t=n).nodeType?l(e,n,i):u(e,n,i));return t=null,r}];a<r;a++)if(n=w.relative[e[a].type])h=[f(y(h),n)];else{if(n=w.filter[e[a].type].apply(null,e[a].matches),n[H]){for(i=++a;i<r&&!w.relative[e[i].type];i++);return v(a>1&&y(h),a>1&&d(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(ae,"$1"),n,a<i&&L(e.slice(a,i)),i<r&&L(e=e.slice(i)),i<r&&d(e))}h.push(n)}return y(h)}function b(e,n){var r=n.length>0,s=e.length>0,o=function(i,o,a,l,u){var h,c,p,d=0,f="0",y=i&&[],m=[],v=k,L=i||s&&w.find.TAG("*",u),b=j+=null==v?1:Math.random()||.1,O=L.length;for(u&&(k=o===D||o||u);f!==O&&null!=(h=L[f]);f++){if(s&&h){for(c=0,o||h.ownerDocument===D||(N(h),a=!A);p=e[c++];)if(p(h,o||D,a)){l.push(h);break}u&&(j=b)}r&&((h=!p&&h)&&d--,i&&y.push(h))}if(d+=f,r&&f!==d){for(c=0;p=n[c++];)p(y,m,o,a);if(i){if(d>0)for(;f--;)y[f]||m[f]||(m[f]=$.call(l));m=g(m)}Q.apply(l,m),u&&!i&&m.length>0&&d+n.length>1&&t.uniqueSort(l)}return u&&(j=b,k=v),y};return r?i(o):o}var O,x,w,C,E,S,_,T,k,M,P,N,D,I,A,R,F,z,U,H="sizzle"+1*new Date,B=e.document,j=0,G=0,W=n(),q=n(),V=n(),X=function(e,t){return e===t&&(P=!0),0},Y={}.hasOwnProperty,Z=[],$=Z.pop,K=Z.push,Q=Z.push,J=Z.slice,ee=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",ie="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",re="\\["+ne+"*("+ie+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ie+"))|)"+ne+"*\\]",se=":("+ie+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+re+")*)|.*)\\)|)",oe=new RegExp(ne+"+","g"),ae=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),le=new RegExp("^"+ne+"*,"+ne+"*"),ue=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),he=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),ce=new RegExp(se),pe=new RegExp("^"+ie+"$"),de={ID:new RegExp("^#("+ie+")"),CLASS:new RegExp("^\\.("+ie+")"),TAG:new RegExp("^("+ie+"|[*])"),ATTR:new RegExp("^"+re),PSEUDO:new RegExp("^"+se),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},fe=/^(?:input|select|textarea|button)$/i,ye=/^h\d$/i,me=/^[^{]+\{\s*\[native \w/,ge=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ve=/[+~]/,Le=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),be=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},Oe=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,xe=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},we=function(){N()},Ce=f(function(e){return e.disabled===!0&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{Q.apply(Z=J.call(B.childNodes),B.childNodes),Z[B.childNodes.length].nodeType}catch(e){Q={apply:Z.length?function(e,t){K.apply(e,J.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}x=t.support={},E=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},N=t.setDocument=function(e){var t,n,i=e?e.ownerDocument||e:B;return i!==D&&9===i.nodeType&&i.documentElement?(D=i,I=D.documentElement,A=!E(D),B!==D&&(n=D.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",we,!1):n.attachEvent&&n.attachEvent("onunload",we)),x.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),x.getElementsByTagName=r(function(e){return e.appendChild(D.createComment("")),!e.getElementsByTagName("*").length}),x.getElementsByClassName=me.test(D.getElementsByClassName),x.getById=r(function(e){return I.appendChild(e).id=H,!D.getElementsByName||!D.getElementsByName(H).length}),x.getById?(w.filter.ID=function(e){var t=e.replace(Le,be);return function(e){return e.getAttribute("id")===t}},w.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&A){var n=t.getElementById(e);return n?[n]:[]}}):(w.filter.ID=function(e){var t=e.replace(Le,be);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},w.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&A){var n,i,r,s=t.getElementById(e);if(s){if(n=s.getAttributeNode("id"),n&&n.value===e)return[s];for(r=t.getElementsByName(e),i=0;s=r[i++];)if(n=s.getAttributeNode("id"),n&&n.value===e)return[s]}return[]}}),w.find.TAG=x.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):x.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],r=0,s=t.getElementsByTagName(e);if("*"===e){for(;n=s[r++];)1===n.nodeType&&i.push(n);return i}return s},w.find.CLASS=x.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&A)return t.getElementsByClassName(e)},F=[],R=[],(x.qsa=me.test(D.querySelectorAll))&&(r(function(e){I.appendChild(e).innerHTML="<a id='"+H+"'></a><select id='"+H+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&R.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||R.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+H+"-]").length||R.push("~="),e.querySelectorAll(":checked").length||R.push(":checked"),e.querySelectorAll("a#"+H+"+*").length||R.push(".#.+[+~]")}),r(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=D.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&R.push("name"+ne+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&R.push(":enabled",":disabled"),I.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&R.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),R.push(",.*:")})),(x.matchesSelector=me.test(z=I.matches||I.webkitMatchesSelector||I.mozMatchesSelector||I.oMatchesSelector||I.msMatchesSelector))&&r(function(e){x.disconnectedMatch=z.call(e,"*"),z.call(e,"[s!='']:x"),F.push("!=",se)}),R=R.length&&new RegExp(R.join("|")),F=F.length&&new RegExp(F.join("|")),t=me.test(I.compareDocumentPosition),U=t||me.test(I.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},X=t?function(e,t){if(e===t)return P=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!x.sortDetached&&t.compareDocumentPosition(e)===n?e===D||e.ownerDocument===B&&U(B,e)?-1:t===D||t.ownerDocument===B&&U(B,t)?1:M?ee(M,e)-ee(M,t):0:4&n?-1:1)}:function(e,t){if(e===t)return P=!0,0;var n,i=0,r=e.parentNode,s=t.parentNode,a=[e],l=[t];if(!r||!s)return e===D?-1:t===D?1:r?-1:s?1:M?ee(M,e)-ee(M,t):0;if(r===s)return o(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)l.unshift(n);for(;a[i]===l[i];)i++;return i?o(a[i],l[i]):a[i]===B?-1:l[i]===B?1:0},D):D},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==D&&N(e),n=n.replace(he,"='$1']"),x.matchesSelector&&A&&!V[n+" "]&&(!F||!F.test(n))&&(!R||!R.test(n)))try{var i=z.call(e,n);if(i||x.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){}return t(n,D,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==D&&N(e),U(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==D&&N(e);var n=w.attrHandle[t.toLowerCase()],i=n&&Y.call(w.attrHandle,t.toLowerCase())?n(e,t,!A):void 0;return void 0!==i?i:x.attributes||!A?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.escape=function(e){return(e+"").replace(Oe,xe)},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],i=0,r=0;if(P=!x.detectDuplicates,M=!x.sortStable&&e.slice(0),e.sort(X),P){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return M=null,e},C=t.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=C(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=C(t);return n},w=t.selectors={cacheLength:50,createPseudo:i,match:de,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Le,be),e[3]=(e[3]||e[4]||e[5]||"").replace(Le,be),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return de.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&ce.test(n)&&(t=S(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Le,be).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=W[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&W(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(r){var s=t.attr(r,e);return null==s?"!="===n:!n||(s+="","="===n?s===i:"!="===n?s!==i:"^="===n?i&&0===s.indexOf(i):"*="===n?i&&s.indexOf(i)>-1:"$="===n?i&&s.slice(-i.length)===i:"~="===n?(" "+s.replace(oe," ")+" ").indexOf(i)>-1:"|="===n&&(s===i||s.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,n,i,r){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),a="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,l){var u,h,c,p,d,f,y=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=a&&t.nodeName.toLowerCase(),v=!l&&!a,L=!1;if(m){if(s){for(;y;){for(p=t;p=p[y];)if(a?p.nodeName.toLowerCase()===g:1===p.nodeType)return!1;f=y="only"===e&&!f&&"nextSibling"}return!0}if(f=[o?m.firstChild:m.lastChild],o&&v){for(p=m,c=p[H]||(p[H]={}),h=c[p.uniqueID]||(c[p.uniqueID]={}),u=h[e]||[],d=u[0]===j&&u[1],L=d&&u[2],p=d&&m.childNodes[d];p=++d&&p&&p[y]||(L=d=0)||f.pop();)if(1===p.nodeType&&++L&&p===t){h[e]=[j,d,L];break}}else if(v&&(p=t,c=p[H]||(p[H]={}),h=c[p.uniqueID]||(c[p.uniqueID]={}),u=h[e]||[],d=u[0]===j&&u[1],L=d),L===!1)for(;(p=++d&&p&&p[y]||(L=d=0)||f.pop())&&((a?p.nodeName.toLowerCase()!==g:1!==p.nodeType)||!++L||(v&&(c=p[H]||(p[H]={}),h=c[p.uniqueID]||(c[p.uniqueID]={}),h[e]=[j,L]),p!==t)););return L-=r,L===i||L%i===0&&L/i>=0}}},PSEUDO:function(e,n){var r,s=w.pseudos[e]||w.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return s[H]?s(n):s.length>1?(r=[e,e,"",n],w.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,r=s(e,n),o=r.length;o--;)i=ee(e,r[o]),e[i]=!(t[i]=r[o])}):function(e){return s(e,0,r)}):s}},pseudos:{not:i(function(e){var t=[],n=[],r=_(e.replace(ae,"$1"));return r[H]?i(function(e,t,n,i){for(var s,o=r(e,null,i,[]),a=e.length;a--;)(s=o[a])&&(e[a]=!(t[a]=s))}):function(e,i,s){return t[0]=e,r(t,null,s,n),t[0]=null,!n.pop()}}),has:i(function(e){return function(n){return t(e,n).length>0}}),contains:i(function(e){return e=e.replace(Le,be),function(t){return(t.textContent||t.innerText||C(t)).indexOf(e)>-1}}),lang:i(function(e){return pe.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(Le,be).toLowerCase(),function(t){var n;do if(n=A?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===I},focus:function(e){return e===D.activeElement&&(!D.hasFocus||D.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:u(!1),disabled:u(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!w.pseudos.empty(e)},header:function(e){return ye.test(e.nodeName)},input:function(e){return fe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:h(function(){return[0]}),last:h(function(e,t){return[t-1]}),eq:h(function(e,t,n){return[n<0?n+t:n]}),even:h(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:h(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:h(function(e,t,n){for(var i=n<0?n+t:n;--i>=0;)e.push(i);return e}),gt:h(function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e})}},w.pseudos.nth=w.pseudos.eq;for(O in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[O]=a(O);for(O in{submit:!0,reset:!0})w.pseudos[O]=l(O);return p.prototype=w.filters=w.pseudos,w.setFilters=new p,S=t.tokenize=function(e,n){var i,r,s,o,a,l,u,h=q[e+" "];if(h)return n?0:h.slice(0);for(a=e,l=[],u=w.preFilter;a;){i&&!(r=le.exec(a))||(r&&(a=a.slice(r[0].length)||a),l.push(s=[])),i=!1,(r=ue.exec(a))&&(i=r.shift(),s.push({value:i,type:r[0].replace(ae," ")}),a=a.slice(i.length));for(o in w.filter)!(r=de[o].exec(a))||u[o]&&!(r=u[o](r))||(i=r.shift(),s.push({value:i,type:o,matches:r}),a=a.slice(i.length));if(!i)break}return n?a.length:a?t.error(e):q(e,l).slice(0)},_=t.compile=function(e,t){var n,i=[],r=[],s=V[e+" "];if(!s){for(t||(t=S(e)),n=t.length;n--;)s=L(t[n]),s[H]?i.push(s):r.push(s);s=V(e,b(r,i)),s.selector=e}return s},T=t.select=function(e,t,n,i){var r,s,o,a,l,u="function"==typeof e&&e,h=!i&&S(e=u.selector||e);if(n=n||[],1===h.length){if(s=h[0]=h[0].slice(0),s.length>2&&"ID"===(o=s[0]).type&&9===t.nodeType&&A&&w.relative[s[1].type]){if(t=(w.find.ID(o.matches[0].replace(Le,be),t)||[])[0],!t)return n;u&&(t=t.parentNode),e=e.slice(s.shift().value.length)}for(r=de.needsContext.test(e)?0:s.length;r--&&(o=s[r],!w.relative[a=o.type]);)if((l=w.find[a])&&(i=l(o.matches[0].replace(Le,be),ve.test(s[0].type)&&c(t.parentNode)||t))){if(s.splice(r,1),e=i.length&&d(s),!e)return Q.apply(n,i),n;break}}return(u||_(e,h))(i,t,!A,n,!t||ve.test(e)&&c(t.parentNode)||t),n},x.sortStable=H.split("").sort(X).join("")===H,x.detectDuplicates=!!P,N(),x.sortDetached=r(function(e){return 1&e.compareDocumentPosition(D.createElement("fieldset"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||s("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),x.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||s("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||s(te,function(e,t,n){var i;if(!n)return e[t]===!0?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(n);ve.find=we,ve.expr=we.selectors,ve.expr[":"]=ve.expr.pseudos,ve.uniqueSort=ve.unique=we.uniqueSort,ve.text=we.getText,ve.isXMLDoc=we.isXML,ve.contains=we.contains,ve.escapeSelector=we.escape;var Ce=function(e,t,n){for(var i=[],r=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&ve(e).is(n))break;i.push(e)}return i},Ee=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},Se=ve.expr.match.needsContext,_e=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,Te=/^.[^:#\[\.,]*$/;ve.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?ve.find.matchesSelector(i,e)?[i]:[]:ve.find.matches(e,ve.grep(t,function(e){return 1===e.nodeType}))},ve.fn.extend({find:function(e){var t,n,i=this.length,r=this;if("string"!=typeof e)return this.pushStack(ve(e).filter(function(){for(t=0;t<i;t++)if(ve.contains(r[t],this))return!0}));for(n=this.pushStack([]),t=0;t<i;t++)ve.find(e,r[t],n);return i>1?ve.uniqueSort(n):n},filter:function(e){return this.pushStack(l(this,e||[],!1))},not:function(e){return this.pushStack(l(this,e||[],!0))},is:function(e){return!!l(this,"string"==typeof e&&Se.test(e)?ve(e):e||[],!1).length}});var ke,Me=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Pe=ve.fn.init=function(e,t,n){var i,r;if(!e)return this;if(n=n||ke,"string"==typeof e){if(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:Me.exec(e),!i||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof ve?t[0]:t,ve.merge(this,ve.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:se,!0)),_e.test(i[1])&&ve.isPlainObject(t))for(i in t)ve.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return r=se.getElementById(i[2]),r&&(this[0]=r,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):ve.isFunction(e)?void 0!==n.ready?n.ready(e):e(ve):ve.makeArray(e,this)};Pe.prototype=ve.fn,ke=ve(se);var Ne=/^(?:parents|prev(?:Until|All))/,De={children:!0,contents:!0,next:!0,prev:!0};ve.fn.extend({has:function(e){var t=ve(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(ve.contains(this,t[e]))return!0})},closest:function(e,t){var n,i=0,r=this.length,s=[],o="string"!=typeof e&&ve(e);if(!Se.test(e))for(;i<r;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&ve.find.matchesSelector(n,e))){s.push(n);break}return this.pushStack(s.length>1?ve.uniqueSort(s):s)},index:function(e){return e?"string"==typeof e?he.call(ve(e),this[0]):he.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(ve.uniqueSort(ve.merge(this.get(),ve(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ve.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Ce(e,"parentNode")},parentsUntil:function(e,t,n){return Ce(e,"parentNode",n)},next:function(e){return u(e,"nextSibling")},prev:function(e){return u(e,"previousSibling")},nextAll:function(e){return Ce(e,"nextSibling")},prevAll:function(e){return Ce(e,"previousSibling")},nextUntil:function(e,t,n){return Ce(e,"nextSibling",n)},prevUntil:function(e,t,n){return Ce(e,"previousSibling",n)},siblings:function(e){return Ee((e.parentNode||{}).firstChild,e)},children:function(e){return Ee(e.firstChild)},contents:function(e){return e.contentDocument||ve.merge([],e.childNodes)}},function(e,t){ve.fn[e]=function(n,i){var r=ve.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=ve.filter(i,r)),this.length>1&&(De[e]||ve.uniqueSort(r),Ne.test(e)&&r.reverse()),this.pushStack(r)}});var Ie=/[^\x20\t\r\n\f]+/g;ve.Callbacks=function(e){e="string"==typeof e?h(e):ve.extend({},e);var t,n,i,r,s=[],o=[],a=-1,l=function(){for(r=e.once,i=t=!0;o.length;a=-1)for(n=o.shift();++a<s.length;)s[a].apply(n[0],n[1])===!1&&e.stopOnFalse&&(a=s.length,n=!1);e.memory||(n=!1),t=!1,r&&(s=n?[]:"")},u={add:function(){return s&&(n&&!t&&(a=s.length-1,o.push(n)),function t(n){ve.each(n,function(n,i){ve.isFunction(i)?e.unique&&u.has(i)||s.push(i):i&&i.length&&"string"!==ve.type(i)&&t(i)})}(arguments),n&&!t&&l()),this},remove:function(){return ve.each(arguments,function(e,t){for(var n;(n=ve.inArray(t,s,n))>-1;)s.splice(n,1),n<=a&&a--}),this},has:function(e){return e?ve.inArray(e,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return r=o=[],s=n="",this},disabled:function(){return!s},lock:function(){return r=o=[],n||t||(s=n=""),this},locked:function(){return!!r},fireWith:function(e,n){return r||(n=n||[],n=[e,n.slice?n.slice():n],o.push(n),t||l()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!i}};return u},ve.extend({Deferred:function(e){var t=[["notify","progress",ve.Callbacks("memory"),ve.Callbacks("memory"),2],["resolve","done",ve.Callbacks("once memory"),ve.Callbacks("once memory"),0,"resolved"],["reject","fail",ve.Callbacks("once memory"),ve.Callbacks("once memory"),1,"rejected"]],i="pending",r={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},catch:function(e){return r.then(null,e)},pipe:function(){var e=arguments;return ve.Deferred(function(n){ve.each(t,function(t,i){var r=ve.isFunction(e[i[4]])&&e[i[4]];s[i[1]](function(){var e=r&&r.apply(this,arguments);e&&ve.isFunction(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[i[0]+"With"](this,r?[e]:arguments)})}),e=null}).promise()},then:function(e,i,r){function s(e,t,i,r){return function(){var a=this,l=arguments,u=function(){var n,u;if(!(e<o)){if(n=i.apply(a,l),n===t.promise())throw new TypeError("Thenable self-resolution");u=n&&("object"==typeof n||"function"==typeof n)&&n.then,ve.isFunction(u)?r?u.call(n,s(o,t,c,r),s(o,t,p,r)):(o++,u.call(n,s(o,t,c,r),s(o,t,p,r),s(o,t,c,t.notifyWith))):(i!==c&&(a=void 0,l=[n]),(r||t.resolveWith)(a,l))}},h=r?u:function(){try{u()}catch(n){ve.Deferred.exceptionHook&&ve.Deferred.exceptionHook(n,h.stackTrace),e+1>=o&&(i!==p&&(a=void 0,l=[n]),t.rejectWith(a,l))}};e?h():(ve.Deferred.getStackHook&&(h.stackTrace=ve.Deferred.getStackHook()),n.setTimeout(h))}}var o=0;return ve.Deferred(function(n){t[0][3].add(s(0,n,ve.isFunction(r)?r:c,n.notifyWith)),t[1][3].add(s(0,n,ve.isFunction(e)?e:c)),t[2][3].add(s(0,n,ve.isFunction(i)?i:p))}).promise()},promise:function(e){return null!=e?ve.extend(e,r):r}},s={};return ve.each(t,function(e,n){var o=n[2],a=n[5];r[n[1]]=o.add,a&&o.add(function(){i=a},t[3-e][2].disable,t[0][2].lock),o.add(n[3].fire),s[n[0]]=function(){return s[n[0]+"With"](this===s?void 0:this,arguments),this},s[n[0]+"With"]=o.fireWith}),r.promise(s),e&&e.call(s,s),s},when:function(e){var t=arguments.length,n=t,i=Array(n),r=ae.call(arguments),s=ve.Deferred(),o=function(e){return function(n){i[e]=this,r[e]=arguments.length>1?ae.call(arguments):n,--t||s.resolveWith(i,r)}};if(t<=1&&(d(e,s.done(o(n)).resolve,s.reject),"pending"===s.state()||ve.isFunction(r[n]&&r[n].then)))return s.then();for(;n--;)d(r[n],o(n),s.reject);return s.promise()}});var Ae=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;ve.Deferred.exceptionHook=function(e,t){n.console&&n.console.warn&&e&&Ae.test(e.name)&&n.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},ve.readyException=function(e){n.setTimeout(function(){throw e})};var Re=ve.Deferred();ve.fn.ready=function(e){return Re.then(e).catch(function(e){ve.readyException(e)}),this},ve.extend({isReady:!1,readyWait:1,holdReady:function(e){e?ve.readyWait++:ve.ready(!0)},ready:function(e){(e===!0?--ve.readyWait:ve.isReady)||(ve.isReady=!0,e!==!0&&--ve.readyWait>0||Re.resolveWith(se,[ve]))}}),ve.ready.then=Re.then,"complete"===se.readyState||"loading"!==se.readyState&&!se.documentElement.doScroll?n.setTimeout(ve.ready):(se.addEventListener("DOMContentLoaded",f),n.addEventListener("load",f));var Fe=function(e,t,n,i,r,s,o){var a=0,l=e.length,u=null==n;if("object"===ve.type(n)){r=!0;for(a in n)Fe(e,t,a,n[a],!0,s,o)}else if(void 0!==i&&(r=!0,ve.isFunction(i)||(o=!0),u&&(o?(t.call(e,i),t=null):(u=t,t=function(e,t,n){return u.call(ve(e),n)})),t))for(;a<l;a++)t(e[a],n,o?i:i.call(e[a],a,t(e[a],n)));return r?e:u?t.call(e):l?t(e[0],n):s},ze=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};y.uid=1,y.prototype={cache:function(e){var t=e[this.expando];return t||(t={},ze(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,r=this.cache(e);if("string"==typeof t)r[ve.camelCase(t)]=n;else for(i in t)r[ve.camelCase(i)]=t[i];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][ve.camelCase(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i=e[this.expando];if(void 0!==i){if(void 0!==t){ve.isArray(t)?t=t.map(ve.camelCase):(t=ve.camelCase(t),t=t in i?[t]:t.match(Ie)||[]),n=t.length;for(;n--;)delete i[t[n]]}(void 0===t||ve.isEmptyObject(i))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!ve.isEmptyObject(t)}};var Ue=new y,He=new y,Be=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,je=/[A-Z]/g;ve.extend({hasData:function(e){return He.hasData(e)||Ue.hasData(e)},data:function(e,t,n){return He.access(e,t,n)},removeData:function(e,t){He.remove(e,t)},_data:function(e,t,n){return Ue.access(e,t,n)},_removeData:function(e,t){Ue.remove(e,t)}}),ve.fn.extend({data:function(e,t){var n,i,r,s=this[0],o=s&&s.attributes;if(void 0===e){if(this.length&&(r=He.get(s),1===s.nodeType&&!Ue.get(s,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&(i=o[n].name,0===i.indexOf("data-")&&(i=ve.camelCase(i.slice(5)),g(s,i,r[i])));Ue.set(s,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each(function(){He.set(this,e)}):Fe(this,function(t){var n;if(s&&void 0===t){if(n=He.get(s,e),void 0!==n)return n;if(n=g(s,e),void 0!==n)return n}else this.each(function(){He.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){He.remove(this,e)})}}),ve.extend({queue:function(e,t,n){var i;if(e)return t=(t||"fx")+"queue",i=Ue.get(e,t),n&&(!i||ve.isArray(n)?i=Ue.access(e,t,ve.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||"fx";var n=ve.queue(e,t),i=n.length,r=n.shift(),s=ve._queueHooks(e,t),o=function(){ve.dequeue(e,t)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete s.stop,r.call(e,o,s)),!i&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Ue.get(e,n)||Ue.access(e,n,{empty:ve.Callbacks("once memory").add(function(){Ue.remove(e,[t+"queue",n])})})}}),ve.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?ve.queue(this[0],e):void 0===t?this:this.each(function(){var n=ve.queue(this,e,t);ve._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&ve.dequeue(this,e)})},dequeue:function(e){return this.each(function(){ve.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=ve.Deferred(),s=this,o=this.length,a=function(){--i||r.resolveWith(s,[s])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)n=Ue.get(s[o],e+"queueHooks"),n&&n.empty&&(i++,n.empty.add(a));return a(),r.promise(t)}});var Ge=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,We=new RegExp("^(?:([+-])=|)("+Ge+")([a-z%]*)$","i"),qe=["Top","Right","Bottom","Left"],Ve=function(e,t){return e=t||e,"none"===e.style.display||""===e.style.display&&ve.contains(e.ownerDocument,e)&&"none"===ve.css(e,"display")},Xe=function(e,t,n,i){var r,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];r=n.apply(e,i||[]);for(s in t)e.style[s]=o[s];return r},Ye={};ve.fn.extend({show:function(){return b(this,!0)},hide:function(){return b(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Ve(this)?ve(this).show():ve(this).hide()})}});var Ze=/^(?:checkbox|radio)$/i,$e=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Ke=/^$|\/(?:java|ecma)script/i,Qe={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Qe.optgroup=Qe.option,Qe.tbody=Qe.tfoot=Qe.colgroup=Qe.caption=Qe.thead,Qe.th=Qe.td;
var Je=/<|&#?\w+;/;!function(){var e=se.createDocumentFragment(),t=e.appendChild(se.createElement("div")),n=se.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),me.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",me.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var et=se.documentElement,tt=/^key/,nt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,it=/^([^.]*)(?:\.(.+)|)/;ve.event={global:{},add:function(e,t,n,i,r){var s,o,a,l,u,h,c,p,d,f,y,m=Ue.get(e);if(m)for(n.handler&&(s=n,n=s.handler,r=s.selector),r&&ve.find.matchesSelector(et,r),n.guid||(n.guid=ve.guid++),(l=m.events)||(l=m.events={}),(o=m.handle)||(o=m.handle=function(t){return"undefined"!=typeof ve&&ve.event.triggered!==t.type?ve.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(Ie)||[""],u=t.length;u--;)a=it.exec(t[u])||[],d=y=a[1],f=(a[2]||"").split(".").sort(),d&&(c=ve.event.special[d]||{},d=(r?c.delegateType:c.bindType)||d,c=ve.event.special[d]||{},h=ve.extend({type:d,origType:y,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&ve.expr.match.needsContext.test(r),namespace:f.join(".")},s),(p=l[d])||(p=l[d]=[],p.delegateCount=0,c.setup&&c.setup.call(e,i,f,o)!==!1||e.addEventListener&&e.addEventListener(d,o)),c.add&&(c.add.call(e,h),h.handler.guid||(h.handler.guid=n.guid)),r?p.splice(p.delegateCount++,0,h):p.push(h),ve.event.global[d]=!0)},remove:function(e,t,n,i,r){var s,o,a,l,u,h,c,p,d,f,y,m=Ue.hasData(e)&&Ue.get(e);if(m&&(l=m.events)){for(t=(t||"").match(Ie)||[""],u=t.length;u--;)if(a=it.exec(t[u])||[],d=y=a[1],f=(a[2]||"").split(".").sort(),d){for(c=ve.event.special[d]||{},d=(i?c.delegateType:c.bindType)||d,p=l[d]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=p.length;s--;)h=p[s],!r&&y!==h.origType||n&&n.guid!==h.guid||a&&!a.test(h.namespace)||i&&i!==h.selector&&("**"!==i||!h.selector)||(p.splice(s,1),h.selector&&p.delegateCount--,c.remove&&c.remove.call(e,h));o&&!p.length&&(c.teardown&&c.teardown.call(e,f,m.handle)!==!1||ve.removeEvent(e,d,m.handle),delete l[d])}else for(d in l)ve.event.remove(e,d+t[u],n,i,!0);ve.isEmptyObject(l)&&Ue.remove(e,"handle events")}},dispatch:function(e){var t,n,i,r,s,o,a=ve.event.fix(e),l=new Array(arguments.length),u=(Ue.get(this,"events")||{})[a.type]||[],h=ve.event.special[a.type]||{};for(l[0]=a,t=1;t<arguments.length;t++)l[t]=arguments[t];if(a.delegateTarget=this,!h.preDispatch||h.preDispatch.call(this,a)!==!1){for(o=ve.event.handlers.call(this,a,u),t=0;(r=o[t++])&&!a.isPropagationStopped();)for(a.currentTarget=r.elem,n=0;(s=r.handlers[n++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!a.rnamespace.test(s.namespace)||(a.handleObj=s,a.data=s.data,i=((ve.event.special[s.origType]||{}).handle||s.handler).apply(r.elem,l),void 0!==i&&(a.result=i)===!1&&(a.preventDefault(),a.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,a),a.result}},handlers:function(e,t){var n,i,r,s,o,a=[],l=t.delegateCount,u=e.target;if(l&&u.nodeType&&!("click"===e.type&&e.button>=1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==e.type||u.disabled!==!0)){for(s=[],o={},n=0;n<l;n++)i=t[n],r=i.selector+" ",void 0===o[r]&&(o[r]=i.needsContext?ve(r,this).index(u)>-1:ve.find(r,this,null,[u]).length),o[r]&&s.push(i);s.length&&a.push({elem:u,handlers:s})}return u=this,l<t.length&&a.push({elem:u,handlers:t.slice(l)}),a},addProp:function(e,t){Object.defineProperty(ve.Event.prototype,e,{enumerable:!0,configurable:!0,get:ve.isFunction(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[ve.expando]?e:new ve.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==S()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===S()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&ve.nodeName(this,"input"))return this.click(),!1},_default:function(e){return ve.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},ve.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},ve.Event=function(e,t){return this instanceof ve.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?C:E,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&ve.extend(this,t),this.timeStamp=e&&e.timeStamp||ve.now(),void(this[ve.expando]=!0)):new ve.Event(e,t)},ve.Event.prototype={constructor:ve.Event,isDefaultPrevented:E,isPropagationStopped:E,isImmediatePropagationStopped:E,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=C,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=C,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=C,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},ve.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&tt.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&nt.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},ve.event.addProp),ve.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){ve.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,s=e.handleObj;return r&&(r===i||ve.contains(i,r))||(e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t),n}}}),ve.fn.extend({on:function(e,t,n,i){return _(this,e,t,n,i)},one:function(e,t,n,i){return _(this,e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,ve(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return t!==!1&&"function"!=typeof t||(n=t,t=void 0),n===!1&&(n=E),this.each(function(){ve.event.remove(this,e,n,t)})}});var rt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,st=/<script|<style|<link/i,ot=/checked\s*(?:[^=]|=\s*.checked.)/i,at=/^true\/(.*)/,lt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;ve.extend({htmlPrefilter:function(e){return e.replace(rt,"<$1></$2>")},clone:function(e,t,n){var i,r,s,o,a=e.cloneNode(!0),l=ve.contains(e.ownerDocument,e);if(!(me.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ve.isXMLDoc(e)))for(o=O(a),s=O(e),i=0,r=s.length;i<r;i++)N(s[i],o[i]);if(t)if(n)for(s=s||O(e),o=o||O(a),i=0,r=s.length;i<r;i++)P(s[i],o[i]);else P(e,a);return o=O(a,"script"),o.length>0&&x(o,!l&&O(e,"script")),a},cleanData:function(e){for(var t,n,i,r=ve.event.special,s=0;void 0!==(n=e[s]);s++)if(ze(n)){if(t=n[Ue.expando]){if(t.events)for(i in t.events)r[i]?ve.event.remove(n,i):ve.removeEvent(n,i,t.handle);n[Ue.expando]=void 0}n[He.expando]&&(n[He.expando]=void 0)}}}),ve.fn.extend({detach:function(e){return I(this,e,!0)},remove:function(e){return I(this,e)},text:function(e){return Fe(this,function(e){return void 0===e?ve.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return D(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=T(this,e);t.appendChild(e)}})},prepend:function(){return D(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=T(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return D(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return D(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(ve.cleanData(O(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return ve.clone(this,e,t)})},html:function(e){return Fe(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!st.test(e)&&!Qe[($e.exec(e)||["",""])[1].toLowerCase()]){e=ve.htmlPrefilter(e);try{for(;n<i;n++)t=this[n]||{},1===t.nodeType&&(ve.cleanData(O(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return D(this,arguments,function(t){var n=this.parentNode;ve.inArray(this,e)<0&&(ve.cleanData(O(this)),n&&n.replaceChild(t,this))},e)}}),ve.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){ve.fn[e]=function(e){for(var n,i=[],r=ve(e),s=r.length-1,o=0;o<=s;o++)n=o===s?this:this.clone(!0),ve(r[o])[t](n),ue.apply(i,n.get());return this.pushStack(i)}});var ut=/^margin/,ht=new RegExp("^("+Ge+")(?!px)[a-z%]+$","i"),ct=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=n),t.getComputedStyle(e)};!function(){function e(){if(a){a.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",a.innerHTML="",et.appendChild(o);var e=n.getComputedStyle(a);t="1%"!==e.top,s="2px"===e.marginLeft,i="4px"===e.width,a.style.marginRight="50%",r="4px"===e.marginRight,et.removeChild(o),a=null}}var t,i,r,s,o=se.createElement("div"),a=se.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",me.clearCloneStyle="content-box"===a.style.backgroundClip,o.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",o.appendChild(a),ve.extend(me,{pixelPosition:function(){return e(),t},boxSizingReliable:function(){return e(),i},pixelMarginRight:function(){return e(),r},reliableMarginLeft:function(){return e(),s}}))}();var pt=/^(none|table(?!-c[ea]).+)/,dt={position:"absolute",visibility:"hidden",display:"block"},ft={letterSpacing:"0",fontWeight:"400"},yt=["Webkit","Moz","ms"],mt=se.createElement("div").style;ve.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=A(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,s,o,a=ve.camelCase(t),l=e.style;return t=ve.cssProps[a]||(ve.cssProps[a]=F(a)||a),o=ve.cssHooks[t]||ve.cssHooks[a],void 0===n?o&&"get"in o&&void 0!==(r=o.get(e,!1,i))?r:l[t]:(s=typeof n,"string"===s&&(r=We.exec(n))&&r[1]&&(n=v(e,t,r),s="number"),null!=n&&n===n&&("number"===s&&(n+=r&&r[3]||(ve.cssNumber[a]?"":"px")),me.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),o&&"set"in o&&void 0===(n=o.set(e,n,i))||(l[t]=n)),void 0)}},css:function(e,t,n,i){var r,s,o,a=ve.camelCase(t);return t=ve.cssProps[a]||(ve.cssProps[a]=F(a)||a),o=ve.cssHooks[t]||ve.cssHooks[a],o&&"get"in o&&(r=o.get(e,!0,n)),void 0===r&&(r=A(e,t,i)),"normal"===r&&t in ft&&(r=ft[t]),""===n||n?(s=parseFloat(r),n===!0||isFinite(s)?s||0:r):r}}),ve.each(["height","width"],function(e,t){ve.cssHooks[t]={get:function(e,n,i){if(n)return!pt.test(ve.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?H(e,t,i):Xe(e,dt,function(){return H(e,t,i)})},set:function(e,n,i){var r,s=i&&ct(e),o=i&&U(e,t,i,"border-box"===ve.css(e,"boxSizing",!1,s),s);return o&&(r=We.exec(n))&&"px"!==(r[3]||"px")&&(e.style[t]=n,n=ve.css(e,t)),z(e,n,o)}}}),ve.cssHooks.marginLeft=R(me.reliableMarginLeft,function(e,t){if(t)return(parseFloat(A(e,"marginLeft"))||e.getBoundingClientRect().left-Xe(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),ve.each({margin:"",padding:"",border:"Width"},function(e,t){ve.cssHooks[e+t]={expand:function(n){for(var i=0,r={},s="string"==typeof n?n.split(" "):[n];i<4;i++)r[e+qe[i]+t]=s[i]||s[i-2]||s[0];return r}},ut.test(e)||(ve.cssHooks[e+t].set=z)}),ve.fn.extend({css:function(e,t){return Fe(this,function(e,t,n){var i,r,s={},o=0;if(ve.isArray(t)){for(i=ct(e),r=t.length;o<r;o++)s[t[o]]=ve.css(e,t[o],!1,i);return s}return void 0!==n?ve.style(e,t,n):ve.css(e,t)},e,t,arguments.length>1)}}),ve.Tween=B,B.prototype={constructor:B,init:function(e,t,n,i,r,s){this.elem=e,this.prop=n,this.easing=r||ve.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=s||(ve.cssNumber[n]?"":"px")},cur:function(){var e=B.propHooks[this.prop];return e&&e.get?e.get(this):B.propHooks._default.get(this)},run:function(e){var t,n=B.propHooks[this.prop];return this.options.duration?this.pos=t=ve.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):B.propHooks._default.set(this),this}},B.prototype.init.prototype=B.prototype,B.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=ve.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){ve.fx.step[e.prop]?ve.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[ve.cssProps[e.prop]]&&!ve.cssHooks[e.prop]?e.elem[e.prop]=e.now:ve.style(e.elem,e.prop,e.now+e.unit)}}},B.propHooks.scrollTop=B.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ve.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},ve.fx=B.prototype.init,ve.fx.step={};var gt,vt,Lt=/^(?:toggle|show|hide)$/,bt=/queueHooks$/;ve.Animation=ve.extend(Y,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return v(n.elem,e,We.exec(t),n),n}]},tweener:function(e,t){ve.isFunction(e)?(t=e,e=["*"]):e=e.match(Ie);for(var n,i=0,r=e.length;i<r;i++)n=e[i],Y.tweeners[n]=Y.tweeners[n]||[],Y.tweeners[n].unshift(t)},prefilters:[V],prefilter:function(e,t){t?Y.prefilters.unshift(e):Y.prefilters.push(e)}}),ve.speed=function(e,t,n){var i=e&&"object"==typeof e?ve.extend({},e):{complete:n||!n&&t||ve.isFunction(e)&&e,duration:e,easing:n&&t||t&&!ve.isFunction(t)&&t};return ve.fx.off||se.hidden?i.duration=0:"number"!=typeof i.duration&&(i.duration in ve.fx.speeds?i.duration=ve.fx.speeds[i.duration]:i.duration=ve.fx.speeds._default),null!=i.queue&&i.queue!==!0||(i.queue="fx"),i.old=i.complete,i.complete=function(){ve.isFunction(i.old)&&i.old.call(this),i.queue&&ve.dequeue(this,i.queue)},i},ve.fn.extend({fadeTo:function(e,t,n,i){return this.filter(Ve).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=ve.isEmptyObject(e),s=ve.speed(t,n,i),o=function(){var t=Y(this,ve.extend({},e),s);(r||Ue.get(this,"finish"))&&t.stop(!0)};return o.finish=o,r||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",s=ve.timers,o=Ue.get(this);if(r)o[r]&&o[r].stop&&i(o[r]);else for(r in o)o[r]&&o[r].stop&&bt.test(r)&&i(o[r]);for(r=s.length;r--;)s[r].elem!==this||null!=e&&s[r].queue!==e||(s[r].anim.stop(n),t=!1,s.splice(r,1));!t&&n||ve.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=Ue.get(this),i=n[e+"queue"],r=n[e+"queueHooks"],s=ve.timers,o=i?i.length:0;for(n.finish=!0,ve.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;t<o;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),ve.each(["toggle","show","hide"],function(e,t){var n=ve.fn[t];ve.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(W(t,!0),e,i,r)}}),ve.each({slideDown:W("show"),slideUp:W("hide"),slideToggle:W("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){ve.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),ve.timers=[],ve.fx.tick=function(){var e,t=0,n=ve.timers;for(gt=ve.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||ve.fx.stop(),gt=void 0},ve.fx.timer=function(e){ve.timers.push(e),e()?ve.fx.start():ve.timers.pop()},ve.fx.interval=13,ve.fx.start=function(){vt||(vt=n.requestAnimationFrame?n.requestAnimationFrame(j):n.setInterval(ve.fx.tick,ve.fx.interval))},ve.fx.stop=function(){n.cancelAnimationFrame?n.cancelAnimationFrame(vt):n.clearInterval(vt),vt=null},ve.fx.speeds={slow:600,fast:200,_default:400},ve.fn.delay=function(e,t){return e=ve.fx?ve.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,i){var r=n.setTimeout(t,e);i.stop=function(){n.clearTimeout(r)}})},function(){var e=se.createElement("input"),t=se.createElement("select"),n=t.appendChild(se.createElement("option"));e.type="checkbox",me.checkOn=""!==e.value,me.optSelected=n.selected,e=se.createElement("input"),e.value="t",e.type="radio",me.radioValue="t"===e.value}();var Ot,xt=ve.expr.attrHandle;ve.fn.extend({attr:function(e,t){return Fe(this,ve.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){ve.removeAttr(this,e)})}}),ve.extend({attr:function(e,t,n){var i,r,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return"undefined"==typeof e.getAttribute?ve.prop(e,t,n):(1===s&&ve.isXMLDoc(e)||(r=ve.attrHooks[t.toLowerCase()]||(ve.expr.match.bool.test(t)?Ot:void 0)),void 0!==n?null===n?void ve.removeAttr(e,t):r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):r&&"get"in r&&null!==(i=r.get(e,t))?i:(i=ve.find.attr(e,t),null==i?void 0:i))},attrHooks:{type:{set:function(e,t){if(!me.radioValue&&"radio"===t&&ve.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i=0,r=t&&t.match(Ie);if(r&&1===e.nodeType)for(;n=r[i++];)e.removeAttribute(n)}}),Ot={set:function(e,t,n){return t===!1?ve.removeAttr(e,n):e.setAttribute(n,n),n}},ve.each(ve.expr.match.bool.source.match(/\w+/g),function(e,t){var n=xt[t]||ve.find.attr;xt[t]=function(e,t,i){var r,s,o=t.toLowerCase();return i||(s=xt[o],xt[o]=r,r=null!=n(e,t,i)?o:null,xt[o]=s),r}});var wt=/^(?:input|select|textarea|button)$/i,Ct=/^(?:a|area)$/i;ve.fn.extend({prop:function(e,t){return Fe(this,ve.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[ve.propFix[e]||e]})}}),ve.extend({prop:function(e,t,n){var i,r,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&ve.isXMLDoc(e)||(t=ve.propFix[t]||t,r=ve.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=ve.find.attr(e,"tabindex");return t?parseInt(t,10):wt.test(e.nodeName)||Ct.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),me.optSelected||(ve.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),ve.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ve.propFix[this.toLowerCase()]=this}),ve.fn.extend({addClass:function(e){var t,n,i,r,s,o,a,l=0;if(ve.isFunction(e))return this.each(function(t){ve(this).addClass(e.call(this,t,$(this)))});if("string"==typeof e&&e)for(t=e.match(Ie)||[];n=this[l++];)if(r=$(n),i=1===n.nodeType&&" "+Z(r)+" "){for(o=0;s=t[o++];)i.indexOf(" "+s+" ")<0&&(i+=s+" ");a=Z(i),r!==a&&n.setAttribute("class",a)}return this},removeClass:function(e){var t,n,i,r,s,o,a,l=0;if(ve.isFunction(e))return this.each(function(t){ve(this).removeClass(e.call(this,t,$(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(Ie)||[];n=this[l++];)if(r=$(n),i=1===n.nodeType&&" "+Z(r)+" "){for(o=0;s=t[o++];)for(;i.indexOf(" "+s+" ")>-1;)i=i.replace(" "+s+" "," ");a=Z(i),r!==a&&n.setAttribute("class",a)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):ve.isFunction(e)?this.each(function(n){ve(this).toggleClass(e.call(this,n,$(this),t),t)}):this.each(function(){var t,i,r,s;if("string"===n)for(i=0,r=ve(this),s=e.match(Ie)||[];t=s[i++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else void 0!==e&&"boolean"!==n||(t=$(this),t&&Ue.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||e===!1?"":Ue.get(this,"__className__")||""))})},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+Z($(n))+" ").indexOf(t)>-1)return!0;return!1}});var Et=/\r/g;ve.fn.extend({val:function(e){var t,n,i,r=this[0];{if(arguments.length)return i=ve.isFunction(e),this.each(function(n){var r;1===this.nodeType&&(r=i?e.call(this,n,ve(this).val()):e,null==r?r="":"number"==typeof r?r+="":ve.isArray(r)&&(r=ve.map(r,function(e){return null==e?"":e+""})),t=ve.valHooks[this.type]||ve.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))});if(r)return t=ve.valHooks[r.type]||ve.valHooks[r.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:(n=r.value,"string"==typeof n?n.replace(Et,""):null==n?"":n)}}}),ve.extend({valHooks:{option:{get:function(e){var t=ve.find.attr(e,"value");return null!=t?t:Z(ve.text(e))}},select:{get:function(e){var t,n,i,r=e.options,s=e.selectedIndex,o="select-one"===e.type,a=o?null:[],l=o?s+1:r.length;for(i=s<0?l:o?s:0;i<l;i++)if(n=r[i],(n.selected||i===s)&&!n.disabled&&(!n.parentNode.disabled||!ve.nodeName(n.parentNode,"optgroup"))){if(t=ve(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,i,r=e.options,s=ve.makeArray(t),o=r.length;o--;)i=r[o],(i.selected=ve.inArray(ve.valHooks.option.get(i),s)>-1)&&(n=!0);return n||(e.selectedIndex=-1),s}}}}),ve.each(["radio","checkbox"],function(){ve.valHooks[this]={set:function(e,t){if(ve.isArray(t))return e.checked=ve.inArray(ve(e).val(),t)>-1}},me.checkOn||(ve.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var St=/^(?:focusinfocus|focusoutblur)$/;ve.extend(ve.event,{trigger:function(e,t,i,r){var s,o,a,l,u,h,c,p=[i||se],d=de.call(e,"type")?e.type:e,f=de.call(e,"namespace")?e.namespace.split("."):[];if(o=a=i=i||se,3!==i.nodeType&&8!==i.nodeType&&!St.test(d+ve.event.triggered)&&(d.indexOf(".")>-1&&(f=d.split("."),d=f.shift(),f.sort()),u=d.indexOf(":")<0&&"on"+d,e=e[ve.expando]?e:new ve.Event(d,"object"==typeof e&&e),e.isTrigger=r?2:3,e.namespace=f.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),t=null==t?[e]:ve.makeArray(t,[e]),c=ve.event.special[d]||{},r||!c.trigger||c.trigger.apply(i,t)!==!1)){if(!r&&!c.noBubble&&!ve.isWindow(i)){for(l=c.delegateType||d,St.test(l+d)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(i.ownerDocument||se)&&p.push(a.defaultView||a.parentWindow||n)}for(s=0;(o=p[s++])&&!e.isPropagationStopped();)e.type=s>1?l:c.bindType||d,h=(Ue.get(o,"events")||{})[e.type]&&Ue.get(o,"handle"),h&&h.apply(o,t),h=u&&o[u],h&&h.apply&&ze(o)&&(e.result=h.apply(o,t),e.result===!1&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||c._default&&c._default.apply(p.pop(),t)!==!1||!ze(i)||u&&ve.isFunction(i[d])&&!ve.isWindow(i)&&(a=i[u],a&&(i[u]=null),ve.event.triggered=d,i[d](),ve.event.triggered=void 0,a&&(i[u]=a)),e.result}},simulate:function(e,t,n){var i=ve.extend(new ve.Event,n,{type:e,isSimulated:!0});ve.event.trigger(i,null,t)}}),ve.fn.extend({trigger:function(e,t){return this.each(function(){ve.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return ve.event.trigger(e,t,n,!0)}}),ve.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){ve.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),ve.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),me.focusin="onfocusin"in n,me.focusin||ve.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){ve.event.simulate(t,e.target,ve.event.fix(e))};ve.event.special[t]={setup:function(){var i=this.ownerDocument||this,r=Ue.access(i,t);r||i.addEventListener(e,n,!0),Ue.access(i,t,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=Ue.access(i,t)-1;r?Ue.access(i,t,r):(i.removeEventListener(e,n,!0),Ue.remove(i,t))}}});var _t=n.location,Tt=ve.now(),kt=/\?/;ve.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new n.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||ve.error("Invalid XML: "+e),t};var Mt=/\[\]$/,Pt=/\r?\n/g,Nt=/^(?:submit|button|image|reset|file)$/i,Dt=/^(?:input|select|textarea|keygen)/i;ve.param=function(e,t){var n,i=[],r=function(e,t){var n=ve.isFunction(t)?t():t;i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(ve.isArray(e)||e.jquery&&!ve.isPlainObject(e))ve.each(e,function(){r(this.name,this.value)});else for(n in e)K(n,e[n],t,r);return i.join("&")},ve.fn.extend({serialize:function(){return ve.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ve.prop(this,"elements");return e?ve.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ve(this).is(":disabled")&&Dt.test(this.nodeName)&&!Nt.test(e)&&(this.checked||!Ze.test(e))}).map(function(e,t){var n=ve(this).val();return null==n?null:ve.isArray(n)?ve.map(n,function(e){return{name:t.name,value:e.replace(Pt,"\r\n")}}):{name:t.name,value:n.replace(Pt,"\r\n")}}).get()}});var It=/%20/g,At=/#.*$/,Rt=/([?&])_=[^&]*/,Ft=/^(.*?):[ \t]*([^\r\n]*)$/gm,zt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ut=/^(?:GET|HEAD)$/,Ht=/^\/\//,Bt={},jt={},Gt="*/".concat("*"),Wt=se.createElement("a");Wt.href=_t.href,ve.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:_t.href,type:"GET",isLocal:zt.test(_t.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Gt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":ve.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?ee(ee(e,ve.ajaxSettings),t):ee(ve.ajaxSettings,e)},ajaxPrefilter:Q(Bt),ajaxTransport:Q(jt),ajax:function(e,t){function i(e,t,i,a){var u,p,d,b,O,x=t;h||(h=!0,l&&n.clearTimeout(l),r=void 0,o=a||"",w.readyState=e>0?4:0,u=e>=200&&e<300||304===e,i&&(b=te(f,w,i)),b=ne(f,b,w,u),u?(f.ifModified&&(O=w.getResponseHeader("Last-Modified"),O&&(ve.lastModified[s]=O),O=w.getResponseHeader("etag"),O&&(ve.etag[s]=O)),204===e||"HEAD"===f.type?x="nocontent":304===e?x="notmodified":(x=b.state,p=b.data,d=b.error,u=!d)):(d=x,!e&&x||(x="error",e<0&&(e=0))),w.status=e,w.statusText=(t||x)+"",u?g.resolveWith(y,[p,x,w]):g.rejectWith(y,[w,x,d]),w.statusCode(L),L=void 0,c&&m.trigger(u?"ajaxSuccess":"ajaxError",[w,f,u?p:d]),v.fireWith(y,[w,x]),c&&(m.trigger("ajaxComplete",[w,f]),--ve.active||ve.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,s,o,a,l,u,h,c,p,d,f=ve.ajaxSetup({},t),y=f.context||f,m=f.context&&(y.nodeType||y.jquery)?ve(y):ve.event,g=ve.Deferred(),v=ve.Callbacks("once memory"),L=f.statusCode||{},b={},O={},x="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(h){if(!a)for(a={};t=Ft.exec(o);)a[t[1].toLowerCase()]=t[2];t=a[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return h?o:null},setRequestHeader:function(e,t){return null==h&&(e=O[e.toLowerCase()]=O[e.toLowerCase()]||e,b[e]=t),this},overrideMimeType:function(e){return null==h&&(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)w.always(e[w.status]);else for(t in e)L[t]=[L[t],e[t]];return this},abort:function(e){var t=e||x;return r&&r.abort(t),i(0,t),this}};if(g.promise(w),f.url=((e||f.url||_t.href)+"").replace(Ht,_t.protocol+"//"),f.type=t.method||t.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(Ie)||[""],null==f.crossDomain){u=se.createElement("a");try{u.href=f.url,u.href=u.href,f.crossDomain=Wt.protocol+"//"+Wt.host!=u.protocol+"//"+u.host}catch(e){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=ve.param(f.data,f.traditional)),J(Bt,f,t,w),h)return w;c=ve.event&&f.global,c&&0===ve.active++&&ve.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Ut.test(f.type),s=f.url.replace(At,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(It,"+")):(d=f.url.slice(s.length),f.data&&(s+=(kt.test(s)?"&":"?")+f.data,delete f.data),f.cache===!1&&(s=s.replace(Rt,"$1"),d=(kt.test(s)?"&":"?")+"_="+Tt++ +d),f.url=s+d),f.ifModified&&(ve.lastModified[s]&&w.setRequestHeader("If-Modified-Since",ve.lastModified[s]),ve.etag[s]&&w.setRequestHeader("If-None-Match",ve.etag[s])),(f.data&&f.hasContent&&f.contentType!==!1||t.contentType)&&w.setRequestHeader("Content-Type",f.contentType),w.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Gt+"; q=0.01":""):f.accepts["*"]);for(p in f.headers)w.setRequestHeader(p,f.headers[p]);if(f.beforeSend&&(f.beforeSend.call(y,w,f)===!1||h))return w.abort();if(x="abort",v.add(f.complete),w.done(f.success),w.fail(f.error),r=J(jt,f,t,w)){if(w.readyState=1,c&&m.trigger("ajaxSend",[w,f]),h)return w;f.async&&f.timeout>0&&(l=n.setTimeout(function(){w.abort("timeout")},f.timeout));try{h=!1,r.send(b,i)}catch(e){if(h)throw e;i(-1,e)}}else i(-1,"No Transport");return w},getJSON:function(e,t,n){return ve.get(e,t,n,"json")},getScript:function(e,t){return ve.get(e,void 0,t,"script")}}),ve.each(["get","post"],function(e,t){ve[t]=function(e,n,i,r){return ve.isFunction(n)&&(r=r||i,i=n,n=void 0),ve.ajax(ve.extend({url:e,type:t,dataType:r,data:n,success:i},ve.isPlainObject(e)&&e))}}),ve._evalUrl=function(e){return ve.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},ve.fn.extend({wrapAll:function(e){var t;return this[0]&&(ve.isFunction(e)&&(e=e.call(this[0])),t=ve(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return ve.isFunction(e)?this.each(function(t){ve(this).wrapInner(e.call(this,t))}):this.each(function(){var t=ve(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=ve.isFunction(e);return this.each(function(n){ve(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){
ve(this).replaceWith(this.childNodes)}),this}}),ve.expr.pseudos.hidden=function(e){return!ve.expr.pseudos.visible(e)},ve.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},ve.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(e){}};var qt={0:200,1223:204},Vt=ve.ajaxSettings.xhr();me.cors=!!Vt&&"withCredentials"in Vt,me.ajax=Vt=!!Vt,ve.ajaxTransport(function(e){var t,i;if(me.cors||Vt&&!e.crossDomain)return{send:function(r,s){var o,a=e.xhr();if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)a[o]=e.xhrFields[o];e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(o in r)a.setRequestHeader(o,r[o]);t=function(e){return function(){t&&(t=i=a.onload=a.onerror=a.onabort=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?s(0,"error"):s(a.status,a.statusText):s(qt[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=t(),i=a.onerror=t("error"),void 0!==a.onabort?a.onabort=i:a.onreadystatechange=function(){4===a.readyState&&n.setTimeout(function(){t&&i()})},t=t("abort");try{a.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}}),ve.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),ve.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return ve.globalEval(e),e}}}),ve.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),ve.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(i,r){t=ve("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&r("error"===e.type?404:200,e.type)}),se.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Xt=[],Yt=/(=)\?(?=&|$)|\?\?/;ve.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Xt.pop()||ve.expando+"_"+Tt++;return this[e]=!0,e}}),ve.ajaxPrefilter("json jsonp",function(e,t,i){var r,s,o,a=e.jsonp!==!1&&(Yt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Yt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=ve.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Yt,"$1"+r):e.jsonp!==!1&&(e.url+=(kt.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||ve.error(r+" was not called"),o[0]},e.dataTypes[0]="json",s=n[r],n[r]=function(){o=arguments},i.always(function(){void 0===s?ve(n).removeProp(r):n[r]=s,e[r]&&(e.jsonpCallback=t.jsonpCallback,Xt.push(r)),o&&ve.isFunction(s)&&s(o[0]),o=s=void 0}),"script"}),me.createHTMLDocument=function(){var e=se.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),ve.parseHTML=function(e,t,n){if("string"!=typeof e)return[];"boolean"==typeof t&&(n=t,t=!1);var i,r,s;return t||(me.createHTMLDocument?(t=se.implementation.createHTMLDocument(""),i=t.createElement("base"),i.href=se.location.href,t.head.appendChild(i)):t=se),r=_e.exec(e),s=!n&&[],r?[t.createElement(r[1])]:(r=w([e],t,s),s&&s.length&&ve(s).remove(),ve.merge([],r.childNodes))},ve.fn.load=function(e,t,n){var i,r,s,o=this,a=e.indexOf(" ");return a>-1&&(i=Z(e.slice(a)),e=e.slice(0,a)),ve.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),o.length>0&&ve.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){s=arguments,o.html(i?ve("<div>").append(ve.parseHTML(e)).find(i):e)}).always(n&&function(e,t){o.each(function(){n.apply(this,s||[e.responseText,t,e])})}),this},ve.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ve.fn[t]=function(e){return this.on(t,e)}}),ve.expr.pseudos.animated=function(e){return ve.grep(ve.timers,function(t){return e===t.elem}).length},ve.offset={setOffset:function(e,t,n){var i,r,s,o,a,l,u,h=ve.css(e,"position"),c=ve(e),p={};"static"===h&&(e.style.position="relative"),a=c.offset(),s=ve.css(e,"top"),l=ve.css(e,"left"),u=("absolute"===h||"fixed"===h)&&(s+l).indexOf("auto")>-1,u?(i=c.position(),o=i.top,r=i.left):(o=parseFloat(s)||0,r=parseFloat(l)||0),ve.isFunction(t)&&(t=t.call(e,n,ve.extend({},a))),null!=t.top&&(p.top=t.top-a.top+o),null!=t.left&&(p.left=t.left-a.left+r),"using"in t?t.using.call(e,p):c.css(p)}},ve.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){ve.offset.setOffset(this,e,t)});var t,n,i,r,s=this[0];if(s)return s.getClientRects().length?(i=s.getBoundingClientRect(),i.width||i.height?(r=s.ownerDocument,n=ie(r),t=r.documentElement,{top:i.top+n.pageYOffset-t.clientTop,left:i.left+n.pageXOffset-t.clientLeft}):i):{top:0,left:0}},position:function(){if(this[0]){var e,t,n=this[0],i={top:0,left:0};return"fixed"===ve.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),ve.nodeName(e[0],"html")||(i=e.offset()),i={top:i.top+ve.css(e[0],"borderTopWidth",!0),left:i.left+ve.css(e[0],"borderLeftWidth",!0)}),{top:t.top-i.top-ve.css(n,"marginTop",!0),left:t.left-i.left-ve.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===ve.css(e,"position");)e=e.offsetParent;return e||et})}}),ve.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;ve.fn[e]=function(i){return Fe(this,function(e,i,r){var s=ie(e);return void 0===r?s?s[t]:e[i]:void(s?s.scrollTo(n?s.pageXOffset:r,n?r:s.pageYOffset):e[i]=r)},e,i,arguments.length)}}),ve.each(["top","left"],function(e,t){ve.cssHooks[t]=R(me.pixelPosition,function(e,n){if(n)return n=A(e,t),ht.test(n)?ve(e).position()[t]+"px":n})}),ve.each({Height:"height",Width:"width"},function(e,t){ve.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){ve.fn[i]=function(r,s){var o=arguments.length&&(n||"boolean"!=typeof r),a=n||(r===!0||s===!0?"margin":"border");return Fe(this,function(t,n,r){var s;return ve.isWindow(t)?0===i.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(s=t.documentElement,Math.max(t.body["scroll"+e],s["scroll"+e],t.body["offset"+e],s["offset"+e],s["client"+e])):void 0===r?ve.css(t,n,a):ve.style(t,n,r,a)},t,o?r:void 0,o)}})}),ve.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),ve.parseJSON=JSON.parse,i=[],r=function(){return ve}.apply(t,i),!(void 0!==r&&(e.exports=r));var Zt=n.jQuery,$t=n.$;return ve.noConflict=function(e){return n.$===ve&&(n.$=$t),e&&n.jQuery===ve&&(n.jQuery=Zt),ve},s||(n.jQuery=n.$=ve),ve})},function(e,t,n){var i,r,s;/*!
	 * jQuery UI Dialog 1.12.1
	 * http://jqueryui.com
	 *
	 * Copyright jQuery Foundation and other contributors
	 * Released under the MIT license.
	 * http://jquery.org/license
	 */
!function(o){r=[n(1),n(3),n(13),n(14),n(21),n(23),n(12),n(26),n(20),n(18),n(24),n(25),n(6),n(5)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.widget("ui.dialog",{version:"1.12.1",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var n=e(this).css(t).offset().top;n<0&&e(this).css("top",t.top-n)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var n=this;this._isOpen&&this._trigger("beforeClose",t)!==!1&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||e.ui.safeBlur(e.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,function(){n._trigger("close",t)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,n){var i=!1,r=this.uiDialog.siblings(".ui-front:visible").map(function(){return+e(this).css("z-index")}).get(),s=Math.max.apply(null,r);return s>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",s+1),i=!0),i&&!n&&this._trigger("focus",t),i},open:function(){var t=this;return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=e(e.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._makeFocusTarget(),void this._trigger("open"))},_focusTabbable:function(){var e=this._focusedElement;e||(e=this.element.find("[autofocus]")),e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).trigger("focus")},_keepFocus:function(t){function n(){var t=e.ui.safeActiveElement(this.document[0]),n=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);n||this._focusTabbable()}t.preventDefault(),n.call(this),this._delay(n)},_createWrapper:function(){this.uiDialog=e("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),void this.close(t);if(t.keyCode===e.ui.keyCode.TAB&&!t.isDefaultPrevented()){var n=this.uiDialog.find(":tabbable"),i=n.filter(":first"),r=n.filter(":last");t.target!==r[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==i[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(this._delay(function(){r.trigger("focus")}),t.preventDefault()):(this._delay(function(){i.trigger("focus")}),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:e("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(t,"ui-dialog-title"),this._title(t),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title?e.text(this.options.title):e.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var t=this,n=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(n)||e.isArray(n)&&!n.length?void this._removeClass(this.uiDialog,"ui-dialog-buttons"):(e.each(n,function(n,i){var r,s;i=e.isFunction(i)?{click:i,text:n}:i,i=e.extend({type:"button"},i),r=i.click,s={icon:i.icon,iconPosition:i.iconPosition,showLabel:i.showLabel,icons:i.icons,text:i.text},delete i.click,delete i.icon,delete i.iconPosition,delete i.showLabel,delete i.icons,"boolean"==typeof i.text&&delete i.text,e("<button></button>",i).button(s).appendTo(t.uiButtonSet).on("click",function(){r.apply(t.element[0],arguments)})}),this._addClass(this.uiDialog,"ui-dialog-buttons"),void this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var n=this,i=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(i,r){n._addClass(e(this),"ui-dialog-dragging"),n._blockFrames(),n._trigger("dragStart",i,t(r))},drag:function(e,i){n._trigger("drag",e,t(i))},stop:function(r,s){var o=s.offset.left-n.document.scrollLeft(),a=s.offset.top-n.document.scrollTop();i.position={my:"left top",at:"left"+(o>=0?"+":"")+o+" top"+(a>=0?"+":"")+a,of:n.window},n._removeClass(e(this),"ui-dialog-dragging"),n._unblockFrames(),n._trigger("dragStop",r,t(s))}})},_makeResizable:function(){function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var n=this,i=this.options,r=i.resizable,s=this.uiDialog.css("position"),o="string"==typeof r?r:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:i.maxWidth,maxHeight:i.maxHeight,minWidth:i.minWidth,minHeight:this._minHeight(),handles:o,start:function(i,r){n._addClass(e(this),"ui-dialog-resizing"),n._blockFrames(),n._trigger("resizeStart",i,t(r))},resize:function(e,i){n._trigger("resize",e,t(i))},stop:function(r,s){var o=n.uiDialog.offset(),a=o.left-n.document.scrollLeft(),l=o.top-n.document.scrollTop();i.height=n.uiDialog.height(),i.width=n.uiDialog.width(),i.position={my:"left top",at:"left"+(a>=0?"+":"")+a+" top"+(l>=0?"+":"")+l,of:n.window},n._removeClass(e(this),"ui-dialog-resizing"),n._unblockFrames(),n._trigger("resizeStop",r,t(s))}}).css("position",s)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget(),this._focusedElement=e(t.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),n=e.inArray(this,t);n!==-1&&t.splice(n,1)},_trackingInstances:function(){var e=this.document.data("ui-dialog-instances");return e||(e=[],this.document.data("ui-dialog-instances",e)),e},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(t){var n=this,i=!1,r={};e.each(t,function(e,t){n._setOption(e,t),e in n.sizeRelatedOptions&&(i=!0),e in n.resizableRelatedOptions&&(r[e]=t)}),i&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",r)},_setOption:function(t,n){var i,r,s=this.uiDialog;"disabled"!==t&&(this._super(t,n),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:e("<a>").text(""+this.options.closeText).html()}),"draggable"===t&&(i=s.is(":data(ui-draggable)"),i&&!n&&s.draggable("destroy"),!i&&n&&this._makeDraggable()),"position"===t&&this._position(),"resizable"===t&&(r=s.is(":data(ui-resizable)"),r&&!n&&s.resizable("destroy"),r&&"string"==typeof n&&s.resizable("option","handles",n),r||n===!1||this._makeResizable()),"title"===t&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,n,i=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),i.minWidth>i.width&&(i.width=i.minWidth),e=this.uiDialog.css({height:"auto",width:i.width}).outerHeight(),t=Math.max(0,i.minHeight-e),n="number"==typeof i.maxHeight?Math.max(0,i.maxHeight-e):"none","auto"===i.height?this.element.css({minHeight:t,maxHeight:n,height:"auto"}):this.element.height(Math.max(0,i.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return!!e(t.target).closest(".ui-dialog").length||!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=!0;this._delay(function(){t=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(e){t||this._allowInteraction(e)||(e.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=e("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var e=this.document.data("ui-dialog-overlays")-1;e?this.document.data("ui-dialog-overlays",e):(this._off(this.document,"focusin"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null}}}),e.uiBackCompat!==!1&&e.widget("ui.dialog",e.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(e,t){"dialogClass"===e&&this.uiDialog.removeClass(this.options.dialogClass).addClass(t),this._superApply(arguments)}}),e.ui.dialog})},function(e,t,n){var i,r,s;/*!
	 * jQuery UI Button 1.12.1
	 * http://jqueryui.com
	 *
	 * Copyright jQuery Foundation and other contributors
	 * Released under the MIT license.
	 * http://jquery.org/license
	 */
!function(o){r=[n(1),n(4),n(7),n(12),n(5)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.widget("ui.button",{version:"1.12.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var e,t=this._super()||{};return this.isInput=this.element.is("input"),e=this.element[0].disabled,null!=e&&(t.disabled=e),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(t.label=this.originalLabel),t},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(t){t.keyCode===e.ui.keyCode.SPACE&&(t.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(t,n){var i="iconPosition"!==t,r=i?this.options.iconPosition:n,s="top"===r||"bottom"===r;this.icon?i&&this._removeClass(this.icon,null,this.options.icon):(this.icon=e("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),i&&this._addClass(this.icon,null,n),this._attachIcon(r),s?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=e("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(r))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(e){this.icon[/^(?:end|bottom)/.test(e)?"before":"after"](this.iconSpace)},_attachIcon:function(e){this.element[/^(?:end|bottom)/.test(e)?"append":"prepend"](this.icon)},_setOptions:function(e){var t=void 0===e.showLabel?this.options.showLabel:e.showLabel,n=void 0===e.icon?this.options.icon:e.icon;t||n||(e.showLabel=!0),this._super(e)},_setOption:function(e,t){"icon"===e&&(t?this._updateIcon(e,t):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),"iconPosition"===e&&this._updateIcon(e,t),"showLabel"===e&&(this._toggleClass("ui-button-icon-only",null,!t),this._updateTooltip()),"label"===e&&(this.isInput?this.element.val(t):(this.element.html(t),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(e,t),"disabled"===e&&(this._toggleClass(null,"ui-state-disabled",t),this.element[0].disabled=t,t&&this.element.blur())},refresh:function(){var e=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOptions({disabled:e}),this._updateTooltip()}}),e.uiBackCompat!==!1&&(e.widget("ui.button",e.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(e,t){return"text"===e?void this._super("showLabel",t):("showLabel"===e&&(this.options.text=t),"icon"===e&&(this.options.icons.primary=t),"icons"===e&&(t.primary?(this._super("icon",t.primary),this._super("iconPosition","beginning")):t.secondary&&(this._super("icon",t.secondary),this._super("iconPosition","end"))),void this._superApply(arguments))}}),e.fn.button=function(t){return function(){return!this.length||this.length&&"INPUT"!==this[0].tagName||this.length&&"INPUT"===this[0].tagName&&"checkbox"!==this.attr("type")&&"radio"!==this.attr("type")?t.apply(this,arguments):(e.ui.checkboxradio||e.error("Checkboxradio widget missing"),0===arguments.length?this.checkboxradio({icon:!1}):this.checkboxradio.apply(this,arguments))}}(e.fn.button),e.fn.buttonset=function(){return e.ui.controlgroup||e.error("Controlgroup widget missing"),"option"===arguments[0]&&"items"===arguments[1]&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):"option"===arguments[0]&&"items"===arguments[1]?this.controlgroup.apply(this,[arguments[0],"items.button"]):("object"==typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))}),e.ui.button})},function(e,t,n){var i,r,s;/*!
	 * jQuery UI Controlgroup 1.12.1
	 * http://jqueryui.com
	 *
	 * Copyright jQuery Foundation and other contributors
	 * Released under the MIT license.
	 * http://jquery.org/license
	 */
!function(o){r=[n(1),n(5)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){var t=/ui-corner-([a-z]){2,6}/g;return e.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var t=this,n=[];e.each(this.options.items,function(i,r){var s,o={};if(r)return"controlgroupLabel"===i?(s=t.element.find(r),s.each(function(){var t=e(this);t.children(".ui-controlgroup-label-contents").length||t.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")}),t._addClass(s,null,"ui-widget ui-widget-content ui-state-default"),void(n=n.concat(s.get()))):void(e.fn[i]&&(o=t["_"+i+"Options"]?t["_"+i+"Options"]("middle"):{classes:{}},t.element.find(r).each(function(){var r=e(this),s=r[i]("instance"),a=e.widget.extend({},o);if("button"!==i||!r.parent(".ui-spinner").length){s||(s=r[i]()[i]("instance")),s&&(a.classes=t._resolveClassesValues(a.classes,s)),r[i](a);var l=r[i]("widget");e.data(l[0],"ui-controlgroup-data",s?s:r[i]("instance")),n.push(l[0])}})))}),this.childWidgets=e(e.unique(n)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(t){this.childWidgets.each(function(){var n=e(this),i=n.data("ui-controlgroup-data");i&&i[t]&&i[t]()})},_updateCornerClass:function(e,t){var n="ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all",i=this._buildSimpleOptions(t,"label").classes.label;this._removeClass(e,null,n),this._addClass(e,null,i)},_buildSimpleOptions:function(e,t){var n="vertical"===this.options.direction,i={classes:{}};return i.classes[t]={middle:"",first:"ui-corner-"+(n?"top":"left"),last:"ui-corner-"+(n?"bottom":"right"),only:"ui-corner-all"}[e],i},_spinnerOptions:function(e){var t=this._buildSimpleOptions(e,"ui-spinner");return t.classes["ui-spinner-up"]="",t.classes["ui-spinner-down"]="",t},_buttonOptions:function(e){return this._buildSimpleOptions(e,"ui-button")},_checkboxradioOptions:function(e){return this._buildSimpleOptions(e,"ui-checkboxradio-label")},_selectmenuOptions:function(e){var t="vertical"===this.options.direction;return{width:!!t&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(t?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(t?"top":"left")},last:{"ui-selectmenu-button-open":t?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(t?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[e]}},_resolveClassesValues:function(n,i){var r={};return e.each(n,function(s){var o=i.options.classes[s]||"";o=e.trim(o.replace(t,"")),r[s]=(o+" "+n[s]).replace(/\s+/g," ")}),r},_setOption:function(e,t){return"direction"===e&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(e,t),"disabled"===e?void this._callChildMethod(t?"disable":"enable"):void this.refresh()},refresh:function(){var t,n=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),t=this.childWidgets,this.options.onlyVisible&&(t=t.filter(":visible")),t.length&&(e.each(["first","last"],function(e,i){var r=t[i]().data("ui-controlgroup-data");if(r&&n["_"+r.widgetName+"Options"]){var s=n["_"+r.widgetName+"Options"](1===t.length?"only":i);s.classes=n._resolveClassesValues(s.classes,r),r.element[r.widgetName](s)}else n._updateCornerClass(t[i](),i)}),this._callChildMethod("refresh"))}})})},function(e,t,n){var i,r,s;/*!
	 * jQuery UI Widget 1.12.1
	 * http://jqueryui.com
	 *
	 * Copyright jQuery Foundation and other contributors
	 * Released under the MIT license.
	 * http://jquery.org/license
	 */
!function(o){r=[n(1),n(6)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){var t=0,n=Array.prototype.slice;return e.cleanData=function(t){return function(n){var i,r,s;for(s=0;null!=(r=n[s]);s++)try{i=e._data(r,"events"),i&&i.remove&&e(r).triggerHandler("remove")}catch(e){}t(n)}}(e.cleanData),e.widget=function(t,n,i){var r,s,o,a={},l=t.split(".")[0];t=t.split(".")[1];var u=l+"-"+t;return i||(i=n,n=e.Widget),e.isArray(i)&&(i=e.extend.apply(null,[{}].concat(i))),e.expr[":"][u.toLowerCase()]=function(t){return!!e.data(t,u)},e[l]=e[l]||{},r=e[l][t],s=e[l][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new s(e,t)},e.extend(s,r,{version:i.version,_proto:e.extend({},i),_childConstructors:[]}),o=new n,o.options=e.widget.extend({},o.options),e.each(i,function(t,i){return e.isFunction(i)?void(a[t]=function(){function e(){return n.prototype[t].apply(this,arguments)}function r(e){return n.prototype[t].apply(this,e)}return function(){var t,n=this._super,s=this._superApply;return this._super=e,this._superApply=r,t=i.apply(this,arguments),this._super=n,this._superApply=s,t}}()):void(a[t]=i)}),s.prototype=e.widget.extend(o,{widgetEventPrefix:r?o.widgetEventPrefix||t:t},a,{constructor:s,namespace:l,widgetName:t,widgetFullName:u}),r?(e.each(r._childConstructors,function(t,n){var i=n.prototype;e.widget(i.namespace+"."+i.widgetName,s,n._proto)}),delete r._childConstructors):n._childConstructors.push(s),e.widget.bridge(t,s),s},e.widget.extend=function(t){for(var i,r,s=n.call(arguments,1),o=0,a=s.length;o<a;o++)for(i in s[o])r=s[o][i],s[o].hasOwnProperty(i)&&void 0!==r&&(e.isPlainObject(r)?t[i]=e.isPlainObject(t[i])?e.widget.extend({},t[i],r):e.widget.extend({},r):t[i]=r);return t},e.widget.bridge=function(t,i){var r=i.prototype.widgetFullName||t;e.fn[t]=function(s){var o="string"==typeof s,a=n.call(arguments,1),l=this;return o?this.length||"instance"!==s?this.each(function(){var n,i=e.data(this,r);return"instance"===s?(l=i,!1):i?e.isFunction(i[s])&&"_"!==s.charAt(0)?(n=i[s].apply(i,a),n!==i&&void 0!==n?(l=n&&n.jquery?l.pushStack(n.get()):n,!1):void 0):e.error("no such method '"+s+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+s+"'")}):l=void 0:(a.length&&(s=e.widget.extend.apply(null,[s].concat(a))),this.each(function(){var t=e.data(this,r);t?(t.option(s||{}),t._init&&t._init()):e.data(this,r,new i(s,this))})),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(n,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=t++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),this.classesElementLookup={},i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),n),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){var t=this;this._destroy(),e.each(this.classesElementLookup,function(e,n){t._removeClass(n,e)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var i,r,s,o=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(o={},i=t.split("."),t=i.shift(),i.length){for(r=o[t]=e.widget.extend({},this.options[t]),s=0;s<i.length-1;s++)r[i[s]]=r[i[s]]||{},r=r[i[s]];if(t=i.pop(),1===arguments.length)return void 0===r[t]?null:r[t];r[t]=n}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=n}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(t){var n,i,r;for(n in t)r=this.classesElementLookup[n],t[n]!==this.options.classes[n]&&r&&r.length&&(i=e(r.get()),this._removeClass(r,n),i.addClass(this._classes({element:i,keys:n,classes:t,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(t){function n(n,s){var o,a;for(a=0;a<n.length;a++)o=r.classesElementLookup[n[a]]||e(),o=e(t.add?e.unique(o.get().concat(t.element.get())):o.not(t.element).get()),r.classesElementLookup[n[a]]=o,i.push(n[a]),s&&t.classes[n[a]]&&i.push(t.classes[n[a]])}var i=[],r=this;return t=e.extend({element:this.element,classes:this.options.classes||{}},t),this._on(t.element,{remove:"_untrackClassesElement"}),t.keys&&n(t.keys.match(/\S+/g)||[],!0),t.extra&&n(t.extra.match(/\S+/g)||[]),i.join(" ")},_untrackClassesElement:function(t){var n=this;e.each(n.classesElementLookup,function(i,r){e.inArray(t.target,r)!==-1&&(n.classesElementLookup[i]=e(r.not(t.target).get()))})},_removeClass:function(e,t,n){return this._toggleClass(e,t,n,!1)},_addClass:function(e,t,n){return this._toggleClass(e,t,n,!0)},_toggleClass:function(e,t,n,i){i="boolean"==typeof i?i:n;var r="string"==typeof e||null===e,s={extra:r?t:n,keys:r?e:t,element:r?this.element:e,add:i};return s.element.toggleClass(this._classes(s),i),this},_on:function(t,n,i){var r,s=this;"boolean"!=typeof t&&(i=n,n=t,t=!1),i?(n=r=e(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,r=this.widget()),e.each(i,function(i,o){function a(){if(t||s.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof o?s[o]:o).apply(s,arguments)}"string"!=typeof o&&(a.guid=o.guid=o.guid||a.guid||e.guid++);var l=i.match(/^([\w:-]*)\s*(.*)$/),u=l[1]+s.eventNamespace,h=l[2];h?r.on(u,h,a):n.on(u,a)})},_off:function(t,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(n).off(n),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function n(){return("string"==typeof e?i[e]:e).apply(i,arguments)}var i=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(e(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(e(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,n,i){var r,s,o=this.options[t];if(i=i||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent)for(r in s)r in n||(n[r]=s[r]);return this.element.trigger(n,i),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(i,r,s){"string"==typeof r&&(r={effect:r});var o,a=r?r===!0||"number"==typeof r?n:r.effect||n:t;r=r||{},"number"==typeof r&&(r={duration:r}),o=!e.isEmptyObject(r),r.complete=s,r.delay&&i.delay(r.delay),o&&e.effects&&e.effects.effect[a]?i[t](r):a!==t&&i[a]?i[a](r.duration,r.easing,s):i.queue(function(n){e(this)[t](),s&&s.call(i[0]),n()})}}),e.widget})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.ui=e.ui||{},e.ui.version="1.12.1"})},function(e,t,n){var i,r,s;/*!
	 * jQuery UI Checkboxradio 1.12.1
	 * http://jqueryui.com
	 *
	 * Copyright jQuery Foundation and other contributors
	 * Released under the MIT license.
	 * http://jquery.org/license
	 */
!function(o){r=[n(1),n(8),n(9),n(11),n(5)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.widget("ui.checkboxradio",[e.ui.formResetMixin,{version:"1.12.1",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var t,n,i=this,r=this._super()||{};return this._readType(),n=this.element.labels(),this.label=e(n[n.length-1]),this.label.length||e.error("No label found for checkboxradio widget"),this.originalLabel="",this.label.contents().not(this.element[0]).each(function(){i.originalLabel+=3===this.nodeType?e(this).text():this.outerHTML}),this.originalLabel&&(r.label=this.originalLabel),t=this.element[0].disabled,null!=t&&(r.disabled=t),r},_create:function(){var e=this.element[0].checked;this._bindFormResetHandler(),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),"radio"===this.type&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),e&&(this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this.icon&&this._addClass(this.icon,null,"ui-state-hover")),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var t=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,"input"===t&&/radio|checkbox/.test(this.type)||e.error("Can't create checkboxradio on element.nodeName="+t+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var t,n=this.element[0].name,i="input[name='"+e.ui.escapeSelector(n)+"']";return n?(t=this.form.length?e(this.form[0].elements).filter(i):e(i).filter(function(){return 0===e(this).form().length}),t.not(this.element)):e([])},_toggleClasses:function(){var t=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t),this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",t)._toggleClass(this.icon,null,"ui-icon-blank",!t),"radio"===this.type&&this._getRadioGroup().each(function(){var t=e(this).checkboxradio("instance");t&&t._removeClass(t.label,"ui-checkboxradio-checked","ui-state-active")})},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(e,t){if("label"!==e||t)return this._super(e,t),"disabled"===e?(this._toggleClass(this.label,null,"ui-state-disabled",t),void(this.element[0].disabled=t)):void this.refresh()},_updateIcon:function(t){var n="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=e("<span>"),this.iconSpace=e("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),"checkbox"===this.type?(n+=t?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,t?"ui-icon-blank":"ui-icon-check")):n+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",n),t||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var e=this.label.contents().not(this.element[0]);this.icon&&(e=e.not(this.icon[0])),this.iconSpace&&(e=e.not(this.iconSpace[0])),e.remove(),this.label.append(this.options.label)},refresh:function(){var e=this.element[0].checked,t=this.element[0].disabled;this._updateIcon(e),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",e),null!==this.options.label&&this._updateLabel(),t!==this.options.disabled&&this._setOptions({disabled:t})}}]),e.ui.checkboxradio})},function(e,t,n){var i,r,s;!function(o){r=[n(1),n(6)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.ui.escapeSelector=function(){var e=/([!"#$%&'()*+,.\/:;<=>?@[\]^`{|}~])/g;return function(t){return t.replace(e,"\\$1")}}()})},function(e,t,n){var i,r,s;/*!
	 * jQuery UI Form Reset Mixin 1.12.1
	 * http://jqueryui.com
	 *
	 * Copyright jQuery Foundation and other contributors
	 * Released under the MIT license.
	 * http://jquery.org/license
	 */
!function(o){r=[n(1),n(10),n(6)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.ui.formResetMixin={_formResetHandler:function(){var t=e(this);setTimeout(function(){var n=t.data("ui-form-reset-instances");e.each(n,function(){this.refresh()})})},_bindFormResetHandler:function(){if(this.form=this.element.form(),this.form.length){var e=this.form.data("ui-form-reset-instances")||[];e.length||this.form.on("reset.ui-form-reset",this._formResetHandler),e.push(this),this.form.data("ui-form-reset-instances",e)}},_unbindFormResetHandler:function(){if(this.form.length){var t=this.form.data("ui-form-reset-instances");t.splice(e.inArray(this,t),1),t.length?this.form.data("ui-form-reset-instances",t):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}}})},function(e,t,n){var i,r,s;!function(o){r=[n(1),n(6)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.fn.form=function(){return"string"==typeof this[0].form?this.closest("form"):e(this[0].form)}})},function(e,t,n){var i,r,s;/*!
	 * jQuery UI Labels 1.12.1
	 * http://jqueryui.com
	 *
	 * Copyright jQuery Foundation and other contributors
	 * Released under the MIT license.
	 * http://jquery.org/license
	 */
!function(o){r=[n(1),n(6),n(8)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.fn.labels=function(){var t,n,i,r,s;return this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(r=this.eq(0).parents("label"),i=this.attr("id"),i&&(t=this.eq(0).parents().last(),s=t.add(t.length?t.siblings():this.siblings()),n="label[for='"+e.ui.escapeSelector(i)+"']",r=r.add(s.find(n).addBack(n))),this.pushStack(r))}})},function(e,t,n){var i,r,s;/*!
	 * jQuery UI Keycode 1.12.1
	 * http://jqueryui.com
	 *
	 * Copyright jQuery Foundation and other contributors
	 * Released under the MIT license.
	 * http://jquery.org/license
	 */
!function(o){r=[n(1),n(6)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}})},function(e,t,n){var i,r,s;/*!
	 * jQuery UI Draggable 1.12.1
	 * http://jqueryui.com
	 *
	 * Copyright jQuery Foundation and other contributors
	 * Released under the MIT license.
	 * http://jquery.org/license
	 */
!function(o){r=[n(1),n(14),n(16),n(17),n(20),n(18),n(19),n(6),n(5)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.widget("ui.draggable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(t){var n=this.options;return!(this.helper||n.disabled||e(t.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(t),!!this.handle&&(this._blurActiveElement(t),this._blockFrames(n.iframeFix===!0?"iframe":n.iframeFix),!0))},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var n=e.ui.safeActiveElement(this.document[0]),i=e(t.target);i.closest(n).length||e.ui.safeBlur(n)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===e(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,n){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!n){var i=this._uiHash();if(this._trigger("drag",t,i)===!1)return this._mouseUp(new e.Event("mouseup",t)),!1;this.position=i.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=this,i=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(i=e.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",t)!==!1&&n._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.trigger("focus"),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new e.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!e(t.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(t){var n=this.options,i=e.isFunction(n.helper),r=i?e(n.helper.apply(this.element[0],[t])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),i&&r[0]===this.element[0]&&this._setPositionRelative(),r[0]===this.element[0]||/(fixed|absolute)/.test(r.css("position"))||r.css("position","absolute"),r},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),n=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==n&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,i,r=this.options,s=this.document[0];return this.relativeContainer=null,r.containment?"window"===r.containment?void(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||s.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===r.containment?void(this.containment=[0,0,e(s).width()-this.helperProportions.width-this.margins.left,(e(s).height()||s.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):r.containment.constructor===Array?void(this.containment=r.containment):("parent"===r.containment&&(r.containment=this.helper[0].parentNode),n=e(r.containment),i=n[0],void(i&&(t=/(scroll|auto)/.test(n.css("overflow")),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(t?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=n))):void(this.containment=null)},_convertPositionTo:function(e,t){t||(t=this.position);var n="absolute"===e?1:-1,i=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.offset.scroll.top:i?0:this.offset.scroll.top)*n,left:t.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.offset.scroll.left:i?0:this.offset.scroll.left)*n}},_generatePosition:function(e,t){var n,i,r,s,o=this.options,a=this._isRootNode(this.scrollParent[0]),l=e.pageX,u=e.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(i=this.relativeContainer.offset(),n=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):n=this.containment,e.pageX-this.offset.click.left<n[0]&&(l=n[0]+this.offset.click.left),e.pageY-this.offset.click.top<n[1]&&(u=n[1]+this.offset.click.top),e.pageX-this.offset.click.left>n[2]&&(l=n[2]+this.offset.click.left),e.pageY-this.offset.click.top>n[3]&&(u=n[3]+this.offset.click.top)),o.grid&&(r=o.grid[1]?this.originalPageY+Math.round((u-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,u=n?r-this.offset.click.top>=n[1]||r-this.offset.click.top>n[3]?r:r-this.offset.click.top>=n[1]?r-o.grid[1]:r+o.grid[1]:r,s=o.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,l=n?s-this.offset.click.left>=n[0]||s-this.offset.click.left>n[2]?s:s-this.offset.click.left>=n[0]?s-o.grid[0]:s+o.grid[0]:s),"y"===o.axis&&(l=this.originalPageX),"x"===o.axis&&(u=this.originalPageY)),{top:u-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(t,n,i){return i=i||this._uiHash(),e.ui.plugin.call(this,t,[n,i,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),i.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,n,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n,i){var r=e.extend({},n,{item:i.element});i.sortables=[],e(i.options.connectToSortable).each(function(){var n=e(this).sortable("instance");n&&!n.options.disabled&&(i.sortables.push(n),n.refreshPositions(),n._trigger("activate",t,r))})},stop:function(t,n,i){var r=e.extend({},n,{item:i.element});i.cancelHelperRemoval=!1,e.each(i.sortables,function(){var e=this;e.isOver?(e.isOver=0,i.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,r))})},drag:function(t,n,i){e.each(i.sortables,function(){var r=!1,s=this;s.positionAbs=i.positionAbs,s.helperProportions=i.helperProportions,s.offset.click=i.offset.click,s._intersectsWith(s.containerCache)&&(r=!0,e.each(i.sortables,function(){return this.positionAbs=i.positionAbs,this.helperProportions=i.helperProportions,this.offset.click=i.offset.click,this!==s&&this._intersectsWith(this.containerCache)&&e.contains(s.element[0],this.element[0])&&(r=!1),r})),r?(s.isOver||(s.isOver=1,i._parent=n.helper.parent(),s.currentItem=n.helper.appendTo(s.element).data("ui-sortable-item",!0),s.options._helper=s.options.helper,s.options.helper=function(){return n.helper[0]},t.target=s.currentItem[0],s._mouseCapture(t,!0),s._mouseStart(t,!0,!0),s.offset.click.top=i.offset.click.top,s.offset.click.left=i.offset.click.left,s.offset.parent.left-=i.offset.parent.left-s.offset.parent.left,s.offset.parent.top-=i.offset.parent.top-s.offset.parent.top,i._trigger("toSortable",t),i.dropped=s.element,e.each(i.sortables,function(){this.refreshPositions()}),i.currentItem=i.element,s.fromOutside=i),s.currentItem&&(s._mouseDrag(t),n.position=s.position)):s.isOver&&(s.isOver=0,s.cancelHelperRemoval=!0,s.options._revert=s.options.revert,s.options.revert=!1,s._trigger("out",t,s._uiHash(s)),s._mouseStop(t,!0),s.options.revert=s.options._revert,s.options.helper=s.options._helper,s.placeholder&&s.placeholder.remove(),n.helper.appendTo(i._parent),i._refreshOffsets(t),n.position=i._generatePosition(t,!0),i._trigger("fromSortable",t),i.dropped=!1,e.each(i.sortables,function(){this.refreshPositions()}))})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,n,i){var r=e("body"),s=i.options;r.css("cursor")&&(s._cursor=r.css("cursor")),r.css("cursor",s.cursor)},stop:function(t,n,i){var r=i.options;r._cursor&&e("body").css("cursor",r._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n,i){var r=e(n.helper),s=i.options;r.css("opacity")&&(s._opacity=r.css("opacity")),r.css("opacity",s.opacity)},stop:function(t,n,i){var r=i.options;r._opacity&&e(n.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,n){n.scrollParentNotHidden||(n.scrollParentNotHidden=n.helper.scrollParent(!1)),n.scrollParentNotHidden[0]!==n.document[0]&&"HTML"!==n.scrollParentNotHidden[0].tagName&&(n.overflowOffset=n.scrollParentNotHidden.offset())},drag:function(t,n,i){var r=i.options,s=!1,o=i.scrollParentNotHidden[0],a=i.document[0];o!==a&&"HTML"!==o.tagName?(r.axis&&"x"===r.axis||(i.overflowOffset.top+o.offsetHeight-t.pageY<r.scrollSensitivity?o.scrollTop=s=o.scrollTop+r.scrollSpeed:t.pageY-i.overflowOffset.top<r.scrollSensitivity&&(o.scrollTop=s=o.scrollTop-r.scrollSpeed)),r.axis&&"y"===r.axis||(i.overflowOffset.left+o.offsetWidth-t.pageX<r.scrollSensitivity?o.scrollLeft=s=o.scrollLeft+r.scrollSpeed:t.pageX-i.overflowOffset.left<r.scrollSensitivity&&(o.scrollLeft=s=o.scrollLeft-r.scrollSpeed))):(r.axis&&"x"===r.axis||(t.pageY-e(a).scrollTop()<r.scrollSensitivity?s=e(a).scrollTop(e(a).scrollTop()-r.scrollSpeed):e(window).height()-(t.pageY-e(a).scrollTop())<r.scrollSensitivity&&(s=e(a).scrollTop(e(a).scrollTop()+r.scrollSpeed))),r.axis&&"y"===r.axis||(t.pageX-e(a).scrollLeft()<r.scrollSensitivity?s=e(a).scrollLeft(e(a).scrollLeft()-r.scrollSpeed):e(window).width()-(t.pageX-e(a).scrollLeft())<r.scrollSensitivity&&(s=e(a).scrollLeft(e(a).scrollLeft()+r.scrollSpeed)))),s!==!1&&e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,n,i){var r=i.options;i.snapElements=[],e(r.snap.constructor!==String?r.snap.items||":data(ui-draggable)":r.snap).each(function(){var t=e(this),n=t.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})})},drag:function(t,n,i){var r,s,o,a,l,u,h,c,p,d,f=i.options,y=f.snapTolerance,m=n.offset.left,g=m+i.helperProportions.width,v=n.offset.top,L=v+i.helperProportions.height;for(p=i.snapElements.length-1;p>=0;p--)l=i.snapElements[p].left-i.margins.left,u=l+i.snapElements[p].width,h=i.snapElements[p].top-i.margins.top,c=h+i.snapElements[p].height,g<l-y||m>u+y||L<h-y||v>c+y||!e.contains(i.snapElements[p].item.ownerDocument,i.snapElements[p].item)?(i.snapElements[p].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,t,e.extend(i._uiHash(),{snapItem:i.snapElements[p].item})),i.snapElements[p].snapping=!1):("inner"!==f.snapMode&&(r=Math.abs(h-L)<=y,s=Math.abs(c-v)<=y,o=Math.abs(l-g)<=y,a=Math.abs(u-m)<=y,r&&(n.position.top=i._convertPositionTo("relative",{top:h-i.helperProportions.height,left:0}).top),s&&(n.position.top=i._convertPositionTo("relative",{top:c,left:0}).top),o&&(n.position.left=i._convertPositionTo("relative",{top:0,left:l-i.helperProportions.width}).left),a&&(n.position.left=i._convertPositionTo("relative",{top:0,left:u}).left)),d=r||s||o||a,"outer"!==f.snapMode&&(r=Math.abs(h-v)<=y,s=Math.abs(c-L)<=y,o=Math.abs(l-m)<=y,a=Math.abs(u-g)<=y,r&&(n.position.top=i._convertPositionTo("relative",{top:h,left:0}).top),s&&(n.position.top=i._convertPositionTo("relative",{top:c-i.helperProportions.height,left:0}).top),o&&(n.position.left=i._convertPositionTo("relative",{top:0,left:l}).left),a&&(n.position.left=i._convertPositionTo("relative",{top:0,left:u-i.helperProportions.width}).left)),!i.snapElements[p].snapping&&(r||s||o||a||d)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,t,e.extend(i._uiHash(),{snapItem:i.snapElements[p].item})),i.snapElements[p].snapping=r||s||o||a||d)}}),e.ui.plugin.add("draggable","stack",{start:function(t,n,i){var r,s=i.options,o=e.makeArray(e(s.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});o.length&&(r=parseInt(e(o[0]).css("zIndex"),10)||0,e(o).each(function(t){e(this).css("zIndex",r+t)}),this.css("zIndex",r+o.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n,i){var r=e(n.helper),s=i.options;r.css("zIndex")&&(s._zIndex=r.css("zIndex")),r.css("zIndex",s.zIndex)},stop:function(t,n,i){var r=i.options;r._zIndex&&e(n.helper).css("zIndex",r._zIndex)}}),e.ui.draggable})},function(e,t,n){var i,r,s;/*!
	 * jQuery UI Mouse 1.12.1
	 * http://jqueryui.com
	 *
	 * Copyright jQuery Foundation and other contributors
	 * Released under the MIT license.
	 * http://jquery.org/license
	 */
!function(o){r=[n(1),n(15),n(6),n(5)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){var t=!1;return e(document).on("mouseup",function(){t=!1}),e.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).on("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(!t){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var i=this,r=1===n.which,s=!("string"!=typeof this.options.cancel||!n.target.nodeName)&&e(n.target).closest(this.options.cancel).length;return!(r&&!s&&this._mouseCapture(n))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(n)&&this._mouseDelayMet(n)&&(this._mouseStarted=this._mouseStart(n)!==!1,!this._mouseStarted)?(n.preventDefault(),!0):(!0===e.data(n.target,this.widgetName+".preventClickEvent")&&e.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),t=!0,!0))}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(n){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,n.target===this._mouseDownEvent.target&&e.data(n.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(n)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,t=!1,n.preventDefault()},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1),n(6)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())})},function(e,t,n){var i,r,s;/*!
	 * jQuery UI :data 1.12.1
	 * http://jqueryui.com
	 *
	 * Copyright jQuery Foundation and other contributors
	 * Released under the MIT license.
	 * http://jquery.org/license
	 */
!function(o){r=[n(1),n(6)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,i){return!!e.data(t,i[3])}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1),n(6)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.ui.plugin={add:function(t,n,i){var r,s=e.ui[t].prototype;for(r in i)s.plugins[r]=s.plugins[r]||[],s.plugins[r].push([n,i[r]])},call:function(e,t,n,i){var r,s=e.plugins[t];if(s&&(i||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(r=0;r<s.length;r++)e.options[s[r][0]]&&s[r][1].apply(e.element,n)}}})},function(e,t,n){var i,r,s;!function(o){r=[n(1),n(6)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.ui.safeBlur=function(t){t&&"body"!==t.nodeName.toLowerCase()&&e(t).trigger("blur")}})},function(e,t,n){var i,r,s;/*!
	 * jQuery UI Scroll Parent 1.12.1
	 * http://jqueryui.com
	 *
	 * Copyright jQuery Foundation and other contributors
	 * Released under the MIT license.
	 * http://jquery.org/license
	 */
!function(o){r=[n(1),n(6)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.fn.scrollParent=function(t){var n=this.css("position"),i="absolute"===n,r=t?/(auto|scroll|hidden)/:/(auto|scroll)/,s=this.parents().filter(function(){var t=e(this);return(!i||"static"!==t.css("position"))&&r.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==n&&s.length?s:e(this[0].ownerDocument||document)}})},function(e,t,n){var i,r,s;!function(o){r=[n(1),n(6)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.ui.safeActiveElement=function(e){var t;try{t=e.activeElement}catch(n){t=e.body}return t||(t=e.body),t.nodeName||(t=e.body),t}})},function(e,t,n){var i,r,s;/*!
	 * jQuery UI Resizable 1.12.1
	 * http://jqueryui.com
	 *
	 * Copyright jQuery Foundation and other contributors
	 * Released under the MIT license.
	 * http://jquery.org/license
	 */
!function(o){r=[n(1),n(14),n(22),n(17),n(6),n(5)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.widget("ui.resizable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseFloat(e)||0},_isNumber:function(e){return!isNaN(parseFloat(e))},_hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var i=n&&"left"===n?"scrollLeft":"scrollTop",r=!1;return t[i]>0||(t[i]=1,r=t[i]>0,t[i]=0,r)},_create:function(){var t,n=this.options,i=this;this._addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!n.aspectRatio,aspectRatio:n.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:n.helper||n.ghost||n.animate?n.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,t={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(t),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(t),this._proportionallyResize()),this._setupHandles(),n.autoHide&&e(this.element).on("mouseenter",function(){n.disabled||(i._removeClass("ui-resizable-autohide"),i._handles.show())}).on("mouseleave",function(){n.disabled||i.resizing||(i._addClass("ui-resizable-autohide"),i._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,n=function(t){e(t).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_setOption:function(e,t){switch(this._super(e,t),e){case"handles":this._removeHandles(),this._setupHandles()}},_setupHandles:function(){var t,n,i,r,s,o=this.options,a=this;if(this.handles=o.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=e(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),i=this.handles.split(","),this.handles={},n=0;n<i.length;n++)t=e.trim(i[n]),r="ui-resizable-"+t,s=e("<div>"),this._addClass(s,"ui-resizable-handle "+r),s.css({zIndex:o.zIndex}),this.handles[t]=".ui-resizable-"+t,this.element.append(s);this._renderAxis=function(t){var n,i,r,s;t=t||this.element;for(n in this.handles)this.handles[n].constructor===String?this.handles[n]=this.element.children(this.handles[n]).first().show():(this.handles[n].jquery||this.handles[n].nodeType)&&(this.handles[n]=e(this.handles[n]),this._on(this.handles[n],{mousedown:a._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(i=e(this.handles[n],this.element),s=/sw|ne|nw|se|n|s/.test(n)?i.outerHeight():i.outerWidth(),r=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),t.css(r,s),this._proportionallyResize()),this._handles=this._handles.add(this.handles[n])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){a.resizing||(this.className&&(s=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=s&&s[1]?s[1]:"se")}),o.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(t){var n,i,r=!1;for(n in this.handles)i=e(this.handles[n])[0],(i===t.target||e.contains(i,t.target))&&(r=!0);return!this.options.disabled&&r},_mouseStart:function(t){var n,i,r,s=this.options,o=this.element;return this.resizing=!0,this._renderProxy(),n=this._num(this.helper.css("left")),i=this._num(this.helper.css("top")),s.containment&&(n+=e(s.containment).scrollLeft()||0,i+=e(s.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:i},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:o.width(),height:o.height()},this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()},this.originalPosition={left:n,top:i},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof s.aspectRatio?s.aspectRatio:this.originalSize.width/this.originalSize.height||1,r=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===r?this.axis+"-resize":r),this._addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var n,i,r=this.originalMousePosition,s=this.axis,o=t.pageX-r.left||0,a=t.pageY-r.top||0,l=this._change[s];return this._updatePrevProperties(),!!l&&(n=l.apply(this,[t,o,a]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(n=this._updateRatio(n,t)),n=this._respectSize(n,t),this._updateCache(n),this._propagate("resize",t),i=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(i)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1)},_mouseStop:function(t){this.resizing=!1;var n,i,r,s,o,a,l,u=this.options,h=this;return this._helper&&(n=this._proportionallyResizeElements,i=n.length&&/textarea/i.test(n[0].nodeName),r=i&&this._hasScroll(n[0],"left")?0:h.sizeDiff.height,s=i?0:h.sizeDiff.width,o={width:h.helper.width()-s,height:h.helper.height()-r},a=parseFloat(h.element.css("left"))+(h.position.left-h.originalPosition.left)||null,l=parseFloat(h.element.css("top"))+(h.position.top-h.originalPosition.top)||null,u.animate||this.element.css(e.extend(o,{top:l,left:a})),h.helper.height(h.size.height),h.helper.width(h.size.width),this._helper&&!u.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,n,i,r,s,o=this.options;s={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:1/0,minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:1/0},(this._aspectRatio||e)&&(t=s.minHeight*this.aspectRatio,i=s.minWidth/this.aspectRatio,n=s.maxHeight*this.aspectRatio,r=s.maxWidth/this.aspectRatio,t>s.minWidth&&(s.minWidth=t),i>s.minHeight&&(s.minHeight=i),n<s.maxWidth&&(s.maxWidth=n),r<s.maxHeight&&(s.maxHeight=r)),this._vBoundaries=s},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,i=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===i&&(e.left=t.left+(n.width-e.width),e.top=null),"nw"===i&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,i=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,r=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,s=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,o=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,a=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,u=/sw|nw|w/.test(n),h=/nw|ne|n/.test(n);return s&&(e.width=t.minWidth),o&&(e.height=t.minHeight),i&&(e.width=t.maxWidth),r&&(e.height=t.maxHeight),s&&u&&(e.left=a-t.minWidth),i&&u&&(e.left=a-t.maxWidth),o&&h&&(e.top=l-t.minHeight),r&&h&&(e.top=l-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,n=[],i=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],r=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];t<4;t++)n[t]=parseFloat(i[t])||0,n[t]+=parseFloat(r[t])||0;return{height:n[0]+n[2],width:n[1]+n[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,n=this.helper||this.element;t<this._proportionallyResizeElements.length;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:n.height()-this.outerDimensions.height||0,width:n.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=this.originalSize,i=this.originalPosition;return{left:i.left+t,width:n.width-t}},n:function(e,t,n){var i=this.originalSize,r=this.originalPosition;return{top:r.top+n,height:i.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,i){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,i]))},sw:function(t,n,i){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,i]))},ne:function(t,n,i){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,i]))},nw:function(t,n,i){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,i]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),"resize"!==t&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).resizable("instance"),i=n.options,r=n._proportionallyResizeElements,s=r.length&&/textarea/i.test(r[0].nodeName),o=s&&n._hasScroll(r[0],"left")?0:n.sizeDiff.height,a=s?0:n.sizeDiff.width,l={width:n.size.width-a,height:n.size.height-o},u=parseFloat(n.element.css("left"))+(n.position.left-n.originalPosition.left)||null,h=parseFloat(n.element.css("top"))+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(l,h&&u?{top:h,left:u}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var i={width:parseFloat(n.element.css("width")),height:parseFloat(n.element.css("height")),top:parseFloat(n.element.css("top")),left:parseFloat(n.element.css("left"))};r&&r.length&&e(r[0]).css({width:i.width,height:i.height}),n._updateCache(i),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,n,i,r,s,o,a,l=e(this).resizable("instance"),u=l.options,h=l.element,c=u.containment,p=c instanceof e?c.get(0):/parent/.test(c)?h.parent().get(0):c;p&&(l.containerElement=e(p),/document/.test(c)||c===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(p),n=[],e(["Top","Right","Left","Bottom"]).each(function(e,i){n[e]=l._num(t.css("padding"+i))}),l.containerOffset=t.offset(),l.containerPosition=t.position(),l.containerSize={height:t.innerHeight()-n[3],width:t.innerWidth()-n[1]},i=l.containerOffset,r=l.containerSize.height,s=l.containerSize.width,o=l._hasScroll(p,"left")?p.scrollWidth:s,a=l._hasScroll(p)?p.scrollHeight:r,l.parentData={element:p,left:i.left,top:i.top,width:o,height:a}))},resize:function(t){var n,i,r,s,o=e(this).resizable("instance"),a=o.options,l=o.containerOffset,u=o.position,h=o._aspectRatio||t.shiftKey,c={top:0,left:0},p=o.containerElement,d=!0;p[0]!==document&&/static/.test(p.css("position"))&&(c=l),u.left<(o._helper?l.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-l.left:o.position.left-c.left),h&&(o.size.height=o.size.width/o.aspectRatio,d=!1),o.position.left=a.helper?l.left:0),u.top<(o._helper?l.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-l.top:o.position.top),h&&(o.size.width=o.size.height*o.aspectRatio,d=!1),o.position.top=o._helper?l.top:0),r=o.containerElement.get(0)===o.element.parent().get(0),s=/relative|absolute/.test(o.containerElement.css("position")),r&&s?(o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top):(o.offset.left=o.element.offset().left,o.offset.top=o.element.offset().top),n=Math.abs(o.sizeDiff.width+(o._helper?o.offset.left-c.left:o.offset.left-l.left)),i=Math.abs(o.sizeDiff.height+(o._helper?o.offset.top-c.top:o.offset.top-l.top)),n+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-n,h&&(o.size.height=o.size.width/o.aspectRatio,d=!1)),i+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-i,h&&(o.size.width=o.size.height*o.aspectRatio,d=!1)),d||(o.position.left=o.prevPosition.left,o.position.top=o.prevPosition.top,o.size.width=o.prevSize.width,o.size.height=o.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),n=t.options,i=t.containerOffset,r=t.containerPosition,s=t.containerElement,o=e(t.helper),a=o.offset(),l=o.outerWidth()-t.sizeDiff.width,u=o.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(s.css("position"))&&e(this).css({left:a.left-r.left-i.left,width:l,height:u}),t._helper&&!n.animate&&/static/.test(s.css("position"))&&e(this).css({left:a.left-r.left-i.left,width:l,height:u})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance"),n=t.options;e(n.alsoResize).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseFloat(t.width()),height:parseFloat(t.height()),left:parseFloat(t.css("left")),top:parseFloat(t.css("top"))})})},resize:function(t,n){var i=e(this).resizable("instance"),r=i.options,s=i.originalSize,o=i.originalPosition,a={height:i.size.height-s.height||0,width:i.size.width-s.width||0,top:i.position.top-o.top||0,left:i.position.left-o.left||0};e(r.alsoResize).each(function(){var t=e(this),i=e(this).data("ui-resizable-alsoresize"),r={},s=t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(s,function(e,t){var n=(i[t]||0)+(a[t]||0);n&&n>=0&&(r[t]=n||null)}),t.css(r)})},stop:function(){e(this).removeData("ui-resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),n=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}),t._addClass(t.ghost,"ui-resizable-ghost"),e.uiBackCompat!==!1&&"string"==typeof t.options.ghost&&t.ghost.addClass(this.options.ghost),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,n=e(this).resizable("instance"),i=n.options,r=n.size,s=n.originalSize,o=n.originalPosition,a=n.axis,l="number"==typeof i.grid?[i.grid,i.grid]:i.grid,u=l[0]||1,h=l[1]||1,c=Math.round((r.width-s.width)/u)*u,p=Math.round((r.height-s.height)/h)*h,d=s.width+c,f=s.height+p,y=i.maxWidth&&i.maxWidth<d,m=i.maxHeight&&i.maxHeight<f,g=i.minWidth&&i.minWidth>d,v=i.minHeight&&i.minHeight>f;i.grid=l,g&&(d+=u),v&&(f+=h),y&&(d-=u),m&&(f-=h),/^(se|s|e)$/.test(a)?(n.size.width=d,n.size.height=f):/^(ne)$/.test(a)?(n.size.width=d,n.size.height=f,n.position.top=o.top-p):/^(sw)$/.test(a)?(n.size.width=d,n.size.height=f,n.position.left=o.left-c):((f-h<=0||d-u<=0)&&(t=n._getPaddingPlusBorderDimensions(this)),f-h>0?(n.size.height=f,n.position.top=o.top-p):(f=h-t.height,n.size.height=f,n.position.top=o.top+s.height-f),d-u>0?(n.size.width=d,n.position.left=o.left-c):(d=u-t.width,n.size.width=d,n.position.left=o.left+s.width-d))}}),e.ui.resizable})},function(e,t,n){var i,r,s;/*!
	 * jQuery UI Disable Selection 1.12.1
	 * http://jqueryui.com
	 *
	 * Copyright jQuery Foundation and other contributors
	 * Released under the MIT license.
	 * http://jquery.org/license
	 */
!function(o){r=[n(1),n(6)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.fn.extend({disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}})})},function(e,t,n){var i,r,s;/*!
	 * jQuery UI Focusable 1.12.1
	 * http://jqueryui.com
	 *
	 * Copyright jQuery Foundation and other contributors
	 * Released under the MIT license.
	 * http://jquery.org/license
	 */
!function(o){r=[n(1),n(6)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){function t(e){for(var t=e.css("visibility");"inherit"===t;)e=e.parent(),t=e.css("visibility");return"hidden"!==t}return e.ui.focusable=function(n,i){var r,s,o,a,l,u=n.nodeName.toLowerCase();return"area"===u?(r=n.parentNode,s=r.name,!(!n.href||!s||"map"!==r.nodeName.toLowerCase())&&(o=e("img[usemap='#"+s+"']"),o.length>0&&o.is(":visible"))):(/^(input|select|textarea|button|object)$/.test(u)?(a=!n.disabled,a&&(l=e(n).closest("fieldset")[0],l&&(a=!l.disabled))):a="a"===u?n.href||i:i,a&&e(n).is(":visible")&&t(e(n)))},e.extend(e.expr[":"],{focusable:function(t){return e.ui.focusable(t,null!=e.attr(t,"tabindex"))}}),e.ui.focusable})},function(e,t,n){var i,r,s;/*!
	 * jQuery UI Tabbable 1.12.1
	 * http://jqueryui.com
	 *
	 * Copyright jQuery Foundation and other contributors
	 * Released under the MIT license.
	 * http://jquery.org/license
	 */
!function(o){r=[n(1),n(6),n(23)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.extend(e.expr[":"],{tabbable:function(t){var n=e.attr(t,"tabindex"),i=null!=n;return(!i||n>=0)&&e.ui.focusable(t,i)}})})},function(e,t,n){var i,r,s;/*!
	 * jQuery UI Unique ID 1.12.1
	 * http://jqueryui.com
	 *
	 * Copyright jQuery Foundation and other contributors
	 * Released under the MIT license.
	 * http://jquery.org/license
	 */
!function(o){r=[n(1),n(6)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.fn.extend({uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}})})},function(e,t,n){var i,r,s;/*!
	 * jQuery UI Position 1.12.1
	 * http://jqueryui.com
	 *
	 * Copyright jQuery Foundation and other contributors
	 * Released under the MIT license.
	 * http://jquery.org/license
	 *
	 * http://api.jqueryui.com/position/
	 */
!function(o){r=[n(1),n(6)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return function(){function t(e,t,n){return[parseFloat(e[0])*(c.test(e[0])?t/100:1),parseFloat(e[1])*(c.test(e[1])?n/100:1)]}function n(t,n){return parseInt(e.css(t,n),10)||0}function i(t){var n=t[0];return 9===n.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}var r,s=Math.max,o=Math.abs,a=/left|center|right/,l=/top|center|bottom/,u=/[\+\-]\d+(\.[\d]+)?%?/,h=/^\w+/,c=/%$/,p=e.fn.position;e.position={scrollbarWidth:function(){if(void 0!==r)return r;var t,n,i=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),s=i.children()[0];return e("body").append(i),t=s.offsetWidth,i.css("overflow","scroll"),n=s.offsetWidth,t===n&&(n=i[0].clientWidth),i.remove(),r=t-n},getScrollInfo:function(t){var n=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),i=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),r="scroll"===n||"auto"===n&&t.width<t.element[0].scrollWidth,s="scroll"===i||"auto"===i&&t.height<t.element[0].scrollHeight;return{width:s?e.position.scrollbarWidth():0,height:r?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),i=e.isWindow(n[0]),r=!!n[0]&&9===n[0].nodeType,s=!i&&!r;return{element:n,isWindow:i,isDocument:r,offset:s?e(t).offset():{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:n.outerWidth(),height:n.outerHeight()}}},e.fn.position=function(r){if(!r||!r.of)return p.apply(this,arguments);r=e.extend({},r);var c,d,f,y,m,g,v=e(r.of),L=e.position.getWithinInfo(r.within),b=e.position.getScrollInfo(L),O=(r.collision||"flip").split(" "),x={};return g=i(v),v[0].preventDefault&&(r.at="left top"),d=g.width,f=g.height,y=g.offset,m=e.extend({},y),e.each(["my","at"],function(){var e,t,n=(r[this]||"").split(" ");1===n.length&&(n=a.test(n[0])?n.concat(["center"]):l.test(n[0])?["center"].concat(n):["center","center"]),n[0]=a.test(n[0])?n[0]:"center",n[1]=l.test(n[1])?n[1]:"center",e=u.exec(n[0]),t=u.exec(n[1]),x[this]=[e?e[0]:0,t?t[0]:0],r[this]=[h.exec(n[0])[0],h.exec(n[1])[0]]}),1===O.length&&(O[1]=O[0]),"right"===r.at[0]?m.left+=d:"center"===r.at[0]&&(m.left+=d/2),"bottom"===r.at[1]?m.top+=f:"center"===r.at[1]&&(m.top+=f/2),c=t(x.at,d,f),m.left+=c[0],m.top+=c[1],this.each(function(){var i,a,l=e(this),u=l.outerWidth(),h=l.outerHeight(),p=n(this,"marginLeft"),g=n(this,"marginTop"),w=u+p+n(this,"marginRight")+b.width,C=h+g+n(this,"marginBottom")+b.height,E=e.extend({},m),S=t(x.my,l.outerWidth(),l.outerHeight());"right"===r.my[0]?E.left-=u:"center"===r.my[0]&&(E.left-=u/2),"bottom"===r.my[1]?E.top-=h:"center"===r.my[1]&&(E.top-=h/2),E.left+=S[0],E.top+=S[1],i={marginLeft:p,marginTop:g},e.each(["left","top"],function(t,n){e.ui.position[O[t]]&&e.ui.position[O[t]][n](E,{targetWidth:d,targetHeight:f,elemWidth:u,elemHeight:h,collisionPosition:i,collisionWidth:w,collisionHeight:C,offset:[c[0]+S[0],c[1]+S[1]],my:r.my,at:r.at,within:L,elem:l})}),r.using&&(a=function(e){var t=y.left-E.left,n=t+d-u,i=y.top-E.top,a=i+f-h,c={target:{element:v,left:y.left,top:y.top,width:d,height:f},element:{element:l,left:E.left,top:E.top,width:u,height:h},horizontal:n<0?"left":t>0?"right":"center",vertical:a<0?"top":i>0?"bottom":"middle"};d<u&&o(t+n)<d&&(c.horizontal="center"),f<h&&o(i+a)<f&&(c.vertical="middle"),s(o(t),o(n))>s(o(i),o(a))?c.important="horizontal":c.important="vertical",r.using.call(this,e,c)}),l.offset(e.extend(E,{using:a}))})},e.ui.position={fit:{left:function(e,t){var n,i=t.within,r=i.isWindow?i.scrollLeft:i.offset.left,o=i.width,a=e.left-t.collisionPosition.marginLeft,l=r-a,u=a+t.collisionWidth-o-r;t.collisionWidth>o?l>0&&u<=0?(n=e.left+l+t.collisionWidth-o-r,e.left+=l-n):u>0&&l<=0?e.left=r:l>u?e.left=r+o-t.collisionWidth:e.left=r:l>0?e.left+=l:u>0?e.left-=u:e.left=s(e.left-a,e.left)},top:function(e,t){var n,i=t.within,r=i.isWindow?i.scrollTop:i.offset.top,o=t.within.height,a=e.top-t.collisionPosition.marginTop,l=r-a,u=a+t.collisionHeight-o-r;t.collisionHeight>o?l>0&&u<=0?(n=e.top+l+t.collisionHeight-o-r,e.top+=l-n):u>0&&l<=0?e.top=r:l>u?e.top=r+o-t.collisionHeight:e.top=r:l>0?e.top+=l:u>0?e.top-=u:e.top=s(e.top-a,e.top)}},flip:{left:function(e,t){var n,i,r=t.within,s=r.offset.left+r.scrollLeft,a=r.width,l=r.isWindow?r.scrollLeft:r.offset.left,u=e.left-t.collisionPosition.marginLeft,h=u-l,c=u+t.collisionWidth-a-l,p="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,d="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];h<0?(n=e.left+p+d+f+t.collisionWidth-a-s,(n<0||n<o(h))&&(e.left+=p+d+f)):c>0&&(i=e.left-t.collisionPosition.marginLeft+p+d+f-l,(i>0||o(i)<c)&&(e.left+=p+d+f))},top:function(e,t){var n,i,r=t.within,s=r.offset.top+r.scrollTop,a=r.height,l=r.isWindow?r.scrollTop:r.offset.top,u=e.top-t.collisionPosition.marginTop,h=u-l,c=u+t.collisionHeight-a-l,p="top"===t.my[1],d=p?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,y=-2*t.offset[1];h<0?(i=e.top+d+f+y+t.collisionHeight-a-s,(i<0||i<o(h))&&(e.top+=d+f+y)):c>0&&(n=e.top-t.collisionPosition.marginTop+d+f+y-l,(n>0||o(n)<c)&&(e.top+=d+f+y))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}}}(),e.ui.position})},function(e,t,n){var i,r,s;/*!
	 * jQuery UI Spinner 1.12.1
	 * http://jqueryui.com
	 *
	 * Copyright jQuery Foundation and other contributors
	 * Released under the MIT license.
	 * http://jquery.org/license
	 */
!function(o){r=[n(1),n(3),n(6),n(12),n(20),n(5)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){function t(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}return e.widget("ui.spinner",{version:"1.12.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{classes:{"ui-spinner":"ui-corner-all","ui-spinner-down":"ui-corner-br","ui-spinner-up":"ui-corner-tr"},culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t=this._super(),n=this.element;return e.each(["min","max","step"],function(e,i){var r=n.attr(i);null!=r&&r.length&&(t[i]=r)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){return this.cancelBlur?void delete this.cancelBlur:(this._stop(),this._refresh(),void(this.previous!==this.element.val()&&this._trigger("change",e)))},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(t){function n(){var t=this.element[0]===e.ui.safeActiveElement(this.document[0]);t||(this.element.trigger("focus"),this.previous=i,this._delay(function(){this.previous=i}))}var i;i=this.element[0]===e.ui.safeActiveElement(this.document[0])?this.previous:this.element.val(),t.preventDefault(),n.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,n.call(this)}),this._start(t)!==!1&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){if(e(t.currentTarget).hasClass("ui-state-active"))return this._start(t)!==!1&&void this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseleave .ui-spinner-button":"_stop"},_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap("<span>").parent().append("<a></a><a></a>")},_draw:function(){this._enhance(),this._addClass(this.uiSpinner,"ui-spinner","ui-widget ui-widget-content"),this._addClass("ui-spinner-input"),this.element.attr("role","spinbutton"),this.buttons=this.uiSpinner.children("a").attr("tabIndex",-1).attr("aria-hidden",!0).button({classes:{"ui-button":""}}),this._removeClass(this.buttons,"ui-corner-all"),this._addClass(this.buttons.first(),"ui-spinner-button ui-spinner-up"),this._addClass(this.buttons.last(),"ui-spinner-button ui-spinner-down"),this.buttons.first().button({icon:this.options.icons.up,showLabel:!1}),this.buttons.last().button({icon:this.options.icons.down,showLabel:!1}),this.buttons.height()>Math.ceil(.5*this.uiSpinner.height())&&this.uiSpinner.height()>0&&this.uiSpinner.height(this.uiSpinner.height())},_keydown:function(t){var n=this.options,i=e.ui.keyCode;switch(t.keyCode){case i.UP:return this._repeat(null,1,t),!0;case i.DOWN:return this._repeat(null,-1,t),!0;case i.PAGE_UP:return this._repeat(null,n.page,t),!0;case i.PAGE_DOWN:return this._repeat(null,-n.page,t),!0}return!1},_start:function(e){return!(!this.spinning&&this._trigger("start",e)===!1)&&(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(e,t,n){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,n)},e),this._spin(t*this.options.step,n)},_spin:function(e,t){var n=this.value()||0;this.counter||(this.counter=1),n=this._adjustValue(n+e*this._increment(this.counter)),this.spinning&&this._trigger("spin",t,{value:n})===!1||(this._value(n),this.counter++)},_increment:function(t){var n=this.options.incremental;return n?e.isFunction(n)?n(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),n=t.indexOf(".");return n===-1?0:t.length-n-1},_adjustValue:function(e){var t,n,i=this.options;return t=null!==i.min?i.min:0,n=e-t,n=Math.round(n/i.step)*i.step,e=t+n,e=parseFloat(e.toFixed(this._precision())),null!==i.max&&e>i.max?i.max:null!==i.min&&e<i.min?i.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){var n,i,r;return"culture"===e||"numberFormat"===e?(n=this._parse(this.element.val()),this.options[e]=t,void this.element.val(this._format(n))):("max"!==e&&"min"!==e&&"step"!==e||"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(i=this.buttons.first().find(".ui-icon"),this._removeClass(i,null,this.options.icons.up),this._addClass(i,null,t.up),r=this.buttons.last().find(".ui-icon"),this._removeClass(r,null,this.options.icons.down),this._addClass(r,null,t.down)),void this._super(e,t))},_setOptionDisabled:function(e){this._super(e),this._toggleClass(this.uiSpinner,null,"ui-state-disabled",!!e),this.element.prop("disabled",!!e),this.buttons.button(e?"disable":"enable")},_setOptions:t(function(e){this._super(e)}),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},isValid:function(){var e=this.value();return null!==e&&e===this._adjustValue(e)},_value:function(e,t){var n;""!==e&&(n=this._parse(e),null!==n&&(t||(n=this._adjustValue(n)),e=this._format(n))),this.element.val(e),this._refresh()},_destroy:function(){this.element.prop("disabled",!1).removeAttr("autocomplete role aria-valuemin aria-valuemax aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:t(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:t(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:t(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:t(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){return arguments.length?void t(this._value).call(this,e):this._parse(this.element.val())},widget:function(){return this.uiSpinner}}),e.uiBackCompat!==!1&&e.widget("ui.spinner",e.ui.spinner,{_enhance:function(){this.uiSpinner=this.element.attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml())},_uiSpinnerHtml:function(){return"<span>"},_buttonHtml:function(){return"<a></a><a></a>"}}),e.ui.spinner})},function(e,t,n){var i,r,s;/*!
	 * jQuery UI Selectmenu 1.12.1
	 * http://jqueryui.com
	 *
	 * Copyright jQuery Foundation and other contributors
	 * Released under the MIT license.
	 * http://jquery.org/license
	 */
!function(o){r=[n(1),n(29),n(8),n(9),n(12),n(11),n(26),n(25),n(6),n(5)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.widget("ui.selectmenu",[e.ui.formResetMixin,{version:"1.12.1",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:!1,change:null,close:null,focus:null,open:null,select:null},_create:function(){var t=this.element.uniqueId().attr("id");this.ids={element:t,button:t+"-button",menu:t+"-menu"},this._drawButton(),this._drawMenu(),this._bindFormResetHandler(),this._rendered=!1,this.menuItems=e()},_drawButton:function(){var t,n=this,i=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button),this._on(this.labels,{click:function(e){this.button.focus(),e.preventDefault()}}),this.element.hide(),this.button=e("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",title:this.element.attr("title")}).insertAfter(this.element),this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget"),t=e("<span>").appendTo(this.button),this._addClass(t,"ui-selectmenu-icon","ui-icon "+this.options.icons.button),this.buttonItem=this._renderButtonItem(i).appendTo(this.button),this.options.width!==!1&&this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){n._rendered||n._refreshMenu()})},_drawMenu:function(){var t=this;this.menu=e("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=e("<div>").append(this.menu),this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front"),this.menuWrap.appendTo(this._appendTo()),this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function(e,n){e.preventDefault(),t._setSelection(),t._select(n.item.data("ui-selectmenu-item"),e)},focus:function(e,n){var i=n.item.data("ui-selectmenu-item");null!=t.focusIndex&&i.index!==t.focusIndex&&(t._trigger("focus",e,{item:i}),t.isOpen||t._select(i,e)),t.focusIndex=i.index,t.button.attr("aria-activedescendant",t.menuItems.eq(i.index).attr("id"))}}).menu("instance"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||{})),null===this.options.width&&this._resizeButton()},_refreshMenu:function(){var e,t=this.element.find("option");this.menu.empty(),this._parseOptions(t),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper"),this._rendered=!0,t.length&&(e=this._getSelectedItem(),this.menuInstance.focus(null,e),this._setAria(e.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(e){this.options.disabled||(this._rendered?(this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.menuItems.length&&(this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",e)))},_position:function(){this.menuWrap.position(e.extend({of:this.button},this.options.position))},close:function(e){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",e))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderButtonItem:function(t){var n=e("<span>");return this._setText(n,t.label),this._addClass(n,"ui-selectmenu-text"),n},_renderMenu:function(t,n){var i=this,r="";e.each(n,function(n,s){var o;s.optgroup!==r&&(o=e("<li>",{text:s.optgroup}),i._addClass(o,"ui-selectmenu-optgroup","ui-menu-divider"+(s.element.parent("optgroup").prop("disabled")?" ui-state-disabled":"")),o.appendTo(t),r=s.optgroup),i._renderItemData(t,s)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-selectmenu-item",t)},_renderItem:function(t,n){var i=e("<li>"),r=e("<div>",{title:n.element.attr("title")});return n.disabled&&this._addClass(i,null,"ui-state-disabled"),this._setText(r,n.label),i.append(r).appendTo(t)},_setText:function(e,t){t?e.text(t):e.html("&#160;")},_move:function(e,t){var n,i,r=".ui-menu-item";this.isOpen?n=this.menuItems.eq(this.focusIndex).parent("li"):(n=this.menuItems.eq(this.element[0].selectedIndex).parent("li"),r+=":not(.ui-state-disabled)"),i="first"===e||"last"===e?n["first"===e?"prevAll":"nextAll"](r).eq(-1):n[e+"All"](r).eq(0),i.length&&this.menuInstance.focus(t,i)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li")},_toggle:function(e){this[this.isOpen?"close":"open"](e)},_setSelection:function(){var e;this.range&&(window.getSelection?(e=window.getSelection(),e.removeAllRanges(),e.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(t){this.isOpen&&(e(t.target).closest(".ui-selectmenu-menu, #"+e.ui.escapeSelector(this.ids.button)).length||this.close(t))}},_buttonEvents:{mousedown:function(){var e;window.getSelection?(e=window.getSelection(),e.rangeCount&&(this.range=e.getRangeAt(0))):this.range=document.selection.createRange()},click:function(e){this._setSelection(),this._toggle(e)},keydown:function(t){var n=!0;switch(t.keyCode){case e.ui.keyCode.TAB:case e.ui.keyCode.ESCAPE:this.close(t),n=!1;break;case e.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(t);break;case e.ui.keyCode.UP:t.altKey?this._toggle(t):this._move("prev",t);break;case e.ui.keyCode.DOWN:t.altKey?this._toggle(t):this._move("next",t);break;case e.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(t):this._toggle(t);break;case e.ui.keyCode.LEFT:this._move("prev",t);break;case e.ui.keyCode.RIGHT:this._move("next",t);break;case e.ui.keyCode.HOME:case e.ui.keyCode.PAGE_UP:this._move("first",t);break;case e.ui.keyCode.END:case e.ui.keyCode.PAGE_DOWN:this._move("last",t);break;default:this.menu.trigger(t),n=!1}n&&t.preventDefault()}},_selectFocusedItem:function(e){var t=this.menuItems.eq(this.focusIndex).parent("li");t.hasClass("ui-state-disabled")||this._select(t.data("ui-selectmenu-item"),e)},_select:function(e,t){var n=this.element[0].selectedIndex;this.element[0].selectedIndex=e.index,this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(e)),this._setAria(e),this._trigger("select",t,{item:e}),e.index!==n&&this._trigger("change",t,{item:e}),this.close(t)},_setAria:function(e){var t=this.menuItems.eq(e.index).attr("id");this.button.attr({"aria-labelledby":t,"aria-activedescendant":t}),this.menu.attr("aria-activedescendant",t)},_setOption:function(e,t){if("icons"===e){var n=this.button.find("span.ui-icon");this._removeClass(n,null,this.options.icons.button)._addClass(n,null,t.button)}this._super(e,t),"appendTo"===e&&this.menuWrap.appendTo(this._appendTo()),"width"===e&&this._resizeButton()},_setOptionDisabled:function(e){this._super(e),this.menuInstance.option("disabled",e),this.button.attr("aria-disabled",e),this._toggleClass(this.button,null,"ui-state-disabled",e),this.element.prop("disabled",e),e?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t&&t[0]||(t=this.element.closest(".ui-front, dialog")),t.length||(t=this.document[0].body),t},_toggleAttr:function(){this.button.attr("aria-expanded",this.isOpen),this._removeClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"closed":"open"))._addClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var e=this.options.width;return e===!1?void this.button.css("width",""):(null===e&&(e=this.element.show().outerWidth(),this.element.hide()),void this.button.outerWidth(e))},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){var e=this._super();return e.disabled=this.element.prop("disabled"),e},_parseOptions:function(t){var n=this,i=[];t.each(function(t,r){i.push(n._parseOption(e(r),t))}),this.items=i},_parseOption:function(e,t){var n=e.parent("optgroup");return{element:e,index:t,value:e.val(),label:e.text(),optgroup:n.attr("label")||"",disabled:n.prop("disabled")||e.prop("disabled")}},_destroy:function(){this._unbindFormResetHandler(),this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.labels.attr("for",this.ids.element)}}])})},function(e,t,n){var i,r,s;/*!
	 * jQuery UI Menu 1.12.1
	 * http://jqueryui.com
	 *
	 * Copyright jQuery Foundation and other contributors
	 * Released under the MIT license.
	 * http://jquery.org/license
	 */
!function(o){r=[n(1),n(12),n(26),n(20),n(25),n(6),n(5)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(e){e.preventDefault()},"click .ui-menu-item":function(t){var n=e(t.target),i=e(e.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&n.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),n.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&i.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){if(!this.previousFilter){var n=e(t.target).closest(".ui-menu-item"),i=e(t.currentTarget);n[0]===i[0]&&(this._removeClass(i.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(t,i))}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.find(this.options.items).eq(0);t||this.focus(e,n)},blur:function(t){this._delay(function(){var n=!e.contains(this.element[0],e.ui.safeActiveElement(this.document[0]));n&&this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(e){this._closeOnDocumentClick(e)&&this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){var t=this.element.find(".ui-menu-item").removeAttr("role aria-disabled"),n=t.children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),n.children().each(function(){var t=e(this);t.data("ui-menu-submenu-caret")&&t.remove()})},_keydown:function(t){var n,i,r,s,o=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:o=!1,i=this.previousFilter||"",s=!1,r=t.keyCode>=96&&t.keyCode<=105?(t.keyCode-96).toString():String.fromCharCode(t.keyCode),clearTimeout(this.filterTimer),r===i?s=!0:r=i+r,n=this._filterMenuItems(r),n=s&&n.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):n,n.length||(r=String.fromCharCode(t.keyCode),n=this._filterMenuItems(r)),n.length?(this.focus(t,n),this.previousFilter=r,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}o&&t.preventDefault()},_activate:function(e){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,n,i,r,s,o=this,a=this.options.icons.submenu,l=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),i=l.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),n=t.prev(),i=e("<span>").data("ui-menu-submenu-caret",!0);o._addClass(i,"ui-menu-icon","ui-icon "+a),n.attr("aria-haspopup","true").prepend(i),t.attr("aria-labelledby",n.attr("id"))}),this._addClass(i,"ui-menu","ui-widget ui-widget-content ui-front"),t=l.add(this.element),n=t.find(this.options.items),n.not(".ui-menu-item").each(function(){var t=e(this);o._isDivider(t)&&o._addClass(t,"ui-menu-divider","ui-widget-content")}),r=n.not(".ui-menu-item, .ui-menu-divider"),s=r.children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(r,"ui-menu-item")._addClass(s,"ui-menu-item-wrapper"),n.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){if("icons"===e){var n=this.element.find(".ui-menu-icon");this._removeClass(n,null,this.options.icons.submenu)._addClass(n,null,t.submenu)}this._super(e,t)},_setOptionDisabled:function(e){this._super(e),this.element.attr("aria-disabled",String(e)),this._toggleClass(null,"ui-state-disabled",!!e)},focus:function(e,t){var n,i,r;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),i=this.active.children(".ui-menu-item-wrapper"),this._addClass(i,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",i.attr("id")),r=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(r,null,"ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),n=t.children(".ui-menu"),n.length&&e&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var n,i,r,s,o,a;this._hasScroll()&&(n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,i=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,r=t.offset().top-this.activeMenu.offset().top-n-i,s=this.activeMenu.scrollTop(),o=this.activeMenu.height(),a=t.outerHeight(),r<0?this.activeMenu.scrollTop(s+r):r+a>o&&this.activeMenu.scrollTop(s+r-o+a))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",e,{item:this.active}),this.active=null)},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var n=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay(function(){var i=n?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));i.length||(i=this.element),this._close(i),this.blur(t),this._removeClass(i.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=i},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(t){return!e(t.target).closest(".ui-menu").length},_isDivider:function(e){return!/[^\-\u2014\u2013\s]/.test(e.text())},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var i;this.active&&(i="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),i&&i.length&&this.active||(i=this.activeMenu.find(this.options.items)[t]()),this.focus(n,i)},nextPage:function(t){var n,i,r;return this.active?void(this.isLastItem()||(this._hasScroll()?(i=this.active.offset().top,r=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-i-r<0}),this.focus(t,n)):this.focus(t,this.activeMenu.find(this.options.items)[this.active?"last":"first"]()))):void this.next(t)},previousPage:function(t){var n,i,r;return this.active?void(this.isFirstItem()||(this._hasScroll()?(i=this.active.offset().top,r=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-i+r>0}),this.focus(t,n)):this.focus(t,this.activeMenu.find(this.options.items).first()))):void this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,n)},_filterMenuItems:function(t){var n=t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),i=new RegExp("^"+n,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return i.test(e.trim(e(this).children(".ui-menu-item-wrapper").text()))})}})})},function(e,t,n){var i,r,s;/*!
	 * jQuery UI Tooltip 1.12.1
	 * http://jqueryui.com
	 *
	 * Copyright jQuery Foundation and other contributors
	 * Released under the MIT license.
	 * http://jquery.org/license
	 */
!function(o){r=[n(1),n(12),n(26),n(25),n(6),n(5)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.widget("ui.tooltip",{version:"1.12.1",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,track:!1,close:null,open:null},_addDescribedBy:function(t,n){var i=(t.attr("aria-describedby")||"").split(/\s+/);i.push(n),t.data("ui-tooltip-id",n).attr("aria-describedby",e.trim(i.join(" ")))},_removeDescribedBy:function(t){var n=t.data("ui-tooltip-id"),i=(t.attr("aria-describedby")||"").split(/\s+/),r=e.inArray(n,i);r!==-1&&i.splice(r,1),t.removeData("ui-tooltip-id"),i=e.trim(i.join(" ")),i?t.attr("aria-describedby",i):t.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.liveRegion=e("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this.disabledTitles=e([])},_setOption:function(t,n){var i=this;this._super(t,n),"content"===t&&e.each(this.tooltips,function(e,t){i._updateContent(t.element)})},_setOptionDisabled:function(e){this[e?"_disable":"_enable"]()},_disable:function(){var t=this;e.each(this.tooltips,function(n,i){var r=e.Event("blur");r.target=r.currentTarget=i.element[0],t.close(r,!0)}),this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function(){var t=e(this);if(t.is("[title]"))return t.data("ui-tooltip-title",t.attr("title")).removeAttr("title")}))},_enable:function(){this.disabledTitles.each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))}),this.disabledTitles=e([])},open:function(t){var n=this,i=e(t?t.target:this.element).closest(this.options.items);i.length&&!i.data("ui-tooltip-id")&&(i.attr("title")&&i.data("ui-tooltip-title",i.attr("title")),i.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&i.parents().each(function(){var t,i=e(this);i.data("ui-tooltip-open")&&(t=e.Event("blur"),t.target=t.currentTarget=this,n.close(t,!0)),i.attr("title")&&(i.uniqueId(),n.parents[this.id]={element:this,title:i.attr("title")},i.attr("title",""))}),this._registerCloseHandlers(t,i),this._updateContent(i,t))},_updateContent:function(e,t){var n,i=this.options.content,r=this,s=t?t.type:null;return"string"==typeof i||i.nodeType||i.jquery?this._open(t,e,i):(n=i.call(e[0],function(n){r._delay(function(){e.data("ui-tooltip-open")&&(t&&(t.type=s),this._open(t,e,n))})}),void(n&&this._open(t,e,n)))},_open:function(t,n,i){function r(e){u.of=e,o.is(":hidden")||o.position(u)}var s,o,a,l,u=e.extend({},this.options.position);if(i){if(s=this._find(n))return void s.tooltip.find(".ui-tooltip-content").html(i);n.is("[title]")&&(t&&"mouseover"===t.type?n.attr("title",""):n.removeAttr("title")),s=this._tooltip(n),o=s.tooltip,this._addDescribedBy(n,o.attr("id")),o.find(".ui-tooltip-content").html(i),this.liveRegion.children().hide(),l=e("<div>").html(o.find(".ui-tooltip-content").html()),l.removeAttr("name").find("[name]").removeAttr("name"),l.removeAttr("id").find("[id]").removeAttr("id"),l.appendTo(this.liveRegion),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:r}),r(t)):o.position(e.extend({of:n},this.options.position)),o.hide(),this._show(o,this.options.show),this.options.track&&this.options.show&&this.options.show.delay&&(a=this.delayedShow=setInterval(function(){o.is(":visible")&&(r(u.of),clearInterval(a))},e.fx.interval)),this._trigger("open",t,{tooltip:o})}},_registerCloseHandlers:function(t,n){var i={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var i=e.Event(t);i.currentTarget=n[0],this.close(i,!0)}}};n[0]!==this.element[0]&&(i.remove=function(){this._removeTooltip(this._find(n).tooltip)}),t&&"mouseover"!==t.type||(i.mouseleave="close"),t&&"focusin"!==t.type||(i.focusout="close"),this._on(!0,n,i)},close:function(t){var n,i=this,r=e(t?t.currentTarget:this.element),s=this._find(r);return s?(n=s.tooltip,void(s.closing||(clearInterval(this.delayedShow),r.data("ui-tooltip-title")&&!r.attr("title")&&r.attr("title",r.data("ui-tooltip-title")),this._removeDescribedBy(r),s.hiding=!0,n.stop(!0),this._hide(n,this.options.hide,function(){i._removeTooltip(e(this))}),r.removeData("ui-tooltip-open"),this._off(r,"mouseleave focusout keyup"),r[0]!==this.element[0]&&this._off(r,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,function(t,n){e(n.element).attr("title",n.title),delete i.parents[t]}),s.closing=!0,this._trigger("close",t,{tooltip:n}),s.hiding||(s.closing=!1)))):void r.removeData("ui-tooltip-open")},_tooltip:function(t){var n=e("<div>").attr("role","tooltip"),i=e("<div>").appendTo(n),r=n.uniqueId().attr("id");return this._addClass(i,"ui-tooltip-content"),this._addClass(n,"ui-tooltip","ui-widget ui-widget-content"),n.appendTo(this._appendTo(t)),this.tooltips[r]={element:t,tooltip:n}},_find:function(e){var t=e.data("ui-tooltip-id");return t?this.tooltips[t]:null},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_appendTo:function(e){var t=e.closest(".ui-front, dialog");return t.length||(t=this.document[0].body),t},_destroy:function(){var t=this;e.each(this.tooltips,function(n,i){var r=e.Event("blur"),s=i.element;r.target=r.currentTarget=s[0],t.close(r,!0),e("#"+n).remove(),s.data("ui-tooltip-title")&&(s.attr("title")||s.attr("title",s.data("ui-tooltip-title")),s.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}}),e.uiBackCompat!==!1&&e.widget("ui.tooltip",e.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var e=this._superApply(arguments);return this.options.tooltipClass&&e.tooltip.addClass(this.options.tooltipClass),e}}),e.ui.tooltip})},function(e,t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e,t){function i(e){return"undefined"!=typeof e}function r(e,t,n){return e<t?t:e>n?n:e}function s(e){var t,n,i,r,s,o,a,l,u=+e[0],h=+e[1],c=+e[2];switch(r=Math.floor(6*u),s=6*u-r,o=c*(1-h),a=c*(1-s*h),l=c*(1-(1-s)*h),isNaN(r)&&(r=0),isNaN(a)&&(a=0),isNaN(l)&&(l=0),r%6){case 0:t=c,n=l,i=o;break;case 1:t=a,n=c,i=o;break;case 2:t=o,n=c,i=l;break;case 3:t=o,n=a,i=c;break;case 4:t=l,n=o,i=c;break;case 5:t=c,n=o,i=a}return[Math.round(255*t),Math.round(255*n),Math.round(255*i)]}function o(e){return l(s(e))}function a(e){var t,n=+e[0],i=+e[1],r=+e[2],s=Math.max(n,i,r),o=Math.min(n,i,r),a=s-o,l=0===s?0:a/s,u=s/255;switch(s){case o:t=0;break;case n:t=i-r+a*(i<r?6:0),t/=6*a;break;case i:t=r-n+2*a,t/=6*a;break;case r:t=n-i+4*a,t/=6*a}return[t,l,u]}function l(e){var t=+e[2]|+e[1]<<8|+e[0]<<16;return t="000000"+t.toString(16),t.slice(-6)}function u(e){return a(h(e))}function h(e){return 3===e.length&&(e=e.replace(/./g,"$&$&")),[parseInt(e[0]+e[1],16),parseInt(e[2]+e[3],16),parseInt(e[4]+e[5],16)]}function c(e){return[+e[0]/360,+e[1]/100,+e[2]/100]}function p(e){return[Math.round(360*+e[0]),Math.round(100*+e[1]),Math.round(100*+e[2])]}function d(e,t,n){return t.addEventListener(e,n,!1)}function f(e,t,n){return t.removeEventListener(e,n)}function y(e,t){for(var n=t.touches?t.touches[0].pageX:t.pageX,i=t.touches?t.touches[0].pageY:t.pageY,r=m(e).l,s=m(e).t;e=e.offsetParent;)r+=m(e).l,s+=m(e).t;return{x:n-r,y:i-s}}function m(e){return{l:e.offsetLeft,t:e.offsetTop}}function g(e,t){for(;(e=e.parentElement)&&e!==t;);return e}function v(e){e&&e.preventDefault()}function L(e){return{w:e.offsetWidth,h:e.offsetHeight}}function b(e){return D||!!i(e)&&e}function O(e){D=e}function x(e,t,n){return i(e)?i(t)?(i(I[e])||(I[e]={}),i(n)||(n=Object.keys(I[e]).length),I[e][n]=t,N):I[e]:I}function w(e,t){return i(e)?i(t)?(delete I[e][t],N):(I[e]={},N):(I={},N)}function C(e,t,n){if(!i(I[e]))return N;if(i(n))i(I[e][n])&&I[e][n].apply(N,t);else for(var r in I[e])I[e][r].apply(N,t);return N}function E(e,t){e&&"h"!==e||C("change:h",t),e&&"sv"!==e||C("change:sv",t),C("change",t)}function S(e,t){return M.setTimeout(e,t)}function _(){return A.parentNode}function T(){var t=L(U).w,n=M.innerHeight,i=Math.max(z.scrollLeft,U.scrollLeft),r=Math.max(z.scrollTop,U.scrollTop),s=t+i,o=n+r;return $=m(e).l,K=m(e).t+L(e).h,$+Q>s&&($=s-Q),K+J>o&&(K=o-J),A.style.left=$+"px",A.style.top=K+"px",C("fit",[N]),N}function k(n,i){function a(e){var t=(s(B),s([B[0],1,1]));G.style.backgroundColor="rgb("+t.join(",")+")",O(B),v(e)}function l(e){var t=r(y(j,e).y,0,x);B[0]=(x-t)/x,W.style.top=t-D/2+"px",a(e)}function u(e){var t=y(G,e),n=r(t.x,0,w),i=r(t.y,0,S);B[1]=1-(w-n)/w,B[2]=(S-i)/S,q.style.right=w-n-I/2+"px",q.style.top=i-U/2+"px",a(e)}function h(e){Y&&(l(e),ee=o(B),V||(C("drag:h",[ee,N]),C("drag",[ee,N]),E("h",[ee,N]))),Z&&(u(e),ee=o(B),X||(C("drag:sv",[ee,N]),C("drag",[ee,N]),E("sv",[ee,N]))),V=!1,X=!1}function c(n){var i=n.target,r=Y?"h":"sv",s=[o(B),N],a=i===e||g(i,e)===e,l=i===A||g(i,A)===A;a||l?l&&(C("stop:"+r,s),C("stop",s),E(r,s)):_()&&t!==!1&&(F(),C("exit",[N]),E(0,s)),Y=!1,Z=!1}function p(e){V=!0,Y=!0,h(e),v(e),C("start:h",[ee,N]),C("start",[ee,N]),E("h",[ee,N])}function m(e){X=!0,Z=!0,h(e),v(e),C("start:sv",[ee,N]),C("start",[ee,N]),E("sv",[ee,N])}n||((i||z).appendChild(A),N.visible=!0),Q=L(A).w,J=L(A).h;var x=L(j).h,w=L(G).w,S=L(G).h,D=L(W).h,I=L(q).w,U=L(q).h;if(n){var H;!function(){var n=function(t){var n=t.target,i=n===e||g(n,e)===e;i?k():F(),C(i?"enter":"exit",[N])};if(A.style.left="-9999px",A.style.top="-9999px",t!==!1)for(H=t.length;H--;)d(t[H],e,n);N.create=function(){return k(1),C("create",[N]),N},N.destroy=function(){if(t!==!1)for(var i=t.length;i--;)f(t[i],e,n);return F(),O(!1),C("destroy",[N]),N}}()}else T();R=function(){B=b(B),a(),W.style.top=x-D/2-x*+B[0]+"px",q.style.right=w-I/2-w*+B[1]+"px",q.style.top=S-U/2-S*+B[2]+"px"},F=function(e){return _()&&(_().removeChild(A),N.visible=!1),f("touchstart",j,p),f("mousedown",j,p),f("touchstart",G,m),f("mousedown",G,m),f("touchmove",P,h),f("mousemove",P,h),f("touchend",P,c),f("mouseup",P,c),f("resize",M,T),N},R(),n||(d("touchstart",j,p),d("mousedown",j,p),d("touchstart",G,m),d("mousedown",G,m),d("touchmove",P,h),d("mousemove",P,h),d("touchend",P,c),d("mouseup",P,c),d("resize",M,T))}var M=window,P=document,N=this,D=!1,I={},A=P.createElement("div");i(t)||(t=["mousedown","touchstart"]),N.parse=function(e){if("object"===("undefined"==typeof e?"undefined":n(e)))return e;var t=/\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i.exec(e),i=/\s*hsv\s*\(\s*(\d+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*\)\s*$/i.exec(e),r="#"===e[0]&&e.match(/^#([\da-f]{3}|[\da-f]{6})$/);return r?u(e.slice(1)):i?c([+i[1],+i[2],+i[3]]):t?a([+t[1],+t[2],+t[3]]):[0,1,1]},O(N.parse(e.getAttribute("data-color")||e.value||[0,1,1])),A.className="color-picker",A.innerHTML='<div class="color-picker-control"><span class="color-picker-h"><i></i></span><span class="color-picker-sv"><i></i></span></div>';var R,F,z=P.body,U=P.documentElement,H=A.firstChild.children,B=b([0,1,1]),j=H[0],G=H[1],W=j.firstChild,q=G.firstChild,V=!1,X=!1,Y=!1,Z=!1,$=0,K=0,Q=0,J=0,ee=o(B);return k(1),S(function(){var e=[o(B),N];C("create",e),E(0,e)},0),N.target=e,N.picker=A,N.visible=!1,N.on=x,N.off=w,N.trigger=C,N.fit=T,N.set=function(e){return i(e)?("string"==typeof e&&(e=N.parse(e)),O(e),R(),N):b()},N.HSV2RGB=function(e){return s(c(e))},N._HSV2RGB=s,N.HSV2HEX=function(e){return o(c(e))},N._HSV2HEX=o,N.RGB2HSV=function(e){return p(a(e))},N._RGB2HSV=a,N.RGB2HEX=l,N.HEX2HSV=function(e){return p(u(e))},N._HEX2HSV=u,N.HEX2RGB=h,N.hooks=I,N.enter=function(e){return k(0,e)},N.exit=F,N};e.exports=i},function(module,exports){var OpenLayers={VERSION_NUMBER:"Release 2.14 dev",singleFile:!0,_getScriptLocation:function(){for(var e,t,n=new RegExp("(^|(.*?\\/))(OpenLayers[^\\/]*?\\.js)(\\?|$)"),i=document.getElementsByTagName("script"),r="",s=0,o=i.length;s<o;s++)if(e=i[s].getAttribute("src"),e&&(t=e.match(n))){r=t[1];break}return function(){return r}}(),ImgPath:""};OpenLayers.Class=function(){var e=arguments.length,t=arguments[0],n=arguments[e-1],i="function"==typeof n.initialize?n.initialize:function(){t.prototype.initialize.apply(this,arguments)};if(e>1){var r=[i,t].concat(Array.prototype.slice.call(arguments).slice(1,e-1),n);OpenLayers.inherit.apply(null,r)}else i.prototype=n;return i},OpenLayers.inherit=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n;var i,r,s;for(i=2,r=arguments.length;i<r;i++)s=arguments[i],"function"==typeof s&&(s=s.prototype),OpenLayers.Util.extend(e.prototype,s)},OpenLayers.Util=OpenLayers.Util||{},OpenLayers.Util.extend=function(e,t){if(e=e||{},t){for(var n in t){var i=t[n];void 0!==i&&(e[n]=i)}var r="function"==typeof window.Event&&t instanceof window.Event;!r&&t.hasOwnProperty&&t.hasOwnProperty("toString")&&(e.toString=t.toString)}return e},OpenLayers.String={startsWith:function(e,t){return 0==e.indexOf(t)},contains:function(e,t){return e.indexOf(t)!=-1},trim:function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},camelize:function(e){for(var t=e.split("-"),n=t[0],i=1,r=t.length;i<r;i++){var s=t[i];n+=s.charAt(0).toUpperCase()+s.substring(1)}return n},format:function(e,t,n){t||(t=window);var i=function(e,i){for(var r,s=i.split(/\.+/),o=0;o<s.length&&(0==o&&(r=t),void 0!==r);o++)r=r[s[o]];return"function"==typeof r&&(r=n?r.apply(null,n):r()),"undefined"==typeof r?"undefined":r};return e.replace(OpenLayers.String.tokenRegEx,i)},tokenRegEx:/\$\{([\w.]+?)\}/g,numberRegEx:/^([+-]?)(?=\d|\.\d)\d*(\.\d*)?([Ee]([+-]?\d+))?$/,isNumeric:function(e){return OpenLayers.String.numberRegEx.test(e)},numericIf:function(e,t){var n=e;return t===!0&&null!=e&&e.replace&&(e=e.replace(/^\s*|\s*$/g,"")),OpenLayers.String.isNumeric(e)?parseFloat(e):n}},OpenLayers.Number={decimalSeparator:".",thousandsSeparator:",",limitSigDigs:function(e,t){var n=0;return t>0&&(n=parseFloat(e.toPrecision(t))),n},format:function(e,t,n,i){t="undefined"!=typeof t?t:0,n="undefined"!=typeof n?n:OpenLayers.Number.thousandsSeparator,i="undefined"!=typeof i?i:OpenLayers.Number.decimalSeparator,null!=t&&(e=parseFloat(e.toFixed(t)));var r=e.toString().split(".");1==r.length&&null==t&&(t=0);var s=r[0];if(n)for(var o=/(-?[0-9]+)([0-9]{3})/;o.test(s);)s=s.replace(o,"$1"+n+"$2");var a;if(0==t)a=s;else{var l=r.length>1?r[1]:"0";null!=t&&(l+=new Array(t-l.length+1).join("0")),a=s+i+l}return a},zeroPad:function(e,t,n){for(var i=e.toString(n||10);i.length<t;)i="0"+i;return i}},OpenLayers.Function={bind:function(e,t){var n=Array.prototype.slice.call(arguments,2);return function(){var i=n.concat(Array.prototype.slice.call(arguments,0));return e.apply(t,i)}},bindAsEventListener:function(e,t){return function(n){return e.call(t,n||window.event)}},False:function(){return!1},True:function(){return!0},Void:function(){}},OpenLayers.Array={filter:function(e,t,n){var i=[];if(Array.prototype.filter)i=e.filter(t,n);else{var r=e.length;if("function"!=typeof t)throw new TypeError;for(var s=0;s<r;s++)if(s in e){var o=e[s];t.call(n,o,s,e)&&i.push(o)}}return i}},OpenLayers.Bounds=OpenLayers.Class({left:null,bottom:null,right:null,top:null,centerLonLat:null,initialize:function(e,t,n,i){OpenLayers.Util.isArray(e)&&(i=e[3],n=e[2],t=e[1],e=e[0]),null!=e&&(this.left=OpenLayers.Util.toFloat(e)),null!=t&&(this.bottom=OpenLayers.Util.toFloat(t)),null!=n&&(this.right=OpenLayers.Util.toFloat(n)),null!=i&&(this.top=OpenLayers.Util.toFloat(i))},clone:function(){return new OpenLayers.Bounds(this.left,this.bottom,this.right,this.top)},equals:function(e){var t=!1;return null!=e&&(t=this.left==e.left&&this.right==e.right&&this.top==e.top&&this.bottom==e.bottom),t},toString:function(){return[this.left,this.bottom,this.right,this.top].join(",")},toArray:function(e){return e===!0?[this.bottom,this.left,this.top,this.right]:[this.left,this.bottom,this.right,this.top]},toBBOX:function(e,t){null==e&&(e=6);var n=Math.pow(10,e),i=Math.round(this.left*n)/n,r=Math.round(this.bottom*n)/n,s=Math.round(this.right*n)/n,o=Math.round(this.top*n)/n;return t===!0?r+","+i+","+o+","+s:i+","+r+","+s+","+o},toGeometry:function(){return new OpenLayers.Geometry.Polygon([new OpenLayers.Geometry.LinearRing([new OpenLayers.Geometry.Point(this.left,this.bottom),new OpenLayers.Geometry.Point(this.right,this.bottom),new OpenLayers.Geometry.Point(this.right,this.top),new OpenLayers.Geometry.Point(this.left,this.top)])])},getWidth:function(){return this.right-this.left},getHeight:function(){return this.top-this.bottom},getSize:function(){return new OpenLayers.Size(this.getWidth(),this.getHeight())},getCenterPixel:function(){return new OpenLayers.Pixel((this.left+this.right)/2,(this.bottom+this.top)/2)},getCenterLonLat:function(){return this.centerLonLat||(this.centerLonLat=new OpenLayers.LonLat((this.left+this.right)/2,(this.bottom+this.top)/2)),this.centerLonLat},scale:function(e,t){null==t&&(t=this.getCenterLonLat());var n,i;"OpenLayers.LonLat"==t.CLASS_NAME?(n=t.lon,i=t.lat):(n=t.x,i=t.y);var r=(this.left-n)*e+n,s=(this.bottom-i)*e+i,o=(this.right-n)*e+n,a=(this.top-i)*e+i;return new OpenLayers.Bounds(r,s,o,a)},add:function(e,t){if(null==e||null==t)throw new TypeError("Bounds.add cannot receive null values");return new OpenLayers.Bounds(this.left+e,this.bottom+t,this.right+e,this.top+t)},extend:function(e){if(e)switch(e.CLASS_NAME){case"OpenLayers.LonLat":this.extendXY(e.lon,e.lat);break;case"OpenLayers.Geometry.Point":this.extendXY(e.x,e.y);break;case"OpenLayers.Bounds":this.centerLonLat=null,(null==this.left||e.left<this.left)&&(this.left=e.left),(null==this.bottom||e.bottom<this.bottom)&&(this.bottom=e.bottom),(null==this.right||e.right>this.right)&&(this.right=e.right),(null==this.top||e.top>this.top)&&(this.top=e.top)}},extendXY:function(e,t){this.centerLonLat=null,(null==this.left||e<this.left)&&(this.left=e),(null==this.bottom||t<this.bottom)&&(this.bottom=t),(null==this.right||e>this.right)&&(this.right=e),(null==this.top||t>this.top)&&(this.top=t)},containsLonLat:function(e,t){"boolean"==typeof t&&(t={inclusive:t}),t=t||{};var n=this.contains(e.lon,e.lat,t.inclusive),i=t.worldBounds;if(i&&!n){var r=i.getWidth(),s=(i.left+i.right)/2,o=Math.round((e.lon-s)/r);n=this.containsLonLat({lon:e.lon-o*r,lat:e.lat},{inclusive:t.inclusive})}return n},containsPixel:function(e,t){return this.contains(e.x,e.y,t)},contains:function(e,t,n){if(null==n&&(n=!0),null==e||null==t)return!1;e=OpenLayers.Util.toFloat(e),t=OpenLayers.Util.toFloat(t);var i=!1;return i=n?e>=this.left&&e<=this.right&&t>=this.bottom&&t<=this.top:e>this.left&&e<this.right&&t>this.bottom&&t<this.top},intersectsBounds:function(e,t){if("boolean"==typeof t&&(t={inclusive:t}),t=t||{},t.worldBounds){var n=this.wrapDateLine(t.worldBounds);e=e.wrapDateLine(t.worldBounds)}else n=this;null==t.inclusive&&(t.inclusive=!0);var i=!1,r=n.left==e.right||n.right==e.left||n.top==e.bottom||n.bottom==e.top;if(t.inclusive||!r){var s=e.bottom>=n.bottom&&e.bottom<=n.top||n.bottom>=e.bottom&&n.bottom<=e.top,o=e.top>=n.bottom&&e.top<=n.top||n.top>e.bottom&&n.top<e.top,a=e.left>=n.left&&e.left<=n.right||n.left>=e.left&&n.left<=e.right,l=e.right>=n.left&&e.right<=n.right||n.right>=e.left&&n.right<=e.right;i=(s||o)&&(a||l)}if(t.worldBounds&&!i){var u=t.worldBounds,h=u.getWidth(),c=!u.containsBounds(n),p=!u.containsBounds(e);c&&!p?(e=e.add(-h,0),i=n.intersectsBounds(e,{inclusive:t.inclusive})):p&&!c&&(n=n.add(-h,0),i=e.intersectsBounds(n,{inclusive:t.inclusive}))}return i},containsBounds:function(e,t,n){null==t&&(t=!1),null==n&&(n=!0);var i=this.contains(e.left,e.bottom,n),r=this.contains(e.right,e.bottom,n),s=this.contains(e.left,e.top,n),o=this.contains(e.right,e.top,n);return t?i||r||s||o:i&&r&&s&&o},determineQuadrant:function(e){var t="",n=this.getCenterLonLat();return t+=e.lat<n.lat?"b":"t",t+=e.lon<n.lon?"l":"r"},transform:function(e,t){this.centerLonLat=null;var n=OpenLayers.Projection.transform({x:this.left,y:this.bottom},e,t),i=OpenLayers.Projection.transform({x:this.right,y:this.bottom},e,t),r=OpenLayers.Projection.transform({x:this.left,y:this.top},e,t),s=OpenLayers.Projection.transform({x:this.right,y:this.top},e,t);return this.left=Math.min(n.x,r.x),this.bottom=Math.min(n.y,i.y),this.right=Math.max(i.x,s.x),this.top=Math.max(r.y,s.y),this},wrapDateLine:function(e,t){t=t||{};var n=t.leftTolerance||0,i=t.rightTolerance||0,r=this.clone();if(e){for(var s=e.getWidth();r.left<e.left&&r.right-i<=e.left;)r=r.add(s,0);for(;r.left+n>=e.right&&r.right>e.right;)r=r.add(-s,0);var o=r.left+n;o<e.right&&o>e.left&&r.right-i>e.right&&(r=r.add(-s,0))}return r},CLASS_NAME:"OpenLayers.Bounds"}),OpenLayers.Bounds.fromString=function(e,t){var n=e.split(",");return OpenLayers.Bounds.fromArray(n,t)},OpenLayers.Bounds.fromArray=function(e,t){return t===!0?new OpenLayers.Bounds(e[1],e[0],e[3],e[2]):new OpenLayers.Bounds(e[0],e[1],e[2],e[3])},OpenLayers.Bounds.fromSize=function(e){return new OpenLayers.Bounds(0,e.h,e.w,0)},OpenLayers.Bounds.oppositeQuadrant=function(e){var t="";return t+="t"==e.charAt(0)?"b":"t",t+="l"==e.charAt(1)?"r":"l"},OpenLayers.Element={visible:function(e){return"none"!=OpenLayers.Util.getElement(e).style.display},toggle:function(){for(var e=0,t=arguments.length;e<t;e++){var n=OpenLayers.Util.getElement(arguments[e]),i=OpenLayers.Element.visible(n)?"none":"";n.style.display=i}},remove:function(e){e=OpenLayers.Util.getElement(e),e.parentNode.removeChild(e)},getHeight:function(e){return e=OpenLayers.Util.getElement(e),e.offsetHeight},hasClass:function(e,t){var n=e.className;return!!n&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(n)},addClass:function(e,t){return OpenLayers.Element.hasClass(e,t)||(e.className+=(e.className?" ":"")+t),e},removeClass:function(e,t){var n=e.className;return n&&(e.className=OpenLayers.String.trim(n.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)")," "))),e},toggleClass:function(e,t){return OpenLayers.Element.hasClass(e,t)?OpenLayers.Element.removeClass(e,t):OpenLayers.Element.addClass(e,t),e},getStyle:function(e,t){e=OpenLayers.Util.getElement(e);var n=null;if(e&&e.style){if(n=e.style[OpenLayers.String.camelize(t)],!n)if(document.defaultView&&document.defaultView.getComputedStyle){var i=document.defaultView.getComputedStyle(e,null);n=i?i.getPropertyValue(t):null}else e.currentStyle&&(n=e.currentStyle[OpenLayers.String.camelize(t)]);var r=["left","top","right","bottom"];window.opera&&OpenLayers.Util.indexOf(r,t)!=-1&&"static"==OpenLayers.Element.getStyle(e,"position")&&(n="auto")}return"auto"==n?null:n}},OpenLayers.LonLat=OpenLayers.Class({lon:0,lat:0,initialize:function(e,t){OpenLayers.Util.isArray(e)&&(t=e[1],e=e[0]),this.lon=OpenLayers.Util.toFloat(e),this.lat=OpenLayers.Util.toFloat(t)},toString:function(){return"lon="+this.lon+",lat="+this.lat},toShortString:function(){return this.lon+", "+this.lat},clone:function(){return new OpenLayers.LonLat(this.lon,this.lat)},add:function(e,t){if(null==e||null==t)throw new TypeError("LonLat.add cannot receive null values");return new OpenLayers.LonLat(this.lon+OpenLayers.Util.toFloat(e),this.lat+OpenLayers.Util.toFloat(t))},equals:function(e){var t=!1;return null!=e&&(t=this.lon==e.lon&&this.lat==e.lat||isNaN(this.lon)&&isNaN(this.lat)&&isNaN(e.lon)&&isNaN(e.lat)),t},transform:function(e,t){var n=OpenLayers.Projection.transform({x:this.lon,y:this.lat},e,t);return this.lon=n.x,this.lat=n.y,this},wrapDateLine:function(e){var t=this.clone();if(e){for(;t.lon<e.left;)t.lon+=e.getWidth();for(;t.lon>e.right;)t.lon-=e.getWidth()}return t},CLASS_NAME:"OpenLayers.LonLat"}),OpenLayers.LonLat.fromString=function(e){var t=e.split(",");return new OpenLayers.LonLat(t[0],t[1])},OpenLayers.LonLat.fromArray=function(e){var t=OpenLayers.Util.isArray(e),n=t&&e[0],i=t&&e[1];return new OpenLayers.LonLat(n,i)},OpenLayers.Pixel=OpenLayers.Class({x:0,y:0,initialize:function(e,t){this.x=parseFloat(e),this.y=parseFloat(t)},toString:function(){return"x="+this.x+",y="+this.y},clone:function(){return new OpenLayers.Pixel(this.x,this.y)},equals:function(e){var t=!1;return null!=e&&(t=this.x==e.x&&this.y==e.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(e.x)&&isNaN(e.y)),t},distanceTo:function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))},add:function(e,t){if(null==e||null==t)throw new TypeError("Pixel.add cannot receive null values");return new OpenLayers.Pixel(this.x+e,this.y+t)},offset:function(e){var t=this.clone();return e&&(t=this.add(e.x,e.y)),t},CLASS_NAME:"OpenLayers.Pixel"}),OpenLayers.Size=OpenLayers.Class({w:0,h:0,initialize:function(e,t){this.w=parseFloat(e),this.h=parseFloat(t)},toString:function(){return"w="+this.w+",h="+this.h},clone:function(){return new OpenLayers.Size(this.w,this.h)},equals:function(e){var t=!1;return null!=e&&(t=this.w==e.w&&this.h==e.h||isNaN(this.w)&&isNaN(this.h)&&isNaN(e.w)&&isNaN(e.h)),t},CLASS_NAME:"OpenLayers.Size"}),OpenLayers.Console={log:function(){},debug:function(){},info:function(){},warn:function(){},error:function(){},userError:function(e){alert(e)},assert:function(){},dir:function(){},dirxml:function(){},trace:function(){},group:function(){},groupEnd:function(){},time:function(){},timeEnd:function(){},profile:function(){},profileEnd:function(){},count:function(){},CLASS_NAME:"OpenLayers.Console"},function(){for(var e=document.getElementsByTagName("script"),t=0,n=e.length;t<n;++t)if(e[t].src.indexOf("firebug.js")!=-1&&console){OpenLayers.Util.extend(OpenLayers.Console,console);break}}(),OpenLayers.Lang={code:null,defaultCode:"en",getCode:function(){return OpenLayers.Lang.code||OpenLayers.Lang.setCode(),OpenLayers.Lang.code},setCode:function(e){var t;e||(e="msie"==OpenLayers.BROWSER_NAME?navigator.userLanguage:navigator.language);var n=e.split("-");if(n[0]=n[0].toLowerCase(),"object"==typeof OpenLayers.Lang[n[0]]&&(t=n[0]),n[1]){var i=n[0]+"-"+n[1].toUpperCase();"object"==typeof OpenLayers.Lang[i]&&(t=i)}t||(OpenLayers.Console.warn("Failed to find OpenLayers.Lang."+n.join("-")+" dictionary, falling back to default language"),t=OpenLayers.Lang.defaultCode),OpenLayers.Lang.code=t},translate:function(e,t){var n=OpenLayers.Lang[OpenLayers.Lang.getCode()],i=n&&n[e];return i||(i=e),t&&(i=OpenLayers.String.format(i,t)),i}},OpenLayers.i18n=OpenLayers.Lang.translate,OpenLayers.Util=OpenLayers.Util||{},OpenLayers.Util.getElement=function(){for(var e=[],t=0,n=arguments.length;t<n;t++){var i=arguments[t];if("string"==typeof i&&(i=document.getElementById(i)),1==arguments.length)return i;e.push(i)}return e},OpenLayers.Util.isElement=function(e){return!(!e||1!==e.nodeType)},OpenLayers.Util.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},OpenLayers.Util.removeItem=function(e,t){for(var n=e.length-1;n>=0;n--)e[n]==t&&e.splice(n,1);return e},OpenLayers.Util.indexOf=function(e,t){if("function"==typeof e.indexOf)return e.indexOf(t);for(var n=0,i=e.length;n<i;n++)if(e[n]==t)return n;return-1},OpenLayers.Util.dotless=/\./g,OpenLayers.Util.modifyDOMElement=function(e,t,n,i,r,s,o,a){t&&(e.id=t.replace(OpenLayers.Util.dotless,"_")),n&&(e.style.left=n.x+"px",e.style.top=n.y+"px"),i&&(e.style.width=i.w+"px",e.style.height=i.h+"px"),r&&(e.style.position=r),s&&(e.style.border=s),o&&(e.style.overflow=o),parseFloat(a)>=0&&parseFloat(a)<1?(e.style.filter="alpha(opacity="+100*a+")",e.style.opacity=a):1==parseFloat(a)&&(e.style.filter="",e.style.opacity="")},OpenLayers.Util.createDiv=function(e,t,n,i,r,s,o,a){var l=document.createElement("div");return i&&(l.style.backgroundImage="url("+i+")"),e||(e=OpenLayers.Util.createUniqueID("OpenLayersDiv")),r||(r="absolute"),OpenLayers.Util.modifyDOMElement(l,e,t,n,r,s,o,a),l},OpenLayers.Util.createImage=function(e,t,n,i,r,s,o,a){function l(){u.style.display="",OpenLayers.Event.stopObservingElement(u)}var u=document.createElement("img");return e||(e=OpenLayers.Util.createUniqueID("OpenLayersDiv")),r||(r="relative"),OpenLayers.Util.modifyDOMElement(u,e,t,n,r,s,null,o),a&&(u.style.display="none",OpenLayers.Event.observe(u,"load",l),OpenLayers.Event.observe(u,"error",l)),u.style.alt=e,u.galleryImg="no",i&&(u.src=i),u},OpenLayers.IMAGE_RELOAD_ATTEMPTS=0,OpenLayers.Util.alphaHackNeeded=null,OpenLayers.Util.alphaHack=function(){if(null==OpenLayers.Util.alphaHackNeeded){var e=navigator.appVersion.split("MSIE"),t=parseFloat(e[1]),n=!1;try{n=!!document.body.filters}catch(e){}OpenLayers.Util.alphaHackNeeded=n&&t>=5.5&&t<7}return OpenLayers.Util.alphaHackNeeded},OpenLayers.Util.modifyAlphaImageDiv=function(e,t,n,i,r,s,o,a,l){OpenLayers.Util.modifyDOMElement(e,t,n,i,s,null,null,l);var u=e.childNodes[0];r&&(u.src=r),OpenLayers.Util.modifyDOMElement(u,e.id+"_innerImage",null,i,"relative",o),OpenLayers.Util.alphaHack()&&("none"!=e.style.display&&(e.style.display="inline-block"),null==a&&(a="scale"),e.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+u.src+"', sizingMethod='"+a+"')",parseFloat(e.style.opacity)>=0&&parseFloat(e.style.opacity)<1&&(e.style.filter+=" alpha(opacity="+100*e.style.opacity+")"),u.style.filter="alpha(opacity=0)")},OpenLayers.Util.createAlphaImageDiv=function(e,t,n,i,r,s,o,a,l){var u=OpenLayers.Util.createDiv(),h=OpenLayers.Util.createImage(null,null,null,null,null,null,null,l);return h.className="olAlphaImg",u.appendChild(h),OpenLayers.Util.modifyAlphaImageDiv(u,e,t,n,i,r,s,o,a),u},OpenLayers.Util.upperCaseObject=function(e){var t={};for(var n in e)t[n.toUpperCase()]=e[n];return t},OpenLayers.Util.applyDefaults=function(e,t){e=e||{};var n="function"==typeof window.Event&&t instanceof window.Event;for(var i in t)(void 0===e[i]||!n&&t.hasOwnProperty&&t.hasOwnProperty(i)&&!e.hasOwnProperty(i))&&(e[i]=t[i]);return!n&&t&&t.hasOwnProperty&&t.hasOwnProperty("toString")&&!e.hasOwnProperty("toString")&&(e.toString=t.toString),e},OpenLayers.Util.getParameterString=function(e){var t=[];for(var n in e){var i=e[n];if(null!=i&&"function"!=typeof i){var r;if("object"==typeof i&&i.constructor==Array){for(var s,o=[],a=0,l=i.length;a<l;a++)s=i[a],o.push(encodeURIComponent(null===s||void 0===s?"":s));r=o.join(",")}else r=encodeURIComponent(i);t.push(encodeURIComponent(n)+"="+r)}}return t.join("&")},OpenLayers.Util.urlAppend=function(e,t){var n=e;if(t){var i=(e+" ").split(/[?&]/);n+=" "===i.pop()?t:i.length?"&"+t:"?"+t}return n},OpenLayers.Util.getImagesLocation=function(){return OpenLayers.ImgPath||OpenLayers._getScriptLocation()+"img/"},OpenLayers.Util.getImageLocation=function(e){return OpenLayers.Util.getImagesLocation()+e},OpenLayers.Util.Try=function(){for(var e=null,t=0,n=arguments.length;t<n;t++){var i=arguments[t];try{e=i();break}catch(e){}}return e},OpenLayers.Util.getXmlNodeValue=function(e){var t=null;return OpenLayers.Util.Try(function(){t=e.text,t||(t=e.textContent),t||(t=e.firstChild.nodeValue)},function(){t=e.textContent}),t},OpenLayers.Util.mouseLeft=function(e,t){for(var n=e.relatedTarget?e.relatedTarget:e.toElement;n!=t&&null!=n;)n=n.parentNode;return n!=t},OpenLayers.Util.DEFAULT_PRECISION=14,OpenLayers.Util.toFloat=function(e,t){return null==t&&(t=OpenLayers.Util.DEFAULT_PRECISION),"number"!=typeof e&&(e=parseFloat(e)),0===t?e:parseFloat(e.toPrecision(t))},OpenLayers.Util.rad=function(e){return e*Math.PI/180},OpenLayers.Util.deg=function(e){return 180*e/Math.PI},OpenLayers.Util.VincentyConstants={a:6378137,b:6356752.3142,f:1/298.257223563},OpenLayers.Util.distVincenty=function(e,t){for(var n=OpenLayers.Util.VincentyConstants,i=n.a,r=n.b,s=n.f,o=OpenLayers.Util.rad(t.lon-e.lon),a=Math.atan((1-s)*Math.tan(OpenLayers.Util.rad(e.lat))),l=Math.atan((1-s)*Math.tan(OpenLayers.Util.rad(t.lat))),u=Math.sin(a),h=Math.cos(a),c=Math.sin(l),p=Math.cos(l),d=o,f=2*Math.PI,y=20;Math.abs(d-f)>1e-12&&--y>0;){var m=Math.sin(d),g=Math.cos(d),v=Math.sqrt(p*m*(p*m)+(h*c-u*p*g)*(h*c-u*p*g));if(0==v)return 0;var L=u*c+h*p*g,b=Math.atan2(v,L),O=Math.asin(h*p*m/v),x=Math.cos(O)*Math.cos(O),w=L-2*u*c/x,C=s/16*x*(4+s*(4-3*x));f=d,d=o+(1-C)*s*Math.sin(O)*(b+C*v*(w+C*L*(-1+2*w*w)));
}if(0==y)return NaN;var E=x*(i*i-r*r)/(r*r),S=1+E/16384*(4096+E*(-768+E*(320-175*E))),_=E/1024*(256+E*(-128+E*(74-47*E))),T=_*v*(w+_/4*(L*(-1+2*w*w)-_/6*w*(-3+4*v*v)*(-3+4*w*w))),k=r*S*(b-T),M=k.toFixed(3)/1e3;return M},OpenLayers.Util.destinationVincenty=function(e,t,n){for(var i=OpenLayers.Util,r=i.VincentyConstants,s=r.a,o=r.b,a=r.f,l=e.lon,u=e.lat,h=n,c=i.rad(t),p=Math.sin(c),d=Math.cos(c),f=(1-a)*Math.tan(i.rad(u)),y=1/Math.sqrt(1+f*f),m=f*y,g=Math.atan2(f,d),v=y*p,L=1-v*v,b=L*(s*s-o*o)/(o*o),O=1+b/16384*(4096+b*(-768+b*(320-175*b))),x=b/1024*(256+b*(-128+b*(74-47*b))),w=h/(o*O),C=2*Math.PI;Math.abs(w-C)>1e-12;){var E=Math.cos(2*g+w),S=Math.sin(w),_=Math.cos(w),T=x*S*(E+x/4*(_*(-1+2*E*E)-x/6*E*(-3+4*S*S)*(-3+4*E*E)));C=w,w=h/(o*O)+T}var k=m*S-y*_*d,M=Math.atan2(m*_+y*S*d,(1-a)*Math.sqrt(v*v+k*k)),P=Math.atan2(S*p,y*_-m*S*d),N=a/16*L*(4+a*(4-3*L)),D=P-(1-N)*a*v*(w+N*S*(E+N*_*(-1+2*E*E)));Math.atan2(v,-k);return new OpenLayers.LonLat(l+i.deg(D),i.deg(M))},OpenLayers.Util.getParameters=function(e,t){t=t||{},e=null===e||void 0===e?window.location.href:e;var n="";if(OpenLayers.String.contains(e,"?")){var i=e.indexOf("?")+1,r=OpenLayers.String.contains(e,"#")?e.indexOf("#"):e.length;n=e.substring(i,r)}for(var s={},o=n.split(/[&;]/),a=0,l=o.length;a<l;++a){var u=o[a].split("=");if(u[0]){var h=u[0];try{h=decodeURIComponent(h)}catch(e){h=unescape(h)}var c=(u[1]||"").replace(/\+/g," ");try{c=decodeURIComponent(c)}catch(e){c=unescape(c)}t.splitArgs!==!1&&(c=c.split(",")),1==c.length&&(c=c[0]),s[h]=c}}return s},OpenLayers.Util.lastSeqID=0,OpenLayers.Util.createUniqueID=function(e){return e=null==e?"id_":e.replace(OpenLayers.Util.dotless,"_"),OpenLayers.Util.lastSeqID+=1,e+OpenLayers.Util.lastSeqID},OpenLayers.INCHES_PER_UNIT={inches:1,ft:12,mi:63360,m:39.37,km:39370,dd:4374754,yd:36},OpenLayers.INCHES_PER_UNIT.in=OpenLayers.INCHES_PER_UNIT.inches,OpenLayers.INCHES_PER_UNIT.degrees=OpenLayers.INCHES_PER_UNIT.dd,OpenLayers.INCHES_PER_UNIT.nmi=1852*OpenLayers.INCHES_PER_UNIT.m,OpenLayers.METERS_PER_INCH=.0254000508001016,OpenLayers.Util.extend(OpenLayers.INCHES_PER_UNIT,{Inch:OpenLayers.INCHES_PER_UNIT.inches,Meter:1/OpenLayers.METERS_PER_INCH,Foot:.3048006096012192/OpenLayers.METERS_PER_INCH,IFoot:.3048/OpenLayers.METERS_PER_INCH,ClarkeFoot:.3047972651151/OpenLayers.METERS_PER_INCH,SearsFoot:.30479947153867626/OpenLayers.METERS_PER_INCH,GoldCoastFoot:.3047997101815088/OpenLayers.METERS_PER_INCH,IInch:.0254/OpenLayers.METERS_PER_INCH,MicroInch:254e-7/OpenLayers.METERS_PER_INCH,Mil:2.54e-8/OpenLayers.METERS_PER_INCH,Centimeter:.01/OpenLayers.METERS_PER_INCH,Kilometer:1e3/OpenLayers.METERS_PER_INCH,Yard:.9144018288036576/OpenLayers.METERS_PER_INCH,SearsYard:.914398414616029/OpenLayers.METERS_PER_INCH,IndianYard:.9143985307444408/OpenLayers.METERS_PER_INCH,IndianYd37:.91439523/OpenLayers.METERS_PER_INCH,IndianYd62:.9143988/OpenLayers.METERS_PER_INCH,IndianYd75:.9143985/OpenLayers.METERS_PER_INCH,IndianFoot:.30479951/OpenLayers.METERS_PER_INCH,IndianFt37:.30479841/OpenLayers.METERS_PER_INCH,IndianFt62:.3047996/OpenLayers.METERS_PER_INCH,IndianFt75:.3047995/OpenLayers.METERS_PER_INCH,Mile:1609.3472186944373/OpenLayers.METERS_PER_INCH,IYard:.9144/OpenLayers.METERS_PER_INCH,IMile:1609.344/OpenLayers.METERS_PER_INCH,NautM:1852/OpenLayers.METERS_PER_INCH,"Lat-66":110943.31648893273/OpenLayers.METERS_PER_INCH,"Lat-83":110946.25736872235/OpenLayers.METERS_PER_INCH,Decimeter:.1/OpenLayers.METERS_PER_INCH,Millimeter:.001/OpenLayers.METERS_PER_INCH,Dekameter:10/OpenLayers.METERS_PER_INCH,Decameter:10/OpenLayers.METERS_PER_INCH,Hectometer:100/OpenLayers.METERS_PER_INCH,GermanMeter:1.0000135965/OpenLayers.METERS_PER_INCH,CaGrid:.999738/OpenLayers.METERS_PER_INCH,ClarkeChain:20.1166194976/OpenLayers.METERS_PER_INCH,GunterChain:20.11684023368047/OpenLayers.METERS_PER_INCH,BenoitChain:20.116782494375872/OpenLayers.METERS_PER_INCH,SearsChain:20.11676512155/OpenLayers.METERS_PER_INCH,ClarkeLink:.201166194976/OpenLayers.METERS_PER_INCH,GunterLink:.2011684023368047/OpenLayers.METERS_PER_INCH,BenoitLink:.20116782494375873/OpenLayers.METERS_PER_INCH,SearsLink:.2011676512155/OpenLayers.METERS_PER_INCH,Rod:5.02921005842012/OpenLayers.METERS_PER_INCH,IntnlChain:20.1168/OpenLayers.METERS_PER_INCH,IntnlLink:.201168/OpenLayers.METERS_PER_INCH,Perch:5.02921005842012/OpenLayers.METERS_PER_INCH,Pole:5.02921005842012/OpenLayers.METERS_PER_INCH,Furlong:201.1684023368046/OpenLayers.METERS_PER_INCH,Rood:3.778266898/OpenLayers.METERS_PER_INCH,CapeFoot:.3047972615/OpenLayers.METERS_PER_INCH,Brealey:375/OpenLayers.METERS_PER_INCH,ModAmFt:.304812252984506/OpenLayers.METERS_PER_INCH,Fathom:1.8288/OpenLayers.METERS_PER_INCH,"NautM-UK":1853.184/OpenLayers.METERS_PER_INCH,"50kilometers":5e4/OpenLayers.METERS_PER_INCH,"150kilometers":15e4/OpenLayers.METERS_PER_INCH}),OpenLayers.Util.extend(OpenLayers.INCHES_PER_UNIT,{mm:OpenLayers.INCHES_PER_UNIT.Meter/1e3,cm:OpenLayers.INCHES_PER_UNIT.Meter/100,dm:100*OpenLayers.INCHES_PER_UNIT.Meter,km:1e3*OpenLayers.INCHES_PER_UNIT.Meter,kmi:OpenLayers.INCHES_PER_UNIT.nmi,fath:OpenLayers.INCHES_PER_UNIT.Fathom,ch:OpenLayers.INCHES_PER_UNIT.IntnlChain,link:OpenLayers.INCHES_PER_UNIT.IntnlLink,"us-in":OpenLayers.INCHES_PER_UNIT.inches,"us-ft":OpenLayers.INCHES_PER_UNIT.Foot,"us-yd":OpenLayers.INCHES_PER_UNIT.Yard,"us-ch":OpenLayers.INCHES_PER_UNIT.GunterChain,"us-mi":OpenLayers.INCHES_PER_UNIT.Mile,"ind-yd":OpenLayers.INCHES_PER_UNIT.IndianYd37,"ind-ft":OpenLayers.INCHES_PER_UNIT.IndianFt37,"ind-ch":20.11669506/OpenLayers.METERS_PER_INCH}),OpenLayers.DOTS_PER_INCH=72,OpenLayers.Util.normalizeScale=function(e){var t=e>1?1/e:e;return t},OpenLayers.Util.getResolutionFromScale=function(e,t){var n;if(e){null==t&&(t="degrees");var i=OpenLayers.Util.normalizeScale(e);n=1/(i*OpenLayers.INCHES_PER_UNIT[t]*OpenLayers.DOTS_PER_INCH)}return n},OpenLayers.Util.getScaleFromResolution=function(e,t){null==t&&(t="degrees");var n=e*OpenLayers.INCHES_PER_UNIT[t]*OpenLayers.DOTS_PER_INCH;return n},OpenLayers.Util.pagePosition=function(e){var t=[0,0],n=OpenLayers.Util.getViewportElement();if(!e||e==window||e==n)return t;var i,r=OpenLayers.IS_GECKO&&document.getBoxObjectFor&&"absolute"==OpenLayers.Element.getStyle(e,"position")&&(""==e.style.top||""==e.style.left),s=null;if(e.getBoundingClientRect){i=e.getBoundingClientRect();var o=window.pageYOffset||n.scrollTop,a=window.pageXOffset||n.scrollLeft;t[0]=i.left+a,t[1]=i.top+o}else if(document.getBoxObjectFor&&!r){i=document.getBoxObjectFor(e);var l=document.getBoxObjectFor(n);t[0]=i.screenX-l.screenX,t[1]=i.screenY-l.screenY}else{if(t[0]=e.offsetLeft,t[1]=e.offsetTop,s=e.offsetParent,s!=e)for(;s;)t[0]+=s.offsetLeft,t[1]+=s.offsetTop,s=s.offsetParent;var u=OpenLayers.BROWSER_NAME;for(("opera"==u||"safari"==u&&"absolute"==OpenLayers.Element.getStyle(e,"position"))&&(t[1]-=document.body.offsetTop),s=e.offsetParent;s&&s!=document.body;)t[0]-=s.scrollLeft,"opera"==u&&"TR"==s.tagName||(t[1]-=s.scrollTop),s=s.offsetParent}return t},OpenLayers.Util.getViewportElement=function(){var e=arguments.callee.viewportElement;return void 0==e&&(e="msie"==OpenLayers.BROWSER_NAME&&"CSS1Compat"!=document.compatMode?document.body:document.documentElement,arguments.callee.viewportElement=e),e},OpenLayers.Util.isEquivalentUrl=function(e,t,n){n=n||{},OpenLayers.Util.applyDefaults(n,{ignoreCase:!0,ignorePort80:!0,ignoreHash:!0,splitArgs:!1});var i=OpenLayers.Util.createUrlObject(e,n),r=OpenLayers.Util.createUrlObject(t,n);for(var s in i)if("args"!==s&&i[s]!=r[s])return!1;for(var s in i.args){if(i.args[s]!=r.args[s])return!1;delete r.args[s]}for(var s in r.args)return!1;return!0},OpenLayers.Util.createUrlObject=function(e,t){if(t=t||{},!/^\w+:\/\//.test(e)){var n=window.location,i=n.port?":"+n.port:"",r=n.protocol+"//"+n.host.split(":").shift()+i;if(0===e.indexOf("/"))e=r+e;else{var s=n.pathname.split("/");s.pop(),e=r+s.join("/")+"/"+e}}t.ignoreCase&&(e=e.toLowerCase());var o=document.createElement("a");o.href=e;var a={};a.host=o.host.split(":").shift(),a.protocol=o.protocol,t.ignorePort80?a.port="80"==o.port||"0"==o.port?"":o.port:a.port=""==o.port||"0"==o.port?"80":o.port,a.hash=t.ignoreHash||"#"===o.hash?"":o.hash;var l=o.search;if(!l){var u=e.indexOf("?");l=u!=-1?e.substr(u):""}return a.args=OpenLayers.Util.getParameters(l,{splitArgs:t.splitArgs}),a.pathname="/"==o.pathname.charAt(0)?o.pathname:"/"+o.pathname,a},OpenLayers.Util.removeTail=function(e){var t=null,n=e.indexOf("?"),i=e.indexOf("#");return t=n==-1?i!=-1?e.substr(0,i):e:i!=-1?e.substr(0,Math.min(n,i)):e.substr(0,n)},OpenLayers.IS_GECKO=function(){var e=navigator.userAgent.toLowerCase();return e.indexOf("webkit")==-1&&e.indexOf("gecko")!=-1}(),OpenLayers.CANVAS_SUPPORTED=function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))}(),OpenLayers.BROWSER_NAME=function(){var e="",t=navigator.userAgent.toLowerCase();return t.indexOf("opera")!=-1?e="opera":t.indexOf("msie")!=-1?e="msie":t.indexOf("safari")!=-1?e="safari":t.indexOf("mozilla")!=-1&&(e=t.indexOf("firefox")!=-1?"firefox":"mozilla"),e}(),OpenLayers.Util.getBrowserName=function(){return OpenLayers.BROWSER_NAME},OpenLayers.Util.getRenderedDimensions=function(e,t,n){var i,r,s=document.createElement("div");s.style.visibility="hidden";for(var o=n&&n.containerElement?n.containerElement:document.body,a=!1,l=null,u=o;u&&"body"!=u.tagName.toLowerCase();){var h=OpenLayers.Element.getStyle(u,"position");if("absolute"==h){a=!0;break}if(h&&"static"!=h)break;u=u.parentNode}!a||0!==o.clientHeight&&0!==o.clientWidth||(l=document.createElement("div"),l.style.visibility="hidden",l.style.position="absolute",l.style.overflow="visible",l.style.width=document.body.clientWidth+"px",l.style.height=document.body.clientHeight+"px",l.appendChild(s)),s.style.position="absolute",t&&(t.w?(i=t.w,s.style.width=i+"px"):t.h&&(r=t.h,s.style.height=r+"px")),n&&n.displayClass&&(s.className=n.displayClass);var c=document.createElement("div");if(c.innerHTML=e,c.style.overflow="visible",c.childNodes)for(var p=0,d=c.childNodes.length;p<d;p++)c.childNodes[p].style&&(c.childNodes[p].style.overflow="visible");return s.appendChild(c),l?o.appendChild(l):o.appendChild(s),i||(i=parseInt(c.scrollWidth),s.style.width=i+"px"),r||(r=parseInt(c.scrollHeight)),s.removeChild(c),l?(l.removeChild(s),o.removeChild(l)):o.removeChild(s),new OpenLayers.Size(i,r)},OpenLayers.Util.getScrollbarWidth=function(){var e=OpenLayers.Util._scrollbarWidth;if(null==e){var t=null,n=null,i=0,r=0;t=document.createElement("div"),t.style.position="absolute",t.style.top="-1000px",t.style.left="-1000px",t.style.width="100px",t.style.height="50px",t.style.overflow="hidden",n=document.createElement("div"),n.style.width="100%",n.style.height="200px",t.appendChild(n),document.body.appendChild(t),i=n.offsetWidth,t.style.overflow="scroll",r=n.offsetWidth,document.body.removeChild(document.body.lastChild),OpenLayers.Util._scrollbarWidth=i-r,e=OpenLayers.Util._scrollbarWidth}return e},OpenLayers.Util.getFormattedLonLat=function(e,t,n){n||(n="dms"),e=(e+540)%360-180;var i=Math.abs(e),r=Math.floor(i),s=(i-r)/(1/60),o=s;s=Math.floor(s);var a=(o-s)/(1/60);a=Math.round(10*a),a/=10,a>=60&&(a-=60,s+=1,s>=60&&(s-=60,r+=1)),r<10&&(r="0"+r);var l=r+"°";return n.indexOf("dm")>=0&&(s<10&&(s="0"+s),l+=s+"'",n.indexOf("dms")>=0&&(a<10&&(a="0"+a),l+=a+'"')),l+="lon"==t?e<0?OpenLayers.i18n("W"):OpenLayers.i18n("E"):e<0?OpenLayers.i18n("S"):OpenLayers.i18n("N")},OpenLayers.Util.getConstructor=function(e){var t,n=e.split(".");t="OpenLayers"===n[0]?OpenLayers:window[n[0]];for(var i=1,r=n.length;i<r;++i)t=t[n[i]];return t},OpenLayers.Event={observers:!1,KEY_SPACE:32,KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,element:function(e){return e.target||e.srcElement},isSingleTouch:function(e){return e.touches&&1==e.touches.length},isMultiTouch:function(e){return e.touches&&e.touches.length>1},isTouchEvent:function(e){return 0===(""+e.type).indexOf("touch")||"pointerType"in e&&(e.pointerType===e.MSPOINTER_TYPE_TOUCH||"touch"===e.pointerType)},isLeftClick:function(e){return e.which&&1==e.which||e.button&&1==e.button},isRightClick:function(e){return e.which&&3==e.which||e.button&&2==e.button},stop:function(e,t){t||OpenLayers.Event.preventDefault(e),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},preventDefault:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},findElement:function(e,t){for(var n=OpenLayers.Event.element(e);n.parentNode&&(!n.tagName||n.tagName.toUpperCase()!=t.toUpperCase());)n=n.parentNode;return n},observe:function(e,t,n,i){var r=OpenLayers.Util.getElement(e);if(i=i||!1,"keypress"==t&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||r.attachEvent)&&(t="keydown"),this.observers||(this.observers={}),!r._eventCacheID){var s="eventCacheID_";r.id&&(s=r.id+"_"+s),r._eventCacheID=OpenLayers.Util.createUniqueID(s)}var o=r._eventCacheID;this.observers[o]||(this.observers[o]=[]),this.observers[o].push({element:r,name:t,observer:n,useCapture:i}),r.addEventListener?r.addEventListener(t,n,i):r.attachEvent&&r.attachEvent("on"+t,n)},stopObservingElement:function(e){var t=OpenLayers.Util.getElement(e),n=t._eventCacheID;this._removeElementObservers(OpenLayers.Event.observers[n])},_removeElementObservers:function(e){if(e)for(var t=e.length-1;t>=0;t--){var n=e[t];OpenLayers.Event.stopObserving.apply(this,[n.element,n.name,n.observer,n.useCapture])}},stopObserving:function(e,t,n,i){i=i||!1;var r=OpenLayers.Util.getElement(e),s=r._eventCacheID;"keypress"==t&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||r.detachEvent)&&(t="keydown");var o=!1,a=OpenLayers.Event.observers[s];if(a)for(var l=0;!o&&l<a.length;){var u=a[l];if(u.name==t&&u.observer==n&&u.useCapture==i){a.splice(l,1),0==a.length&&delete OpenLayers.Event.observers[s],o=!0;break}l++}return o&&(r.removeEventListener?r.removeEventListener(t,n,i):r&&r.detachEvent&&r.detachEvent("on"+t,n)),o},unloadCache:function(){if(OpenLayers.Event&&OpenLayers.Event.observers){for(var e in OpenLayers.Event.observers){var t=OpenLayers.Event.observers[e];OpenLayers.Event._removeElementObservers.apply(this,[t])}OpenLayers.Event.observers=!1}},CLASS_NAME:"OpenLayers.Event"},OpenLayers.Event.observe(window,"unload",OpenLayers.Event.unloadCache,!1),OpenLayers.Events=OpenLayers.Class({BROWSER_EVENTS:["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend","keydown"],TOUCH_MODEL_POINTER:"pointer",TOUCH_MODEL_MSPOINTER:"MSPointer",TOUCH_MODEL_TOUCH:"touch",listeners:null,object:null,element:null,eventHandler:null,fallThrough:null,includeXY:!1,extensions:null,extensionCount:null,clearMouseListener:null,initialize:function(e,t,n,i,r){OpenLayers.Util.extend(this,r),this.object=e,this.fallThrough=i,this.listeners={},this.extensions={},this.extensionCount={},this._pointerTouches=[],null!=t&&this.attachToElement(t)},destroy:function(){for(var e in this.extensions)"boolean"!=typeof this.extensions[e]&&this.extensions[e].destroy();this.extensions=null,this.element&&(OpenLayers.Event.stopObservingElement(this.element),this.element.hasScrollEvent&&OpenLayers.Event.stopObserving(window,"scroll",this.clearMouseListener)),this.element=null,this.listeners=null,this.object=null,this.fallThrough=null,this.eventHandler=null},addEventType:function(e){},attachToElement:function(e){this.element?OpenLayers.Event.stopObservingElement(this.element):(this.eventHandler=OpenLayers.Function.bindAsEventListener(this.handleBrowserEvent,this),this.clearMouseListener=OpenLayers.Function.bind(this.clearMouseCache,this)),this.element=e;for(var t,n=this.getTouchModel(),i=0,r=this.BROWSER_EVENTS.length;i<r;i++)t=this.BROWSER_EVENTS[i],OpenLayers.Event.observe(e,t,this.eventHandler),n!==this.TOUCH_MODEL_POINTER&&n!==this.TOUCH_MODEL_MSPOINTER||0!==t.indexOf("touch")||this.addPointerTouchListener(e,t,this.eventHandler);OpenLayers.Event.observe(e,"dragstart",OpenLayers.Event.stop)},on:function(e){for(var t in e)"scope"!=t&&e.hasOwnProperty(t)&&this.register(t,e.scope,e[t])},register:function(e,t,n,i){if(e in OpenLayers.Events&&!this.extensions[e]&&(this.extensions[e]=new OpenLayers.Events[e](this)),null!=n){null==t&&(t=this.object);var r=this.listeners[e];r||(r=[],this.listeners[e]=r,this.extensionCount[e]=0);var s={obj:t,func:n};i?(r.splice(this.extensionCount[e],0,s),"object"==typeof i&&i.extension&&this.extensionCount[e]++):r.push(s)}},registerPriority:function(e,t,n){this.register(e,t,n,!0)},un:function(e){for(var t in e)"scope"!=t&&e.hasOwnProperty(t)&&this.unregister(t,e.scope,e[t])},unregister:function(e,t,n){null==t&&(t=this.object);var i=this.listeners[e];if(null!=i)for(var r=0,s=i.length;r<s;r++)if(i[r].obj==t&&i[r].func==n){i.splice(r,1);break}},remove:function(e){null!=this.listeners[e]&&(this.listeners[e]=[])},triggerEvent:function(e,t){var n=this.listeners[e];if(n&&0!=n.length){null==t&&(t={}),t.object=this.object,t.element=this.element,t.type||(t.type=e),n=n.slice();for(var i,r=0,s=n.length;r<s;r++){var o=n[r];if(i=o.func.apply(o.obj,[t]),void 0!=i&&0==i)break}return this.fallThrough||OpenLayers.Event.stop(t,!0),i}},handleBrowserEvent:function(e){var t=e.type,n=this.listeners[t];if(n&&0!=n.length){var i=e.touches;if(i&&i[0]){for(var r,s=0,o=0,a=i.length,l=0;l<a;++l)r=this.getTouchClientXY(i[l]),s+=r.clientX,o+=r.clientY;e.clientX=s/a,e.clientY=o/a}this.includeXY&&(e.xy=this.getMousePosition(e)),this.triggerEvent(t,e)}},getTouchClientXY:function(e){var t=window.olMockWin||window,n=t.pageXOffset,i=t.pageYOffset,r=e.clientX,s=e.clientY;return 0===e.pageY&&Math.floor(s)>Math.floor(e.pageY)||0===e.pageX&&Math.floor(r)>Math.floor(e.pageX)?(r-=n,s-=i):(s<e.pageY-i||r<e.pageX-n)&&(r=e.pageX-n,s=e.pageY-i),e.olClientX=r,e.olClientY=s,{clientX:r,clientY:s}},clearMouseCache:function(){this.element.scrolls=null,this.element.lefttop=null,this.element.offsets=null},getMousePosition:function(e){if(this.includeXY?this.element.hasScrollEvent||(OpenLayers.Event.observe(window,"scroll",this.clearMouseListener),this.element.hasScrollEvent=!0):this.clearMouseCache(),!this.element.scrolls){var t=OpenLayers.Util.getViewportElement();this.element.scrolls=[window.pageXOffset||t.scrollLeft,window.pageYOffset||t.scrollTop]}return this.element.lefttop||(this.element.lefttop=[document.documentElement.clientLeft||0,document.documentElement.clientTop||0]),this.element.offsets||(this.element.offsets=OpenLayers.Util.pagePosition(this.element)),new OpenLayers.Pixel(e.clientX+this.element.scrolls[0]-this.element.offsets[0]-this.element.lefttop[0],e.clientY+this.element.scrolls[1]-this.element.offsets[1]-this.element.lefttop[1])},getTouchModel:function(){return"_TOUCH_MODEL"in OpenLayers.Events||(OpenLayers.Events._TOUCH_MODEL=window.PointerEvent&&"pointer"||window.MSPointerEvent&&"MSPointer"||"ontouchdown"in document&&"touch"||null),OpenLayers.Events._TOUCH_MODEL},addPointerTouchListener:function(e,t,n){function i(e){n(OpenLayers.Util.applyDefaults({stopPropagation:function(){for(var e=r.length-1;e>=0;--e)r[e].stopPropagation()},preventDefault:function(){for(var e=r.length-1;e>=0;--e)r[e].preventDefault()},type:t},e))}var r=(this.eventHandler,this._pointerTouches);switch(t){case"touchstart":return this.addPointerTouchListenerStart(e,t,i);case"touchend":return this.addPointerTouchListenerEnd(e,t,i);case"touchmove":return this.addPointerTouchListenerMove(e,t,i);default:throw"Unknown touch event type"}},addPointerTouchListenerStart:function(e,t,n){var i=this._pointerTouches,r=function(e){if(OpenLayers.Event.isTouchEvent(e)){for(var t=!1,r=0,s=i.length;r<s;++r)if(i[r].pointerId==e.pointerId){t=!0;break}t||i.push(e),e.touches=i.slice(),n(e)}};OpenLayers.Event.observe(e,this.getTouchModel()===this.TOUCH_MODEL_MSPOINTER?"MSPointerDown":"pointerdown",r);var s=function(e){if(OpenLayers.Event.isTouchEvent(e))for(var t=0,n=i.length;t<n;++t)if(i[t].pointerId==e.pointerId){0!=this.clientWidth&&0!=this.clientHeight&&(Math.ceil(e.clientX)>=this.clientWidth||Math.ceil(e.clientY)>=this.clientHeight)&&i.splice(t,1);break}};OpenLayers.Event.observe(e,this.getTouchModel()===this.TOUCH_MODEL_MSPOINTER?"MSPointerOut":"pointerout",s)},addPointerTouchListenerMove:function(e,t,n){var i=this._pointerTouches,r=function(e){if(OpenLayers.Event.isTouchEvent(e)&&(1!=i.length||i[0].pageX!=e.pageX||i[0].pageY!=e.pageY)){for(var t=0,r=i.length;t<r;++t)if(i[t].pointerId==e.pointerId){i[t]=e;break}e.touches=i.slice(),n(e)}};OpenLayers.Event.observe(e,this.getTouchModel()===this.TOUCH_MODEL_MSPOINTER?"MSPointerMove":"pointermove",r)},addPointerTouchListenerEnd:function(e,t,n){var i=this._pointerTouches,r=function(e){if(OpenLayers.Event.isTouchEvent(e)){for(var t=0,r=i.length;t<r;++t)if(i[t].pointerId==e.pointerId){i.splice(t,1);break}e.touches=i.slice(),n(e)}};OpenLayers.Event.observe(e,this.getTouchModel()===this.TOUCH_MODEL_MSPOINTER?"MSPointerUp":"pointerup",r)},CLASS_NAME:"OpenLayers.Events"}),OpenLayers.Handler=OpenLayers.Class({id:null,control:null,map:null,keyMask:null,active:!1,evt:null,touch:!1,initialize:function(e,t,n){OpenLayers.Util.extend(this,n),this.control=e,this.callbacks=t;var i=this.map||e.map;i&&this.setMap(i),this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},setMap:function(e){this.map=e},checkModifiers:function(e){if(null==this.keyMask)return!0;var t=(e.shiftKey?OpenLayers.Handler.MOD_SHIFT:0)|(e.ctrlKey?OpenLayers.Handler.MOD_CTRL:0)|(e.altKey?OpenLayers.Handler.MOD_ALT:0)|(e.metaKey?OpenLayers.Handler.MOD_META:0);return t==this.keyMask},activate:function(){if(this.active)return!1;for(var e=OpenLayers.Events.prototype.BROWSER_EVENTS,t=0,n=e.length;t<n;t++)this[e[t]]&&this.register(e[t],this[e[t]]);return this.active=!0,!0},deactivate:function(){if(!this.active)return!1;for(var e=OpenLayers.Events.prototype.BROWSER_EVENTS,t=0,n=e.length;t<n;t++)this[e[t]]&&this.unregister(e[t],this[e[t]]);return this.touch=!1,this.active=!1,!0},startTouch:function(){if(!this.touch){this.touch=!0;for(var e=["mousedown","mouseup","mousemove","click","dblclick","mouseout"],t=0,n=e.length;t<n;t++)this[e[t]]&&this.unregister(e[t],this[e[t]])}},callback:function(e,t){e&&this.callbacks[e]&&this.callbacks[e].apply(this.control,t)},register:function(e,t){this.map.events.registerPriority(e,this,t),this.map.events.registerPriority(e,this,this.setEvent)},unregister:function(e,t){this.map.events.unregister(e,this,t),this.map.events.unregister(e,this,this.setEvent)},setEvent:function(e){return this.evt=e,!0},destroy:function(){this.deactivate(),this.control=this.map=null},CLASS_NAME:"OpenLayers.Handler"}),OpenLayers.Handler.MOD_NONE=0,OpenLayers.Handler.MOD_SHIFT=1,OpenLayers.Handler.MOD_CTRL=2,OpenLayers.Handler.MOD_ALT=4,OpenLayers.Handler.MOD_META=8,OpenLayers.Icon=OpenLayers.Class({url:null,size:null,offset:null,calculateOffset:null,imageDiv:null,px:null,initialize:function(e,t,n,i){this.url=e,this.size=t||{w:20,h:20},this.offset=n||{x:-(this.size.w/2),y:-(this.size.h/2)},this.calculateOffset=i;var r=OpenLayers.Util.createUniqueID("OL_Icon_");this.imageDiv=OpenLayers.Util.createAlphaImageDiv(r)},destroy:function(){this.erase(),OpenLayers.Event.stopObservingElement(this.imageDiv.firstChild),this.imageDiv.innerHTML="",this.imageDiv=null},clone:function(){return new OpenLayers.Icon(this.url,this.size,this.offset,this.calculateOffset)},setSize:function(e){null!=e&&(this.size=e),this.draw()},setUrl:function(e){null!=e&&(this.url=e),this.draw()},draw:function(e){return OpenLayers.Util.modifyAlphaImageDiv(this.imageDiv,null,null,this.size,this.url,"absolute"),this.moveTo(e),this.imageDiv},erase:function(){null!=this.imageDiv&&null!=this.imageDiv.parentNode&&OpenLayers.Element.remove(this.imageDiv)},setOpacity:function(e){OpenLayers.Util.modifyAlphaImageDiv(this.imageDiv,null,null,null,null,null,null,null,e)},moveTo:function(e){null!=e&&(this.px=e),null!=this.imageDiv&&(null==this.px?this.display(!1):(this.calculateOffset&&(this.offset=this.calculateOffset(this.size)),OpenLayers.Util.modifyAlphaImageDiv(this.imageDiv,null,{x:this.px.x+this.offset.x,y:this.px.y+this.offset.y})))},display:function(e){this.imageDiv.style.display=e?"":"none"},isDrawn:function(){var e=this.imageDiv&&this.imageDiv.parentNode&&11!=this.imageDiv.parentNode.nodeType;return e},CLASS_NAME:"OpenLayers.Icon"}),OpenLayers.Marker=OpenLayers.Class({icon:null,lonlat:null,events:null,map:null,initialize:function(e,t){this.lonlat=e;var n=t?t:OpenLayers.Marker.defaultIcon();null==this.icon?this.icon=n:(this.icon.url=n.url,this.icon.size=n.size,this.icon.offset=n.offset,this.icon.calculateOffset=n.calculateOffset),this.events=new OpenLayers.Events(this,this.icon.imageDiv)},destroy:function(){this.erase(),this.map=null,this.events.destroy(),this.events=null,null!=this.icon&&(this.icon.destroy(),this.icon=null)},draw:function(e){return this.icon.draw(e)},erase:function(){null!=this.icon&&this.icon.erase()},moveTo:function(e){null!=e&&null!=this.icon&&this.icon.moveTo(e),this.lonlat=this.map.getLonLatFromLayerPx(e)},isDrawn:function(){var e=this.icon&&this.icon.isDrawn();return e},onScreen:function(){var e=!1;if(this.map){var t=this.map.getExtent();e=t.containsLonLat(this.lonlat)}return e},inflate:function(e){this.icon&&this.icon.setSize({w:this.icon.size.w*e,h:this.icon.size.h*e})},setOpacity:function(e){this.icon.setOpacity(e)},setUrl:function(e){this.icon.setUrl(e)},display:function(e){this.icon.display(e)},CLASS_NAME:"OpenLayers.Marker"}),OpenLayers.Marker.defaultIcon=function(){return new OpenLayers.Icon(OpenLayers.Util.getImageLocation("marker.png"),{w:21,h:25},{x:-10.5,y:-25})},OpenLayers.Util=OpenLayers.Util||{},OpenLayers.Util.vendorPrefix=function(){"use strict";function e(e){return e?e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()}).replace(/^ms-/,"-ms-"):null}function t(t){if(void 0===o[t]){var n=t.replace(/(-[\s\S])/g,function(e){return e.charAt(1).toUpperCase()}),r=i(n);o[t]=e(r)}return o[t]}function n(e,t){if(void 0===a[t]){var n,i,s=0,o=r.length,l="undefined"!=typeof e.cssText;for(a[t]=null;s<o;s++)if(i=r[s],i?(l||(i=i.toLowerCase()),n=i+t.charAt(0).toUpperCase()+t.slice(1)):n=t,void 0!==e[n]){a[t]=n;break}}return a[t]}function i(e){return n(s,e)}var r=["","O","ms","Moz","Webkit"],s=document.createElement("div").style,o={},a={};return{css:t,js:n,style:i,cssCache:o,jsCache:a}}(),OpenLayers.Animation=function(e){function t(e,t,n){t=t>0?t:Number.POSITIVE_INFINITY;var i=++o,r=+new Date;return a[i]=function(){a[i]&&+new Date-r<=t?(e(),a[i]&&s(a[i],n)):delete a[i]},s(a[i],n),i}function n(e){delete a[e]}var i=OpenLayers.Util.vendorPrefix.js(e,"requestAnimationFrame"),r=!!i,s=function(){var t=e[i]||function(t,n){e.setTimeout(t,16)};return function(n,i){t.apply(e,[n,i])}}(),o=0,a={};return{isNative:r,requestFrame:s,start:t,stop:n}}(window),OpenLayers.Kinetic=OpenLayers.Class({threshold:0,deceleration:.0035,nbPoints:100,delay:200,points:void 0,timerId:void 0,initialize:function(e){OpenLayers.Util.extend(this,e)},begin:function(){OpenLayers.Animation.stop(this.timerId),this.timerId=void 0,this.points=[]},update:function(e){this.points.unshift({xy:e,tick:(new Date).getTime()}),this.points.length>this.nbPoints&&this.points.pop()},end:function(e){for(var t,n,i=(new Date).getTime(),r=0,s=this.points.length;r<s&&(n=this.points[r],!(i-n.tick>this.delay));r++)t=n;if(t){var o=(new Date).getTime()-t.tick,a=Math.sqrt(Math.pow(e.x-t.xy.x,2)+Math.pow(e.y-t.xy.y,2)),l=a/o;if(!(0==l||l<this.threshold)){var u=Math.asin((e.y-t.xy.y)/a);return t.xy.x<=e.x&&(u=Math.PI-u),{speed:l,theta:u}}}},move:function(e,t){var n=e.speed,i=Math.cos(e.theta),r=-Math.sin(e.theta),s=(new Date).getTime(),o=0,a=0,l=function(){if(null!=this.timerId){var e=(new Date).getTime()-s,l=-this.deceleration*Math.pow(e,2)/2+n*e,u=l*i,h=l*r,c={};c.end=!1;var p=-this.deceleration*e+n;p<=0&&(OpenLayers.Animation.stop(this.timerId),this.timerId=null,c.end=!0),c.x=u-o,c.y=h-a,o=u,a=h,t(c.x,c.y,c.end)}};this.timerId=OpenLayers.Animation.start(OpenLayers.Function.bind(l,this))},CLASS_NAME:"OpenLayers.Kinetic"}),OpenLayers.Tween=OpenLayers.Class({easing:null,begin:null,finish:null,duration:null,callbacks:null,time:null,minFrameRate:null,startTime:null,animationId:null,playing:!1,initialize:function(e){this.easing=e?e:OpenLayers.Easing.Expo.easeOut},start:function(e,t,n,i){this.playing=!0,this.begin=e,this.finish=t,this.duration=n,this.callbacks=i.callbacks,this.minFrameRate=i.minFrameRate||30,this.time=0,this.startTime=(new Date).getTime(),OpenLayers.Animation.stop(this.animationId),this.animationId=null,this.callbacks&&this.callbacks.start&&this.callbacks.start.call(this,this.begin),this.animationId=OpenLayers.Animation.start(OpenLayers.Function.bind(this.play,this))},stop:function(){this.playing&&(this.callbacks&&this.callbacks.done&&this.callbacks.done.call(this,this.finish),OpenLayers.Animation.stop(this.animationId),this.animationId=null,this.playing=!1)},play:function(){var e={};for(var t in this.begin){var n=this.begin[t],i=this.finish[t];if(null==n||null==i||isNaN(n)||isNaN(i))throw new TypeError("invalid value for Tween");var r=i-n;e[t]=this.easing.apply(this,[this.time,n,r,this.duration])}this.time++,this.callbacks&&this.callbacks.eachStep&&((new Date).getTime()-this.startTime)/this.time<=1e3/this.minFrameRate&&this.callbacks.eachStep.call(this,e),this.time>this.duration&&this.stop()},CLASS_NAME:"OpenLayers.Tween"}),OpenLayers.Easing={CLASS_NAME:"OpenLayers.Easing"},OpenLayers.Easing.Linear={easeIn:function(e,t,n,i){return n*e/i+t},easeOut:function(e,t,n,i){return n*e/i+t},easeInOut:function(e,t,n,i){return n*e/i+t},CLASS_NAME:"OpenLayers.Easing.Linear"},OpenLayers.Easing.Expo={easeIn:function(e,t,n,i){return 0==e?t:n*Math.pow(2,10*(e/i-1))+t},easeOut:function(e,t,n,i){return e==i?t+n:n*(-Math.pow(2,-10*e/i)+1)+t},easeInOut:function(e,t,n,i){return 0==e?t:e==i?t+n:(e/=i/2)<1?n/2*Math.pow(2,10*(e-1))+t:n/2*(-Math.pow(2,-10*--e)+2)+t},CLASS_NAME:"OpenLayers.Easing.Expo"},OpenLayers.Easing.Quad={easeIn:function(e,t,n,i){return n*(e/=i)*e+t},easeOut:function(e,t,n,i){return-n*(e/=i)*(e-2)+t},easeInOut:function(e,t,n,i){return(e/=i/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},CLASS_NAME:"OpenLayers.Easing.Quad"},OpenLayers.Projection=OpenLayers.Class({proj:null,projCode:null,titleRegEx:/\+title=[^\+]*/,initialize:function(e,t){OpenLayers.Util.extend(this,t),this.projCode=e,"object"==typeof Proj4js&&(this.proj=new Proj4js.Proj(e))},getCode:function(){return this.proj?this.proj.srsCode:this.projCode},getUnits:function(){return this.proj?this.proj.units:null},toString:function(){return this.getCode()},equals:function(e){var t=e,n=!1;if(t)if(t instanceof OpenLayers.Projection||(t=new OpenLayers.Projection(t)),"object"==typeof Proj4js&&this.proj.defData&&t.proj.defData)n=this.proj.defData.replace(this.titleRegEx,"")==t.proj.defData.replace(this.titleRegEx,"");else if(t.getCode){var i=this.getCode(),r=t.getCode();n=i==r||!!OpenLayers.Projection.transforms[i]&&OpenLayers.Projection.transforms[i][r]===OpenLayers.Projection.nullTransform}return n},destroy:function(){delete this.proj,delete this.projCode},CLASS_NAME:"OpenLayers.Projection"}),OpenLayers.Projection.transforms={},OpenLayers.Projection.defaults={"EPSG:4326":{units:"degrees",maxExtent:[-180,-90,180,90],worldExtent:[-180,-90,180,90],yx:!0},"CRS:84":{units:"degrees",maxExtent:[-180,-90,180,90],worldExtent:[-180,-90,180,90]},"EPSG:900913":{units:"m",maxExtent:[-20037508.34,-20037508.34,20037508.34,20037508.34],worldExtent:[-180,-89,180,89]}},OpenLayers.Projection.addTransform=function(e,t,n){if(n===OpenLayers.Projection.nullTransform){var i=OpenLayers.Projection.defaults[e];i&&!OpenLayers.Projection.defaults[t]&&(OpenLayers.Projection.defaults[t]=i)}OpenLayers.Projection.transforms[e]||(OpenLayers.Projection.transforms[e]={}),OpenLayers.Projection.transforms[e][t]=n},OpenLayers.Projection.transform=function(e,t,n){if(t&&n)if(t instanceof OpenLayers.Projection||(t=new OpenLayers.Projection(t)),n instanceof OpenLayers.Projection||(n=new OpenLayers.Projection(n)),
t.proj&&n.proj)e=Proj4js.transform(t.proj,n.proj,e);else{var i=t.getCode(),r=n.getCode(),s=OpenLayers.Projection.transforms;s[i]&&s[i][r]&&s[i][r](e)}return e},OpenLayers.Projection.nullTransform=function(e){return e},function(){function e(e){return e.x=180*e.x/r,e.y=180/Math.PI*(2*Math.atan(Math.exp(e.y/r*Math.PI))-Math.PI/2),e}function t(e){e.x=e.x*r/180;var t=Math.log(Math.tan((90+e.y)*Math.PI/360))/Math.PI*r;return e.y=Math.max(-20037508.34,Math.min(t,20037508.34)),e}function n(n,i){var r,s,o,a,l,u=OpenLayers.Projection.addTransform,h=OpenLayers.Projection.nullTransform;for(r=0,s=i.length;r<s;++r)for(o=i[r],u(n,o,t),u(o,n,e),l=r+1;l<s;++l)a=i[l],u(o,a,h),u(a,o,h)}var i,r=20037508.34,s=["EPSG:900913","EPSG:3857","EPSG:102113","EPSG:102100","OSGEO:41001"],o=["CRS:84","urn:ogc:def:crs:EPSG:6.6:4326","EPSG:4326"];for(i=s.length-1;i>=0;--i)n(s[i],o);for(i=o.length-1;i>=0;--i)n(o[i],s)}(),OpenLayers.Map=OpenLayers.Class({Z_INDEX_BASE:{BaseLayer:100,Overlay:325,Feature:725,Popup:750,Control:1e3},id:null,fractionalZoom:!1,events:null,allOverlays:!1,div:null,dragging:!1,size:null,viewPortDiv:null,layerContainerOrigin:null,layerContainerDiv:null,layers:null,controls:null,popups:null,baseLayer:null,center:null,resolution:null,zoom:0,panRatio:1.5,options:null,tileSize:null,projection:"EPSG:4326",units:null,resolutions:null,maxResolution:null,minResolution:null,maxScale:null,minScale:null,maxExtent:null,minExtent:null,restrictedExtent:null,numZoomLevels:16,theme:null,displayProjection:null,fallThrough:!1,autoUpdateSize:!0,eventListeners:null,panTween:null,panMethod:OpenLayers.Easing.Expo.easeOut,panDuration:50,zoomTween:null,zoomMethod:OpenLayers.Easing.Quad.easeOut,zoomDuration:20,paddingForPopups:null,layerContainerOriginPx:null,minPx:null,maxPx:null,initialize:function(e,t){var n=OpenLayers.Util.isElement(e);1!==arguments.length||"object"!=typeof e||n||(t=e,e=t&&t.div),this.tileSize=new OpenLayers.Size(OpenLayers.Map.TILE_WIDTH,OpenLayers.Map.TILE_HEIGHT),this.paddingForPopups=new OpenLayers.Bounds(15,15,15,15),this.theme=OpenLayers._getScriptLocation()+"theme/default/style.css",this.options=OpenLayers.Util.extend({},t),OpenLayers.Util.extend(this,t);var i=this.projection instanceof OpenLayers.Projection?this.projection.projCode:this.projection;OpenLayers.Util.applyDefaults(this,OpenLayers.Projection.defaults[i]),!this.maxExtent||this.maxExtent instanceof OpenLayers.Bounds||(this.maxExtent=new OpenLayers.Bounds(this.maxExtent)),!this.minExtent||this.minExtent instanceof OpenLayers.Bounds||(this.minExtent=new OpenLayers.Bounds(this.minExtent)),!this.restrictedExtent||this.restrictedExtent instanceof OpenLayers.Bounds||(this.restrictedExtent=new OpenLayers.Bounds(this.restrictedExtent)),!this.center||this.center instanceof OpenLayers.LonLat||(this.center=new OpenLayers.LonLat(this.center)),this.layers=[],this.id=OpenLayers.Util.createUniqueID("OpenLayers.Map_"),this.div=OpenLayers.Util.getElement(e),this.div||(this.div=document.createElement("div"),this.div.style.height="1px",this.div.style.width="1px"),OpenLayers.Element.addClass(this.div,"olMap");var r=this.id+"_OpenLayers_ViewPort";if(this.viewPortDiv=OpenLayers.Util.createDiv(r,null,null,null,"relative",null,"hidden"),this.viewPortDiv.style.width="100%",this.viewPortDiv.style.height="100%",this.viewPortDiv.className="olMapViewport",this.div.appendChild(this.viewPortDiv),this.events=new OpenLayers.Events(this,this.viewPortDiv,null,this.fallThrough,{includeXY:!0}),OpenLayers.TileManager&&null!==this.tileManager&&(this.tileManager instanceof OpenLayers.TileManager||(this.tileManager=new OpenLayers.TileManager(this.tileManager)),this.tileManager.addMap(this)),r=this.id+"_OpenLayers_Container",this.layerContainerDiv=OpenLayers.Util.createDiv(r),this.layerContainerDiv.style.zIndex=this.Z_INDEX_BASE.Popup-1,this.layerContainerOriginPx={x:0,y:0},this.applyTransform(),this.viewPortDiv.appendChild(this.layerContainerDiv),this.updateSize(),this.eventListeners instanceof Object&&this.events.on(this.eventListeners),this.autoUpdateSize===!0&&(this.updateSizeDestroy=OpenLayers.Function.bind(this.updateSize,this),OpenLayers.Event.observe(window,"resize",this.updateSizeDestroy)),this.theme){for(var s=!0,o=document.getElementsByTagName("link"),a=0,l=o.length;a<l;++a)if(OpenLayers.Util.isEquivalentUrl(o.item(a).href,this.theme)){s=!1;break}if(s){var u=document.createElement("link");u.setAttribute("rel","stylesheet"),u.setAttribute("type","text/css"),u.setAttribute("href",this.theme),document.getElementsByTagName("head")[0].appendChild(u)}}null==this.controls&&(this.controls=[],null!=OpenLayers.Control&&(OpenLayers.Control.Navigation?this.controls.push(new OpenLayers.Control.Navigation):OpenLayers.Control.TouchNavigation&&this.controls.push(new OpenLayers.Control.TouchNavigation),OpenLayers.Control.Zoom?this.controls.push(new OpenLayers.Control.Zoom):OpenLayers.Control.PanZoom&&this.controls.push(new OpenLayers.Control.PanZoom),OpenLayers.Control.ArgParser&&this.controls.push(new OpenLayers.Control.ArgParser),OpenLayers.Control.Attribution&&this.controls.push(new OpenLayers.Control.Attribution)));for(var a=0,l=this.controls.length;a<l;a++)this.addControlToMap(this.controls[a]);this.popups=[],this.unloadDestroy=OpenLayers.Function.bind(this.destroy,this),OpenLayers.Event.observe(window,"unload",this.unloadDestroy),t&&t.layers&&(delete this.center,delete this.zoom,this.addLayers(t.layers),t.center&&!this.getCenter()&&this.setCenter(t.center,t.zoom)),this.panMethod&&(this.panTween=new OpenLayers.Tween(this.panMethod)),this.zoomMethod&&this.applyTransform.transform&&(this.zoomTween=new OpenLayers.Tween(this.zoomMethod))},getViewport:function(){return this.viewPortDiv},render:function(e){this.div=OpenLayers.Util.getElement(e),OpenLayers.Element.addClass(this.div,"olMap"),this.viewPortDiv.parentNode.removeChild(this.viewPortDiv),this.div.appendChild(this.viewPortDiv),this.updateSize()},unloadDestroy:null,updateSizeDestroy:null,destroy:function(){if(!this.unloadDestroy)return!1;if(this.panTween&&(this.panTween.stop(),this.panTween=null),this.zoomTween&&(this.zoomTween.stop(),this.zoomTween=null),OpenLayers.Event.stopObserving(window,"unload",this.unloadDestroy),this.unloadDestroy=null,this.updateSizeDestroy&&OpenLayers.Event.stopObserving(window,"resize",this.updateSizeDestroy),this.paddingForPopups=null,null!=this.controls){for(var e=this.controls.length-1;e>=0;--e)this.controls[e].destroy();this.controls=null}if(null!=this.layers){for(var e=this.layers.length-1;e>=0;--e)this.layers[e].destroy(!1);this.layers=null}this.viewPortDiv&&this.viewPortDiv.parentNode&&this.viewPortDiv.parentNode.removeChild(this.viewPortDiv),this.viewPortDiv=null,this.tileManager&&(this.tileManager.removeMap(this),this.tileManager=null),this.eventListeners&&(this.events.un(this.eventListeners),this.eventListeners=null),this.events.destroy(),this.events=null,this.options=null},setOptions:function(e){var t=this.minPx&&e.restrictedExtent!=this.restrictedExtent;OpenLayers.Util.extend(this,e),t&&this.moveTo(this.getCachedCenter(),this.zoom,{forceZoomChange:!0})},getTileSize:function(){return this.tileSize},getBy:function(e,t,n){var i="function"==typeof n.test,r=OpenLayers.Array.filter(this[e],function(e){return e[t]==n||i&&n.test(e[t])});return r},getLayersBy:function(e,t){return this.getBy("layers",e,t)},getLayersByName:function(e){return this.getLayersBy("name",e)},getLayersByClass:function(e){return this.getLayersBy("CLASS_NAME",e)},getControlsBy:function(e,t){return this.getBy("controls",e,t)},getControlsByClass:function(e){return this.getControlsBy("CLASS_NAME",e)},getLayer:function(e){for(var t=null,n=0,i=this.layers.length;n<i;n++){var r=this.layers[n];if(r.id==e){t=r;break}}return t},setLayerZIndex:function(e,t){e.setZIndex(this.Z_INDEX_BASE[e.isBaseLayer?"BaseLayer":"Overlay"]+5*t)},resetLayersZIndex:function(){for(var e=0,t=this.layers.length;e<t;e++){var n=this.layers[e];this.setLayerZIndex(n,e)}},addLayer:function(e){for(var t=0,n=this.layers.length;t<n;t++)if(this.layers[t]==e)return!1;return this.events.triggerEvent("preaddlayer",{layer:e})!==!1&&(this.allOverlays&&(e.isBaseLayer=!1),e.div.className="olLayerDiv",e.div.style.overflow="",this.setLayerZIndex(e,this.layers.length),e.isFixed?this.viewPortDiv.appendChild(e.div):this.layerContainerDiv.appendChild(e.div),this.layers.push(e),e.setMap(this),e.isBaseLayer||this.allOverlays&&!this.baseLayer?null==this.baseLayer?this.setBaseLayer(e):e.setVisibility(!1):e.redraw(),this.events.triggerEvent("addlayer",{layer:e}),e.events.triggerEvent("added",{map:this,layer:e}),e.afterAdd(),!0)},addLayers:function(e){for(var t=0,n=e.length;t<n;t++)this.addLayer(e[t])},removeLayer:function(e,t){if(this.events.triggerEvent("preremovelayer",{layer:e})!==!1){if(null==t&&(t=!0),e.isFixed?this.viewPortDiv.removeChild(e.div):this.layerContainerDiv.removeChild(e.div),OpenLayers.Util.removeItem(this.layers,e),e.removeMap(this),e.map=null,this.baseLayer==e&&(this.baseLayer=null,t))for(var n=0,i=this.layers.length;n<i;n++){var r=this.layers[n];if(r.isBaseLayer||this.allOverlays){this.setBaseLayer(r);break}}this.resetLayersZIndex(),this.events.triggerEvent("removelayer",{layer:e}),e.events.triggerEvent("removed",{map:this,layer:e})}},getNumLayers:function(){return this.layers.length},getLayerIndex:function(e){return OpenLayers.Util.indexOf(this.layers,e)},setLayerIndex:function(e,t){var n=this.getLayerIndex(e);if(t<0?t=0:t>this.layers.length&&(t=this.layers.length),n!=t){this.layers.splice(n,1),this.layers.splice(t,0,e);for(var i=0,r=this.layers.length;i<r;i++)this.setLayerZIndex(this.layers[i],i);this.events.triggerEvent("changelayer",{layer:e,property:"order"}),this.allOverlays&&(0===t?this.setBaseLayer(e):this.baseLayer!==this.layers[0]&&this.setBaseLayer(this.layers[0]))}},raiseLayer:function(e,t){var n=this.getLayerIndex(e)+t;this.setLayerIndex(e,n)},setBaseLayer:function(e){if(e!=this.baseLayer&&OpenLayers.Util.indexOf(this.layers,e)!=-1){var t=this.getCachedCenter(),n=this.getResolution(),i=OpenLayers.Util.getResolutionFromScale(this.getScale(),e.units);if(null==this.baseLayer||this.allOverlays||this.baseLayer.setVisibility(!1),this.baseLayer=e,this.allOverlays&&!this.baseLayer.visibility||(this.baseLayer.setVisibility(!0),this.baseLayer.inRange===!1&&this.baseLayer.redraw()),null!=t){var r=this.getZoomForResolution(i||this.resolution,!0);this.setCenter(t,r,!1,n!=i)}this.events.triggerEvent("changebaselayer",{layer:this.baseLayer})}},addControl:function(e,t){this.controls.push(e),this.addControlToMap(e,t)},addControls:function(e,t){for(var n=1===arguments.length?[]:t,i=0,r=e.length;i<r;i++){var s=e[i],o=n[i]?n[i]:null;this.addControl(s,o)}},addControlToMap:function(e,t){e.outsideViewport=null!=e.div,this.displayProjection&&!e.displayProjection&&(e.displayProjection=this.displayProjection),e.setMap(this);var n=e.draw(t);n&&(e.outsideViewport||(n.style.zIndex=this.Z_INDEX_BASE.Control+this.controls.length,this.viewPortDiv.appendChild(n))),e.autoActivate&&e.activate()},getControl:function(e){for(var t=null,n=0,i=this.controls.length;n<i;n++){var r=this.controls[n];if(r.id==e){t=r;break}}return t},removeControl:function(e){e&&e==this.getControl(e.id)&&(e.div&&e.div.parentNode==this.viewPortDiv&&this.viewPortDiv.removeChild(e.div),OpenLayers.Util.removeItem(this.controls,e))},addPopup:function(e,t){if(t)for(var n=this.popups.length-1;n>=0;--n)this.removePopup(this.popups[n]);e.map=this,this.popups.push(e);var i=e.draw();i&&(i.style.zIndex=this.Z_INDEX_BASE.Popup+this.popups.length,this.layerContainerDiv.appendChild(i))},removePopup:function(e){if(OpenLayers.Util.removeItem(this.popups,e),e.div)try{this.layerContainerDiv.removeChild(e.div)}catch(e){}e.map=null},getSize:function(){var e=null;return null!=this.size&&(e=this.size.clone()),e},updateSize:function(){var e=this.getCurrentSize();if(e&&!isNaN(e.h)&&!isNaN(e.w)){this.events.clearMouseCache();var t=this.getSize();if(null==t&&(this.size=t=e),!e.equals(t)){this.size=e;for(var n=0,i=this.layers.length;n<i;n++)this.layers[n].onMapResize();var r=this.getCachedCenter();if(null!=this.baseLayer&&null!=r){var s=this.getZoom();this.zoom=null,this.setCenter(r,s)}}}this.events.triggerEvent("updatesize")},getCurrentSize:function(){var e=new OpenLayers.Size(this.div.clientWidth,this.div.clientHeight);return(0==e.w&&0==e.h||isNaN(e.w)&&isNaN(e.h))&&(e.w=this.div.offsetWidth,e.h=this.div.offsetHeight),(0==e.w&&0==e.h||isNaN(e.w)&&isNaN(e.h))&&(e.w=parseInt(this.div.style.width),e.h=parseInt(this.div.style.height)),e},calculateBounds:function(e,t){var n=null;if(null==e&&(e=this.getCachedCenter()),null==t&&(t=this.getResolution()),null!=e&&null!=t){var i=this.size.w*t/2,r=this.size.h*t/2;n=new OpenLayers.Bounds(e.lon-i,e.lat-r,e.lon+i,e.lat+r)}return n},getCenter:function(){var e=null,t=this.getCachedCenter();return t&&(e=t.clone()),e},getCachedCenter:function(){return!this.center&&this.size&&(this.center=this.getLonLatFromViewPortPx({x:this.size.w/2,y:this.size.h/2})),this.center},getZoom:function(){return this.zoom},pan:function(e,t,n){if(n=OpenLayers.Util.applyDefaults(n,{animate:!0,dragging:!1}),n.dragging)0==e&&0==t||this.moveByPx(e,t);else{var i=this.getViewPortPxFromLonLat(this.getCachedCenter()),r=i.add(e,t);if(this.dragging||!r.equals(i)){var s=this.getLonLatFromViewPortPx(r);n.animate?this.panTo(s):(this.moveTo(s),this.dragging&&(this.dragging=!1,this.events.triggerEvent("moveend")))}}},panTo:function(e){if(this.panTween&&this.getExtent().scale(this.panRatio).containsLonLat(e)){var t=this.getCachedCenter();if(e.equals(t))return;var n=this.getPixelFromLonLat(t),i=this.getPixelFromLonLat(e),r={x:i.x-n.x,y:i.y-n.y},s={x:0,y:0};this.panTween.start({x:0,y:0},r,this.panDuration,{callbacks:{eachStep:OpenLayers.Function.bind(function(e){var t=e.x-s.x,n=e.y-s.y;this.moveByPx(t,n),s.x=Math.round(e.x),s.y=Math.round(e.y)},this),done:OpenLayers.Function.bind(function(t){this.moveTo(e),this.dragging=!1,this.events.triggerEvent("moveend")},this)}})}else this.setCenter(e)},setCenter:function(e,t,n,i){this.panTween&&this.panTween.stop(),this.zoomTween&&this.zoomTween.stop(),this.moveTo(e,t,{dragging:n,forceZoomChange:i})},moveByPx:function(e,t){var n=this.size.w/2,i=this.size.h/2,r=n+e,s=i+t,o=this.baseLayer.wrapDateLine,a=0,l=0;if(this.restrictedExtent&&(a=n,l=i,o=!1),e=o||r<=this.maxPx.x-a&&r>=this.minPx.x+a?Math.round(e):0,t=s<=this.maxPx.y-l&&s>=this.minPx.y+l?Math.round(t):0,e||t){this.dragging||(this.dragging=!0,this.events.triggerEvent("movestart")),this.center=null,e&&(this.layerContainerOriginPx.x-=e,this.minPx.x-=e,this.maxPx.x-=e),t&&(this.layerContainerOriginPx.y-=t,this.minPx.y-=t,this.maxPx.y-=t),this.applyTransform();var u,h,c;for(h=0,c=this.layers.length;h<c;++h)u=this.layers[h],u.visibility&&(u===this.baseLayer||u.inRange)&&(u.moveByPx(e,t),u.events.triggerEvent("move"));this.events.triggerEvent("move")}},adjustZoom:function(e){if(this.baseLayer&&this.baseLayer.wrapDateLine){var t=this.baseLayer.resolutions,n=this.getMaxExtent().getWidth()/this.size.w;if(this.getResolutionForZoom(e)>n)if(this.fractionalZoom)e=this.getZoomForResolution(n);else for(var i=0|e,r=t.length;i<r;++i)if(t[i]<=n){e=i;break}}return e},getMinZoom:function(){return this.adjustZoom(0)},moveTo:function(e,t,n){null==e||e instanceof OpenLayers.LonLat||(e=new OpenLayers.LonLat(e)),n||(n={}),null!=t&&(t=parseFloat(t),this.fractionalZoom||(t=Math.round(t)));var i=t;t=this.adjustZoom(t),t!==i&&(e=this.getCenter());var r=n.dragging||this.dragging,s=n.forceZoomChange;if(this.getCachedCenter()||this.isValidLonLat(e)||(e=this.maxExtent.getCenterLonLat(),this.center=e.clone()),null!=this.restrictedExtent){null==e&&(e=this.center),null==t&&(t=this.getZoom());var o=this.getResolutionForZoom(t),a=this.calculateBounds(e,o);if(!this.restrictedExtent.containsBounds(a)){var l=this.restrictedExtent.getCenterLonLat();a.getWidth()>this.restrictedExtent.getWidth()?e=new OpenLayers.LonLat(l.lon,e.lat):a.left<this.restrictedExtent.left?e=e.add(this.restrictedExtent.left-a.left,0):a.right>this.restrictedExtent.right&&(e=e.add(this.restrictedExtent.right-a.right,0)),a.getHeight()>this.restrictedExtent.getHeight()?e=new OpenLayers.LonLat(e.lon,l.lat):a.bottom<this.restrictedExtent.bottom?e=e.add(0,this.restrictedExtent.bottom-a.bottom):a.top>this.restrictedExtent.top&&(e=e.add(0,this.restrictedExtent.top-a.top))}}var u=s||this.isValidZoomLevel(t)&&t!=this.getZoom(),h=this.isValidLonLat(e)&&!e.equals(this.center);if(u||h||r){r||this.events.triggerEvent("movestart",{zoomChanged:u}),h&&(!u&&this.center&&this.centerLayerContainer(e),this.center=e.clone());var c=u?this.getResolutionForZoom(t):this.getResolution();if(u||null==this.layerContainerOrigin){this.layerContainerOrigin=this.getCachedCenter(),this.layerContainerOriginPx.x=0,this.layerContainerOriginPx.y=0,this.applyTransform();var p=this.getMaxExtent({restricted:!0}),d=p.getCenterLonLat(),f=this.center.lon-d.lon,y=d.lat-this.center.lat,m=Math.round(p.getWidth()/c),g=Math.round(p.getHeight()/c);this.minPx={x:(this.size.w-m)/2-f/c,y:(this.size.h-g)/2-y/c},this.maxPx={x:this.minPx.x+Math.round(p.getWidth()/c),y:this.minPx.y+Math.round(p.getHeight()/c)}}u&&(this.zoom=t,this.resolution=c);var v=this.getExtent();this.baseLayer.visibility&&(this.baseLayer.moveTo(v,u,n.dragging),n.dragging||this.baseLayer.events.triggerEvent("moveend",{zoomChanged:u})),v=this.baseLayer.getExtent();for(var L=this.layers.length-1;L>=0;--L){var b=this.layers[L];if(b!==this.baseLayer&&!b.isBaseLayer){var O=b.calculateInRange();b.inRange!=O&&(b.inRange=O,O||b.display(!1),this.events.triggerEvent("changelayer",{layer:b,property:"visibility"})),O&&b.visibility&&(b.moveTo(v,u,n.dragging),n.dragging||b.events.triggerEvent("moveend",{zoomChanged:u}))}}if(this.events.triggerEvent("move"),r||this.events.triggerEvent("moveend"),u){for(var L=0,x=this.popups.length;L<x;L++)this.popups[L].updatePosition();this.events.triggerEvent("zoomend")}}},centerLayerContainer:function(e){var t=this.getViewPortPxFromLonLat(this.layerContainerOrigin),n=this.getViewPortPxFromLonLat(e);if(null!=t&&null!=n){var i=this.layerContainerOriginPx.x,r=this.layerContainerOriginPx.y,s=Math.round(t.x-n.x),o=Math.round(t.y-n.y);this.applyTransform(this.layerContainerOriginPx.x=s,this.layerContainerOriginPx.y=o);var a=i-s,l=r-o;this.minPx.x-=a,this.maxPx.x-=a,this.minPx.y-=l,this.maxPx.y-=l}},isValidZoomLevel:function(e){return null!=e&&e>=0&&e<this.getNumZoomLevels()},isValidLonLat:function(e){var t=!1;if(null!=e){var n=this.getMaxExtent(),i=this.baseLayer.wrapDateLine&&n;t=n.containsLonLat(e,{worldBounds:i})}return t},getProjection:function(){var e=this.getProjectionObject();return e?e.getCode():null},getProjectionObject:function(){var e=null;return null!=this.baseLayer&&(e=this.baseLayer.projection),e},getMaxResolution:function(){var e=null;return null!=this.baseLayer&&(e=this.baseLayer.maxResolution),e},getMaxExtent:function(e){var t=null;return e&&e.restricted&&this.restrictedExtent?t=this.restrictedExtent:null!=this.baseLayer&&(t=this.baseLayer.maxExtent),t},getNumZoomLevels:function(){var e=null;return null!=this.baseLayer&&(e=this.baseLayer.numZoomLevels),e},getExtent:function(){var e=null;return null!=this.baseLayer&&(e=this.baseLayer.getExtent()),e},getResolution:function(){var e=null;return null!=this.baseLayer?e=this.baseLayer.getResolution():this.allOverlays===!0&&this.layers.length>0&&(e=this.layers[0].getResolution()),e},getUnits:function(){var e=null;return null!=this.baseLayer&&(e=this.baseLayer.units),e},getScale:function(){var e=null;if(null!=this.baseLayer){var t=this.getResolution(),n=this.baseLayer.units;e=OpenLayers.Util.getScaleFromResolution(t,n)}return e},getZoomForExtent:function(e,t){var n=null;return null!=this.baseLayer&&(n=this.baseLayer.getZoomForExtent(e,t)),n},getResolutionForZoom:function(e){var t=null;return this.baseLayer&&(t=this.baseLayer.getResolutionForZoom(e)),t},getZoomForResolution:function(e,t){var n=null;return null!=this.baseLayer&&(n=this.baseLayer.getZoomForResolution(e,t)),n},zoomTo:function(e,t){var n=this;if(n.isValidZoomLevel(e)){n.baseLayer.wrapDateLine&&(e=n.adjustZoom(e));var i=t?n.getZoomTargetCenter(t,n.getResolutionForZoom(e)):n.getCenter();if(i&&n.events.triggerEvent("zoomstart",{center:i,zoom:e}),n.zoomTween){n.zoomTween.stop();var r=n.getResolution(),s=n.getResolutionForZoom(e),o={scale:1},a={scale:r/s};if(!t){var l=n.getSize();t={x:l.w/2,y:l.h/2}}n.zoomTween.start(o,a,n.zoomDuration,{minFrameRate:50,callbacks:{eachStep:function(e){var i=n.layerContainerOriginPx,r=e.scale,s=(r-1)*(i.x-t.x)|0,o=(r-1)*(i.y-t.y)|0;n.applyTransform(i.x+s,i.y+o,r)},done:function(e){n.applyTransform();var r=n.getResolution()/e.scale,s=n.getZoomForResolution(r,!0),o=1===e.scale?i:n.getZoomTargetCenter(t,r);n.moveTo(o,s)}}})}else n.setCenter(i,e)}},zoomIn:function(){this.zoomTween&&this.zoomTween.stop(),this.zoomTo(this.getZoom()+1)},zoomOut:function(){this.zoomTween&&this.zoomTween.stop(),this.zoomTo(this.getZoom()-1)},zoomToExtent:function(e,t){e instanceof OpenLayers.Bounds||(e=new OpenLayers.Bounds(e));var n=e.getCenterLonLat();if(this.baseLayer.wrapDateLine){var i=this.getMaxExtent();for(e=e.clone();e.right<e.left;)e.right+=i.getWidth();n=e.getCenterLonLat().wrapDateLine(i)}this.setCenter(n,this.getZoomForExtent(e,t))},zoomToMaxExtent:function(e){var t=!e||e.restricted,n=this.getMaxExtent({restricted:t});this.zoomToExtent(n)},zoomToScale:function(e,t){var n=OpenLayers.Util.getResolutionFromScale(e,this.baseLayer.units),i=this.size.w*n/2,r=this.size.h*n/2,s=this.getCachedCenter(),o=new OpenLayers.Bounds(s.lon-i,s.lat-r,s.lon+i,s.lat+r);this.zoomToExtent(o,t)},getLonLatFromViewPortPx:function(e){var t=null;return null!=this.baseLayer&&(t=this.baseLayer.getLonLatFromViewPortPx(e)),t},getViewPortPxFromLonLat:function(e){var t=null;return null!=this.baseLayer&&(t=this.baseLayer.getViewPortPxFromLonLat(e)),t},getZoomTargetCenter:function(e,t){var n=null,i=this.getSize(),r=i.w/2-e.x,s=e.y-i.h/2,o=this.getLonLatFromPixel(e);return o&&(n=new OpenLayers.LonLat(o.lon+r*t,o.lat+s*t)),n},getLonLatFromPixel:function(e){return this.getLonLatFromViewPortPx(e)},getPixelFromLonLat:function(e){var t=this.getViewPortPxFromLonLat(e);return t.x=Math.round(t.x),t.y=Math.round(t.y),t},getGeodesicPixelSize:function(e){var t=e?this.getLonLatFromPixel(e):this.getCachedCenter()||new OpenLayers.LonLat(0,0),n=this.getResolution(),i=t.add(-n/2,0),r=t.add(n/2,0),s=t.add(0,-n/2),o=t.add(0,n/2),a=new OpenLayers.Projection("EPSG:4326"),l=this.getProjectionObject()||a;return l.equals(a)||(i.transform(l,a),r.transform(l,a),s.transform(l,a),o.transform(l,a)),new OpenLayers.Size(OpenLayers.Util.distVincenty(i,r),OpenLayers.Util.distVincenty(s,o))},getViewPortPxFromLayerPx:function(e){var t=null;if(null!=e){var n=this.layerContainerOriginPx.x,i=this.layerContainerOriginPx.y;t=e.add(n,i)}return t},getLayerPxFromViewPortPx:function(e){var t=null;if(null!=e){var n=-this.layerContainerOriginPx.x,i=-this.layerContainerOriginPx.y;t=e.add(n,i),(isNaN(t.x)||isNaN(t.y))&&(t=null)}return t},getLonLatFromLayerPx:function(e){return e=this.getViewPortPxFromLayerPx(e),this.getLonLatFromViewPortPx(e)},getLayerPxFromLonLat:function(e){var t=this.getPixelFromLonLat(e);return this.getLayerPxFromViewPortPx(t)},applyTransform:function(e,t,n){n=n||1;var i=this.layerContainerOriginPx,r=1!==n;e=e||i.x,t=t||i.y;var s=this.layerContainerDiv.style,o=this.applyTransform.transform,a=this.applyTransform.template;if(void 0===o&&(o=OpenLayers.Util.vendorPrefix.style("transform"),this.applyTransform.transform=o,o)){var l=OpenLayers.Element.getStyle(this.viewPortDiv,OpenLayers.Util.vendorPrefix.css("transform"));l&&"none"===l||(a=["translate3d(",",0) ","scale3d(",",1)"],s[o]=[a[0],"0,0",a[1]].join("")),a&&~s[o].indexOf(a[0])||(a=["translate(",") ","scale(",")"]),this.applyTransform.template=a}null===o||"translate3d("!==a[0]&&r!==!0?(s.left=e+"px",s.top=t+"px",null!==o&&(s[o]="")):(r===!0&&"translate("===a[0]&&(e-=i.x,t-=i.y,s.left=i.x+"px",s.top=i.y+"px"),s[o]=[a[0],e,"px,",t,"px",a[1],a[2],n,",",n,a[3]].join(""))},CLASS_NAME:"OpenLayers.Map"}),OpenLayers.Map.TILE_WIDTH=256,OpenLayers.Map.TILE_HEIGHT=256,OpenLayers.Layer=OpenLayers.Class({id:null,name:null,div:null,opacity:1,alwaysInRange:null,RESOLUTION_PROPERTIES:["scales","resolutions","maxScale","minScale","maxResolution","minResolution","numZoomLevels","maxZoomLevel"],events:null,map:null,isBaseLayer:!1,alpha:!1,displayInLayerSwitcher:!0,visibility:!0,attribution:null,inRange:!1,imageSize:null,options:null,eventListeners:null,gutter:0,projection:null,units:null,scales:null,resolutions:null,maxExtent:null,minExtent:null,maxResolution:null,minResolution:null,numZoomLevels:null,minScale:null,maxScale:null,displayOutsideMaxExtent:!1,wrapDateLine:!1,metadata:null,initialize:function(e,t){this.metadata={},t=OpenLayers.Util.extend({},t),null!=this.alwaysInRange&&(t.alwaysInRange=this.alwaysInRange),this.addOptions(t),this.name=e,null==this.id&&(this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_"),this.div=OpenLayers.Util.createDiv(this.id),this.div.style.width="100%",this.div.style.height="100%",this.div.dir="ltr",this.events=new OpenLayers.Events(this,this.div),this.eventListeners instanceof Object&&this.events.on(this.eventListeners))},destroy:function(e){null==e&&(e=!0),null!=this.map&&this.map.removeLayer(this,e),this.projection=null,this.map=null,this.name=null,this.div=null,this.options=null,this.events&&(this.eventListeners&&this.events.un(this.eventListeners),this.events.destroy()),this.eventListeners=null,this.events=null},clone:function(e){return null==e&&(e=new OpenLayers.Layer(this.name,this.getOptions())),OpenLayers.Util.applyDefaults(e,this),e.map=null,e},getOptions:function(){var e={};for(var t in this.options)e[t]=this[t];return e},setName:function(e){e!=this.name&&(this.name=e,null!=this.map&&this.map.events.triggerEvent("changelayer",{layer:this,property:"name"}))},addOptions:function(e,t){if(null==this.options&&(this.options={}),e&&("string"==typeof e.projection&&(e.projection=new OpenLayers.Projection(e.projection)),e.projection&&OpenLayers.Util.applyDefaults(e,OpenLayers.Projection.defaults[e.projection.getCode()]),!e.maxExtent||e.maxExtent instanceof OpenLayers.Bounds||(e.maxExtent=new OpenLayers.Bounds(e.maxExtent)),!e.minExtent||e.minExtent instanceof OpenLayers.Bounds||(e.minExtent=new OpenLayers.Bounds(e.minExtent))),OpenLayers.Util.extend(this.options,e),OpenLayers.Util.extend(this,e),this.projection&&this.projection.getUnits()&&(this.units=this.projection.getUnits()),this.map){var n=this.map.getResolution(),i=this.RESOLUTION_PROPERTIES.concat(["projection","units","minExtent","maxExtent"]);for(var r in e)if(e.hasOwnProperty(r)&&OpenLayers.Util.indexOf(i,r)>=0){this.initResolutions(),t&&this.map.baseLayer===this&&(this.map.setCenter(this.map.getCenter(),this.map.getZoomForResolution(n),!1,!0),this.map.events.triggerEvent("changebaselayer",{layer:this}));break}}},onMapResize:function(){},redraw:function(){var e=!1;if(this.map){this.inRange=this.calculateInRange();var t=this.getExtent();if(t&&this.inRange&&this.visibility){var n=!0;this.moveTo(t,n,!1),this.events.triggerEvent("moveend",{zoomChanged:n}),e=!0}}return e},moveTo:function(e,t,n){var i=this.visibility;this.isBaseLayer||(i=i&&this.inRange),this.display(i)},moveByPx:function(e,t){},setMap:function(e){if(null==this.map){if(this.map=e,this.maxExtent=this.maxExtent||this.map.maxExtent,this.minExtent=this.minExtent||this.map.minExtent,this.projection=this.projection||this.map.projection,"string"==typeof this.projection&&(this.projection=new OpenLayers.Projection(this.projection)),this.projection&&this.projection.getUnits()?this.units=this.projection.getUnits():this.units=this.units||this.map.units,this.initResolutions(),!this.isBaseLayer){this.inRange=this.calculateInRange();var t=this.visibility&&this.inRange;this.div.style.display=t?"":"none"}this.setTileSize()}},afterAdd:function(){},removeMap:function(e){},getImageSize:function(e){return this.imageSize||this.tileSize},setTileSize:function(e){var t=e?e:this.tileSize?this.tileSize:this.map.getTileSize();this.tileSize=t,this.gutter&&(this.imageSize=new OpenLayers.Size(t.w+2*this.gutter,t.h+2*this.gutter))},getVisibility:function(){return this.visibility},setVisibility:function(e){e!=this.visibility&&(this.visibility=e,this.display(e),this.redraw(),null!=this.map&&this.map.events.triggerEvent("changelayer",{layer:this,property:"visibility"}),this.events.triggerEvent("visibilitychanged"))},display:function(e){e!=("none"!=this.div.style.display)&&(this.div.style.display=e&&this.calculateInRange()?"block":"none")},calculateInRange:function(){var e=!1;if(this.alwaysInRange)e=!0;else if(this.map){var t=this.map.getResolution();e=t>=this.minResolution&&t<=this.maxResolution}return e},setIsBaseLayer:function(e){e!=this.isBaseLayer&&(this.isBaseLayer=e,null!=this.map&&this.map.events.triggerEvent("changebaselayer",{layer:this}))},initResolutions:function(){var e,t,n,i={},r=!0;for(e=0,t=this.RESOLUTION_PROPERTIES.length;e<t;e++)n=this.RESOLUTION_PROPERTIES[e],i[n]=this.options[n],r&&this.options[n]&&(r=!1);if(null==this.options.alwaysInRange&&(this.alwaysInRange=r),null==i.resolutions&&(i.resolutions=this.resolutionsFromScales(i.scales)),null==i.resolutions&&(i.resolutions=this.calculateResolutions(i)),null==i.resolutions){for(e=0,t=this.RESOLUTION_PROPERTIES.length;e<t;e++)n=this.RESOLUTION_PROPERTIES[e],i[n]=null!=this.options[n]?this.options[n]:this.map[n];null==i.resolutions&&(i.resolutions=this.resolutionsFromScales(i.scales)),null==i.resolutions&&(i.resolutions=this.calculateResolutions(i))}var s;this.options.maxResolution&&"auto"!==this.options.maxResolution&&(s=this.options.maxResolution),this.options.minScale&&(s=OpenLayers.Util.getResolutionFromScale(this.options.minScale,this.units));var o;if(this.options.minResolution&&"auto"!==this.options.minResolution&&(o=this.options.minResolution),this.options.maxScale&&(o=OpenLayers.Util.getResolutionFromScale(this.options.maxScale,this.units)),i.resolutions&&(i.resolutions.sort(function(e,t){return t-e}),s||(s=i.resolutions[0]),!o)){var a=i.resolutions.length-1;o=i.resolutions[a]}if(this.resolutions=i.resolutions,this.resolutions){for(t=this.resolutions.length,this.scales=new Array(t),e=0;e<t;e++)this.scales[e]=OpenLayers.Util.getScaleFromResolution(this.resolutions[e],this.units);this.numZoomLevels=t}this.minResolution=o,o&&(this.maxScale=OpenLayers.Util.getScaleFromResolution(o,this.units)),this.maxResolution=s,s&&(this.minScale=OpenLayers.Util.getScaleFromResolution(s,this.units))},resolutionsFromScales:function(e){if(null!=e){var t,n,i;for(i=e.length,t=new Array(i),n=0;n<i;n++)t[n]=OpenLayers.Util.getResolutionFromScale(e[n],this.units);return t}},calculateResolutions:function(e){var t,n,i,r=e.maxResolution;null!=e.minScale?r=OpenLayers.Util.getResolutionFromScale(e.minScale,this.units):"auto"==r&&null!=this.maxExtent&&(t=this.map.getSize(),n=this.maxExtent.getWidth()/t.w,i=this.maxExtent.getHeight()/t.h,r=Math.max(n,i));var s=e.minResolution;if(null!=e.maxScale?s=OpenLayers.Util.getResolutionFromScale(e.maxScale,this.units):"auto"==e.minResolution&&null!=this.minExtent&&(t=this.map.getSize(),n=this.minExtent.getWidth()/t.w,i=this.minExtent.getHeight()/t.h,s=Math.max(n,i)),"number"!=typeof r&&"number"!=typeof s&&null!=this.maxExtent){var o=this.map.getTileSize();r=Math.max(this.maxExtent.getWidth()/o.w,this.maxExtent.getHeight()/o.h)}var a=e.maxZoomLevel,l=e.numZoomLevels;if("number"==typeof s&&"number"==typeof r&&void 0===l){var u=r/s;l=Math.floor(Math.log(u)/Math.log(2))+1}else void 0===l&&null!=a&&(l=a+1);if(!("number"!=typeof l||l<=0||"number"!=typeof r&&"number"!=typeof s)){var h=new Array(l),c=2;"number"==typeof s&&"number"==typeof r&&(c=Math.pow(r/s,1/(l-1)));var p;if("number"==typeof r)for(p=0;p<l;p++)h[p]=r/Math.pow(c,p);else for(p=0;p<l;p++)h[l-1-p]=s*Math.pow(c,p);return h}},getResolution:function(){var e=this.map.getZoom();return this.getResolutionForZoom(e)},getExtent:function(){
return this.map.calculateBounds()},getZoomForExtent:function(e,t){var n=this.map.getSize(),i=Math.max(e.getWidth()/n.w,e.getHeight()/n.h);return this.getZoomForResolution(i,t)},getDataExtent:function(){},getResolutionForZoom:function(e){e=Math.max(0,Math.min(e,this.resolutions.length-1));var t;if(this.map.fractionalZoom){var n=Math.floor(e),i=Math.ceil(e);t=this.resolutions[n]-(e-n)*(this.resolutions[n]-this.resolutions[i])}else t=this.resolutions[Math.round(e)];return t},getZoomForResolution:function(e,t){var n,i,r;if(this.map.fractionalZoom){var s,o=0,a=this.resolutions.length-1,l=this.resolutions[o],u=this.resolutions[a];for(i=0,r=this.resolutions.length;i<r;++i)if(s=this.resolutions[i],s>=e&&(l=s,o=i),s<=e){u=s,a=i;break}var h=l-u;n=h>0?o+(l-e)/h:o}else{var c,p=Number.POSITIVE_INFINITY;for(i=0,r=this.resolutions.length;i<r;i++)if(t){if(c=Math.abs(this.resolutions[i]-e),c>p)break;p=c}else if(this.resolutions[i]<e)break;n=Math.max(0,i-1)}return n},getLonLatFromViewPortPx:function(e){var t=null,n=this.map;if(null!=e&&n.minPx){var i=n.getResolution(),r=n.getMaxExtent({restricted:!0}),s=(e.x-n.minPx.x)*i+r.left,o=(n.minPx.y-e.y)*i+r.top;t=new OpenLayers.LonLat(s,o),this.wrapDateLine&&(t=t.wrapDateLine(this.maxExtent))}return t},getViewPortPxFromLonLat:function(e,t){var n=null;if(null!=e){t=t||this.map.getResolution();var i=this.map.calculateBounds(null,t);n=new OpenLayers.Pixel(1/t*(e.lon-i.left),1/t*(i.top-e.lat))}return n},setOpacity:function(e){if(e!=this.opacity){this.opacity=e;for(var t=this.div.childNodes,n=0,i=t.length;n<i;++n){var r=t[n].firstChild||t[n],s=t[n].lastChild;s&&"iframe"===s.nodeName.toLowerCase()&&(r=s.parentNode),OpenLayers.Util.modifyDOMElement(r,null,null,null,null,null,null,e)}null!=this.map&&this.map.events.triggerEvent("changelayer",{layer:this,property:"opacity"})}},getZIndex:function(){return this.div.style.zIndex},setZIndex:function(e){this.div.style.zIndex=e},adjustBounds:function(e){if(this.gutter){var t=this.gutter*this.map.getResolution();e=new OpenLayers.Bounds(e.left-t,e.bottom-t,e.right+t,e.top+t)}if(this.wrapDateLine){var n={rightTolerance:this.getResolution(),leftTolerance:this.getResolution()};e=e.wrapDateLine(this.maxExtent,n)}return e},CLASS_NAME:"OpenLayers.Layer"}),OpenLayers.Layer.HTTPRequest=OpenLayers.Class(OpenLayers.Layer,{URL_HASH_FACTOR:(Math.sqrt(5)-1)/2,url:null,params:null,reproject:!1,initialize:function(e,t,n,i){OpenLayers.Layer.prototype.initialize.apply(this,[e,i]),this.url=t,this.params||(this.params=OpenLayers.Util.extend({},n))},destroy:function(){this.url=null,this.params=null,OpenLayers.Layer.prototype.destroy.apply(this,arguments)},clone:function(e){return null==e&&(e=new OpenLayers.Layer.HTTPRequest(this.name,this.url,this.params,this.getOptions())),e=OpenLayers.Layer.prototype.clone.apply(this,[e])},setUrl:function(e){this.url=e},mergeNewParams:function(e){this.params=OpenLayers.Util.extend(this.params,e);var t=this.redraw();return null!=this.map&&this.map.events.triggerEvent("changelayer",{layer:this,property:"params"}),t},redraw:function(e){return e?(this.events.triggerEvent("refresh"),this.mergeNewParams({_olSalt:Math.random()})):OpenLayers.Layer.prototype.redraw.apply(this,[])},selectUrl:function(e,t){for(var n=1,i=0,r=e.length;i<r;i++)n*=e.charCodeAt(i)*this.URL_HASH_FACTOR,n-=Math.floor(n);return t[Math.floor(n*t.length)]},getFullRequestString:function(e,t){var n=t||this.url,i=OpenLayers.Util.extend({},this.params);i=OpenLayers.Util.extend(i,e);var r=OpenLayers.Util.getParameterString(i);OpenLayers.Util.isArray(n)&&(n=this.selectUrl(r,n));var s=OpenLayers.Util.upperCaseObject(OpenLayers.Util.getParameters(n));for(var o in i)o.toUpperCase()in s&&delete i[o];return r=OpenLayers.Util.getParameterString(i),OpenLayers.Util.urlAppend(n,r)},CLASS_NAME:"OpenLayers.Layer.HTTPRequest"}),OpenLayers.Tile=OpenLayers.Class({events:null,eventListeners:null,id:null,layer:null,url:null,bounds:null,size:null,position:null,isLoading:!1,initialize:function(e,t,n,i,r,s){this.layer=e,this.position=t.clone(),this.setBounds(n),this.url=i,r&&(this.size=r.clone()),this.id=OpenLayers.Util.createUniqueID("Tile_"),OpenLayers.Util.extend(this,s),this.events=new OpenLayers.Events(this),this.eventListeners instanceof Object&&this.events.on(this.eventListeners)},unload:function(){this.isLoading&&(this.isLoading=!1,this.events.triggerEvent("unload"))},destroy:function(){this.layer=null,this.bounds=null,this.size=null,this.position=null,this.eventListeners&&this.events.un(this.eventListeners),this.events.destroy(),this.eventListeners=null,this.events=null},draw:function(e){e||this.clear();var t=this.shouldDraw();return t&&!e&&this.events.triggerEvent("beforedraw")===!1&&(t=null),t},shouldDraw:function(){var e=!1,t=this.layer.maxExtent;if(t){var n=this.layer.map,i=n.baseLayer.wrapDateLine&&n.getMaxExtent();this.bounds.intersectsBounds(t,{inclusive:!1,worldBounds:i})&&(e=!0)}return e||this.layer.displayOutsideMaxExtent},setBounds:function(e){if(e=e.clone(),this.layer.map.baseLayer.wrapDateLine){var t=this.layer.map.getMaxExtent(),n=this.layer.map.getResolution();e=e.wrapDateLine(t,{leftTolerance:n,rightTolerance:n})}this.bounds=e},moveTo:function(e,t,n){null==n&&(n=!0),this.setBounds(e),this.position=t.clone(),n&&this.draw()},clear:function(e){},CLASS_NAME:"OpenLayers.Tile"}),OpenLayers.Tile.Image=OpenLayers.Class(OpenLayers.Tile,{url:null,imgDiv:null,frame:null,imageReloadAttempts:null,layerAlphaHack:null,asyncRequestId:null,maxGetUrlLength:null,canvasContext:null,crossOriginKeyword:null,initialize:function(e,t,n,i,r,s){OpenLayers.Tile.prototype.initialize.apply(this,arguments),this.url=i,this.layerAlphaHack=this.layer.alpha&&OpenLayers.Util.alphaHack(),(null!=this.maxGetUrlLength||this.layer.gutter||this.layerAlphaHack)&&(this.frame=document.createElement("div"),this.frame.style.position="absolute",this.frame.style.overflow="hidden"),null!=this.maxGetUrlLength&&OpenLayers.Util.extend(this,OpenLayers.Tile.Image.IFrame)},destroy:function(){this.imgDiv&&(this.clear(),this.imgDiv=null,this.frame=null),this.asyncRequestId=null,OpenLayers.Tile.prototype.destroy.apply(this,arguments)},draw:function(){var e=OpenLayers.Tile.prototype.draw.apply(this,arguments);return e?(this.layer!=this.layer.map.baseLayer&&this.layer.reproject&&(this.bounds=this.getBoundsFromBaseLayer(this.position)),this.isLoading?this._loadEvent="reload":(this.isLoading=!0,this._loadEvent="loadstart"),this.renderTile(),this.positionTile()):e===!1&&this.unload(),e},renderTile:function(){if(this.layer.async){var e=this.asyncRequestId=(this.asyncRequestId||0)+1;this.layer.getURLasync(this.bounds,function(t){e==this.asyncRequestId&&(this.url=t,this.initImage())},this)}else this.url=this.layer.getURL(this.bounds),this.initImage()},positionTile:function(){var e=this.getTile().style,t=this.frame?this.size:this.layer.getImageSize(this.bounds),n=1;this.layer instanceof OpenLayers.Layer.Grid&&(n=this.layer.getServerResolution()/this.layer.map.getResolution()),e.left=this.position.x+"px",e.top=this.position.y+"px",e.width=Math.round(n*t.w)+"px",e.height=Math.round(n*t.h)+"px"},clear:function(){OpenLayers.Tile.prototype.clear.apply(this,arguments);var e=this.imgDiv;if(e){var t=this.getTile();t.parentNode===this.layer.div&&this.layer.div.removeChild(t),this.setImgSrc(),this.layerAlphaHack===!0&&(e.style.filter=""),OpenLayers.Element.removeClass(e,"olImageLoadError")}this.canvasContext=null},getImage:function(){if(!this.imgDiv){this.imgDiv=OpenLayers.Tile.Image.IMAGE.cloneNode(!1);var e=this.imgDiv.style;if(this.frame){var t=0,n=0;this.layer.gutter&&(t=this.layer.gutter/this.layer.tileSize.w*100,n=this.layer.gutter/this.layer.tileSize.h*100),e.left=-t+"%",e.top=-n+"%",e.width=2*t+100+"%",e.height=2*n+100+"%"}e.visibility="hidden",e.opacity=0,this.layer.opacity<1&&(e.filter="alpha(opacity="+100*this.layer.opacity+")"),e.position="absolute",this.layerAlphaHack&&(e.paddingTop=e.height,e.height="0",e.width="100%"),this.frame&&this.frame.appendChild(this.imgDiv)}return this.imgDiv},setImage:function(e){this.imgDiv=e},initImage:function(){if(!this.url&&!this.imgDiv)return void(this.isLoading=!1);this.events.triggerEvent("beforeload"),this.layer.div.appendChild(this.getTile()),this.events.triggerEvent(this._loadEvent);var e=this.getImage(),t=e.getAttribute("src")||"";this.url&&OpenLayers.Util.isEquivalentUrl(t,this.url)?this._loadTimeout=window.setTimeout(OpenLayers.Function.bind(this.onImageLoad,this),0):(this.stopLoading(),this.crossOriginKeyword&&e.removeAttribute("crossorigin"),OpenLayers.Event.observe(e,"load",OpenLayers.Function.bind(this.onImageLoad,this)),OpenLayers.Event.observe(e,"error",OpenLayers.Function.bind(this.onImageError,this)),this.imageReloadAttempts=0,this.setImgSrc(this.url))},setImgSrc:function(e){var t=this.imgDiv;e?(t.style.visibility="hidden",t.style.opacity=0,this.crossOriginKeyword&&("data:"!==e.substr(0,5)?t.setAttribute("crossorigin",this.crossOriginKeyword):t.removeAttribute("crossorigin")),t.src=e):(this.stopLoading(),this.imgDiv=null,t.parentNode&&t.parentNode.removeChild(t))},getTile:function(){return this.frame?this.frame:this.getImage()},createBackBuffer:function(){if(this.imgDiv&&!this.isLoading){var e;return this.frame?(e=this.frame.cloneNode(!1),e.appendChild(this.imgDiv)):e=this.imgDiv,this.imgDiv=null,e}},onImageLoad:function(){var e=this.imgDiv;this.stopLoading(),e.style.visibility="inherit",e.style.opacity=this.layer.opacity,this.isLoading=!1,this.canvasContext=null,this.events.triggerEvent("loadend"),this.layerAlphaHack===!0&&(e.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+e.src+"', sizingMethod='scale')")},onImageError:function(){var e=this.imgDiv;null!=e.src&&(this.imageReloadAttempts++,this.imageReloadAttempts<=OpenLayers.IMAGE_RELOAD_ATTEMPTS?this.setImgSrc(this.layer.getURL(this.bounds)):(OpenLayers.Element.addClass(e,"olImageLoadError"),this.events.triggerEvent("loaderror"),this.onImageLoad()))},stopLoading:function(){OpenLayers.Event.stopObservingElement(this.imgDiv),window.clearTimeout(this._loadTimeout),delete this._loadTimeout},getCanvasContext:function(){if(OpenLayers.CANVAS_SUPPORTED&&this.imgDiv&&!this.isLoading){if(!this.canvasContext){var e=document.createElement("canvas");e.width=this.size.w,e.height=this.size.h,this.canvasContext=e.getContext("2d"),this.canvasContext.drawImage(this.imgDiv,0,0)}return this.canvasContext}},CLASS_NAME:"OpenLayers.Tile.Image"}),OpenLayers.Tile.Image.IMAGE=function(){var e=new Image;return e.className="olTileImage",e.galleryImg="no",e}(),OpenLayers.Layer.Grid=OpenLayers.Class(OpenLayers.Layer.HTTPRequest,{tileSize:null,tileOriginCorner:"bl",tileOrigin:null,tileOptions:null,tileClass:OpenLayers.Tile.Image,grid:null,singleTile:!1,ratio:1.5,buffer:0,transitionEffect:"resize",numLoadingTiles:0,serverResolutions:null,loading:!1,backBuffer:null,gridResolution:null,backBufferResolution:null,backBufferLonLat:null,backBufferTimerId:null,removeBackBufferDelay:null,className:null,gridLayout:null,rowSign:null,transitionendEvents:["transitionend","webkitTransitionEnd","otransitionend","oTransitionEnd"],initialize:function(e,t,n,i){OpenLayers.Layer.HTTPRequest.prototype.initialize.apply(this,arguments),this.grid=[],this._removeBackBuffer=OpenLayers.Function.bind(this.removeBackBuffer,this),this.initProperties(),this.rowSign="t"===this.tileOriginCorner.substr(0,1)?1:-1},initProperties:function(){void 0===this.options.removeBackBufferDelay&&(this.removeBackBufferDelay=this.singleTile?0:2500),void 0===this.options.className&&(this.className=this.singleTile?"olLayerGridSingleTile":"olLayerGrid")},setMap:function(e){OpenLayers.Layer.HTTPRequest.prototype.setMap.call(this,e),OpenLayers.Element.addClass(this.div,this.className)},removeMap:function(e){this.removeBackBuffer()},destroy:function(){this.removeBackBuffer(),this.clearGrid(),this.grid=null,this.tileSize=null,OpenLayers.Layer.HTTPRequest.prototype.destroy.apply(this,arguments)},clearGrid:function(){if(this.grid){for(var e=0,t=this.grid.length;e<t;e++)for(var n=this.grid[e],i=0,r=n.length;i<r;i++){var s=n[i];this.destroyTile(s)}this.grid=[],this.gridResolution=null,this.gridLayout=null}},addOptions:function(e,t){var n=void 0!==e.singleTile&&e.singleTile!==this.singleTile;OpenLayers.Layer.HTTPRequest.prototype.addOptions.apply(this,arguments),this.map&&n&&(this.initProperties(),this.clearGrid(),this.tileSize=this.options.tileSize,this.setTileSize(),this.visibility&&this.moveTo(null,!0))},clone:function(e){return null==e&&(e=new OpenLayers.Layer.Grid(this.name,this.url,this.params,this.getOptions())),e=OpenLayers.Layer.HTTPRequest.prototype.clone.apply(this,[e]),null!=this.tileSize&&(e.tileSize=this.tileSize.clone()),e.grid=[],e.gridResolution=null,e.backBuffer=null,e.backBufferTimerId=null,e.loading=!1,e.numLoadingTiles=0,e},moveTo:function(e,t,n){if(OpenLayers.Layer.HTTPRequest.prototype.moveTo.apply(this,arguments),e=e||this.map.getExtent(),null!=e){var i=!this.grid.length||t,r=this.getTilesBounds(),s=this.map.getResolution();this.getServerResolution(s);this.singleTile?(i||!n&&!r.containsBounds(e))&&(t&&"resize"!==this.transitionEffect&&this.removeBackBuffer(),t&&"resize"!==this.transitionEffect||this.applyBackBuffer(s),this.initSingleTile(e)):(i=i||!r.intersectsBounds(e,{worldBounds:this.map.baseLayer.wrapDateLine&&this.map.getMaxExtent()}),i?(!t||"resize"!==this.transitionEffect&&this.gridResolution!==s||this.applyBackBuffer(s),this.initGriddedTiles(e)):this.moveGriddedTiles())}},getTileData:function(e){var t=null,n=e.lon,i=e.lat,r=this.grid.length;if(this.map&&r){var s=this.map.getResolution(),o=this.tileSize.w,a=this.tileSize.h,l=this.grid[0][0].bounds,u=l.left,h=l.top;if(n<u&&this.map.baseLayer.wrapDateLine){var c=this.map.getMaxExtent().getWidth(),p=Math.ceil((u-n)/c);n+=c*p}var d=(n-u)/(s*o),f=(h-i)/(s*a),y=Math.floor(d),m=Math.floor(f);if(m>=0&&m<r){var g=this.grid[m][y];g&&(t={tile:g,i:Math.floor((d-y)*o),j:Math.floor((f-m)*a)})}}return t},destroyTile:function(e){this.removeTileMonitoringHooks(e),e.destroy()},getServerResolution:function(e){var t=Number.POSITIVE_INFINITY;if(e=e||this.map.getResolution(),this.serverResolutions&&OpenLayers.Util.indexOf(this.serverResolutions,e)===-1){var n,i,r,s;for(n=this.serverResolutions.length-1;n>=0&&(r=this.serverResolutions[n],i=Math.abs(r-e),!(i>t));n--)t=i,s=r;e=s}return e},getServerZoom:function(){var e=this.getServerResolution();return this.serverResolutions?OpenLayers.Util.indexOf(this.serverResolutions,e):this.map.getZoomForResolution(e)+(this.zoomOffset||0)},applyBackBuffer:function(e){null!==this.backBufferTimerId&&this.removeBackBuffer();var t=this.backBuffer;if(!t){if(t=this.createBackBuffer(),!t)return;e===this.gridResolution?this.div.insertBefore(t,this.div.firstChild):this.map.baseLayer.div.parentNode.insertBefore(t,this.map.baseLayer.div),this.backBuffer=t;var n=this.grid[0][0].bounds;this.backBufferLonLat={lon:n.left,lat:n.top},this.backBufferResolution=this.gridResolution}for(var i,r=this.backBufferResolution/e,s=t.childNodes,o=s.length-1;o>=0;--o)i=s[o],i.style.top=(r*i._i*t._th|0)+"px",i.style.left=(r*i._j*t._tw|0)+"px",i.style.width=Math.round(r*i._w)+"px",i.style.height=Math.round(r*i._h)+"px";var a=this.getViewPortPxFromLonLat(this.backBufferLonLat,e),l=this.map.layerContainerOriginPx.x,u=this.map.layerContainerOriginPx.y;t.style.left=Math.round(a.x-l)+"px",t.style.top=Math.round(a.y-u)+"px"},createBackBuffer:function(){var e;if(this.grid.length>0){e=document.createElement("div"),e.id=this.div.id+"_bb",e.className="olBackBuffer",e.style.position="absolute";var t=this.map;e.style.zIndex="resize"===this.transitionEffect?this.getZIndex()-1:t.Z_INDEX_BASE.BaseLayer-(t.getNumLayers()-t.getLayerIndex(this));for(var n=0,i=this.grid.length;n<i;n++)for(var r=0,s=this.grid[n].length;r<s;r++){var o=this.grid[n][r],a=this.grid[n][r].createBackBuffer();a&&(a._i=n,a._j=r,a._w=this.singleTile?this.getImageSize(o.bounds).w:o.size.w,a._h=o.size.h,a.id=o.id+"_bb",e.appendChild(a))}e._tw=this.tileSize.w,e._th=this.tileSize.h}return e},removeBackBuffer:function(){if(this._transitionElement){for(var e=this.transitionendEvents.length-1;e>=0;--e)OpenLayers.Event.stopObserving(this._transitionElement,this.transitionendEvents[e],this._removeBackBuffer);delete this._transitionElement}this.backBuffer&&(this.backBuffer.parentNode&&this.backBuffer.parentNode.removeChild(this.backBuffer),this.backBuffer=null,this.backBufferResolution=null,null!==this.backBufferTimerId&&(window.clearTimeout(this.backBufferTimerId),this.backBufferTimerId=null))},moveByPx:function(e,t){this.singleTile||this.moveGriddedTiles()},setTileSize:function(e){this.singleTile&&(e=this.map.getSize(),e.h=parseInt(e.h*this.ratio,10),e.w=parseInt(e.w*this.ratio,10)),OpenLayers.Layer.HTTPRequest.prototype.setTileSize.apply(this,[e])},getTilesBounds:function(){var e=null,t=this.grid.length;if(t){var n=this.grid[t-1][0].bounds,i=this.grid[0].length*n.getWidth(),r=this.grid.length*n.getHeight();e=new OpenLayers.Bounds(n.left,n.bottom,n.left+i,n.bottom+r)}return e},initSingleTile:function(e){this.events.triggerEvent("retile");var t=e.getCenterLonLat(),n=e.getWidth()*this.ratio,i=e.getHeight()*this.ratio,r=new OpenLayers.Bounds(t.lon-n/2,t.lat-i/2,t.lon+n/2,t.lat+i/2);this.gridResolution=this.getServerResolution();var s=this.maxExtent;s&&(!this.displayOutsideMaxExtent||this.map.baseLayer.wrapDateLine&&this.maxExtent.equals(this.map.getMaxExtent()))&&(r.left=Math.max(r.left,s.left),r.right=Math.min(r.right,s.right));var o=this.map.getLayerPxFromLonLat({lon:r.left,lat:r.top});this.grid.length||(this.grid[0]=[]);var a=this.grid[0][0];a?a.moveTo(r,o):(a=this.addTile(r,o),this.addTileMonitoringHooks(a),a.draw(),this.grid[0][0]=a),this.removeExcessTiles(1,1)},calculateGridLayout:function(e,t,n){var i=n*this.tileSize.w,r=n*this.tileSize.h,s=e.left-t.lon,o=Math.floor(s/i)-this.buffer,a=this.rowSign,l=a*(t.lat-e.top+r),u=Math[~a?"floor":"ceil"](l/r)-this.buffer*a;return{tilelon:i,tilelat:r,startcol:o,startrow:u}},getImageSize:function(e){var t=OpenLayers.Layer.HTTPRequest.prototype.getImageSize.apply(this,arguments);return this.singleTile&&(t=new OpenLayers.Size(Math.round(e.getWidth()/this.gridResolution),t.h)),t},getTileOrigin:function(){var e=this.tileOrigin;if(!e){var t=this.getMaxExtent(),n={tl:["left","top"],tr:["right","top"],bl:["left","bottom"],br:["right","bottom"]}[this.tileOriginCorner];e=new OpenLayers.LonLat(t[n[0]],t[n[1]])}return e},getTileBoundsForGridIndex:function(e,t){var n=this.getTileOrigin(),i=this.gridLayout,r=i.tilelon,s=i.tilelat,o=i.startcol,a=i.startrow,l=this.rowSign;return new OpenLayers.Bounds(n.lon+(o+t)*r,n.lat-(a+e*l)*s*l,n.lon+(o+t+1)*r,n.lat-(a+(e-1)*l)*s*l)},initGriddedTiles:function(e){this.events.triggerEvent("retile");var t=this.map.getSize(),n=this.getTileOrigin(),i=this.map.getResolution(),r=this.getServerResolution(),s=i/r,o={w:this.tileSize.w/s,h:this.tileSize.h/s},a=Math.ceil(t.h/o.h)+2*this.buffer+1,l=Math.ceil(t.w/o.w)+2*this.buffer+1,u=this.calculateGridLayout(e,n,r);this.gridLayout=u;var h=u.tilelon,c=u.tilelat,p=this.map.layerContainerOriginPx.x,d=this.map.layerContainerOriginPx.y,f=this.getTileBoundsForGridIndex(0,0),y=this.map.getViewPortPxFromLonLat(new OpenLayers.LonLat(f.left,f.top));y.x=Math.round(y.x)-p,y.y=Math.round(y.y)-d;var m=[],g=this.map.getCenter(),v=0;do{var L=this.grid[v];L||(L=[],this.grid.push(L));var b=0;do{f=this.getTileBoundsForGridIndex(v,b);var O=y.clone();O.x=O.x+b*Math.round(o.w),O.y=O.y+v*Math.round(o.h);var x=L[b];x?x.moveTo(f,O,!1):(x=this.addTile(f,O),this.addTileMonitoringHooks(x),L.push(x));var w=f.getCenterLonLat();m.push({tile:x,distance:Math.pow(w.lon-g.lon,2)+Math.pow(w.lat-g.lat,2)}),b+=1}while(f.right<=e.right+h*this.buffer||b<l);v+=1}while(f.bottom>=e.bottom-c*this.buffer||v<a);this.removeExcessTiles(v,b);var i=this.getServerResolution();this.gridResolution=i,m.sort(function(e,t){return e.distance-t.distance});for(var C=0,E=m.length;C<E;++C)m[C].tile.draw()},getMaxExtent:function(){return this.maxExtent},addTile:function(e,t){var n=new this.tileClass(this,t,e,null,this.tileSize,this.tileOptions);return this.events.triggerEvent("addtile",{tile:n}),n},addTileMonitoringHooks:function(e){var t="olTileReplacing";e.onLoadStart=function(){this.loading===!1&&(this.loading=!0,this.events.triggerEvent("loadstart")),this.events.triggerEvent("tileloadstart",{tile:e}),this.numLoadingTiles++,!this.singleTile&&this.backBuffer&&this.gridResolution===this.backBufferResolution&&OpenLayers.Element.addClass(e.getTile(),t)},e.onLoadEnd=function(n){this.numLoadingTiles--;var i="unload"===n.type;if(this.events.triggerEvent("tileloaded",{tile:e,aborted:i}),!this.singleTile&&!i&&this.backBuffer&&this.gridResolution===this.backBufferResolution){var r=e.getTile();if("none"===OpenLayers.Element.getStyle(r,"display")){var s=document.getElementById(e.id+"_bb");s&&s.parentNode.removeChild(s)}OpenLayers.Element.removeClass(r,t)}if(0===this.numLoadingTiles){if(this.backBuffer)if(0===this.backBuffer.childNodes.length)this.removeBackBuffer();else{this._transitionElement=i?this.div.lastChild:e.imgDiv;for(var o=this.transitionendEvents,a=o.length-1;a>=0;--a)OpenLayers.Event.observe(this._transitionElement,o[a],this._removeBackBuffer);this.backBufferTimerId=window.setTimeout(this._removeBackBuffer,this.removeBackBufferDelay)}this.loading=!1,this.events.triggerEvent("loadend")}},e.onLoadError=function(){this.events.triggerEvent("tileerror",{tile:e})},e.events.on({loadstart:e.onLoadStart,loadend:e.onLoadEnd,unload:e.onLoadEnd,loaderror:e.onLoadError,scope:this})},removeTileMonitoringHooks:function(e){e.unload(),e.events.un({loadstart:e.onLoadStart,loadend:e.onLoadEnd,unload:e.onLoadEnd,loaderror:e.onLoadError,scope:this})},moveGriddedTiles:function(){for(var e=this.buffer+1;;){var t=this.grid[0][0],n={x:t.position.x+this.map.layerContainerOriginPx.x,y:t.position.y+this.map.layerContainerOriginPx.y},i=this.getServerResolution()/this.map.getResolution(),r={w:Math.round(this.tileSize.w*i),h:Math.round(this.tileSize.h*i)};if(n.x>-r.w*(e-1))this.shiftColumn(!0,r);else if(n.x<-r.w*e)this.shiftColumn(!1,r);else if(n.y>-r.h*(e-1))this.shiftRow(!0,r);else{if(!(n.y<-r.h*e))break;this.shiftRow(!1,r)}}},shiftRow:function(e,t){var n=this.grid,i=e?0:n.length-1,r=e?-1:1,s=this.rowSign,o=this.gridLayout;o.startrow+=r*s;for(var a=n[i],l=n[e?"pop":"shift"](),u=0,h=l.length;u<h;u++){var c=l[u],p=a[u].position.clone();p.y+=t.h*r,c.moveTo(this.getTileBoundsForGridIndex(i,u),p)}n[e?"unshift":"push"](l)},shiftColumn:function(e,t){var n=this.grid,i=e?0:n[0].length-1,r=e?-1:1,s=this.gridLayout;s.startcol+=r;for(var o=0,a=n.length;o<a;o++){var l=n[o],u=l[i].position.clone(),h=l[e?"pop":"shift"]();u.x+=t.w*r,h.moveTo(this.getTileBoundsForGridIndex(o,i),u),l[e?"unshift":"push"](h)}},removeExcessTiles:function(e,t){for(var n,i;this.grid.length>e;){var r=this.grid.pop();for(n=0,i=r.length;n<i;n++){var s=r[n];this.destroyTile(s)}}for(n=0,i=this.grid.length;n<i;n++)for(;this.grid[n].length>t;){var r=this.grid[n],s=r.pop();this.destroyTile(s)}},onMapResize:function(){this.singleTile&&(this.clearGrid(),this.setTileSize())},getTileBounds:function(e){var t=this.maxExtent,n=this.getResolution(),i=n*this.tileSize.w,r=n*this.tileSize.h,s=this.getLonLatFromViewPortPx(e),o=t.left+i*Math.floor((s.lon-t.left)/i),a=t.bottom+r*Math.floor((s.lat-t.bottom)/r);return new OpenLayers.Bounds(o,a,o+i,a+r)},CLASS_NAME:"OpenLayers.Layer.Grid"}),OpenLayers.TileManager=OpenLayers.Class({cacheSize:256,tilesPerFrame:2,frameDelay:16,moveDelay:100,zoomDelay:200,maps:null,tileQueueId:null,tileQueue:null,tileCache:null,tileCacheIndex:null,initialize:function(e){OpenLayers.Util.extend(this,e),this.maps=[],this.tileQueueId={},this.tileQueue={},this.tileCache={},this.tileCacheIndex=[]},addMap:function(e){if(!this._destroyed&&OpenLayers.Layer.Grid){this.maps.push(e),this.tileQueue[e.id]=[];for(var t=0,n=e.layers.length;t<n;++t)this.addLayer({layer:e.layers[t]});e.events.on({move:this.move,zoomend:this.zoomEnd,changelayer:this.changeLayer,addlayer:this.addLayer,preremovelayer:this.removeLayer,scope:this})}},removeMap:function(e){if(!this._destroyed&&OpenLayers.Layer.Grid){if(window.clearTimeout(this.tileQueueId[e.id]),e.layers)for(var t=0,n=e.layers.length;t<n;++t)this.removeLayer({layer:e.layers[t]});e.events&&e.events.un({move:this.move,zoomend:this.zoomEnd,changelayer:this.changeLayer,addlayer:this.addLayer,preremovelayer:this.removeLayer,scope:this}),delete this.tileQueue[e.id],delete this.tileQueueId[e.id],OpenLayers.Util.removeItem(this.maps,e)}},move:function(e){this.updateTimeout(e.object,this.moveDelay,!0)},zoomEnd:function(e){this.updateTimeout(e.object,this.zoomDelay)},changeLayer:function(e){"visibility"!==e.property&&"params"!==e.property||this.updateTimeout(e.object,0)},addLayer:function(e){var t=e.layer;if(t instanceof OpenLayers.Layer.Grid){t.events.on({addtile:this.addTile,refresh:this.handleLayerRefresh,retile:this.clearTileQueue,scope:this});var n,i,r;for(n=t.grid.length-1;n>=0;--n)for(i=t.grid[n].length-1;i>=0;--i)r=t.grid[n][i],this.addTile({tile:r}),r.url&&!r.imgDiv&&this.manageTileCache({object:r})}},removeLayer:function(e){var t=e.layer;if(t instanceof OpenLayers.Layer.Grid&&(this.clearTileQueue({object:t}),t.events&&t.events.un({addtile:this.addTile,refresh:this.handleLayerRefresh,retile:this.clearTileQueue,scope:this}),t.grid)){var n,i,r;for(n=t.grid.length-1;n>=0;--n)for(i=t.grid[n].length-1;i>=0;--i)r=t.grid[n][i],this.unloadTile({object:r})}},handleLayerRefresh:function(e){var t=e.object;if(t.grid){var n,i,r;for(n=t.grid.length-1;n>=0;--n)for(i=t.grid[n].length-1;i>=0;--i)r=t.grid[n][i],OpenLayers.Util.removeItem(this.tileCacheIndex,r.url),delete this.tileCache[r.url]}},updateTimeout:function(e,t,n){window.clearTimeout(this.tileQueueId[e.id]);var i=this.tileQueue[e.id];n&&!i.length||(this.tileQueueId[e.id]=window.setTimeout(OpenLayers.Function.bind(function(){this.drawTilesFromQueue(e),i.length&&this.updateTimeout(e,this.frameDelay)},this),t))},addTile:function(e){e.tile instanceof OpenLayers.Tile.Image?e.tile.layer.singleTile||e.tile.events.on({beforedraw:this.queueTileDraw,beforeload:this.manageTileCache,loadend:this.addToCache,unload:this.unloadTile,scope:this}):this.removeLayer({layer:e.tile.layer})},unloadTile:function(e){var t=e.object;t.events.un({beforedraw:this.queueTileDraw,beforeload:this.manageTileCache,loadend:this.addToCache,unload:this.unloadTile,scope:this}),OpenLayers.Util.removeItem(this.tileQueue[t.layer.map.id],t)},queueTileDraw:function(e){var t=e.object,n=!1,i=t.layer,r=i.getURL(t.bounds),s=this.tileCache[r];if(s&&"olTileImage"!==s.className&&(delete this.tileCache[r],OpenLayers.Util.removeItem(this.tileCacheIndex,r),s=null),i.url&&(i.async||!s)){var o=this.tileQueue[i.map.id];~OpenLayers.Util.indexOf(o,t)||o.push(t),n=!0}return!n},drawTilesFromQueue:function(e){for(var t=this.tileQueue[e.id],n=this.tilesPerFrame,i=e.zoomTween&&e.zoomTween.playing;!i&&t.length&&n;)t.shift().draw(!0),--n},manageTileCache:function(e){var t=e.object,n=this.tileCache[t.url];n&&(n.parentNode&&OpenLayers.Element.hasClass(n.parentNode,"olBackBuffer")&&(n.parentNode.removeChild(n),n.id=null),n.parentNode||(n.style.visibility="hidden",n.style.opacity=0,t.setImage(n),OpenLayers.Util.removeItem(this.tileCacheIndex,t.url),this.tileCacheIndex.push(t.url)))},addToCache:function(e){var t=e.object;this.tileCache[t.url]||OpenLayers.Element.hasClass(t.imgDiv,"olImageLoadError")||(this.tileCacheIndex.length>=this.cacheSize&&(delete this.tileCache[this.tileCacheIndex[0]],this.tileCacheIndex.shift()),this.tileCache[t.url]=t.imgDiv,this.tileCacheIndex.push(t.url))},clearTileQueue:function(e){for(var t=e.object,n=this.tileQueue[t.map.id],i=n.length-1;i>=0;--i)n[i].layer===t&&n.splice(i,1)},destroy:function(){for(var e=this.maps.length-1;e>=0;--e)this.removeMap(this.maps[e]);this.maps=null,this.tileQueue=null,this.tileQueueId=null,this.tileCache=null,this.tileCacheIndex=null,this._destroyed=!0}}),OpenLayers.Renderer=OpenLayers.Class({container:null,root:null,extent:null,locked:!1,size:null,resolution:null,map:null,featureDx:0,initialize:function(e,t){this.container=OpenLayers.Util.getElement(e),OpenLayers.Util.extend(this,t)},destroy:function(){this.container=null,this.extent=null,this.size=null,this.resolution=null,this.map=null},supported:function(){return!1},setExtent:function(e,t){if(this.extent=e.clone(),this.map.baseLayer&&this.map.baseLayer.wrapDateLine){var n=e.getWidth()/this.map.getExtent().getWidth(),e=e.scale(1/n);this.extent=e.wrapDateLine(this.map.getMaxExtent()).scale(n)}return t&&(this.resolution=null),!0},setSize:function(e){this.size=e.clone(),this.resolution=null},getResolution:function(){return this.resolution=this.resolution||this.map.getResolution(),this.resolution},drawFeature:function(e,t){if(null==t&&(t=e.style),e.geometry){var n=e.geometry.getBounds();if(n){var i;this.map.baseLayer&&this.map.baseLayer.wrapDateLine&&(i=this.map.getMaxExtent()),n.intersectsBounds(this.extent,{worldBounds:i})?this.calculateFeatureDx(n,i):t={display:"none"};var r=this.drawGeometry(e.geometry,t,e.id);if("none"!=t.display&&t.label&&r!==!1){var s=e.geometry.getCentroid();if(t.labelXOffset||t.labelYOffset){var o=isNaN(t.labelXOffset)?0:t.labelXOffset,a=isNaN(t.labelYOffset)?0:t.labelYOffset,l=this.getResolution();s.move(o*l,a*l)}this.drawText(e.id,t,s)}else this.removeText(e.id);return r}}},calculateFeatureDx:function(e,t){if(this.featureDx=0,t){var n=t.getWidth(),i=(this.extent.left+this.extent.right)/2,r=(e.left+e.right)/2,s=Math.round((r-i)/n);this.featureDx=s*n}},drawGeometry:function(e,t,n){},drawText:function(e,t,n){},removeText:function(e){},clear:function(){},getFeatureIdFromEvent:function(e){},eraseFeatures:function(e){OpenLayers.Util.isArray(e)||(e=[e]);for(var t=0,n=e.length;t<n;++t){var i=e[t];this.eraseGeometry(i.geometry,i.id),this.removeText(i.id)}},eraseGeometry:function(e,t){},moveRoot:function(e){},getRenderLayerId:function(){return this.container.id},applyDefaultSymbolizer:function(e){var t=OpenLayers.Util.extend({},OpenLayers.Renderer.defaultSymbolizer);return e.stroke===!1&&(delete t.strokeWidth,delete t.strokeColor),e.fill===!1&&delete t.fillColor,OpenLayers.Util.extend(t,e),t},CLASS_NAME:"OpenLayers.Renderer"}),OpenLayers.Renderer.defaultSymbolizer={fillColor:"#000000",strokeColor:"#000000",strokeWidth:2,fillOpacity:1,strokeOpacity:1,pointRadius:0,labelAlign:"cm"},OpenLayers.Renderer.symbol={star:[350,75,379,161,469,161,397,215,423,301,350,250,277,301,303,215,231,161,321,161,350,75],cross:[4,0,6,0,6,4,10,4,10,6,6,6,6,10,4,10,4,6,0,6,0,4,4,4,4,0],x:[0,0,25,0,50,35,75,0,100,0,65,50,100,100,75,100,50,65,25,100,0,100,35,50,0,0],square:[0,0,0,1,1,1,1,0,0,0],triangle:[0,10,10,10,5,0,0,10]},OpenLayers.Renderer.Canvas=OpenLayers.Class(OpenLayers.Renderer,{hitDetection:!0,hitOverflow:0,canvas:null,features:null,pendingRedraw:!1,cachedSymbolBounds:{},initialize:function(e,t){OpenLayers.Renderer.prototype.initialize.apply(this,arguments),this.root=document.createElement("canvas"),this.container.appendChild(this.root),this.canvas=this.root.getContext("2d"),this._clearRectId=OpenLayers.Util.createUniqueID(),this.features={},this.hitDetection&&(this.hitCanvas=document.createElement("canvas"),this.hitContext=this.hitCanvas.getContext("2d"))},setExtent:function(){return OpenLayers.Renderer.prototype.setExtent.apply(this,arguments),!1},eraseGeometry:function(e,t){this.eraseFeatures(this.features[t][0])},supported:function(){return OpenLayers.CANVAS_SUPPORTED},setSize:function(e){this.size=e.clone();var t=this.root;if(t.style.width=e.w+"px",t.style.height=e.h+"px",t.width=e.w,t.height=e.h,this.resolution=null,this.hitDetection){var n=this.hitCanvas;n.style.width=e.w+"px",n.style.height=e.h+"px",n.width=e.w,n.height=e.h}},drawFeature:function(e,t){var n;if(e.geometry){t=this.applyDefaultSymbolizer(t||e.style);var i,r=e.geometry.getBounds();this.map.baseLayer&&this.map.baseLayer.wrapDateLine&&(i=this.map.getMaxExtent());var s=r&&r.intersectsBounds(this.extent,{worldBounds:i
});n="none"!==t.display&&!!r&&s,n?this.features[e.id]=[e,t]:delete this.features[e.id],this.pendingRedraw=!0}return this.pendingRedraw&&!this.locked&&(this.redraw(),this.pendingRedraw=!1),n},drawGeometry:function(e,t,n){var i=e.CLASS_NAME;if("OpenLayers.Geometry.Collection"!=i&&"OpenLayers.Geometry.MultiPoint"!=i&&"OpenLayers.Geometry.MultiLineString"!=i&&"OpenLayers.Geometry.MultiPolygon"!=i)switch(e.CLASS_NAME){case"OpenLayers.Geometry.Point":this.drawPoint(e,t,n);break;case"OpenLayers.Geometry.LineString":this.drawLineString(e,t,n);break;case"OpenLayers.Geometry.LinearRing":this.drawLinearRing(e,t,n);break;case"OpenLayers.Geometry.Polygon":this.drawPolygon(e,t,n)}else for(var r=this.map.baseLayer&&this.map.baseLayer.wrapDateLine&&this.map.getMaxExtent(),s=0;s<e.components.length;s++)this.calculateFeatureDx(e.components[s].getBounds(),r),this.drawGeometry(e.components[s],t,n)},drawExternalGraphic:function(e,t,n){var i=new Image,r=t.title||t.graphicTitle;r&&(i.title=r);var s=t.graphicWidth||t.graphicHeight,o=t.graphicHeight||t.graphicWidth;s=s?s:2*t.pointRadius,o=o?o:2*t.pointRadius;var a=void 0!=t.graphicXOffset?t.graphicXOffset:-(.5*s),l=void 0!=t.graphicYOffset?t.graphicYOffset:-(.5*o),u=this._clearRectId,h=t.graphicOpacity||t.fillOpacity,c=function(){if(this.features[n]&&u===this._clearRectId){var t=this.getLocalXY(e),r=t[0],c=t[1];if(!isNaN(r)&&!isNaN(c)){var p=r+a|0,d=c+l|0,f=this.canvas;f.globalAlpha=h;var y=OpenLayers.Renderer.Canvas.drawImageScaleFactor||(OpenLayers.Renderer.Canvas.drawImageScaleFactor=/android 2.1/.test(navigator.userAgent.toLowerCase())?320/window.screen.width:1);f.drawImage(i,p*y,d*y,s*y,o*y),this.hitDetection&&(this.setHitContextStyle("fill",n),this.hitContext.fillRect(p,d,s,o))}}};i.onload=OpenLayers.Function.bind(c,this),i.src=t.externalGraphic,i.complete&&(i.onload(),i.onload=null)},drawNamedSymbol:function(e,t,n){var i,r,s,o,a,l,u,h,c,p=Math.PI/180,d=OpenLayers.Renderer.symbol[t.graphicName];if(!d)throw new Error(t.graphicName+" is not a valid symbol name");if(d.length&&!(d.length<2)){var f=this.getLocalXY(e),y=f[0],m=f[1];if(!isNaN(y)&&!isNaN(m)){if(this.canvas.lineCap="round",this.canvas.lineJoin="round",this.hitDetection&&(this.hitContext.lineCap="round",this.hitContext.lineJoin="round"),t.graphicName in this.cachedSymbolBounds)l=this.cachedSymbolBounds[t.graphicName];else{for(l=new OpenLayers.Bounds,a=0;a<d.length;a+=2)l.extend(new OpenLayers.LonLat(d[a],d[a+1]));this.cachedSymbolBounds[t.graphicName]=l}if(this.canvas.save(),this.hitDetection&&this.hitContext.save(),this.canvas.translate(y,m),this.hitDetection&&this.hitContext.translate(y,m),h=p*t.rotation,isNaN(h)||(this.canvas.rotate(h),this.hitDetection&&this.hitContext.rotate(h)),u=2*t.pointRadius/Math.max(l.getWidth(),l.getHeight()),this.canvas.scale(u,u),this.hitDetection&&this.hitContext.scale(u,u),s=l.getCenterLonLat().lon,o=l.getCenterLonLat().lat,this.canvas.translate(-s,-o),this.hitDetection&&this.hitContext.translate(-s,-o),c=t.strokeWidth,t.strokeWidth=c/u,t.fill!==!1){for(this.setCanvasStyle("fill",t),this.canvas.beginPath(),a=0;a<d.length;a+=2)i=d[a],r=d[a+1],0==a&&this.canvas.moveTo(i,r),this.canvas.lineTo(i,r);if(this.canvas.closePath(),this.canvas.fill(),this.hitDetection){for(this.setHitContextStyle("fill",n,t),this.hitContext.beginPath(),a=0;a<d.length;a+=2)i=d[a],r=d[a+1],0==a&&this.canvas.moveTo(i,r),this.hitContext.lineTo(i,r);this.hitContext.closePath(),this.hitContext.fill()}}if(t.stroke!==!1){for(this.setCanvasStyle("stroke",t),this.canvas.beginPath(),a=0;a<d.length;a+=2)i=d[a],r=d[a+1],0==a&&this.canvas.moveTo(i,r),this.canvas.lineTo(i,r);if(this.canvas.closePath(),this.canvas.stroke(),this.hitDetection){for(this.setHitContextStyle("stroke",n,t,u),this.hitContext.beginPath(),a=0;a<d.length;a+=2)i=d[a],r=d[a+1],0==a&&this.hitContext.moveTo(i,r),this.hitContext.lineTo(i,r);this.hitContext.closePath(),this.hitContext.stroke()}}t.strokeWidth=c,this.canvas.restore(),this.hitDetection&&this.hitContext.restore(),this.setCanvasStyle("reset")}}},setCanvasStyle:function(e,t){"fill"===e?(this.canvas.globalAlpha=t.fillOpacity,this.canvas.fillStyle=t.fillColor):"stroke"===e?(this.canvas.globalAlpha=t.strokeOpacity,this.canvas.strokeStyle=t.strokeColor,this.canvas.lineWidth=t.strokeWidth):(this.canvas.globalAlpha=0,this.canvas.lineWidth=1)},featureIdToHex:function(e){var t=Number(e.split("_").pop())+1;t>=16777216&&(this.hitOverflow=t-16777215,t=t%16777216+1);var n="000000"+t.toString(16),i=n.length;return n="#"+n.substring(i-6,i)},setHitContextStyle:function(e,t,n,i){var r=this.featureIdToHex(t);"fill"==e?(this.hitContext.globalAlpha=1,this.hitContext.fillStyle=r):"stroke"==e?(this.hitContext.globalAlpha=1,this.hitContext.strokeStyle=r,"undefined"==typeof i?this.hitContext.lineWidth=n.strokeWidth+2:isNaN(i)||(this.hitContext.lineWidth=n.strokeWidth+2/i)):(this.hitContext.globalAlpha=0,this.hitContext.lineWidth=1)},drawPoint:function(e,t,n){if(t.graphic!==!1)if(t.externalGraphic)this.drawExternalGraphic(e,t,n);else if(t.graphicName&&"circle"!=t.graphicName)this.drawNamedSymbol(e,t,n);else{var i=this.getLocalXY(e),r=i[0],s=i[1];if(!isNaN(r)&&!isNaN(s)){var o=2*Math.PI,a=t.pointRadius;t.fill!==!1&&(this.setCanvasStyle("fill",t),this.canvas.beginPath(),this.canvas.arc(r,s,a,0,o,!0),this.canvas.fill(),this.hitDetection&&(this.setHitContextStyle("fill",n,t),this.hitContext.beginPath(),this.hitContext.arc(r,s,a,0,o,!0),this.hitContext.fill())),t.stroke!==!1&&(this.setCanvasStyle("stroke",t),this.canvas.beginPath(),this.canvas.arc(r,s,a,0,o,!0),this.canvas.stroke(),this.hitDetection&&(this.setHitContextStyle("stroke",n,t),this.hitContext.beginPath(),this.hitContext.arc(r,s,a,0,o,!0),this.hitContext.stroke()),this.setCanvasStyle("reset"))}}},drawLineString:function(e,t,n){t=OpenLayers.Util.applyDefaults({fill:!1},t),this.drawLinearRing(e,t,n)},drawLinearRing:function(e,t,n){t.fill!==!1&&(this.setCanvasStyle("fill",t),this.renderPath(this.canvas,e,t,n,"fill"),this.hitDetection&&(this.setHitContextStyle("fill",n,t),this.renderPath(this.hitContext,e,t,n,"fill"))),t.stroke!==!1&&(this.setCanvasStyle("stroke",t),this.renderPath(this.canvas,e,t,n,"stroke"),this.hitDetection&&(this.setHitContextStyle("stroke",n,t),this.renderPath(this.hitContext,e,t,n,"stroke"))),this.setCanvasStyle("reset")},renderPath:function(e,t,n,i,r){var s=t.components,o=s.length;e.beginPath();var a=this.getLocalXY(s[0]),l=a[0],u=a[1];if(!isNaN(l)&&!isNaN(u)){e.moveTo(a[0],a[1]);for(var h=1;h<o;++h){var c=this.getLocalXY(s[h]);e.lineTo(c[0],c[1])}"fill"===r?e.fill():e.stroke()}},drawPolygon:function(e,t,n){var i=e.components,r=i.length;this.drawLinearRing(i[0],t,n);for(var s=1;s<r;++s)this.canvas.globalCompositeOperation="destination-out",this.hitDetection&&(this.hitContext.globalCompositeOperation="destination-out"),this.drawLinearRing(i[s],OpenLayers.Util.applyDefaults({stroke:!1,fillOpacity:1},t),n),this.canvas.globalCompositeOperation="source-over",this.hitDetection&&(this.hitContext.globalCompositeOperation="source-over"),this.drawLinearRing(i[s],OpenLayers.Util.applyDefaults({fill:!1},t),n)},drawText:function(e,t){var n=this.getLocalXY(e);this.setCanvasStyle("reset"),this.canvas.fillStyle=t.fontColor,this.canvas.globalAlpha=t.fontOpacity||1;var i=[t.fontStyle?t.fontStyle:"normal","normal",t.fontWeight?t.fontWeight:"normal",t.fontSize?t.fontSize:"1em",t.fontFamily?t.fontFamily:"sans-serif"].join(" "),r=t.label.split("\n"),s=r.length;if(this.canvas.fillText){this.canvas.font=i,this.canvas.textAlign=OpenLayers.Renderer.Canvas.LABEL_ALIGN[t.labelAlign[0]]||"center",this.canvas.textBaseline=OpenLayers.Renderer.Canvas.LABEL_ALIGN[t.labelAlign[1]]||"middle";var o=OpenLayers.Renderer.Canvas.LABEL_FACTOR[t.labelAlign[1]];null==o&&(o=-.5);var a=this.canvas.measureText("Mg").height||this.canvas.measureText("xx").width;n[1]+=a*o*(s-1);for(var l=0;l<s;l++)t.labelOutlineWidth&&(this.canvas.save(),this.canvas.globalAlpha=t.labelOutlineOpacity||t.fontOpacity||1,this.canvas.strokeStyle=t.labelOutlineColor,this.canvas.lineWidth=t.labelOutlineWidth,this.canvas.strokeText(r[l],n[0],n[1]+a*l+1),this.canvas.restore()),this.canvas.fillText(r[l],n[0],n[1]+a*l)}else if(this.canvas.mozDrawText){this.canvas.mozTextStyle=i;var u=OpenLayers.Renderer.Canvas.LABEL_FACTOR[t.labelAlign[0]];null==u&&(u=-.5);var o=OpenLayers.Renderer.Canvas.LABEL_FACTOR[t.labelAlign[1]];null==o&&(o=-.5);var a=this.canvas.mozMeasureText("xx");n[1]+=a*(1+o*s);for(var l=0;l<s;l++){var h=n[0]+u*this.canvas.mozMeasureText(r[l]),c=n[1]+l*a;this.canvas.translate(h,c),this.canvas.mozDrawText(r[l]),this.canvas.translate(-h,-c)}}this.setCanvasStyle("reset")},getLocalXY:function(e){var t=this.getResolution(),n=this.extent,i=(e.x-this.featureDx)/t+-n.left/t,r=n.top/t-e.y/t;return[i,r]},clear:function(){this.clearCanvas(),this.features={}},clearCanvas:function(){var e=this.root.height,t=this.root.width;this.canvas.clearRect(0,0,t,e),this._clearRectId=OpenLayers.Util.createUniqueID(),this.hitDetection&&this.hitContext.clearRect(0,0,t,e)},getFeatureIdFromEvent:function(e){var t,n;if(this.hitDetection&&"none"!==this.root.style.display&&!this.map.dragging){var i=e.xy,r=0|i.x,s=0|i.y,o=this.hitContext.getImageData(r,s,1,1).data;if(255===o[3]){var a=o[2]+256*(o[1]+256*o[0]);if(a){t="OpenLayers_Feature_Vector_"+(a-1+this.hitOverflow);try{n=this.features[t][0]}catch(e){}}}}return n},eraseFeatures:function(e){OpenLayers.Util.isArray(e)||(e=[e]);for(var t=0;t<e.length;++t)delete this.features[e[t].id];this.redraw()},redraw:function(){if(!this.locked){this.clearCanvas();var e,t,n,i=[],r=this.map.baseLayer&&this.map.baseLayer.wrapDateLine&&this.map.getMaxExtent();for(var s in this.features)this.features.hasOwnProperty(s)&&(e=this.features[s][0],t=e.geometry,this.calculateFeatureDx(t.getBounds(),r),n=this.features[s][1],this.drawGeometry(t,n,e.id),n.label&&i.push([e,n]));for(var o,a=0,l=i.length;a<l;++a)o=i[a],this.drawText(o[0].geometry.getCentroid(),o[1])}},CLASS_NAME:"OpenLayers.Renderer.Canvas"}),OpenLayers.Renderer.Canvas.LABEL_ALIGN={l:"left",r:"right",t:"top",b:"bottom"},OpenLayers.Renderer.Canvas.LABEL_FACTOR={l:0,r:-1,t:0,b:-1},OpenLayers.Renderer.Canvas.drawImageScaleFactor=null,OpenLayers.ElementsIndexer=OpenLayers.Class({maxZIndex:null,order:null,indices:null,compare:null,initialize:function(e){this.compare=e?OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER_Y_ORDER:OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER_DRAWING_ORDER,this.clear()},insert:function(e){this.exists(e)&&this.remove(e);var t=e.id;this.determineZIndex(e);for(var n,i=-1,r=this.order.length;r-i>1;){n=parseInt((i+r)/2);var s=this.compare(this,e,OpenLayers.Util.getElement(this.order[n]));s>0?i=n:r=n}return this.order.splice(r,0,t),this.indices[t]=this.getZIndex(e),this.getNextElement(r)},remove:function(e){var t=e.id,n=OpenLayers.Util.indexOf(this.order,t);if(n>=0)if(this.order.splice(n,1),delete this.indices[t],this.order.length>0){var i=this.order[this.order.length-1];this.maxZIndex=this.indices[i]}else this.maxZIndex=0},clear:function(){this.order=[],this.indices={},this.maxZIndex=0},exists:function(e){return null!=this.indices[e.id]},getZIndex:function(e){return e._style.graphicZIndex},determineZIndex:function(e){var t=e._style.graphicZIndex;null==t?(t=this.maxZIndex,e._style.graphicZIndex=t):t>this.maxZIndex&&(this.maxZIndex=t)},getNextElement:function(e){for(var t=e+1,n=void 0;t<this.order.length&&void 0==n;t++)n=OpenLayers.Util.getElement(this.order[t]);return n||null},CLASS_NAME:"OpenLayers.ElementsIndexer"}),OpenLayers.ElementsIndexer.IndexingMethods={Z_ORDER:function(e,t,n){var i=e.getZIndex(t),r=0;if(n){var s=e.getZIndex(n);r=i-s}return r},Z_ORDER_DRAWING_ORDER:function(e,t,n){var i=OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER(e,t,n);return n&&0==i&&(i=1),i},Z_ORDER_Y_ORDER:function(e,t,n){var i=OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER(e,t,n);if(n&&0===i){var r=n._boundsBottom-t._boundsBottom;i=0===r?1:r}return i}},OpenLayers.Renderer.Elements=OpenLayers.Class(OpenLayers.Renderer,{rendererRoot:null,root:null,vectorRoot:null,textRoot:null,xmlns:null,xOffset:0,indexer:null,BACKGROUND_ID_SUFFIX:"_background",LABEL_ID_SUFFIX:"_label",LABEL_OUTLINE_SUFFIX:"_outline",initialize:function(e,t){OpenLayers.Renderer.prototype.initialize.apply(this,arguments),this.rendererRoot=this.createRenderRoot(),this.root=this.createRoot("_root"),this.vectorRoot=this.createRoot("_vroot"),this.textRoot=this.createRoot("_troot"),this.root.appendChild(this.vectorRoot),this.root.appendChild(this.textRoot),this.rendererRoot.appendChild(this.root),this.container.appendChild(this.rendererRoot),t&&(t.zIndexing||t.yOrdering)&&(this.indexer=new OpenLayers.ElementsIndexer(t.yOrdering))},destroy:function(){this.clear(),this.rendererRoot=null,this.root=null,this.xmlns=null,OpenLayers.Renderer.prototype.destroy.apply(this,arguments)},clear:function(){var e,t=this.vectorRoot;if(t)for(;e=t.firstChild;)t.removeChild(e);if(t=this.textRoot)for(;e=t.firstChild;)t.removeChild(e);this.indexer&&this.indexer.clear()},setExtent:function(e,t){var n=OpenLayers.Renderer.prototype.setExtent.apply(this,arguments),i=this.getResolution();if(this.map.baseLayer&&this.map.baseLayer.wrapDateLine){var r,s=e.getWidth()/this.map.getExtent().getWidth(),e=e.scale(1/s),o=this.map.getMaxExtent();o.right>e.left&&o.right<e.right?r=!0:o.left>e.left&&o.left<e.right&&(r=!1),(r!==this.rightOfDateLine||t)&&(n=!1,this.xOffset=r===!0?o.getWidth()/i:0),this.rightOfDateLine=r}return n},getNodeType:function(e,t){},drawGeometry:function(e,t,n){var i=e.CLASS_NAME,r=!0;if("OpenLayers.Geometry.Collection"==i||"OpenLayers.Geometry.MultiPoint"==i||"OpenLayers.Geometry.MultiLineString"==i||"OpenLayers.Geometry.MultiPolygon"==i){for(var s=0,o=e.components.length;s<o;s++)r=this.drawGeometry(e.components[s],t,n)&&r;return r}r=!1;var a=!1;if("none"!=t.display&&(t.backgroundGraphic?this.redrawBackgroundNode(e.id,e,t,n):a=!0,r=this.redrawNode(e.id,e,t,n)),0==r){var l=document.getElementById(e.id);l&&(l._style.backgroundGraphic&&(a=!0),l.parentNode.removeChild(l))}if(a){var l=document.getElementById(e.id+this.BACKGROUND_ID_SUFFIX);l&&l.parentNode.removeChild(l)}return r},redrawNode:function(e,t,n,i){n=this.applyDefaultSymbolizer(n);var r=this.nodeFactory(e,this.getNodeType(t,n));r._featureId=i,r._boundsBottom=t.getBounds().bottom,r._geometryClass=t.CLASS_NAME,r._style=n;var s=this.drawGeometryNode(r,t,n);if(s===!1)return!1;if(r=s.node,this.indexer){var o=this.indexer.insert(r);o?this.vectorRoot.insertBefore(r,o):this.vectorRoot.appendChild(r)}else r.parentNode!==this.vectorRoot&&this.vectorRoot.appendChild(r);return this.postDraw(r),s.complete},redrawBackgroundNode:function(e,t,n,i){var r=OpenLayers.Util.extend({},n);return r.externalGraphic=r.backgroundGraphic,r.graphicXOffset=r.backgroundXOffset,r.graphicYOffset=r.backgroundYOffset,r.graphicZIndex=r.backgroundGraphicZIndex,r.graphicWidth=r.backgroundWidth||r.graphicWidth,r.graphicHeight=r.backgroundHeight||r.graphicHeight,r.backgroundGraphic=null,r.backgroundXOffset=null,r.backgroundYOffset=null,r.backgroundGraphicZIndex=null,this.redrawNode(e+this.BACKGROUND_ID_SUFFIX,t,r,null)},drawGeometryNode:function(e,t,n){n=n||e._style;var i,r={isFilled:void 0===n.fill||n.fill,isStroked:void 0===n.stroke?!!n.strokeWidth:n.stroke};switch(t.CLASS_NAME){case"OpenLayers.Geometry.Point":n.graphic===!1&&(r.isFilled=!1,r.isStroked=!1),i=this.drawPoint(e,t);break;case"OpenLayers.Geometry.LineString":r.isFilled=!1,i=this.drawLineString(e,t);break;case"OpenLayers.Geometry.LinearRing":i=this.drawLinearRing(e,t);break;case"OpenLayers.Geometry.Polygon":i=this.drawPolygon(e,t);break;case"OpenLayers.Geometry.Rectangle":i=this.drawRectangle(e,t)}return e._options=r,0!=i&&{node:this.setStyle(e,n,r,t),complete:i}},postDraw:function(e){},drawPoint:function(e,t){},drawLineString:function(e,t){},drawLinearRing:function(e,t){},drawPolygon:function(e,t){},drawRectangle:function(e,t){},drawCircle:function(e,t){},removeText:function(e){var t=document.getElementById(e+this.LABEL_ID_SUFFIX);t&&this.textRoot.removeChild(t);var n=document.getElementById(e+this.LABEL_OUTLINE_SUFFIX);n&&this.textRoot.removeChild(n)},getFeatureIdFromEvent:function(e){var t=e.target,n=t&&t.correspondingUseElement,i=n?n:t||e.srcElement;return i._featureId},eraseGeometry:function(e,t){if("OpenLayers.Geometry.MultiPoint"==e.CLASS_NAME||"OpenLayers.Geometry.MultiLineString"==e.CLASS_NAME||"OpenLayers.Geometry.MultiPolygon"==e.CLASS_NAME||"OpenLayers.Geometry.Collection"==e.CLASS_NAME)for(var n=0,i=e.components.length;n<i;n++)this.eraseGeometry(e.components[n],t);else{var r=OpenLayers.Util.getElement(e.id);if(r&&r.parentNode&&(r.geometry&&(r.geometry.destroy(),r.geometry=null),r.parentNode.removeChild(r),this.indexer&&this.indexer.remove(r),r._style.backgroundGraphic)){var s=e.id+this.BACKGROUND_ID_SUFFIX,o=OpenLayers.Util.getElement(s);o&&o.parentNode&&o.parentNode.removeChild(o)}}},nodeFactory:function(e,t){var n=OpenLayers.Util.getElement(e);return n?this.nodeTypeCompare(n,t)||(n.parentNode.removeChild(n),n=this.nodeFactory(e,t)):n=this.createNode(t,e),n},nodeTypeCompare:function(e,t){},createNode:function(e,t){},moveRoot:function(e){var t=this.root;e.root.parentNode==this.rendererRoot&&(t=e.root),t.parentNode.removeChild(t),e.rendererRoot.appendChild(t)},getRenderLayerId:function(){return this.root.parentNode.parentNode.id},isComplexSymbol:function(e){return"circle"!=e&&!!e},CLASS_NAME:"OpenLayers.Renderer.Elements"}),OpenLayers.Renderer.SVG=OpenLayers.Class(OpenLayers.Renderer.Elements,{xmlns:"http://www.w3.org/2000/svg",xlinkns:"http://www.w3.org/1999/xlink",MAX_PIXEL:15e3,translationParameters:null,symbolMetrics:null,initialize:function(e){this.supported()&&(OpenLayers.Renderer.Elements.prototype.initialize.apply(this,arguments),this.translationParameters={x:0,y:0},this.symbolMetrics={})},supported:function(){var e="http://www.w3.org/TR/SVG11/feature#";return document.implementation&&(document.implementation.hasFeature("org.w3c.svg","1.0")||document.implementation.hasFeature(e+"SVG","1.1")||document.implementation.hasFeature(e+"BasicStructure","1.1"))},inValidRange:function(e,t,n){var i=e+(n?0:this.translationParameters.x),r=t+(n?0:this.translationParameters.y);return i>=-this.MAX_PIXEL&&i<=this.MAX_PIXEL&&r>=-this.MAX_PIXEL&&r<=this.MAX_PIXEL},setExtent:function(e,t){var n=OpenLayers.Renderer.Elements.prototype.setExtent.apply(this,arguments),i=this.getResolution(),r=-e.left/i,s=e.top/i;if(t){this.left=r,this.top=s;var o="0 0 "+this.size.w+" "+this.size.h;return this.rendererRoot.setAttributeNS(null,"viewBox",o),this.translate(this.xOffset,0),!0}var a=this.translate(r-this.left+this.xOffset,s-this.top);return a||this.setExtent(e,!0),n&&a},translate:function(e,t){if(this.inValidRange(e,t,!0)){var n="";return(e||t)&&(n="translate("+e+","+t+")"),this.root.setAttributeNS(null,"transform",n),this.translationParameters={x:e,y:t},!0}return!1},setSize:function(e){OpenLayers.Renderer.prototype.setSize.apply(this,arguments),this.rendererRoot.setAttributeNS(null,"width",this.size.w),this.rendererRoot.setAttributeNS(null,"height",this.size.h)},getNodeType:function(e,t){var n=null;switch(e.CLASS_NAME){case"OpenLayers.Geometry.Point":n=t.externalGraphic?"image":this.isComplexSymbol(t.graphicName)?"svg":"circle";break;case"OpenLayers.Geometry.Rectangle":n="rect";break;case"OpenLayers.Geometry.LineString":n="polyline";break;case"OpenLayers.Geometry.LinearRing":n="polygon";break;case"OpenLayers.Geometry.Polygon":case"OpenLayers.Geometry.Curve":n="path"}return n},setStyle:function(e,t,n){t=t||e._style,n=n||e._options;var i=t.title||t.graphicTitle;if(i){e.setAttributeNS(null,"title",i);var r=e.getElementsByTagName("title");if(r.length>0)r[0].firstChild.textContent=i;else{var s=this.nodeFactory(null,"title");s.textContent=i,e.appendChild(s)}}var o,a=parseFloat(e.getAttributeNS(null,"r")),l=1;if("OpenLayers.Geometry.Point"==e._geometryClass&&a){if(e.style.visibility="",t.graphic===!1)e.style.visibility="hidden";else if(t.externalGraphic){o=this.getPosition(e),t.graphicWidth&&t.graphicHeight&&e.setAttributeNS(null,"preserveAspectRatio","none");var u=t.graphicWidth||t.graphicHeight,h=t.graphicHeight||t.graphicWidth;u=u?u:2*t.pointRadius,h=h?h:2*t.pointRadius;var c=void 0!=t.graphicXOffset?t.graphicXOffset:-(.5*u),p=void 0!=t.graphicYOffset?t.graphicYOffset:-(.5*h),d=t.graphicOpacity||t.fillOpacity;e.setAttributeNS(null,"x",(o.x+c).toFixed()),e.setAttributeNS(null,"y",(o.y+p).toFixed()),e.setAttributeNS(null,"width",u),e.setAttributeNS(null,"height",h),e.setAttributeNS(this.xlinkns,"xlink:href",t.externalGraphic),e.setAttributeNS(null,"style","opacity: "+d),e.onclick=OpenLayers.Event.preventDefault}else if(this.isComplexSymbol(t.graphicName)){var f=3*t.pointRadius,y=2*f,m=this.importSymbol(t.graphicName);o=this.getPosition(e),l=3*this.symbolMetrics[m.id][0]/y;var g=e.parentNode,v=e.nextSibling;g&&g.removeChild(e),e.firstChild&&e.removeChild(e.firstChild),e.appendChild(m.firstChild.cloneNode(!0)),e.setAttributeNS(null,"viewBox",m.getAttributeNS(null,"viewBox")),e.setAttributeNS(null,"width",y),e.setAttributeNS(null,"height",y),e.setAttributeNS(null,"x",o.x-f),e.setAttributeNS(null,"y",o.y-f),v?g.insertBefore(e,v):g&&g.appendChild(e)}else e.setAttributeNS(null,"r",t.pointRadius);var L=t.rotation;if((void 0!==L||void 0!==e._rotation)&&o)if(e._rotation=L,L|=0,"svg"!==e.nodeName)e.setAttributeNS(null,"transform","rotate("+L+" "+o.x+" "+o.y+")");else{var b=this.symbolMetrics[m.id];e.firstChild.setAttributeNS(null,"transform","rotate("+L+" "+b[1]+" "+b[2]+")")}}return n.isFilled?(e.setAttributeNS(null,"fill",t.fillColor),e.setAttributeNS(null,"fill-opacity",t.fillOpacity)):e.setAttributeNS(null,"fill","none"),n.isStroked?(e.setAttributeNS(null,"stroke",t.strokeColor),e.setAttributeNS(null,"stroke-opacity",t.strokeOpacity),e.setAttributeNS(null,"stroke-width",t.strokeWidth*l),e.setAttributeNS(null,"stroke-linecap",t.strokeLinecap||"round"),e.setAttributeNS(null,"stroke-linejoin","round"),t.strokeDashstyle&&e.setAttributeNS(null,"stroke-dasharray",this.dashStyle(t,l))):e.setAttributeNS(null,"stroke","none"),t.pointerEvents&&e.setAttributeNS(null,"pointer-events",t.pointerEvents),null!=t.cursor&&e.setAttributeNS(null,"cursor",t.cursor),e},dashStyle:function(e,t){var n=e.strokeWidth*t,i=e.strokeDashstyle;switch(i){case"solid":return"none";case"dot":return[1,4*n].join();case"dash":return[4*n,4*n].join();case"dashdot":return[4*n,4*n,1,4*n].join();case"longdash":return[8*n,4*n].join();case"longdashdot":return[8*n,4*n,1,4*n].join();default:return OpenLayers.String.trim(i).replace(/\s+/g,",")}},createNode:function(e,t){var n=document.createElementNS(this.xmlns,e);return t&&n.setAttributeNS(null,"id",t),n},nodeTypeCompare:function(e,t){return t==e.nodeName},createRenderRoot:function(){var e=this.nodeFactory(this.container.id+"_svgRoot","svg");return e.style.display="block",e},createRoot:function(e){return this.nodeFactory(this.container.id+e,"g")},createDefs:function(){var e=this.nodeFactory(this.container.id+"_defs","defs");return this.rendererRoot.appendChild(e),e},drawPoint:function(e,t){return this.drawCircle(e,t,1)},drawCircle:function(e,t,n){var i=this.getResolution(),r=(t.x-this.featureDx)/i+this.left,s=this.top-t.y/i;return!!this.inValidRange(r,s)&&(e.setAttributeNS(null,"cx",r),e.setAttributeNS(null,"cy",s),e.setAttributeNS(null,"r",n),e)},drawLineString:function(e,t){var n=this.getComponentsString(t.components);return!!n.path&&(e.setAttributeNS(null,"points",n.path),n.complete?e:null)},drawLinearRing:function(e,t){var n=this.getComponentsString(t.components);return!!n.path&&(e.setAttributeNS(null,"points",n.path),n.complete?e:null)},drawPolygon:function(e,t){for(var n,i,r="",s=!0,o=!0,a=0,l=t.components.length;a<l;a++)r+=" M",n=this.getComponentsString(t.components[a].components," "),i=n.path,i?(r+=" "+i,o=n.complete&&o):s=!1;return r+=" z",!!s&&(e.setAttributeNS(null,"d",r),e.setAttributeNS(null,"fill-rule","evenodd"),o?e:null)},drawRectangle:function(e,t){var n=this.getResolution(),i=(t.x-this.featureDx)/n+this.left,r=this.top-t.y/n;return!!this.inValidRange(i,r)&&(e.setAttributeNS(null,"x",i),e.setAttributeNS(null,"y",r),e.setAttributeNS(null,"width",t.width/n),e.setAttributeNS(null,"height",t.height/n),e)},drawText:function(e,t,n){var i=!!t.labelOutlineWidth;if(i){var r=OpenLayers.Util.extend({},t);r.fontColor=r.labelOutlineColor,r.fontStrokeColor=r.labelOutlineColor,r.fontStrokeWidth=t.labelOutlineWidth,t.labelOutlineOpacity&&(r.fontOpacity=t.labelOutlineOpacity),delete r.labelOutlineWidth,this.drawText(e,r,n)}var s=this.getResolution(),o=(n.x-this.featureDx)/s+this.left,a=n.y/s-this.top,l=i?this.LABEL_OUTLINE_SUFFIX:this.LABEL_ID_SUFFIX,u=this.nodeFactory(e+l,"text");u.setAttributeNS(null,"x",o),u.setAttributeNS(null,"y",-a),t.fontColor&&u.setAttributeNS(null,"fill",t.fontColor),t.fontStrokeColor&&u.setAttributeNS(null,"stroke",t.fontStrokeColor),t.fontStrokeWidth&&u.setAttributeNS(null,"stroke-width",t.fontStrokeWidth),t.fontOpacity&&u.setAttributeNS(null,"opacity",t.fontOpacity),t.fontFamily&&u.setAttributeNS(null,"font-family",t.fontFamily),t.fontSize&&u.setAttributeNS(null,"font-size",t.fontSize),t.fontWeight&&u.setAttributeNS(null,"font-weight",t.fontWeight),t.fontStyle&&u.setAttributeNS(null,"font-style",t.fontStyle),t.labelSelect===!0?(u.setAttributeNS(null,"pointer-events","visible"),u._featureId=e):u.setAttributeNS(null,"pointer-events","none");var h=t.labelAlign||OpenLayers.Renderer.defaultSymbolizer.labelAlign;u.setAttributeNS(null,"text-anchor",OpenLayers.Renderer.SVG.LABEL_ALIGN[h[0]]||"middle"),OpenLayers.IS_GECKO===!0&&u.setAttributeNS(null,"dominant-baseline",OpenLayers.Renderer.SVG.LABEL_ALIGN[h[1]]||"central");for(var c=t.label.split("\n"),p=c.length;u.childNodes.length>p;)u.removeChild(u.lastChild);for(var d=0;d<p;d++){var f=this.nodeFactory(e+l+"_tspan_"+d,"tspan");if(t.labelSelect===!0&&(f._featureId=e,f._geometry=n,f._geometryClass=n.CLASS_NAME),OpenLayers.IS_GECKO===!1&&f.setAttributeNS(null,"baseline-shift",OpenLayers.Renderer.SVG.LABEL_VSHIFT[h[1]]||"-35%"),f.setAttribute("x",o),0==d){var y=OpenLayers.Renderer.SVG.LABEL_VFACTOR[h[1]];null==y&&(y=-.5),f.setAttribute("dy",y*(p-1)+"em")}else f.setAttribute("dy","1em");f.textContent=""===c[d]?" ":c[d],f.parentNode||u.appendChild(f)}u.parentNode||this.textRoot.appendChild(u)},getComponentsString:function(e,t){for(var n,i,r=[],s=!0,o=e.length,a=[],l=0;l<o;l++)i=e[l],r.push(i),n=this.getShortString(i),n?a.push(n):(l>0&&this.getShortString(e[l-1])&&a.push(this.clipLine(e[l],e[l-1])),l<o-1&&this.getShortString(e[l+1])&&a.push(this.clipLine(e[l],e[l+1])),s=!1);return{path:a.join(t||","),complete:s}},clipLine:function(e,t){if(t.equals(e))return"";var n,i=this.getResolution(),r=this.MAX_PIXEL-this.translationParameters.x,s=this.MAX_PIXEL-this.translationParameters.y,o=(t.x-this.featureDx)/i+this.left,a=this.top-t.y/i,l=(e.x-this.featureDx)/i+this.left,u=this.top-e.y/i;return(l<-r||l>r)&&(n=(u-a)/(l-o),l=l<0?-r:r,u=a+(l-o)*n),(u<-s||u>s)&&(n=(l-o)/(u-a),u=u<0?-s:s,l=o+(u-a)*n),l+","+u},getShortString:function(e){var t=this.getResolution(),n=(e.x-this.featureDx)/t+this.left,i=this.top-e.y/t;return!!this.inValidRange(n,i)&&n+","+i},getPosition:function(e){return{x:parseFloat(e.getAttributeNS(null,"cx")),y:parseFloat(e.getAttributeNS(null,"cy"))}},importSymbol:function(e){this.defs||(this.defs=this.createDefs());var t=this.container.id+"-"+e,n=document.getElementById(t);if(null!=n)return n;var i=OpenLayers.Renderer.symbol[e];if(!i)throw new Error(e+" is not a valid symbol name");var r=this.nodeFactory(t,"symbol"),s=this.nodeFactory(null,"polygon");r.appendChild(s);for(var o,a,l=new OpenLayers.Bounds(Number.MAX_VALUE,Number.MAX_VALUE,0,0),u=[],h=0;h<i.length;h+=2)o=i[h],a=i[h+1],l.left=Math.min(l.left,o),l.bottom=Math.min(l.bottom,a),l.right=Math.max(l.right,o),l.top=Math.max(l.top,a),u.push(o,",",a);s.setAttributeNS(null,"points",u.join(" "));var c=l.getWidth(),p=l.getHeight(),d=[l.left-c,l.bottom-p,3*c,3*p];return r.setAttributeNS(null,"viewBox",d.join(" ")),this.symbolMetrics[t]=[Math.max(c,p),l.getCenterLonLat().lon,l.getCenterLonLat().lat],this.defs.appendChild(r),r},getFeatureIdFromEvent:function(e){var t=OpenLayers.Renderer.Elements.prototype.getFeatureIdFromEvent.apply(this,arguments);if(!t){var n=e.target;t=n.parentNode&&n!=this.rendererRoot?n.parentNode._featureId:void 0}return t},CLASS_NAME:"OpenLayers.Renderer.SVG"}),OpenLayers.Renderer.SVG.LABEL_ALIGN={l:"start",r:"end",b:"bottom",t:"hanging"},OpenLayers.Renderer.SVG.LABEL_VSHIFT={t:"-70%",b:"0"},OpenLayers.Renderer.SVG.LABEL_VFACTOR={t:0,b:-1},OpenLayers.Renderer.SVG.preventDefault=function(e){OpenLayers.Event.preventDefault(e)},OpenLayers.Popup=OpenLayers.Class({events:null,id:"",lonlat:null,div:null,contentSize:null,size:null,contentHTML:null,backgroundColor:"",opacity:"",border:"",contentDiv:null,groupDiv:null,closeDiv:null,autoSize:!1,minSize:null,maxSize:null,displayClass:"olPopup",contentDisplayClass:"olPopupContent",padding:0,disableFirefoxOverflowHack:!1,fixPadding:function(){"number"==typeof this.padding&&(this.padding=new OpenLayers.Bounds(this.padding,this.padding,this.padding,this.padding))},panMapIfOutOfView:!1,keepInMap:!1,closeOnMove:!1,map:null,initialize:function(e,t,n,i,r,s){null==e&&(e=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")),this.id=e,this.lonlat=t,this.contentSize=null!=n?n:new OpenLayers.Size(OpenLayers.Popup.WIDTH,OpenLayers.Popup.HEIGHT),null!=i&&(this.contentHTML=i),this.backgroundColor=OpenLayers.Popup.COLOR,this.opacity=OpenLayers.Popup.OPACITY,this.border=OpenLayers.Popup.BORDER,this.div=OpenLayers.Util.createDiv(this.id,null,null,null,null,null,"hidden"),this.div.className=this.displayClass;var o=this.id+"_GroupDiv";this.groupDiv=OpenLayers.Util.createDiv(o,null,null,null,"relative",null,"hidden");var e=this.div.id+"_contentDiv";this.contentDiv=OpenLayers.Util.createDiv(e,null,this.contentSize.clone(),null,"relative"),this.contentDiv.className=this.contentDisplayClass,this.groupDiv.appendChild(this.contentDiv),this.div.appendChild(this.groupDiv),r&&this.addCloseBox(s),this.registerEvents()},destroy:function(){this.id=null,this.lonlat=null,this.size=null,this.contentHTML=null,this.backgroundColor=null,this.opacity=null,this.border=null,this.closeOnMove&&this.map&&this.map.events.unregister("movestart",this,this.hide),this.events.destroy(),this.events=null,this.closeDiv&&(OpenLayers.Event.stopObservingElement(this.closeDiv),this.groupDiv.removeChild(this.closeDiv)),this.closeDiv=null,this.div.removeChild(this.groupDiv),this.groupDiv=null,null!=this.map&&this.map.removePopup(this),this.map=null,this.div=null,this.autoSize=null,this.minSize=null,this.maxSize=null,this.padding=null,this.panMapIfOutOfView=null},draw:function(e){return null==e&&null!=this.lonlat&&null!=this.map&&(e=this.map.getLayerPxFromLonLat(this.lonlat)),this.closeOnMove&&this.map.events.register("movestart",this,this.hide),this.disableFirefoxOverflowHack||"firefox"!=OpenLayers.BROWSER_NAME||(this.map.events.register("movestart",this,function(){var e=document.defaultView.getComputedStyle(this.contentDiv,null),t=e.getPropertyValue("overflow");"hidden"!=t&&(this.contentDiv._oldOverflow=t,this.contentDiv.style.overflow="hidden")}),this.map.events.register("moveend",this,function(){var e=this.contentDiv._oldOverflow;e&&(this.contentDiv.style.overflow=e,this.contentDiv._oldOverflow=null)})),this.moveTo(e),this.autoSize||this.size||this.setSize(this.contentSize),this.setBackgroundColor(),this.setOpacity(),this.setBorder(),this.setContentHTML(),this.panMapIfOutOfView&&this.panIntoView(),this.div},updatePosition:function(){if(this.lonlat&&this.map){var e=this.map.getLayerPxFromLonLat(this.lonlat);e&&this.moveTo(e)}},moveTo:function(e){null!=e&&null!=this.div&&(this.div.style.left=e.x+"px",this.div.style.top=e.y+"px")},visible:function(){return OpenLayers.Element.visible(this.div)},toggle:function(){this.visible()?this.hide():this.show()},show:function(){this.div.style.display="",this.panMapIfOutOfView&&this.panIntoView();
},hide:function(){this.div.style.display="none"},setSize:function(e){this.size=e.clone();var t=this.getContentDivPadding(),n=t.left+t.right,i=t.top+t.bottom;if(this.fixPadding(),n+=this.padding.left+this.padding.right,i+=this.padding.top+this.padding.bottom,this.closeDiv){var r=parseInt(this.closeDiv.style.width);n+=r+t.right}this.size.w+=n,this.size.h+=i,"msie"==OpenLayers.BROWSER_NAME&&(this.contentSize.w+=t.left+t.right,this.contentSize.h+=t.bottom+t.top),null!=this.div&&(this.div.style.width=this.size.w+"px",this.div.style.height=this.size.h+"px"),null!=this.contentDiv&&(this.contentDiv.style.width=e.w+"px",this.contentDiv.style.height=e.h+"px")},updateSize:function(){var e="<div class='"+this.contentDisplayClass+"'>"+this.contentDiv.innerHTML+"</div>",t=this.map?this.map.div:document.body,n=OpenLayers.Util.getRenderedDimensions(e,null,{displayClass:this.displayClass,containerElement:t}),i=this.getSafeContentSize(n),r=null;if(i.equals(n))r=n;else{var s={w:i.w<n.w?i.w:null,h:i.h<n.h?i.h:null};if(s.w&&s.h)r=i;else{var o=OpenLayers.Util.getRenderedDimensions(e,s,{displayClass:this.contentDisplayClass,containerElement:t}),a=OpenLayers.Element.getStyle(this.contentDiv,"overflow");if("hidden"!=a&&o.equals(i)){var l=OpenLayers.Util.getScrollbarWidth();s.w?o.h+=l:o.w+=l}r=this.getSafeContentSize(o)}}this.setSize(r)},setBackgroundColor:function(e){void 0!=e&&(this.backgroundColor=e),null!=this.div&&(this.div.style.backgroundColor=this.backgroundColor)},setOpacity:function(e){void 0!=e&&(this.opacity=e),null!=this.div&&(this.div.style.opacity=this.opacity,this.div.style.filter="alpha(opacity="+100*this.opacity+")")},setBorder:function(e){void 0!=e&&(this.border=e),null!=this.div&&(this.div.style.border=this.border)},setContentHTML:function(e){null!=e&&(this.contentHTML=e),null!=this.contentDiv&&null!=this.contentHTML&&this.contentHTML!=this.contentDiv.innerHTML&&(this.contentDiv.innerHTML=this.contentHTML,this.autoSize&&(this.registerImageListeners(),this.updateSize()))},registerImageListeners:function(){for(var e=function(){null!==this.popup.id&&(this.popup.updateSize(),this.popup.visible()&&this.popup.panMapIfOutOfView&&this.popup.panIntoView(),OpenLayers.Event.stopObserving(this.img,"load",this.img._onImgLoad))},t=this.contentDiv.getElementsByTagName("img"),n=0,i=t.length;n<i;n++){var r=t[n];if(0==r.width||0==r.height){var s={popup:this,img:r};r._onImgLoad=OpenLayers.Function.bind(e,s),OpenLayers.Event.observe(r,"load",r._onImgLoad)}}},getSafeContentSize:function(e){var t=e.clone(),n=this.getContentDivPadding(),i=n.left+n.right,r=n.top+n.bottom;if(this.fixPadding(),i+=this.padding.left+this.padding.right,r+=this.padding.top+this.padding.bottom,this.closeDiv){var s=parseInt(this.closeDiv.style.width);i+=s+n.right}if(this.minSize&&(t.w=Math.max(t.w,this.minSize.w-i),t.h=Math.max(t.h,this.minSize.h-r)),this.maxSize&&(t.w=Math.min(t.w,this.maxSize.w-i),t.h=Math.min(t.h,this.maxSize.h-r)),this.map&&this.map.size){var o=0,a=0;if(this.keepInMap&&!this.panMapIfOutOfView){var l=this.map.getPixelFromLonLat(this.lonlat);switch(this.relativePosition){case"tr":o=l.x,a=this.map.size.h-l.y;break;case"tl":o=this.map.size.w-l.x,a=this.map.size.h-l.y;break;case"bl":o=this.map.size.w-l.x,a=l.y;break;case"br":o=l.x,a=l.y;break;default:o=l.x,a=this.map.size.h-l.y}}var u=this.map.size.h-this.map.paddingForPopups.top-this.map.paddingForPopups.bottom-r-a,h=this.map.size.w-this.map.paddingForPopups.left-this.map.paddingForPopups.right-i-o;t.w=Math.min(t.w,h),t.h=Math.min(t.h,u)}return t},getContentDivPadding:function(){var e=this._contentDivPadding;return e||(null==this.div.parentNode&&(this.div.style.display="none",document.body.appendChild(this.div)),e=new OpenLayers.Bounds(OpenLayers.Element.getStyle(this.contentDiv,"padding-left"),OpenLayers.Element.getStyle(this.contentDiv,"padding-bottom"),OpenLayers.Element.getStyle(this.contentDiv,"padding-right"),OpenLayers.Element.getStyle(this.contentDiv,"padding-top")),this._contentDivPadding=e,this.div.parentNode==document.body&&(document.body.removeChild(this.div),this.div.style.display="")),e},addCloseBox:function(e){this.closeDiv=OpenLayers.Util.createDiv(this.id+"_close",null,{w:17,h:17}),this.closeDiv.className="olPopupCloseBox";var t=this.getContentDivPadding();this.closeDiv.style.right=t.right+"px",this.closeDiv.style.top=t.top+"px",this.groupDiv.appendChild(this.closeDiv);var n=e||function(e){this.hide(),OpenLayers.Event.stop(e)};OpenLayers.Event.observe(this.closeDiv,"touchend",OpenLayers.Function.bindAsEventListener(n,this)),OpenLayers.Event.observe(this.closeDiv,"click",OpenLayers.Function.bindAsEventListener(n,this))},panIntoView:function(){var e=this.map.getSize(),t=this.map.getViewPortPxFromLayerPx(new OpenLayers.Pixel(parseInt(this.div.style.left),parseInt(this.div.style.top))),n=t.clone();t.x<this.map.paddingForPopups.left?n.x=this.map.paddingForPopups.left:t.x+this.size.w>e.w-this.map.paddingForPopups.right&&(n.x=e.w-this.map.paddingForPopups.right-this.size.w),t.y<this.map.paddingForPopups.top?n.y=this.map.paddingForPopups.top:t.y+this.size.h>e.h-this.map.paddingForPopups.bottom&&(n.y=e.h-this.map.paddingForPopups.bottom-this.size.h);var i=t.x-n.x,r=t.y-n.y;this.map.pan(i,r)},registerEvents:function(){function e(e){OpenLayers.Event.stop(e,!0)}this.events=new OpenLayers.Events(this,this.div,null,!0),this.events.on({mousedown:this.onmousedown,mousemove:this.onmousemove,mouseup:this.onmouseup,click:this.onclick,mouseout:this.onmouseout,dblclick:this.ondblclick,touchstart:e,scope:this})},onmousedown:function(e){this.mousedown=!0,OpenLayers.Event.stop(e,!0)},onmousemove:function(e){this.mousedown&&OpenLayers.Event.stop(e,!0)},onmouseup:function(e){this.mousedown&&(this.mousedown=!1,OpenLayers.Event.stop(e,!0))},onclick:function(e){OpenLayers.Event.stop(e,!0)},onmouseout:function(e){this.mousedown=!1},ondblclick:function(e){OpenLayers.Event.stop(e,!0)},CLASS_NAME:"OpenLayers.Popup"}),OpenLayers.Popup.WIDTH=200,OpenLayers.Popup.HEIGHT=200,OpenLayers.Popup.COLOR="white",OpenLayers.Popup.OPACITY=1,OpenLayers.Popup.BORDER="0px",OpenLayers.Popup.Anchored=OpenLayers.Class(OpenLayers.Popup,{relativePosition:null,keepInMap:!0,anchor:null,initialize:function(e,t,n,i,r,s,o){var a=[e,t,n,i,s,o];OpenLayers.Popup.prototype.initialize.apply(this,a),this.anchor=null!=r?r:{size:new OpenLayers.Size(0,0),offset:new OpenLayers.Pixel(0,0)}},destroy:function(){this.anchor=null,this.relativePosition=null,OpenLayers.Popup.prototype.destroy.apply(this,arguments)},show:function(){this.updatePosition(),OpenLayers.Popup.prototype.show.apply(this,arguments)},moveTo:function(e){var t=this.relativePosition;this.relativePosition=this.calculateRelativePosition(e),OpenLayers.Popup.prototype.moveTo.call(this,this.calculateNewPx(e)),this.relativePosition!=t&&this.updateRelativePosition()},setSize:function(e){if(OpenLayers.Popup.prototype.setSize.apply(this,arguments),this.lonlat&&this.map){var t=this.map.getLayerPxFromLonLat(this.lonlat);this.moveTo(t)}},calculateRelativePosition:function(e){var t=this.map.getLonLatFromLayerPx(e),n=this.map.getExtent(),i=n.determineQuadrant(t);return OpenLayers.Bounds.oppositeQuadrant(i)},updateRelativePosition:function(){},calculateNewPx:function(e){var t=e.offset(this.anchor.offset),n=this.size||this.contentSize,i="t"==this.relativePosition.charAt(0);t.y+=i?-n.h:this.anchor.size.h;var r="l"==this.relativePosition.charAt(1);return t.x+=r?-n.w:this.anchor.size.w,t},CLASS_NAME:"OpenLayers.Popup.Anchored"}),OpenLayers.Popup.Framed=OpenLayers.Class(OpenLayers.Popup.Anchored,{imageSrc:null,imageSize:null,isAlphaImage:!1,positionBlocks:null,blocks:null,fixedRelativePosition:!1,initialize:function(e,t,n,i,r,s,o){OpenLayers.Popup.Anchored.prototype.initialize.apply(this,arguments),this.fixedRelativePosition&&(this.updateRelativePosition(),this.calculateRelativePosition=function(e){return this.relativePosition}),this.contentDiv.style.position="absolute",this.contentDiv.style.zIndex=1,s&&(this.closeDiv.style.zIndex=1),this.groupDiv.style.position="absolute",this.groupDiv.style.top="0px",this.groupDiv.style.left="0px",this.groupDiv.style.height="100%",this.groupDiv.style.width="100%"},destroy:function(){this.imageSrc=null,this.imageSize=null,this.isAlphaImage=null,this.fixedRelativePosition=!1,this.positionBlocks=null;for(var e=0;e<this.blocks.length;e++){var t=this.blocks[e];t.image&&t.div.removeChild(t.image),t.image=null,t.div&&this.groupDiv.removeChild(t.div),t.div=null}this.blocks=null,OpenLayers.Popup.Anchored.prototype.destroy.apply(this,arguments)},setBackgroundColor:function(e){},setBorder:function(){},setOpacity:function(e){},setSize:function(e){OpenLayers.Popup.Anchored.prototype.setSize.apply(this,arguments),this.updateBlocks()},updateRelativePosition:function(){if(this.padding=this.positionBlocks[this.relativePosition].padding,this.closeDiv){var e=this.getContentDivPadding();this.closeDiv.style.right=e.right+this.padding.right+"px",this.closeDiv.style.top=e.top+this.padding.top+"px"}this.updateBlocks()},calculateNewPx:function(e){var t=OpenLayers.Popup.Anchored.prototype.calculateNewPx.apply(this,arguments);return t=t.offset(this.positionBlocks[this.relativePosition].offset)},createBlocks:function(){this.blocks=[];var e=null;for(var t in this.positionBlocks){e=t;break}for(var n=this.positionBlocks[e],i=0;i<n.blocks.length;i++){var r={};this.blocks.push(r);var s=this.id+"_FrameDecorationDiv_"+i;r.div=OpenLayers.Util.createDiv(s,null,null,null,"absolute",null,"hidden",null);var o=this.id+"_FrameDecorationImg_"+i,a=this.isAlphaImage?OpenLayers.Util.createAlphaImageDiv:OpenLayers.Util.createImage;r.image=a(o,null,this.imageSize,this.imageSrc,"absolute",null,null,null),r.div.appendChild(r.image),this.groupDiv.appendChild(r.div)}},updateBlocks:function(){if(this.blocks||this.createBlocks(),this.size&&this.relativePosition){for(var e=this.positionBlocks[this.relativePosition],t=0;t<e.blocks.length;t++){var n=e.blocks[t],i=this.blocks[t],r=n.anchor.left,s=n.anchor.bottom,o=n.anchor.right,a=n.anchor.top,l=isNaN(n.size.w)?this.size.w-(o+r):n.size.w,u=isNaN(n.size.h)?this.size.h-(s+a):n.size.h;i.div.style.width=(l<0?0:l)+"px",i.div.style.height=(u<0?0:u)+"px",i.div.style.left=null!=r?r+"px":"",i.div.style.bottom=null!=s?s+"px":"",i.div.style.right=null!=o?o+"px":"",i.div.style.top=null!=a?a+"px":"",i.image.style.left=n.position.x+"px",i.image.style.top=n.position.y+"px"}this.contentDiv.style.left=this.padding.left+"px",this.contentDiv.style.top=this.padding.top+"px"}},CLASS_NAME:"OpenLayers.Popup.Framed"}),OpenLayers.Popup.FramedCloud=OpenLayers.Class(OpenLayers.Popup.Framed,{contentDisplayClass:"olFramedCloudPopupContent",autoSize:!0,panMapIfOutOfView:!0,imageSize:new OpenLayers.Size(1276,736),isAlphaImage:!1,fixedRelativePosition:!1,positionBlocks:{tl:{offset:new OpenLayers.Pixel(44,0),padding:new OpenLayers.Bounds(8,40,8,9),blocks:[{size:new OpenLayers.Size("auto","auto"),anchor:new OpenLayers.Bounds(0,51,22,0),position:new OpenLayers.Pixel(0,0)},{size:new OpenLayers.Size(22,"auto"),anchor:new OpenLayers.Bounds(null,50,0,0),position:new OpenLayers.Pixel(-1238,0)},{size:new OpenLayers.Size("auto",19),anchor:new OpenLayers.Bounds(0,32,22,null),position:new OpenLayers.Pixel(0,-631)},{size:new OpenLayers.Size(22,18),anchor:new OpenLayers.Bounds(null,32,0,null),position:new OpenLayers.Pixel(-1238,-632)},{size:new OpenLayers.Size(81,35),anchor:new OpenLayers.Bounds(null,0,0,null),position:new OpenLayers.Pixel(0,-688)}]},tr:{offset:new OpenLayers.Pixel(-45,0),padding:new OpenLayers.Bounds(8,40,8,9),blocks:[{size:new OpenLayers.Size("auto","auto"),anchor:new OpenLayers.Bounds(0,51,22,0),position:new OpenLayers.Pixel(0,0)},{size:new OpenLayers.Size(22,"auto"),anchor:new OpenLayers.Bounds(null,50,0,0),position:new OpenLayers.Pixel(-1238,0)},{size:new OpenLayers.Size("auto",19),anchor:new OpenLayers.Bounds(0,32,22,null),position:new OpenLayers.Pixel(0,-631)},{size:new OpenLayers.Size(22,19),anchor:new OpenLayers.Bounds(null,32,0,null),position:new OpenLayers.Pixel(-1238,-631)},{size:new OpenLayers.Size(81,35),anchor:new OpenLayers.Bounds(0,0,null,null),position:new OpenLayers.Pixel(-215,-687)}]},bl:{offset:new OpenLayers.Pixel(45,0),padding:new OpenLayers.Bounds(8,9,8,40),blocks:[{size:new OpenLayers.Size("auto","auto"),anchor:new OpenLayers.Bounds(0,21,22,32),position:new OpenLayers.Pixel(0,0)},{size:new OpenLayers.Size(22,"auto"),anchor:new OpenLayers.Bounds(null,21,0,32),position:new OpenLayers.Pixel(-1238,0)},{size:new OpenLayers.Size("auto",21),anchor:new OpenLayers.Bounds(0,0,22,null),position:new OpenLayers.Pixel(0,-629)},{size:new OpenLayers.Size(22,21),anchor:new OpenLayers.Bounds(null,0,0,null),position:new OpenLayers.Pixel(-1238,-629)},{size:new OpenLayers.Size(81,33),anchor:new OpenLayers.Bounds(null,null,0,0),position:new OpenLayers.Pixel(-101,-674)}]},br:{offset:new OpenLayers.Pixel(-44,0),padding:new OpenLayers.Bounds(8,9,8,40),blocks:[{size:new OpenLayers.Size("auto","auto"),anchor:new OpenLayers.Bounds(0,21,22,32),position:new OpenLayers.Pixel(0,0)},{size:new OpenLayers.Size(22,"auto"),anchor:new OpenLayers.Bounds(null,21,0,32),position:new OpenLayers.Pixel(-1238,0)},{size:new OpenLayers.Size("auto",21),anchor:new OpenLayers.Bounds(0,0,22,null),position:new OpenLayers.Pixel(0,-629)},{size:new OpenLayers.Size(22,21),anchor:new OpenLayers.Bounds(null,0,0,null),position:new OpenLayers.Pixel(-1238,-629)},{size:new OpenLayers.Size(81,33),anchor:new OpenLayers.Bounds(0,null,null,0),position:new OpenLayers.Pixel(-311,-674)}]}},minSize:new OpenLayers.Size(105,10),maxSize:new OpenLayers.Size(1200,660),initialize:function(e,t,n,i,r,s,o){this.imageSrc=OpenLayers.Util.getImageLocation("cloud-popup-relative.png"),OpenLayers.Popup.Framed.prototype.initialize.apply(this,arguments),this.contentDiv.className=this.contentDisplayClass},CLASS_NAME:"OpenLayers.Popup.FramedCloud"}),OpenLayers.Protocol=OpenLayers.Class({format:null,options:null,autoDestroy:!0,defaultFilter:null,initialize:function(e){e=e||{},OpenLayers.Util.extend(this,e),this.options=e},mergeWithDefaultFilter:function(e){var t;return t=e&&this.defaultFilter?new OpenLayers.Filter.Logical({type:OpenLayers.Filter.Logical.AND,filters:[this.defaultFilter,e]}):e||this.defaultFilter||void 0},destroy:function(){this.options=null,this.format=null},read:function(e){e=e||{},e.filter=this.mergeWithDefaultFilter(e.filter)},create:function(){},update:function(){},delete:function(){},commit:function(){},abort:function(e){},createCallback:function(e,t,n){return OpenLayers.Function.bind(function(){e.apply(this,[t,n])},this)},CLASS_NAME:"OpenLayers.Protocol"}),OpenLayers.Protocol.Response=OpenLayers.Class({code:null,requestType:null,last:!0,features:null,data:null,reqFeatures:null,priv:null,error:null,initialize:function(e){OpenLayers.Util.extend(this,e)},success:function(){return this.code>0},CLASS_NAME:"OpenLayers.Protocol.Response"}),OpenLayers.Protocol.Response.SUCCESS=1,OpenLayers.Protocol.Response.FAILURE=0,OpenLayers.ProxyHost="",OpenLayers.Request||(OpenLayers.Request={}),OpenLayers.Util.extend(OpenLayers.Request,{DEFAULT_CONFIG:{method:"GET",url:window.location.href,async:!0,user:void 0,password:void 0,params:null,proxy:OpenLayers.ProxyHost,headers:{},data:null,callback:function(){},success:null,failure:null,scope:null},URL_SPLIT_REGEX:/([^:]*:)\/\/([^:]*:?[^@]*@)?([^:\/\?]*):?([^\/\?]*)/,events:new OpenLayers.Events(this),makeSameOrigin:function(e,t){var n=0!==e.indexOf("http"),i=!n&&e.match(this.URL_SPLIT_REGEX);if(i){var r=window.location;n=i[1]==r.protocol&&i[3]==r.hostname;var s=i[4],o=r.port;(80!=s&&""!=s||"80"!=o&&""!=o)&&(n=n&&s==o)}return n||t&&(e="function"==typeof t?t(e):t+encodeURIComponent(e)),e},issue:function(e){var t=OpenLayers.Util.extend(this.DEFAULT_CONFIG,{proxy:OpenLayers.ProxyHost});e=e||{},e.headers=e.headers||{},e=OpenLayers.Util.applyDefaults(e,t),e.headers=OpenLayers.Util.applyDefaults(e.headers,t.headers);var n,i=!1;for(n in e.headers)e.headers.hasOwnProperty(n)&&"x-requested-with"===n.toLowerCase()&&(i=!0);i===!1&&(e.headers["X-Requested-With"]="XMLHttpRequest");var r=new OpenLayers.Request.XMLHttpRequest,s=OpenLayers.Util.urlAppend(e.url,OpenLayers.Util.getParameterString(e.params||{}));s=OpenLayers.Request.makeSameOrigin(s,e.proxy),r.open(e.method,s,e.async,e.user,e.password);for(var o in e.headers)r.setRequestHeader(o,e.headers[o]);var a=this.events,l=this;return r.onreadystatechange=function(){if(r.readyState==OpenLayers.Request.XMLHttpRequest.DONE){var t=a.triggerEvent("complete",{request:r,config:e,requestUrl:s});t!==!1&&l.runCallbacks({request:r,config:e,requestUrl:s})}},e.async===!1?r.send(e.data):window.setTimeout(function(){0!==r.readyState&&r.send(e.data)},0),r},runCallbacks:function(e){var t,n=e.request,i=e.config,r=i.scope?OpenLayers.Function.bind(i.callback,i.scope):i.callback;i.success&&(t=i.scope?OpenLayers.Function.bind(i.success,i.scope):i.success);var s;i.failure&&(s=i.scope?OpenLayers.Function.bind(i.failure,i.scope):i.failure),"file:"==OpenLayers.Util.createUrlObject(i.url).protocol&&n.responseText&&(n.status=200),r(n),(!n.status||n.status>=200&&n.status<300)&&(this.events.triggerEvent("success",e),t&&t(n)),n.status&&(n.status<200||n.status>=300)&&(this.events.triggerEvent("failure",e),s&&s(n))},GET:function(e){return e=OpenLayers.Util.extend(e,{method:"GET"}),OpenLayers.Request.issue(e)},POST:function(e){return e=OpenLayers.Util.extend(e,{method:"POST"}),e.headers=e.headers?e.headers:{},"CONTENT-TYPE"in OpenLayers.Util.upperCaseObject(e.headers)||(e.headers["Content-Type"]="application/xml"),OpenLayers.Request.issue(e)},PUT:function(e){return e=OpenLayers.Util.extend(e,{method:"PUT"}),e.headers=e.headers?e.headers:{},"CONTENT-TYPE"in OpenLayers.Util.upperCaseObject(e.headers)||(e.headers["Content-Type"]="application/xml"),OpenLayers.Request.issue(e)},DELETE:function(e){return e=OpenLayers.Util.extend(e,{method:"DELETE"}),OpenLayers.Request.issue(e)},HEAD:function(e){return e=OpenLayers.Util.extend(e,{method:"HEAD"}),OpenLayers.Request.issue(e)},OPTIONS:function(e){return e=OpenLayers.Util.extend(e,{method:"OPTIONS"}),OpenLayers.Request.issue(e)}}),function(){function e(){this._object=a&&!h?new a:new window.ActiveXObject("Microsoft.XMLHTTP"),this._listeners=[]}function t(){return new e}function n(e){if(e._object.send(e._data),l&&!e._async)for(e.readyState=t.OPENED,s(e);e.readyState<t.DONE;)if(e.readyState++,i(e),e._aborted)return}function i(e){t.onreadystatechange&&t.onreadystatechange.apply(e),e.dispatchEvent({type:"readystatechange",bubbles:!1,cancelable:!1,timeStamp:new Date+0})}function r(e){var t=e.responseXML,n=e.responseText;return u&&n&&t&&!t.documentElement&&e.getResponseHeader("Content-Type").match(/[^\/]+\/[^\+]+\+xml/)&&(t=new window.ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.validateOnParse=!1,t.loadXML(n)),t&&(u&&0!=t.parseError||!t.documentElement||t.documentElement&&"parsererror"==t.documentElement.tagName)?null:t}function s(e){try{e.responseText=e._object.responseText}catch(e){}try{e.responseXML=r(e._object)}catch(e){}try{e.status=e._object.status}catch(e){}try{e.statusText=e._object.statusText}catch(e){}}function o(e){e._object.onreadystatechange=new window.Function}var a=window.XMLHttpRequest,l=!!window.controllers,u=window.document.all&&!window.opera,h=u&&window.navigator.userAgent.match(/MSIE 7.0/);t.prototype=e.prototype,l&&a.wrapped&&(t.wrapped=a.wrapped),t.UNSENT=0,t.OPENED=1,t.HEADERS_RECEIVED=2,t.LOADING=3,t.DONE=4,t.prototype.readyState=t.UNSENT,t.prototype.responseText="",t.prototype.responseXML=null,t.prototype.status=0,t.prototype.statusText="",t.prototype.priority="NORMAL",t.prototype.onreadystatechange=null,t.onreadystatechange=null,t.onopen=null,t.onsend=null,t.onabort=null,t.prototype.open=function(e,n,r,a,h){delete this._headers,arguments.length<3&&(r=!0),this._async=r;var c,p=this,d=this.readyState;u&&r&&(c=function(){d!=t.DONE&&(o(p),p.abort())},window.attachEvent("onunload",c)),t.onopen&&t.onopen.apply(this,arguments),arguments.length>4?this._object.open(e,n,r,a,h):arguments.length>3?this._object.open(e,n,r,a):this._object.open(e,n,r),this.readyState=t.OPENED,i(this),this._object.onreadystatechange=function(){if(!l||r){if(p.readyState=p._object.readyState,s(p),p._aborted)return void(p.readyState=t.UNSENT);p.readyState==t.DONE&&(delete p._data,o(p),u&&r&&window.detachEvent("onunload",c)),d!=p.readyState&&i(p),d=p.readyState}}},t.prototype.send=function(e){t.onsend&&t.onsend.apply(this,arguments),arguments.length||(e=null),e&&e.nodeType&&(e=window.XMLSerializer?(new window.XMLSerializer).serializeToString(e):e.xml,this._headers["Content-Type"]||this._object.setRequestHeader("Content-Type","application/xml")),this._data=e,n(this)},t.prototype.abort=function(){t.onabort&&t.onabort.apply(this,arguments),this.readyState>t.UNSENT&&(this._aborted=!0),this._object.abort(),o(this),this.readyState=t.UNSENT,delete this._data},t.prototype.getAllResponseHeaders=function(){return this._object.getAllResponseHeaders()},t.prototype.getResponseHeader=function(e){return this._object.getResponseHeader(e)},t.prototype.setRequestHeader=function(e,t){return this._headers||(this._headers={}),this._headers[e]=t,this._object.setRequestHeader(e,t)},t.prototype.addEventListener=function(e,t,n){for(var i,r=0;i=this._listeners[r];r++)if(i[0]==e&&i[1]==t&&i[2]==n)return;this._listeners.push([e,t,n])},t.prototype.removeEventListener=function(e,t,n){for(var i,r=0;(i=this._listeners[r])&&(i[0]!=e||i[1]!=t||i[2]!=n);r++);i&&this._listeners.splice(r,1)},t.prototype.dispatchEvent=function(e){var t={type:e.type,target:this,currentTarget:this,eventPhase:2,bubbles:e.bubbles,cancelable:e.cancelable,timeStamp:e.timeStamp,stopPropagation:function(){},preventDefault:function(){},initEvent:function(){}};"readystatechange"==t.type&&this.onreadystatechange&&(this.onreadystatechange.handleEvent||this.onreadystatechange).apply(this,[t]);for(var n,i=0;n=this._listeners[i];i++)n[0]!=t.type||n[2]||(n[1].handleEvent||n[1]).apply(this,[t])},t.prototype.toString=function(){return"[object XMLHttpRequest]"},t.toString=function(){return"[XMLHttpRequest]"},window.Function.prototype.apply||(window.Function.prototype.apply=function(e,t){t||(t=[]),e.__func=this,e.__func(t[0],t[1],t[2],t[3],t[4]),delete e.__func}),OpenLayers.Request||(OpenLayers.Request={}),OpenLayers.Request.XMLHttpRequest=t}(),OpenLayers.Protocol.HTTP=OpenLayers.Class(OpenLayers.Protocol,{url:null,headers:null,params:null,callback:null,scope:null,readWithPOST:!1,updateWithPOST:!1,deleteWithPOST:!1,wildcarded:!1,srsInBBOX:!1,initialize:function(e){if(e=e||{},this.params={},this.headers={},OpenLayers.Protocol.prototype.initialize.apply(this,arguments),!this.filterToParams&&OpenLayers.Format.QueryStringFilter){var t=new OpenLayers.Format.QueryStringFilter({wildcarded:this.wildcarded,srsInBBOX:this.srsInBBOX});this.filterToParams=function(e,n){return t.write(e,n)}}},destroy:function(){this.params=null,this.headers=null,OpenLayers.Protocol.prototype.destroy.apply(this)},read:function(e){OpenLayers.Protocol.prototype.read.apply(this,arguments),e=e||{},e.params=OpenLayers.Util.applyDefaults(e.params,this.options.params),e=OpenLayers.Util.applyDefaults(e,this.options),e.filter&&this.filterToParams&&(e.params=this.filterToParams(e.filter,e.params));var t=void 0!==e.readWithPOST?e.readWithPOST:this.readWithPOST,n=new OpenLayers.Protocol.Response({requestType:"read"});if(t){var i=e.headers||{};i["Content-Type"]="application/x-www-form-urlencoded",n.priv=OpenLayers.Request.POST({url:e.url,callback:this.createCallback(this.handleRead,n,e),data:OpenLayers.Util.getParameterString(e.params),headers:i})}else n.priv=OpenLayers.Request.GET({url:e.url,callback:this.createCallback(this.handleRead,n,e),params:e.params,headers:e.headers});return n},handleRead:function(e,t){this.handleResponse(e,t)},create:function(e,t){t=OpenLayers.Util.applyDefaults(t,this.options);var n=new OpenLayers.Protocol.Response({reqFeatures:e,requestType:"create"});return n.priv=OpenLayers.Request.POST({url:t.url,callback:this.createCallback(this.handleCreate,n,t),headers:t.headers,data:this.format.write(e)}),n},handleCreate:function(e,t){this.handleResponse(e,t)},update:function(e,t){t=t||{};var n=t.url||e.url||this.options.url+"/"+e.fid;t=OpenLayers.Util.applyDefaults(t,this.options);var i=new OpenLayers.Protocol.Response({reqFeatures:e,requestType:"update"}),r=this.updateWithPOST?"POST":"PUT";return i.priv=OpenLayers.Request[r]({url:n,callback:this.createCallback(this.handleUpdate,i,t),headers:t.headers,data:this.format.write(e)}),i},handleUpdate:function(e,t){this.handleResponse(e,t)},delete:function(e,t){t=t||{};var n=t.url||e.url||this.options.url+"/"+e.fid;t=OpenLayers.Util.applyDefaults(t,this.options);var i=new OpenLayers.Protocol.Response({reqFeatures:e,requestType:"delete"}),r=this.deleteWithPOST?"POST":"DELETE",s={url:n,callback:this.createCallback(this.handleDelete,i,t),headers:t.headers};return this.deleteWithPOST&&(s.data=this.format.write(e)),i.priv=OpenLayers.Request[r](s),i},handleDelete:function(e,t){this.handleResponse(e,t)},handleResponse:function(e,t){var n=e.priv;t.callback&&(n.status>=200&&n.status<300?("delete"!=e.requestType&&(e.features=this.parseFeatures(n)),e.code=OpenLayers.Protocol.Response.SUCCESS):e.code=OpenLayers.Protocol.Response.FAILURE,t.callback.call(t.scope,e))},parseFeatures:function(e){var t=e.responseXML;return t&&t.documentElement||(t=e.responseText),!t||t.length<=0?null:this.format.read(t)},commit:function(e,t){function n(e){for(var t=e.features?e.features.length:0,n=new Array(t),r=0;r<t;++r)n[r]=e.features[r].fid;f.insertIds=n,i.apply(this,[e])}function i(e){this.callUserCallback(e,t),d=d&&e.success(),s++,s>=p&&t.callback&&(f.code=d?OpenLayers.Protocol.Response.SUCCESS:OpenLayers.Protocol.Response.FAILURE,t.callback.apply(t.scope,[f]))}t=OpenLayers.Util.applyDefaults(t,this.options);var r=[],s=0,o={};o[OpenLayers.State.INSERT]=[],o[OpenLayers.State.UPDATE]=[],o[OpenLayers.State.DELETE]=[];for(var a,l,u=[],h=0,c=e.length;h<c;++h)a=e[h],l=o[a.state],l&&(l.push(a),u.push(a));var p=(o[OpenLayers.State.INSERT].length>0?1:0)+o[OpenLayers.State.UPDATE].length+o[OpenLayers.State.DELETE].length,d=!0,f=new OpenLayers.Protocol.Response({reqFeatures:u}),y=o[OpenLayers.State.INSERT];y.length>0&&r.push(this.create(y,OpenLayers.Util.applyDefaults({callback:n,scope:this},t.create))),y=o[OpenLayers.State.UPDATE];for(var h=y.length-1;h>=0;--h)r.push(this.update(y[h],OpenLayers.Util.applyDefaults({callback:i,scope:this},t.update)));y=o[OpenLayers.State.DELETE];for(var h=y.length-1;h>=0;--h)r.push(this.delete(y[h],OpenLayers.Util.applyDefaults({callback:i,scope:this},t.delete)));return r},abort:function(e){e&&e.priv.abort()},callUserCallback:function(e,t){var n=t[e.requestType];n&&n.callback&&n.callback.call(n.scope,e)},CLASS_NAME:"OpenLayers.Protocol.HTTP"}),OpenLayers.Geometry=OpenLayers.Class({id:null,parent:null,bounds:null,initialize:function(){this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},destroy:function(){this.id=null,this.bounds=null},clone:function(){return new OpenLayers.Geometry},setBounds:function(e){e&&(this.bounds=e.clone())},clearBounds:function(){this.bounds=null,this.parent&&this.parent.clearBounds()},extendBounds:function(e){var t=this.getBounds();t?this.bounds.extend(e):this.setBounds(e)},getBounds:function(){return null==this.bounds&&this.calculateBounds(),this.bounds},calculateBounds:function(){},distanceTo:function(e,t){},getVertices:function(e){},atPoint:function(e,t,n){var i=!1,r=this.getBounds();if(null!=r&&null!=e){var s=null!=t?t:0,o=null!=n?n:0,a=new OpenLayers.Bounds(this.bounds.left-s,this.bounds.bottom-o,this.bounds.right+s,this.bounds.top+o);i=a.containsLonLat(e)}return i},getLength:function(){return 0},getArea:function(){return 0},getCentroid:function(){return null},toString:function(){var e;return e=OpenLayers.Format&&OpenLayers.Format.WKT?OpenLayers.Format.WKT.prototype.write(new OpenLayers.Feature.Vector(this)):Object.prototype.toString.call(this)},CLASS_NAME:"OpenLayers.Geometry"}),OpenLayers.Geometry.fromWKT=function(e){var t;if(OpenLayers.Format&&OpenLayers.Format.WKT){var n=OpenLayers.Geometry.fromWKT.format;n||(n=new OpenLayers.Format.WKT,OpenLayers.Geometry.fromWKT.format=n);var i=n.read(e);if(i instanceof OpenLayers.Feature.Vector)t=i.geometry;else if(OpenLayers.Util.isArray(i)){for(var r=i.length,s=new Array(r),o=0;o<r;++o)s[o]=i[o].geometry;t=new OpenLayers.Geometry.Collection(s)}}return t},OpenLayers.Geometry.segmentsIntersect=function(e,t,n){var i=n&&n.point,r=n&&n.tolerance,s=!1,o=e.x1-t.x1,a=e.y1-t.y1,l=e.x2-e.x1,u=e.y2-e.y1,h=t.y2-t.y1,c=t.x2-t.x1,p=h*l-c*u,d=c*a-h*o,f=l*a-u*o;if(0==p)0==d&&0==f&&(s=!0);else{var y=d/p,m=f/p;if(y>=0&&y<=1&&m>=0&&m<=1)if(i){var g=e.x1+y*l,v=e.y1+y*u;s=new OpenLayers.Geometry.Point(g,v)}else s=!0}if(r){var L;if(s){if(i){var b,g,v,O=[e,t];e:for(var x=0;x<2;++x){b=O[x];for(var w=1;w<3;++w)if(g=b["x"+w],v=b["y"+w],L=Math.sqrt(Math.pow(g-s.x,2)+Math.pow(v-s.y,2)),L<r){s.x=g,s.y=v;break e}}}}else{var C,E,g,v,S,_,O=[e,t];e:for(var x=0;x<2;++x){C=O[x],E=O[(x+1)%2];for(var w=1;w<3;++w)if(S={x:C["x"+w],y:C["y"+w]},_=OpenLayers.Geometry.distanceToSegment(S,E),_.distance<r){s=!i||new OpenLayers.Geometry.Point(S.x,S.y);break e}}}}return s},OpenLayers.Geometry.distanceToSegment=function(e,t){var n=OpenLayers.Geometry.distanceSquaredToSegment(e,t);return n.distance=Math.sqrt(n.distance),n},OpenLayers.Geometry.distanceSquaredToSegment=function(e,t){var n,i,r=e.x,s=e.y,o=t.x1,a=t.y1,l=t.x2,u=t.y2,h=l-o,c=u-a,p=0==h&&0==c?0:(h*(r-o)+c*(s-a))/(Math.pow(h,2)+Math.pow(c,2));return p<=0?(n=o,i=a):p>=1?(n=l,i=u):(n=o+p*h,i=a+p*c),{distance:Math.pow(n-r,2)+Math.pow(i-s,2),x:n,y:i,along:p}},OpenLayers.Geometry.Collection=OpenLayers.Class(OpenLayers.Geometry,{components:null,componentTypes:null,initialize:function(e){OpenLayers.Geometry.prototype.initialize.apply(this,arguments),this.components=[],null!=e&&this.addComponents(e)},destroy:function(){this.components.length=0,this.components=null,OpenLayers.Geometry.prototype.destroy.apply(this,arguments)},clone:function(){for(var e=OpenLayers.Util.getConstructor(this.CLASS_NAME),t=new e,n=0,i=this.components.length;n<i;n++)t.addComponent(this.components[n].clone());return OpenLayers.Util.applyDefaults(t,this),t},getComponentsString:function(){for(var e=[],t=0,n=this.components.length;t<n;t++)e.push(this.components[t].toShortString());return e.join(",")},calculateBounds:function(){this.bounds=null;var e=new OpenLayers.Bounds,t=this.components;if(t)for(var n=0,i=t.length;n<i;n++)e.extend(t[n].getBounds());null!=e.left&&null!=e.bottom&&null!=e.right&&null!=e.top&&this.setBounds(e)},addComponents:function(e){OpenLayers.Util.isArray(e)||(e=[e]);for(var t=0,n=e.length;t<n;t++)this.addComponent(e[t])},addComponent:function(e,t){var n=!1;if(e&&(null==this.componentTypes||OpenLayers.Util.indexOf(this.componentTypes,e.CLASS_NAME)>-1)){if(null!=t&&t<this.components.length){var i=this.components.slice(0,t),r=this.components.slice(t,this.components.length);i.push(e),this.components=i.concat(r)}else this.components.push(e);e.parent=this,this.clearBounds(),n=!0}return n},removeComponents:function(e){var t=!1;OpenLayers.Util.isArray(e)||(e=[e]);for(var n=e.length-1;n>=0;--n)t=this.removeComponent(e[n])||t;return t},removeComponent:function(e){return OpenLayers.Util.removeItem(this.components,e),this.clearBounds(),!0},getLength:function(){for(var e=0,t=0,n=this.components.length;t<n;t++)e+=this.components[t].getLength();return e},getArea:function(){for(var e=0,t=0,n=this.components.length;t<n;t++)e+=this.components[t].getArea();return e},getGeodesicArea:function(e){for(var t=0,n=0,i=this.components.length;n<i;n++)t+=this.components[n].getGeodesicArea(e);return t},getCentroid:function(e){if(!e)return this.components.length&&this.components[0].getCentroid();var t=this.components.length;if(!t)return!1;for(var n,i=[],r=[],s=0,o=Number.MAX_VALUE,a=0;a<t;++a){n=this.components[a];var l=n.getArea(),u=n.getCentroid(!0);isNaN(l)||isNaN(u.x)||isNaN(u.y)||(i.push(l),
s+=l,o=l<o&&l>0?l:o,r.push(u))}if(t=i.length,0===s){for(var a=0;a<t;++a)i[a]=1;s=i.length}else{for(var a=0;a<t;++a)i[a]/=o;s/=o}for(var u,l,h=0,c=0,a=0;a<t;++a)u=r[a],l=i[a],h+=u.x*l,c+=u.y*l;return new OpenLayers.Geometry.Point(h/s,c/s)},getGeodesicLength:function(e){for(var t=0,n=0,i=this.components.length;n<i;n++)t+=this.components[n].getGeodesicLength(e);return t},move:function(e,t){for(var n=0,i=this.components.length;n<i;n++)this.components[n].move(e,t)},rotate:function(e,t){for(var n=0,i=this.components.length;n<i;++n)this.components[n].rotate(e,t)},resize:function(e,t,n){for(var i=0;i<this.components.length;++i)this.components[i].resize(e,t,n);return this},distanceTo:function(e,t){for(var n,i,r,s=!(t&&t.edge===!1),o=s&&t&&t.details,a=Number.POSITIVE_INFINITY,l=0,u=this.components.length;l<u&&(n=this.components[l].distanceTo(e,t),r=o?n.distance:n,!(r<a&&(a=r,i=n,0==a)));++l);return i},equals:function(e){var t=!0;if(e&&e.CLASS_NAME&&this.CLASS_NAME==e.CLASS_NAME)if(OpenLayers.Util.isArray(e.components)&&e.components.length==this.components.length){for(var n=0,i=this.components.length;n<i;++n)if(!this.components[n].equals(e.components[n])){t=!1;break}}else t=!1;else t=!1;return t},transform:function(e,t){if(e&&t){for(var n=0,i=this.components.length;n<i;n++){var r=this.components[n];r.transform(e,t)}this.bounds=null}return this},intersects:function(e){for(var t=!1,n=0,i=this.components.length;n<i&&!(t=e.intersects(this.components[n]));++n);return t},getVertices:function(e){for(var t=[],n=0,i=this.components.length;n<i;++n)Array.prototype.push.apply(t,this.components[n].getVertices(e));return t},CLASS_NAME:"OpenLayers.Geometry.Collection"}),OpenLayers.Geometry.Point=OpenLayers.Class(OpenLayers.Geometry,{x:null,y:null,initialize:function(e,t){OpenLayers.Geometry.prototype.initialize.apply(this,arguments),this.x=parseFloat(e),this.y=parseFloat(t)},clone:function(e){return null==e&&(e=new OpenLayers.Geometry.Point(this.x,this.y)),OpenLayers.Util.applyDefaults(e,this),e},calculateBounds:function(){this.bounds=new OpenLayers.Bounds(this.x,this.y,this.x,this.y)},distanceTo:function(e,t){var n,i,r,s,o,a,l=!(t&&t.edge===!1),u=l&&t&&t.details;return e instanceof OpenLayers.Geometry.Point?(i=this.x,r=this.y,s=e.x,o=e.y,n=Math.sqrt(Math.pow(i-s,2)+Math.pow(r-o,2)),a=u?{x0:i,y0:r,x1:s,y1:o,distance:n}:n):(a=e.distanceTo(this,t),u&&(a={x0:a.x1,y0:a.y1,x1:a.x0,y1:a.y0,distance:a.distance})),a},equals:function(e){var t=!1;return null!=e&&(t=this.x==e.x&&this.y==e.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(e.x)&&isNaN(e.y)),t},toShortString:function(){return this.x+", "+this.y},move:function(e,t){this.x=this.x+e,this.y=this.y+t,this.clearBounds()},rotate:function(e,t){e*=Math.PI/180;var n=this.distanceTo(t),i=e+Math.atan2(this.y-t.y,this.x-t.x);this.x=t.x+n*Math.cos(i),this.y=t.y+n*Math.sin(i),this.clearBounds()},getCentroid:function(){return new OpenLayers.Geometry.Point(this.x,this.y)},resize:function(e,t,n){return n=void 0==n?1:n,this.x=t.x+e*n*(this.x-t.x),this.y=t.y+e*(this.y-t.y),this.clearBounds(),this},intersects:function(e){var t=!1;return t="OpenLayers.Geometry.Point"==e.CLASS_NAME?this.equals(e):e.intersects(this)},transform:function(e,t){return e&&t&&(OpenLayers.Projection.transform(this,e,t),this.bounds=null),this},getVertices:function(e){return[this]},CLASS_NAME:"OpenLayers.Geometry.Point"}),OpenLayers.Geometry.MultiPoint=OpenLayers.Class(OpenLayers.Geometry.Collection,{componentTypes:["OpenLayers.Geometry.Point"],addPoint:function(e,t){this.addComponent(e,t)},removePoint:function(e){this.removeComponent(e)},CLASS_NAME:"OpenLayers.Geometry.MultiPoint"}),OpenLayers.Geometry.Curve=OpenLayers.Class(OpenLayers.Geometry.MultiPoint,{componentTypes:["OpenLayers.Geometry.Point"],getLength:function(){var e=0;if(this.components&&this.components.length>1)for(var t=1,n=this.components.length;t<n;t++)e+=this.components[t-1].distanceTo(this.components[t]);return e},getGeodesicLength:function(e){var t=this;if(e){var n=new OpenLayers.Projection("EPSG:4326");n.equals(e)||(t=this.clone().transform(e,n))}var i=0;if(t.components&&t.components.length>1)for(var r,s,o=1,a=t.components.length;o<a;o++)r=t.components[o-1],s=t.components[o],i+=OpenLayers.Util.distVincenty({lon:r.x,lat:r.y},{lon:s.x,lat:s.y});return 1e3*i},CLASS_NAME:"OpenLayers.Geometry.Curve"}),OpenLayers.Geometry.LineString=OpenLayers.Class(OpenLayers.Geometry.Curve,{removeComponent:function(e){var t=this.components&&this.components.length>2;return t&&OpenLayers.Geometry.Collection.prototype.removeComponent.apply(this,arguments),t},intersects:function(e){var t=!1,n=e.CLASS_NAME;if("OpenLayers.Geometry.LineString"==n||"OpenLayers.Geometry.LinearRing"==n||"OpenLayers.Geometry.Point"==n){var i,r=this.getSortedSegments();i="OpenLayers.Geometry.Point"==n?[{x1:e.x,y1:e.y,x2:e.x,y2:e.y}]:e.getSortedSegments();var s,o,a,l,u,h,c,p;e:for(var d=0,f=r.length;d<f;++d){s=r[d],o=s.x1,a=s.x2,l=s.y1,u=s.y2;for(var y=0,m=i.length;y<m&&(h=i[y],!(h.x1>a));++y)if(!(h.x2<o)&&(c=h.y1,p=h.y2,!(Math.min(c,p)>Math.max(l,u))&&!(Math.max(c,p)<Math.min(l,u))&&OpenLayers.Geometry.segmentsIntersect(s,h))){t=!0;break e}}}else t=e.intersects(this);return t},getSortedSegments:function(){function e(e,t){return e.x1-t.x1}for(var t,n,i=this.components.length-1,r=new Array(i),s=0;s<i;++s)t=this.components[s],n=this.components[s+1],t.x<n.x?r[s]={x1:t.x,y1:t.y,x2:n.x,y2:n.y}:r[s]={x1:n.x,y1:n.y,x2:t.x,y2:t.y};return r.sort(e)},splitWithSegment:function(e,t){for(var n,i,r,s,o,a=!(t&&t.edge===!1),l=t&&t.tolerance,u=[],h=this.getVertices(),c=[],p=[],d=!1,f={point:!0,tolerance:l},y=null,m=0,g=h.length-2;m<=g;++m)if(n=h[m],c.push(n.clone()),i=h[m+1],o={x1:n.x,y1:n.y,x2:i.x,y2:i.y},r=OpenLayers.Geometry.segmentsIntersect(e,o,f),r instanceof OpenLayers.Geometry.Point&&(s=!!(r.x===e.x1&&r.y===e.y1||r.x===e.x2&&r.y===e.y2||r.equals(n)||r.equals(i)),s||a)){if(r.equals(p[p.length-1])||p.push(r.clone()),0===m&&r.equals(n))continue;if(r.equals(i))continue;d=!0,r.equals(n)||c.push(r),u.push(new OpenLayers.Geometry.LineString(c)),c=[r.clone()]}if(d&&(c.push(i.clone()),u.push(new OpenLayers.Geometry.LineString(c))),p.length>0){var v=e.x1<e.x2?1:-1,L=e.y1<e.y2?1:-1;y={lines:u,points:p.sort(function(e,t){return v*e.x-v*t.x||L*e.y-L*t.y})}}return y},split:function(e,t){var n,i,r,s,o=null,a=t&&t.mutual;if(e instanceof OpenLayers.Geometry.LineString){var l,u,h,c,p,d,f=this.getVertices(),y=[];r=[];for(var m=0,g=f.length-2;m<=g;++m){l=f[m],u=f[m+1],h={x1:l.x,y1:l.y,x2:u.x,y2:u.y},s=s||[e],a&&y.push(l.clone());for(var v=0;v<s.length;++v)if(c=s[v].splitWithSegment(h,t),c&&(p=c.lines,p.length>0&&(p.unshift(v,1),Array.prototype.splice.apply(s,p),v+=p.length-2),a))for(var L=0,b=c.points.length;L<b;++L)d=c.points[L],d.equals(l)||(y.push(d),r.push(new OpenLayers.Geometry.LineString(y)),y=d.equals(u)?[]:[d.clone()])}a&&r.length>0&&y.length>0&&(y.push(u.clone()),r.push(new OpenLayers.Geometry.LineString(y)))}else o=e.splitWith(this,t);return s&&s.length>1?i=!0:s=[],r&&r.length>1?n=!0:r=[],(i||n)&&(o=a?[r,s]:s),o},splitWith:function(e,t){return e.split(this,t)},getVertices:function(e){var t;return t=e===!0?[this.components[0],this.components[this.components.length-1]]:e===!1?this.components.slice(1,this.components.length-1):this.components.slice()},distanceTo:function(e,t){var n,i=!(t&&t.edge===!1),r=i&&t&&t.details,s={},o=Number.POSITIVE_INFINITY;if(e instanceof OpenLayers.Geometry.Point)for(var a,l=this.getSortedSegments(),u=e.x,h=e.y,c=0,p=l.length;c<p&&(a=l[c],n=OpenLayers.Geometry.distanceToSegment(e,a),!(n.distance<o&&(o=n.distance,s=r?{distance:o,x0:n.x,y0:n.y,x1:u,y1:h,index:c,indexDistance:new OpenLayers.Geometry.Point(a.x1,a.y1).distanceTo(e)}:o,0===o)));++c);else if(e instanceof OpenLayers.Geometry.LineString){var d,f,y,m,g,v=this.getSortedSegments(),L=e.getSortedSegments(),b=L.length,O={point:!0};e:for(var c=0,p=v.length;c<p;++c){d=v[c],m=d.x1,g=d.y1;for(var x=0;x<b;++x){if(f=L[x],y=OpenLayers.Geometry.segmentsIntersect(d,f,O)){o=0,s={distance:0,x0:y.x,y0:y.y,x1:y.x,y1:y.y};break e}n=OpenLayers.Geometry.distanceToSegment({x:m,y:g},f),n.distance<o&&(o=n.distance,s={distance:o,x0:m,y0:g,x1:n.x,y1:n.y})}}if(r||(s=s.distance),0!==o&&d){n=e.distanceTo(new OpenLayers.Geometry.Point(d.x2,d.y2),t);var w=r?n.distance:n;w<o&&(s=r?{distance:o,x0:n.x1,y0:n.y1,x1:n.x0,y1:n.y0}:w)}}else s=e.distanceTo(this,t),r&&(s={distance:s.distance,x0:s.x1,y0:s.y1,x1:s.x0,y1:s.y0});return s},simplify:function(e){if(this&&null!==this){var t=this.getVertices();if(t.length<3)return this;var n=function(e,t){return e-t},i=function(e,t,n,s){for(var o,l=0,u=0,h=t;h<n;h++)o=r(e[t],e[n],e[h]),o>l&&(l=o,u=h);l>s&&u!=t&&(a.push(u),i(e,t,u,s),i(e,u,n,s))},r=function(e,t,n){var i=Math.abs(.5*(e.x*t.y+t.x*n.y+n.x*e.y-t.x*e.y-n.x*t.y-e.x*n.y)),r=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),s=i/r*2;return s},s=0,o=t.length-1,a=[];for(a.push(s),a.push(o);t[s].equals(t[o]);)o--,a.push(o);i(t,s,o,e);var l=[];a.sort(n);for(var u=0;u<a.length;u++)l.push(t[a[u]]);return new OpenLayers.Geometry.LineString(l)}return this},CLASS_NAME:"OpenLayers.Geometry.LineString"}),OpenLayers.Geometry.LineString.geodesic=function(e,t,n){for(var i,r,s,o,a,l,u=[],h=e(0),c=e(1),p=t(h),d=t(c),f=[c,h],y=[d,p],m=[1,0],g={},v=1e5;--v>0&&m.length>0;)s=m.pop(),h=f.pop(),p=y.pop(),l=s.toString(),l in g||(u.push(p),g[l]=!0),o=m.pop(),c=f.pop(),d=y.pop(),a=(s+o)/2,i=e(a),r=t(i),OpenLayers.Geometry.distanceSquaredToSegment(r,{x1:p.x,y1:p.y,x2:d.x,y2:d.y}).distance<n?(u.push(d),l=o.toString(),g[l]=!0):(m.push(o,a,a,s),y.push(d,r,r,p),f.push(c,i,i,h));return new OpenLayers.Geometry.LineString(u)},OpenLayers.Geometry.LineString.geodesicMeridian=function(e,t,n,i,r){var s=new OpenLayers.Projection("EPSG:4326");return OpenLayers.Geometry.LineString.geodesic(function(i){return new OpenLayers.Geometry.Point(e,t+(n-t)*i)},function(e){return e.transform(s,i)},r)},OpenLayers.Geometry.LineString.geodesicParallel=function(e,t,n,i,r){var s=new OpenLayers.Projection("EPSG:4326");return OpenLayers.Geometry.LineString.geodesic(function(i){return new OpenLayers.Geometry.Point(t+(n-t)*i,e)},function(e){return e.transform(s,i)},r)},OpenLayers.Geometry.LinearRing=OpenLayers.Class(OpenLayers.Geometry.LineString,{componentTypes:["OpenLayers.Geometry.Point"],addComponent:function(e,t){var n=!1,i=this.components.pop();null==t&&e.equals(i)||(n=OpenLayers.Geometry.Collection.prototype.addComponent.apply(this,arguments));var r=this.components[0];return OpenLayers.Geometry.Collection.prototype.addComponent.apply(this,[r]),n},removeComponent:function(e){var t=this.components&&this.components.length>3;if(t){this.components.pop(),OpenLayers.Geometry.Collection.prototype.removeComponent.apply(this,arguments);var n=this.components[0];OpenLayers.Geometry.Collection.prototype.addComponent.apply(this,[n])}return t},move:function(e,t){for(var n=0,i=this.components.length;n<i-1;n++)this.components[n].move(e,t)},rotate:function(e,t){for(var n=0,i=this.components.length;n<i-1;++n)this.components[n].rotate(e,t)},resize:function(e,t,n){for(var i=0,r=this.components.length;i<r-1;++i)this.components[i].resize(e,t,n);return this},transform:function(e,t){if(e&&t){for(var n=0,i=this.components.length;n<i-1;n++){var r=this.components[n];r.transform(e,t)}this.bounds=null}return this},getCentroid:function(){if(this.components){var e=this.components.length;if(e>0&&e<=2)return this.components[0].clone();if(e>2){var t=0,n=0,i=this.components[0].x,r=this.components[0].y,s=-1*this.getArea();if(0!=s){for(var o=0;o<e-1;o++){var a=this.components[o],l=this.components[o+1];t+=(a.x+l.x-2*i)*((a.x-i)*(l.y-r)-(l.x-i)*(a.y-r)),n+=(a.y+l.y-2*r)*((a.x-i)*(l.y-r)-(l.x-i)*(a.y-r))}var u=i+t/(6*s),h=r+n/(6*s)}else{for(var o=0;o<e-1;o++)t+=this.components[o].x,n+=this.components[o].y;var u=t/(e-1),h=n/(e-1)}return new OpenLayers.Geometry.Point(u,h)}return null}},getArea:function(){var e=0;if(this.components&&this.components.length>2){for(var t=0,n=0,i=this.components.length;n<i-1;n++){var r=this.components[n],s=this.components[n+1];t+=(r.x+s.x)*(s.y-r.y)}e=-t/2}return e},getGeodesicArea:function(e){var t=this;if(e){var n=new OpenLayers.Projection("EPSG:4326");n.equals(e)||(t=this.clone().transform(e,n))}var i=0,r=t.components&&t.components.length;if(r>2){for(var s,o,a=0;a<r-1;a++)s=t.components[a],o=t.components[a+1],i+=OpenLayers.Util.rad(o.x-s.x)*(2+Math.sin(OpenLayers.Util.rad(s.y))+Math.sin(OpenLayers.Util.rad(o.y)));i=i*OpenLayers.Util.VincentyConstants.a*OpenLayers.Util.VincentyConstants.a/2}return i},containsPoint:function(e){function t(e,t,n,i,r){return(e-r)*((i-t)/(r-n))+i}for(var n,i,r,s,o,a,l,u=OpenLayers.Number.limitSigDigs,h=14,c=u(e.x,h),p=u(e.y,h),d=this.components.length-1,f=0,y=0;y<d;++y)if(n=this.components[y],r=u(n.x,h),s=u(n.y,h),i=this.components[y+1],o=u(i.x,h),a=u(i.y,h),s!=a){if(l=u(t(p,r,s,o,a),h),l==c&&(s<a&&p>=s&&p<=a||s>a&&p<=s&&p>=a)){f=-1;break}l<=c||r!=o&&(l<Math.min(r,o)||l>Math.max(r,o))||(s<a&&p>=s&&p<a||s>a&&p<s&&p>=a)&&++f}else if(p==s&&(r<=o&&c>=r&&c<=o||r>=o&&c<=r&&c>=o)){f=-1;break}var m=f==-1?1:!!(1&f);return m},intersects:function(e){var t=!1;if("OpenLayers.Geometry.Point"==e.CLASS_NAME)t=this.containsPoint(e);else if("OpenLayers.Geometry.LineString"==e.CLASS_NAME)t=e.intersects(this);else if("OpenLayers.Geometry.LinearRing"==e.CLASS_NAME)t=OpenLayers.Geometry.LineString.prototype.intersects.apply(this,[e]);else for(var n=0,i=e.components.length;n<i&&!(t=e.components[n].intersects(this));++n);return t},getVertices:function(e){return e===!0?[]:this.components.slice(0,this.components.length-1)},CLASS_NAME:"OpenLayers.Geometry.LinearRing"}),OpenLayers.Geometry.Polygon=OpenLayers.Class(OpenLayers.Geometry.Collection,{componentTypes:["OpenLayers.Geometry.LinearRing"],getArea:function(){var e=0;if(this.components&&this.components.length>0){e+=Math.abs(this.components[0].getArea());for(var t=1,n=this.components.length;t<n;t++)e-=Math.abs(this.components[t].getArea())}return e},getGeodesicArea:function(e){var t=0;if(this.components&&this.components.length>0){t+=Math.abs(this.components[0].getGeodesicArea(e));for(var n=1,i=this.components.length;n<i;n++)t-=Math.abs(this.components[n].getGeodesicArea(e))}return t},containsPoint:function(e){var t=this.components.length,n=!1;if(t>0&&(n=this.components[0].containsPoint(e),1!==n&&n&&t>1))for(var i,r=1;r<t;++r)if(i=this.components[r].containsPoint(e)){n=1===i&&1;break}return n},intersects:function(e){var t,n,i=!1;if("OpenLayers.Geometry.Point"==e.CLASS_NAME)i=this.containsPoint(e);else if("OpenLayers.Geometry.LineString"==e.CLASS_NAME||"OpenLayers.Geometry.LinearRing"==e.CLASS_NAME){for(t=0,n=this.components.length;t<n&&!(i=e.intersects(this.components[t]));++t);if(!i)for(t=0,n=e.components.length;t<n&&!(i=this.containsPoint(e.components[t]));++t);}else for(t=0,n=e.components.length;t<n&&!(i=this.intersects(e.components[t]));++t);if(!i&&"OpenLayers.Geometry.Polygon"==e.CLASS_NAME){var r=this.components[0];for(t=0,n=r.components.length;t<n&&!(i=e.containsPoint(r.components[t]));++t);}return i},distanceTo:function(e,t){var n,i=!(t&&t.edge===!1);return n=!i&&this.intersects(e)?0:OpenLayers.Geometry.Collection.prototype.distanceTo.apply(this,[e,t])},CLASS_NAME:"OpenLayers.Geometry.Polygon"}),OpenLayers.Geometry.Polygon.createRegularPolygon=function(e,t,n,i){var r=Math.PI*(1/n-.5);i&&(r+=i/180*Math.PI);for(var s,o,a,l=[],u=0;u<n;++u)s=r+2*u*Math.PI/n,o=e.x+t*Math.cos(s),a=e.y+t*Math.sin(s),l.push(new OpenLayers.Geometry.Point(o,a));var h=new OpenLayers.Geometry.LinearRing(l);return new OpenLayers.Geometry.Polygon([h])},OpenLayers.Feature=OpenLayers.Class({layer:null,id:null,lonlat:null,data:null,marker:null,popupClass:null,popup:null,initialize:function(e,t,n){this.layer=e,this.lonlat=t,this.data=null!=n?n:{},this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},destroy:function(){null!=this.layer&&null!=this.layer.map&&null!=this.popup&&this.layer.map.removePopup(this.popup),null!=this.layer&&null!=this.marker&&this.layer.removeMarker(this.marker),this.layer=null,this.id=null,this.lonlat=null,this.data=null,null!=this.marker&&(this.destroyMarker(this.marker),this.marker=null),null!=this.popup&&(this.destroyPopup(this.popup),this.popup=null)},onScreen:function(){var e=!1;if(null!=this.layer&&null!=this.layer.map){var t=this.layer.map.getExtent();e=t.containsLonLat(this.lonlat)}return e},createMarker:function(){return null!=this.lonlat&&(this.marker=new OpenLayers.Marker(this.lonlat,this.data.icon)),this.marker},destroyMarker:function(){this.marker.destroy()},createPopup:function(e){if(null!=this.lonlat){if(!this.popup){var t=this.marker?this.marker.icon:null,n=this.popupClass?this.popupClass:OpenLayers.Popup.Anchored;this.popup=new n(this.id+"_popup",this.lonlat,this.data.popupSize,this.data.popupContentHTML,t,e)}null!=this.data.overflow&&(this.popup.contentDiv.style.overflow=this.data.overflow),this.popup.feature=this}return this.popup},destroyPopup:function(){this.popup&&(this.popup.feature=null,this.popup.destroy(),this.popup=null)},CLASS_NAME:"OpenLayers.Feature"}),OpenLayers.State={UNKNOWN:"Unknown",INSERT:"Insert",UPDATE:"Update",DELETE:"Delete"},OpenLayers.Feature.Vector=OpenLayers.Class(OpenLayers.Feature,{fid:null,geometry:null,attributes:null,bounds:null,state:null,style:null,url:null,renderIntent:"default",modified:null,initialize:function(e,t,n){OpenLayers.Feature.prototype.initialize.apply(this,[null,null,t]),this.lonlat=null,this.geometry=e?e:null,this.state=null,this.attributes={},t&&(this.attributes=OpenLayers.Util.extend(this.attributes,t)),this.style=n?n:null},destroy:function(){this.layer&&(this.layer.removeFeatures(this),this.layer=null),this.geometry=null,this.modified=null,OpenLayers.Feature.prototype.destroy.apply(this,arguments)},clone:function(){return new OpenLayers.Feature.Vector(this.geometry?this.geometry.clone():null,this.attributes,this.style)},onScreen:function(e){var t=!1;if(this.layer&&this.layer.map){var n=this.layer.map.getExtent();if(e){var i=this.geometry.getBounds();t=n.intersectsBounds(i)}else{var r=n.toGeometry();t=r.intersects(this.geometry)}}return t},getVisibility:function(){return!(this.style&&"none"==this.style.display||!this.layer||this.layer&&this.layer.styleMap&&"none"==this.layer.styleMap.createSymbolizer(this,this.renderIntent).display||this.layer&&!this.layer.getVisibility())},createMarker:function(){return null},destroyMarker:function(){},createPopup:function(){return null},atPoint:function(e,t,n){var i=!1;return this.geometry&&(i=this.geometry.atPoint(e,t,n)),i},destroyPopup:function(){},move:function(e){if(this.layer&&this.geometry.move){var t;t="OpenLayers.LonLat"==e.CLASS_NAME?this.layer.getViewPortPxFromLonLat(e):e;var n=this.layer.getViewPortPxFromLonLat(this.geometry.getBounds().getCenterLonLat()),i=this.layer.map.getResolution();return this.geometry.move(i*(t.x-n.x),i*(n.y-t.y)),this.layer.drawFeature(this),n}},toState:function(e){if(e==OpenLayers.State.UPDATE)switch(this.state){case OpenLayers.State.UNKNOWN:case OpenLayers.State.DELETE:this.state=e;break;case OpenLayers.State.UPDATE:case OpenLayers.State.INSERT:}else if(e==OpenLayers.State.INSERT)switch(this.state){case OpenLayers.State.UNKNOWN:break;default:this.state=e}else if(e==OpenLayers.State.DELETE)switch(this.state){case OpenLayers.State.INSERT:break;case OpenLayers.State.DELETE:break;case OpenLayers.State.UNKNOWN:case OpenLayers.State.UPDATE:this.state=e}else e==OpenLayers.State.UNKNOWN&&(this.state=e)},CLASS_NAME:"OpenLayers.Feature.Vector"}),OpenLayers.Feature.Vector.style={default:{fillColor:"#ee9900",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#ee9900",strokeOpacity:1,strokeWidth:1,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"inherit",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},select:{fillColor:"blue",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"blue",strokeOpacity:1,strokeWidth:2,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"pointer",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},temporary:{fillColor:"#66cccc",fillOpacity:.2,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#66cccc",strokeOpacity:1,strokeLinecap:"round",strokeWidth:2,strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"inherit",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},delete:{display:"none"}},OpenLayers.Style=OpenLayers.Class({id:null,name:null,title:null,description:null,layerName:null,isDefault:!1,rules:null,context:null,defaultStyle:null,defaultsPerSymbolizer:!1,propertyStyles:null,initialize:function(e,t){OpenLayers.Util.extend(this,t),this.rules=[],t&&t.rules&&this.addRules(t.rules),this.setDefaultStyle(e||OpenLayers.Feature.Vector.style.default),this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},destroy:function(){for(var e=0,t=this.rules.length;e<t;e++)this.rules[e].destroy(),this.rules[e]=null;this.rules=null,this.defaultStyle=null},createSymbolizer:function(e){for(var t,n=this.defaultsPerSymbolizer?{}:this.createLiterals(OpenLayers.Util.extend({},this.defaultStyle),e),i=this.rules,r=[],s=!1,o=0,a=i.length;o<a;o++){t=i[o];var l=t.evaluate(e);l&&(t instanceof OpenLayers.Rule&&t.elseFilter?r.push(t):(s=!0,this.applySymbolizer(t,n,e)))}if(0==s&&r.length>0){s=!0;for(var o=0,a=r.length;o<a;o++)this.applySymbolizer(r[o],n,e)}return i.length>0&&0==s&&(n.display="none"),null!=n.label&&"string"!=typeof n.label&&(n.label=String(n.label)),n},applySymbolizer:function(e,t,n){var i=n.geometry?this.getSymbolizerPrefix(n.geometry):OpenLayers.Style.SYMBOLIZER_PREFIXES[0],r=e.symbolizer[i]||e.symbolizer;if(this.defaultsPerSymbolizer===!0){var s=this.defaultStyle;OpenLayers.Util.applyDefaults(r,{pointRadius:s.pointRadius}),r.stroke!==!0&&r.graphic!==!0||OpenLayers.Util.applyDefaults(r,{strokeWidth:s.strokeWidth,strokeColor:s.strokeColor,strokeOpacity:s.strokeOpacity,strokeDashstyle:s.strokeDashstyle,strokeLinecap:s.strokeLinecap}),r.fill!==!0&&r.graphic!==!0||OpenLayers.Util.applyDefaults(r,{fillColor:s.fillColor,fillOpacity:s.fillOpacity}),r.graphic===!0&&OpenLayers.Util.applyDefaults(r,{pointRadius:this.defaultStyle.pointRadius,externalGraphic:this.defaultStyle.externalGraphic,graphicName:this.defaultStyle.graphicName,graphicOpacity:this.defaultStyle.graphicOpacity,graphicWidth:this.defaultStyle.graphicWidth,graphicHeight:this.defaultStyle.graphicHeight,graphicXOffset:this.defaultStyle.graphicXOffset,graphicYOffset:this.defaultStyle.graphicYOffset})}return this.createLiterals(OpenLayers.Util.extend(t,r),n)},createLiterals:function(e,t){var n=OpenLayers.Util.extend({},t.attributes||t.data);OpenLayers.Util.extend(n,this.context);for(var i in this.propertyStyles)e[i]=OpenLayers.Style.createLiteral(e[i],n,t,i);return e},findPropertyStyles:function(){var e={},t=this.defaultStyle;this.addPropertyStyles(e,t);for(var n,i,r=this.rules,s=0,o=r.length;s<o;s++){n=r[s].symbolizer;for(var a in n){if(i=n[a],"object"!=typeof i){this.addPropertyStyles(e,n);break}this.addPropertyStyles(e,i)}}return e},addPropertyStyles:function(e,t){var n;for(var i in t)n=t[i],"string"==typeof n&&n.match(/\$\{\w+\}/)&&(e[i]=!0);return e},addRules:function(e){Array.prototype.push.apply(this.rules,e),this.propertyStyles=this.findPropertyStyles()},setDefaultStyle:function(e){this.defaultStyle=e,this.propertyStyles=this.findPropertyStyles()},getSymbolizerPrefix:function(e){for(var t=OpenLayers.Style.SYMBOLIZER_PREFIXES,n=0,i=t.length;n<i;n++)if(e.CLASS_NAME.indexOf(t[n])!=-1)return t[n]},clone:function(){var e=OpenLayers.Util.extend({},this);if(this.rules){e.rules=[];for(var t=0,n=this.rules.length;t<n;++t)e.rules.push(this.rules[t].clone())}e.context=this.context&&OpenLayers.Util.extend({},this.context);var i=OpenLayers.Util.extend({},this.defaultStyle);return new OpenLayers.Style(i,e)},CLASS_NAME:"OpenLayers.Style"}),OpenLayers.Style.createLiteral=function(e,t,n,i){return"string"==typeof e&&e.indexOf("${")!=-1&&(e=OpenLayers.String.format(e,t,[n,i]),e=isNaN(e)||!e?e:parseFloat(e)),e},OpenLayers.Style.SYMBOLIZER_PREFIXES=["Point","Line","Polygon","Text","Raster"],OpenLayers.StyleMap=OpenLayers.Class({styles:null,extendDefault:!0,initialize:function(e,t){if(this.styles={default:new OpenLayers.Style(OpenLayers.Feature.Vector.style.default),select:new OpenLayers.Style(OpenLayers.Feature.Vector.style.select),temporary:new OpenLayers.Style(OpenLayers.Feature.Vector.style.temporary),delete:new OpenLayers.Style(OpenLayers.Feature.Vector.style.delete)},e instanceof OpenLayers.Style)this.styles.default=e,this.styles.select=e,this.styles.temporary=e,this.styles.delete=e;else if("object"==typeof e)for(var n in e)if(e[n]instanceof OpenLayers.Style)this.styles[n]=e[n];else{if("object"!=typeof e[n]){this.styles.default=new OpenLayers.Style(e),this.styles.select=new OpenLayers.Style(e),this.styles.temporary=new OpenLayers.Style(e),this.styles.delete=new OpenLayers.Style(e);break}this.styles[n]=new OpenLayers.Style(e[n])}OpenLayers.Util.extend(this,t)},destroy:function(){for(var e in this.styles)this.styles[e].destroy();this.styles=null},createSymbolizer:function(e,t){e||(e=new OpenLayers.Feature.Vector),this.styles[t]||(t="default"),e.renderIntent=t;var n={};return this.extendDefault&&"default"!=t&&(n=this.styles.default.createSymbolizer(e)),OpenLayers.Util.extend(n,this.styles[t].createSymbolizer(e))},addUniqueValueRules:function(e,t,n,i){var r=[];for(var s in n)r.push(new OpenLayers.Rule({symbolizer:n[s],context:i,filter:new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.EQUAL_TO,property:t,value:s})}));this.styles[e].addRules(r)},CLASS_NAME:"OpenLayers.StyleMap"}),OpenLayers.Layer.Vector=OpenLayers.Class(OpenLayers.Layer,{isBaseLayer:!1,isFixed:!1,features:null,filter:null,selectedFeatures:null,unrenderedFeatures:null,reportError:!0,style:null,styleMap:null,strategies:null,protocol:null,renderers:["SVG","VML","Canvas"],renderer:null,rendererOptions:null,geometryType:null,drawn:!1,ratio:1,initialize:function(e,t){if(OpenLayers.Layer.prototype.initialize.apply(this,arguments),this.renderer&&this.renderer.supported()||this.assignRenderer(),this.renderer&&this.renderer.supported()||(this.renderer=null,this.displayError()),this.styleMap||(this.styleMap=new OpenLayers.StyleMap),this.features=[],this.selectedFeatures=[],this.unrenderedFeatures={},this.strategies)for(var n=0,i=this.strategies.length;n<i;n++)this.strategies[n].setLayer(this)},destroy:function(){if(this.strategies){var e,t,n;for(t=0,n=this.strategies.length;t<n;t++)e=this.strategies[t],e.autoDestroy&&e.destroy();this.strategies=null}this.protocol&&(this.protocol.autoDestroy&&this.protocol.destroy(),this.protocol=null),this.destroyFeatures(),this.features=null,this.selectedFeatures=null,this.unrenderedFeatures=null,this.renderer&&this.renderer.destroy(),this.renderer=null,this.geometryType=null,this.drawn=null,OpenLayers.Layer.prototype.destroy.apply(this,arguments)},clone:function(e){null==e&&(e=new OpenLayers.Layer.Vector(this.name,this.getOptions())),e=OpenLayers.Layer.prototype.clone.apply(this,[e]);for(var t=this.features,n=t.length,i=new Array(n),r=0;r<n;++r)i[r]=t[r].clone();return e.features=i,e},refresh:function(e){this.calculateInRange()&&this.visibility&&this.events.triggerEvent("refresh",e)},assignRenderer:function(){for(var e=0,t=this.renderers.length;e<t;e++){var n=this.renderers[e],i="function"==typeof n?n:OpenLayers.Renderer[n];if(i&&i.prototype.supported()){this.renderer=new i(this.div,this.rendererOptions);break}}},displayError:function(){this.reportError&&OpenLayers.Console.userError(OpenLayers.i18n("browserNotSupported",{renderers:this.renderers.join("\n")}))},setMap:function(e){if(OpenLayers.Layer.prototype.setMap.apply(this,arguments),this.renderer){this.renderer.map=this.map;var t=this.map.getSize();t.w=t.w*this.ratio,t.h=t.h*this.ratio,this.renderer.setSize(t)}else this.map.removeLayer(this)},afterAdd:function(){if(this.strategies){var e,t,n;for(t=0,n=this.strategies.length;t<n;t++)e=this.strategies[t],e.autoActivate&&e.activate()}},removeMap:function(e){if(this.drawn=!1,this.strategies){var t,n,i;for(n=0,i=this.strategies.length;n<i;n++)t=this.strategies[n],t.autoActivate&&t.deactivate()}},onMapResize:function(){OpenLayers.Layer.prototype.onMapResize.apply(this,arguments);var e=this.map.getSize();e.w=e.w*this.ratio,e.h=e.h*this.ratio,this.renderer.setSize(e)},moveTo:function(e,t,n){OpenLayers.Layer.prototype.moveTo.apply(this,arguments);var i=!0;if(!n){this.renderer.root.style.visibility="hidden";var r=this.map.getSize(),s=r.w,o=r.h,a=s/2*this.ratio-s/2,l=o/2*this.ratio-o/2;a+=this.map.layerContainerOriginPx.x,a=-Math.round(a),l+=this.map.layerContainerOriginPx.y,l=-Math.round(l),this.div.style.left=a+"px",this.div.style.top=l+"px";var u=this.map.getExtent().scale(this.ratio);if(i=this.renderer.setExtent(u,t),this.renderer.root.style.visibility="visible",OpenLayers.IS_GECKO===!0&&(this.div.scrollLeft=this.div.scrollLeft),!t&&i)for(var h in this.unrenderedFeatures){var c=this.unrenderedFeatures[h];this.drawFeature(c)}}if(!this.drawn||t||!i){this.drawn=!0;for(var c,h=0,p=this.features.length;h<p;h++)this.renderer.locked=h!==p-1,c=this.features[h],this.drawFeature(c)}},display:function(e){OpenLayers.Layer.prototype.display.apply(this,arguments);var t=this.div.style.display;t!=this.renderer.root.style.display&&(this.renderer.root.style.display=t)},addFeatures:function(e,t){OpenLayers.Util.isArray(e)||(e=[e]);var n=!t||!t.silent;if(n){var i={features:e},r=this.events.triggerEvent("beforefeaturesadded",i);if(r===!1)return;e=i.features}for(var s=[],o=0,a=e.length;o<a;o++){o!=e.length-1?this.renderer.locked=!0:this.renderer.locked=!1;var l=e[o];if(this.geometryType&&!(l.geometry instanceof this.geometryType))throw new TypeError("addFeatures: component should be an "+this.geometryType.prototype.CLASS_NAME);if(l.layer=this,!l.style&&this.style&&(l.style=OpenLayers.Util.extend({},this.style)),n){if(this.events.triggerEvent("beforefeatureadded",{feature:l})===!1)continue;this.preFeatureInsert(l)}s.push(l),this.features.push(l),this.drawFeature(l),n&&(this.events.triggerEvent("featureadded",{feature:l}),this.onFeatureInsert(l))}n&&this.events.triggerEvent("featuresadded",{features:s})},removeFeatures:function(e,t){if(e&&0!==e.length){if(e===this.features)return this.removeAllFeatures(t);OpenLayers.Util.isArray(e)||(e=[e]),e===this.selectedFeatures&&(e=e.slice());var n=!t||!t.silent;n&&this.events.triggerEvent("beforefeaturesremoved",{features:e});for(var i=e.length-1;i>=0;i--){0!=i&&e[i-1].geometry?this.renderer.locked=!0:this.renderer.locked=!1;var r=e[i];delete this.unrenderedFeatures[r.id],n&&this.events.triggerEvent("beforefeatureremoved",{feature:r}),this.features=OpenLayers.Util.removeItem(this.features,r),r.layer=null,r.geometry&&this.renderer.eraseFeatures(r),OpenLayers.Util.indexOf(this.selectedFeatures,r)!=-1&&OpenLayers.Util.removeItem(this.selectedFeatures,r),n&&this.events.triggerEvent("featureremoved",{feature:r})}n&&this.events.triggerEvent("featuresremoved",{features:e})}},removeAllFeatures:function(e){var t=!e||!e.silent,n=this.features;t&&this.events.triggerEvent("beforefeaturesremoved",{features:n});for(var i,r=n.length-1;r>=0;r--)i=n[r],t&&this.events.triggerEvent("beforefeatureremoved",{feature:i}),i.layer=null,t&&this.events.triggerEvent("featureremoved",{feature:i});this.renderer.clear(),this.features=[],this.unrenderedFeatures={},this.selectedFeatures=[],t&&this.events.triggerEvent("featuresremoved",{features:n})},destroyFeatures:function(e,t){var n=void 0==e;if(n&&(e=this.features),e){this.removeFeatures(e,t);
for(var i=e.length-1;i>=0;i--)e[i].destroy()}},drawFeature:function(e,t){if(this.drawn){if("object"!=typeof t){t||e.state!==OpenLayers.State.DELETE||(t="delete");var n=t||e.renderIntent;t=e.style||this.style,t||(t=this.styleMap.createSymbolizer(e,n))}var i=this.renderer.drawFeature(e,t);i===!1||null===i?this.unrenderedFeatures[e.id]=e:delete this.unrenderedFeatures[e.id]}},eraseFeatures:function(e){this.renderer.eraseFeatures(e)},getFeatureFromEvent:function(e){if(!this.renderer)throw new Error("getFeatureFromEvent called on layer with no renderer. This usually means you destroyed a layer, but not some handler which is associated with it.");var t=null,n=this.renderer.getFeatureIdFromEvent(e);return n&&(t="string"==typeof n?this.getFeatureById(n):n),t},getFeatureBy:function(e,t){for(var n=null,i=0,r=this.features.length;i<r;++i)if(this.features[i][e]==t){n=this.features[i];break}return n},getFeatureById:function(e){return this.getFeatureBy("id",e)},getFeatureByFid:function(e){return this.getFeatureBy("fid",e)},getFeaturesByAttribute:function(e,t){var n,i,r=this.features.length,s=[];for(n=0;n<r;n++)i=this.features[n],i&&i.attributes&&i.attributes[e]===t&&s.push(i);return s},onFeatureInsert:function(e){},preFeatureInsert:function(e){},getDataExtent:function(){var e=null,t=this.features;if(t&&t.length>0)for(var n=null,i=0,r=t.length;i<r;i++)n=t[i].geometry,n&&(null===e&&(e=new OpenLayers.Bounds),e.extend(n.getBounds()));return e},CLASS_NAME:"OpenLayers.Layer.Vector"}),OpenLayers.Layer.Markers=OpenLayers.Class(OpenLayers.Layer,{isBaseLayer:!1,markers:null,drawn:!1,initialize:function(e,t){OpenLayers.Layer.prototype.initialize.apply(this,arguments),this.markers=[]},destroy:function(){this.clearMarkers(),this.markers=null,OpenLayers.Layer.prototype.destroy.apply(this,arguments)},setOpacity:function(e){if(e!=this.opacity){this.opacity=e;for(var t=0,n=this.markers.length;t<n;t++)this.markers[t].setOpacity(this.opacity)}},moveTo:function(e,t,n){if(OpenLayers.Layer.prototype.moveTo.apply(this,arguments),t||!this.drawn){for(var i=0,r=this.markers.length;i<r;i++)this.drawMarker(this.markers[i]);this.drawn=!0}},addMarker:function(e){this.markers.push(e),this.opacity<1&&e.setOpacity(this.opacity),this.map&&this.map.getExtent()&&(e.map=this.map,this.drawMarker(e))},removeMarker:function(e){this.markers&&this.markers.length&&(OpenLayers.Util.removeItem(this.markers,e),e.erase())},clearMarkers:function(){if(null!=this.markers)for(;this.markers.length>0;)this.removeMarker(this.markers[0])},drawMarker:function(e){var t=this.map.getLayerPxFromLonLat(e.lonlat);if(null==t)e.display(!1);else if(e.isDrawn())e.icon&&e.icon.moveTo(t);else{var n=e.draw(t);this.div.appendChild(n)}},getDataExtent:function(){var e=null;if(this.markers&&this.markers.length>0)for(var e=new OpenLayers.Bounds,t=0,n=this.markers.length;t<n;t++){var i=this.markers[t];e.extend(i.lonlat)}return e},CLASS_NAME:"OpenLayers.Layer.Markers"}),OpenLayers.Layer.Zoomify=OpenLayers.Class(OpenLayers.Layer.Grid,{size:null,isBaseLayer:!0,standardTileSize:256,tileOriginCorner:"tl",numberOfTiers:0,tileCountUpToTier:null,tierSizeInTiles:null,tierImageSize:null,initialize:function(e,t,n,i){this.initializeZoomify(n),OpenLayers.Layer.Grid.prototype.initialize.apply(this,[e,t,{},i])},initializeZoomify:function(e){var t=e.clone();this.size=e.clone();var n=new OpenLayers.Size(Math.ceil(t.w/this.standardTileSize),Math.ceil(t.h/this.standardTileSize));for(this.tierSizeInTiles=[n],this.tierImageSize=[t];t.w>this.standardTileSize||t.h>this.standardTileSize;)t=new OpenLayers.Size(Math.floor(t.w/2),Math.floor(t.h/2)),n=new OpenLayers.Size(Math.ceil(t.w/this.standardTileSize),Math.ceil(t.h/this.standardTileSize)),this.tierSizeInTiles.push(n),this.tierImageSize.push(t);this.tierSizeInTiles.reverse(),this.tierImageSize.reverse(),this.numberOfTiers=this.tierSizeInTiles.length;var i=[1];this.tileCountUpToTier=[0];for(var r=1;r<this.numberOfTiers;r++)i.unshift(Math.pow(2,r)),this.tileCountUpToTier.push(this.tierSizeInTiles[r-1].w*this.tierSizeInTiles[r-1].h+this.tileCountUpToTier[r-1]);this.serverResolutions||(this.serverResolutions=i)},destroy:function(){OpenLayers.Layer.Grid.prototype.destroy.apply(this,arguments),this.tileCountUpToTier.length=0,this.tierSizeInTiles.length=0,this.tierImageSize.length=0},clone:function(e){return null==e&&(e=new OpenLayers.Layer.Zoomify(this.name,this.url,this.size,this.options)),e=OpenLayers.Layer.Grid.prototype.clone.apply(this,[e])},createBackBuffer:function(){var e=OpenLayers.Layer.Grid.prototype.createBackBuffer.apply(this,arguments);if(e)for(var t,n=e.childNodes.length-1;n>=0;--n)t=e.childNodes[n],t._w=t.width,t._h=t.height;return e},getURL:function(e){e=this.adjustBounds(e);var t=this.getServerResolution(),n=Math.round((e.left-this.tileOrigin.lon)/(t*this.tileSize.w)),i=Math.round((this.tileOrigin.lat-e.top)/(t*this.tileSize.h)),r=this.getZoomForResolution(t),s=n+i*this.tierSizeInTiles[r].w+this.tileCountUpToTier[r],o="TileGroup"+Math.floor(s/256)+"/"+r+"-"+n+"-"+i+".jpg",a=this.url;return OpenLayers.Util.isArray(a)&&(a=this.selectUrl(o,a)),a+o},getImageSize:function(){if(arguments.length>0){var e=this.adjustBounds(arguments[0]),t=this.getServerResolution(),n=Math.round((e.left-this.tileOrigin.lon)/(t*this.tileSize.w)),i=Math.round((this.tileOrigin.lat-e.top)/(t*this.tileSize.h)),r=this.getZoomForResolution(t),s=this.standardTileSize,o=this.standardTileSize;if(n==this.tierSizeInTiles[r].w-1){var s=this.tierImageSize[r].w%this.standardTileSize;0==s&&(s=this.standardTileSize)}if(i==this.tierSizeInTiles[r].h-1){var o=this.tierImageSize[r].h%this.standardTileSize;0==o&&(o=this.standardTileSize)}return n==this.tierSizeInTiles[r].w&&(s=Math.ceil(this.size.w/Math.pow(2,this.numberOfTiers-1-r)-this.tierImageSize[r].w)),i==this.tierSizeInTiles[r].h&&(o=Math.ceil(this.size.h/Math.pow(2,this.numberOfTiers-1-r)-this.tierImageSize[r].h)),new OpenLayers.Size(s,o)}return this.tileSize},setMap:function(e){OpenLayers.Layer.Grid.prototype.setMap.apply(this,arguments),this.tileOrigin=new OpenLayers.LonLat(this.map.maxExtent.left,this.map.maxExtent.top)},CLASS_NAME:"OpenLayers.Layer.Zoomify"}),OpenLayers.Layer.TMS=OpenLayers.Class(OpenLayers.Layer.Grid,{serviceVersion:"1.0.0",layername:null,type:null,isBaseLayer:!0,tileOrigin:null,serverResolutions:null,zoomOffset:0,initialize:function(e,t,n){var i=[];i.push(e,t,{},n),OpenLayers.Layer.Grid.prototype.initialize.apply(this,i)},clone:function(e){return null==e&&(e=new OpenLayers.Layer.TMS(this.name,this.url,this.getOptions())),e=OpenLayers.Layer.Grid.prototype.clone.apply(this,[e])},getURL:function(e){e=this.adjustBounds(e);var t=this.getServerResolution(),n=Math.round((e.left-this.tileOrigin.lon)/(t*this.tileSize.w)),i=Math.round((e.bottom-this.tileOrigin.lat)/(t*this.tileSize.h)),r=this.getServerZoom(),s=this.serviceVersion+"/"+this.layername+"/"+r+"/"+n+"/"+i+"."+this.type,o=this.url;return OpenLayers.Util.isArray(o)&&(o=this.selectUrl(s,o)),o+s},setMap:function(e){OpenLayers.Layer.Grid.prototype.setMap.apply(this,arguments),this.tileOrigin||(this.tileOrigin=new OpenLayers.LonLat(this.map.maxExtent.left,this.map.maxExtent.bottom))},CLASS_NAME:"OpenLayers.Layer.TMS"}),OpenLayers.Date={dateRegEx:/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:(?:T(\d{1,2}):(\d{2}):(\d{2}(?:\.\d+)?)(Z|(?:[+-]\d{1,2}(?::(\d{2}))?)))|Z)?$/,toISOString:function(){return"toISOString"in Date.prototype?function(e){return e.toISOString()}:function(e){var t;return t=isNaN(e.getTime())?"Invalid Date":e.getUTCFullYear()+"-"+OpenLayers.Number.zeroPad(e.getUTCMonth()+1,2)+"-"+OpenLayers.Number.zeroPad(e.getUTCDate(),2)+"T"+OpenLayers.Number.zeroPad(e.getUTCHours(),2)+":"+OpenLayers.Number.zeroPad(e.getUTCMinutes(),2)+":"+OpenLayers.Number.zeroPad(e.getUTCSeconds(),2)+"."+OpenLayers.Number.zeroPad(e.getUTCMilliseconds(),3)+"Z"}}(),parse:function(e){var t,n=e.match(this.dateRegEx);if(n&&(n[1]||n[7])){var i=parseInt(n[1],10)||0,r=parseInt(n[2],10)-1||0,s=parseInt(n[3],10)||1;t=new Date(Date.UTC(i,r,s));var o=n[7];if(o){var a=parseInt(n[4],10),l=parseInt(n[5],10),u=parseFloat(n[6]),h=0|u,c=Math.round(1e3*(u-h));if(t.setUTCHours(a,l,h,c),"Z"!==o){var p=parseInt(o,10),d=parseInt(n[8],10)||0,f=-1e3*(60*(60*p)+60*d);t=new Date(t.getTime()+f)}}}else t=new Date("invalid");return t}},OpenLayers.Format=OpenLayers.Class({options:null,externalProjection:null,internalProjection:null,data:null,keepData:!1,initialize:function(e){OpenLayers.Util.extend(this,e),this.options=e},destroy:function(){},read:function(e){throw new Error("Read not implemented.")},write:function(e){throw new Error("Write not implemented.")},CLASS_NAME:"OpenLayers.Format"}),OpenLayers.Format.XML=OpenLayers.Class(OpenLayers.Format,{namespaces:null,namespaceAlias:null,defaultPrefix:null,readers:{},writers:{},xmldom:null,initialize:function(e){OpenLayers.Format.XML.supportActiveX&&(this.xmldom=new ActiveXObject("Microsoft.XMLDOM")),OpenLayers.Format.prototype.initialize.apply(this,[e]),this.namespaces=OpenLayers.Util.extend({},this.namespaces),this.namespaceAlias={};for(var t in this.namespaces)this.namespaceAlias[this.namespaces[t]]=t},destroy:function(){this.xmldom=null,OpenLayers.Format.prototype.destroy.apply(this,arguments)},setNamespace:function(e,t){this.namespaces[e]=t,this.namespaceAlias[t]=e},read:function(e){var t=e.indexOf("<");t>0&&(e=e.substring(t));var n=OpenLayers.Util.Try(OpenLayers.Function.bind(function(){var t;return t=OpenLayers.Format.XML.supportActiveX&&!this.xmldom?new ActiveXObject("Microsoft.XMLDOM"):this.xmldom,t.loadXML(e),t},this),function(){return(new DOMParser).parseFromString(e,"text/xml")},function(){var t=new XMLHttpRequest;return t.open("GET","data:text/xml;charset=utf-8,"+encodeURIComponent(e),!1),t.overrideMimeType&&t.overrideMimeType("text/xml"),t.send(null),t.responseXML});return this.keepData&&(this.data=n),n},write:function(e){var t;if(this.xmldom)t=e.xml;else{var n=new XMLSerializer;if(1==e.nodeType){var i=document.implementation.createDocument("","",null);i.importNode&&(e=i.importNode(e,!0)),i.appendChild(e),t=n.serializeToString(i)}else t=n.serializeToString(e)}return t},createElementNS:function(e,t){var n;return n=this.xmldom?"string"==typeof e?this.xmldom.createNode(1,t,e):this.xmldom.createNode(1,t,""):document.createElementNS(e,t)},createDocumentFragment:function(){var e;return e=this.xmldom?this.xmldom.createDocumentFragment():document.createDocumentFragment()},createTextNode:function(e){var t;return"string"!=typeof e&&(e=String(e)),t=this.xmldom?this.xmldom.createTextNode(e):document.createTextNode(e)},getElementsByTagNameNS:function(e,t,n){var i=[];if(e.getElementsByTagNameNS)i=e.getElementsByTagNameNS(t,n);else for(var r,s,o=e.getElementsByTagName("*"),a=0,l=o.length;a<l;++a)r=o[a],s=r.prefix?r.prefix+":"+n:n,"*"!=n&&s!=r.nodeName||"*"!=t&&t!=r.namespaceURI||i.push(r);return i},getAttributeNodeNS:function(e,t,n){var i=null;if(e.getAttributeNodeNS)i=e.getAttributeNodeNS(t,n);else for(var r,s,o=e.attributes,a=0,l=o.length;a<l;++a)if(r=o[a],r.namespaceURI==t&&(s=r.prefix?r.prefix+":"+n:n,s==r.nodeName)){i=r;break}return i},getAttributeNS:function(e,t,n){var i="";if(e.getAttributeNS)i=e.getAttributeNS(t,n)||"";else{var r=this.getAttributeNodeNS(e,t,n);r&&(i=r.nodeValue)}return i},getChildValue:function(e,t){var n=t||"";if(e)for(var i=e.firstChild;i;i=i.nextSibling)switch(i.nodeType){case 3:case 4:n+=i.nodeValue}return n},isSimpleContent:function(e){for(var t=!0,n=e.firstChild;n;n=n.nextSibling)if(1===n.nodeType){t=!1;break}return t},contentType:function(e){for(var t=!1,n=!1,i=OpenLayers.Format.XML.CONTENT_TYPE.EMPTY,r=e.firstChild;r;r=r.nextSibling){switch(r.nodeType){case 1:n=!0;break;case 8:break;default:t=!0}if(n&&t)break}if(n&&t)i=OpenLayers.Format.XML.CONTENT_TYPE.MIXED;else{if(n)return OpenLayers.Format.XML.CONTENT_TYPE.COMPLEX;if(t)return OpenLayers.Format.XML.CONTENT_TYPE.SIMPLE}return i},hasAttributeNS:function(e,t,n){var i=!1;return i=e.hasAttributeNS?e.hasAttributeNS(t,n):!!this.getAttributeNodeNS(e,t,n)},setAttributeNS:function(e,t,n,i){if(e.setAttributeNS)e.setAttributeNS(t,n,i);else{if(!this.xmldom)throw"setAttributeNS not implemented";if(t){var r=e.ownerDocument.createNode(2,n,t);r.nodeValue=i,e.setAttributeNode(r)}else e.setAttribute(n,i)}},createElementNSPlus:function(e,t){t=t||{};var n=t.uri||this.namespaces[t.prefix];if(!n){var i=e.indexOf(":");n=this.namespaces[e.substring(0,i)]}n||(n=this.namespaces[this.defaultPrefix]);var r=this.createElementNS(n,e);t.attributes&&this.setAttributes(r,t.attributes);var s=t.value;return null!=s&&r.appendChild(this.createTextNode(s)),r},setAttributes:function(e,t){var n,i;for(var r in t)null!=t[r]&&t[r].toString&&(n=t[r].toString(),i=this.namespaces[r.substring(0,r.indexOf(":"))]||null,this.setAttributeNS(e,i,r,n))},getFirstElementChild:function(e){if(e.firstElementChild)return e.firstElementChild;for(var t=e.firstChild;1!=t.nodeType&&(t=t.nextSibling););return t},readNode:function(e,t){t||(t={});var n=this.readers[e.namespaceURI?this.namespaceAlias[e.namespaceURI]:this.defaultPrefix];if(n){var i=e.localName||e.nodeName.split(":").pop(),r=n[i]||n["*"];r&&r.apply(this,[e,t])}return t},readChildNodes:function(e,t){t||(t={});for(var n,i=e.childNodes,r=0,s=i.length;r<s;++r)n=i[r],1==n.nodeType&&this.readNode(n,t);return t},writeNode:function(e,t,n){var i,r,s=e.indexOf(":");s>0?(i=e.substring(0,s),r=e.substring(s+1)):(i=n?this.namespaceAlias[n.namespaceURI]:this.defaultPrefix,r=e);var o=this.writers[i][r].apply(this,[t]);return n&&n.appendChild(o),o},getChildEl:function(e,t,n){return e&&this.getThisOrNextEl(e.firstChild,t,n)},getNextEl:function(e,t,n){return e&&this.getThisOrNextEl(e.nextSibling,t,n)},getThisOrNextEl:function(e,t,n){e:for(var i=e;i;i=i.nextSibling)switch(i.nodeType){case 1:if(!(t&&t!==(i.localName||i.nodeName.split(":").pop())||n&&n!==i.namespaceURI))break e;i=null;break e;case 3:if(/^\s*$/.test(i.nodeValue))break;case 4:case 6:case 12:case 10:case 11:i=null;break e}return i||null},lookupNamespaceURI:function(e,t){var n=null;if(e)if(e.lookupNamespaceURI)n=e.lookupNamespaceURI(t);else e:switch(e.nodeType){case 1:if(null!==e.namespaceURI&&e.prefix===t){n=e.namespaceURI;break e}var i=e.attributes.length;if(i)for(var r,s=0;s<i;++s){if(r=e.attributes[s],"xmlns"===r.prefix&&r.name==="xmlns:"+t){n=r.value||null;break e}if("xmlns"===r.name&&null===t){n=r.value||null;break e}}n=this.lookupNamespaceURI(e.parentNode,t);break e;case 2:n=this.lookupNamespaceURI(e.ownerElement,t);break e;case 9:n=this.lookupNamespaceURI(e.documentElement,t);break e;case 6:case 12:case 10:case 11:break e;default:n=this.lookupNamespaceURI(e.parentNode,t)}return n},getXMLDoc:function(){return OpenLayers.Format.XML.document||this.xmldom||(document.implementation&&document.implementation.createDocument?OpenLayers.Format.XML.document=document.implementation.createDocument("","",null):!this.xmldom&&OpenLayers.Format.XML.supportActiveX&&(this.xmldom=new ActiveXObject("Microsoft.XMLDOM"))),OpenLayers.Format.XML.document||this.xmldom},CLASS_NAME:"OpenLayers.Format.XML"}),OpenLayers.Format.XML.CONTENT_TYPE={EMPTY:0,SIMPLE:1,COMPLEX:2,MIXED:3},OpenLayers.Format.XML.lookupNamespaceURI=OpenLayers.Function.bind(OpenLayers.Format.XML.prototype.lookupNamespaceURI,OpenLayers.Format.XML.prototype),OpenLayers.Format.XML.document=null,OpenLayers.Format.XML.supportActiveX=function(){return Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(window,"ActiveXObject")||"ActiveXObject"in window}(),OpenLayers.Format.KML=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{kml:"http://www.opengis.net/kml/2.2",gx:"http://www.google.com/kml/ext/2.2"},kmlns:"http://earth.google.com/kml/2.0",placemarksDesc:"No description available",foldersName:"OpenLayers export",foldersDesc:"Exported on "+new Date,extractAttributes:!0,kvpAttributes:!1,extractStyles:!1,extractTracks:!1,trackAttributes:null,internalns:null,features:null,styles:null,styleBaseUrl:"",fetched:null,maxDepth:0,initialize:function(e){this.regExes={trimSpace:/^\s*|\s*$/g,removeSpace:/\s*/g,splitSpace:/\s+/,trimComma:/\s*,\s*/g,kmlColor:/(\w{2})(\w{2})(\w{2})(\w{2})/,kmlIconPalette:/root:\/\/icons\/palette-(\d+)(\.\w+)/,straightBracket:/\$\[(.*?)\]/g},this.externalProjection=new OpenLayers.Projection("EPSG:4326"),OpenLayers.Format.XML.prototype.initialize.apply(this,[e])},read:function(e){this.features=[],this.styles={},this.fetched={};var t={depth:0,styleBaseUrl:this.styleBaseUrl};return this.parseData(e,t)},parseData:function(e,t){"string"==typeof e&&(e=OpenLayers.Format.XML.prototype.read.apply(this,[e]));for(var n=["Link","NetworkLink","Style","StyleMap","Placemark"],i=0,r=n.length;i<r;++i){var s=n[i],o=this.getElementsByTagNameNS(e,"*",s);if(0!=o.length)switch(s.toLowerCase()){case"link":case"networklink":this.parseLinks(o,t);break;case"style":this.extractStyles&&this.parseStyles(o,t);break;case"stylemap":this.extractStyles&&this.parseStyleMaps(o,t);break;case"placemark":this.parseFeatures(o,t)}}return this.features},parseLinks:function(e,t){if(t.depth>=this.maxDepth)return!1;var n=OpenLayers.Util.extend({},t);n.depth++;for(var i=0,r=e.length;i<r;i++){var s=this.parseProperty(e[i],"*","href");if(s&&!this.fetched[s]){this.fetched[s]=!0;var o=this.fetchLink(s);o&&this.parseData(o,n)}}},fetchLink:function(e){var t=OpenLayers.Request.GET({url:e,async:!1});if(t)return t.responseText},parseStyles:function(e,t){for(var n=0,i=e.length;n<i;n++){var r=this.parseStyle(e[n]);if(r){var s=(t.styleBaseUrl||"")+"#"+r.id;this.styles[s]=r}}},parseKmlColor:function(e){var t=null;if(e){var n=e.match(this.regExes.kmlColor);n&&(t={color:"#"+n[4]+n[3]+n[2],opacity:parseInt(n[1],16)/255})}return t},parseStyle:function(e){for(var t,n,i={},r=["LineStyle","PolyStyle","IconStyle","BalloonStyle","LabelStyle"],s=0,o=r.length;s<o;++s)if(t=r[s],n=this.getElementsByTagNameNS(e,"*",t)[0])switch(t.toLowerCase()){case"linestyle":var a=this.parseProperty(n,"*","color"),l=this.parseKmlColor(a);l&&(i.strokeColor=l.color,i.strokeOpacity=l.opacity);var u=this.parseProperty(n,"*","width");u&&(i.strokeWidth=u);break;case"polystyle":var a=this.parseProperty(n,"*","color"),l=this.parseKmlColor(a);l&&(i.fillOpacity=l.opacity,i.fillColor=l.color);var h=this.parseProperty(n,"*","fill");"0"==h&&(i.fillColor="none");var c=this.parseProperty(n,"*","outline");"0"==c&&(i.strokeWidth="0");break;case"iconstyle":var p=parseFloat(this.parseProperty(n,"*","scale")||1),u=32*p,d=32*p,f=this.getElementsByTagNameNS(n,"*","Icon")[0];if(f){var y=this.parseProperty(f,"*","href");if(y){var m=this.parseProperty(f,"*","w"),g=this.parseProperty(f,"*","h"),v="http://maps.google.com/mapfiles/kml";!OpenLayers.String.startsWith(y,v)||m||g||(m=64,g=64,p/=2),m=m||g,g=g||m,m&&(u=parseInt(m)*p),g&&(d=parseInt(g)*p);var L=y.match(this.regExes.kmlIconPalette);if(L){var b=L[1],O=L[2],x=this.parseProperty(f,"*","x"),w=this.parseProperty(f,"*","y"),C=x?x/32:0,E=w?7-w/32:7,S=8*E+C;y="http://maps.google.com/mapfiles/kml/pal"+b+"/icon"+S+O}i.graphicOpacity=1,i.externalGraphic=y}}var _=this.getElementsByTagNameNS(n,"*","hotSpot")[0];if(_){var x=parseFloat(_.getAttribute("x")),w=parseFloat(_.getAttribute("y")),T=_.getAttribute("xunits");"pixels"==T?i.graphicXOffset=-x*p:"insetPixels"==T?i.graphicXOffset=-u+x*p:"fraction"==T&&(i.graphicXOffset=-u*x);var k=_.getAttribute("yunits");"pixels"==k?i.graphicYOffset=-d+w*p+1:"insetPixels"==k?i.graphicYOffset=-(w*p)+1:"fraction"==k&&(i.graphicYOffset=-d*(1-w)+1)}i.graphicWidth=u,i.graphicHeight=d;break;case"balloonstyle":var M=OpenLayers.Util.getXmlNodeValue(n);M&&(i.balloonStyle=M.replace(this.regExes.straightBracket,"${$1}"));break;case"labelstyle":var a=this.parseProperty(n,"*","color"),l=this.parseKmlColor(a);l&&(i.fontColor=l.color,i.fontOpacity=l.opacity)}!i.strokeColor&&i.fillColor&&(i.strokeColor=i.fillColor);var P=e.getAttribute("id");return P&&i&&(i.id=P),i},parseStyleMaps:function(e,t){for(var n=0,i=e.length;n<i;n++)for(var r=e[n],s=this.getElementsByTagNameNS(r,"*","Pair"),o=r.getAttribute("id"),a=0,l=s.length;a<l;a++){var u=s[a],h=this.parseProperty(u,"*","key"),c=this.parseProperty(u,"*","styleUrl");c&&"normal"==h&&(this.styles[(t.styleBaseUrl||"")+"#"+o]=this.styles[(t.styleBaseUrl||"")+c])}},parseFeatures:function(e,t){for(var n=[],i=0,r=e.length;i<r;i++){var s=e[i],o=this.parseFeature.apply(this,[s]);if(!o)throw"Bad Placemark: "+i;if(this.extractStyles&&o.attributes&&o.attributes.styleUrl&&(o.style=this.getStyle(o.attributes.styleUrl,t)),this.extractStyles){var a=this.getElementsByTagNameNS(s,"*","Style")[0];if(a){var l=this.parseStyle(a);l&&(o.style=OpenLayers.Util.extend(o.style,l))}}if(this.extractTracks){var u=this.getElementsByTagNameNS(s,this.namespaces.gx,"Track");if(u&&u.length>0){var h=u[0],c={features:[],feature:o};this.readNode(h,c),c.features.length>0&&n.push.apply(n,c.features)}}else n.push(o)}this.features=this.features.concat(n)},readers:{kml:{when:function(e,t){t.whens.push(OpenLayers.Date.parse(this.getChildValue(e)))},_trackPointAttribute:function(e,t){var n=e.nodeName.split(":").pop();t.attributes[n].push(this.getChildValue(e))}},gx:{Track:function(e,t){var n={whens:[],points:[],angles:[]};if(this.trackAttributes){var i;n.attributes={};for(var r=0,s=this.trackAttributes.length;r<s;++r)i=this.trackAttributes[r],n.attributes[i]=[],i in this.readers.kml||(this.readers.kml[i]=this.readers.kml._trackPointAttribute)}if(this.readChildNodes(e,n),n.whens.length!==n.points.length)throw new Error("gx:Track with unequal number of when ("+n.whens.length+") and gx:coord ("+n.points.length+") elements.");var o=n.angles.length>0;if(o&&n.whens.length!==n.angles.length)throw new Error("gx:Track with unequal number of when ("+n.whens.length+") and gx:angles ("+n.angles.length+") elements.");for(var a,l,u,r=0,s=n.whens.length;r<s;++r){if(a=t.feature.clone(),a.fid=t.feature.fid||t.feature.id,l=n.points[r],a.geometry=l,"z"in l&&(a.attributes.altitude=l.z),this.internalProjection&&this.externalProjection&&a.geometry.transform(this.externalProjection,this.internalProjection),this.trackAttributes)for(var h=0,c=this.trackAttributes.length;h<c;++h){var i=this.trackAttributes[h];a.attributes[i]=n.attributes[i][r]}a.attributes.when=n.whens[r],a.attributes.trackId=t.feature.id,o&&(u=n.angles[r],a.attributes.heading=parseFloat(u[0]),a.attributes.tilt=parseFloat(u[1]),a.attributes.roll=parseFloat(u[2])),t.features.push(a)}},coord:function(e,t){var n=this.getChildValue(e),i=n.replace(this.regExes.trimSpace,"").split(/\s+/),r=new OpenLayers.Geometry.Point(i[0],i[1]);i.length>2&&(r.z=parseFloat(i[2])),t.points.push(r)},angles:function(e,t){var n=this.getChildValue(e),i=n.replace(this.regExes.trimSpace,"").split(/\s+/);t.angles.push(i)}}},parseFeature:function(e){for(var t,n,i,r,s=["MultiGeometry","Polygon","LineString","Point"],o=0,a=s.length;o<a;++o)if(t=s[o],this.internalns=e.namespaceURI?e.namespaceURI:this.kmlns,n=this.getElementsByTagNameNS(e,this.internalns,t),n.length>0){var r=this.parseGeometry[t.toLowerCase()];if(!r)throw new TypeError("Unsupported geometry type: "+t);i=r.apply(this,[n[0]]),this.internalProjection&&this.externalProjection&&i.transform(this.externalProjection,this.internalProjection);break}var l;this.extractAttributes&&(l=this.parseAttributes(e));var u=new OpenLayers.Feature.Vector(i,l),h=e.getAttribute("id")||e.getAttribute("name");return null!=h&&(u.fid=h),u},getStyle:function(e,t){var n=OpenLayers.Util.removeTail(e),i=OpenLayers.Util.extend({},t);if(i.depth++,i.styleBaseUrl=n,!this.styles[e]&&!OpenLayers.String.startsWith(e,"#")&&i.depth<=this.maxDepth&&!this.fetched[n]){var r=this.fetchLink(n);r&&this.parseData(r,i)}var s=OpenLayers.Util.extend({},this.styles[e]);return s},parseGeometry:{point:function(e){var t=this.getElementsByTagNameNS(e,this.internalns,"coordinates"),n=[];if(t.length>0){var i=t[0].firstChild.nodeValue;i=i.replace(this.regExes.removeSpace,""),n=i.split(",")}var r=null;if(!(n.length>1))throw"Bad coordinate string: "+i;return 2==n.length&&(n[2]=null),r=new OpenLayers.Geometry.Point(n[0],n[1],n[2])},linestring:function(e,t){var n=this.getElementsByTagNameNS(e,this.internalns,"coordinates"),i=null;if(n.length>0){var r=this.getChildValue(n[0]);r=r.replace(this.regExes.trimSpace,""),r=r.replace(this.regExes.trimComma,",");for(var s,o,a=r.split(this.regExes.splitSpace),l=a.length,u=new Array(l),h=0;h<l;++h){if(s=a[h].split(","),o=s.length,!(o>1))throw"Bad LineString point coordinates: "+a[h];2==s.length&&(s[2]=null),u[h]=new OpenLayers.Geometry.Point(s[0],s[1],s[2])}if(!l)throw"Bad LineString coordinates: "+r;i=t?new OpenLayers.Geometry.LinearRing(u):new OpenLayers.Geometry.LineString(u)}return i},polygon:function(e){var t=this.getElementsByTagNameNS(e,this.internalns,"LinearRing"),n=t.length,i=new Array(n);if(n>0)for(var r,s=0,o=t.length;s<o;++s){if(r=this.parseGeometry.linestring.apply(this,[t[s],!0]),!r)throw"Bad LinearRing geometry: "+s;i[s]=r}return new OpenLayers.Geometry.Polygon(i)},multigeometry:function(e){for(var t,n,i=[],r=e.childNodes,s=0,o=r.length;s<o;++s)if(t=r[s],1==t.nodeType){var a=t.prefix?t.nodeName.split(":")[1]:t.nodeName,n=this.parseGeometry[a.toLowerCase()];n&&i.push(n.apply(this,[t]))}return new OpenLayers.Geometry.Collection(i)}},parseAttributes:function(e){var t={},n=e.getElementsByTagName("ExtendedData");n.length&&(t=this.parseExtendedData(n[0]));for(var i,r,s,o=e.childNodes,a=0,l=o.length;a<l;++a)if(i=o[a],1==i.nodeType&&(r=i.childNodes,r.length>=1&&r.length<=3)){var s;switch(r.length){case 1:s=r[0];break;case 2:var u=r[0],h=r[1];s=3==u.nodeType||4==u.nodeType?u:h;break;case 3:default:s=r[1]}if(3==s.nodeType||4==s.nodeType){var c=i.prefix?i.nodeName.split(":")[1]:i.nodeName,p=OpenLayers.Util.getXmlNodeValue(s);p&&(p=p.replace(this.regExes.trimSpace,""),t[c]=p)}}return t},parseExtendedData:function(e){var t,n,i,r,s={},o=e.getElementsByTagName("Data");for(t=0,n=o.length;t<n;t++){i=o[t],r=i.getAttribute("name");var a={},l=i.getElementsByTagName("value");if(l.length&&(a.value=this.getChildValue(l[0])),this.kvpAttributes)s[r]=a.value;else{var u=i.getElementsByTagName("displayName");u.length&&(a.displayName=this.getChildValue(u[0])),s[r]=a}}var h=e.getElementsByTagName("SimpleData");for(t=0,n=h.length;t<n;t++){var a={};i=h[t],r=i.getAttribute("name"),a.value=this.getChildValue(i),this.kvpAttributes?s[r]=a.value:(a.displayName=r,s[r]=a)}return s},parseProperty:function(e,t,n){var i,r=this.getElementsByTagNameNS(e,t,n);try{i=OpenLayers.Util.getXmlNodeValue(r[0])}catch(e){i=null}return i},write:function(e){OpenLayers.Util.isArray(e)||(e=[e]);for(var t=this.createElementNS(this.kmlns,"kml"),n=this.createFolderXML(),i=0,r=e.length;i<r;++i)n.appendChild(this.createPlacemarkXML(e[i]));return t.appendChild(n),OpenLayers.Format.XML.prototype.write.apply(this,[t])},createFolderXML:function(){var e=this.createElementNS(this.kmlns,"Folder");if(this.foldersName){var t=this.createElementNS(this.kmlns,"name"),n=this.createTextNode(this.foldersName);t.appendChild(n),e.appendChild(t)}if(this.foldersDesc){var i=this.createElementNS(this.kmlns,"description"),r=this.createTextNode(this.foldersDesc);i.appendChild(r),e.appendChild(i)}return e},createPlacemarkXML:function(e){var t=this.createElementNS(this.kmlns,"name"),n=e.style&&e.style.label?e.style.label:e.id,i=e.attributes.name||n;t.appendChild(this.createTextNode(i));var r=this.createElementNS(this.kmlns,"description"),s=e.attributes.description||this.placemarksDesc;r.appendChild(this.createTextNode(s));var o=this.createElementNS(this.kmlns,"Placemark");if(null!=e.fid&&o.setAttribute("id",e.fid),o.appendChild(t),o.appendChild(r),e.attributes){var a=this.buildExtendedData(e.attributes);a&&o.appendChild(a)}var l=this.buildGeometryNode(e.geometry);return o.appendChild(l),o},buildGeometryNode:function(e){var t=e.CLASS_NAME,n=t.substring(t.lastIndexOf(".")+1),i=this.buildGeometry[n.toLowerCase()],r=null;return i&&(r=i.apply(this,[e])),r},buildGeometry:{point:function(e){var t=this.createElementNS(this.kmlns,"Point");return t.appendChild(this.buildCoordinatesNode(e)),t},multipoint:function(e){return this.buildGeometry.collection.apply(this,[e])},linestring:function(e){var t=this.createElementNS(this.kmlns,"LineString");return t.appendChild(this.buildCoordinatesNode(e)),t},multilinestring:function(e){return this.buildGeometry.collection.apply(this,[e])},linearring:function(e){var t=this.createElementNS(this.kmlns,"LinearRing");return t.appendChild(this.buildCoordinatesNode(e)),t},polygon:function(e){for(var t,n,i,r=this.createElementNS(this.kmlns,"Polygon"),s=e.components,o=0,a=s.length;o<a;++o)i=0==o?"outerBoundaryIs":"innerBoundaryIs",t=this.createElementNS(this.kmlns,i),n=this.buildGeometry.linearring.apply(this,[s[o]]),t.appendChild(n),r.appendChild(t);return r},multipolygon:function(e){return this.buildGeometry.collection.apply(this,[e])},collection:function(e){for(var t,n=this.createElementNS(this.kmlns,"MultiGeometry"),i=0,r=e.components.length;i<r;++i)t=this.buildGeometryNode.apply(this,[e.components[i]]),t&&n.appendChild(t);return n}},buildCoordinatesNode:function(e){var t,n=this.createElementNS(this.kmlns,"coordinates"),i=e.components;if(i){for(var r,s=i.length,o=new Array(s),a=0;a<s;++a)r=i[a],o[a]=this.buildCoordinates(r);t=o.join(" ")}else t=this.buildCoordinates(e);var l=this.createTextNode(t);return n.appendChild(l),n},buildCoordinates:function(e){return this.internalProjection&&this.externalProjection&&(e=e.clone(),e.transform(this.internalProjection,this.externalProjection)),e.x+","+e.y},buildExtendedData:function(e){var t=this.createElementNS(this.kmlns,"ExtendedData");for(var n in e)if(e[n]&&"name"!=n&&"description"!=n&&"styleUrl"!=n){var i=this.createElementNS(this.kmlns,"Data");i.setAttribute("name",n);var r=this.createElementNS(this.kmlns,"value");if("object"==typeof e[n]){if(e[n].value&&r.appendChild(this.createTextNode(e[n].value)),e[n].displayName){var s=this.createElementNS(this.kmlns,"displayName");s.appendChild(this.getXMLDoc().createCDATASection(e[n].displayName)),i.appendChild(s)}}else r.appendChild(this.createTextNode(e[n]));i.appendChild(r),t.appendChild(i)}return this.isSimpleContent(t)?null:t},CLASS_NAME:"OpenLayers.Format.KML"}),OpenLayers.Format.JSON=OpenLayers.Class(OpenLayers.Format,{indent:"    ",space:" ",newline:"\n",level:0,pretty:!1,nativeJSON:function(){return!(!window.JSON||"function"!=typeof JSON.parse||"function"!=typeof JSON.stringify)}(),read:function(json,filter){function walk(e,t){if(t&&"object"==typeof t)for(var n in t)t.hasOwnProperty(n)&&(t[n]=walk(n,t[n]));return filter(e,t)}var object;if(this.nativeJSON)object=JSON.parse(json,filter);else try{/^[\],:{}\s]*$/.test(json.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))&&(object=eval("("+json+")"),"function"==typeof filter&&(object=walk("",object)))}catch(e){}return this.keepData&&(this.data=object),object},write:function(e,t){this.pretty=!!t;var n=null,i=typeof e;if(this.serialize[i])try{n=!this.pretty&&this.nativeJSON?JSON.stringify(e):this.serialize[i].apply(this,[e])}catch(e){OpenLayers.Console.error("Trouble serializing: "+e)}return n},writeIndent:function(){var e=[];if(this.pretty)for(var t=0;t<this.level;++t)e.push(this.indent);return e.join("")},writeNewline:function(){return this.pretty?this.newline:""},writeSpace:function(){return this.pretty?this.space:""},serialize:{object:function(e){if(null==e)return"null";if(e.constructor==Date)return this.serialize.date.apply(this,[e]);if(e.constructor==Array)return this.serialize.array.apply(this,[e]);var t=["{"];this.level+=1;var n,i,r,s=!1;for(n in e)e.hasOwnProperty(n)&&(i=OpenLayers.Format.JSON.prototype.write.apply(this,[n,this.pretty]),r=OpenLayers.Format.JSON.prototype.write.apply(this,[e[n],this.pretty]),null!=i&&null!=r&&(s&&t.push(","),t.push(this.writeNewline(),this.writeIndent(),i,":",this.writeSpace(),r),s=!0));return this.level-=1,t.push(this.writeNewline(),this.writeIndent(),"}"),t.join("")},array:function(e){var t,n=["["];this.level+=1;for(var i=0,r=e.length;i<r;++i)t=OpenLayers.Format.JSON.prototype.write.apply(this,[e[i],this.pretty]),
null!=t&&(i>0&&n.push(","),n.push(this.writeNewline(),this.writeIndent(),t));return this.level-=1,n.push(this.writeNewline(),this.writeIndent(),"]"),n.join("")},string:function(e){var t={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return/["\\\x00-\x1f]/.test(e)?'"'+e.replace(/([\x00-\x1f\\"])/g,function(e,n){var i=t[n];return i?i:(i=n.charCodeAt(),"\\u00"+Math.floor(i/16).toString(16)+(i%16).toString(16))})+'"':'"'+e+'"'},number:function(e){return isFinite(e)?String(e):"null"},boolean:function(e){return String(e)},date:function(e){function t(e){return e<10?"0"+e:e}return'"'+e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())+"T"+t(e.getHours())+":"+t(e.getMinutes())+":"+t(e.getSeconds())+'"'}},CLASS_NAME:"OpenLayers.Format.JSON"}),OpenLayers.Geometry.MultiLineString=OpenLayers.Class(OpenLayers.Geometry.Collection,{componentTypes:["OpenLayers.Geometry.LineString"],split:function(e,t){for(var n,i,r,s,o,a=null,l=t&&t.mutual,u=[],h=[e],c=0,p=this.components.length;c<p;++c){i=this.components[c],s=!1;for(var d=0;d<h.length;++d)if(n=i.split(h[d],t)){if(l){r=n[0];for(var f=0,y=r.length;f<y;++f)0===f&&u.length?u[u.length-1].addComponent(r[f]):u.push(new OpenLayers.Geometry.MultiLineString([r[f]]));s=!0,n=n[1]}if(n.length){n.unshift(d,1),Array.prototype.splice.apply(h,n);break}}s||(u.length?u[u.length-1].addComponent(i.clone()):u=[new OpenLayers.Geometry.MultiLineString(i.clone())])}return u&&u.length>1?s=!0:u=[],h&&h.length>1?o=!0:h=[],(s||o)&&(a=l?[u,h]:h),a},splitWith:function(e,t){var n,i,r,s,o,a,l,u=null,h=t&&t.mutual;if(e instanceof OpenLayers.Geometry.LineString){l=[],a=[e];for(var c=0,p=this.components.length;c<p;++c){o=!1,i=this.components[c];for(var d=0;d<a.length;++d)if(n=a[d].split(i,t)){h&&(r=n[0],r.length&&(r.unshift(d,1),Array.prototype.splice.apply(a,r),d+=r.length-2),n=n[1],0===n.length&&(n=[i.clone()]));for(var f=0,y=n.length;f<y;++f)0===f&&l.length?l[l.length-1].addComponent(n[f]):l.push(new OpenLayers.Geometry.MultiLineString([n[f]]));o=!0}o||(l.length?l[l.length-1].addComponent(i.clone()):l=[new OpenLayers.Geometry.MultiLineString([i.clone()])])}}else u=e.split(this);return a&&a.length>1?s=!0:a=[],l&&l.length>1?o=!0:l=[],(s||o)&&(u=h?[a,l]:l),u},CLASS_NAME:"OpenLayers.Geometry.MultiLineString"}),OpenLayers.Geometry.MultiPolygon=OpenLayers.Class(OpenLayers.Geometry.Collection,{componentTypes:["OpenLayers.Geometry.Polygon"],CLASS_NAME:"OpenLayers.Geometry.MultiPolygon"}),OpenLayers.Format.GeoJSON=OpenLayers.Class(OpenLayers.Format.JSON,{ignoreExtraDims:!1,read:function(e,t,n){t=t?t:"FeatureCollection";var i=null,r=null;if(r="string"==typeof e?OpenLayers.Format.JSON.prototype.read.apply(this,[e,n]):e){if("string"!=typeof r.type)OpenLayers.Console.error("Bad GeoJSON - no type: "+e);else if(this.isValidType(r,t))switch(t){case"Geometry":try{i=this.parseGeometry(r)}catch(e){OpenLayers.Console.error(e)}break;case"Feature":try{i=this.parseFeature(r),i.type="Feature"}catch(e){OpenLayers.Console.error(e)}break;case"FeatureCollection":switch(i=[],r.type){case"Feature":try{i.push(this.parseFeature(r))}catch(e){i=null,OpenLayers.Console.error(e)}break;case"FeatureCollection":for(var s=0,o=r.features.length;s<o;++s)try{i.push(this.parseFeature(r.features[s]))}catch(e){i=null,OpenLayers.Console.error(e)}break;default:try{var a=this.parseGeometry(r);i.push(new OpenLayers.Feature.Vector(a))}catch(e){i=null,OpenLayers.Console.error(e)}}}}else OpenLayers.Console.error("Bad JSON: "+e);return i},isValidType:function(e,t){var n=!1;switch(t){case"Geometry":OpenLayers.Util.indexOf(["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon","Box","GeometryCollection"],e.type)==-1?OpenLayers.Console.error("Unsupported geometry type: "+e.type):n=!0;break;case"FeatureCollection":n=!0;break;default:e.type==t?n=!0:OpenLayers.Console.error("Cannot convert types from "+e.type+" to "+t)}return n},parseFeature:function(e){var t,n,i,r;i=e.properties?e.properties:{},r=e.geometry&&e.geometry.bbox||e.bbox;try{n=this.parseGeometry(e.geometry)}catch(e){throw e}return t=new OpenLayers.Feature.Vector(n,i),r&&(t.bounds=OpenLayers.Bounds.fromArray(r)),e.id&&(t.fid=e.id),t},parseGeometry:function(e){if(null==e)return null;var t,n=!1;if("GeometryCollection"==e.type){if(!OpenLayers.Util.isArray(e.geometries))throw"GeometryCollection must have geometries array: "+e;for(var i=e.geometries.length,r=new Array(i),s=0;s<i;++s)r[s]=this.parseGeometry.apply(this,[e.geometries[s]]);t=new OpenLayers.Geometry.Collection(r),n=!0}else{if(!OpenLayers.Util.isArray(e.coordinates))throw"Geometry must have coordinates array: "+e;if(!this.parseCoords[e.type.toLowerCase()])throw"Unsupported geometry type: "+e.type;try{t=this.parseCoords[e.type.toLowerCase()].apply(this,[e.coordinates])}catch(e){throw e}}return this.internalProjection&&this.externalProjection&&!n&&t.transform(this.externalProjection,this.internalProjection),t},parseCoords:{point:function(e){if(0==this.ignoreExtraDims&&2!=e.length)throw"Only 2D points are supported: "+e;return new OpenLayers.Geometry.Point(e[0],e[1])},multipoint:function(e){for(var t=[],n=null,i=0,r=e.length;i<r;++i){try{n=this.parseCoords.point.apply(this,[e[i]])}catch(e){throw e}t.push(n)}return new OpenLayers.Geometry.MultiPoint(t)},linestring:function(e){for(var t=[],n=null,i=0,r=e.length;i<r;++i){try{n=this.parseCoords.point.apply(this,[e[i]])}catch(e){throw e}t.push(n)}return new OpenLayers.Geometry.LineString(t)},multilinestring:function(e){for(var t=[],n=null,i=0,r=e.length;i<r;++i){try{n=this.parseCoords.linestring.apply(this,[e[i]])}catch(e){throw e}t.push(n)}return new OpenLayers.Geometry.MultiLineString(t)},polygon:function(e){for(var t,n,i=[],r=0,s=e.length;r<s;++r){try{n=this.parseCoords.linestring.apply(this,[e[r]])}catch(e){throw e}t=new OpenLayers.Geometry.LinearRing(n.components),i.push(t)}return new OpenLayers.Geometry.Polygon(i)},multipolygon:function(e){for(var t=[],n=null,i=0,r=e.length;i<r;++i){try{n=this.parseCoords.polygon.apply(this,[e[i]])}catch(e){throw e}t.push(n)}return new OpenLayers.Geometry.MultiPolygon(t)},box:function(e){if(2!=e.length)throw"GeoJSON box coordinates must have 2 elements";return new OpenLayers.Geometry.Polygon([new OpenLayers.Geometry.LinearRing([new OpenLayers.Geometry.Point(e[0][0],e[0][1]),new OpenLayers.Geometry.Point(e[1][0],e[0][1]),new OpenLayers.Geometry.Point(e[1][0],e[1][1]),new OpenLayers.Geometry.Point(e[0][0],e[1][1]),new OpenLayers.Geometry.Point(e[0][0],e[0][1])])])}},write:function(e,t){var n={type:null};if(OpenLayers.Util.isArray(e)){n.type="FeatureCollection";var i=e.length;n.features=new Array(i);for(var r=0;r<i;++r){var s=e[r];if(!s instanceof OpenLayers.Feature.Vector){var o="FeatureCollection only supports collections of features: "+s;throw o}n.features[r]=this.extract.feature.apply(this,[s])}}else 0==e.CLASS_NAME.indexOf("OpenLayers.Geometry")?n=this.extract.geometry.apply(this,[e]):e instanceof OpenLayers.Feature.Vector&&(n=this.extract.feature.apply(this,[e]),e.layer&&e.layer.projection&&(n.crs=this.createCRSObject(e)));return OpenLayers.Format.JSON.prototype.write.apply(this,[n,t])},createCRSObject:function(e){var t=e.layer.projection.toString(),n={};if(t.match(/epsg:/i)){var i=parseInt(t.substring(t.indexOf(":")+1));n=4326==i?{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}}:{type:"name",properties:{name:"EPSG:"+i}}}return n},extract:{feature:function(e){var t=this.extract.geometry.apply(this,[e.geometry]),n={type:"Feature",properties:e.attributes,geometry:t};return null!=e.fid&&(n.id=e.fid),n},geometry:function(e){if(null==e)return null;this.internalProjection&&this.externalProjection&&(e=e.clone(),e.transform(this.internalProjection,this.externalProjection));var t,n=e.CLASS_NAME.split(".")[2],i=this.extract[n.toLowerCase()].apply(this,[e]);return t="Collection"==n?{type:"GeometryCollection",geometries:i}:{type:n,coordinates:i}},point:function(e){return[e.x,e.y]},multipoint:function(e){for(var t=[],n=0,i=e.components.length;n<i;++n)t.push(this.extract.point.apply(this,[e.components[n]]));return t},linestring:function(e){for(var t=[],n=0,i=e.components.length;n<i;++n)t.push(this.extract.point.apply(this,[e.components[n]]));return t},multilinestring:function(e){for(var t=[],n=0,i=e.components.length;n<i;++n)t.push(this.extract.linestring.apply(this,[e.components[n]]));return t},polygon:function(e){for(var t=[],n=0,i=e.components.length;n<i;++n)t.push(this.extract.linestring.apply(this,[e.components[n]]));return t},multipolygon:function(e){for(var t=[],n=0,i=e.components.length;n<i;++n)t.push(this.extract.polygon.apply(this,[e.components[n]]));return t},collection:function(e){for(var t=e.components.length,n=new Array(t),i=0;i<t;++i)n[i]=this.extract.geometry.apply(this,[e.components[i]]);return n}},CLASS_NAME:"OpenLayers.Format.GeoJSON"}),OpenLayers.Control=OpenLayers.Class({id:null,map:null,div:null,type:null,allowSelection:!1,displayClass:"",title:"",autoActivate:!1,active:null,handlerOptions:null,handler:null,eventListeners:null,events:null,initialize:function(e){this.displayClass=this.CLASS_NAME.replace("OpenLayers.","ol").replace(/\./g,""),OpenLayers.Util.extend(this,e),this.events=new OpenLayers.Events(this),this.eventListeners instanceof Object&&this.events.on(this.eventListeners),null==this.id&&(this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_"))},destroy:function(){if(this.events&&(this.eventListeners&&this.events.un(this.eventListeners),this.events.destroy(),this.events=null),this.eventListeners=null,this.handler&&(this.handler.destroy(),this.handler=null),this.handlers){for(var e in this.handlers)this.handlers.hasOwnProperty(e)&&"function"==typeof this.handlers[e].destroy&&this.handlers[e].destroy();this.handlers=null}this.map&&(this.map.removeControl(this),this.map=null),this.div=null},setMap:function(e){this.map=e,this.handler&&this.handler.setMap(e)},draw:function(e){return null==this.div&&(this.div=OpenLayers.Util.createDiv(this.id),this.div.className=this.displayClass,this.allowSelection||(this.div.className+=" olControlNoSelect",this.div.setAttribute("unselectable","on",0),this.div.onselectstart=OpenLayers.Function.False),""!=this.title&&(this.div.title=this.title)),null!=e&&(this.position=e.clone()),this.moveTo(this.position),this.div},moveTo:function(e){null!=e&&null!=this.div&&(this.div.style.left=e.x+"px",this.div.style.top=e.y+"px")},activate:function(){return!this.active&&(this.handler&&this.handler.activate(),this.active=!0,this.map&&OpenLayers.Element.addClass(this.map.viewPortDiv,this.displayClass.replace(/ /g,"")+"Active"),this.events.triggerEvent("activate"),!0)},deactivate:function(){return!!this.active&&(this.handler&&this.handler.deactivate(),this.active=!1,this.map&&OpenLayers.Element.removeClass(this.map.viewPortDiv,this.displayClass.replace(/ /g,"")+"Active"),this.events.triggerEvent("deactivate"),!0)},CLASS_NAME:"OpenLayers.Control"}),OpenLayers.Control.TYPE_BUTTON=1,OpenLayers.Control.TYPE_TOGGLE=2,OpenLayers.Control.TYPE_TOOL=3,OpenLayers.Control.DrawFeature=OpenLayers.Class(OpenLayers.Control,{layer:null,callbacks:null,multi:!1,featureAdded:function(){},initialize:function(e,t,n){OpenLayers.Control.prototype.initialize.apply(this,[n]),this.callbacks=OpenLayers.Util.extend({done:this.drawFeature,modify:function(e,t){this.layer.events.triggerEvent("sketchmodified",{vertex:e,feature:t})},create:function(e,t){this.layer.events.triggerEvent("sketchstarted",{vertex:e,feature:t})}},this.callbacks),this.layer=e,this.handlerOptions=this.handlerOptions||{},this.handlerOptions.layerOptions=OpenLayers.Util.applyDefaults(this.handlerOptions.layerOptions,{renderers:e.renderers,rendererOptions:e.rendererOptions}),"multi"in this.handlerOptions||(this.handlerOptions.multi=this.multi);var i=this.layer.styleMap&&this.layer.styleMap.styles.temporary;i&&(this.handlerOptions.layerOptions=OpenLayers.Util.applyDefaults(this.handlerOptions.layerOptions,{styleMap:new OpenLayers.StyleMap({default:i})})),this.handler=new t(this,this.callbacks,this.handlerOptions)},drawFeature:function(e){var t=new OpenLayers.Feature.Vector(e),n=this.layer.events.triggerEvent("sketchcomplete",{feature:t});n!==!1&&(t.state=OpenLayers.State.INSERT,this.layer.addFeatures([t]),this.featureAdded(t),this.events.triggerEvent("featureadded",{feature:t}))},insertXY:function(e,t){this.handler&&this.handler.line&&this.handler.insertXY(e,t)},insertDeltaXY:function(e,t){this.handler&&this.handler.line&&this.handler.insertDeltaXY(e,t)},insertDirectionLength:function(e,t){this.handler&&this.handler.line&&this.handler.insertDirectionLength(e,t)},insertDeflectionLength:function(e,t){this.handler&&this.handler.line&&this.handler.insertDeflectionLength(e,t)},undo:function(){return this.handler.undo&&this.handler.undo()},redo:function(){return this.handler.redo&&this.handler.redo()},finishSketch:function(){this.handler.finishGeometry()},cancel:function(){this.handler.cancel()},CLASS_NAME:"OpenLayers.Control.DrawFeature"}),OpenLayers.Control.MousePosition=OpenLayers.Class(OpenLayers.Control,{autoActivate:!0,element:null,prefix:"",separator:", ",suffix:"",numDigits:5,granularity:10,emptyString:null,lastXy:null,displayProjection:null,destroy:function(){this.deactivate(),OpenLayers.Control.prototype.destroy.apply(this,arguments)},activate:function(){return!!OpenLayers.Control.prototype.activate.apply(this,arguments)&&(this.map.events.register("mousemove",this,this.redraw),this.map.events.register("mouseout",this,this.reset),this.redraw(),!0)},deactivate:function(){return!!OpenLayers.Control.prototype.deactivate.apply(this,arguments)&&(this.map.events.unregister("mousemove",this,this.redraw),this.map.events.unregister("mouseout",this,this.reset),this.element.innerHTML="",!0)},draw:function(){return OpenLayers.Control.prototype.draw.apply(this,arguments),this.element||(this.div.left="",this.div.top="",this.element=this.div),this.div},redraw:function(e){var t;if(null==e)return void this.reset();if(null==this.lastXy||Math.abs(e.xy.x-this.lastXy.x)>this.granularity||Math.abs(e.xy.y-this.lastXy.y)>this.granularity)return void(this.lastXy=e.xy);if(t=this.map.getLonLatFromPixel(e.xy)){this.displayProjection&&t.transform(this.map.getProjectionObject(),this.displayProjection),this.lastXy=e.xy;var n=this.formatOutput(t);n!=this.element.innerHTML&&(this.element.innerHTML=n)}},reset:function(e){null!=this.emptyString&&(this.element.innerHTML=this.emptyString)},formatOutput:function(e){var t=parseInt(this.numDigits),n=this.prefix+e.lon.toFixed(t)+this.separator+e.lat.toFixed(t)+this.suffix;return n},CLASS_NAME:"OpenLayers.Control.MousePosition"}),OpenLayers.Events.buttonclick=OpenLayers.Class({target:null,events:["mousedown","mouseup","click","dblclick","touchstart","touchmove","touchend","keydown"],startRegEx:/^mousedown|touchstart$/,cancelRegEx:/^touchmove$/,completeRegEx:/^mouseup|touchend$/,isDeviceTouchCapable:"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,initialize:function(e){this.target=e;for(var t=this.events.length-1;t>=0;--t)this.target.register(this.events[t],this,this.buttonClick,{extension:!0})},destroy:function(){for(var e=this.events.length-1;e>=0;--e)this.target.unregister(this.events[e],this,this.buttonClick);delete this.target},getPressedButton:function(e){var t,n=3;do{if(OpenLayers.Element.hasClass(e,"olButton")){t=e;break}e=e.parentNode}while(--n>0&&e);return t},ignore:function(e){var t=3,n=!1;do{if("a"===e.nodeName.toLowerCase()){n=!0;break}e=e.parentNode}while(--t>0&&e);return n},buttonClick:function(e){var t=!0,n=OpenLayers.Event.element(e);if(n&&(OpenLayers.Event.isLeftClick(e)&&!this.isDeviceTouchCapable||!~e.type.indexOf("mouse"))){var i=this.getPressedButton(n);if(i){if("keydown"===e.type)switch(e.keyCode){case OpenLayers.Event.KEY_RETURN:case OpenLayers.Event.KEY_SPACE:this.target.triggerEvent("buttonclick",{buttonElement:i}),OpenLayers.Event.stop(e),t=!1}else if(this.startEvt){if(this.completeRegEx.test(e.type)){var r=OpenLayers.Util.pagePosition(i),s=OpenLayers.Util.getViewportElement(),o=window.pageYOffset||s.scrollTop,a=window.pageXOffset||s.scrollLeft;r[0]=r[0]-a,r[1]=r[1]-o,this.target.triggerEvent("buttonclick",{buttonElement:i,buttonXY:{x:this.startEvt.clientX-r[0],y:this.startEvt.clientY-r[1]}})}this.cancelRegEx.test(e.type)&&e.touches&&this.startEvt.touches&&(Math.abs(e.touches[0].olClientX-this.startEvt.touches[0].olClientX)>4||Math.abs(e.touches[0].olClientY-this.startEvt.touches[0].olClientY))>4&&delete this.startEvt,OpenLayers.Event.stop(e),t=!1}this.startRegEx.test(e.type)&&(this.startEvt=e,OpenLayers.Event.stop(e),t=!1)}else t=!this.ignore(OpenLayers.Event.element(e)),delete this.startEvt}return t}}),OpenLayers.Control.Zoom=OpenLayers.Class(OpenLayers.Control,{zoomInText:"+",zoomInId:"olZoomInLink",zoomOutText:"−",zoomOutId:"olZoomOutLink",draw:function(){var e=OpenLayers.Control.prototype.draw.apply(this),t=this.getOrCreateLinks(e),n=t.zoomIn,i=t.zoomOut,r=this.map.events;return i.parentNode!==e&&(r=this.events,r.attachToElement(i.parentNode)),r.register("buttonclick",this,this.onZoomClick),this.zoomInLink=n,this.zoomOutLink=i,e},getOrCreateLinks:function(e){var t=document.getElementById(this.zoomInId),n=document.getElementById(this.zoomOutId);return t||(t=document.createElement("a"),t.href="#zoomIn",t.appendChild(document.createTextNode(this.zoomInText)),t.className="olControlZoomIn",e.appendChild(t)),OpenLayers.Element.addClass(t,"olButton"),n||(n=document.createElement("a"),n.href="#zoomOut",n.appendChild(document.createTextNode(this.zoomOutText)),n.className="olControlZoomOut",e.appendChild(n)),OpenLayers.Element.addClass(n,"olButton"),{zoomIn:t,zoomOut:n}},onZoomClick:function(e){var t=e.buttonElement;t===this.zoomInLink?this.map.zoomIn():t===this.zoomOutLink&&this.map.zoomOut()},destroy:function(){this.map&&this.map.events.unregister("buttonclick",this,this.onZoomClick),delete this.zoomInLink,delete this.zoomOutLink,OpenLayers.Control.prototype.destroy.apply(this)},CLASS_NAME:"OpenLayers.Control.Zoom"});OpenLayers.Handler.Feature=OpenLayers.Class(OpenLayers.Handler,{EVENTMAP:{click:{in:"click",out:"clickout"},mousemove:{in:"over",out:"out"},dblclick:{in:"dblclick",out:null},mousedown:{in:null,out:null},mouseup:{in:null,out:null},touchstart:{in:"click",out:"clickout"}},feature:null,lastFeature:null,down:null,up:null,clickTolerance:4,geometryTypes:null,stopClick:!0,stopDown:!0,stopUp:!1,initialize:function(e,t,n,i){OpenLayers.Handler.prototype.initialize.apply(this,[e,n,i]),this.layer=t},touchstart:function(e){return this.startTouch(),!!OpenLayers.Event.isMultiTouch(e)||this.mousedown(e)},touchmove:function(e){OpenLayers.Event.preventDefault(e)},mousedown:function(e){return(OpenLayers.Event.isLeftClick(e)||OpenLayers.Event.isSingleTouch(e))&&(this.down=e.xy),!this.handle(e)||!this.stopDown},mouseup:function(e){return this.up=e.xy,!this.handle(e)||!this.stopUp},click:function(e){return!this.handle(e)||!this.stopClick},mousemove:function(e){return!this.callbacks.over&&!this.callbacks.out||(this.handle(e),!0)},dblclick:function(e){return!this.handle(e)},geometryTypeMatches:function(e){return null==this.geometryTypes||OpenLayers.Util.indexOf(this.geometryTypes,e.geometry.CLASS_NAME)>-1},handle:function(e){this.feature&&!this.feature.layer&&(this.feature=null);var t=e.type,n=!1,i=!!this.feature,r="click"==t||"dblclick"==t||"touchstart"==t;if(this.feature=this.layer.getFeatureFromEvent(e),this.feature&&!this.feature.layer&&(this.feature=null),this.lastFeature&&!this.lastFeature.layer&&(this.lastFeature=null),this.feature){"touchstart"===t&&OpenLayers.Event.preventDefault(e);var s=this.feature!=this.lastFeature;this.geometryTypeMatches(this.feature)?(i&&s?(this.lastFeature&&this.triggerCallback(t,"out",[this.lastFeature]),this.triggerCallback(t,"in",[this.feature])):i&&!r||this.triggerCallback(t,"in",[this.feature]),this.lastFeature=this.feature,n=!0):(this.lastFeature&&(i&&s||r)&&this.triggerCallback(t,"out",[this.lastFeature]),this.feature=null)}else this.lastFeature&&(i||r)&&this.triggerCallback(t,"out",[this.lastFeature]);return n},triggerCallback:function(e,t,n){var i=this.EVENTMAP[e][t];if(i)if("click"==e&&this.up&&this.down){var r=Math.sqrt(Math.pow(this.up.x-this.down.x,2)+Math.pow(this.up.y-this.down.y,2));r<=this.clickTolerance&&this.callback(i,n),this.up=this.down=null}else this.callback(i,n)},activate:function(){var e=!1;return OpenLayers.Handler.prototype.activate.apply(this,arguments)&&(this.moveLayerToTop(),this.map.events.on({removelayer:this.handleMapEvents,changelayer:this.handleMapEvents,scope:this}),e=!0),e},deactivate:function(){var e=!1;return OpenLayers.Handler.prototype.deactivate.apply(this,arguments)&&(this.moveLayerBack(),this.feature=null,this.lastFeature=null,this.down=null,this.up=null,this.map.events.un({removelayer:this.handleMapEvents,changelayer:this.handleMapEvents,scope:this}),e=!0),e},handleMapEvents:function(e){"removelayer"!=e.type&&"order"!=e.property||this.moveLayerToTop()},moveLayerToTop:function(){var e=Math.max(this.map.Z_INDEX_BASE.Feature-1,this.layer.getZIndex())+1;this.layer.setZIndex(e)},moveLayerBack:function(){var e=this.layer.getZIndex()-1;e>=this.map.Z_INDEX_BASE.Feature?this.layer.setZIndex(e):this.map.setLayerZIndex(this.layer,this.map.getLayerIndex(this.layer))},CLASS_NAME:"OpenLayers.Handler.Feature"});OpenLayers.Layer.Vector.RootContainer=OpenLayers.Class(OpenLayers.Layer.Vector,{displayInLayerSwitcher:!1,layers:null,display:function(){},getFeatureFromEvent:function(e){for(var t,n=this.layers,i=0;i<n.length;i++)if(t=n[i].getFeatureFromEvent(e))return t},setMap:function(e){OpenLayers.Layer.Vector.prototype.setMap.apply(this,arguments),this.collectRoots(),e.events.register("changelayer",this,this.handleChangeLayer)},removeMap:function(e){e.events.unregister("changelayer",this,this.handleChangeLayer),this.resetRoots(),OpenLayers.Layer.Vector.prototype.removeMap.apply(this,arguments)},collectRoots:function(){for(var e,t=0;t<this.map.layers.length;++t)e=this.map.layers[t],OpenLayers.Util.indexOf(this.layers,e)!=-1&&e.renderer.moveRoot(this.renderer)},resetRoots:function(){for(var e,t=0;t<this.layers.length;++t)e=this.layers[t],this.renderer&&e.renderer.getRenderLayerId()==this.id&&this.renderer.moveRoot(e.renderer)},handleChangeLayer:function(e){var t=e.layer;"order"==e.property&&OpenLayers.Util.indexOf(this.layers,t)!=-1&&(this.resetRoots(),this.collectRoots())},CLASS_NAME:"OpenLayers.Layer.Vector.RootContainer"}),OpenLayers.Control.SelectFeature=OpenLayers.Class(OpenLayers.Control,{multipleKey:null,toggleKey:null,multiple:!1,clickout:!0,toggle:!1,hover:!1,highlightOnly:!1,box:!1,onBeforeSelect:function(){},onSelect:function(){},onUnselect:function(){},scope:null,geometryTypes:null,layer:null,layers:null,callbacks:null,selectStyle:null,renderIntent:"select",handlers:null,initialize:function(e,t){OpenLayers.Control.prototype.initialize.apply(this,[t]),null===this.scope&&(this.scope=this),this.initLayer(e);var n={click:this.clickFeature,clickout:this.clickoutFeature};this.hover&&(n.over=this.overFeature,n.out=this.outFeature),this.callbacks=OpenLayers.Util.extend(n,this.callbacks),this.handlers={feature:new OpenLayers.Handler.Feature(this,this.layer,this.callbacks,{geometryTypes:this.geometryTypes})},this.box&&(this.handlers.box=new OpenLayers.Handler.Box(this,{done:this.selectBox},{boxDivClassName:"olHandlerBoxSelectFeature"}))},initLayer:function(e){OpenLayers.Util.isArray(e)?(this.layers=e,this.layer=new OpenLayers.Layer.Vector.RootContainer(this.id+"_container",{layers:e})):this.layer=e},destroy:function(){this.active&&this.layers&&this.map.removeLayer(this.layer),OpenLayers.Control.prototype.destroy.apply(this,arguments),this.layers&&this.layer.destroy()},activate:function(){return this.active||(this.layers&&this.map.addLayer(this.layer),this.handlers.feature.activate(),this.box&&this.handlers.box&&this.handlers.box.activate()),OpenLayers.Control.prototype.activate.apply(this,arguments)},deactivate:function(){return this.active&&(this.handlers.feature.deactivate(),this.handlers.box&&this.handlers.box.deactivate(),this.layers&&this.map.removeLayer(this.layer)),OpenLayers.Control.prototype.deactivate.apply(this,arguments)},unselectAll:function(e){var t,n,i,r,s=this.layers||[this.layer];for(i=0;i<s.length;++i)if(t=s[i],r=0,null!=t.selectedFeatures)for(;t.selectedFeatures.length>r;)n=t.selectedFeatures[r],e&&e.except==n?++r:this.unselect(n)},clickFeature:function(e){if(!this.hover){var t=OpenLayers.Util.indexOf(e.layer.selectedFeatures,e)>-1;t?this.toggleSelect()?this.unselect(e):this.multipleSelect()||this.unselectAll({except:e}):(this.multipleSelect()||this.unselectAll({except:e}),this.select(e))}},multipleSelect:function(){return this.multiple||this.handlers.feature.evt&&this.handlers.feature.evt[this.multipleKey]},toggleSelect:function(){return this.toggle||this.handlers.feature.evt&&this.handlers.feature.evt[this.toggleKey]},clickoutFeature:function(e){!this.hover&&this.clickout&&this.unselectAll()},overFeature:function(e){var t=e.layer;this.hover&&(this.highlightOnly?this.highlight(e):OpenLayers.Util.indexOf(t.selectedFeatures,e)==-1&&this.select(e))},outFeature:function(e){if(this.hover)if(this.highlightOnly){if(e._lastHighlighter==this.id)if(e._prevHighlighter&&e._prevHighlighter!=this.id){delete e._lastHighlighter;var t=this.map.getControl(e._prevHighlighter);t&&t.highlight(e)}else this.unhighlight(e)}else this.unselect(e)},highlight:function(e){var t=e.layer,n=this.events.triggerEvent("beforefeaturehighlighted",{feature:e});if(n!==!1){e._prevHighlighter=e._lastHighlighter,e._lastHighlighter=this.id;var i=this.selectStyle||this.renderIntent;t.drawFeature(e,i),this.events.triggerEvent("featurehighlighted",{feature:e})}},unhighlight:function(e){var t=e.layer;void 0==e._prevHighlighter?delete e._lastHighlighter:e._prevHighlighter==this.id?delete e._prevHighlighter:(e._lastHighlighter=e._prevHighlighter,delete e._prevHighlighter),t.drawFeature(e,e.style||e.layer.style||"default"),this.events.triggerEvent("featureunhighlighted",{feature:e})},select:function(e){var t=this.onBeforeSelect.call(this.scope,e),n=e.layer;t!==!1&&(t=n.events.triggerEvent("beforefeatureselected",{feature:e}),t!==!1&&(n.selectedFeatures.push(e),this.highlight(e),this.handlers.feature.lastFeature||(this.handlers.feature.lastFeature=n.selectedFeatures[0]),n.events.triggerEvent("featureselected",{feature:e}),this.onSelect.call(this.scope,e)))},unselect:function(e){var t=e.layer;this.unhighlight(e),OpenLayers.Util.removeItem(t.selectedFeatures,e),t.events.triggerEvent("featureunselected",{feature:e}),this.onUnselect.call(this.scope,e)},selectBox:function(e){if(e instanceof OpenLayers.Bounds){var t=this.map.getLonLatFromPixel({x:e.left,y:e.bottom}),n=this.map.getLonLatFromPixel({x:e.right,y:e.top}),i=new OpenLayers.Bounds(t.lon,t.lat,n.lon,n.lat);this.multipleSelect()||this.unselectAll();var r=this.multiple;this.multiple=!0;var s=this.layers||[this.layer];this.events.triggerEvent("boxselectionstart",{layers:s});for(var o,a=0;a<s.length;++a){o=s[a];for(var l=0,u=o.features.length;l<u;++l){var h=o.features[l];h.getVisibility()&&(null==this.geometryTypes||OpenLayers.Util.indexOf(this.geometryTypes,h.geometry.CLASS_NAME)>-1)&&i.toGeometry().intersects(h.geometry)&&OpenLayers.Util.indexOf(o.selectedFeatures,h)==-1&&this.select(h)}}this.multiple=r,this.events.triggerEvent("boxselectionend",{layers:s})}},setMap:function(e){this.handlers.feature.setMap(e),this.box&&this.handlers.box.setMap(e),OpenLayers.Control.prototype.setMap.apply(this,arguments)},setLayer:function(e){var t=this.active;this.unselectAll(),this.deactivate(),this.layers&&(this.layer.destroy(),this.layers=null),this.initLayer(e),this.handlers.feature.layer=this.layer,t&&this.activate()},addLayer:function(e){var t=this.active;this.deactivate(),null==this.layers?null!=this.layer?(this.layers=[this.layer],this.layers.push(e)):this.layers=[e]:this.layers.push(e),this.initLayer(this.layers),this.handlers.feature.layer=this.layer,t&&this.activate()},CLASS_NAME:"OpenLayers.Control.SelectFeature"}),OpenLayers.Handler.Drag=OpenLayers.Class(OpenLayers.Handler,{started:!1,stopDown:!0,dragging:!1,last:null,start:null,lastMoveEvt:null,oldOnselectstart:null,interval:0,timeoutId:null,documentDrag:!1,documentEvents:null,initialize:function(e,t,n){if(OpenLayers.Handler.prototype.initialize.apply(this,arguments),this.documentDrag===!0){var i=this;this._docMove=function(e){i.mousemove({xy:{x:e.clientX,y:e.clientY},element:document})},this._docUp=function(e){i.mouseup({xy:{x:e.clientX,y:e.clientY}})}}},dragstart:function(e){var t=!0;return this.dragging=!1,this.checkModifiers(e)&&this._pointerId==e.pointerId&&(OpenLayers.Event.isLeftClick(e)||OpenLayers.Event.isSingleTouch(e))?(this.started=!0,this.start=e.xy,this.last=e.xy,OpenLayers.Element.addClass(this.map.viewPortDiv,"olDragDown"),this.down(e),this.callback("down",[e.xy]),OpenLayers.Event.preventDefault(e),this.oldOnselectstart||(this.oldOnselectstart=document.onselectstart?document.onselectstart:OpenLayers.Function.True),document.onselectstart=OpenLayers.Function.False,t=!this.stopDown):(delete this._pointerId,this.started=!1,this.start=null,this.last=null),t},dragmove:function(e){return this.lastMoveEvt=e,!this.started||this._pointerId!=e.pointerId||this.timeoutId||e.xy.x==this.last.x&&e.xy.y==this.last.y||(this.documentDrag===!0&&this.documentEvents&&(e.element===document?(this.adjustXY(e),this.setEvent(e)):this.removeDocumentEvents()),this.interval>0&&(this.timeoutId=setTimeout(OpenLayers.Function.bind(this.removeTimeout,this),this.interval)),this.dragging=!0,this.move(e),this.callback("move",[e.xy]),this.oldOnselectstart||(this.oldOnselectstart=document.onselectstart,document.onselectstart=OpenLayers.Function.False),this.last=e.xy),!0},dragend:function(e){if(this.started&&this._pointerId==e.pointerId){this.documentDrag===!0&&this.documentEvents&&(this.adjustXY(e),this.removeDocumentEvents());var t=this.start!=this.last;this.started=!1,this.dragging=!1,delete this._pointerId,OpenLayers.Element.removeClass(this.map.viewPortDiv,"olDragDown"),this.up(e),this.callback("up",[e.xy]),t&&this.callback("done",[e.xy]),document.onselectstart=this.oldOnselectstart}return!0},down:function(e){},move:function(e){},up:function(e){},out:function(e){},mousedown:function(e){return this.dragstart(e)},touchstart:function(e){return this.startTouch(),"_pointerId"in this||(this._pointerId=e.pointerId),this.dragstart(e)},mousemove:function(e){return this.dragmove(e)},touchmove:function(e){return this.dragmove(e)},removeTimeout:function(){this.timeoutId=null,this.dragging&&this.mousemove(this.lastMoveEvt)},mouseup:function(e){return this.dragend(e)},touchend:function(e){return e.xy=this.last,this.dragend(e)},mouseout:function(e){if(this.started&&OpenLayers.Util.mouseLeft(e,this.map.viewPortDiv))if(this.documentDrag===!0)this.addDocumentEvents();else{var t=this.start!=this.last;this.started=!1,this.dragging=!1,OpenLayers.Element.removeClass(this.map.viewPortDiv,"olDragDown"),this.out(e),this.callback("out",[]),t&&this.callback("done",[e.xy]),document.onselectstart&&(document.onselectstart=this.oldOnselectstart)}return!0},click:function(e){return this.start==this.last},activate:function(){var e=!1;return OpenLayers.Handler.prototype.activate.apply(this,arguments)&&(this.dragging=!1,e=!0),e},deactivate:function(){var e=!1;return OpenLayers.Handler.prototype.deactivate.apply(this,arguments)&&(this.started=!1,this.dragging=!1,this.start=null,this.last=null,e=!0,OpenLayers.Element.removeClass(this.map.viewPortDiv,"olDragDown")),e},adjustXY:function(e){var t=OpenLayers.Util.pagePosition(this.map.viewPortDiv);e.xy.x-=t[0],e.xy.y-=t[1]},addDocumentEvents:function(){OpenLayers.Element.addClass(document.body,"olDragDown"),this.documentEvents=!0,OpenLayers.Event.observe(document,"mousemove",this._docMove),OpenLayers.Event.observe(document,"mouseup",this._docUp)},removeDocumentEvents:function(){OpenLayers.Element.removeClass(document.body,"olDragDown"),
this.documentEvents=!1,OpenLayers.Event.stopObserving(document,"mousemove",this._docMove),OpenLayers.Event.stopObserving(document,"mouseup",this._docUp)},CLASS_NAME:"OpenLayers.Handler.Drag"}),OpenLayers.Handler.Box=OpenLayers.Class(OpenLayers.Handler,{dragHandler:null,boxDivClassName:"olHandlerBoxZoomBox",boxOffsets:null,initialize:function(e,t,n){OpenLayers.Handler.prototype.initialize.apply(this,arguments),this.dragHandler=new OpenLayers.Handler.Drag(this,{down:this.startBox,move:this.moveBox,out:this.removeBox,up:this.endBox},{keyMask:this.keyMask})},destroy:function(){OpenLayers.Handler.prototype.destroy.apply(this,arguments),this.dragHandler&&(this.dragHandler.destroy(),this.dragHandler=null)},setMap:function(e){OpenLayers.Handler.prototype.setMap.apply(this,arguments),this.dragHandler&&this.dragHandler.setMap(e)},startBox:function(e){this.callback("start",[]),this.zoomBox=OpenLayers.Util.createDiv("zoomBox",{x:-9999,y:-9999}),this.zoomBox.className=this.boxDivClassName,this.zoomBox.style.zIndex=this.map.Z_INDEX_BASE.Popup-1,this.map.viewPortDiv.appendChild(this.zoomBox),OpenLayers.Element.addClass(this.map.viewPortDiv,"olDrawBox")},moveBox:function(e){var t=this.dragHandler.start.x,n=this.dragHandler.start.y,i=Math.abs(t-e.x),r=Math.abs(n-e.y),s=this.getBoxOffsets();this.zoomBox.style.width=i+s.width+1+"px",this.zoomBox.style.height=r+s.height+1+"px",this.zoomBox.style.left=(e.x<t?t-i-s.left:t-s.left)+"px",this.zoomBox.style.top=(e.y<n?n-r-s.top:n-s.top)+"px"},endBox:function(e){var t;if(Math.abs(this.dragHandler.start.x-e.x)>5||Math.abs(this.dragHandler.start.y-e.y)>5){var n=this.dragHandler.start,i=Math.min(n.y,e.y),r=Math.max(n.y,e.y),s=Math.min(n.x,e.x),o=Math.max(n.x,e.x);t=new OpenLayers.Bounds(s,r,o,i)}else t=this.dragHandler.start.clone();this.removeBox(),this.callback("done",[t])},removeBox:function(){this.map.viewPortDiv.removeChild(this.zoomBox),this.zoomBox=null,this.boxOffsets=null,OpenLayers.Element.removeClass(this.map.viewPortDiv,"olDrawBox")},activate:function(){return!!OpenLayers.Handler.prototype.activate.apply(this,arguments)&&(this.dragHandler.activate(),!0)},deactivate:function(){return!!OpenLayers.Handler.prototype.deactivate.apply(this,arguments)&&(this.dragHandler.deactivate()&&this.zoomBox&&this.removeBox(),!0)},getBoxOffsets:function(){if(!this.boxOffsets){var e=document.createElement("div");e.style.position="absolute",e.style.border="1px solid black",e.style.width="3px",document.body.appendChild(e);var t=3==e.clientWidth;document.body.removeChild(e);var n=parseInt(OpenLayers.Element.getStyle(this.zoomBox,"border-left-width")),i=parseInt(OpenLayers.Element.getStyle(this.zoomBox,"border-right-width")),r=parseInt(OpenLayers.Element.getStyle(this.zoomBox,"border-top-width")),s=parseInt(OpenLayers.Element.getStyle(this.zoomBox,"border-bottom-width"));this.boxOffsets={left:n,right:i,top:r,bottom:s,width:t===!1?n+i:0,height:t===!1?r+s:0}}return this.boxOffsets},CLASS_NAME:"OpenLayers.Handler.Box"}),OpenLayers.Control.ZoomBox=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_TOOL,out:!1,keyMask:null,alwaysZoom:!1,zoomOnClick:!0,draw:function(){this.handler=new OpenLayers.Handler.Box(this,{done:this.zoomBox},{keyMask:this.keyMask})},zoomBox:function(e){if(e instanceof OpenLayers.Bounds){var t,n=e.getCenterPixel();if(this.out){var i=e.right-e.left,r=e.bottom-e.top,s=Math.min(this.map.size.h/r,this.map.size.w/i),o=this.map.getExtent(),a=this.map.getLonLatFromPixel(n),l=a.lon-o.getWidth()/2*s,u=a.lon+o.getWidth()/2*s,h=a.lat-o.getHeight()/2*s,c=a.lat+o.getHeight()/2*s;t=new OpenLayers.Bounds(l,h,u,c)}else{var p=this.map.getLonLatFromPixel({x:e.left,y:e.bottom}),d=this.map.getLonLatFromPixel({x:e.right,y:e.top});t=new OpenLayers.Bounds(p.lon,p.lat,d.lon,d.lat)}var f=this.map.getZoom(),y=this.map.getSize(),m={x:y.w/2,y:y.h/2},g=this.map.getZoomForExtent(t),v=this.map.getResolution(),L=this.map.getResolutionForZoom(g);if(v==L)this.map.setCenter(this.map.getLonLatFromPixel(n));else{var b={x:(v*n.x-L*m.x)/(v-L),y:(v*n.y-L*m.y)/(v-L)};this.map.zoomTo(g,b)}f==this.map.getZoom()&&1==this.alwaysZoom&&this.map.zoomTo(f+(this.out?-1:1))}else this.zoomOnClick&&(this.out?this.map.zoomTo(this.map.getZoom()-1,e):this.map.zoomTo(this.map.getZoom()+1,e))},CLASS_NAME:"OpenLayers.Control.ZoomBox"}),OpenLayers.Control.DragPan=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_TOOL,panned:!1,interval:0,documentDrag:!1,kinetic:null,enableKinetic:!0,kineticInterval:10,draw:function(){if(this.enableKinetic&&OpenLayers.Kinetic){var e={interval:this.kineticInterval};"object"==typeof this.enableKinetic&&(e=OpenLayers.Util.extend(e,this.enableKinetic)),this.kinetic=new OpenLayers.Kinetic(e)}this.handler=new OpenLayers.Handler.Drag(this,{move:this.panMap,done:this.panMapDone,down:this.panMapStart},{interval:this.interval,documentDrag:this.documentDrag})},panMapStart:function(){this.kinetic&&this.kinetic.begin()},panMap:function(e){this.kinetic&&this.kinetic.update(e),this.panned=!0,this.map.pan(this.handler.last.x-e.x,this.handler.last.y-e.y,{dragging:!0,animate:!1})},panMapDone:function(e){if(this.panned){var t=null;if(this.kinetic&&(t=this.kinetic.end(e)),this.map.pan(this.handler.last.x-e.x,this.handler.last.y-e.y,{dragging:!!t,animate:!1}),t){var n=this;this.kinetic.move(t,function(e,t,i){n.map.pan(e,t,{dragging:!i,animate:!1})})}this.panned=!1}},CLASS_NAME:"OpenLayers.Control.DragPan"}),OpenLayers.Handler.MouseWheel=OpenLayers.Class(OpenLayers.Handler,{wheelListener:null,interval:0,maxDelta:Number.POSITIVE_INFINITY,delta:0,cumulative:!0,initialize:function(e,t,n){OpenLayers.Handler.prototype.initialize.apply(this,arguments),this.wheelListener=OpenLayers.Function.bindAsEventListener(this.onWheelEvent,this)},destroy:function(){OpenLayers.Handler.prototype.destroy.apply(this,arguments),this.wheelListener=null},onWheelEvent:function(e){if(this.map&&this.checkModifiers(e)){for(var t=!1,n=!1,i=!1,r=OpenLayers.Event.element(e);null!=r&&!i&&!t;){if(!t)try{var s;if(r.currentStyle)s=r.currentStyle.overflow;else{var o=document.defaultView.getComputedStyle(r,null);s=o.getPropertyValue("overflow")}t=s&&"auto"==s||"scroll"==s}catch(e){}if(!n&&(n=OpenLayers.Element.hasClass(r,"olScrollable"),!n))for(var a=0,l=this.map.layers.length;a<l;a++){var u=this.map.layers[a];if(r==u.div||r==u.pane){n=!0;break}}i=r==this.map.div,r=r.parentNode}if(!t&&i){if(n){var h=0;if(e.wheelDelta?(h=e.wheelDelta,h%160===0&&(h*=.75),h/=120):e.detail&&(h=-(e.detail/Math.abs(e.detail))),this.delta+=h,window.clearTimeout(this._timeoutId),this.interval&&Math.abs(this.delta)<this.maxDelta){var c=OpenLayers.Util.extend({},e);this._timeoutId=window.setTimeout(OpenLayers.Function.bind(function(){this.wheelZoom(c)},this),this.interval)}else this.wheelZoom(e)}OpenLayers.Event.stop(e)}}},wheelZoom:function(e){var t=this.delta;this.delta=0,t&&(e.xy=this.map.events.getMousePosition(e),t<0?this.callback("down",[e,this.cumulative?Math.max(-this.maxDelta,t):-1]):this.callback("up",[e,this.cumulative?Math.min(this.maxDelta,t):1]))},activate:function(e){if(OpenLayers.Handler.prototype.activate.apply(this,arguments)){var t=this.wheelListener;return OpenLayers.Event.observe(window,"DOMMouseScroll",t),OpenLayers.Event.observe(window,"mousewheel",t),OpenLayers.Event.observe(document,"mousewheel",t),!0}return!1},deactivate:function(e){if(OpenLayers.Handler.prototype.deactivate.apply(this,arguments)){var t=this.wheelListener;return OpenLayers.Event.stopObserving(window,"DOMMouseScroll",t),OpenLayers.Event.stopObserving(window,"mousewheel",t),OpenLayers.Event.stopObserving(document,"mousewheel",t),!0}return!1},CLASS_NAME:"OpenLayers.Handler.MouseWheel"}),OpenLayers.Handler.Click=OpenLayers.Class(OpenLayers.Handler,{delay:300,single:!0,double:!1,pixelTolerance:0,dblclickTolerance:13,stopSingle:!1,stopDouble:!1,timerId:null,down:null,last:null,first:null,rightclickTimerId:null,touchstart:function(e){return this.startTouch(),this.down=this.getEventInfo(e),this.last=this.getEventInfo(e),!0},touchmove:function(e){return this.last=this.getEventInfo(e),!0},touchend:function(e){return this.down&&(e.xy=this.last.xy,e.lastTouches=this.last.touches,this.handleSingle(e),this.down=null),!0},mousedown:function(e){return this.down=this.getEventInfo(e),this.last=this.getEventInfo(e),!0},mouseup:function(e){var t=!0;return this.checkModifiers(e)&&this.control.handleRightClicks&&OpenLayers.Event.isRightClick(e)&&(t=this.rightclick(e)),t},rightclick:function(e){if(this.passesTolerance(e)){if(null!=this.rightclickTimerId)return this.clearTimer(),this.callback("dblrightclick",[e]),!this.stopDouble;var t=this.double?OpenLayers.Util.extend({},e):this.callback("rightclick",[e]),n=OpenLayers.Function.bind(this.delayedRightCall,this,t);this.rightclickTimerId=window.setTimeout(n,this.delay)}return!this.stopSingle},delayedRightCall:function(e){this.rightclickTimerId=null,e&&this.callback("rightclick",[e])},click:function(e){return this.last||(this.last=this.getEventInfo(e)),this.handleSingle(e),!this.stopSingle},dblclick:function(e){return this.handleDouble(e),!this.stopDouble},handleDouble:function(e){this.passesDblclickTolerance(e)&&(this.double&&this.callback("dblclick",[e]),this.clearTimer())},handleSingle:function(e){if(this.passesTolerance(e))if(null!=this.timerId)this.last.touches&&1===this.last.touches.length&&(this.double&&OpenLayers.Event.preventDefault(e),this.handleDouble(e)),this.last.touches&&2===this.last.touches.length||this.clearTimer();else{this.first=this.getEventInfo(e);var t=this.single?OpenLayers.Util.extend({},e):null;this.queuePotentialClick(t)}},queuePotentialClick:function(e){this.timerId=window.setTimeout(OpenLayers.Function.bind(this.delayedCall,this,e),this.delay)},passesTolerance:function(e){var t=!0;if(null!=this.pixelTolerance&&this.down&&this.down.xy&&(t=this.pixelTolerance>=this.down.xy.distanceTo(e.xy),t&&this.touch&&this.down.touches.length===this.last.touches.length))for(var n=0,i=this.down.touches.length;n<i;++n)if(this.getTouchDistance(this.down.touches[n],this.last.touches[n])>this.pixelTolerance){t=!1;break}return t},getTouchDistance:function(e,t){return Math.sqrt(Math.pow(e.clientX-t.clientX,2)+Math.pow(e.clientY-t.clientY,2))},passesDblclickTolerance:function(e){var t=!0;return this.down&&this.first&&(t=this.down.xy.distanceTo(this.first.xy)<=this.dblclickTolerance),t},clearTimer:function(){null!=this.timerId&&(window.clearTimeout(this.timerId),this.timerId=null),null!=this.rightclickTimerId&&(window.clearTimeout(this.rightclickTimerId),this.rightclickTimerId=null)},delayedCall:function(e){this.timerId=null,e&&this.callback("click",[e])},getEventInfo:function(e){var t;if(e.touches){var n=e.touches.length;t=new Array(n);for(var i,r=0;r<n;r++)i=e.touches[r],t[r]={clientX:i.olClientX,clientY:i.olClientY}}return{xy:e.xy,touches:t}},deactivate:function(){var e=!1;return OpenLayers.Handler.prototype.deactivate.apply(this,arguments)&&(this.clearTimer(),this.down=null,this.first=null,this.last=null,e=!0),e},CLASS_NAME:"OpenLayers.Handler.Click"}),OpenLayers.Control.Navigation=OpenLayers.Class(OpenLayers.Control,{dragPan:null,dragPanOptions:null,pinchZoom:null,pinchZoomOptions:null,documentDrag:!1,zoomBox:null,zoomBoxEnabled:!0,zoomWheelEnabled:!0,mouseWheelOptions:null,handleRightClicks:!1,zoomBoxKeyMask:OpenLayers.Handler.MOD_SHIFT,autoActivate:!0,initialize:function(e){this.handlers={},OpenLayers.Control.prototype.initialize.apply(this,arguments)},destroy:function(){this.deactivate(),this.dragPan&&this.dragPan.destroy(),this.dragPan=null,this.zoomBox&&this.zoomBox.destroy(),this.zoomBox=null,this.pinchZoom&&this.pinchZoom.destroy(),this.pinchZoom=null,OpenLayers.Control.prototype.destroy.apply(this,arguments)},activate:function(){return this.dragPan.activate(),this.zoomWheelEnabled&&this.handlers.wheel.activate(),this.handlers.click.activate(),this.zoomBoxEnabled&&this.zoomBox.activate(),this.pinchZoom&&this.pinchZoom.activate(),OpenLayers.Control.prototype.activate.apply(this,arguments)},deactivate:function(){return this.pinchZoom&&this.pinchZoom.deactivate(),this.zoomBox.deactivate(),this.dragPan.deactivate(),this.handlers.click.deactivate(),this.handlers.wheel.deactivate(),OpenLayers.Control.prototype.deactivate.apply(this,arguments)},draw:function(){this.handleRightClicks&&(this.map.viewPortDiv.oncontextmenu=OpenLayers.Function.False);var e={click:this.defaultClick,dblclick:this.defaultDblClick,dblrightclick:this.defaultDblRightClick},t={double:!0,stopDouble:!0};this.handlers.click=new OpenLayers.Handler.Click(this,e,t),this.dragPan=new OpenLayers.Control.DragPan(OpenLayers.Util.extend({map:this.map,documentDrag:this.documentDrag},this.dragPanOptions)),this.zoomBox=new OpenLayers.Control.ZoomBox({map:this.map,keyMask:this.zoomBoxKeyMask}),this.dragPan.draw(),this.zoomBox.draw();var n=this.map.fractionalZoom?{}:{cumulative:!1,interval:50,maxDelta:6};this.handlers.wheel=new OpenLayers.Handler.MouseWheel(this,{up:this.wheelUp,down:this.wheelDown},OpenLayers.Util.extend(n,this.mouseWheelOptions)),OpenLayers.Control.PinchZoom&&(this.pinchZoom=new OpenLayers.Control.PinchZoom(OpenLayers.Util.extend({map:this.map},this.pinchZoomOptions)))},defaultClick:function(e){e.lastTouches&&2==e.lastTouches.length&&this.map.zoomOut()},defaultDblClick:function(e){this.map.zoomTo(this.map.zoom+1,e.xy)},defaultDblRightClick:function(e){this.map.zoomTo(this.map.zoom-1,e.xy)},wheelChange:function(e,t){this.map.fractionalZoom||(t=Math.round(t));var n=this.map.getZoom(),i=n+t;i=Math.max(i,0),i=Math.min(i,this.map.getNumZoomLevels()),i!==n&&this.map.zoomTo(i,e.xy)},wheelUp:function(e,t){this.wheelChange(e,t||1)},wheelDown:function(e,t){this.wheelChange(e,t||-1)},disableZoomBox:function(){this.zoomBoxEnabled=!1,this.zoomBox.deactivate()},enableZoomBox:function(){this.zoomBoxEnabled=!0,this.active&&this.zoomBox.activate()},disableZoomWheel:function(){this.zoomWheelEnabled=!1,this.handlers.wheel.deactivate()},enableZoomWheel:function(){this.zoomWheelEnabled=!0,this.active&&this.handlers.wheel.activate()},CLASS_NAME:"OpenLayers.Control.Navigation"}),OpenLayers.Handler.Keyboard=OpenLayers.Class(OpenLayers.Handler,{KEY_EVENTS:["keydown","keyup"],eventListener:null,observeElement:null,initialize:function(e,t,n){OpenLayers.Handler.prototype.initialize.apply(this,arguments),this.eventListener=OpenLayers.Function.bindAsEventListener(this.handleKeyEvent,this)},destroy:function(){this.deactivate(),this.eventListener=null,OpenLayers.Handler.prototype.destroy.apply(this,arguments)},activate:function(){if(OpenLayers.Handler.prototype.activate.apply(this,arguments)){this.observeElement=this.observeElement||document;for(var e=0,t=this.KEY_EVENTS.length;e<t;e++)OpenLayers.Event.observe(this.observeElement,this.KEY_EVENTS[e],this.eventListener);return!0}return!1},deactivate:function(){var e=!1;if(OpenLayers.Handler.prototype.deactivate.apply(this,arguments)){for(var t=0,n=this.KEY_EVENTS.length;t<n;t++)OpenLayers.Event.stopObserving(this.observeElement,this.KEY_EVENTS[t],this.eventListener);e=!0}return e},handleKeyEvent:function(e){this.checkModifiers(e)&&this.callback(e.type,[e])},CLASS_NAME:"OpenLayers.Handler.Keyboard"}),OpenLayers.Control.KeyboardDefaults=OpenLayers.Class(OpenLayers.Control,{autoActivate:!0,slideFactor:75,observeElement:null,draw:function(){var e=this.observeElement||document;this.handler=new OpenLayers.Handler.Keyboard(this,{keydown:this.defaultKeyPress},{observeElement:e})},defaultKeyPress:function(e){var t,n=!0,i=OpenLayers.Event.element(e);if(!i||"INPUT"!=i.tagName&&"TEXTAREA"!=i.tagName&&"SELECT"!=i.tagName){switch(e.keyCode){case OpenLayers.Event.KEY_LEFT:this.map.pan(-this.slideFactor,0);break;case OpenLayers.Event.KEY_RIGHT:this.map.pan(this.slideFactor,0);break;case OpenLayers.Event.KEY_UP:this.map.pan(0,-this.slideFactor);break;case OpenLayers.Event.KEY_DOWN:this.map.pan(0,this.slideFactor);break;case 33:t=this.map.getSize(),this.map.pan(0,-.75*t.h);break;case 34:t=this.map.getSize(),this.map.pan(0,.75*t.h);break;case 35:t=this.map.getSize(),this.map.pan(.75*t.w,0);break;case 36:t=this.map.getSize(),this.map.pan(-.75*t.w,0);break;case 43:case 61:case 187:case 107:this.map.zoomIn();break;case 45:case 109:case 189:case 95:this.map.zoomOut();break;default:n=!1}n&&OpenLayers.Event.stop(e)}},CLASS_NAME:"OpenLayers.Control.KeyboardDefaults"}),OpenLayers.Control.Measure=OpenLayers.Class(OpenLayers.Control,{callbacks:null,displaySystem:"metric",geodesic:!1,displaySystemUnits:{geographic:["dd"],english:["mi","ft","in"],metric:["km","m"]},partialDelay:300,delayedTrigger:null,persist:!1,immediate:!1,initialize:function(e,t){OpenLayers.Control.prototype.initialize.apply(this,[t]);var n={done:this.measureComplete,point:this.measurePartial};this.immediate&&(n.modify=this.measureImmediate),this.callbacks=OpenLayers.Util.extend(n,this.callbacks),this.handlerOptions=OpenLayers.Util.extend({persist:this.persist},this.handlerOptions),this.handler=new e(this,this.callbacks,this.handlerOptions)},deactivate:function(){return this.cancelDelay(),OpenLayers.Control.prototype.deactivate.apply(this,arguments)},cancel:function(){this.cancelDelay(),this.handler.cancel()},setImmediate:function(e){this.immediate=e,this.immediate?this.callbacks.modify=this.measureImmediate:delete this.callbacks.modify},updateHandler:function(e,t){var n=this.active;n&&this.deactivate(),this.handler=new e(this,this.callbacks,t),n&&this.activate()},measureComplete:function(e){this.cancelDelay(),this.measure(e,"measure")},measurePartial:function(e,t){this.cancelDelay(),t=t.clone(),this.handler.freehandMode(this.handler.evt)?this.measure(t,"measurepartial"):this.delayedTrigger=window.setTimeout(OpenLayers.Function.bind(function(){this.delayedTrigger=null,this.measure(t,"measurepartial")},this),this.partialDelay)},measureImmediate:function(e,t,n){n&&!this.handler.freehandMode(this.handler.evt)&&(this.cancelDelay(),this.measure(t.geometry,"measurepartial"))},cancelDelay:function(){null!==this.delayedTrigger&&(window.clearTimeout(this.delayedTrigger),this.delayedTrigger=null)},measure:function(e,t){var n,i;e.CLASS_NAME.indexOf("LineString")>-1?(n=this.getBestLength(e),i=1):(n=this.getBestArea(e),i=2),this.events.triggerEvent(t,{measure:n[0],units:n[1],order:i,geometry:e})},getBestArea:function(e){for(var t,n,i=this.displaySystemUnits[this.displaySystem],r=0,s=i.length;r<s&&(t=i[r],n=this.getArea(e,t),!(n>1));++r);return[n,t]},getArea:function(e,t){var n,i;this.geodesic?(n=e.getGeodesicArea(this.map.getProjectionObject()),i="m"):(n=e.getArea(),i=this.map.getUnits());var r=OpenLayers.INCHES_PER_UNIT[t];if(r){var s=OpenLayers.INCHES_PER_UNIT[i];n*=Math.pow(s/r,2)}return n},getBestLength:function(e){for(var t,n,i=this.displaySystemUnits[this.displaySystem],r=0,s=i.length;r<s&&(t=i[r],n=this.getLength(e,t),!(n>1));++r);return[n,t]},getLength:function(e,t){var n,i;this.geodesic?(n=e.getGeodesicLength(this.map.getProjectionObject()),i="m"):(n=e.getLength(),i=this.map.getUnits());var r=OpenLayers.INCHES_PER_UNIT[t];if(r){var s=OpenLayers.INCHES_PER_UNIT[i];n*=s/r}return n},CLASS_NAME:"OpenLayers.Control.Measure"}),OpenLayers.Control.LayerSwitcher=OpenLayers.Class(OpenLayers.Control,{layerStates:null,layersDiv:null,baseLayersDiv:null,baseLayers:null,dataLbl:null,dataLayersDiv:null,dataLayers:null,minimizeDiv:null,maximizeDiv:null,ascending:!0,initialize:function(e){OpenLayers.Control.prototype.initialize.apply(this,arguments),this.layerStates=[]},destroy:function(){this.clearLayersArray("base"),this.clearLayersArray("data"),this.map.events.un({buttonclick:this.onButtonClick,addlayer:this.redraw,changelayer:this.redraw,removelayer:this.redraw,changebaselayer:this.redraw,scope:this}),this.events.unregister("buttonclick",this,this.onButtonClick),OpenLayers.Control.prototype.destroy.apply(this,arguments)},setMap:function(e){OpenLayers.Control.prototype.setMap.apply(this,arguments),this.map.events.on({addlayer:this.redraw,changelayer:this.redraw,removelayer:this.redraw,changebaselayer:this.redraw,scope:this}),this.outsideViewport?(this.events.attachToElement(this.div),this.events.register("buttonclick",this,this.onButtonClick)):this.map.events.register("buttonclick",this,this.onButtonClick)},draw:function(){return OpenLayers.Control.prototype.draw.apply(this),this.loadContents(),this.outsideViewport||this.minimizeControl(),this.redraw(),this.div},onButtonClick:function(e){var t=e.buttonElement;t===this.minimizeDiv?this.minimizeControl():t===this.maximizeDiv?this.maximizeControl():t._layerSwitcher===this.id&&(t.for&&(t=document.getElementById(t.for)),t.disabled||("radio"==t.type?(t.checked=!0,this.map.setBaseLayer(this.map.getLayer(t._layer))):(t.checked=!t.checked,this.updateMap())))},clearLayersArray:function(e){this[e+"LayersDiv"].innerHTML="",this[e+"Layers"]=[]},checkRedraw:function(){if(!this.layerStates.length||this.map.layers.length!=this.layerStates.length)return!0;for(var e=0,t=this.layerStates.length;e<t;e++){var n=this.layerStates[e],i=this.map.layers[e];if(n.name!=i.name||n.inRange!=i.inRange||n.id!=i.id||n.visibility!=i.visibility)return!0}return!1},redraw:function(){if(!this.checkRedraw())return this.div;this.clearLayersArray("base"),this.clearLayersArray("data");var e=!1,t=!1,n=this.map.layers.length;this.layerStates=new Array(n);for(var i=0;i<n;i++){var r=this.map.layers[i];this.layerStates[i]={name:r.name,visibility:r.visibility,inRange:r.inRange,id:r.id}}var s=this.map.layers.slice();this.ascending||s.reverse();for(var i=0,n=s.length;i<n;i++){var r=s[i],o=r.isBaseLayer;if(r.displayInLayerSwitcher){o?t=!0:e=!0;var a=o?r==this.map.baseLayer:r.getVisibility(),l=document.createElement("input"),u=OpenLayers.Util.createUniqueID(this.id+"_input_");l.id=u,l.name=o?this.id+"_baseLayers":r.name,l.type=o?"radio":"checkbox",l.value=r.name,l.checked=a,l.defaultChecked=a,l.className="olButton",l._layer=r.id,l._layerSwitcher=this.id,o||r.inRange||(l.disabled=!0);var h=document.createElement("label");h.for=l.id,OpenLayers.Element.addClass(h,"labelSpan olButton"),h._layer=r.id,h._layerSwitcher=this.id,o||r.inRange||(h.style.color="gray"),h.innerHTML=r.name,h.style.verticalAlign=o?"bottom":"baseline";var c=document.createElement("br"),p=o?this.baseLayers:this.dataLayers;p.push({layer:r,inputElem:l,labelSpan:h});var d=o?this.baseLayersDiv:this.dataLayersDiv;d.appendChild(l),d.appendChild(h),d.appendChild(c)}}return this.dataLbl.style.display=e?"":"none",this.baseLbl.style.display=t?"":"none",this.div},updateMap:function(){for(var e=0,t=this.baseLayers.length;e<t;e++){var n=this.baseLayers[e];n.inputElem.checked&&this.map.setBaseLayer(n.layer,!1)}for(var e=0,t=this.dataLayers.length;e<t;e++){var n=this.dataLayers[e];n.layer.setVisibility(n.inputElem.checked)}},maximizeControl:function(e){this.div.style.width="",this.div.style.height="",this.showControls(!1),null!=e&&OpenLayers.Event.stop(e)},minimizeControl:function(e){this.div.style.width="0px",this.div.style.height="0px",this.showControls(!0),null!=e&&OpenLayers.Event.stop(e)},showControls:function(e){this.maximizeDiv.style.display=e?"":"none",this.minimizeDiv.style.display=e?"none":"",this.layersDiv.style.display=e?"none":""},loadContents:function(){this.layersDiv=document.createElement("div"),this.layersDiv.id=this.id+"_layersDiv",OpenLayers.Element.addClass(this.layersDiv,"layersDiv"),this.baseLbl=document.createElement("div"),this.baseLbl.innerHTML=OpenLayers.i18n("Base Layer"),OpenLayers.Element.addClass(this.baseLbl,"baseLbl"),this.baseLayersDiv=document.createElement("div"),OpenLayers.Element.addClass(this.baseLayersDiv,"baseLayersDiv"),this.dataLbl=document.createElement("div"),this.dataLbl.innerHTML=OpenLayers.i18n("Overlays"),OpenLayers.Element.addClass(this.dataLbl,"dataLbl"),this.dataLayersDiv=document.createElement("div"),OpenLayers.Element.addClass(this.dataLayersDiv,"dataLayersDiv"),this.ascending?(this.layersDiv.appendChild(this.baseLbl),this.layersDiv.appendChild(this.baseLayersDiv),this.layersDiv.appendChild(this.dataLbl),this.layersDiv.appendChild(this.dataLayersDiv)):(this.layersDiv.appendChild(this.dataLbl),this.layersDiv.appendChild(this.dataLayersDiv),this.layersDiv.appendChild(this.baseLbl),this.layersDiv.appendChild(this.baseLayersDiv)),this.div.appendChild(this.layersDiv);var e=OpenLayers.Util.getImageLocation("layer-switcher-maximize.png");this.maximizeDiv=OpenLayers.Util.createAlphaImageDiv("OpenLayers_Control_MaximizeDiv",null,null,e,"absolute"),OpenLayers.Element.addClass(this.maximizeDiv,"maximizeDiv olButton"),this.maximizeDiv.style.display="none",this.div.appendChild(this.maximizeDiv);var e=OpenLayers.Util.getImageLocation("layer-switcher-minimize.png");this.minimizeDiv=OpenLayers.Util.createAlphaImageDiv("OpenLayers_Control_MinimizeDiv",null,null,e,"absolute"),OpenLayers.Element.addClass(this.minimizeDiv,"minimizeDiv olButton"),this.minimizeDiv.style.display="none",this.div.appendChild(this.minimizeDiv)},CLASS_NAME:"OpenLayers.Control.LayerSwitcher"}),OpenLayers.Handler.Pinch=OpenLayers.Class(OpenLayers.Handler,{started:!1,stopDown:!1,pinching:!1,last:null,start:null,touchstart:function(e){var t=!0;if(this.pinching=!1,OpenLayers.Event.isMultiTouch(e))this.started=!0,this.last=this.start={distance:this.getDistance(e.touches),delta:0,scale:1},this.callback("start",[e,this.start]),t=!this.stopDown;else{if(this.started)return!1;this.started=!1,this.start=null,this.last=null}return OpenLayers.Event.preventDefault(e),t},touchmove:function(e){if(this.started&&OpenLayers.Event.isMultiTouch(e)){this.pinching=!0;var t=this.getPinchData(e);this.callback("move",[e,t]),this.last=t,OpenLayers.Event.stop(e)}else if(this.started)return!1;return!0},touchend:function(e){return!(this.started&&!OpenLayers.Event.isMultiTouch(e))||(this.started=!1,this.pinching=!1,this.callback("done",[e,this.start,this.last]),this.start=null,this.last=null,!1)},activate:function(){var e=!1;return OpenLayers.Handler.prototype.activate.apply(this,arguments)&&(this.pinching=!1,e=!0),e},deactivate:function(){var e=!1;return OpenLayers.Handler.prototype.deactivate.apply(this,arguments)&&(this.started=!1,this.pinching=!1,this.start=null,this.last=null,e=!0),e},getDistance:function(e){var t=e[0],n=e[1];return Math.sqrt(Math.pow(t.olClientX-n.olClientX,2)+Math.pow(t.olClientY-n.olClientY,2))},getPinchData:function(e){var t=this.getDistance(e.touches),n=t/this.start.distance;return{distance:t,delta:this.last.distance-t,scale:n}},CLASS_NAME:"OpenLayers.Handler.Pinch"}),OpenLayers.Control.PinchZoom=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_TOOL,pinchOrigin:null,currentCenter:null,autoActivate:!0,preserveCenter:!1,initialize:function(e){OpenLayers.Control.prototype.initialize.apply(this,arguments),this.handler=new OpenLayers.Handler.Pinch(this,{start:this.pinchStart,move:this.pinchMove,done:this.pinchDone},this.handlerOptions)},pinchStart:function(e,t){var n=this.preserveCenter?this.map.getPixelFromLonLat(this.map.getCenter()):e.xy;this.pinchOrigin=n,this.currentCenter=n},pinchMove:function(e,t){var n=t.scale,i=this.map.layerContainerOriginPx,r=this.pinchOrigin,s=this.preserveCenter?this.map.getPixelFromLonLat(this.map.getCenter()):e.xy,o=Math.round(i.x+s.x-r.x+(n-1)*(i.x-r.x)),a=Math.round(i.y+s.y-r.y+(n-1)*(i.y-r.y));this.map.applyTransform(o,a,n),this.currentCenter=s},pinchDone:function(e,t,n){this.map.applyTransform();var i=this.map.getZoomForResolution(this.map.getResolution()/n.scale,!0);if(i!==this.map.getZoom()||!this.currentCenter.equals(this.pinchOrigin)){var r=this.map.getResolutionForZoom(i),s=this.map.getLonLatFromPixel(this.pinchOrigin),o=this.currentCenter,a=this.map.getSize();s.lon+=r*(a.w/2-o.x),s.lat-=r*(a.h/2-o.y),this.map.div.clientWidth=this.map.div.clientWidth,this.map.setCenter(s,i)}},CLASS_NAME:"OpenLayers.Control.PinchZoom"}),OpenLayers.Control.TouchNavigation=OpenLayers.Class(OpenLayers.Control,{dragPan:null,dragPanOptions:null,pinchZoom:null,pinchZoomOptions:null,clickHandlerOptions:null,documentDrag:!1,autoActivate:!0,initialize:function(e){this.handlers={},OpenLayers.Control.prototype.initialize.apply(this,arguments)},destroy:function(){this.deactivate(),this.dragPan&&this.dragPan.destroy(),this.dragPan=null,this.pinchZoom&&(this.pinchZoom.destroy(),delete this.pinchZoom),OpenLayers.Control.prototype.destroy.apply(this,arguments)},activate:function(){return!!OpenLayers.Control.prototype.activate.apply(this,arguments)&&(this.dragPan.activate(),this.handlers.click.activate(),this.pinchZoom.activate(),!0)},deactivate:function(){return!!OpenLayers.Control.prototype.deactivate.apply(this,arguments)&&(this.dragPan.deactivate(),this.handlers.click.deactivate(),this.pinchZoom.deactivate(),!0)},draw:function(){var e={click:this.defaultClick,dblclick:this.defaultDblClick},t=OpenLayers.Util.extend({double:!0,stopDouble:!0,pixelTolerance:2},this.clickHandlerOptions);this.handlers.click=new OpenLayers.Handler.Click(this,e,t),this.dragPan=new OpenLayers.Control.DragPan(OpenLayers.Util.extend({map:this.map,documentDrag:this.documentDrag},this.dragPanOptions)),this.dragPan.draw(),this.pinchZoom=new OpenLayers.Control.PinchZoom(OpenLayers.Util.extend({map:this.map},this.pinchZoomOptions))},defaultClick:function(e){e.lastTouches&&2==e.lastTouches.length&&this.map.zoomOut()},defaultDblClick:function(e){this.map.zoomTo(this.map.zoom+1,e.xy)},CLASS_NAME:"OpenLayers.Control.TouchNavigation"}),OpenLayers.Control.ModifyFeature=OpenLayers.Class(OpenLayers.Control,{bySegment:!1,documentDrag:!1,geometryTypes:null,clickout:!0,toggle:!0,standalone:!1,layer:null,feature:null,vertex:null,vertices:null,virtualVertices:null,handlers:null,deleteCodes:null,virtualStyle:null,vertexRenderIntent:null,mode:null,createVertices:!0,modified:!1,radiusHandle:null,dragHandle:null,onModificationStart:function(){},onModification:function(){},onModificationEnd:function(){},initialize:function(e,t){t=t||{},this.layer=e,this.vertices=[],this.virtualVertices=[],this.virtualStyle=OpenLayers.Util.extend({},this.layer.style||this.layer.styleMap.createSymbolizer(null,t.vertexRenderIntent)),this.virtualStyle.fillOpacity=.3,this.virtualStyle.strokeOpacity=.3,this.deleteCodes=[46,68],this.mode=OpenLayers.Control.ModifyFeature.RESHAPE,OpenLayers.Control.prototype.initialize.apply(this,[t]),OpenLayers.Util.isArray(this.deleteCodes)||(this.deleteCodes=[this.deleteCodes]);var n={down:function(e){this.vertex=null;var t=this.layer.getFeatureFromEvent(this.handlers.drag.evt);t?this.dragStart(t):this.clickout&&(this._unselect=this.feature)},move:function(e){delete this._unselect,this.vertex&&this.dragVertex(this.vertex,e)},up:function(){this.handlers.drag.stopDown=!1,this._unselect&&(this.unselectFeature(this._unselect),delete this._unselect)},done:function(e){this.vertex&&this.dragComplete(this.vertex)}},i=this,r={documentDrag:this.documentDrag,setEvent:function(e){var t=i.feature;i._lastVertex=t?t.layer.getFeatureFromEvent(e):null,OpenLayers.Handler.Drag.prototype.setEvent.apply(this,arguments)},stopDown:!1},s={keydown:this.handleKeypress};if(this.handlers={keyboard:new OpenLayers.Handler.Keyboard(this,s),drag:new OpenLayers.Handler.Drag(this,n,r)},this.bySegment){if(!window.rbush)throw new Error("The rbush library is required");if(!OpenLayers.Control.ModifyFeature.BySegment)throw new Error("OpenLayers.Control.ModifyFeature.BySegment is missing from the build");OpenLayers.Util.extend(this,OpenLayers.Control.ModifyFeature.BySegment)}},createVirtualVertex:function(e,t){var n=(e.x+t.x)/2,i=(e.y+t.y)/2,r=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point(n,i),null,this.virtualStyle);return r._sketch=!0,r},destroy:function(){this.map&&this.map.events.un({removelayer:this.handleMapEvents,changelayer:this.handleMapEvents,scope:this}),this.layer=null,OpenLayers.Control.prototype.destroy.apply(this,[])},activate:function(){return!!OpenLayers.Control.prototype.activate.apply(this,arguments)&&(this.moveLayerToTop(),this.map.events.on({removelayer:this.handleMapEvents,changelayer:this.handleMapEvents,scope:this}),this._lastVertex=null,this.handlers.keyboard.activate()&&this.handlers.drag.activate());
},deactivate:function(){var e=!1;if(OpenLayers.Control.prototype.deactivate.apply(this,arguments)){this.moveLayerBack(),this.map.events.un({removelayer:this.handleMapEvents,changelayer:this.handleMapEvents,scope:this}),this.layer.removeFeatures(this.vertices,{silent:!0}),this.layer.removeFeatures(this.virtualVertices,{silent:!0}),this.vertices=[],this.handlers.drag.deactivate(),this.handlers.keyboard.deactivate();var t=this.feature;t&&t.geometry&&t.layer&&this.unselectFeature(t),e=!0}return e},beforeSelectFeature:function(e){return this.layer.events.triggerEvent("beforefeaturemodified",{feature:e})},selectFeature:function(e){var t=OpenLayers.Util.indexOf;if(!(this.feature===e||this.geometryTypes&&t(this.geometryTypes,e.geometry.CLASS_NAME)==-1)){this.beforeSelectFeature(e)!==!1&&(this.feature&&this.unselectFeature(this.feature),this.feature=e,t(this.layer.selectedFeatures,e)==-1&&this.layer.selectedFeatures.push(e),this.layer.drawFeature(e,"select"),this.modified=!1,this.resetVertices(),this.onModificationStart(this.feature));var n=e.modified;!e.geometry||n&&n.geometry||(this._originalGeometry=e.geometry.clone())}},unselectFeature:function(e){this.layer.removeFeatures(this.vertices,{silent:!0}),this.vertices=[],this.layer.destroyFeatures(this.virtualVertices,{silent:!0}),this.virtualVertices=[],this.dragHandle&&(this.layer.destroyFeatures([this.dragHandle],{silent:!0}),delete this.dragHandle),this.radiusHandle&&(this.layer.destroyFeatures([this.radiusHandle],{silent:!0}),delete this.radiusHandle),this.layer.drawFeature(this.feature,"default"),this.feature=null,OpenLayers.Util.removeItem(this.layer.selectedFeatures,e),this.onModificationEnd(e),this.layer.events.triggerEvent("afterfeaturemodified",{feature:e,modified:this.modified}),this.modified=!1},dragStart:function(e){var t="OpenLayers.Geometry.Point"==e.geometry.CLASS_NAME;this.standalone||(e._sketch||!t)&&e._sketch||(this.toggle&&this.feature===e&&(this._unselect=e),this.selectFeature(e)),this.feature&&(e._sketch||t&&e===this.feature)&&(this.vertex=e,this.handlers.drag.stopDown=!0)},dragVertex:function(e,t){var n=this.map.getLonLatFromViewPortPx(t),i=e.geometry;i.move(n.lon-i.x,n.lat-i.y),this.modified=!0,"OpenLayers.Geometry.Point"==this.feature.geometry.CLASS_NAME?this.layer.events.triggerEvent("vertexmodified",{vertex:e.geometry,feature:this.feature,pixel:t}):(e._index?(e._index==-1&&(e._index=OpenLayers.Util.indexOf(e.geometry.parent.components,e._next)),e.geometry.parent.addComponent(e.geometry,e._index),delete e._index,OpenLayers.Util.removeItem(this.virtualVertices,e),this.vertices.push(e)):e==this.dragHandle?(this.layer.removeFeatures(this.vertices,{silent:!0}),this.vertices=[],this.radiusHandle&&(this.layer.destroyFeatures([this.radiusHandle],{silent:!0}),this.radiusHandle=null)):e!==this.radiusHandle&&this.layer.events.triggerEvent("vertexmodified",{vertex:e.geometry,feature:this.feature,pixel:t}),this.virtualVertices.length>0&&(this.layer.destroyFeatures(this.virtualVertices,{silent:!0}),this.virtualVertices=[]),this.layer.drawFeature(this.feature,this.standalone?void 0:"select")),this.layer.drawFeature(e)},dragComplete:function(e){this.resetVertices(),this.setFeatureState(),this.onModification(this.feature),this.layer.events.triggerEvent("featuremodified",{feature:this.feature})},setFeatureState:function(){if(this.feature.state!=OpenLayers.State.INSERT&&this.feature.state!=OpenLayers.State.DELETE&&(this.feature.state=OpenLayers.State.UPDATE,this.modified&&this._originalGeometry)){var e=this.feature;e.modified=OpenLayers.Util.extend(e.modified,{geometry:this._originalGeometry}),delete this._originalGeometry}},resetVertices:function(){this.vertices.length>0&&(this.layer.removeFeatures(this.vertices,{silent:!0}),this.vertices=[]),this.virtualVertices.length>0&&(this.layer.removeFeatures(this.virtualVertices,{silent:!0}),this.virtualVertices=[]),this.dragHandle&&(this.layer.destroyFeatures([this.dragHandle],{silent:!0}),this.dragHandle=null),this.radiusHandle&&(this.layer.destroyFeatures([this.radiusHandle],{silent:!0}),this.radiusHandle=null),this.feature&&"OpenLayers.Geometry.Point"!=this.feature.geometry.CLASS_NAME&&(this.mode&OpenLayers.Control.ModifyFeature.DRAG&&this.collectDragHandle(),this.mode&(OpenLayers.Control.ModifyFeature.ROTATE|OpenLayers.Control.ModifyFeature.RESIZE)&&this.collectRadiusHandle(),this.mode&OpenLayers.Control.ModifyFeature.RESHAPE&&(this.mode&OpenLayers.Control.ModifyFeature.RESIZE||this.collectVertices()))},handleKeypress:function(e){var t=e.keyCode;if(this.feature&&OpenLayers.Util.indexOf(this.deleteCodes,t)!=-1){var n=this._lastVertex;n&&OpenLayers.Util.indexOf(this.vertices,n)!=-1&&!this.handlers.drag.dragging&&n.geometry.parent&&(n.geometry.parent.removeComponent(n.geometry),this.layer.events.triggerEvent("vertexremoved",{vertex:n.geometry,feature:this.feature,pixel:e.xy}),this.layer.drawFeature(this.feature,this.standalone?void 0:"select"),this.modified=!0,this.resetVertices(),this.setFeatureState(),this.onModification(this.feature),this.layer.events.triggerEvent("featuremodified",{feature:this.feature}))}},collectVertices:function(){function e(n){var i,r,s,o;if("OpenLayers.Geometry.Point"==n.CLASS_NAME)r=new OpenLayers.Feature.Vector(n),r._sketch=!0,r.renderIntent=t.vertexRenderIntent,t.vertices.push(r);else{var a=n.components.length;for("OpenLayers.Geometry.LinearRing"==n.CLASS_NAME&&(a-=1),i=0;i<a;++i)s=n.components[i],"OpenLayers.Geometry.Point"==s.CLASS_NAME?(r=new OpenLayers.Feature.Vector(s),r._sketch=!0,r.renderIntent=t.vertexRenderIntent,t.vertices.push(r)):e(s);if(t.createVertices&&"OpenLayers.Geometry.MultiPoint"!=n.CLASS_NAME)for(i=0,o=n.components.length;i<o-1;++i){var l=n.components[i],u=n.components[i+1];if("OpenLayers.Geometry.Point"==l.CLASS_NAME&&"OpenLayers.Geometry.Point"==u.CLASS_NAME){var h=t.createVirtualVertex.call(t,l,u);h.geometry.parent=n,h._index=i+1,t.virtualVertices.push(h)}}}}this.vertices=[],this.virtualVertices=[];var t=this;e.call(this,this.feature.geometry),this.layer.addFeatures(this.virtualVertices,{silent:!0}),this.layer.addFeatures(this.vertices,{silent:!0})},collectDragHandle:function(){var e=this.feature.geometry,t=e.getBounds().getCenterLonLat(),n=new OpenLayers.Geometry.Point(t.lon,t.lat),i=new OpenLayers.Feature.Vector(n);n.move=function(t,n){OpenLayers.Geometry.Point.prototype.move.call(this,t,n),e.move(t,n)},i._sketch=!0,this.dragHandle=i,this.dragHandle.renderIntent=this.vertexRenderIntent,this.layer.addFeatures([this.dragHandle],{silent:!0})},collectRadiusHandle:function(){var e=this.feature.geometry,t=e.getBounds(),n=t.getCenterLonLat(),i=new OpenLayers.Geometry.Point(n.lon,n.lat),r=new OpenLayers.Geometry.Point(t.right,t.bottom),s=new OpenLayers.Feature.Vector(r),o=this.mode&OpenLayers.Control.ModifyFeature.RESIZE,a=this.mode&OpenLayers.Control.ModifyFeature.RESHAPE,l=this.mode&OpenLayers.Control.ModifyFeature.ROTATE;r.move=function(t,n){OpenLayers.Geometry.Point.prototype.move.call(this,t,n);var r=this.x-i.x,s=this.y-i.y,u=r-t,h=s-n;if(l){var c=Math.atan2(h,u),p=Math.atan2(s,r),d=p-c;d*=180/Math.PI,e.rotate(d,i)}if(o){var f,y;if(a)f=s/h,y=r/u/f;else{var m=Math.sqrt(u*u+h*h),g=Math.sqrt(r*r+s*s);f=g/m}e.resize(f,i,y)}},s._sketch=!0,this.radiusHandle=s,this.radiusHandle.renderIntent=this.vertexRenderIntent,this.layer.addFeatures([this.radiusHandle],{silent:!0})},setMap:function(e){this.handlers.drag.setMap(e),OpenLayers.Control.prototype.setMap.apply(this,arguments)},handleMapEvents:function(e){"removelayer"!=e.type&&"order"!=e.property||this.moveLayerToTop()},moveLayerToTop:function(){var e=Math.max(this.map.Z_INDEX_BASE.Feature-1,this.layer.getZIndex())+1;this.layer.setZIndex(e)},moveLayerBack:function(){var e=this.layer.getZIndex()-1;e>=this.map.Z_INDEX_BASE.Feature?this.layer.setZIndex(e):this.map.setLayerZIndex(this.layer,this.map.getLayerIndex(this.layer))},CLASS_NAME:"OpenLayers.Control.ModifyFeature"}),OpenLayers.Control.ModifyFeature.RESHAPE=1,OpenLayers.Control.ModifyFeature.RESIZE=2,OpenLayers.Control.ModifyFeature.ROTATE=4,OpenLayers.Control.ModifyFeature.DRAG=8,OpenLayers.Strategy=OpenLayers.Class({layer:null,options:null,active:null,autoActivate:!0,autoDestroy:!0,initialize:function(e){OpenLayers.Util.extend(this,e),this.options=e,this.active=!1},destroy:function(){this.deactivate(),this.layer=null,this.options=null},setLayer:function(e){this.layer=e},activate:function(){return!this.active&&(this.active=!0,!0)},deactivate:function(){return!!this.active&&(this.active=!1,!0)},CLASS_NAME:"OpenLayers.Strategy"}),OpenLayers.Strategy.Fixed=OpenLayers.Class(OpenLayers.Strategy,{preload:!1,activate:function(){var e=OpenLayers.Strategy.prototype.activate.apply(this,arguments);return e&&(this.layer.events.on({refresh:this.load,scope:this}),1==this.layer.visibility||this.preload?this.load():this.layer.events.on({visibilitychanged:this.load,scope:this})),e},deactivate:function(){var e=OpenLayers.Strategy.prototype.deactivate.call(this);return e&&this.layer.events.un({refresh:this.load,visibilitychanged:this.load,scope:this}),e},load:function(e){var t=this.layer;t.events.triggerEvent("loadstart",{filter:t.filter}),t.protocol.read(OpenLayers.Util.applyDefaults({callback:this.merge,filter:t.filter,scope:this},e)),t.events.un({visibilitychanged:this.load,scope:this})},merge:function(e){var t=this.layer;t.destroyFeatures();var n=e.features;if(n&&n.length>0){var i=t.projection,r=t.map.getProjectionObject();if(!r.equals(i))for(var s,o=0,a=n.length;o<a;++o)s=n[o].geometry,s&&s.transform(i,r);t.addFeatures(n)}t.events.triggerEvent("loadend",{response:e})},CLASS_NAME:"OpenLayers.Strategy.Fixed"}),OpenLayers.Handler.Point=OpenLayers.Class(OpenLayers.Handler,{point:null,layer:null,multi:!1,citeCompliant:!1,mouseDown:!1,stoppedDown:null,lastDown:null,lastUp:null,persist:!1,stopDown:!1,stopUp:!1,layerOptions:null,pixelTolerance:5,lastTouchPx:null,initialize:function(e,t,n){n&&n.layerOptions&&n.layerOptions.styleMap||(this.style=OpenLayers.Util.extend(OpenLayers.Feature.Vector.style.default,{})),OpenLayers.Handler.prototype.initialize.apply(this,arguments)},activate:function(){if(!OpenLayers.Handler.prototype.activate.apply(this,arguments))return!1;var e=OpenLayers.Util.extend({displayInLayerSwitcher:!1,calculateInRange:OpenLayers.Function.True,wrapDateLine:this.citeCompliant},this.layerOptions);return this.layer=new OpenLayers.Layer.Vector(this.CLASS_NAME,e),this.map.addLayer(this.layer),!0},createFeature:function(e){var t=this.layer.getLonLatFromViewPortPx(e),n=new OpenLayers.Geometry.Point(t.lon,t.lat);this.point=new OpenLayers.Feature.Vector(n),this.callback("create",[this.point.geometry,this.point]),this.point.geometry.clearBounds(),this.layer.addFeatures([this.point],{silent:!0})},deactivate:function(){return!!OpenLayers.Handler.prototype.deactivate.apply(this,arguments)&&(this.cancel(),null!=this.layer.map&&(this.destroyFeature(!0),this.layer.destroy(!1)),this.layer=null,!0)},destroyFeature:function(e){!this.layer||!e&&this.persist||this.layer.destroyFeatures(),this.point=null},destroyPersistedFeature:function(){var e=this.layer;e&&e.features.length>1&&this.layer.features[0].destroy()},finalize:function(e){var t=e?"cancel":"done";this.mouseDown=!1,this.lastDown=null,this.lastUp=null,this.lastTouchPx=null,this.callback(t,[this.geometryClone()]),this.destroyFeature(e)},cancel:function(){this.finalize(!0)},click:function(e){return OpenLayers.Event.stop(e),!1},dblclick:function(e){return OpenLayers.Event.stop(e),!1},modifyFeature:function(e){this.point||this.createFeature(e);var t=this.layer.getLonLatFromViewPortPx(e);this.point.geometry.x=t.lon,this.point.geometry.y=t.lat,this.callback("modify",[this.point.geometry,this.point,!1]),this.point.geometry.clearBounds(),this.drawFeature()},drawFeature:function(){this.layer.drawFeature(this.point,this.style)},getGeometry:function(){var e=this.point&&this.point.geometry;return e&&this.multi&&(e=new OpenLayers.Geometry.MultiPoint([e])),e},geometryClone:function(){var e=this.getGeometry();return e&&e.clone()},mousedown:function(e){return this.down(e)},touchstart:function(e){return this.startTouch(),this.lastTouchPx=e.xy,this.down(e)},mousemove:function(e){return this.move(e)},touchmove:function(e){return this.lastTouchPx=e.xy,this.move(e)},mouseup:function(e){return this.up(e)},touchend:function(e){return e.xy=this.lastTouchPx,this.up(e)},down:function(e){return this.mouseDown=!0,this.lastDown=e.xy,this.touch||this.modifyFeature(e.xy),this.stoppedDown=this.stopDown,!this.stopDown},move:function(e){return this.touch||this.mouseDown&&!this.stoppedDown||this.modifyFeature(e.xy),!0},up:function(e){return this.mouseDown=!1,this.stoppedDown=this.stopDown,!this.checkModifiers(e)||(!(!this.lastUp||!this.lastUp.equals(e.xy))||(!this.lastDown||!this.passesTolerance(this.lastDown,e.xy,this.pixelTolerance)||(this.touch&&this.modifyFeature(e.xy),this.persist&&this.destroyPersistedFeature(),this.lastUp=e.xy,this.finalize(),!this.stopUp)))},mouseout:function(e){OpenLayers.Util.mouseLeft(e,this.map.viewPortDiv)&&(this.stoppedDown=this.stopDown,this.mouseDown=!1)},passesTolerance:function(e,t,n){var i=!0;if(null!=n&&e&&t){var r=e.distanceTo(t);r>n&&(i=!1)}return i},CLASS_NAME:"OpenLayers.Handler.Point"}),OpenLayers.Handler.Path=OpenLayers.Class(OpenLayers.Handler.Point,{line:null,maxVertices:null,doubleTouchTolerance:20,freehand:!1,freehandToggle:"shiftKey",timerId:null,redoStack:null,createFeature:function(e){var t=this.layer.getLonLatFromViewPortPx(e),n=new OpenLayers.Geometry.Point(t.lon,t.lat);this.point=new OpenLayers.Feature.Vector(n),this.line=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LineString([this.point.geometry])),this.callback("create",[this.point.geometry,this.getSketch()]),this.point.geometry.clearBounds(),this.layer.addFeatures([this.line,this.point],{silent:!0})},destroyFeature:function(e){OpenLayers.Handler.Point.prototype.destroyFeature.call(this,e),this.line=null},destroyPersistedFeature:function(){var e=this.layer;e&&e.features.length>2&&this.layer.features[0].destroy()},removePoint:function(){this.point&&this.layer.removeFeatures([this.point])},addPoint:function(e){this.layer.removeFeatures([this.point]);var t=this.layer.getLonLatFromViewPortPx(e);this.point=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point(t.lon,t.lat)),this.line.geometry.addComponent(this.point.geometry,this.line.geometry.components.length),this.layer.addFeatures([this.point]),this.callback("point",[this.point.geometry,this.getGeometry()]),this.callback("modify",[this.point.geometry,this.getSketch()]),this.drawFeature(),delete this.redoStack},insertXY:function(e,t){this.line.geometry.addComponent(new OpenLayers.Geometry.Point(e,t),this.getCurrentPointIndex()),this.drawFeature(),delete this.redoStack},insertDeltaXY:function(e,t){var n=this.getCurrentPointIndex()-1,i=this.line.geometry.components[n];!i||isNaN(i.x)||isNaN(i.y)||this.insertXY(i.x+e,i.y+t)},insertDirectionLength:function(e,t){e*=Math.PI/180;var n=t*Math.cos(e),i=t*Math.sin(e);this.insertDeltaXY(n,i)},insertDeflectionLength:function(e,t){var n=this.getCurrentPointIndex()-1;if(n>0){var i=this.line.geometry.components[n],r=this.line.geometry.components[n-1],s=Math.atan2(i.y-r.y,i.x-r.x);this.insertDirectionLength(180*s/Math.PI+e,t)}},getCurrentPointIndex:function(){return this.line.geometry.components.length-1},undo:function(){var e=this.line.geometry,t=e.components,n=this.getCurrentPointIndex()-1,i=t[n],r=e.removeComponent(i);if(r){if(this.touch&&n>0){t=e.components;var s=t[n-1],o=this.getCurrentPointIndex(),a=t[o];a.x=s.x,a.y=s.y}this.redoStack||(this.redoStack=[]),this.redoStack.push(i),this.drawFeature()}return r},redo:function(){var e=this.redoStack&&this.redoStack.pop();return e&&(this.line.geometry.addComponent(e,this.getCurrentPointIndex()),this.drawFeature()),!!e},freehandMode:function(e){return this.freehandToggle&&e[this.freehandToggle]?!this.freehand:this.freehand},modifyFeature:function(e,t){this.line||this.createFeature(e);var n=this.layer.getLonLatFromViewPortPx(e);this.point.geometry.x=n.lon,this.point.geometry.y=n.lat,this.callback("modify",[this.point.geometry,this.getSketch(),t]),this.point.geometry.clearBounds(),this.drawFeature()},drawFeature:function(){this.layer.drawFeature(this.line,this.style),this.layer.drawFeature(this.point,this.style)},getSketch:function(){return this.line},getGeometry:function(){var e=this.line&&this.line.geometry;return e&&this.multi&&(e=new OpenLayers.Geometry.MultiLineString([e])),e},touchstart:function(e){return this.timerId&&this.passesTolerance(this.lastTouchPx,e.xy,this.doubleTouchTolerance)?(this.finishGeometry(),window.clearTimeout(this.timerId),this.timerId=null,!1):(this.timerId&&(window.clearTimeout(this.timerId),this.timerId=null),this.timerId=window.setTimeout(OpenLayers.Function.bind(function(){this.timerId=null},this),300),OpenLayers.Handler.Point.prototype.touchstart.call(this,e))},down:function(e){var t=this.stopDown;return this.freehandMode(e)&&(t=!0,this.touch&&(this.modifyFeature(e.xy,!!this.lastUp),OpenLayers.Event.stop(e))),this.touch||this.lastDown&&this.passesTolerance(this.lastDown,e.xy,this.pixelTolerance)||this.modifyFeature(e.xy,!!this.lastUp),this.mouseDown=!0,this.lastDown=e.xy,this.stoppedDown=t,!t},move:function(e){return this.stoppedDown&&this.freehandMode(e)?(this.persist&&this.destroyPersistedFeature(),this.maxVertices&&this.line&&this.line.geometry.components.length===this.maxVertices?(this.removePoint(),this.finalize()):this.addPoint(e.xy),!1):(this.touch||this.mouseDown&&!this.stoppedDown||this.modifyFeature(e.xy,!!this.lastUp),!0)},up:function(e){return!this.mouseDown||this.lastUp&&this.lastUp.equals(e.xy)||(this.stoppedDown&&this.freehandMode(e)?(this.persist&&this.destroyPersistedFeature(),this.removePoint(),this.finalize()):this.passesTolerance(this.lastDown,e.xy,this.pixelTolerance)&&(this.touch&&this.modifyFeature(e.xy),null==this.lastUp&&this.persist&&this.destroyPersistedFeature(),this.addPoint(e.xy),this.lastUp=e.xy,this.line.geometry.components.length===this.maxVertices+1&&this.finishGeometry())),this.stoppedDown=this.stopDown,this.mouseDown=!1,!this.stopUp},finishGeometry:function(){var e=this.line.geometry.components.length-1;this.line.geometry.removeComponent(this.line.geometry.components[e]),this.removePoint(),this.finalize()},dblclick:function(e){return this.freehandMode(e)||this.finishGeometry(),!1},CLASS_NAME:"OpenLayers.Handler.Path"}),OpenLayers.Handler.Polygon=OpenLayers.Class(OpenLayers.Handler.Path,{holeModifier:null,drawingHole:!1,polygon:null,createFeature:function(e){var t=this.layer.getLonLatFromViewPortPx(e),n=new OpenLayers.Geometry.Point(t.lon,t.lat);this.point=new OpenLayers.Feature.Vector(n),this.line=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.LinearRing([this.point.geometry])),this.polygon=new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Polygon([this.line.geometry])),this.callback("create",[this.point.geometry,this.getSketch()]),this.point.geometry.clearBounds(),this.layer.addFeatures([this.polygon,this.point],{silent:!0})},addPoint:function(e){if(!this.drawingHole&&this.holeModifier&&this.evt&&this.evt[this.holeModifier])for(var t,n,i=this.point.geometry,r=this.control.layer.features,s=r.length-1;s>=0;--s)if(t=r[s].geometry,(t instanceof OpenLayers.Geometry.Polygon||t instanceof OpenLayers.Geometry.MultiPolygon)&&t.intersects(i)){n=r[s],this.control.layer.removeFeatures([n],{silent:!0}),this.control.layer.events.registerPriority("sketchcomplete",this,this.finalizeInteriorRing),this.control.layer.events.registerPriority("sketchmodified",this,this.enforceTopology),n.geometry.addComponent(this.line.geometry),this.polygon=n,this.drawingHole=!0;break}OpenLayers.Handler.Path.prototype.addPoint.apply(this,arguments)},getCurrentPointIndex:function(){return this.line.geometry.components.length-2},enforceTopology:function(e){var t=e.vertex,n=this.line.geometry.components;if(!this.polygon.geometry.intersects(t)){var i=n[n.length-3];t.x=i.x,t.y=i.y}},finishGeometry:function(){var e=this.line.geometry.components.length-2;this.line.geometry.removeComponent(this.line.geometry.components[e]),this.removePoint(),this.finalize()},finalizeInteriorRing:function(){var e=this.line.geometry,t=0!==e.getArea();if(t){for(var n=this.polygon.geometry.components,i=n.length-2;i>=0;--i)if(e.intersects(n[i])){t=!1;break}if(t){e:for(var i=n.length-2;i>0;--i)for(var r=n[i].components,s=0,o=r.length;s<o;++s)if(e.containsPoint(r[s])){t=!1;break e}}}return t?this.polygon.state!==OpenLayers.State.INSERT&&(this.polygon.state=OpenLayers.State.UPDATE):this.polygon.geometry.removeComponent(e),this.restoreFeature(),!1},cancel:function(){return this.drawingHole&&(this.polygon.geometry.removeComponent(this.line.geometry),this.restoreFeature(!0)),OpenLayers.Handler.Path.prototype.cancel.apply(this,arguments)},restoreFeature:function(e){this.control.layer.events.unregister("sketchcomplete",this,this.finalizeInteriorRing),this.control.layer.events.unregister("sketchmodified",this,this.enforceTopology),this.layer.removeFeatures([this.polygon],{silent:!0}),this.control.layer.addFeatures([this.polygon],{silent:!0}),this.drawingHole=!1,e||this.control.layer.events.triggerEvent("sketchcomplete",{feature:this.polygon})},destroyFeature:function(e){OpenLayers.Handler.Path.prototype.destroyFeature.call(this,e),this.polygon=null},drawFeature:function(){this.layer.drawFeature(this.polygon,this.style),this.layer.drawFeature(this.point,this.style)},getSketch:function(){return this.polygon},getGeometry:function(){var e=this.polygon&&this.polygon.geometry;return e&&this.multi&&(e=new OpenLayers.Geometry.MultiPolygon([e])),e},CLASS_NAME:"OpenLayers.Handler.Polygon"}),OpenLayers.Handler.RegularPolygon=OpenLayers.Class(OpenLayers.Handler.Drag,{sides:4,radius:null,snapAngle:null,snapToggle:"shiftKey",layerOptions:null,persist:!1,irregular:!1,citeCompliant:!1,angle:null,fixedRadius:!1,feature:null,layer:null,origin:null,initialize:function(e,t,n){n&&n.layerOptions&&n.layerOptions.styleMap||(this.style=OpenLayers.Util.extend(OpenLayers.Feature.Vector.style.default,{})),OpenLayers.Handler.Drag.prototype.initialize.apply(this,[e,t,n]),this.options=n?n:{}},setOptions:function(e){OpenLayers.Util.extend(this.options,e),OpenLayers.Util.extend(this,e)},activate:function(){var e=!1;if(OpenLayers.Handler.Drag.prototype.activate.apply(this,arguments)){var t=OpenLayers.Util.extend({displayInLayerSwitcher:!1,calculateInRange:OpenLayers.Function.True,wrapDateLine:this.citeCompliant},this.layerOptions);this.layer=new OpenLayers.Layer.Vector(this.CLASS_NAME,t),this.map.addLayer(this.layer),e=!0}return e},deactivate:function(){var e=!1;return OpenLayers.Handler.Drag.prototype.deactivate.apply(this,arguments)&&(this.dragging&&this.cancel(),null!=this.layer.map&&(this.layer.destroy(!1),this.feature&&this.feature.destroy()),this.layer=null,this.feature=null,e=!0),e},down:function(e){this.fixedRadius=!!this.radius;var t=this.layer.getLonLatFromViewPortPx(e.xy);this.origin=new OpenLayers.Geometry.Point(t.lon,t.lat),this.fixedRadius&&!this.irregular||(this.radius=this.map.getResolution()),this.persist&&this.clear(),this.feature=new OpenLayers.Feature.Vector,this.createGeometry(),this.callback("create",[this.origin,this.feature]),this.layer.addFeatures([this.feature],{silent:!0}),this.layer.drawFeature(this.feature,this.style)},move:function(e){var t=this.layer.getLonLatFromViewPortPx(e.xy),n=new OpenLayers.Geometry.Point(t.lon,t.lat);if(this.irregular){var i=Math.sqrt(2)*Math.abs(n.y-this.origin.y)/2;this.radius=Math.max(this.map.getResolution()/2,i)}else this.fixedRadius?this.origin=n:(this.calculateAngle(n,e),this.radius=Math.max(this.map.getResolution()/2,n.distanceTo(this.origin)));if(this.modifyGeometry(),this.irregular){var r,s=n.x-this.origin.x,o=n.y-this.origin.y;r=0==o?s/(this.radius*Math.sqrt(2)):s/o,this.feature.geometry.resize(1,this.origin,r),this.feature.geometry.move(s/2,o/2)}this.layer.drawFeature(this.feature,this.style)},up:function(e){this.finalize(),this.start==this.last&&this.callback("done",[e.xy])},out:function(e){this.finalize()},createGeometry:function(){this.angle=Math.PI*(1/this.sides-.5),this.snapAngle&&(this.angle+=this.snapAngle*(Math.PI/180)),this.feature.geometry=OpenLayers.Geometry.Polygon.createRegularPolygon(this.origin,this.radius,this.sides,this.snapAngle)},modifyGeometry:function(){var e,t,n=this.feature.geometry.components[0];n.components.length!=this.sides+1&&(this.createGeometry(),n=this.feature.geometry.components[0]);for(var i=0;i<this.sides;++i)t=n.components[i],e=this.angle+2*i*Math.PI/this.sides,t.x=this.origin.x+this.radius*Math.cos(e),t.y=this.origin.y+this.radius*Math.sin(e),t.clearBounds()},calculateAngle:function(e,t){var n=Math.atan2(e.y-this.origin.y,e.x-this.origin.x);if(this.snapAngle&&this.snapToggle&&!t[this.snapToggle]){var i=Math.PI/180*this.snapAngle;this.angle=Math.round(n/i)*i}else this.angle=n},cancel:function(){this.callback("cancel",null),this.finalize()},finalize:function(){this.origin=null,this.radius=this.options.radius},clear:function(){this.layer&&(this.layer.renderer.clear(),this.layer.destroyFeatures())},callback:function(e,t){this.callbacks[e]&&this.callbacks[e].apply(this.control,[this.feature.geometry.clone()]),this.persist||"done"!=e&&"cancel"!=e||this.clear()},CLASS_NAME:"OpenLayers.Handler.RegularPolygon"}),module.exports=OpenLayers},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(32),s=i(r);t.default=s.default.Class(s.default.Control,{currentEditIndex:0,undoFeatures:[],redoFeatures:[],isEditMulty:!1,initialize:function(e){e instanceof Array||(e=[e]);for(var t=0;t<e.length;t++)e[t].events.register("sketchstarted",this,this.onSketchStarted),e[t].events.register("featureadded",this,this.onInsert),e[t].events.register("beforefeatureremoved",this,this.onDelete),e[t].events.register("beforefeaturemodified",this,this.onUpdate),e[t].events.register("afterfeaturemodified",this,this.onUpdateCompleted)},onEdit:function(e,t,n){void 0==n&&(n=e.layer.name),void 0==this.undoFeatures[this.currentEditIndex]&&(this.undoFeatures[this.currentEditIndex]={},this.undoFeatures[this.currentEditIndex][n]={Insert:[],Update:[],Delete:[]}),void 0==e.fid&&(e.fid=e.id),this.undoFeatures[this.currentEditIndex][n][t].push(e),this.redoFeatures.splice(0,this.redoFeatures.length)},onSketchStarted:function(e){return this.increaseEditIndex(),!0},onInsert:function(e){var t=e.feature.clone();return void 0==e.feature.fid&&(e.feature.fid=e.feature.id),t.fid=e.feature.fid,t.state=e.feature.state,t.layer=e.feature.layer,this.onEdit(t,"Insert",t.layer.name),!0},onDelete:function(e){return this.increaseEditIndex(),this.onEdit(e.feature,"Delete",e.feature.layer.name),!0},onUpdate:function(e){this.increaseEditIndex();var t=e.feature.clone();t.fid=e.feature.fid,t.state=e.feature.state,t.layer=e.feature.layer,this.onEdit(t,"Update",t.layer.name)},onUpdateCompleted:function(e){e.modified||this.getUndoData()},increaseEditIndex:function(){this.currentEditIndex<this.undoFeatures.length&&(this.currentEditIndex+=1)},getUndoData:function(){var e=this.undoFeatures.pop();return e&&(this.currentEditIndex-=1),e},getRedoData:function(){var e=this.redoFeatures.pop();return e&&(this.currentEditIndex+=1),e},resetEditIndex:function(){this.currentEditIndex=0,this.undoFeatures.splice(0,this.undoFeatures.length),this.redoFeatures.splice(0,this.redoFeatures.length)},undo:function(){var e=this.getUndoData();if(e){for(var t in e){var n=this.map.getLayersByName(t)[0];for(var i in e[t])for(var r=0;r<e[t][i].length;r++){var o=e[t][i][r];switch(i){case"Insert":var a=n.getFeatureByFid(o.fid);n.eraseFeatures(a),s.default.Util.removeItem(n.features,a);break;case"Delete":n.addFeatures([o],{silent:!0});break;case"Update":var l=n.getFeatureByFid(o.fid);n.eraseFeatures(l),s.default.Util.removeItem(n.features,l),n.addFeatures([o],{silent:!0}),e[t][i][r]=l}}}this.redoFeatures.push(e)}},redo:function(){var e=this.getRedoData();if(e){for(var t in e){var n=this.map.getLayersByName(t)[0];for(var i in e[t])for(var r=0;r<e[t][i].length;r++){var o=e[t][i][r];switch(i){case"Insert":n.addFeatures([o],{silent:!0});break;case"Delete":var a=n.getFeatureByFid(o.fid);n.eraseFeatures(a),s.default.Util.removeItem(n.features,a);break;case"Update":var l=n.getFeatureByFid(o.fid);n.eraseFeatures(l),s.default.Util.removeItem(n.features,l),n.addFeatures([o],{silent:!0}),e[t][i][r]=l}}}this.undoFeatures.push(e)}},CLASS_NAME:"OpenLayers.Control.UndoRedo"})},function(e,t){"use strict";function n(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),n=t.exec(location.search);return null==n?"":decodeURIComponent(n[1].replace(/\+/g," "))}function i(e,t){history.pushState(null,"",o(e,t))}function r(e,t){var i=n(e);i=a(a(i," ;")+";"+t," ;"),history.pushState(null,"",o(e,i))}function s(e,t){var i=n(e);i=a(a(i," ;").replace(t,"").replace(/;;/g,"")," ;"),history.pushState(null,"",o(e,""!=i?i:null))}function o(e,t,n){n||(n=window.location.href);var i,r=new RegExp("([?&])"+e+"=.*?(&|#|$)(.*)","gi");if(r.test(n))return"undefined"!=typeof t&&null!==t?n.replace(r,"$1"+e+"="+t+"$2$3"):(i=n.split("#"),n=i[0].replace(r,"$1$3").replace(/(&|\?)$/,""),"undefined"!=typeof i[1]&&null!==i[1]&&(n+="#"+i[1]),n);if("undefined"!=typeof t&&null!==t){var s=n.indexOf("?")!==-1?"&":"?";return i=n.split("#"),n=i[0]+s+e+"="+t,"undefined"!=typeof i[1]&&null!==i[1]&&(n+="#"+i[1]),n}return n}Object.defineProperty(t,"__esModule",{value:!0}),t.getParameterByName=n,t.setQueryString=i,t.addQueryStringValue=r,t.removeQueryStringValue=s,t.updateQueryString=o;var a=t.trim=function(){function e(e){return e.replace(/[\[\](){}?*+\^$\\.|\-]/g,"\\$&")}return function(t,n,i){if(i=i||"g","string"!=typeof t||"string"!=typeof n||"string"!=typeof i)throw new TypeError("argument must be string");if(!/^[gi]*$/.test(i))throw new TypeError("Invalid flags supplied '"+i.match(new RegExp("[^gi]*"))+"'");return n=e(n),t.replace(new RegExp("^["+n+"]+|["+n+"]+$",i),"")}}()},function(e,t){"use strict";function n(e){return parseInt(Math.floor(e/64))}function i(e,t,n){return n*(t-e)+e}function r(e,t,n){return(n-e)/(t-e)}function s(e,t,n,r,s,o){var a=i(e[0],e[1],s/n),l=i(t[0],t[1],(r-o)/r);return{x:a,y:l}}function o(e,t,n,i,s,o){var a=r(e[0],e[1],s)*n,l=i-r(t[0],t[1],o)*i;return{x:a,y:l}}function a(e,t,n){return n/(e[1]-e[0])*t}function l(e,t,n,i){return 1==t&&"km"==n?i*e*1e3:i*e}Object.defineProperty(t,"__esModule",{value:!0}),t.getTileRadius=n,t.lerp=i,t.reverseLerp=r,t.latLonToWorld=s,t.worldToLatLon=o,t.getScaledRadius=a,t.calculateDistance=l},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(32),s=i(r);t.default=s.default.Class(s.default.Control.LayerSwitcher,{onButtonClickCallback:null,initialize:function(e,t){s.default.Control.LayerSwitcher.prototype.initialize.apply(this,arguments),this.onButtonClickCallback=t},onButtonClick:function(e){return this.onButtonClickCallback&&this.onButtonClickCallback(e),s.default.Control.LayerSwitcher.prototype.onButtonClick.apply(this,arguments)},maximizeControl:function(e){s.default.Element.removeClass(this.div,"minimized"),this.showControls(!1),null!=e&&s.default.Event.stop(e)},minimizeControl:function(e){s.default.Element.addClass(this.div,"minimized"),this.showControls(!0),null!=e&&s.default.Event.stop(e)},loadContents:function(){this.layersDiv=document.createElement("div"),this.layersDiv.id=this.id+"_layersDiv",s.default.Element.addClass(this.layersDiv,"layersDiv"),this.baseLbl=document.createElement("div"),this.baseLbl.innerHTML=s.default.i18n("Base Layer"),s.default.Element.addClass(this.baseLbl,"baseLbl"),this.baseLayersDiv=document.createElement("div"),s.default.Element.addClass(this.baseLayersDiv,"baseLayersDiv"),this.dataLbl=document.createElement("div"),this.dataLbl.innerHTML=s.default.i18n("Overlays"),s.default.Element.addClass(this.dataLbl,"dataLbl"),
this.dataLayersDiv=document.createElement("div"),s.default.Element.addClass(this.dataLayersDiv,"dataLayersDiv"),this.ascending?(this.layersDiv.appendChild(this.baseLbl),this.layersDiv.appendChild(this.baseLayersDiv),this.layersDiv.appendChild(this.dataLbl),this.layersDiv.appendChild(this.dataLayersDiv)):(this.layersDiv.appendChild(this.dataLbl),this.layersDiv.appendChild(this.dataLayersDiv),this.layersDiv.appendChild(this.baseLbl),this.layersDiv.appendChild(this.baseLayersDiv)),this.div.appendChild(this.layersDiv),this.maximizeDiv=document.createElement("div"),s.default.Element.addClass(this.maximizeDiv,"OpenLayers_Control_MaximizeDiv maximizeDiv olButton"),this.maximizeDiv.style.display="none",this.div.appendChild(this.maximizeDiv),this.minimizeDiv=document.createElement("div"),s.default.Element.addClass(this.minimizeDiv,"OpenLayers_Control_MinimizeDiv minimizeDiv olButton"),this.minimizeDiv.style.display="none",this.minimizeDiv.innerHTML="&times;";var e=document.createElement("i");s.default.Element.addClass(e,"fa fa-bars"),this.maximizeDiv.appendChild(e),this.div.appendChild(this.minimizeDiv)},CLASS_NAME:"OpenLayers.Control.LayerSwitcher"})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){return e+"°"}function s(e){return e+"%"}Object.defineProperty(t,"__esModule",{value:!0}),t.iconselectmenu=t.percentspinner=t.degreespinner=void 0,t.formatDegree=r,t.formatPercent=s;var o=n(1),a=i(o),l=n(27),u=(i(l),n(28)),h=(i(u),a.default.widget("ui.degreespinner",a.default.ui.spinner,{_format:r,_parse:function(e){return parseFloat(e)}})),c=a.default.widget("ui.percentspinner",a.default.ui.spinner,{_format:s,_parse:function(e){return parseFloat(e)}}),p=a.default.widget("custom.iconselectmenu",a.default.ui.selectmenu,{_renderItem:function(e,t){var n=(0,a.default)("<li>"),i=(0,a.default)("<div>");return t.disabled&&n.addClass("ui-state-disabled"),(0,a.default)("<div>",{class:"selectmenu-label",text:t.label}).appendTo(i),(0,a.default)("<div>",{style:t.element.attr("data-style"),class:"selectmenu-icon "+t.element.attr("data-class")}).appendTo(i),n.append(i).appendTo(e)}});t.degreespinner=h,t.percentspinner=c,t.iconselectmenu=p},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(32),s=i(r),o=n(39),a=n(47),l=n(48);t.default=s.default.Class(s.default.Control,{width:1024,height:1024,x:null,y:null,id:"export-svg",yExtent:[0,16384],xExtent:[0,16384],projection:null,path:null,svg:null,stylePropMap:{fillColor:"fill",fillOpacity:"fill-opacity",strokeColor:"stroke",strokeWidth:"stroke-width",strokeOpacity:"stroke-opacity",graphicOpacity:"opacity"},imagesToLoad:0,layer:null,initialize:function(e,t,n,i,r){s.default.Control.prototype.initialize.apply(this,[r]),this.map=e,this.layer=t,this.div=n,this.map_tile_path=i,this.x=(0,o.scaleLinear)().range([0,this.width]),this.y=(0,o.scaleLinear)().range([0,this.height]);var u=this;this.projection=(0,a.geoTransform)({point:function(e,t){this.stream.point(u.x(e),u.height-u.y(t))}}),this.path=(0,a.geoPath)().projection(this.projection),this.x.domain(this.xExtent),this.y.domain(this.yExtent),this.div.addEventListener("click",this.doExport.bind(this),!1);var u=this;this.setStyle=function(e){for(var t in u.stylePropMap)if(e.properties.style[t]){var n=e.properties.style[t];"strokeWidth"==t&&(n=u.x(n)),"fillColor"==t&&"LineString"==e.geometry.type&&(n="none"),(0,l.select)(this).style(u.stylePropMap[t],n)}else"fillColor"==t&&(0,l.select)(this).style(u.stylePropMap[t],"none");if(e.properties.style.externalGraphic){var n=e.properties.style.externalGraphic;if(n.indexOf("ward_sentry")==-1&&n.indexOf("ward_observer")==-1)var i=u.height-u.y(e.geometry.coordinates[1])-u.x(e.properties.style.graphicHeight)/2;else var i=u.height-u.y(e.geometry.coordinates[1])-u.x(e.properties.style.graphicHeight);(0,l.select)(this).attr("xlink:href",n).attr("x",u.x(e.geometry.coordinates[0])-u.x(e.properties.style.graphicHeight)/2).attr("y",i).attr("width",u.x(e.properties.style.graphicHeight)).attr("height",u.x(e.properties.style.graphicHeight)),u.imagesToLoad++;var r=this;u.getImageBase64(n,function(e){(0,l.select)(r).attr("href","data:image/png;base64,"+e),u.imagesToLoad--,u.imageLoadFinished()})}}},imageLoadFinished:function(e){0==this.imagesToLoad&&this.download_png()},featureFilter:function(e){return function(t){return t.geometry.type==e}},createSVG:function(e){this.svg&&this.svg.remove(),this.svg=(0,l.select)("body").append("svg").attr("id",this.id).attr("width",this.width).attr("height",this.height),e.features.forEach(function(e,t){e.zIndex=t});var t=this.map.baseLayer.name.replace(/ /g,"").toLowerCase(),n=this.map_tile_path+t+"/dotamap"+("default"==t?"":"_"+t)+"5_25.jpg";this.svg.append("image").attr("class","background").attr("xlink:href",n).attr("width",this.width).attr("height",this.height),this.imagesToLoad=1;var i=this;this.getImageBase64(n,function(e){(0,l.select)("#"+i.id+" .background").attr("href","data:image/png;base64,"+e),i.imagesToLoad--,i.imageLoadFinished()}),this.svg.selectAll("g").data(e.features.filter(this.featureFilter("Polygon"))).enter().append("path").attr("class","node").attr("d",this.path).each(this.setStyle),this.svg.selectAll("g").data(e.features.filter(this.featureFilter("LineString"))).enter().append("path").attr("class","node").attr("d",this.path).each(this.setStyle),this.svg.selectAll("g").data(e.features.filter(this.featureFilter("Point"))).enter().append("image").attr("class","node").attr("d",this.path).each(this.setStyle),this.svg.selectAll(".node").sort(function(e,t){return e.zIndex>t.zIndex?1:e.zIndex<t.zIndex?-1:0})},converterEngine:function(e){for(var t=new Uint8Array(e),n=t.length,i=[];n--;)i[n]=String.fromCharCode(t[n]);var r=window.btoa(i.join(""));return r},getImageBase64:function(e,t){var n=new XMLHttpRequest(e);n.open("GET",e,!0),n.responseType="arraybuffer",n.callback=t;var i=this;n.onload=function(e){if(200==this.status){var t=i.converterEngine(this.response);this.callback(t)}},n.send()},download_png:function(){var e=this.svg.attr("version",1.1).attr("xmlns","http://www.w3.org/2000/svg").node().outerHTML,t="data:image/svg+xml;utf8,"+e,n=document.createElement("canvas");n.width=this.width,n.height=this.height;var i=n.getContext("2d"),r=new Image;r.src=t;var s=this;r.onload=function(){i.drawImage(r,0,0,this.width,this.height),s.downloadCanvas(n)}},dataURLtoBlob:function(e){for(var t=e.split(","),n=t[0].match(/:(.*?);/)[1],i=atob(t[1]),r=i.length,s=new Uint8Array(r);r--;)s[r]=i.charCodeAt(r);return new Blob([s],{type:n})},downloadCanvas:function(e){var t=document.createElement("a"),n=e.toDataURL({format:"png",multiplier:4}),i=(n.substr(22,n.length),this.dataURLtoBlob(n)),r=URL.createObjectURL(i);t.download="image.png",t.href=r,document.body.appendChild(t),t.click(),document.body.removeChild(t)},doExport:function(){var e=new s.default.Format.GeoJSON,t=JSON.parse(e.write(this.layer.features));this.createSVG(t,this.download_png)},CLASS_NAME:"OpenLayers.Control.ExportMap"})},function(e,t,n){!function(e,i){i(t,n(40),n(41),n(42),n(44),n(45),n(46),n(43))}(this,function(e,t,n,i,r,s,o,a){"use strict";function l(e){function t(t){var n=t+"",o=i.get(n);if(!o){if(s!==G)return s;i.set(n,o=r.push(t))}return e[(o-1)%e.length]}var i=n.map(),r=[],s=G;return e=null==e?[]:j.call(e),t.domain=function(e){if(!arguments.length)return r.slice();r=[],i=n.map();for(var s,o,a=-1,l=e.length;++a<l;)i.has(o=(s=e[a])+"")||i.set(o,r.push(s));return t},t.range=function(n){return arguments.length?(e=j.call(n),t):e.slice()},t.unknown=function(e){return arguments.length?(s=e,t):s},t.copy=function(){return l().domain(r).range(e).unknown(s)},t}function u(){function e(){var e=s().length,r=a[1]<a[0],l=a[r-0],u=a[1-r];n=(u-l)/Math.max(1,e-c+2*p),h&&(n=Math.floor(n)),l+=(u-l-n*(e-c))*d,i=n*(1-c),h&&(l=Math.round(l),i=Math.round(i));var f=t.range(e).map(function(e){return l+n*e});return o(r?f.reverse():f)}var n,i,r=l().unknown(void 0),s=r.domain,o=r.range,a=[0,1],h=!1,c=0,p=0,d=.5;return delete r.unknown,r.domain=function(t){return arguments.length?(s(t),e()):s()},r.range=function(t){return arguments.length?(a=[+t[0],+t[1]],e()):a.slice()},r.rangeRound=function(t){return a=[+t[0],+t[1]],h=!0,e()},r.bandwidth=function(){return i},r.step=function(){return n},r.round=function(t){return arguments.length?(h=!!t,e()):h},r.padding=function(t){return arguments.length?(c=p=Math.max(0,Math.min(1,t)),e()):c},r.paddingInner=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),e()):c},r.paddingOuter=function(t){return arguments.length?(p=Math.max(0,Math.min(1,t)),e()):p},r.align=function(t){return arguments.length?(d=Math.max(0,Math.min(1,t)),e()):d},r.copy=function(){return u().domain(s()).range(a).round(h).paddingInner(c).paddingOuter(p).align(d)},e()}function h(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return h(t())},e}function c(){return h(u().paddingInner(1))}function p(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:W(t)}function d(e){return function(t,n){var i=e(t=+t,n=+n);return function(e){return e<=t?0:e>=n?1:i(e)}}}function f(e){return function(t,n){var i=e(t=+t,n=+n);return function(e){return e<=0?t:e>=1?n:i(e)}}}function y(e,t,n,i){var r=e[0],s=e[1],o=t[0],a=t[1];return s<r?(r=n(s,r),o=i(a,o)):(r=n(r,s),o=i(o,a)),function(e){return o(r(e))}}function m(e,n,i,r){var s=Math.min(e.length,n.length)-1,o=new Array(s),a=new Array(s),l=-1;for(e[s]<e[0]&&(e=e.slice().reverse(),n=n.slice().reverse());++l<s;)o[l]=i(e[l],e[l+1]),a[l]=r(n[l],n[l+1]);return function(n){var i=t.bisect(e,n,1,s)-1;return a[i](o[i](n))}}function g(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp())}function v(e,t){function n(){return s=Math.min(l.length,u.length)>2?m:y,o=a=null,r}function r(t){return(o||(o=s(l,u,c?d(e):e,h)))(+t)}var s,o,a,l=V,u=V,h=i.interpolate,c=!1;return r.invert=function(e){return(a||(a=s(u,l,p,c?f(t):t)))(+e)},r.domain=function(e){return arguments.length?(l=B.call(e,q),n()):l.slice()},r.range=function(e){return arguments.length?(u=j.call(e),n()):u.slice()},r.rangeRound=function(e){return u=j.call(e),h=i.interpolateRound,n()},r.clamp=function(e){return arguments.length?(c=!!e,n()):c},r.interpolate=function(e){return arguments.length?(h=e,n()):h},n()}function L(e){var n=e.domain;return e.ticks=function(e){var i=n();return t.ticks(i[0],i[i.length-1],null==e?10:e)},e.tickFormat=function(e,t){return X(n(),e,t)},e.nice=function(i){var r=n(),s=r.length-1,o=null==i?10:i,a=r[0],l=r[s],u=t.tickStep(a,l,o);return u&&(u=t.tickStep(Math.floor(a/u)*u,Math.ceil(l/u)*u,o),r[0]=Math.floor(a/u)*u,r[s]=Math.ceil(l/u)*u,n(r)),e},e}function b(){var e=v(p,i.interpolateNumber);return e.copy=function(){return g(e,b())},L(e)}function O(){function e(e){return+e}var t=[0,1];return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=B.call(n,q),e):t.slice()},e.copy=function(){return O().domain(t)},L(e)}function x(e,t){return(t=Math.log(t/e))?function(n){return Math.log(n/e)/t}:W(t)}function w(e,t){return e<0?function(n){return-Math.pow(-t,n)*Math.pow(-e,1-n)}:function(n){return Math.pow(t,n)*Math.pow(e,1-n)}}function C(e){return isFinite(e)?+("1e"+e):e<0?0:e}function E(e){return 10===e?C:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}function S(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}function _(e){return function(t){return-e(-t)}}function T(){function e(){return o=S(s),a=E(s),i()[0]<0&&(o=_(o),a=_(a)),n}var n=v(x,w).domain([1,10]),i=n.domain,s=10,o=S(10),a=E(10);return n.base=function(t){return arguments.length?(s=+t,e()):s},n.domain=function(t){return arguments.length?(i(t),e()):i()},n.ticks=function(e){var n,r=i(),l=r[0],u=r[r.length-1];(n=u<l)&&(d=l,l=u,u=d);var h,c,p,d=o(l),f=o(u),y=null==e?10:+e,m=[];if(!(s%1)&&f-d<y){if(d=Math.round(d)-1,f=Math.round(f)+1,l>0){for(;d<f;++d)for(c=1,h=a(d);c<s;++c)if(p=h*c,!(p<l)){if(p>u)break;m.push(p)}}else for(;d<f;++d)for(c=s-1,h=a(d);c>=1;--c)if(p=h*c,!(p<l)){if(p>u)break;m.push(p)}}else m=t.ticks(d,f,Math.min(f-d,y)).map(a);return n?m.reverse():m},n.tickFormat=function(e,t){if(null==t&&(t=10===s?".0e":","),"function"!=typeof t&&(t=r.format(t)),e===1/0)return t;null==e&&(e=10);var i=Math.max(1,s*e/n.ticks().length);return function(e){var n=e/a(Math.round(o(e)));return n*s<s-.5&&(n*=s),n<=i?t(e):""}},n.nice=function(){return i(Y(i(),{floor:function(e){return a(Math.floor(o(e)))},ceil:function(e){return a(Math.ceil(o(e)))}}))},n.copy=function(){return g(n,T().base(s))},n}function k(e,t){return e<0?-Math.pow(-e,t):Math.pow(e,t)}function M(){function e(e,t){return(t=k(t,n)-(e=k(e,n)))?function(i){return(k(i,n)-e)/t}:W(t)}function t(e,t){return t=k(t,n)-(e=k(e,n)),function(i){return k(e+t*i,1/n)}}var n=1,i=v(e,t),r=i.domain;return i.exponent=function(e){return arguments.length?(n=+e,r(r())):n},i.copy=function(){return g(i,M().exponent(n))},L(i)}function P(){return M().exponent(.5)}function N(){function e(){var e=0,o=Math.max(1,r.length);for(s=new Array(o-1);++e<o;)s[e-1]=t.quantile(i,e/o);return n}function n(e){if(!isNaN(e=+e))return r[t.bisect(s,e)]}var i=[],r=[],s=[];return n.invertExtent=function(e){var t=r.indexOf(e);return t<0?[NaN,NaN]:[t>0?s[t-1]:i[0],t<s.length?s[t]:i[i.length-1]]},n.domain=function(n){if(!arguments.length)return i.slice();i=[];for(var r,s=0,o=n.length;s<o;++s)r=n[s],null==r||isNaN(r=+r)||i.push(r);return i.sort(t.ascending),e()},n.range=function(t){return arguments.length?(r=j.call(t),e()):r.slice()},n.quantiles=function(){return s.slice()},n.copy=function(){return N().domain(i).range(r)},n}function D(){function e(e){if(e<=e)return a[t.bisect(o,e,0,s)]}function n(){var t=-1;for(o=new Array(s);++t<s;)o[t]=((t+1)*r-(t-s)*i)/(s+1);return e}var i=0,r=1,s=1,o=[.5],a=[0,1];return e.domain=function(e){return arguments.length?(i=+e[0],r=+e[1],n()):[i,r]},e.range=function(e){return arguments.length?(s=(a=j.call(e)).length-1,n()):a.slice()},e.invertExtent=function(e){var t=a.indexOf(e);return t<0?[NaN,NaN]:t<1?[i,o[0]]:t>=s?[o[s-1],r]:[o[t-1],o[t]]},e.copy=function(){return D().domain([i,r]).range(a)},L(e)}function I(){function e(e){if(e<=e)return i[t.bisect(n,e,0,r)]}var n=[.5],i=[0,1],r=1;return e.domain=function(t){return arguments.length?(n=j.call(t),r=Math.min(n.length,i.length-1),e):n.slice()},e.range=function(t){return arguments.length?(i=j.call(t),r=Math.min(n.length,i.length-1),e):i.slice()},e.invertExtent=function(e){var t=i.indexOf(e);return[n[t-1],n[t]]},e.copy=function(){return I().domain(n).range(i)},e}function A(e){return new Date(e)}function R(e){return e instanceof Date?+e:+new Date(+e)}function F(e,n,r,s,o,a,l,u,h){function c(t){return(l(t)<t?L:a(t)<t?b:o(t)<t?O:s(t)<t?x:n(t)<t?r(t)<t?w:C:e(t)<t?E:S)(t)}function d(n,i,r,s){if(null==n&&(n=10),"number"==typeof n){var o=Math.abs(r-i)/n,a=t.bisector(function(e){return e[2]}).right(_,o);a===_.length?(s=t.tickStep(i/te,r/te,n),n=e):a?(a=_[o/_[a-1][2]<_[a][2]/o?a-1:a],s=a[1],n=a[0]):(s=t.tickStep(i,r,n),n=u)}return null==s?n:n.every(s)}var f=v(p,i.interpolateNumber),y=f.invert,m=f.domain,L=h(".%L"),b=h(":%S"),O=h("%I:%M"),x=h("%I %p"),w=h("%a %d"),C=h("%b %d"),E=h("%B"),S=h("%Y"),_=[[l,1,Z],[l,5,5*Z],[l,15,15*Z],[l,30,30*Z],[a,1,$],[a,5,5*$],[a,15,15*$],[a,30,30*$],[o,1,K],[o,3,3*K],[o,6,6*K],[o,12,12*K],[s,1,Q],[s,2,2*Q],[r,1,J],[n,1,ee],[n,3,3*ee],[e,1,te]];return f.invert=function(e){return new Date(y(e))},f.domain=function(e){return arguments.length?m(B.call(e,R)):m().map(A)},f.ticks=function(e,t){var n,i=m(),r=i[0],s=i[i.length-1],o=s<r;return o&&(n=r,r=s,s=n),n=d(e,r,s,t),n=n?n.range(r,s+1):[],o?n.reverse():n},f.tickFormat=function(e,t){return null==t?c:h(t)},f.nice=function(e,t){var n=m();return(e=d(e,n[0],n[n.length-1],t))?m(Y(n,e)):f},f.copy=function(){return g(f,F(e,n,r,s,o,a,l,u,h))},f}function z(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function U(e){function t(t){var s=(t-n)/(i-n);return e(r?Math.max(0,Math.min(1,s)):s)}var n=0,i=1,r=!1;return t.domain=function(e){return arguments.length?(n=+e[0],i=+e[1],t):[n,i]},t.clamp=function(e){return arguments.length?(r=!!e,t):r},t.interpolator=function(n){return arguments.length?(e=n,t):e},t.copy=function(){return U(e).domain([n,i]).clamp(r)},L(t)}var H=Array.prototype,B=H.map,j=H.slice,G={name:"implicit"},W=function(e){return function(){return e}},q=function(e){return+e},V=[0,1],X=function(e,n,i){var s,o=e[0],a=e[e.length-1],l=t.tickStep(o,a,null==n?10:n);switch(i=r.formatSpecifier(null==i?",f":i),i.type){case"s":var u=Math.max(Math.abs(o),Math.abs(a));return null!=i.precision||isNaN(s=r.precisionPrefix(l,u))||(i.precision=s),r.formatPrefix(i,u);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(s=r.precisionRound(l,Math.max(Math.abs(o),Math.abs(a))))||(i.precision=s-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(s=r.precisionFixed(l))||(i.precision=s-2*("%"===i.type))}return r.format(i)},Y=function(e,t){e=e.slice();var n,i=0,r=e.length-1,s=e[i],o=e[r];return o<s&&(n=i,i=r,r=n,n=s,s=o,o=n),e[i]=t.floor(s),e[r]=t.ceil(o),e},Z=1e3,$=60*Z,K=60*$,Q=24*K,J=7*Q,ee=30*Q,te=365*Q,ne=function(){return F(s.timeYear,s.timeMonth,s.timeWeek,s.timeDay,s.timeHour,s.timeMinute,s.timeSecond,s.timeMillisecond,o.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},ie=function(){return F(s.utcYear,s.utcMonth,s.utcWeek,s.utcDay,s.utcHour,s.utcMinute,s.utcSecond,s.utcMillisecond,o.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])},re=function(e){return e.match(/.{6}/g).map(function(e){return"#"+e})},se=re("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),oe=re("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),ae=re("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),le=re("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),ue=i.interpolateCubehelixLong(a.cubehelix(300,.5,0),a.cubehelix(-240,.5,1)),he=i.interpolateCubehelixLong(a.cubehelix(-100,.75,.35),a.cubehelix(80,1.5,.8)),ce=i.interpolateCubehelixLong(a.cubehelix(260,.75,.35),a.cubehelix(80,1.5,.8)),pe=a.cubehelix(),de=function(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return pe.h=360*e-100,pe.s=1.5-1.5*t,pe.l=.8-.9*t,pe+""},fe=z(re("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),ye=z(re("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),me=z(re("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),ge=z(re("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));e.scaleBand=u,e.scalePoint=c,e.scaleIdentity=O,e.scaleLinear=b,e.scaleLog=T,e.scaleOrdinal=l,e.scaleImplicit=G,e.scalePow=M,e.scaleSqrt=P,e.scaleQuantile=N,e.scaleQuantize=D,e.scaleThreshold=I,e.scaleTime=ne,e.scaleUtc=ie,e.schemeCategory10=se,e.schemeCategory20b=oe,e.schemeCategory20c=ae,e.schemeCategory20=le,e.interpolateCubehelixDefault=ue,e.interpolateRainbow=de,e.interpolateWarm=he,e.interpolateCool=ce,e.interpolateViridis=fe,e.interpolateMagma=ye,e.interpolateInferno=me,e.interpolatePlasma=ge,e.scaleSequential=U,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){!function(e,n){n(t)}(this,function(e){"use strict";function t(e){return function(t,n){return r(e(t),n)}}function n(e,t,n){var i=Math.abs(t-e)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),s=i/r;return s>=b?r*=10:s>=O?r*=5:s>=x&&(r*=2),t<e?-r:r}function i(e){return e.length}var r=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN},s=function(e){return 1===e.length&&(e=t(e)),{left:function(t,n,i,r){for(null==i&&(i=0),null==r&&(r=t.length);i<r;){var s=i+r>>>1;e(t[s],n)<0?i=s+1:r=s}return i},right:function(t,n,i,r){for(null==i&&(i=0),null==r&&(r=t.length);i<r;){var s=i+r>>>1;e(t[s],n)>0?r=s:i=s+1}return i}}},o=s(r),a=o.right,l=o.left,u=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},h=function(e){return null===e?NaN:+e},c=function(e,t){var n,i,r=e.length,s=0,o=0,a=-1,l=0;if(null==t)for(;++a<r;)isNaN(n=h(e[a]))||(i=n-s,s+=i/++l,o+=i*(n-s));else for(;++a<r;)isNaN(n=h(t(e[a],a,e)))||(i=n-s,s+=i/++l,o+=i*(n-s));if(l>1)return o/(l-1)},p=function(e,t){var n=c(e,t);return n?Math.sqrt(n):n},d=function(e,t){var n,i,r,s=-1,o=e.length;if(null==t){for(;++s<o;)if(null!=(i=e[s])&&i>=i){n=r=i;break}for(;++s<o;)null!=(i=e[s])&&(n>i&&(n=i),r<i&&(r=i))}else{for(;++s<o;)if(null!=(i=t(e[s],s,e))&&i>=i){n=r=i;break}for(;++s<o;)null!=(i=t(e[s],s,e))&&(n>i&&(n=i),r<i&&(r=i))}return[n,r]},f=Array.prototype,y=f.slice,m=f.map,g=function(e){return function(){return e}},v=function(e){return e},L=function(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((t-e)/n)),s=new Array(r);++i<r;)s[i]=e+i*n;return s},b=Math.sqrt(50),O=Math.sqrt(10),x=Math.sqrt(2),w=function(e,t,i){var r=n(e,t,i);return L(Math.ceil(e/r)*r,Math.floor(t/r)*r+r/2,r)},C=function(e){return Math.ceil(Math.log(e.length)/Math.LN2)+1},E=function(){function e(e){var r,s,o=e.length,l=new Array(o);for(r=0;r<o;++r)l[r]=t(e[r],r,e);var u=n(l),h=u[0],c=u[1],p=i(l,h,c);Array.isArray(p)||(p=w(h,c,p));for(var d=p.length;p[0]<=h;)p.shift(),--d;for(;p[d-1]>=c;)p.pop(),--d;var f,y=new Array(d+1);for(r=0;r<=d;++r)f=y[r]=[],f.x0=r>0?p[r-1]:h,f.x1=r<d?p[r]:c;for(r=0;r<o;++r)s=l[r],h<=s&&s<=c&&y[a(p,s,0,d)].push(e[r]);return y}var t=v,n=d,i=C;return e.value=function(n){return arguments.length?(t="function"==typeof n?n:g(n),e):t},e.domain=function(t){return arguments.length?(n="function"==typeof t?t:g([t[0],t[1]]),e):n},e.thresholds=function(t){return arguments.length?(i="function"==typeof t?t:g(Array.isArray(t)?y.call(t):t),e):i},e},S=function(e,t,n){if(null==n&&(n=h),i=e.length){if((t=+t)<=0||i<2)return+n(e[0],0,e);if(t>=1)return+n(e[i-1],i-1,e);var i,r=(i-1)*t,s=Math.floor(r),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(r-s)}},_=function(e,t,n){return e=m.call(e,h).sort(r),Math.ceil((n-t)/(2*(S(e,.75)-S(e,.25))*Math.pow(e.length,-1/3)))},T=function(e,t,n){return Math.ceil((n-t)/(3.5*p(e)*Math.pow(e.length,-1/3)))},k=function(e,t){var n,i,r=-1,s=e.length;if(null==t){for(;++r<s;)if(null!=(i=e[r])&&i>=i){n=i;break}for(;++r<s;)null!=(i=e[r])&&i>n&&(n=i)}else{for(;++r<s;)if(null!=(i=t(e[r],r,e))&&i>=i){n=i;break}for(;++r<s;)null!=(i=t(e[r],r,e))&&i>n&&(n=i)}return n},M=function(e,t){var n,i=0,r=e.length,s=-1,o=r;if(null==t)for(;++s<r;)isNaN(n=h(e[s]))?--o:i+=n;else for(;++s<r;)isNaN(n=h(t(e[s],s,e)))?--o:i+=n;if(o)return i/o},P=function(e,t){var n,i=[],s=e.length,o=-1;if(null==t)for(;++o<s;)isNaN(n=h(e[o]))||i.push(n);else for(;++o<s;)isNaN(n=h(t(e[o],o,e)))||i.push(n);return S(i.sort(r),.5)},N=function(e){for(var t,n,i,r=e.length,s=-1,o=0;++s<r;)o+=e[s].length;for(n=new Array(o);--r>=0;)for(i=e[r],t=i.length;--t>=0;)n[--o]=i[t];return n},D=function(e,t){var n,i,r=-1,s=e.length;if(null==t){for(;++r<s;)if(null!=(i=e[r])&&i>=i){n=i;break}for(;++r<s;)null!=(i=e[r])&&n>i&&(n=i)}else{for(;++r<s;)if(null!=(i=t(e[r],r,e))&&i>=i){n=i;break}for(;++r<s;)null!=(i=t(e[r],r,e))&&n>i&&(n=i)}return n},I=function(e){for(var t=0,n=e.length-1,i=e[0],r=new Array(n<0?0:n);t<n;)r[t]=[i,i=e[++t]];return r},A=function(e,t){for(var n=t.length,i=new Array(n);n--;)i[n]=e[t[n]];return i},R=function(e,t){if(n=e.length){var n,i,s=0,o=0,a=e[o];for(t||(t=r);++s<n;)(t(i=e[s],a)<0||0!==t(a,a))&&(a=i,o=s);return 0===t(a,a)?o:void 0}},F=function(e,t,n){for(var i,r,s=(null==n?e.length:n)-(t=null==t?0:+t);s;)r=Math.random()*s--|0,i=e[s+t],e[s+t]=e[r+t],e[r+t]=i;return e},z=function(e,t){var n,i=0,r=e.length,s=-1;if(null==t)for(;++s<r;)(n=+e[s])&&(i+=n);else for(;++s<r;)(n=+t(e[s],s,e))&&(i+=n);return i},U=function(e){if(!(s=e.length))return[];for(var t=-1,n=D(e,i),r=new Array(n);++t<n;)for(var s,o=-1,a=r[t]=new Array(s);++o<s;)a[o]=e[o][t];return r},H=function(){return U(arguments)};e.bisect=a,e.bisectRight=a,e.bisectLeft=l,e.ascending=r,e.bisector=s,e.descending=u,e.deviation=p,e.extent=d,e.histogram=E,e.thresholdFreedmanDiaconis=_,e.thresholdScott=T,e.thresholdSturges=C,e.max=k,e.mean=M,e.median=P,e.merge=N,e.min=D,e.pairs=I,e.permute=A,e.quantile=S,e.range=L,e.scan=R,e.shuffle=F,e.sum=z,e.ticks=w,e.tickStep=n,e.transpose=U,e.variance=c,e.zip=H,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){!function(e,n){n(t)}(this,function(e){"use strict";function t(){}function n(e,n){var i=new t;if(e instanceof t)e.each(function(e,t){i.set(t,e)});else if(Array.isArray(e)){var r,s=-1,o=e.length;if(null==n)for(;++s<o;)i.set(s,e[s]);else for(;++s<o;)i.set(n(r=e[s],s,e),r)}else if(e)for(var a in e)i.set(a,e[a]);return i}function i(){return{}}function r(e,t,n){e[t]=n}function s(){return n()}function o(e,t,n){e.set(t,n)}function a(){}function l(e,t){var n=new a;if(e instanceof a)e.each(function(e){n.add(e)});else if(e){var i=-1,r=e.length;if(null==t)for(;++i<r;)n.add(e[i]);else for(;++i<r;)n.add(t(e[i],i,e))}return n}var u="$";t.prototype=n.prototype={constructor:t,has:function(e){return u+e in this},get:function(e){return this[u+e]},set:function(e,t){return this[u+e]=t,this},remove:function(e){var t=u+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===u&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===u&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===u&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===u&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===u&&++e;return e},empty:function(){for(var e in this)if(e[0]===u)return!1;return!0},each:function(e){for(var t in this)t[0]===u&&e(this[t],t.slice(1),this)}};var h=function(){function e(t,i,r,s){if(i>=h.length)return null!=l?l(t):null!=a?t.sort(a):t;for(var o,u,c,p=-1,d=t.length,f=h[i++],y=n(),m=r();++p<d;)(c=y.get(o=f(u=t[p])+""))?c.push(u):y.set(o,[u]);return y.each(function(t,n){s(m,n,e(t,i,r,s))}),m}function t(e,n){if(++n>h.length)return e;
var i,r=c[n-1];return null!=l&&n>=h.length?i=e.entries():(i=[],e.each(function(e,r){i.push({key:r,values:t(e,n)})})),null!=r?i.sort(function(e,t){return r(e.key,t.key)}):i}var a,l,u,h=[],c=[];return u={object:function(t){return e(t,0,i,r)},map:function(t){return e(t,0,s,o)},entries:function(n){return t(e(n,0,s,o),0)},key:function(e){return h.push(e),u},sortKeys:function(e){return c[h.length-1]=e,u},sortValues:function(e){return a=e,u},rollup:function(e){return l=e,u}}},c=n.prototype;a.prototype=l.prototype={constructor:a,has:c.has,add:function(e){return e+="",this[u+e]=e,this},remove:c.remove,clear:c.clear,values:c.keys,size:c.size,empty:c.empty,each:c.each};var p=function(e){var t=[];for(var n in e)t.push(n);return t},d=function(e){var t=[];for(var n in e)t.push(e[n]);return t},f=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t};e.nest=h,e.set=l,e.map=n,e.keys=p,e.values=d,e.entries=f,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){!function(e,i){i(t,n(43))}(this,function(e,t){"use strict";function n(e,t,n,i,r){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*i+o*r)/6}function i(e,t){return function(n){return e+n*t}}function r(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function s(e,t){var n=t-e;return n?i(e,n>180||n<-180?n-360*Math.round(n/360):n):_(isNaN(e)?t:e)}function o(e){return 1===(e=+e)?a:function(t,n){return n-t?r(t,n,e):_(isNaN(t)?n:t)}}function a(e,t){var n=t-e;return n?i(e,n):_(isNaN(e)?t:e)}function l(e){return function(n){var i,r,s=n.length,o=new Array(s),a=new Array(s),l=new Array(s);for(i=0;i<s;++i)r=t.rgb(n[i]),o[i]=r.r||0,a[i]=r.g||0,l[i]=r.b||0;return o=e(o),a=e(a),l=e(l),r.opacity=1,function(e){return r.r=o(e),r.g=a(e),r.b=l(e),r+""}}}function u(e){return function(){return e}}function h(e){return function(t){return e(t)+""}}function c(e){return"none"===e?B:(O||(O=document.createElement("DIV"),x=document.documentElement,w=document.defaultView),O.style.transform=e,e=w.getComputedStyle(x.appendChild(O),null).getPropertyValue("transform"),x.removeChild(O),e=e.slice(7,-1).split(","),j(+e[0],+e[1],+e[2],+e[3],+e[4],+e[5]))}function p(e){return null==e?B:(C||(C=document.createElementNS("http://www.w3.org/2000/svg","g")),C.setAttribute("transform",e),(e=C.transform.baseVal.consolidate())?(e=e.matrix,j(e.a,e.b,e.c,e.d,e.e,e.f)):B)}function d(e,t,n,i){function r(e){return e.length?e.pop()+" ":""}function s(e,i,r,s,o,a){if(e!==r||i!==s){var l=o.push("translate(",null,t,null,n);a.push({i:l-4,x:D(e,r)},{i:l-2,x:D(i,s)})}else(r||s)&&o.push("translate("+r+t+s+n)}function o(e,t,n,s){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),s.push({i:n.push(r(n)+"rotate(",null,i)-2,x:D(e,t)})):t&&n.push(r(n)+"rotate("+t+i)}function a(e,t,n,s){e!==t?s.push({i:n.push(r(n)+"skewX(",null,i)-2,x:D(e,t)}):t&&n.push(r(n)+"skewX("+t+i)}function l(e,t,n,i,s,o){if(e!==n||t!==i){var a=s.push(r(s)+"scale(",null,",",null,")");o.push({i:a-4,x:D(e,n)},{i:a-2,x:D(t,i)})}else 1===n&&1===i||s.push(r(s)+"scale("+n+","+i+")")}return function(t,n){var i=[],r=[];return t=e(t),n=e(n),s(t.translateX,t.translateY,n.translateX,n.translateY,i,r),o(t.rotate,n.rotate,i,r),a(t.skewX,n.skewX,i,r),l(t.scaleX,t.scaleY,n.scaleX,n.scaleY,i,r),t=n=null,function(e){for(var t,n=-1,s=r.length;++n<s;)i[(t=r[n]).i]=t.x(e);return i.join("")}}}function f(e){return((e=Math.exp(e))+1/e)/2}function y(e){return((e=Math.exp(e))-1/e)/2}function m(e){return((e=Math.exp(2*e))-1)/(e+1)}function g(e){return function(n,i){var r=e((n=t.hsl(n)).h,(i=t.hsl(i)).h),s=a(n.s,i.s),o=a(n.l,i.l),l=a(n.opacity,i.opacity);return function(e){return n.h=r(e),n.s=s(e),n.l=o(e),n.opacity=l(e),n+""}}}function v(e,n){var i=a((e=t.lab(e)).l,(n=t.lab(n)).l),r=a(e.a,n.a),s=a(e.b,n.b),o=a(e.opacity,n.opacity);return function(t){return e.l=i(t),e.a=r(t),e.b=s(t),e.opacity=o(t),e+""}}function L(e){return function(n,i){var r=e((n=t.hcl(n)).h,(i=t.hcl(i)).h),s=a(n.c,i.c),o=a(n.l,i.l),l=a(n.opacity,i.opacity);return function(e){return n.h=r(e),n.c=s(e),n.l=o(e),n.opacity=l(e),n+""}}}function b(e){return function n(i){function r(n,r){var s=e((n=t.cubehelix(n)).h,(r=t.cubehelix(r)).h),o=a(n.s,r.s),l=a(n.l,r.l),u=a(n.opacity,r.opacity);return function(e){return n.h=s(e),n.s=o(e),n.l=l(Math.pow(e,i)),n.opacity=u(e),n+""}}return i=+i,r.gamma=n,r}(1)}var O,x,w,C,E=function(e){var t=e.length-1;return function(i){var r=i<=0?i=0:i>=1?(i=1,t-1):Math.floor(i*t),s=e[r],o=e[r+1],a=r>0?e[r-1]:2*s-o,l=r<t-1?e[r+2]:2*o-s;return n((i-r/t)*t,a,s,o,l)}},S=function(e){var t=e.length;return function(i){var r=Math.floor(((i%=1)<0?++i:i)*t),s=e[(r+t-1)%t],o=e[r%t],a=e[(r+1)%t],l=e[(r+2)%t];return n((i-r/t)*t,s,o,a,l)}},_=function(e){return function(){return e}},T=function e(n){function i(e,n){var i=r((e=t.rgb(e)).r,(n=t.rgb(n)).r),s=r(e.g,n.g),o=r(e.b,n.b),a=r(e.opacity,n.opacity);return function(t){return e.r=i(t),e.g=s(t),e.b=o(t),e.opacity=a(t),e+""}}var r=o(n);return i.gamma=e,i}(1),k=l(E),M=l(S),P=function(e,t){var n,i=t?t.length:0,r=e?Math.min(i,e.length):0,s=new Array(i),o=new Array(i);for(n=0;n<r;++n)s[n]=z(e[n],t[n]);for(;n<i;++n)o[n]=t[n];return function(e){for(n=0;n<r;++n)o[n]=s[n](e);return o}},N=function(e,t){var n=new Date;return e=+e,t-=e,function(i){return n.setTime(e+t*i),n}},D=function(e,t){return e=+e,t-=e,function(n){return e+t*n}},I=function(e,t){var n,i={},r={};null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={});for(n in t)n in e?i[n]=z(e[n],t[n]):r[n]=t[n];return function(e){for(n in i)r[n]=i[n](e);return r}},A=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,R=new RegExp(A.source,"g"),F=function(e,t){var n,i,r,s=A.lastIndex=R.lastIndex=0,o=-1,a=[],l=[];for(e+="",t+="";(n=A.exec(e))&&(i=R.exec(t));)(r=i.index)>s&&(r=t.slice(s,r),a[o]?a[o]+=r:a[++o]=r),(n=n[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:D(n,i)})),s=R.lastIndex;return s<t.length&&(r=t.slice(s),a[o]?a[o]+=r:a[++o]=r),a.length<2?l[0]?h(l[0].x):u(t):(t=l.length,function(e){for(var n,i=0;i<t;++i)a[(n=l[i]).i]=n.x(e);return a.join("")})},z=function(e,n){var i,r=typeof n;return null==n||"boolean"===r?_(n):("number"===r?D:"string"===r?(i=t.color(n))?(n=i,T):F:n instanceof t.color?T:n instanceof Date?N:Array.isArray(n)?P:isNaN(n)?I:D)(e,n)},U=function(e,t){return e=+e,t-=e,function(n){return Math.round(e+t*n)}},H=180/Math.PI,B={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},j=function(e,t,n,i,r,s){var o,a,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*i)&&(n-=e*l,i-=t*l),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,l/=a),e*i<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:r,translateY:s,rotate:Math.atan2(t,e)*H,skewX:Math.atan(l)*H,scaleX:o,scaleY:a}},G=d(c,"px, ","px)","deg)"),W=d(p,", ",")",")"),q=Math.SQRT2,V=2,X=4,Y=1e-12,Z=function(e,t){var n,i,r=e[0],s=e[1],o=e[2],a=t[0],l=t[1],u=t[2],h=a-r,c=l-s,p=h*h+c*c;if(p<Y)i=Math.log(u/o)/q,n=function(e){return[r+e*h,s+e*c,o*Math.exp(q*e*i)]};else{var d=Math.sqrt(p),g=(u*u-o*o+X*p)/(2*o*V*d),v=(u*u-o*o-X*p)/(2*u*V*d),L=Math.log(Math.sqrt(g*g+1)-g),b=Math.log(Math.sqrt(v*v+1)-v);i=(b-L)/q,n=function(e){var t=e*i,n=f(L),a=o/(V*d)*(n*m(q*t+L)-y(L));return[r+a*h,s+a*c,o*n/f(q*t+L)]}}return n.duration=1e3*i,n},$=g(s),K=g(a),Q=L(s),J=L(a),ee=b(s),te=b(a),ne=function(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e(i/(t-1));return n};e.interpolate=z,e.interpolateArray=P,e.interpolateBasis=E,e.interpolateBasisClosed=S,e.interpolateDate=N,e.interpolateNumber=D,e.interpolateObject=I,e.interpolateRound=U,e.interpolateString=F,e.interpolateTransformCss=G,e.interpolateTransformSvg=W,e.interpolateZoom=Z,e.interpolateRgb=T,e.interpolateRgbBasis=k,e.interpolateRgbBasisClosed=M,e.interpolateHsl=$,e.interpolateHslLong=K,e.interpolateLab=v,e.interpolateHcl=Q,e.interpolateHclLong=J,e.interpolateCubehelix=ee,e.interpolateCubehelixLong=te,e.quantize=ne,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){!function(e,n){n(t)}(this,function(e){"use strict";function t(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function n(){}function i(e){var t;return e=(e+"").trim().toLowerCase(),(t=D.exec(e))?(t=parseInt(t[1],16),new l(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1)):(t=I.exec(e))?r(parseInt(t[1],16)):(t=A.exec(e))?new l(t[1],t[2],t[3],1):(t=R.exec(e))?new l(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=F.exec(e))?s(t[1],t[2],t[3],t[4]):(t=z.exec(e))?s(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=U.exec(e))?u(t[1],t[2]/100,t[3]/100,1):(t=H.exec(e))?u(t[1],t[2]/100,t[3]/100,t[4]):B.hasOwnProperty(e)?r(B[e]):"transparent"===e?new l(NaN,NaN,NaN,0):null}function r(e){return new l(e>>16&255,e>>8&255,255&e,1)}function s(e,t,n,i){return i<=0&&(e=t=n=NaN),new l(e,t,n,i)}function o(e){return e instanceof n||(e=i(e)),e?(e=e.rgb(),new l(e.r,e.g,e.b,e.opacity)):new l}function a(e,t,n,i){return 1===arguments.length?o(e):new l(e,t,n,null==i?1:i)}function l(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}function u(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new p(e,t,n,i)}function h(e){if(e instanceof p)return new p(e.h,e.s,e.l,e.opacity);if(e instanceof n||(e=i(e)),!e)return new p;if(e instanceof p)return e;e=e.rgb();var t=e.r/255,r=e.g/255,s=e.b/255,o=Math.min(t,r,s),a=Math.max(t,r,s),l=NaN,u=a-o,h=(a+o)/2;return u?(l=t===a?(r-s)/u+6*(r<s):r===a?(s-t)/u+2:(t-r)/u+4,u/=h<.5?a+o:2-a-o,l*=60):u=h>0&&h<1?0:l,new p(l,u,h,e.opacity)}function c(e,t,n,i){return 1===arguments.length?h(e):new p(e,t,n,null==i?1:i)}function p(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function d(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function f(e){if(e instanceof m)return new m(e.l,e.a,e.b,e.opacity);if(e instanceof w){var t=e.h*j;return new m(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}e instanceof l||(e=o(e));var n=b(e.r),i=b(e.g),r=b(e.b),s=g((.4124564*n+.3575761*i+.1804375*r)/q),a=g((.2126729*n+.7151522*i+.072175*r)/V),u=g((.0193339*n+.119192*i+.9503041*r)/X);return new m(116*a-16,500*(s-a),200*(a-u),e.opacity)}function y(e,t,n,i){return 1===arguments.length?f(e):new m(e,t,n,null==i?1:i)}function m(e,t,n,i){this.l=+e,this.a=+t,this.b=+n,this.opacity=+i}function g(e){return e>K?Math.pow(e,1/3):e/$+Y}function v(e){return e>Z?e*e*e:$*(e-Y)}function L(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function b(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function O(e){if(e instanceof w)return new w(e.h,e.c,e.l,e.opacity);e instanceof m||(e=f(e));var t=Math.atan2(e.b,e.a)*G;return new w(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function x(e,t,n,i){return 1===arguments.length?O(e):new w(e,t,n,null==i?1:i)}function w(e,t,n,i){this.h=+e,this.c=+t,this.l=+n,this.opacity=+i}function C(e){if(e instanceof S)return new S(e.h,e.s,e.l,e.opacity);e instanceof l||(e=o(e));var t=e.r/255,n=e.g/255,i=e.b/255,r=(se*i+ie*t-re*n)/(se+ie-re),s=i-r,a=(ne*(n-r)-ee*s)/te,u=Math.sqrt(a*a+s*s)/(ne*r*(1-r)),h=u?Math.atan2(a,s)*G-120:NaN;return new S(h<0?h+360:h,u,r,e.opacity)}function E(e,t,n,i){return 1===arguments.length?C(e):new S(e,t,n,null==i?1:i)}function S(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}var _=function(e,t,n){e.prototype=t.prototype=n,n.constructor=e},T=.7,k=1/T,M="\\s*([+-]?\\d+)\\s*",P="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",N="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",D=/^#([0-9a-f]{3})$/,I=/^#([0-9a-f]{6})$/,A=new RegExp("^rgb\\("+[M,M,M]+"\\)$"),R=new RegExp("^rgb\\("+[N,N,N]+"\\)$"),F=new RegExp("^rgba\\("+[M,M,M,P]+"\\)$"),z=new RegExp("^rgba\\("+[N,N,N,P]+"\\)$"),U=new RegExp("^hsl\\("+[P,N,N]+"\\)$"),H=new RegExp("^hsla\\("+[P,N,N,P]+"\\)$"),B={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};_(n,i,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),_(l,a,t(n,{brighter:function(e){return e=null==e?k:Math.pow(k,e),new l(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?T:Math.pow(T,e),new l(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(1===e?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}})),_(p,c,t(n,{brighter:function(e){return e=null==e?k:Math.pow(k,e),new p(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?T:Math.pow(T,e),new p(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new l(d(e>=240?e-240:e+120,r,i),d(e,r,i),d(e<120?e+240:e-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var j=Math.PI/180,G=180/Math.PI,W=18,q=.95047,V=1,X=1.08883,Y=4/29,Z=6/29,$=3*Z*Z,K=Z*Z*Z;_(m,y,t(n,{brighter:function(e){return new m(this.l+W*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new m(this.l-W*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return e=V*v(e),t=q*v(t),n=X*v(n),new l(L(3.2404542*t-1.5371385*e-.4985314*n),L(-.969266*t+1.8760108*e+.041556*n),L(.0556434*t-.2040259*e+1.0572252*n),this.opacity)}})),_(w,x,t(n,{brighter:function(e){return new w(this.h,this.c,this.l+W*(null==e?1:e),this.opacity)},darker:function(e){return new w(this.h,this.c,this.l-W*(null==e?1:e),this.opacity)},rgb:function(){return f(this).rgb()}}));var Q=-.14861,J=1.78277,ee=-.29227,te=-.90649,ne=1.97294,ie=ne*te,re=ne*J,se=J*ee-te*Q;_(S,E,t(n,{brighter:function(e){return e=null==e?k:Math.pow(k,e),new S(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?T:Math.pow(T,e),new S(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*j,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),r=Math.sin(e);return new l(255*(t+n*(Q*i+J*r)),255*(t+n*(ee*i+te*r)),255*(t+n*(ne*i)),this.opacity)}})),e.color=i,e.rgb=a,e.hsl=c,e.lab=y,e.hcl=x,e.cubehelix=E,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){!function(e,n){n(t)}(this,function(e){"use strict";function t(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function n(e){return e=t(Math.abs(e)),e?e[1]:NaN}function i(e,t){return function(n,i){for(var r=n.length,s=[],o=0,a=e[0],l=0;r>0&&a>0&&(l+a+1>i&&(a=Math.max(1,i-l)),s.push(n.substring(r-=a,r+a)),!((l+=a+1)>i));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function r(e,t){e=e.toPrecision(t);e:for(var n,i=e.length,r=1,s=-1;r<i;++r)switch(e[r]){case".":s=n=r;break;case"0":0===s&&(s=r),n=r;break;case"e":break e;default:s>0&&(s=0)}return s>0?e.slice(0,s)+e.slice(n+1):e}function s(e,n){var i=t(e,n);if(!i)return e+"";var r=i[0],s=i[1],o=s-(y=3*Math.max(-8,Math.min(8,Math.floor(s/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+t(e,Math.max(0,n+o-1))[0]}function o(e,n){var i=t(e,n);if(!i)return e+"";var r=i[0],s=i[1];return s<0?"0."+new Array(-s).join("0")+r:r.length>s+1?r.slice(0,s+1)+"."+r.slice(s+1):r+new Array(s-r.length+2).join("0")}function a(e){return new l(e)}function l(e){if(!(t=g.exec(e)))throw new Error("invalid format: "+e);var t,n=t[1]||" ",i=t[2]||">",r=t[3]||"-",s=t[4]||"",o=!!t[5],a=t[6]&&+t[6],l=!!t[7],u=t[8]&&+t[8].slice(1),h=t[9]||"";"n"===h?(l=!0,h="g"):m[h]||(h=""),(o||"0"===n&&"="===i)&&(o=!0,n="0",i="="),this.fill=n,this.align=i,this.sign=r,this.symbol=s,this.zero=o,this.width=a,this.comma=l,this.precision=u,this.type=h}function u(e){return e}function h(e){function t(e){function t(e){var t,o,a,u=g,m=v;if("c"===f)m=b(e)+m,e="";else{e=+e;var x=(e<0||1/e<0)&&(e*=-1,!0);if(e=b(e,d),x)for(t=-1,o=e.length,x=!1;++t<o;)if(a=e.charCodeAt(t),48<a&&a<58||"x"===f&&96<a&&a<103||"X"===f&&64<a&&a<71){x=!0;break}if(u=(x?"("===r?r:"-":"-"===r||"("===r?"":r)+u,m=m+("s"===f?L[8+y/3]:"")+(x&&"("===r?")":""),O)for(t=-1,o=e.length;++t<o;)if(a=e.charCodeAt(t),48>a||a>57){m=(46===a?l+e.slice(t+1):e.slice(t))+m,e=e.slice(0,t);break}}p&&!h&&(e=s(e,1/0));var w=u.length+e.length+m.length,C=w<c?new Array(c-w+1).join(n):"";switch(p&&h&&(e=s(C+e,C.length?c-m.length:1/0),C=""),i){case"<":return u+e+m+C;case"=":return u+C+e+m;case"^":return C.slice(0,w=C.length>>1)+u+e+m+C.slice(w)}return C+u+e+m}e=a(e);var n=e.fill,i=e.align,r=e.sign,u=e.symbol,h=e.zero,c=e.width,p=e.comma,d=e.precision,f=e.type,g="$"===u?o[0]:"#"===u&&/[boxX]/.test(f)?"0"+f.toLowerCase():"",v="$"===u?o[1]:/[%p]/.test(f)?"%":"",b=m[f],O=!f||/[defgprs%]/.test(f);return d=null==d?f?6:12:/[gprs]/.test(f)?Math.max(1,Math.min(21,d)):Math.max(0,Math.min(20,d)),t.toString=function(){return e+""},t}function r(e,i){var r=t((e=a(e),e.type="f",e)),s=3*Math.max(-8,Math.min(8,Math.floor(n(i)/3))),o=Math.pow(10,-s),l=L[8+s/3];return function(e){return r(o*e)+l}}var s=e.grouping&&e.thousands?i(e.grouping,e.thousands):u,o=e.currency,l=e.decimal;return{format:t,formatPrefix:r}}function c(t){return v=h(t),e.format=v.format,e.formatPrefix=v.formatPrefix,v}function p(e){return Math.max(0,-n(Math.abs(e)))}function d(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(n(t)/3)))-n(Math.abs(e)))}function f(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,n(t)-n(e))+1}var y,m={"":r,"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return o(100*e,t)},r:o,s:s,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}},g=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;l.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var v,L=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];c({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),e.formatDefaultLocale=c,e.formatLocale=h,e.formatSpecifier=a,e.precisionFixed=p,e.precisionPrefix=d,e.precisionRound=f,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){!function(e,n){n(t)}(this,function(e){"use strict";function t(e,n,i,o){function a(t){return e(t=new Date(+t)),t}return a.floor=a,a.ceil=function(t){return e(t=new Date(t-1)),n(t,1),e(t),t},a.round=function(e){var t=a(e),n=a.ceil(e);return e-t<n-e?t:n},a.offset=function(e,t){return n(e=new Date(+e),null==t?1:Math.floor(t)),e},a.range=function(t,i,r){var s=[];if(t=a.ceil(t),r=null==r?1:Math.floor(r),!(t<i&&r>0))return s;do s.push(new Date(+t));while(n(t,r),e(t),t<i);return s},a.filter=function(i){return t(function(t){if(t>=t)for(;e(t),!i(t);)t.setTime(t-1)},function(e,t){if(e>=e)for(;--t>=0;)for(;n(e,1),!i(e););})},i&&(a.count=function(t,n){return r.setTime(+t),s.setTime(+n),e(r),e(s),Math.floor(i(r,s))},a.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?a.filter(o?function(t){return o(t)%e===0}:function(t){return a.count(0,t)%e===0}):a:null}),a}function n(e){return t(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*u)/p})}function i(e){return t(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/p})}var r=new Date,s=new Date,o=t(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});o.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?t(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):o:null};var a=o.range,l=1e3,u=6e4,h=36e5,c=864e5,p=6048e5,d=t(function(e){e.setTime(Math.floor(e/l)*l)},function(e,t){e.setTime(+e+t*l)},function(e,t){return(t-e)/l},function(e){return e.getUTCSeconds()}),f=d.range,y=t(function(e){e.setTime(Math.floor(e/u)*u)},function(e,t){e.setTime(+e+t*u)},function(e,t){return(t-e)/u},function(e){return e.getMinutes()}),m=y.range,g=t(function(e){var t=e.getTimezoneOffset()*u%h;t<0&&(t+=h),e.setTime(Math.floor((+e-t)/h)*h+t)},function(e,t){e.setTime(+e+t*h)},function(e,t){return(t-e)/h},function(e){return e.getHours()}),v=g.range,L=t(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*u)/c},function(e){return e.getDate()-1}),b=L.range,O=n(0),x=n(1),w=n(2),C=n(3),E=n(4),S=n(5),_=n(6),T=O.range,k=x.range,M=w.range,P=C.range,N=E.range,D=S.range,I=_.range,A=t(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()}),R=A.range,F=t(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});F.every=function(e){return isFinite(e=Math.floor(e))&&e>0?t(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)}):null};var z=F.range,U=t(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*u)},function(e,t){return(t-e)/u},function(e){return e.getUTCMinutes()}),H=U.range,B=t(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+t*h)},function(e,t){return(t-e)/h},function(e){return e.getUTCHours()}),j=B.range,G=t(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/c},function(e){return e.getUTCDate()-1}),W=G.range,q=i(0),V=i(1),X=i(2),Y=i(3),Z=i(4),$=i(5),K=i(6),Q=q.range,J=V.range,ee=X.range,te=Y.range,ne=Z.range,ie=$.range,re=K.range,se=t(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()}),oe=se.range,ae=t(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});ae.every=function(e){return isFinite(e=Math.floor(e))&&e>0?t(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null};var le=ae.range;e.timeInterval=t,e.timeMillisecond=o,e.timeMilliseconds=a,e.utcMillisecond=o,e.utcMilliseconds=a,e.timeSecond=d,e.timeSeconds=f,e.utcSecond=d,e.utcSeconds=f,e.timeMinute=y,e.timeMinutes=m,e.timeHour=g,e.timeHours=v,e.timeDay=L,e.timeDays=b,e.timeWeek=O,e.timeWeeks=T,e.timeSunday=O,e.timeSundays=T,e.timeMonday=x,e.timeMondays=k,e.timeTuesday=w,e.timeTuesdays=M,e.timeWednesday=C,e.timeWednesdays=P,e.timeThursday=E,e.timeThursdays=N,e.timeFriday=S,e.timeFridays=D,e.timeSaturday=_,e.timeSaturdays=I,e.timeMonth=A,e.timeMonths=R,e.timeYear=F,e.timeYears=z,e.utcMinute=U,e.utcMinutes=H,e.utcHour=B,e.utcHours=j,e.utcDay=G,e.utcDays=W,e.utcWeek=q,e.utcWeeks=Q,e.utcSunday=q,e.utcSundays=Q,e.utcMonday=V,e.utcMondays=J,e.utcTuesday=X,e.utcTuesdays=ee,e.utcWednesday=Y,e.utcWednesdays=te,e.utcThursday=Z,e.utcThursdays=ne,e.utcFriday=$,e.utcFridays=ie,e.utcSaturday=K,e.utcSaturdays=re,e.utcMonth=se,e.utcMonths=oe,e.utcYear=ae,e.utcYears=le,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){!function(e,i){i(t,n(45))}(this,function(e,t){"use strict";function n(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function i(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function r(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}function s(e){function t(e,t){return function(n){var i,r,s,o=[],a=-1,l=0,u=e.length;for(n instanceof Date||(n=new Date(+n));++a<u;)37===e.charCodeAt(a)&&(o.push(e.slice(l,a)),null!=(r=ie[i=e.charAt(++a)])?i=e.charAt(++a):r="e"===i?" ":"0",(s=t[i])&&(i=s(n,r)),o.push(i),l=a+1);return o.push(e.slice(l,a)),o.join("")}}function s(e,t){return function(n){var s=r(1900),a=o(s,e,n+="",0);if(a!=n.length)return null;if("p"in s&&(s.H=s.H%12+12*s.p),"W"in s||"U"in s){"w"in s||(s.w="W"in s?1:0);var l="Z"in s?i(r(s.y)).getUTCDay():t(r(s.y)).getDay();s.m=0,s.d="W"in s?(s.w+6)%7+7*s.W-(l+5)%7:s.w+7*s.U-(l+6)%7}return"Z"in s?(s.H+=s.Z/100|0,s.M+=s.Z%100,i(s)):t(s)}}function o(e,t,n,i){for(var r,s,o=0,a=t.length,l=n.length;o<a;){if(i>=l)return-1;if(r=t.charCodeAt(o++),37===r){if(r=t.charAt(o++),s=Fe[r in ie?t.charAt(o++):r],!s||(i=s(e,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}function a(e,t,n){var i=Ee.exec(t.slice(n));return i?(e.p=Se[i[0].toLowerCase()],n+i[0].length):-1}function J(e,t,n){var i=ke.exec(t.slice(n));return i?(e.w=Me[i[0].toLowerCase()],n+i[0].length):-1}function ee(e,t,n){var i=_e.exec(t.slice(n));return i?(e.w=Te[i[0].toLowerCase()],n+i[0].length):-1}function te(e,t,n){var i=De.exec(t.slice(n));return i?(e.m=Ie[i[0].toLowerCase()],n+i[0].length):-1}function ne(e,t,n){var i=Pe.exec(t.slice(n));return i?(e.m=Ne[i[0].toLowerCase()],n+i[0].length):-1}function re(e,t,n){return o(e,ge,t,n)}function se(e,t,n){return o(e,ve,t,n)}function oe(e,t,n){return o(e,Le,t,n)}function ae(e){return xe[e.getDay()]}function le(e){return Oe[e.getDay()]}function ue(e){return Ce[e.getMonth()]}function he(e){return we[e.getMonth()]}function ce(e){return be[+(e.getHours()>=12)]}function pe(e){return xe[e.getUTCDay()]}function de(e){return Oe[e.getUTCDay()]}function fe(e){return Ce[e.getUTCMonth()]}function ye(e){return we[e.getUTCMonth()]}function me(e){return be[+(e.getUTCHours()>=12)]}var ge=e.dateTime,ve=e.date,Le=e.time,be=e.periods,Oe=e.days,xe=e.shortDays,we=e.months,Ce=e.shortMonths,Ee=l(be),Se=u(be),_e=l(Oe),Te=u(Oe),ke=l(xe),Me=u(xe),Pe=l(we),Ne=u(we),De=l(Ce),Ie=u(Ce),Ae={a:ae,A:le,b:ue,B:he,c:null,d:C,e:C,H:E,I:S,j:_,L:T,m:k,M:M,p:ce,S:P,U:N,w:D,W:I,x:null,X:null,y:A,Y:R,Z:F,"%":Q},Re={a:pe,A:de,b:fe,B:ye,c:null,d:z,e:z,H:U,I:H,j:B,L:j,m:G,M:W,p:me,S:q,U:V,w:X,W:Y,x:null,X:null,y:Z,Y:$,Z:K,"%":Q},Fe={a:J,A:ee,b:te,B:ne,c:re,d:g,e:g,H:L,I:L,j:v,L:x,m:m,M:b,p:a,S:O,U:c,w:h,W:p,x:se,X:oe,y:f,Y:d,Z:y,"%":w};return Ae.x=t(ve,Ae),Ae.X=t(Le,Ae),Ae.c=t(ge,Ae),Re.x=t(ve,Re),Re.X=t(Le,Re),Re.c=t(ge,Re),{format:function(e){var n=t(e+="",Ae);return n.toString=function(){return e},n},parse:function(e){var t=s(e+="",n);return t.toString=function(){return e},t},utcFormat:function(e){var n=t(e+="",Re);return n.toString=function(){return e},n},utcParse:function(e){var t=s(e,i);return t.toString=function(){return e},t}}}function o(e,t,n){var i=e<0?"-":"",r=(i?-e:e)+"",s=r.length;return i+(s<n?new Array(n-s+1).join(t)+r:r)}function a(e){return e.replace(oe,"\\$&")}function l(e){return new RegExp("^(?:"+e.map(a).join("|")+")","i")}function u(e){for(var t={},n=-1,i=e.length;++n<i;)t[e[n].toLowerCase()]=n;return t}function h(e,t,n){var i=re.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function c(e,t,n){var i=re.exec(t.slice(n));return i?(e.U=+i[0],n+i[0].length):-1}function p(e,t,n){var i=re.exec(t.slice(n));return i?(e.W=+i[0],n+i[0].length):-1}function d(e,t,n){var i=re.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function f(e,t,n){var i=re.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function y(e,t,n){var i=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function m(e,t,n){var i=re.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function g(e,t,n){var i=re.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function v(e,t,n){var i=re.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function L(e,t,n){var i=re.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function b(e,t,n){var i=re.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function O(e,t,n){var i=re.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function x(e,t,n){var i=re.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function w(e,t,n){var i=se.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function C(e,t){return o(e.getDate(),t,2)}function E(e,t){return o(e.getHours(),t,2)}function S(e,t){return o(e.getHours()%12||12,t,2)}function _(e,n){return o(1+t.timeDay.count(t.timeYear(e),e),n,3)}function T(e,t){return o(e.getMilliseconds(),t,3)}function k(e,t){return o(e.getMonth()+1,t,2)}function M(e,t){return o(e.getMinutes(),t,2);
}function P(e,t){return o(e.getSeconds(),t,2)}function N(e,n){return o(t.timeSunday.count(t.timeYear(e),e),n,2)}function D(e){return e.getDay()}function I(e,n){return o(t.timeMonday.count(t.timeYear(e),e),n,2)}function A(e,t){return o(e.getFullYear()%100,t,2)}function R(e,t){return o(e.getFullYear()%1e4,t,4)}function F(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+o(t/60|0,"0",2)+o(t%60,"0",2)}function z(e,t){return o(e.getUTCDate(),t,2)}function U(e,t){return o(e.getUTCHours(),t,2)}function H(e,t){return o(e.getUTCHours()%12||12,t,2)}function B(e,n){return o(1+t.utcDay.count(t.utcYear(e),e),n,3)}function j(e,t){return o(e.getUTCMilliseconds(),t,3)}function G(e,t){return o(e.getUTCMonth()+1,t,2)}function W(e,t){return o(e.getUTCMinutes(),t,2)}function q(e,t){return o(e.getUTCSeconds(),t,2)}function V(e,n){return o(t.utcSunday.count(t.utcYear(e),e),n,2)}function X(e){return e.getUTCDay()}function Y(e,n){return o(t.utcMonday.count(t.utcYear(e),e),n,2)}function Z(e,t){return o(e.getUTCFullYear()%100,t,2)}function $(e,t){return o(e.getUTCFullYear()%1e4,t,4)}function K(){return"+0000"}function Q(){return"%"}function J(t){return ne=s(t),e.timeFormat=ne.format,e.timeParse=ne.parse,e.utcFormat=ne.utcFormat,e.utcParse=ne.utcParse,ne}function ee(e){return e.toISOString()}function te(e){var t=new Date(e);return isNaN(t)?null:t}var ne,ie={"-":"",_:" ",0:"0"},re=/^\s*\d+/,se=/^%/,oe=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;J({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var ae="%Y-%m-%dT%H:%M:%S.%LZ",le=Date.prototype.toISOString?ee:e.utcFormat(ae),ue=+new Date("2000-01-01T00:00:00.000Z")?te:e.utcParse(ae);e.timeFormatDefaultLocale=J,e.timeFormatLocale=s,e.isoFormat=le,e.isoParse=ue,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){!function(e,i){i(t,n(40))}(this,function(e,t){"use strict";function n(){this.reset()}function i(e,t,n){var i=e.s=t+n,r=i-t,s=i-r;e.t=t-s+(n-r)}function r(e){return e>1?0:e<-1?It:Math.acos(e)}function s(e){return e>1?At:e<-1?-At:Math.asin(e)}function o(e){return(e=Yt(e/2))*e}function a(){}function l(e,t){e&&Jt.hasOwnProperty(e.type)&&Jt[e.type](e,t)}function u(e,t,n){var i,r=-1,s=e.length-n;for(t.lineStart();++r<s;)i=e[r],t.point(i[0],i[1],i[2]);t.lineEnd()}function h(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)u(e[n],t,1);t.polygonEnd()}function c(){rn.point=d}function p(){f(et,tt)}function d(e,t){rn.point=f,et=e,tt=t,e*=Ut,t*=Ut,nt=e,it=Gt(t=t/2+Rt),rt=Yt(t)}function f(e,t){e*=Ut,t*=Ut,t=t/2+Rt;var n=e-nt,i=n>=0?1:-1,r=i*n,s=Gt(t),o=Yt(t),a=rt*o,l=it*s+a*Gt(r),u=a*i*Yt(r);tn.add(jt(u,l)),nt=e,it=s,rt=o}function y(e){return[jt(e[1],e[0]),s(e[2])]}function m(e){var t=e[0],n=e[1],i=Gt(n);return[i*Gt(t),i*Yt(t),Yt(n)]}function g(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function v(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function L(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function b(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function O(e){var t=$t(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function x(e,t){dt.push(ft=[st=e,at=e]),t<ot&&(ot=t),t>lt&&(lt=t)}function w(e,t){var n=m([e*Ut,t*Ut]);if(pt){var i=v(pt,n),r=[i[1],-i[0],0],s=v(r,i);O(s),s=y(s);var o,a=e-ut,l=a>0?1:-1,u=s[0]*zt*l,h=Ht(a)>180;h^(l*ut<u&&u<l*e)?(o=s[1]*zt,o>lt&&(lt=o)):(u=(u+360)%360-180,h^(l*ut<u&&u<l*e)?(o=-s[1]*zt,o<ot&&(ot=o)):(t<ot&&(ot=t),t>lt&&(lt=t))),h?e<ut?k(st,e)>k(st,at)&&(at=e):k(e,at)>k(st,at)&&(st=e):at>=st?(e<st&&(st=e),e>at&&(at=e)):e>ut?k(st,e)>k(st,at)&&(at=e):k(e,at)>k(st,at)&&(st=e)}else x(e,t);pt=n,ut=e}function C(){an.point=w}function E(){ft[0]=st,ft[1]=at,an.point=x,pt=null}function S(e,t){if(pt){var n=e-ut;on.add(Ht(n)>180?n+(n>0?360:-360):n)}else ht=e,ct=t;rn.point(e,t),w(e,t)}function _(){rn.lineStart()}function T(){S(ht,ct),rn.lineEnd(),Ht(on)>Nt&&(st=-(at=180)),ft[0]=st,ft[1]=at,pt=null}function k(e,t){return(t-=e)<0?t+360:t}function M(e,t){return e[0]-t[0]}function P(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function N(e,t){e*=Ut,t*=Ut;var n=Gt(t);D(n*Gt(e),n*Yt(e),Yt(t))}function D(e,t,n){++yt,gt+=(e-gt)/yt,vt+=(t-vt)/yt,Lt+=(n-Lt)/yt}function I(){un.point=A}function A(e,t){e*=Ut,t*=Ut;var n=Gt(t);Tt=n*Gt(e),kt=n*Yt(e),Mt=Yt(t),un.point=R,D(Tt,kt,Mt)}function R(e,t){e*=Ut,t*=Ut;var n=Gt(t),i=n*Gt(e),r=n*Yt(e),s=Yt(t),o=jt($t((o=kt*s-Mt*r)*o+(o=Mt*i-Tt*s)*o+(o=Tt*r-kt*i)*o),Tt*i+kt*r+Mt*s);mt+=o,bt+=o*(Tt+(Tt=i)),Ot+=o*(kt+(kt=r)),xt+=o*(Mt+(Mt=s)),D(Tt,kt,Mt)}function F(){un.point=N}function z(){un.point=H}function U(){B(St,_t),un.point=N}function H(e,t){St=e,_t=t,e*=Ut,t*=Ut,un.point=B;var n=Gt(t);Tt=n*Gt(e),kt=n*Yt(e),Mt=Yt(t),D(Tt,kt,Mt)}function B(e,t){e*=Ut,t*=Ut;var n=Gt(t),i=n*Gt(e),s=n*Yt(e),o=Yt(t),a=kt*o-Mt*s,l=Mt*i-Tt*o,u=Tt*s-kt*i,h=$t(a*a+l*l+u*u),c=Tt*i+kt*s+Mt*o,p=h&&-r(c)/h,d=jt(h,c);wt+=p*a,Ct+=p*l,Et+=p*u,mt+=d,bt+=d*(Tt+(Tt=i)),Ot+=d*(kt+(kt=s)),xt+=d*(Mt+(Mt=o)),D(Tt,kt,Mt)}function j(e,t){return[e>It?e-Ft:e<-It?e+Ft:e,t]}function G(e,t,n){return(e%=Ft)?t||n?pn(q(e),V(t,n)):q(e):t||n?V(t,n):j}function W(e){return function(t,n){return t+=e,[t>It?t-Ft:t<-It?t+Ft:t,n]}}function q(e){var t=W(e);return t.invert=W(-e),t}function V(e,t){function n(e,t){var n=Gt(t),l=Gt(e)*n,u=Yt(e)*n,h=Yt(t),c=h*i+l*r;return[jt(u*o-c*a,l*i-h*r),s(c*o+u*a)]}var i=Gt(e),r=Yt(e),o=Gt(t),a=Yt(t);return n.invert=function(e,t){var n=Gt(t),l=Gt(e)*n,u=Yt(e)*n,h=Yt(t),c=h*o-u*a;return[jt(u*o+h*a,l*i+c*r),s(c*i-l*r)]},n}function X(e,t,n,i,r,s){if(n){var o=Gt(t),a=Yt(t),l=i*n;null==r?(r=t+i*Ft,s=t-l/2):(r=Y(o,r),s=Y(o,s),(i>0?r<s:r>s)&&(r+=i*Ft));for(var u,h=r;i>0?h>s:h<s;h-=l)u=y([o,-a*Gt(h),-a*Yt(h)]),e.point(u[0],u[1])}}function Y(e,t){t=m(t),t[0]-=e,O(t);var n=r(-t[1]);return((-t[2]<0?-n:n)+Ft-Nt)%Ft}function Z(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function $(e){if(t=e.length){for(var t,n,i=0,r=e[0];++i<t;)r.n=n=e[i],n.p=r,r=n;r.n=n=e[0],n.p=r}}function K(e,n,i,r){function s(t,s){return e<=t&&t<=i&&n<=s&&s<=r}function o(t,s,o,l){var h=0,c=0;if(null==t||(h=a(t,o))!==(c=a(s,o))||u(t,s)<0^o>0){do l.point(0===h||3===h?e:i,h>1?r:n);while((h=(h+o+4)%4)!==c)}else l.point(s[0],s[1])}function a(t,r){return Ht(t[0]-e)<Nt?r>0?0:3:Ht(t[0]-i)<Nt?r>0?2:1:Ht(t[1]-n)<Nt?r>0?1:0:r>0?3:2}function l(e,t){return u(e.x,t.x)}function u(e,t){var n=a(e,1),i=a(t,1);return n!==i?n-i:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(a){function u(e,t){s(e,t)&&_.point(e,t)}function h(){for(var t=0,n=0,i=g.length;n<i;++n)for(var s,o,a=g[n],l=1,u=a.length,h=a[0],c=h[0],p=h[1];l<u;++l)s=c,o=p,h=a[l],c=h[0],p=h[1],o<=r?p>r&&(c-s)*(r-o)>(p-o)*(e-s)&&++t:p<=r&&(c-s)*(r-o)<(p-o)*(e-s)&&--t;return t}function c(){_=T,m=[],g=[],S=!0}function p(){var e=h(),n=S&&e,i=(m=t.merge(m)).length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&kn(m,l,e,o,a),a.polygonEnd()),_=a,m=g=v=null}function d(){k.point=y,g&&g.push(v=[]),E=!0,C=!1,x=w=NaN}function f(){m&&(y(L,b),O&&C&&T.rejoin(),m.push(T.result())),k.point=u,C&&_.lineEnd()}function y(t,o){var a=s(t,o);if(g&&v.push([t,o]),E)L=t,b=o,O=a,E=!1,a&&(_.lineStart(),_.point(t,o));else if(a&&C)_.point(t,o);else{var l=[x=Math.max(Pn,Math.min(Mn,x)),w=Math.max(Pn,Math.min(Mn,w))],u=[t=Math.max(Pn,Math.min(Mn,t)),o=Math.max(Pn,Math.min(Mn,o))];_n(l,u,e,n,i,r)?(C||(_.lineStart(),_.point(l[0],l[1])),_.point(u[0],u[1]),a||_.lineEnd(),S=!1):a&&(_.lineStart(),_.point(t,o),S=!1)}x=t,w=o,C=a}var m,g,v,L,b,O,x,w,C,E,S,_=a,T=Sn(),k={point:u,lineStart:d,lineEnd:f,polygonStart:c,polygonEnd:p};return k}}function Q(){In.point=ee,In.lineEnd=J}function J(){In.point=In.lineEnd=a}function ee(e,t){e*=Ut,t*=Ut,dn=e,fn=Yt(t),yn=Gt(t),In.point=te}function te(e,t){e*=Ut,t*=Ut;var n=Yt(t),i=Gt(t),r=Ht(e-dn),s=Gt(r),o=Yt(r),a=i*o,l=yn*n-fn*i*s,u=fn*n+yn*i*s;Dn.add(jt($t(a*a+l*l),u)),dn=e,fn=n,yn=i}function ne(e,n,i){var r=t.range(e,n-Nt,i).concat(n);return function(e){return r.map(function(t){return[e,t]})}}function ie(e,n,i){var r=t.range(e,n-Nt,i).concat(n);return function(e){return r.map(function(t){return[t,e]})}}function re(){function e(){return{type:"MultiLineString",coordinates:n()}}function n(){return t.range(Wt(o/g)*g,s,g).map(d).concat(t.range(Wt(h/v)*v,u,v).map(f)).concat(t.range(Wt(r/y)*y,i,y).filter(function(e){return Ht(e%g)>Nt}).map(c)).concat(t.range(Wt(l/m)*m,a,m).filter(function(e){return Ht(e%v)>Nt}).map(p))}var i,r,s,o,a,l,u,h,c,p,d,f,y=10,m=y,g=90,v=360,L=2.5;return e.lines=function(){return n().map(function(e){return{type:"LineString",coordinates:e}})},e.outline=function(){return{type:"Polygon",coordinates:[d(o).concat(f(u).slice(1),d(s).reverse().slice(1),f(h).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.extentMajor(t).extentMinor(t):e.extentMinor()},e.extentMajor=function(t){return arguments.length?(o=+t[0][0],s=+t[1][0],h=+t[0][1],u=+t[1][1],o>s&&(t=o,o=s,s=t),h>u&&(t=h,h=u,u=t),e.precision(L)):[[o,h],[s,u]]},e.extentMinor=function(t){return arguments.length?(r=+t[0][0],i=+t[1][0],l=+t[0][1],a=+t[1][1],r>i&&(t=r,r=i,i=t),l>a&&(t=l,l=a,a=t),e.precision(L)):[[r,l],[i,a]]},e.step=function(t){return arguments.length?e.stepMajor(t).stepMinor(t):e.stepMinor()},e.stepMajor=function(t){return arguments.length?(g=+t[0],v=+t[1],e):[g,v]},e.stepMinor=function(t){return arguments.length?(y=+t[0],m=+t[1],e):[y,m]},e.precision=function(t){return arguments.length?(L=+t,c=ne(l,a,90),p=ie(r,i,L),d=ne(h,u,90),f=ie(o,s,L),e):L},e.extentMajor([[-180,-90+Nt],[180,90-Nt]]).extentMinor([[-180,-80-Nt],[180,80+Nt]])}function se(){return re()()}function oe(){Gn.point=ae}function ae(e,t){Gn.point=le,mn=vn=e,gn=Ln=t}function le(e,t){jn.add(Ln*e-vn*t),vn=e,Ln=t}function ue(){le(mn,gn)}function he(e,t){e<Wn&&(Wn=e),e>Vn&&(Vn=e),t<qn&&(qn=t),t>Xn&&(Xn=t)}function ce(e,t){Zn+=e,$n+=t,++Kn}function pe(){ri.point=de}function de(e,t){ri.point=fe,ce(xn=e,wn=t)}function fe(e,t){var n=e-xn,i=t-wn,r=$t(n*n+i*i);Qn+=r*(xn+e)/2,Jn+=r*(wn+t)/2,ei+=r,ce(xn=e,wn=t)}function ye(){ri.point=ce}function me(){ri.point=ve}function ge(){Le(bn,On)}function ve(e,t){ri.point=Le,ce(bn=xn=e,On=wn=t)}function Le(e,t){var n=e-xn,i=t-wn,r=$t(n*n+i*i);Qn+=r*(xn+e)/2,Jn+=r*(wn+t)/2,ei+=r,r=wn*e-xn*t,ti+=r*(xn+e),ni+=r*(wn+t),ii+=3*r,ce(xn=e,wn=t)}function be(e){this._context=e}function Oe(){this._string=[]}function xe(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function we(e){return e.length>1}function Ce(e,t){return((e=e.x)[0]<0?e[1]-At-Nt:At-e[1])-((t=t.x)[0]<0?t[1]-At-Nt:At-t[1])}function Ee(e){var t,n=NaN,i=NaN,r=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(s,o){var a=s>0?It:-It,l=Ht(s-n);Ht(l-It)<Nt?(e.point(n,i=(i+o)/2>0?At:-At),e.point(r,i),e.lineEnd(),e.lineStart(),e.point(a,i),e.point(s,i),t=0):r!==a&&l>=It&&(Ht(n-r)<Nt&&(n-=r*Nt),Ht(s-a)<Nt&&(s-=a*Nt),i=Se(n,i,s,o),e.point(r,i),e.lineEnd(),e.lineStart(),e.point(a,i),t=0),e.point(n=s,i=o),r=a},lineEnd:function(){e.lineEnd(),n=i=NaN},clean:function(){return 2-t}}}function Se(e,t,n,i){var r,s,o=Yt(e-n);return Ht(o)>Nt?Bt((Yt(t)*(s=Gt(i))*Yt(n)-Yt(i)*(r=Gt(t))*Yt(e))/(r*s*o)):(t+i)/2}function _e(e,t,n,i){var r;if(null==e)r=n*At,i.point(-It,r),i.point(0,r),i.point(It,r),i.point(It,0),i.point(It,-r),i.point(0,-r),i.point(-It,-r),i.point(-It,0),i.point(-It,r);else if(Ht(e[0]-t[0])>Nt){var s=e[0]<t[0]?It:-It;r=n*s/2,i.point(-s,r),i.point(0,r),i.point(s,r)}else i.point(t[0],t[1])}function Te(e){return function(t){var n=new ke;for(var i in e)n[i]=e[i];return n.stream=t,n}}function ke(){}function Me(e,t,n){var i=t[1][0]-t[0][0],r=t[1][1]-t[0][1],s=e.clipExtent&&e.clipExtent();e.scale(150).translate([0,0]),null!=s&&e.clipExtent(null),en(n,e.stream(Yn));var o=Yn.result(),a=Math.min(i/(o[1][0]-o[0][0]),r/(o[1][1]-o[0][1])),l=+t[0][0]+(i-a*(o[1][0]+o[0][0]))/2,u=+t[0][1]+(r-a*(o[1][1]+o[0][1]))/2;return null!=s&&e.clipExtent(s),e.scale(150*a).translate([l,u])}function Pe(e,t,n){return Me(e,[[0,0],t],n)}function Ne(e){return Te({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function De(e,t){function n(i,r,o,a,l,u,h,c,p,d,f,y,m,g){var v=h-i,L=c-r,b=v*v+L*L;if(b>4*t&&m--){var O=a+d,x=l+f,w=u+y,C=$t(O*O+x*x+w*w),E=s(w/=C),S=Ht(Ht(w)-1)<Nt||Ht(o-p)<Nt?(o+p)/2:jt(x,O),_=e(S,E),T=_[0],k=_[1],M=T-i,P=k-r,N=L*M-v*P;(N*N/b>t||Ht((v*M+L*P)/b-.5)>.3||a*d+l*f+u*y<di)&&(n(i,r,o,a,l,u,T,k,S,O/=C,x/=C,w,m,g),g.point(T,k),n(T,k,S,O,x,w,h,c,p,d,f,y,m,g))}}return function(t){function i(n,i){n=e(n,i),t.point(n[0],n[1])}function r(){v=NaN,w.point=s,t.lineStart()}function s(i,r){var s=m([i,r]),o=e(i,r);n(v,L,g,b,O,x,v=o[0],L=o[1],g=i,b=s[0],O=s[1],x=s[2],pi,t),t.point(v,L)}function o(){w.point=i,t.lineEnd()}function a(){r(),w.point=l,w.lineEnd=u}function l(e,t){s(h=e,t),c=v,p=L,d=b,f=O,y=x,w.point=s}function u(){n(v,L,g,b,O,x,c,p,h,d,f,y,pi,t),w.lineEnd=o,o()}var h,c,p,d,f,y,g,v,L,b,O,x,w={point:i,lineStart:r,lineEnd:o,polygonStart:function(){t.polygonStart(),w.lineStart=a},polygonEnd:function(){t.polygonEnd(),w.lineStart=r}};return w}}function Ie(e){return Ae(function(){return e})()}function Ae(e){function t(e){return e=h(e[0]*Ut,e[1]*Ut),[e[0]*m+a,l-e[1]*m]}function n(e){return e=h.invert((e[0]-a)/m,(l-e[1])/m),e&&[e[0]*zt,e[1]*zt]}function i(e,t){return e=o(e,t),[e[0]*m+a,l-e[1]*m]}function r(){h=pn(u=G(O,x,w),o);var e=o(L,b);return a=g-e[0]*m,l=v+e[1]*m,s()}function s(){return f=y=null,t}var o,a,l,u,h,c,p,d,f,y,m=150,g=480,v=250,L=0,b=0,O=0,x=0,w=0,C=null,E=ui,S=null,_=Hn,T=.5,k=fi(i,T);return t.stream=function(e){return f&&y===e?f:f=yi(E(u,k(_(y=e))))},t.clipAngle=function(e){return arguments.length?(E=+e?hi(C=e*Ut,6*Ut):(C=null,ui),s()):C*zt},t.clipExtent=function(e){return arguments.length?(_=null==e?(S=c=p=d=null,Hn):K(S=+e[0][0],c=+e[0][1],p=+e[1][0],d=+e[1][1]),s()):null==S?null:[[S,c],[p,d]]},t.scale=function(e){return arguments.length?(m=+e,r()):m},t.translate=function(e){return arguments.length?(g=+e[0],v=+e[1],r()):[g,v]},t.center=function(e){return arguments.length?(L=e[0]%360*Ut,b=e[1]%360*Ut,r()):[L*zt,b*zt]},t.rotate=function(e){return arguments.length?(O=e[0]%360*Ut,x=e[1]%360*Ut,w=e.length>2?e[2]%360*Ut:0,r()):[O*zt,x*zt,w*zt]},t.precision=function(e){return arguments.length?(k=fi(i,T=e*e),s()):$t(T)},t.fitExtent=function(e,n){return Me(t,e,n)},t.fitSize=function(e,n){return Pe(t,e,n)},function(){return o=e.apply(this,arguments),t.invert=o.invert&&n,r()}}function Re(e){var t=0,n=It/3,i=Ae(e),r=i(t,n);return r.parallels=function(e){return arguments.length?i(t=e[0]*Ut,n=e[1]*Ut):[t*zt,n*zt]},r}function Fe(e){function t(e,t){return[e*n,Yt(t)/n]}var n=Gt(e);return t.invert=function(e,t){return[e/n,s(t*n)]},t}function ze(e,t){function n(e,t){var n=$t(o-2*r*Yt(t))/r;return[n*Yt(e*=r),a-n*Gt(e)]}var i=Yt(e),r=(i+Yt(t))/2;if(Ht(r)<Nt)return Fe(e);var o=1+i*(2*r-i),a=$t(o)/r;return n.invert=function(e,t){var n=a-t;return[jt(e,Ht(n))/r*Zt(n),s((o-(e*e+n*n)*r*r)/(2*r))]},n}function Ue(e){var t=e.length;return{point:function(n,i){for(var r=-1;++r<t;)e[r].point(n,i)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function He(e){return function(t,n){var i=Gt(t),r=Gt(n),s=e(i*r);return[s*r*Yt(t),s*Yt(n)]}}function Be(e){return function(t,n){var i=$t(t*t+n*n),r=e(i),o=Yt(r),a=Gt(r);return[jt(t*o,i*a),s(i&&n*o/i)]}}function je(e,t){return[e,Vt(Kt((At+t)/2))]}function Ge(e){var t,n=Ie(e),i=n.scale,r=n.translate,s=n.clipExtent;return n.scale=function(e){return arguments.length?(i(e),t&&n.clipExtent(null),n):i()},n.translate=function(e){return arguments.length?(r(e),t&&n.clipExtent(null),n):r()},n.clipExtent=function(e){if(!arguments.length)return t?null:s();if(t=null==e){var o=It*i(),a=r();e=[[a[0]-o,a[1]-o],[a[0]+o,a[1]+o]]}return s(e),n},n.clipExtent(null)}function We(e){return Kt((At+e)/2)}function qe(e,t){function n(e,t){s>0?t<-At+Nt&&(t=-At+Nt):t>At-Nt&&(t=At-Nt);var n=s/Xt(We(t),r);return[n*Yt(r*e),s-n*Gt(r*e)]}var i=Gt(e),r=e===t?Yt(e):Vt(i/Gt(t))/Vt(We(t)/We(e)),s=i*Xt(We(e),r)/r;return r?(n.invert=function(e,t){var n=s-t,i=Zt(r)*$t(e*e+n*n);return[jt(e,Ht(n))/r*Zt(n),2*Bt(Xt(s/i,1/r))-At]},n):je}function Ve(e,t){return[e,t]}function Xe(e,t){function n(e,t){var n=s-t,i=r*e;return[n*Yt(i),s-n*Gt(i)]}var i=Gt(e),r=e===t?Yt(e):(i-Gt(t))/(t-e),s=i/r+e;return Ht(r)<Nt?Ve:(n.invert=function(e,t){var n=s-t;return[jt(e,Ht(n))/r*Zt(n),s-Zt(r)*$t(e*e+n*n)]},n)}function Ye(e,t){var n=Gt(t),i=Gt(e)*n;return[n*Yt(e)/i,Yt(t)/i]}function Ze(e,t,n,i){return 1===e&&1===t&&0===n&&0===i?Hn:Te({point:function(r,s){this.stream.point(r*e+n,s*t+i)}})}function $e(e,t){return[Gt(t)*Yt(e),Yt(t)]}function Ke(e,t){var n=Gt(t),i=1+Gt(e)*n;return[n*Yt(e)/i,Yt(t)/i]}function Qe(e,t){return[Vt(Kt((At+t)/2)),-e]}var Je=function(){return new n};n.prototype={constructor:n,reset:function(){this.s=this.t=0},add:function(e){i(Pt,e,this.t),i(this,Pt.s,this.s),this.s?this.t+=Pt.t:this.s=Pt.t},valueOf:function(){return this.s}};var et,tt,nt,it,rt,st,ot,at,lt,ut,ht,ct,pt,dt,ft,yt,mt,gt,vt,Lt,bt,Ot,xt,wt,Ct,Et,St,_t,Tt,kt,Mt,Pt=new n,Nt=1e-6,Dt=1e-12,It=Math.PI,At=It/2,Rt=It/4,Ft=2*It,zt=180/It,Ut=It/180,Ht=Math.abs,Bt=Math.atan,jt=Math.atan2,Gt=Math.cos,Wt=Math.ceil,qt=Math.exp,Vt=Math.log,Xt=Math.pow,Yt=Math.sin,Zt=Math.sign||function(e){return e>0?1:e<0?-1:0},$t=Math.sqrt,Kt=Math.tan,Qt={Feature:function(e,t){l(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)l(n[i].geometry,t)}},Jt={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){u(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)u(n[i],t,0)},Polygon:function(e,t){h(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)h(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)l(n[i],t)}},en=function(e,t){e&&Qt.hasOwnProperty(e.type)?Qt[e.type](e,t):l(e,t)},tn=Je(),nn=Je(),rn={point:a,lineStart:a,lineEnd:a,polygonStart:function(){tn.reset(),rn.lineStart=c,rn.lineEnd=p},polygonEnd:function(){var e=+tn;nn.add(e<0?Ft+e:e),this.lineStart=this.lineEnd=this.point=a},sphere:function(){nn.add(Ft)}},sn=function(e){return nn.reset(),en(e,rn),2*nn},on=Je(),an={point:x,lineStart:C,lineEnd:E,polygonStart:function(){an.point=S,an.lineStart=_,an.lineEnd=T,on.reset(),rn.polygonStart()},polygonEnd:function(){rn.polygonEnd(),an.point=x,an.lineStart=C,an.lineEnd=E,tn<0?(st=-(at=180),ot=-(lt=90)):on>Nt?lt=90:on<-Nt&&(ot=-90),ft[0]=st,ft[1]=at}},ln=function(e){var t,n,i,r,s,o,a;if(lt=at=-(st=ot=1/0),dt=[],en(e,an),n=dt.length){for(dt.sort(M),t=1,i=dt[0],s=[i];t<n;++t)r=dt[t],P(i,r[0])||P(i,r[1])?(k(i[0],r[1])>k(i[0],i[1])&&(i[1]=r[1]),k(r[0],i[1])>k(i[0],i[1])&&(i[0]=r[0])):s.push(i=r);for(o=-(1/0),n=s.length-1,t=0,i=s[n];t<=n;i=r,++t)r=s[t],(a=k(i[1],r[0]))>o&&(o=a,st=r[0],at=i[1])}return dt=ft=null,st===1/0||ot===1/0?[[NaN,NaN],[NaN,NaN]]:[[st,ot],[at,lt]]},un={sphere:a,point:N,lineStart:I,lineEnd:F,polygonStart:function(){un.lineStart=z,un.lineEnd=U},polygonEnd:function(){un.lineStart=I,un.lineEnd=F}},hn=function(e){yt=mt=gt=vt=Lt=bt=Ot=xt=wt=Ct=Et=0,en(e,un);var t=wt,n=Ct,i=Et,r=t*t+n*n+i*i;return r<Dt&&(t=bt,n=Ot,i=xt,mt<Nt&&(t=gt,n=vt,i=Lt),r=t*t+n*n+i*i,r<Dt)?[NaN,NaN]:[jt(n,t)*zt,s(i/$t(r))*zt]},cn=function(e){return function(){return e}},pn=function(e,t){function n(n,i){return n=e(n,i),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,i){return n=t.invert(n,i),n&&e.invert(n[0],n[1])}),n};j.invert=j;var dn,fn,yn,mn,gn,vn,Ln,bn,On,xn,wn,Cn=function(e){function t(t){return t=e(t[0]*Ut,t[1]*Ut),t[0]*=zt,t[1]*=zt,t}return e=G(e[0]*Ut,e[1]*Ut,e.length>2?e[2]*Ut:0),t.invert=function(t){return t=e.invert(t[0]*Ut,t[1]*Ut),t[0]*=zt,t[1]*=zt,t},t},En=function(){function e(e,t){n.push(e=i(e,t)),e[0]*=zt,e[1]*=zt}function t(){var e=r.apply(this,arguments),t=s.apply(this,arguments)*Ut,l=o.apply(this,arguments)*Ut;return n=[],i=G(-e[0]*Ut,-e[1]*Ut,0).invert,X(a,t,l,1),e={type:"Polygon",coordinates:[n]},n=i=null,e}var n,i,r=cn([0,0]),s=cn(90),o=cn(6),a={point:e};return t.center=function(e){return arguments.length?(r="function"==typeof e?e:cn([+e[0],+e[1]]),t):r},t.radius=function(e){return arguments.length?(s="function"==typeof e?e:cn(+e),t):s},t.precision=function(e){return arguments.length?(o="function"==typeof e?e:cn(+e),t):o},t},Sn=function(){var e,t=[];return{point:function(t,n){e.push([t,n])},lineStart:function(){t.push(e=[])},lineEnd:a,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}},_n=function(e,t,n,i,r,s){var o,a=e[0],l=e[1],u=t[0],h=t[1],c=0,p=1,d=u-a,f=h-l;if(o=n-a,d||!(o>0)){if(o/=d,d<0){if(o<c)return;o<p&&(p=o)}else if(d>0){if(o>p)return;o>c&&(c=o)}if(o=r-a,d||!(o<0)){if(o/=d,d<0){if(o>p)return;o>c&&(c=o)}else if(d>0){if(o<c)return;o<p&&(p=o)}if(o=i-l,f||!(o>0)){if(o/=f,f<0){if(o<c)return;o<p&&(p=o)}else if(f>0){if(o>p)return;o>c&&(c=o)}if(o=s-l,f||!(o<0)){if(o/=f,f<0){if(o>p)return;o>c&&(c=o)}else if(f>0){if(o<c)return;o<p&&(p=o)}return c>0&&(e[0]=a+c*d,e[1]=l+c*f),p<1&&(t[0]=a+p*d,t[1]=l+p*f),!0}}}}},Tn=function(e,t){return Ht(e[0]-t[0])<Nt&&Ht(e[1]-t[1])<Nt},kn=function(e,t,n,i,r){var s,o,a=[],l=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n,i=e[0],o=e[t];if(Tn(i,o)){for(r.lineStart(),s=0;s<t;++s)r.point((i=e[s])[0],i[1]);return void r.lineEnd()}a.push(n=new Z(i,e,null,!0)),l.push(n.o=new Z(i,null,n,!1)),a.push(n=new Z(o,e,null,!1)),l.push(n.o=new Z(o,null,n,!0))}}),a.length){for(l.sort(t),$(a),$(l),s=0,o=l.length;s<o;++s)l[s].e=n=!n;for(var u,h,c=a[0];;){for(var p=c,d=!0;p.v;)if((p=p.n)===c)return;u=p.z,r.lineStart();do{if(p.v=p.o.v=!0,p.e){if(d)for(s=0,o=u.length;s<o;++s)r.point((h=u[s])[0],h[1]);else i(p.x,p.n.x,1,r);p=p.n}else{if(d)for(u=p.p.z,s=u.length-1;s>=0;--s)r.point((h=u[s])[0],h[1]);else i(p.x,p.p.x,-1,r);p=p.p}p=p.o,u=p.z,d=!d}while(!p.v);r.lineEnd()}}},Mn=1e9,Pn=-Mn,Nn=function(){var e,t,n,i=0,r=0,s=960,o=500;return n={stream:function(n){return e&&t===n?e:e=K(i,r,s,o)(t=n)},extent:function(a){return arguments.length?(i=+a[0][0],r=+a[0][1],s=+a[1][0],o=+a[1][1],e=t=null,n):[[i,r],[s,o]]}}},Dn=Je(),In={sphere:a,point:a,lineStart:Q,lineEnd:a,polygonStart:a,polygonEnd:a},An=function(e){return Dn.reset(),en(e,In),+Dn},Rn=[null,null],Fn={type:"LineString",coordinates:Rn},zn=function(e,t){return Rn[0]=e,Rn[1]=t,An(Fn)},Un=function(e,t){var n=e[0]*Ut,i=e[1]*Ut,r=t[0]*Ut,a=t[1]*Ut,l=Gt(i),u=Yt(i),h=Gt(a),c=Yt(a),p=l*Gt(n),d=l*Yt(n),f=h*Gt(r),y=h*Yt(r),m=2*s($t(o(a-i)+l*h*o(r-n))),g=Yt(m),v=m?function(e){var t=Yt(e*=m)/g,n=Yt(m-e)/g,i=n*p+t*f,r=n*d+t*y,s=n*u+t*c;return[jt(r,i)*zt,jt(s,$t(i*i+r*r))*zt]}:function(){return[n*zt,i*zt]};return v.distance=m,v},Hn=function(e){return e},Bn=Je(),jn=Je(),Gn={point:a,lineStart:a,lineEnd:a,polygonStart:function(){Gn.lineStart=oe,Gn.lineEnd=ue},polygonEnd:function(){Gn.lineStart=Gn.lineEnd=Gn.point=a,Bn.add(Ht(jn)),jn.reset()},result:function(){var e=Bn/2;return Bn.reset(),e}},Wn=1/0,qn=Wn,Vn=-Wn,Xn=Vn,Yn={point:he,lineStart:a,lineEnd:a,polygonStart:a,polygonEnd:a,result:function(){var e=[[Wn,qn],[Vn,Xn]];return Vn=Xn=-(qn=Wn=1/0),e}},Zn=0,$n=0,Kn=0,Qn=0,Jn=0,ei=0,ti=0,ni=0,ii=0,ri={point:ce,lineStart:pe,lineEnd:ye,polygonStart:function(){ri.lineStart=me,ri.lineEnd=ge},polygonEnd:function(){ri.point=ce,ri.lineStart=pe,ri.lineEnd=ye},result:function(){var e=ii?[ti/ii,ni/ii]:ei?[Qn/ei,Jn/ei]:Kn?[Zn/Kn,$n/Kn]:[NaN,NaN];return Zn=$n=Kn=Qn=Jn=ei=ti=ni=ii=0,e}};be.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Ft)}},result:a},Oe.prototype={_circle:xe(4.5),pointRadius:function(e){return this._circle=xe(e),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._string.push("M",e,",",t),this._point=1;break;case 1:this._string.push("L",e,",",t);break;default:this._string.push("M",e,",",t,this._circle)}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}}};var si=function(e,t){function n(e){return e&&("function"==typeof s&&r.pointRadius(+s.apply(this,arguments)),en(e,i(r))),r.result()}var i,r,s=4.5;return n.area=function(e){return en(e,i(Gn)),Gn.result()},n.bounds=function(e){return en(e,i(Yn)),Yn.result()},n.centroid=function(e){return en(e,i(ri)),ri.result()},n.projection=function(t){return arguments.length?(i=null==t?(e=null,Hn):(e=t).stream,n):e},n.context=function(e){return arguments.length?(r=null==e?(t=null,new Oe):new be(t=e),"function"!=typeof s&&r.pointRadius(s),n):t},n.pointRadius=function(e){return arguments.length?(s="function"==typeof e?e:(r.pointRadius(+e),+e),n):s},n.projection(e).context(t)},oi=Je(),ai=function(e,t){var n=t[0],i=t[1],r=[Yt(n),-Gt(n),0],o=0,a=0;oi.reset();for(var l=0,u=e.length;l<u;++l)if(c=(h=e[l]).length)for(var h,c,p=h[c-1],d=p[0],f=p[1]/2+Rt,y=Yt(f),g=Gt(f),L=0;L<c;++L,d=x,y=C,g=E,p=b){var b=h[L],x=b[0],w=b[1]/2+Rt,C=Yt(w),E=Gt(w),S=x-d,_=S>=0?1:-1,T=_*S,k=T>It,M=y*C;if(oi.add(jt(M*_*Yt(T),g*E+M*Gt(T))),o+=k?S+_*Ft:S,k^d>=n^x>=n){var P=v(m(p),m(b));O(P);var N=v(r,P);O(N);var D=(k^S>=0?-1:1)*s(N[2]);(i>D||i===D&&(P[0]||P[1]))&&(a+=k^S>=0?1:-1)}}return(o<-Nt||o<Nt&&oi<-Nt)^1&a},li=function(e,n,i,r){return function(s,o){function a(t,n){var i=s(t,n);e(t=i[0],n=i[1])&&o.point(t,n)}function l(e,t){var n=s(e,t);g.point(n[0],n[1])}function u(){x.point=l,g.lineStart()}function h(){x.point=a,g.lineEnd()}function c(e,t){m.push([e,t]);var n=s(e,t);b.point(n[0],n[1])}function p(){b.lineStart(),m=[]}function d(){c(m[0][0],m[0][1]),b.lineEnd();var e,t,n,i,r=b.clean(),s=L.result(),a=s.length;if(m.pop(),f.push(m),m=null,a)if(1&r){if(n=s[0],(t=n.length-1)>0){for(O||(o.polygonStart(),O=!0),o.lineStart(),e=0;e<t;++e)o.point((i=n[e])[0],i[1]);o.lineEnd()}}else a>1&&2&r&&s.push(s.pop().concat(s.shift())),y.push(s.filter(we))}var f,y,m,g=n(o),v=s.invert(r[0],r[1]),L=Sn(),b=n(L),O=!1,x={point:a,lineStart:u,lineEnd:h,polygonStart:function(){x.point=c,x.lineStart=p,x.lineEnd=d,y=[],f=[]},polygonEnd:function(){x.point=a,x.lineStart=u,x.lineEnd=h,y=t.merge(y);var e=ai(f,v);y.length?(O||(o.polygonStart(),O=!0),kn(y,Ce,e,i,o)):e&&(O||(o.polygonStart(),O=!0),o.lineStart(),i(null,null,1,o),o.lineEnd()),O&&(o.polygonEnd(),O=!1),y=f=null},sphere:function(){o.polygonStart(),o.lineStart(),i(null,null,1,o),o.lineEnd(),o.polygonEnd()}};return x}},ui=li(function(){return!0},Ee,_e,[-It,-At]),hi=function(e,t){function n(n,i,r,s){X(s,e,t,r,n,i)}function i(e,t){return Gt(e)*Gt(t)>a}function r(e){var t,n,r,a,h;return{lineStart:function(){a=r=!1,h=1},point:function(c,p){var d,f=[c,p],y=i(c,p),m=l?y?0:o(c,p):y?o(c+(c<0?It:-It),p):0;if(!t&&(a=r=y)&&e.lineStart(),y!==r&&(d=s(t,f),(Tn(t,d)||Tn(f,d))&&(f[0]+=Nt,f[1]+=Nt,y=i(f[0],f[1]))),y!==r)h=0,y?(e.lineStart(),d=s(f,t),e.point(d[0],d[1])):(d=s(t,f),e.point(d[0],d[1]),e.lineEnd()),t=d;else if(u&&t&&l^y){var g;m&n||!(g=s(f,t,!0))||(h=0,l?(e.lineStart(),e.point(g[0][0],g[0][1]),e.point(g[1][0],g[1][1]),e.lineEnd()):(e.point(g[1][0],g[1][1]),e.lineEnd(),e.lineStart(),e.point(g[0][0],g[0][1])))}!y||t&&Tn(t,f)||e.point(f[0],f[1]),t=f,r=y,n=m},lineEnd:function(){r&&e.lineEnd(),t=null},clean:function(){return h|(a&&r)<<1}}}function s(e,t,n){var i=m(e),r=m(t),s=[1,0,0],o=v(i,r),l=g(o,o),u=o[0],h=l-u*u;if(!h)return!n&&e;var c=a*l/h,p=-a*u/h,d=v(s,o),f=b(s,c),O=b(o,p);L(f,O);var x=d,w=g(f,x),C=g(x,x),E=w*w-C*(g(f,f)-1);if(!(E<0)){var S=$t(E),_=b(x,(-w-S)/C);if(L(_,f),_=y(_),!n)return _;var T,k=e[0],M=t[0],P=e[1],N=t[1];M<k&&(T=k,k=M,M=T);var D=M-k,I=Ht(D-It)<Nt,A=I||D<Nt;if(!I&&N<P&&(T=P,P=N,N=T),A?I?P+N>0^_[1]<(Ht(_[0]-k)<Nt?P:N):P<=_[1]&&_[1]<=N:D>It^(k<=_[0]&&_[0]<=M)){var R=b(x,(-w+S)/C);return L(R,f),[_,y(R)]}}}function o(t,n){var i=l?e:It-e,r=0;return t<-i?r|=1:t>i&&(r|=2),n<-i?r|=4:n>i&&(r|=8),r}var a=Gt(e),l=a>0,u=Ht(a)>Nt;return li(i,r,n,l?[0,-e]:[-It,e-It])},ci=function(e){return{stream:Te(e)}};ke.prototype={constructor:ke,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var pi=16,di=Gt(30*Ut),fi=function(e,t){return+t?De(e,t):Ne(e)},yi=Te({point:function(e,t){this.stream.point(e*Ut,t*Ut)}}),mi=function(){return Re(ze).scale(155.424).center([0,33.6442])},gi=function(){return mi().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])},vi=function(){function e(e){var t=e[0],n=e[1];return a=null,r.point(t,n),a||(s.point(t,n),a)||(o.point(t,n),a)}function t(){return n=i=null,e}var n,i,r,s,o,a,l=gi(),u=mi().rotate([154,0]).center([-2,58.5]).parallels([55,65]),h=mi().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(e,t){a=[e,t]}};return e.invert=function(e){var t=l.scale(),n=l.translate(),i=(e[0]-n[0])/t,r=(e[1]-n[1])/t;return(r>=.12&&r<.234&&i>=-.425&&i<-.214?u:r>=.166&&r<.234&&i>=-.214&&i<-.115?h:l).invert(e)},e.stream=function(e){return n&&i===e?n:n=Ue([l.stream(i=e),u.stream(e),h.stream(e)])},e.precision=function(e){return arguments.length?(l.precision(e),u.precision(e),h.precision(e),t()):l.precision()},e.scale=function(t){return arguments.length?(l.scale(t),u.scale(.35*t),h.scale(t),e.translate(l.translate())):l.scale()},e.translate=function(e){if(!arguments.length)return l.translate();var n=l.scale(),i=+e[0],a=+e[1];return r=l.translate(e).clipExtent([[i-.455*n,a-.238*n],[i+.455*n,a+.238*n]]).stream(c),s=u.translate([i-.307*n,a+.201*n]).clipExtent([[i-.425*n+Nt,a+.12*n+Nt],[i-.214*n-Nt,a+.234*n-Nt]]).stream(c),o=h.translate([i-.205*n,a+.212*n]).clipExtent([[i-.214*n+Nt,a+.166*n+Nt],[i-.115*n-Nt,a+.234*n-Nt]]).stream(c),t()},e.fitExtent=function(t,n){return Me(e,t,n)},e.fitSize=function(t,n){return Pe(e,t,n)},e.scale(1070)},Li=He(function(e){return $t(2/(1+e))});Li.invert=Be(function(e){return 2*s(e/2)});var bi=function(){return Ie(Li).scale(124.75).clipAngle(179.999)},Oi=He(function(e){return(e=r(e))&&e/Yt(e)});Oi.invert=Be(function(e){return e});var xi=function(){return Ie(Oi).scale(79.4188).clipAngle(179.999)};je.invert=function(e,t){return[e,2*Bt(qt(t))-At]};var wi=function(){return Ge(je).scale(961/Ft)},Ci=function(){return Re(qe).scale(109.5).parallels([30,30])};Ve.invert=Ve;var Ei=function(){return Ie(Ve).scale(152.63)},Si=function(){return Re(Xe).scale(131.154).center([0,13.9389])};Ye.invert=Be(Bt);var _i=function(){return Ie(Ye).scale(144.049).clipAngle(60)},Ti=function(){function e(){return r=s=null,o}var t,n,i,r,s,o,a=1,l=0,u=0,h=1,c=1,p=Hn,d=null,f=Hn;return o={stream:function(e){return r&&s===e?r:r=p(f(s=e))},clipExtent:function(r){return arguments.length?(f=null==r?(d=t=n=i=null,Hn):K(d=+r[0][0],t=+r[0][1],n=+r[1][0],i=+r[1][1]),e()):null==d?null:[[d,t],[n,i]]},scale:function(t){return arguments.length?(p=Ze((a=+t)*h,a*c,l,u),e()):a},translate:function(t){return arguments.length?(p=Ze(a*h,a*c,l=+t[0],u=+t[1]),e()):[l,u];
},reflectX:function(t){return arguments.length?(p=Ze(a*(h=t?-1:1),a*c,l,u),e()):h<0},reflectY:function(t){return arguments.length?(p=Ze(a*h,a*(c=t?-1:1),l,u),e()):c<0},fitExtent:function(e,t){return Me(o,e,t)},fitSize:function(e,t){return Pe(o,e,t)}}};$e.invert=Be(s);var ki=function(){return Ie($e).scale(249.5).clipAngle(90+Nt)};Ke.invert=Be(function(e){return 2*Bt(e)});var Mi=function(){return Ie(Ke).scale(250).clipAngle(142)};Qe.invert=function(e,t){return[-t,2*Bt(qt(e))-At]};var Pi=function(){var e=Ge(Qe),t=e.center,n=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])},e.rotate=function(e){return arguments.length?n([e[0],e[1],e.length>2?e[2]+90:90]):(e=n(),[e[0],e[1],e[2]-90])},n([0,0,90]).scale(159.155)};e.geoArea=sn,e.geoBounds=ln,e.geoCentroid=hn,e.geoCircle=En,e.geoClipExtent=Nn,e.geoDistance=zn,e.geoGraticule=re,e.geoGraticule10=se,e.geoInterpolate=Un,e.geoLength=An,e.geoPath=si,e.geoAlbers=gi,e.geoAlbersUsa=vi,e.geoAzimuthalEqualArea=bi,e.geoAzimuthalEqualAreaRaw=Li,e.geoAzimuthalEquidistant=xi,e.geoAzimuthalEquidistantRaw=Oi,e.geoConicConformal=Ci,e.geoConicConformalRaw=qe,e.geoConicEqualArea=mi,e.geoConicEqualAreaRaw=ze,e.geoConicEquidistant=Si,e.geoConicEquidistantRaw=Xe,e.geoEquirectangular=Ei,e.geoEquirectangularRaw=Ve,e.geoGnomonic=_i,e.geoGnomonicRaw=Ye,e.geoIdentity=Ti,e.geoProjection=Ie,e.geoProjectionMutator=Ae,e.geoMercator=wi,e.geoMercatorRaw=je,e.geoOrthographic=ki,e.geoOrthographicRaw=$e,e.geoStereographic=Mi,e.geoStereographicRaw=Ke,e.geoTransverseMercator=Pi,e.geoTransverseMercatorRaw=Qe,e.geoRotation=Cn,e.geoStream=en,e.geoTransform=ci,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){!function(e,n){n(t)}(this,function(e){"use strict";function t(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Q&&t.documentElement.namespaceURI===Q?t.createElement(e):t.createElementNS(n,e)}}function n(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function i(){return new r}function r(){this._="@"+(++ne).toString(36)}function s(e,t,n){return e=o(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function o(t,n,i){return function(r){var s=e.event;e.event=r;try{t.call(this,this.__data__,n,i)}finally{e.event=s}}}function a(e){return e.trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}function l(e){return function(){var t=this.__on;if(t){for(var n,i=0,r=-1,s=t.length;i<s;++i)n=t[i],e.type&&n.type!==e.type||n.name!==e.name?t[++r]=n:this.removeEventListener(n.type,n.listener,n.capture);++r?t.length=r:delete this.__on}}}function u(e,t,n){var i=ae.hasOwnProperty(e.type)?s:o;return function(r,s,o){var a,l=this.__on,u=i(t,s,o);if(l)for(var h=0,c=l.length;h<c;++h)if((a=l[h]).type===e.type&&a.name===e.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=u,a.capture=n),void(a.value=t);this.addEventListener(e.type,u,n),a={type:e.type,name:e.name,value:t,listener:u,capture:n},l?l.push(a):this.__on=[a]}}function h(t,n,i,r){var s=e.event;t.sourceEvent=e.event,e.event=t;try{return n.apply(i,r)}finally{e.event=s}}function c(){}function p(){return[]}function d(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function f(e,t,n,i,r,s){for(var o,a=0,l=t.length,u=s.length;a<u;++a)(o=t[a])?(o.__data__=s[a],i[a]=o):n[a]=new d(e,s[a]);for(;a<l;++a)(o=t[a])&&(r[a]=o)}function y(e,t,n,i,r,s,o){var a,l,u,h={},c=t.length,p=s.length,f=new Array(c);for(a=0;a<c;++a)(l=t[a])&&(f[a]=u=Oe+o.call(l,l.__data__,a,t),u in h?r[a]=l:h[u]=l);for(a=0;a<p;++a)u=Oe+o.call(e,s[a],a,s),(l=h[u])?(i[a]=l,l.__data__=s[a],h[u]=null):n[a]=new d(e,s[a]);for(a=0;a<c;++a)(l=t[a])&&h[f[a]]===l&&(r[a]=l)}function m(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function g(e){return function(){this.removeAttribute(e)}}function v(e){return function(){this.removeAttributeNS(e.space,e.local)}}function L(e,t){return function(){this.setAttribute(e,t)}}function b(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function O(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function x(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function w(e){return function(){this.style.removeProperty(e)}}function C(e,t,n){return function(){this.style.setProperty(e,t,n)}}function E(e,t,n){return function(){var i=t.apply(this,arguments);null==i?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function S(e){return function(){delete this[e]}}function _(e,t){return function(){this[e]=t}}function T(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function k(e){return e.trim().split(/^|\s+/)}function M(e){return e.classList||new P(e)}function P(e){this._node=e,this._names=k(e.getAttribute("class")||"")}function N(e,t){for(var n=M(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function D(e,t){for(var n=M(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function I(e){return function(){N(this,e)}}function A(e){return function(){D(this,e)}}function R(e,t){return function(){(t.apply(this,arguments)?N:D)(this,e)}}function F(){this.textContent=""}function z(e){return function(){this.textContent=e}}function U(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function H(){this.innerHTML=""}function B(e){return function(){this.innerHTML=e}}function j(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function G(){this.nextSibling&&this.parentNode.appendChild(this)}function W(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function q(){return null}function V(){var e=this.parentNode;e&&e.removeChild(this)}function X(e,t,n){var i=Ie(e),r=i.CustomEvent;r?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function Y(e,t){return function(){return X(this,e,t)}}function Z(e,t){return function(){return X(this,e,t.apply(this,arguments))}}function $(e,t){this._groups=e,this._parents=t}function K(){return new $([[document.documentElement]],Xe)}var Q="http://www.w3.org/1999/xhtml",J={svg:"http://www.w3.org/2000/svg",xhtml:Q,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ee=function(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),J.hasOwnProperty(t)?{space:J[t],local:e}:e},te=function(e){var i=ee(e);return(i.local?n:t)(i)},ne=0;r.prototype=i.prototype={constructor:r,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};var ie=function(e){return function(){return this.matches(e)}};if("undefined"!=typeof document){var re=document.documentElement;if(!re.matches){var se=re.webkitMatchesSelector||re.msMatchesSelector||re.mozMatchesSelector||re.oMatchesSelector;ie=function(e){return function(){return se.call(this,e)}}}}var oe=ie,ae={};if(e.event=null,"undefined"!=typeof document){var le=document.documentElement;"onmouseenter"in le||(ae={mouseenter:"mouseover",mouseleave:"mouseout"})}var ue=function(e,t,n){var i,r,s=a(e+""),o=s.length;{if(!(arguments.length<2)){for(h=t?u:l,null==n&&(n=!1),i=0;i<o;++i)this.each(h(s[i],t,n));return this}var h=this.node().__on;if(h)for(var c,p=0,d=h.length;p<d;++p)for(i=0,c=h[p];i<o;++i)if((r=s[i]).type===c.type&&r.name===c.name)return c.value}},he=function(){for(var t,n=e.event;t=n.sourceEvent;)n=t;return n},ce=function(e,t){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]},pe=function(e){var t=he();return t.changedTouches&&(t=t.changedTouches[0]),ce(e,t)},de=function(e){return null==e?c:function(){return this.querySelector(e)}},fe=function(e){"function"!=typeof e&&(e=de(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s,o,a=t[r],l=a.length,u=i[r]=new Array(l),h=0;h<l;++h)(s=a[h])&&(o=e.call(s,s.__data__,h,a))&&("__data__"in s&&(o.__data__=s.__data__),u[h]=o);return new $(i,this._parents)},ye=function(e){return null==e?p:function(){return this.querySelectorAll(e)}},me=function(e){"function"!=typeof e&&(e=ye(e));for(var t=this._groups,n=t.length,i=[],r=[],s=0;s<n;++s)for(var o,a=t[s],l=a.length,u=0;u<l;++u)(o=a[u])&&(i.push(e.call(o,o.__data__,u,a)),r.push(o));return new $(i,r)},ge=function(e){"function"!=typeof e&&(e=oe(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var s,o=t[r],a=o.length,l=i[r]=[],u=0;u<a;++u)(s=o[u])&&e.call(s,s.__data__,u,o)&&l.push(s);return new $(i,this._parents)},ve=function(e){return new Array(e.length)},Le=function(){return new $(this._enter||this._groups.map(ve),this._parents)};d.prototype={constructor:d,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var be=function(e){return function(){return e}},Oe="$",xe=function(e,t){if(!e)return d=new Array(this.size()),u=-1,this.each(function(e){d[++u]=e}),d;var n=t?y:f,i=this._parents,r=this._groups;"function"!=typeof e&&(e=be(e));for(var s=r.length,o=new Array(s),a=new Array(s),l=new Array(s),u=0;u<s;++u){var h=i[u],c=r[u],p=c.length,d=e.call(h,h&&h.__data__,u,i),m=d.length,g=a[u]=new Array(m),v=o[u]=new Array(m),L=l[u]=new Array(p);n(h,c,g,v,L,d,t);for(var b,O,x=0,w=0;x<m;++x)if(b=g[x]){for(x>=w&&(w=x+1);!(O=v[w])&&++w<m;);b._next=O||null}}return o=new $(o,i),o._enter=a,o._exit=l,o},we=function(){return new $(this._exit||this._groups.map(ve),this._parents)},Ce=function(e){for(var t=this._groups,n=e._groups,i=t.length,r=n.length,s=Math.min(i,r),o=new Array(i),a=0;a<s;++a)for(var l,u=t[a],h=n[a],c=u.length,p=o[a]=new Array(c),d=0;d<c;++d)(l=u[d]||h[d])&&(p[d]=l);for(;a<i;++a)o[a]=t[a];return new $(o,this._parents)},Ee=function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i,r=e[t],s=r.length-1,o=r[s];--s>=0;)(i=r[s])&&(o&&o!==i.nextSibling&&o.parentNode.insertBefore(i,o),o=i);return this},Se=function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=m);for(var n=this._groups,i=n.length,r=new Array(i),s=0;s<i;++s){for(var o,a=n[s],l=a.length,u=r[s]=new Array(l),h=0;h<l;++h)(o=a[h])&&(u[h]=o);u.sort(t)}return new $(r,this._parents).order()},_e=function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},Te=function(){var e=new Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e},ke=function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,s=i.length;r<s;++r){var o=i[r];if(o)return o}return null},Me=function(){var e=0;return this.each(function(){++e}),e},Pe=function(){return!this.node()},Ne=function(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r,s=t[n],o=0,a=s.length;o<a;++o)(r=s[o])&&e.call(r,r.__data__,o,s);return this},De=function(e,t){var n=ee(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==t?n.local?v:g:"function"==typeof t?n.local?x:O:n.local?b:L)(n,t))},Ie=function(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView},Ae=function(e,t,n){var i;return arguments.length>1?this.each((null==t?w:"function"==typeof t?E:C)(e,t,null==n?"":n)):Ie(i=this.node()).getComputedStyle(i,null).getPropertyValue(e)},Re=function(e,t){return arguments.length>1?this.each((null==t?S:"function"==typeof t?T:_)(e,t)):this.node()[e]};P.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var Fe=function(e,t){var n=k(e+"");if(arguments.length<2){for(var i=M(this.node()),r=-1,s=n.length;++r<s;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof t?R:t?I:A)(n,t))},ze=function(e){return arguments.length?this.each(null==e?F:("function"==typeof e?U:z)(e)):this.node().textContent},Ue=function(e){return arguments.length?this.each(null==e?H:("function"==typeof e?j:B)(e)):this.node().innerHTML},He=function(){return this.each(G)},Be=function(){return this.each(W)},je=function(e){var t="function"==typeof e?e:te(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},Ge=function(e,t){var n="function"==typeof e?e:te(e),i=null==t?q:"function"==typeof t?t:de(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})},We=function(){return this.each(V)},qe=function(e){return arguments.length?this.property("__data__",e):this.node().__data__},Ve=function(e,t){return this.each(("function"==typeof t?Z:Y)(e,t))},Xe=[null];$.prototype=K.prototype={constructor:$,select:fe,selectAll:me,filter:ge,data:xe,enter:Le,exit:we,merge:Ce,order:Ee,sort:Se,call:_e,nodes:Te,node:ke,size:Me,empty:Pe,each:Ne,attr:De,style:Ae,property:Re,classed:Fe,text:ze,html:Ue,raise:He,lower:Be,append:je,insert:Ge,remove:We,datum:qe,on:ue,dispatch:Ve};var Ye=function(e){return"string"==typeof e?new $([[document.querySelector(e)]],[document.documentElement]):new $([[e]],Xe)},Ze=function(e){return"string"==typeof e?new $([document.querySelectorAll(e)],[document.documentElement]):new $([null==e?[]:e],Xe)},$e=function(e,t,n){arguments.length<3&&(n=t,t=he().changedTouches);for(var i,r=0,s=t?t.length:0;r<s;++r)if((i=t[r]).identifier===n)return ce(e,i);return null},Ke=function(e,t){null==t&&(t=he().touches);for(var n=0,i=t?t.length:0,r=new Array(i);n<i;++n)r[n]=ce(e,t[n]);return r};e.creator=te,e.local=i,e.matcher=oe,e.mouse=pe,e.namespace=ee,e.namespaces=J,e.select=Ye,e.selectAll=Ze,e.selection=K,e.selector=de,e.selectorAll=ye,e.touch=$e,e.touches=Ke,e.window=Ie,e.customEvent=h,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){(function(e){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(32),s=i(r),o=n(38),a=i(o),l=n(1),u=i(l);t.default=s.default.Class(a.default,{id:"share-svg",doExport:function(){(0,u.default)("#share-link").hide(),(0,u.default)("#share-container").removeClass("has-link"),a.default.prototype.doExport.call(this)},downloadCanvas:function(e){try{var t=e.toDataURL("image/jpeg",.8).split(",")[1]}catch(t){var t=e.toDataURL().split(",")[1]}u.default.ajax({url:"https://api.imgur.com/3/image",type:"POST",beforeSend:function(e){e.setRequestHeader("Authorization","Client-ID e6d3cc2364556b2")},data:{type:"base64",image:t},dataType:"json",success:function(e){(0,u.default)("#share-container").addClass("has-link"),(0,u.default)("#share-link-message").attr("href",e.data.link),(0,u.default)("#share-link-message").text(e.data.link),(0,u.default)("#share-link").off("click").fadeIn(),(0,u.default)("#share-link").click(function(){(0,u.default)("#share-link-modal").dialog("open")})},failure:function(e){alert("Could not reach api.imgur.com. Sorry :(")}})},CLASS_NAME:"OpenLayers.Control.ShareMap"})}).call(t,function(){return this}())},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(32),s=i(r),o=n(1),a=i(o),l=n(34);t.default=s.default.Class(s.default.Control,{layer:null,save:function(){var e=new s.default.Format.GeoJSON,t=e.write(this.layer.features);(0,a.default)("#save-link").hide(),(0,a.default)("#save-container").removeClass("has-link"),a.default.ajax({type:"POST",url:this.url,data:{data:t},dataType:"json",success:function(e){if(e.error)alert("Save request failed.");else{var t=[location.protocol,"//",location.host,location.pathname].join("")+"?id="+e.file;(0,l.setQueryString)("id",e.file),(0,a.default)("#save-container").addClass("has-link"),(0,a.default)("#save-link-message").attr("href",t),(0,a.default)("#save-link-message").text(t),(0,a.default)("#save-link").off("click").fadeIn(),(0,a.default)("#save-link").click(function(){(0,a.default)("#save-link-modal").dialog("open")})}},failure:function(e){alert("Save request failed.")}})},initialize:function(e,t,n,i,r){s.default.Control.prototype.initialize.apply(this,[r]),this.map=e,this.layer=t,this.div=n,this.url=i,this.div.addEventListener("click",this.save.bind(this),!1)},CLASS_NAME:"OpenLayers.Control.SaveMap"})}]);
//# sourceMappingURL=interactivemap.30b7028e449fcfd5359f.js.map